# Story L2 — ELSTER UStVA XML/ERiC Export (je Monat/Quartal)

## Beschreibung

Als Nutzer:in möchte ich für die Umsatzsteuervoranmeldung (UStVA) je Zeitraum (Monat/Quartal) eine **ELSTER/ERiC-kompatible** Exportdatei erzeugen können, damit eine elektronische Übermittlung über ELSTER-konforme Prozesse möglich wird.

## Hintergrund / Recherche-Notizen (Stand: 2025-12-14)

- Ein reiner „XML-Upload“ in Mein ELSTER ist nicht das typische Modell.
- Historisch gab es eine „offene Schnittstelle“ (ElsterAnmeldung/XML), die für UStVA/LStA serverseitig abgeschaltet wurde (Quelle: Projektbeschreibung/README von Geierlein, einem früheren ELSTER-Client).
- Für eine **korrekte** elektronische Übermittlung wird in der Praxis **ERiC (Elster Rich Client)** bzw. eine Hersteller-Schnittstelle benötigt (inkl. Zertifikat/Signatur/Transport).

Konsequenz: In einer reinen Browser-SPA (Vite/React ohne Backend) ist ein „korrektes ELSTER-XML“ i.d.R. nicht ausreichend bzw. nicht submitbar, weil die ERiC-Übermittlung und Zertifikats-Handling fehlen.

## Akzeptanzkriterien

- Es existiert ein Export-Button in der UStVA-Ansicht: „ELSTER/ERiC Export“.
- Zeitraum wird eindeutig abgebildet:
  - Monat: `YYYY-MM`
  - Quartal: `YYYY-Qn`
- Export basiert auf bestehenden Berechnungen (UStVA-Auswertung) und den ELSTER-Stammdaten aus Settings.
- Export ist **technisch korrekt** im Sinne des gewählten Zielsystems:
  - Entweder: ERiC-kompatible Payload + Meta (für eine nachgelagerte Übermittlung)
  - Oder: direkter Versand über eine kleine Backend-Komponente (wenn umgesetzt)

## Out of Scope

- Vollständige ELSTER-Online-Submission inkl. Zertifikatsverwaltung im Browser, wenn dafür keine sichere/tragfähige Lösung existiert.

## Touchpoints

- UI: components/DatabaseGrid.tsx (UStVA View + Export Action)
- Settings: components/SettingsView.tsx, services/storageService.ts, types.ts
- Optional neu (falls erforderlich): server-side Modul/Service für ERiC

## Offene Entscheidungen

- Soll ein Backend eingeführt werden (Node/Express) um ERiC auszuführen, oder wird nur ein „ERiC-Request-Paket“ exportiert?
- Welche ERiC-Version/Schema-Variante wird unterstützt?

## Test-Hinweise

- `npm run check` bleibt grün.
- Manuell: Export erzeugen, Zeitraum im Dateinamen prüfen, Inhalte plausibel (Kennzahlen/Values).
