# Story J2 — DATEV-Preflight & Steuer-/Konten-Mapping

## Beschreibung
Für DATEV-nahe Exporte müssen Konten-/Steuerschlüssel konsistent sein. Diese Story ergänzt harte Validierungen (blocker) und klare Fehlhinweise, damit Exporte nicht „still“ fehlschlagen oder fehlerhafte Buchungssätze erzeugen.

## Akzeptanzkriterien
- Preflight blockt DATEV-Export, wenn:
  - Sollkonto/Habenkonto fehlen oder nicht plausibel sind (z.B. leer, keine Ziffern)
  - Datum fehlt/kein ISO-Datum
  - Betrag fehlt/ist 0 oder nicht plausibel
  - Steuerkategorie fehlt oder nicht in ein definiertes Steuerschlüssel-Mapping passt
- Warnungen (confirm) statt Blocker, wenn z.B.:
  - Summenprüfung Netto+MwSt ≠ Brutto (innerhalb Toleranz)
  - Lieferant/Belegnummer fehlen (optional je Exportprofil)
- Mapping-Regeln (Steuerkategorie → Steuerschlüssel) sind dokumentiert und zentral implementiert.

## Out of Scope
- Automatisches „Fixen“ von Daten (nur Hinweis/Block)
- Neue Seiten/Views

## Touchpoints (voraussichtlich)
- services/exportPreflight.ts
- services/ruleEngine.ts (falls Steuerkategorie-Ableitung angepasst werden muss)
- components/DatabaseGrid.tsx (Dialogtexte)

## Test-Hinweise
- Manuell: absichtlich unvollständige Belege erzeugen und prüfen, dass Blocker/Warnungen korrekt greifen.
