var Ky=Object.defineProperty;var s0=t=>{throw TypeError(t)};var Yy=(t,e,r)=>e in t?Ky(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Yr=(t,e,r)=>Yy(t,typeof e!="symbol"?e+"":e,r),up=(t,e,r)=>e.has(t)||s0("Cannot "+r);var dn=(t,e,r)=>(up(t,e,"read from private field"),r?r.call(t):e.get(t)),bi=(t,e,r)=>e.has(t)?s0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),xi=(t,e,r,xe)=>(up(t,e,"write to private field"),xe?xe.call(t,r):e.set(t,r),r),oi=(t,e,r)=>(up(t,e,"access private method"),r);var Oh=(t,e,r,xe)=>({set _(Ee){xi(t,e,Ee,r)},get _(){return dn(t,e,xe)}});function _mergeNamespaces(t,e){for(var r=0;r<e.length;r++){const xe=e[r];if(typeof xe!="string"&&!Array.isArray(xe)){for(const Ee in xe)if(Ee!=="default"&&!(Ee in t)){const Ae=Object.getOwnPropertyDescriptor(xe,Ee);Ae&&Object.defineProperty(t,Ee,Ae.get?Ae:{enumerable:!0,get:()=>xe[Ee]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const Ee of document.querySelectorAll('link[rel="modulepreload"]'))xe(Ee);new MutationObserver(Ee=>{for(const Ae of Ee)if(Ae.type==="childList")for(const Pe of Ae.addedNodes)Pe.tagName==="LINK"&&Pe.rel==="modulepreload"&&xe(Pe)}).observe(document,{childList:!0,subtree:!0});function r(Ee){const Ae={};return Ee.integrity&&(Ae.integrity=Ee.integrity),Ee.referrerPolicy&&(Ae.referrerPolicy=Ee.referrerPolicy),Ee.crossOrigin==="use-credentials"?Ae.credentials="include":Ee.crossOrigin==="anonymous"?Ae.credentials="omit":Ae.credentials="same-origin",Ae}function xe(Ee){if(Ee.ep)return;Ee.ep=!0;const Ae=r(Ee);fetch(Ee.href,Ae)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function getAugmentedNamespace(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function xe(){return this instanceof xe?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(xe){var Ee=Object.getOwnPropertyDescriptor(t,xe);Object.defineProperty(r,xe,Ee.get?Ee:{enumerable:!0,get:function(){return t[xe]}})}),r}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(xe,Ee,Ae){var Pe=null;if(Ae!==void 0&&(Pe=""+Ae),Ee.key!==void 0&&(Pe=""+Ee.key),"key"in Ee){Ae={};for(var Re in Ee)Re!=="key"&&(Ae[Re]=Ee[Re])}else Ae=Ee;return Ee=Ae.ref,{$$typeof:t,type:xe,key:Pe,ref:Ee!==void 0?Ee:null,props:Ae}}return reactJsxRuntime_production.Fragment=e,reactJsxRuntime_production.jsx=r,reactJsxRuntime_production.jsxs=r,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),xe=Symbol.for("react.strict_mode"),Ee=Symbol.for("react.profiler"),Ae=Symbol.for("react.consumer"),Pe=Symbol.for("react.context"),Re=Symbol.for("react.forward_ref"),Ce=Symbol.for("react.suspense"),Be=Symbol.for("react.memo"),ke=Symbol.for("react.lazy"),Me=Symbol.for("react.activity"),Fe=Symbol.iterator;function Ve(xn){return xn===null||typeof xn!="object"?null:(xn=Fe&&xn[Fe]||xn["@@iterator"],typeof xn=="function"?xn:null)}var Oe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$e=Object.assign,Ge={};function Ue(xn,Je,We){this.props=xn,this.context=Je,this.refs=Ge,this.updater=We||Oe}Ue.prototype.isReactComponent={},Ue.prototype.setState=function(xn,Je){if(typeof xn!="object"&&typeof xn!="function"&&xn!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,xn,Je,"setState")},Ue.prototype.forceUpdate=function(xn){this.updater.enqueueForceUpdate(this,xn,"forceUpdate")};function Ye(){}Ye.prototype=Ue.prototype;function Qe(xn,Je,We){this.props=xn,this.context=Je,this.refs=Ge,this.updater=We||Oe}var rn=Qe.prototype=new Ye;rn.constructor=Qe,$e(rn,Ue.prototype),rn.isPureReactComponent=!0;var tn=Array.isArray;function an(){}var qe={H:null,A:null,T:null,S:null},Ke=Object.prototype.hasOwnProperty;function sn(xn,Je,We){var Ze=We.ref;return{$$typeof:t,type:xn,key:Je,ref:Ze!==void 0?Ze:null,props:We}}function gn(xn,Je){return sn(xn.type,Je,xn.props)}function He(xn){return typeof xn=="object"&&xn!==null&&xn.$$typeof===t}function en(xn){var Je={"=":"=0",":":"=2"};return"$"+xn.replace(/[=:]/g,function(We){return Je[We]})}var cn=/\/+/g;function Sn(xn,Je){return typeof xn=="object"&&xn!==null&&xn.key!=null?en(""+xn.key):Je.toString(36)}function Tn(xn){switch(xn.status){case"fulfilled":return xn.value;case"rejected":throw xn.reason;default:switch(typeof xn.status=="string"?xn.then(an,an):(xn.status="pending",xn.then(function(Je){xn.status==="pending"&&(xn.status="fulfilled",xn.value=Je)},function(Je){xn.status==="pending"&&(xn.status="rejected",xn.reason=Je)})),xn.status){case"fulfilled":return xn.value;case"rejected":throw xn.reason}}throw xn}function hn(xn,Je,We,Ze,un){var yn=typeof xn;(yn==="undefined"||yn==="boolean")&&(xn=null);var _n=!1;if(xn===null)_n=!0;else switch(yn){case"bigint":case"string":case"number":_n=!0;break;case"object":switch(xn.$$typeof){case t:case e:_n=!0;break;case ke:return _n=xn._init,hn(_n(xn._payload),Je,We,Ze,un)}}if(_n)return un=un(xn),_n=Ze===""?"."+Sn(xn,0):Ze,tn(un)?(We="",_n!=null&&(We=_n.replace(cn,"$&/")+"/"),hn(un,Je,We,"",function($n){return $n})):un!=null&&(He(un)&&(un=gn(un,We+(un.key==null||xn&&xn.key===un.key?"":(""+un.key).replace(cn,"$&/")+"/")+_n)),Je.push(un)),1;_n=0;var wn=Ze===""?".":Ze+":";if(tn(xn))for(var kn=0;kn<xn.length;kn++)Ze=xn[kn],yn=wn+Sn(Ze,kn),_n+=hn(Ze,Je,We,yn,un);else if(kn=Ve(xn),typeof kn=="function")for(xn=kn.call(xn),kn=0;!(Ze=xn.next()).done;)Ze=Ze.value,yn=wn+Sn(Ze,kn++),_n+=hn(Ze,Je,We,yn,un);else if(yn==="object"){if(typeof xn.then=="function")return hn(Tn(xn),Je,We,Ze,un);throw Je=String(xn),Error("Objects are not valid as a React child (found: "+(Je==="[object Object]"?"object with keys {"+Object.keys(xn).join(", ")+"}":Je)+"). If you meant to render a collection of children, use an array instead.")}return _n}function pn(xn,Je,We){if(xn==null)return xn;var Ze=[],un=0;return hn(xn,Ze,"","",function(yn){return Je.call(We,yn,un++)}),Ze}function bn(xn){if(xn._status===-1){var Je=xn._result;Je=Je(),Je.then(function(We){(xn._status===0||xn._status===-1)&&(xn._status=1,xn._result=We)},function(We){(xn._status===0||xn._status===-1)&&(xn._status=2,xn._result=We)}),xn._status===-1&&(xn._status=0,xn._result=Je)}if(xn._status===1)return xn._result.default;throw xn._result}var fn=typeof reportError=="function"?reportError:function(xn){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Je=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof xn=="object"&&xn!==null&&typeof xn.message=="string"?String(xn.message):String(xn),error:xn});if(!window.dispatchEvent(Je))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",xn);return}console.error(xn)},An={map:pn,forEach:function(xn,Je,We){pn(xn,function(){Je.apply(this,arguments)},We)},count:function(xn){var Je=0;return pn(xn,function(){Je++}),Je},toArray:function(xn){return pn(xn,function(Je){return Je})||[]},only:function(xn){if(!He(xn))throw Error("React.Children.only expected to receive a single React element child.");return xn}};return react_production.Activity=Me,react_production.Children=An,react_production.Component=Ue,react_production.Fragment=r,react_production.Profiler=Ee,react_production.PureComponent=Qe,react_production.StrictMode=xe,react_production.Suspense=Ce,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=qe,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(xn){return qe.H.useMemoCache(xn)}},react_production.cache=function(xn){return function(){return xn.apply(null,arguments)}},react_production.cacheSignal=function(){return null},react_production.cloneElement=function(xn,Je,We){if(xn==null)throw Error("The argument must be a React element, but you passed "+xn+".");var Ze=$e({},xn.props),un=xn.key;if(Je!=null)for(yn in Je.key!==void 0&&(un=""+Je.key),Je)!Ke.call(Je,yn)||yn==="key"||yn==="__self"||yn==="__source"||yn==="ref"&&Je.ref===void 0||(Ze[yn]=Je[yn]);var yn=arguments.length-2;if(yn===1)Ze.children=We;else if(1<yn){for(var _n=Array(yn),wn=0;wn<yn;wn++)_n[wn]=arguments[wn+2];Ze.children=_n}return sn(xn.type,un,Ze)},react_production.createContext=function(xn){return xn={$$typeof:Pe,_currentValue:xn,_currentValue2:xn,_threadCount:0,Provider:null,Consumer:null},xn.Provider=xn,xn.Consumer={$$typeof:Ae,_context:xn},xn},react_production.createElement=function(xn,Je,We){var Ze,un={},yn=null;if(Je!=null)for(Ze in Je.key!==void 0&&(yn=""+Je.key),Je)Ke.call(Je,Ze)&&Ze!=="key"&&Ze!=="__self"&&Ze!=="__source"&&(un[Ze]=Je[Ze]);var _n=arguments.length-2;if(_n===1)un.children=We;else if(1<_n){for(var wn=Array(_n),kn=0;kn<_n;kn++)wn[kn]=arguments[kn+2];un.children=wn}if(xn&&xn.defaultProps)for(Ze in _n=xn.defaultProps,_n)un[Ze]===void 0&&(un[Ze]=_n[Ze]);return sn(xn,yn,un)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(xn){return{$$typeof:Re,render:xn}},react_production.isValidElement=He,react_production.lazy=function(xn){return{$$typeof:ke,_payload:{_status:-1,_result:xn},_init:bn}},react_production.memo=function(xn,Je){return{$$typeof:Be,type:xn,compare:Je===void 0?null:Je}},react_production.startTransition=function(xn){var Je=qe.T,We={};qe.T=We;try{var Ze=xn(),un=qe.S;un!==null&&un(We,Ze),typeof Ze=="object"&&Ze!==null&&typeof Ze.then=="function"&&Ze.then(an,fn)}catch(yn){fn(yn)}finally{Je!==null&&We.types!==null&&(Je.types=We.types),qe.T=Je}},react_production.unstable_useCacheRefresh=function(){return qe.H.useCacheRefresh()},react_production.use=function(xn){return qe.H.use(xn)},react_production.useActionState=function(xn,Je,We){return qe.H.useActionState(xn,Je,We)},react_production.useCallback=function(xn,Je){return qe.H.useCallback(xn,Je)},react_production.useContext=function(xn){return qe.H.useContext(xn)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(xn,Je){return qe.H.useDeferredValue(xn,Je)},react_production.useEffect=function(xn,Je){return qe.H.useEffect(xn,Je)},react_production.useEffectEvent=function(xn){return qe.H.useEffectEvent(xn)},react_production.useId=function(){return qe.H.useId()},react_production.useImperativeHandle=function(xn,Je,We){return qe.H.useImperativeHandle(xn,Je,We)},react_production.useInsertionEffect=function(xn,Je){return qe.H.useInsertionEffect(xn,Je)},react_production.useLayoutEffect=function(xn,Je){return qe.H.useLayoutEffect(xn,Je)},react_production.useMemo=function(xn,Je){return qe.H.useMemo(xn,Je)},react_production.useOptimistic=function(xn,Je){return qe.H.useOptimistic(xn,Je)},react_production.useReducer=function(xn,Je,We){return qe.H.useReducer(xn,Je,We)},react_production.useRef=function(xn){return qe.H.useRef(xn)},react_production.useState=function(xn){return qe.H.useState(xn)},react_production.useSyncExternalStore=function(xn,Je,We){return qe.H.useSyncExternalStore(xn,Je,We)},react_production.useTransition=function(){return qe.H.useTransition()},react_production.version="19.2.3",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(t){function e(hn,pn){var bn=hn.length;hn.push(pn);e:for(;0<bn;){var fn=bn-1>>>1,An=hn[fn];if(0<Ee(An,pn))hn[fn]=pn,hn[bn]=An,bn=fn;else break e}}function r(hn){return hn.length===0?null:hn[0]}function xe(hn){if(hn.length===0)return null;var pn=hn[0],bn=hn.pop();if(bn!==pn){hn[0]=bn;e:for(var fn=0,An=hn.length,xn=An>>>1;fn<xn;){var Je=2*(fn+1)-1,We=hn[Je],Ze=Je+1,un=hn[Ze];if(0>Ee(We,bn))Ze<An&&0>Ee(un,We)?(hn[fn]=un,hn[Ze]=bn,fn=Ze):(hn[fn]=We,hn[Je]=bn,fn=Je);else if(Ze<An&&0>Ee(un,bn))hn[fn]=un,hn[Ze]=bn,fn=Ze;else break e}}return pn}function Ee(hn,pn){var bn=hn.sortIndex-pn.sortIndex;return bn!==0?bn:hn.id-pn.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var Ae=performance;t.unstable_now=function(){return Ae.now()}}else{var Pe=Date,Re=Pe.now();t.unstable_now=function(){return Pe.now()-Re}}var Ce=[],Be=[],ke=1,Me=null,Fe=3,Ve=!1,Oe=!1,$e=!1,Ge=!1,Ue=typeof setTimeout=="function"?setTimeout:null,Ye=typeof clearTimeout=="function"?clearTimeout:null,Qe=typeof setImmediate<"u"?setImmediate:null;function rn(hn){for(var pn=r(Be);pn!==null;){if(pn.callback===null)xe(Be);else if(pn.startTime<=hn)xe(Be),pn.sortIndex=pn.expirationTime,e(Ce,pn);else break;pn=r(Be)}}function tn(hn){if($e=!1,rn(hn),!Oe)if(r(Ce)!==null)Oe=!0,an||(an=!0,en());else{var pn=r(Be);pn!==null&&Tn(tn,pn.startTime-hn)}}var an=!1,qe=-1,Ke=5,sn=-1;function gn(){return Ge?!0:!(t.unstable_now()-sn<Ke)}function He(){if(Ge=!1,an){var hn=t.unstable_now();sn=hn;var pn=!0;try{e:{Oe=!1,$e&&($e=!1,Ye(qe),qe=-1),Ve=!0;var bn=Fe;try{t:{for(rn(hn),Me=r(Ce);Me!==null&&!(Me.expirationTime>hn&&gn());){var fn=Me.callback;if(typeof fn=="function"){Me.callback=null,Fe=Me.priorityLevel;var An=fn(Me.expirationTime<=hn);if(hn=t.unstable_now(),typeof An=="function"){Me.callback=An,rn(hn),pn=!0;break t}Me===r(Ce)&&xe(Ce),rn(hn)}else xe(Ce);Me=r(Ce)}if(Me!==null)pn=!0;else{var xn=r(Be);xn!==null&&Tn(tn,xn.startTime-hn),pn=!1}}break e}finally{Me=null,Fe=bn,Ve=!1}pn=void 0}}finally{pn?en():an=!1}}}var en;if(typeof Qe=="function")en=function(){Qe(He)};else if(typeof MessageChannel<"u"){var cn=new MessageChannel,Sn=cn.port2;cn.port1.onmessage=He,en=function(){Sn.postMessage(null)}}else en=function(){Ue(He,0)};function Tn(hn,pn){qe=Ue(function(){hn(t.unstable_now())},pn)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(hn){hn.callback=null},t.unstable_forceFrameRate=function(hn){0>hn||125<hn?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ke=0<hn?Math.floor(1e3/hn):5},t.unstable_getCurrentPriorityLevel=function(){return Fe},t.unstable_next=function(hn){switch(Fe){case 1:case 2:case 3:var pn=3;break;default:pn=Fe}var bn=Fe;Fe=pn;try{return hn()}finally{Fe=bn}},t.unstable_requestPaint=function(){Ge=!0},t.unstable_runWithPriority=function(hn,pn){switch(hn){case 1:case 2:case 3:case 4:case 5:break;default:hn=3}var bn=Fe;Fe=hn;try{return pn()}finally{Fe=bn}},t.unstable_scheduleCallback=function(hn,pn,bn){var fn=t.unstable_now();switch(typeof bn=="object"&&bn!==null?(bn=bn.delay,bn=typeof bn=="number"&&0<bn?fn+bn:fn):bn=fn,hn){case 1:var An=-1;break;case 2:An=250;break;case 5:An=1073741823;break;case 4:An=1e4;break;default:An=5e3}return An=bn+An,hn={id:ke++,callback:pn,priorityLevel:hn,startTime:bn,expirationTime:An,sortIndex:-1},bn>fn?(hn.sortIndex=bn,e(Be,hn),r(Ce)===null&&hn===r(Be)&&($e?(Ye(qe),qe=-1):$e=!0,Tn(tn,bn-fn))):(hn.sortIndex=An,e(Ce,hn),Oe||Ve||(Oe=!0,an||(an=!0,en()))),hn},t.unstable_shouldYield=gn,t.unstable_wrapCallback=function(hn){var pn=Fe;return function(){var bn=Fe;Fe=pn;try{return hn.apply(this,arguments)}finally{Fe=bn}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var t=requireReact();function e(Ce){var Be="https://react.dev/errors/"+Ce;if(1<arguments.length){Be+="?args[]="+encodeURIComponent(arguments[1]);for(var ke=2;ke<arguments.length;ke++)Be+="&args[]="+encodeURIComponent(arguments[ke])}return"Minified React error #"+Ce+"; visit "+Be+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var xe={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},Ee=Symbol.for("react.portal");function Ae(Ce,Be,ke){var Me=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ee,key:Me==null?null:""+Me,children:Ce,containerInfo:Be,implementation:ke}}var Pe=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Re(Ce,Be){if(Ce==="font")return"";if(typeof Be=="string")return Be==="use-credentials"?Be:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=xe,reactDom_production.createPortal=function(Ce,Be){var ke=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Be||Be.nodeType!==1&&Be.nodeType!==9&&Be.nodeType!==11)throw Error(e(299));return Ae(Ce,Be,null,ke)},reactDom_production.flushSync=function(Ce){var Be=Pe.T,ke=xe.p;try{if(Pe.T=null,xe.p=2,Ce)return Ce()}finally{Pe.T=Be,xe.p=ke,xe.d.f()}},reactDom_production.preconnect=function(Ce,Be){typeof Ce=="string"&&(Be?(Be=Be.crossOrigin,Be=typeof Be=="string"?Be==="use-credentials"?Be:"":void 0):Be=null,xe.d.C(Ce,Be))},reactDom_production.prefetchDNS=function(Ce){typeof Ce=="string"&&xe.d.D(Ce)},reactDom_production.preinit=function(Ce,Be){if(typeof Ce=="string"&&Be&&typeof Be.as=="string"){var ke=Be.as,Me=Re(ke,Be.crossOrigin),Fe=typeof Be.integrity=="string"?Be.integrity:void 0,Ve=typeof Be.fetchPriority=="string"?Be.fetchPriority:void 0;ke==="style"?xe.d.S(Ce,typeof Be.precedence=="string"?Be.precedence:void 0,{crossOrigin:Me,integrity:Fe,fetchPriority:Ve}):ke==="script"&&xe.d.X(Ce,{crossOrigin:Me,integrity:Fe,fetchPriority:Ve,nonce:typeof Be.nonce=="string"?Be.nonce:void 0})}},reactDom_production.preinitModule=function(Ce,Be){if(typeof Ce=="string")if(typeof Be=="object"&&Be!==null){if(Be.as==null||Be.as==="script"){var ke=Re(Be.as,Be.crossOrigin);xe.d.M(Ce,{crossOrigin:ke,integrity:typeof Be.integrity=="string"?Be.integrity:void 0,nonce:typeof Be.nonce=="string"?Be.nonce:void 0})}}else Be==null&&xe.d.M(Ce)},reactDom_production.preload=function(Ce,Be){if(typeof Ce=="string"&&typeof Be=="object"&&Be!==null&&typeof Be.as=="string"){var ke=Be.as,Me=Re(ke,Be.crossOrigin);xe.d.L(Ce,ke,{crossOrigin:Me,integrity:typeof Be.integrity=="string"?Be.integrity:void 0,nonce:typeof Be.nonce=="string"?Be.nonce:void 0,type:typeof Be.type=="string"?Be.type:void 0,fetchPriority:typeof Be.fetchPriority=="string"?Be.fetchPriority:void 0,referrerPolicy:typeof Be.referrerPolicy=="string"?Be.referrerPolicy:void 0,imageSrcSet:typeof Be.imageSrcSet=="string"?Be.imageSrcSet:void 0,imageSizes:typeof Be.imageSizes=="string"?Be.imageSizes:void 0,media:typeof Be.media=="string"?Be.media:void 0})}},reactDom_production.preloadModule=function(Ce,Be){if(typeof Ce=="string")if(Be){var ke=Re(Be.as,Be.crossOrigin);xe.d.m(Ce,{as:typeof Be.as=="string"&&Be.as!=="script"?Be.as:void 0,crossOrigin:ke,integrity:typeof Be.integrity=="string"?Be.integrity:void 0})}else xe.d.m(Ce)},reactDom_production.requestFormReset=function(Ce){xe.d.r(Ce)},reactDom_production.unstable_batchedUpdates=function(Ce,Be){return Ce(Be)},reactDom_production.useFormState=function(Ce,Be,ke){return Pe.H.useFormState(Ce,Be,ke)},reactDom_production.useFormStatus=function(){return Pe.H.useHostTransitionStatus()},reactDom_production.version="19.2.3",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var t=requireScheduler(),e=requireReact(),r=requireReactDom();function xe(_e){var Se="https://react.dev/errors/"+_e;if(1<arguments.length){Se+="?args[]="+encodeURIComponent(arguments[1]);for(var Te=2;Te<arguments.length;Te++)Se+="&args[]="+encodeURIComponent(arguments[Te])}return"Minified React error #"+_e+"; visit "+Se+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Ee(_e){return!(!_e||_e.nodeType!==1&&_e.nodeType!==9&&_e.nodeType!==11)}function Ae(_e){var Se=_e,Te=_e;if(_e.alternate)for(;Se.return;)Se=Se.return;else{_e=Se;do Se=_e,(Se.flags&4098)!==0&&(Te=Se.return),_e=Se.return;while(_e)}return Se.tag===3?Te:null}function Pe(_e){if(_e.tag===13){var Se=_e.memoizedState;if(Se===null&&(_e=_e.alternate,_e!==null&&(Se=_e.memoizedState)),Se!==null)return Se.dehydrated}return null}function Re(_e){if(_e.tag===31){var Se=_e.memoizedState;if(Se===null&&(_e=_e.alternate,_e!==null&&(Se=_e.memoizedState)),Se!==null)return Se.dehydrated}return null}function Ce(_e){if(Ae(_e)!==_e)throw Error(xe(188))}function Be(_e){var Se=_e.alternate;if(!Se){if(Se=Ae(_e),Se===null)throw Error(xe(188));return Se!==_e?null:_e}for(var Te=_e,Ie=Se;;){var je=Te.return;if(je===null)break;var Xe=je.alternate;if(Xe===null){if(Ie=je.return,Ie!==null){Te=Ie;continue}break}if(je.child===Xe.child){for(Xe=je.child;Xe;){if(Xe===Te)return Ce(je),_e;if(Xe===Ie)return Ce(je),Se;Xe=Xe.sibling}throw Error(xe(188))}if(Te.return!==Ie.return)Te=je,Ie=Xe;else{for(var En=!1,On=je.child;On;){if(On===Te){En=!0,Te=je,Ie=Xe;break}if(On===Ie){En=!0,Ie=je,Te=Xe;break}On=On.sibling}if(!En){for(On=Xe.child;On;){if(On===Te){En=!0,Te=Xe,Ie=je;break}if(On===Ie){En=!0,Ie=Xe,Te=je;break}On=On.sibling}if(!En)throw Error(xe(189))}}if(Te.alternate!==Ie)throw Error(xe(190))}if(Te.tag!==3)throw Error(xe(188));return Te.stateNode.current===Te?_e:Se}function ke(_e){var Se=_e.tag;if(Se===5||Se===26||Se===27||Se===6)return _e;for(_e=_e.child;_e!==null;){if(Se=ke(_e),Se!==null)return Se;_e=_e.sibling}return null}var Me=Object.assign,Fe=Symbol.for("react.element"),Ve=Symbol.for("react.transitional.element"),Oe=Symbol.for("react.portal"),$e=Symbol.for("react.fragment"),Ge=Symbol.for("react.strict_mode"),Ue=Symbol.for("react.profiler"),Ye=Symbol.for("react.consumer"),Qe=Symbol.for("react.context"),rn=Symbol.for("react.forward_ref"),tn=Symbol.for("react.suspense"),an=Symbol.for("react.suspense_list"),qe=Symbol.for("react.memo"),Ke=Symbol.for("react.lazy"),sn=Symbol.for("react.activity"),gn=Symbol.for("react.memo_cache_sentinel"),He=Symbol.iterator;function en(_e){return _e===null||typeof _e!="object"?null:(_e=He&&_e[He]||_e["@@iterator"],typeof _e=="function"?_e:null)}var cn=Symbol.for("react.client.reference");function Sn(_e){if(_e==null)return null;if(typeof _e=="function")return _e.$$typeof===cn?null:_e.displayName||_e.name||null;if(typeof _e=="string")return _e;switch(_e){case $e:return"Fragment";case Ue:return"Profiler";case Ge:return"StrictMode";case tn:return"Suspense";case an:return"SuspenseList";case sn:return"Activity"}if(typeof _e=="object")switch(_e.$$typeof){case Oe:return"Portal";case Qe:return _e.displayName||"Context";case Ye:return(_e._context.displayName||"Context")+".Consumer";case rn:var Se=_e.render;return _e=_e.displayName,_e||(_e=Se.displayName||Se.name||"",_e=_e!==""?"ForwardRef("+_e+")":"ForwardRef"),_e;case qe:return Se=_e.displayName||null,Se!==null?Se:Sn(_e.type)||"Memo";case Ke:Se=_e._payload,_e=_e._init;try{return Sn(_e(Se))}catch{}}return null}var Tn=Array.isArray,hn=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pn=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,bn={pending:!1,data:null,method:null,action:null},fn=[],An=-1;function xn(_e){return{current:_e}}function Je(_e){0>An||(_e.current=fn[An],fn[An]=null,An--)}function We(_e,Se){An++,fn[An]=_e.current,_e.current=Se}var Ze=xn(null),un=xn(null),yn=xn(null),_n=xn(null);function wn(_e,Se){switch(We(yn,Se),We(un,_e),We(Ze,null),Se.nodeType){case 9:case 11:_e=(_e=Se.documentElement)&&(_e=_e.namespaceURI)?Cm(_e):0;break;default:if(_e=Se.tagName,Se=Se.namespaceURI)Se=Cm(Se),_e=Rm(Se,_e);else switch(_e){case"svg":_e=1;break;case"math":_e=2;break;default:_e=0}}Je(Ze),We(Ze,_e)}function kn(){Je(Ze),Je(un),Je(yn)}function $n(_e){_e.memoizedState!==null&&We(_n,_e);var Se=Ze.current,Te=Rm(Se,_e.type);Se!==Te&&(We(un,_e),We(Ze,Te))}function Ln(_e){un.current===_e&&(Je(Ze),Je(un)),_n.current===_e&&(Je(_n),Lh._currentValue=bn)}var Gn,Yn;function ii(_e){if(Gn===void 0)try{throw Error()}catch(Te){var Se=Te.stack.trim().match(/\n( *(at )?)/);Gn=Se&&Se[1]||"",Yn=-1<Te.stack.indexOf(`
    at`)?" (<anonymous>)":-1<Te.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Gn+_e+Yn}var Wn=!1;function Pn(_e,Se){if(!_e||Wn)return"";Wn=!0;var Te=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var Ie={DetermineComponentFrameRoot:function(){try{if(Se){var Ki=function(){throw Error()};if(Object.defineProperty(Ki.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ki,[])}catch(Ii){var Ci=Ii}Reflect.construct(_e,[],Ki)}else{try{Ki.call()}catch(Ii){Ci=Ii}_e.call(Ki.prototype)}}else{try{throw Error()}catch(Ii){Ci=Ii}(Ki=_e())&&typeof Ki.catch=="function"&&Ki.catch(function(){})}}catch(Ii){if(Ii&&Ci&&typeof Ii.stack=="string")return[Ii.stack,Ci.stack]}return[null,null]}};Ie.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var je=Object.getOwnPropertyDescriptor(Ie.DetermineComponentFrameRoot,"name");je&&je.configurable&&Object.defineProperty(Ie.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Xe=Ie.DetermineComponentFrameRoot(),En=Xe[0],On=Xe[1];if(En&&On){var ri=En.split(`
`),Ti=On.split(`
`);for(je=Ie=0;Ie<ri.length&&!ri[Ie].includes("DetermineComponentFrameRoot");)Ie++;for(;je<Ti.length&&!Ti[je].includes("DetermineComponentFrameRoot");)je++;if(Ie===ri.length||je===Ti.length)for(Ie=ri.length-1,je=Ti.length-1;1<=Ie&&0<=je&&ri[Ie]!==Ti[je];)je--;for(;1<=Ie&&0<=je;Ie--,je--)if(ri[Ie]!==Ti[je]){if(Ie!==1||je!==1)do if(Ie--,je--,0>je||ri[Ie]!==Ti[je]){var Oi=`
`+ri[Ie].replace(" at new "," at ");return _e.displayName&&Oi.includes("<anonymous>")&&(Oi=Oi.replace("<anonymous>",_e.displayName)),Oi}while(1<=Ie&&0<=je);break}}}finally{Wn=!1,Error.prepareStackTrace=Te}return(Te=_e?_e.displayName||_e.name:"")?ii(Te):""}function Zn(_e,Se){switch(_e.tag){case 26:case 27:case 5:return ii(_e.type);case 16:return ii("Lazy");case 13:return _e.child!==Se&&Se!==null?ii("Suspense Fallback"):ii("Suspense");case 19:return ii("SuspenseList");case 0:case 15:return Pn(_e.type,!1);case 11:return Pn(_e.type.render,!1);case 1:return Pn(_e.type,!0);case 31:return ii("Activity");default:return""}}function mn(_e){try{var Se="",Te=null;do Se+=Zn(_e,Te),Te=_e,_e=_e.return;while(_e);return Se}catch(Ie){return`
Error generating stack: `+Ie.message+`
`+Ie.stack}}var Cn=Object.prototype.hasOwnProperty,jn=t.unstable_scheduleCallback,Rn=t.unstable_cancelCallback,Dn=t.unstable_shouldYield,Jn=t.unstable_requestPaint,Qn=t.unstable_now,qn=t.unstable_getCurrentPriorityLevel,yi=t.unstable_ImmediatePriority,di=t.unstable_UserBlockingPriority,zi=t.unstable_NormalPriority,Ni=t.unstable_LowPriority,Gi=t.unstable_IdlePriority,ui=t.log,Vi=t.unstable_setDisableYieldValue,Di=null,Xi=null;function fi(_e){if(typeof ui=="function"&&Vi(_e),Xi&&typeof Xi.setStrictMode=="function")try{Xi.setStrictMode(Di,_e)}catch{}}var ni=Math.clz32?Math.clz32:hr,pi=Math.log,ji=Math.LN2;function hr(_e){return _e>>>=0,_e===0?32:31-(pi(_e)/ji|0)|0}var ar=256,Fn=262144,Si=4194304;function Mi(_e){var Se=_e&42;if(Se!==0)return Se;switch(_e&-_e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return _e&261888;case 262144:case 524288:case 1048576:case 2097152:return _e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return _e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return _e}}function ki(_e,Se,Te){var Ie=_e.pendingLanes;if(Ie===0)return 0;var je=0,Xe=_e.suspendedLanes,En=_e.pingedLanes;_e=_e.warmLanes;var On=Ie&134217727;return On!==0?(Ie=On&~Xe,Ie!==0?je=Mi(Ie):(En&=On,En!==0?je=Mi(En):Te||(Te=On&~_e,Te!==0&&(je=Mi(Te))))):(On=Ie&~Xe,On!==0?je=Mi(On):En!==0?je=Mi(En):Te||(Te=Ie&~_e,Te!==0&&(je=Mi(Te)))),je===0?0:Se!==0&&Se!==je&&(Se&Xe)===0&&(Xe=je&-je,Te=Se&-Se,Xe>=Te||Xe===32&&(Te&4194048)!==0)?Se:je}function $i(_e,Se){return(_e.pendingLanes&~(_e.suspendedLanes&~_e.pingedLanes)&Se)===0}function tr(_e,Se){switch(_e){case 1:case 2:case 4:case 8:case 64:return Se+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return Se+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hn(){var _e=Si;return Si<<=1,(Si&62914560)===0&&(Si=4194304),_e}function Un(_e){for(var Se=[],Te=0;31>Te;Te++)Se.push(_e);return Se}function ti(_e,Se){_e.pendingLanes|=Se,Se!==268435456&&(_e.suspendedLanes=0,_e.pingedLanes=0,_e.warmLanes=0)}function ei(_e,Se,Te,Ie,je,Xe){var En=_e.pendingLanes;_e.pendingLanes=Te,_e.suspendedLanes=0,_e.pingedLanes=0,_e.warmLanes=0,_e.expiredLanes&=Te,_e.entangledLanes&=Te,_e.errorRecoveryDisabledLanes&=Te,_e.shellSuspendCounter=0;var On=_e.entanglements,ri=_e.expirationTimes,Ti=_e.hiddenUpdates;for(Te=En&~Te;0<Te;){var Oi=31-ni(Te),Ki=1<<Oi;On[Oi]=0,ri[Oi]=-1;var Ci=Ti[Oi];if(Ci!==null)for(Ti[Oi]=null,Oi=0;Oi<Ci.length;Oi++){var Ii=Ci[Oi];Ii!==null&&(Ii.lane&=-536870913)}Te&=~Ki}Ie!==0&&si(_e,Ie,0),Xe!==0&&je===0&&_e.tag!==0&&(_e.suspendedLanes|=Xe&~(En&~Se))}function si(_e,Se,Te){_e.pendingLanes|=Se,_e.suspendedLanes&=~Se;var Ie=31-ni(Se);_e.entangledLanes|=Se,_e.entanglements[Ie]=_e.entanglements[Ie]|1073741824|Te&261930}function Ri(_e,Se){var Te=_e.entangledLanes|=Se;for(_e=_e.entanglements;Te;){var Ie=31-ni(Te),je=1<<Ie;je&Se|_e[Ie]&Se&&(_e[Ie]|=Se),Te&=~je}}function Bi(_e,Se){var Te=Se&-Se;return Te=(Te&42)!==0?1:er(Te),(Te&(_e.suspendedLanes|Se))!==0?0:Te}function er(_e){switch(_e){case 2:_e=1;break;case 8:_e=4;break;case 32:_e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:_e=128;break;case 268435456:_e=134217728;break;default:_e=0}return _e}function Zi(_e){return _e&=-_e,2<_e?8<_e?(_e&134217727)!==0?32:268435456:8:2}function Yi(){var _e=pn.p;return _e!==0?_e:(_e=window.event,_e===void 0?32:Zm(_e.type))}function fr(_e,Se){var Te=pn.p;try{return pn.p=_e,Se()}finally{pn.p=Te}}var ir=Math.random().toString(36).slice(2),Qi="__reactFiber$"+ir,rr="__reactProps$"+ir,cr="__reactContainer$"+ir,vr="__reactEvents$"+ir,wr="__reactListeners$"+ir,qr="__reactHandles$"+ir,Fr="__reactResources$"+ir,xs="__reactMarker$"+ir;function Ls(_e){delete _e[Qi],delete _e[rr],delete _e[vr],delete _e[wr],delete _e[qr]}function _s(_e){var Se=_e[Qi];if(Se)return Se;for(var Te=_e.parentNode;Te;){if(Se=Te[cr]||Te[Qi]){if(Te=Se.alternate,Se.child!==null||Te!==null&&Te.child!==null)for(_e=Vm(_e);_e!==null;){if(Te=_e[Qi])return Te;_e=Vm(_e)}return Se}_e=Te,Te=_e.parentNode}return null}function sa(_e){if(_e=_e[Qi]||_e[cr]){var Se=_e.tag;if(Se===5||Se===6||Se===13||Se===31||Se===26||Se===27||Se===3)return _e}return null}function Mo(_e){var Se=_e.tag;if(Se===5||Se===26||Se===27||Se===6)return _e.stateNode;throw Error(xe(33))}function Lo(_e){var Se=_e[Fr];return Se||(Se=_e[Fr]={hoistableStyles:new Map,hoistableScripts:new Map}),Se}function Es(_e){_e[xs]=!0}var ul=new Set,Au={};function yo(_e,Se){Qa(_e,Se),Qa(_e+"Capture",Se)}function Qa(_e,Se){for(Au[_e]=Se,_e=0;_e<Se.length;_e++)ul.add(Se[_e])}var nh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pu={},sc={};function Ol(_e){return Cn.call(sc,_e)?!0:Cn.call(Pu,_e)?!1:nh.test(_e)?sc[_e]=!0:(Pu[_e]=!0,!1)}function jl(_e,Se,Te){if(Ol(Se))if(Te===null)_e.removeAttribute(Se);else{switch(typeof Te){case"undefined":case"function":case"symbol":_e.removeAttribute(Se);return;case"boolean":var Ie=Se.toLowerCase().slice(0,5);if(Ie!=="data-"&&Ie!=="aria-"){_e.removeAttribute(Se);return}}_e.setAttribute(Se,""+Te)}}function rs(_e,Se,Te){if(Te===null)_e.removeAttribute(Se);else{switch(typeof Te){case"undefined":case"function":case"symbol":case"boolean":_e.removeAttribute(Se);return}_e.setAttribute(Se,""+Te)}}function ba(_e,Se,Te,Ie){if(Ie===null)_e.removeAttribute(Te);else{switch(typeof Ie){case"undefined":case"function":case"symbol":case"boolean":_e.removeAttribute(Te);return}_e.setAttributeNS(Se,Te,""+Ie)}}function Xs(_e){switch(typeof _e){case"bigint":case"boolean":case"number":case"string":case"undefined":return _e;case"object":return _e;default:return""}}function Tu(_e){var Se=_e.type;return(_e=_e.nodeName)&&_e.toLowerCase()==="input"&&(Se==="checkbox"||Se==="radio")}function Cu(_e,Se,Te){var Ie=Object.getOwnPropertyDescriptor(_e.constructor.prototype,Se);if(!_e.hasOwnProperty(Se)&&typeof Ie<"u"&&typeof Ie.get=="function"&&typeof Ie.set=="function"){var je=Ie.get,Xe=Ie.set;return Object.defineProperty(_e,Se,{configurable:!0,get:function(){return je.call(this)},set:function(En){Te=""+En,Xe.call(this,En)}}),Object.defineProperty(_e,Se,{enumerable:Ie.enumerable}),{getValue:function(){return Te},setValue:function(En){Te=""+En},stopTracking:function(){_e._valueTracker=null,delete _e[Se]}}}}function Ru(_e){if(!_e._valueTracker){var Se=Tu(_e)?"checked":"value";_e._valueTracker=Cu(_e,Se,""+_e[Se])}}function xa(_e){if(!_e)return!1;var Se=_e._valueTracker;if(!Se)return!0;var Te=Se.getValue(),Ie="";return _e&&(Ie=Tu(_e)?_e.checked?"true":"false":_e.value),_e=Ie,_e!==Te?(Se.setValue(_e),!0):!1}function vo(_e){if(_e=_e||(typeof document<"u"?document:void 0),typeof _e>"u")return null;try{return _e.activeElement||_e.body}catch{return _e.body}}var aa=/[\n"\\]/g;function qs(_e){return _e.replace(aa,function(Se){return"\\"+Se.charCodeAt(0).toString(16)+" "})}function Ul(_e,Se,Te,Ie,je,Xe,En,On){_e.name="",En!=null&&typeof En!="function"&&typeof En!="symbol"&&typeof En!="boolean"?_e.type=En:_e.removeAttribute("type"),Se!=null?En==="number"?(Se===0&&_e.value===""||_e.value!=Se)&&(_e.value=""+Xs(Se)):_e.value!==""+Xs(Se)&&(_e.value=""+Xs(Se)):En!=="submit"&&En!=="reset"||_e.removeAttribute("value"),Se!=null?zl(_e,En,Xs(Se)):Te!=null?zl(_e,En,Xs(Te)):Ie!=null&&_e.removeAttribute("value"),je==null&&Xe!=null&&(_e.defaultChecked=!!Xe),je!=null&&(_e.checked=je&&typeof je!="function"&&typeof je!="symbol"),On!=null&&typeof On!="function"&&typeof On!="symbol"&&typeof On!="boolean"?_e.name=""+Xs(On):_e.removeAttribute("name")}function ac(_e,Se,Te,Ie,je,Xe,En,On){if(Xe!=null&&typeof Xe!="function"&&typeof Xe!="symbol"&&typeof Xe!="boolean"&&(_e.type=Xe),Se!=null||Te!=null){if(!(Xe!=="submit"&&Xe!=="reset"||Se!=null)){Ru(_e);return}Te=Te!=null?""+Xs(Te):"",Se=Se!=null?""+Xs(Se):Te,On||Se===_e.value||(_e.value=Se),_e.defaultValue=Se}Ie=Ie??je,Ie=typeof Ie!="function"&&typeof Ie!="symbol"&&!!Ie,_e.checked=On?_e.checked:!!Ie,_e.defaultChecked=!!Ie,En!=null&&typeof En!="function"&&typeof En!="symbol"&&typeof En!="boolean"&&(_e.name=En),Ru(_e)}function zl(_e,Se,Te){Se==="number"&&vo(_e.ownerDocument)===_e||_e.defaultValue===""+Te||(_e.defaultValue=""+Te)}function Vo(_e,Se,Te,Ie){if(_e=_e.options,Se){Se={};for(var je=0;je<Te.length;je++)Se["$"+Te[je]]=!0;for(Te=0;Te<_e.length;Te++)je=Se.hasOwnProperty("$"+_e[Te].value),_e[Te].selected!==je&&(_e[Te].selected=je),je&&Ie&&(_e[Te].defaultSelected=!0)}else{for(Te=""+Xs(Te),Se=null,je=0;je<_e.length;je++){if(_e[je].value===Te){_e[je].selected=!0,Ie&&(_e[je].defaultSelected=!0);return}Se!==null||_e[je].disabled||(Se=_e[je])}Se!==null&&(Se.selected=!0)}}function Bu(_e,Se,Te){if(Se!=null&&(Se=""+Xs(Se),Se!==_e.value&&(_e.value=Se),Te==null)){_e.defaultValue!==Se&&(_e.defaultValue=Se);return}_e.defaultValue=Te!=null?""+Xs(Te):""}function oc(_e,Se,Te,Ie){if(Se==null){if(Ie!=null){if(Te!=null)throw Error(xe(92));if(Tn(Ie)){if(1<Ie.length)throw Error(xe(93));Ie=Ie[0]}Te=Ie}Te==null&&(Te=""),Se=Te}Te=Xs(Se),_e.defaultValue=Te,Ie=_e.textContent,Ie===Te&&Ie!==""&&Ie!==null&&(_e.value=Ie),Ru(_e)}function eo(_e,Se){if(Se){var Te=_e.firstChild;if(Te&&Te===_e.lastChild&&Te.nodeType===3){Te.nodeValue=Se;return}}_e.textContent=Se}var ih=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function uc(_e,Se,Te){var Ie=Se.indexOf("--")===0;Te==null||typeof Te=="boolean"||Te===""?Ie?_e.setProperty(Se,""):Se==="float"?_e.cssFloat="":_e[Se]="":Ie?_e.setProperty(Se,Te):typeof Te!="number"||Te===0||ih.has(Se)?Se==="float"?_e.cssFloat=Te:_e[Se]=(""+Te).trim():_e[Se]=Te+"px"}function cc(_e,Se,Te){if(Se!=null&&typeof Se!="object")throw Error(xe(62));if(_e=_e.style,Te!=null){for(var Ie in Te)!Te.hasOwnProperty(Ie)||Se!=null&&Se.hasOwnProperty(Ie)||(Ie.indexOf("--")===0?_e.setProperty(Ie,""):Ie==="float"?_e.cssFloat="":_e[Ie]="");for(var je in Se)Ie=Se[je],Se.hasOwnProperty(je)&&Te[je]!==Ie&&uc(_e,je,Ie)}else for(var Xe in Se)Se.hasOwnProperty(Xe)&&uc(_e,Xe,Se[Xe])}function za(_e){if(_e.indexOf("-")===-1)return!1;switch(_e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ql=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function cl(_e){return Hl.test(""+_e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":_e}function ss(){}var Nu=null;function Gl(_e){return _e=_e.target||_e.srcElement||window,_e.correspondingUseElement&&(_e=_e.correspondingUseElement),_e.nodeType===3?_e.parentNode:_e}var br=null,Do=null;function hc(_e){var Se=sa(_e);if(Se&&(_e=Se.stateNode)){var Te=_e[rr]||null;e:switch(_e=Se.stateNode,Se.type){case"input":if(Ul(_e,Te.value,Te.defaultValue,Te.defaultValue,Te.checked,Te.defaultChecked,Te.type,Te.name),Se=Te.name,Te.type==="radio"&&Se!=null){for(Te=_e;Te.parentNode;)Te=Te.parentNode;for(Te=Te.querySelectorAll('input[name="'+qs(""+Se)+'"][type="radio"]'),Se=0;Se<Te.length;Se++){var Ie=Te[Se];if(Ie!==_e&&Ie.form===_e.form){var je=Ie[rr]||null;if(!je)throw Error(xe(90));Ul(Ie,je.value,je.defaultValue,je.defaultValue,je.checked,je.defaultChecked,je.type,je.name)}}for(Se=0;Se<Te.length;Se++)Ie=Te[Se],Ie.form===_e.form&&xa(Ie)}break e;case"textarea":Bu(_e,Te.value,Te.defaultValue);break e;case"select":Se=Te.value,Se!=null&&Vo(_e,!!Te.multiple,Se,!1)}}}var Ea=!1;function ku(_e,Se,Te){if(Ea)return _e(Se,Te);Ea=!0;try{var Ie=_e(Se);return Ie}finally{if(Ea=!1,(br!==null||Do!==null)&&(gd(),br&&(Se=br,_e=Do,Do=br=null,hc(Se),_e)))for(Se=0;Se<_e.length;Se++)hc(_e[Se])}}function Fo(_e,Se){var Te=_e.stateNode;if(Te===null)return null;var Ie=Te[rr]||null;if(Ie===null)return null;Te=Ie[Se];e:switch(Se){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(Ie=!Ie.disabled)||(_e=_e.type,Ie=!(_e==="button"||_e==="input"||_e==="select"||_e==="textarea")),_e=!Ie;break e;default:_e=!1}if(_e)return null;if(Te&&typeof Te!="function")throw Error(xe(231,Se,typeof Te));return Te}var oa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hl=!1;if(oa)try{var dl={};Object.defineProperty(dl,"passive",{get:function(){hl=!0}}),window.addEventListener("test",dl,dl),window.removeEventListener("test",dl,dl)}catch{hl=!1}var to=null,Iu=null,Oo=null;function jo(){if(Oo)return Oo;var _e,Se=Iu,Te=Se.length,Ie,je="value"in to?to.value:to.textContent,Xe=je.length;for(_e=0;_e<Te&&Se[_e]===je[_e];_e++);var En=Te-_e;for(Ie=1;Ie<=En&&Se[Te-Ie]===je[Xe-Ie];Ie++);return Oo=je.slice(_e,1<Ie?1-Ie:void 0)}function qa(_e){var Se=_e.keyCode;return"charCode"in _e?(_e=_e.charCode,_e===0&&Se===13&&(_e=13)):_e=Se,_e===10&&(_e=13),32<=_e||_e===13?_e:0}function $l(){return!0}function Uo(){return!1}function Cs(_e){function Se(Te,Ie,je,Xe,En){this._reactName=Te,this._targetInst=je,this.type=Ie,this.nativeEvent=Xe,this.target=En,this.currentTarget=null;for(var On in _e)_e.hasOwnProperty(On)&&(Te=_e[On],this[On]=Te?Te(Xe):Xe[On]);return this.isDefaultPrevented=(Xe.defaultPrevented!=null?Xe.defaultPrevented:Xe.returnValue===!1)?$l:Uo,this.isPropagationStopped=Uo,this}return Me(Se.prototype,{preventDefault:function(){this.defaultPrevented=!0;var Te=this.nativeEvent;Te&&(Te.preventDefault?Te.preventDefault():typeof Te.returnValue!="unknown"&&(Te.returnValue=!1),this.isDefaultPrevented=$l)},stopPropagation:function(){var Te=this.nativeEvent;Te&&(Te.stopPropagation?Te.stopPropagation():typeof Te.cancelBubble!="unknown"&&(Te.cancelBubble=!0),this.isPropagationStopped=$l)},persist:function(){},isPersistent:$l}),Se}var Sa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(_e){return _e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pl=Cs(Sa),zo=Me({},Sa,{view:0,detail:0}),dc=Cs(zo),Wl,Ha,wa,Kl=Me({},zo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qo,button:0,buttons:0,relatedTarget:function(_e){return _e.relatedTarget===void 0?_e.fromElement===_e.srcElement?_e.toElement:_e.fromElement:_e.relatedTarget},movementX:function(_e){return"movementX"in _e?_e.movementX:(_e!==wa&&(wa&&_e.type==="mousemove"?(Wl=_e.screenX-wa.screenX,Ha=_e.screenY-wa.screenY):Ha=Wl=0,wa=_e),Wl)},movementY:function(_e){return"movementY"in _e?_e.movementY:Ha}}),bo=Cs(Kl),Ga=Me({},Kl,{dataTransfer:0}),Mu=Cs(Ga),gl=Me({},zo,{relatedTarget:0}),Lu=Cs(gl),Yl=Me({},Sa,{animationName:0,elapsedTime:0,pseudoElement:0}),rh=Cs(Yl),Vu=Me({},Sa,{clipboardData:function(_e){return"clipboardData"in _e?_e.clipboardData:window.clipboardData}}),Du=Cs(Vu),fc=Me({},Sa,{data:0}),ml=Cs(fc),Fu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ou={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sh(_e){var Se=this.nativeEvent;return Se.getModifierState?Se.getModifierState(_e):(_e=pc[_e])?!!Se[_e]:!1}function qo(){return sh}var yl=Me({},zo,{key:function(_e){if(_e.key){var Se=Fu[_e.key]||_e.key;if(Se!=="Unidentified")return Se}return _e.type==="keypress"?(_e=qa(_e),_e===13?"Enter":String.fromCharCode(_e)):_e.type==="keydown"||_e.type==="keyup"?Ou[_e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qo,charCode:function(_e){return _e.type==="keypress"?qa(_e):0},keyCode:function(_e){return _e.type==="keydown"||_e.type==="keyup"?_e.keyCode:0},which:function(_e){return _e.type==="keypress"?qa(_e):_e.type==="keydown"||_e.type==="keyup"?_e.keyCode:0}}),ju=Cs(yl),Ho=Me({},Kl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jl=Cs(Ho),nn=Me({},zo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qo}),Nn=Cs(nn),Xn=Me({},Sa,{propertyName:0,elapsedTime:0,pseudoElement:0}),li=Cs(Xn),Ei=Me({},Kl,{deltaX:function(_e){return"deltaX"in _e?_e.deltaX:"wheelDeltaX"in _e?-_e.wheelDeltaX:0},deltaY:function(_e){return"deltaY"in _e?_e.deltaY:"wheelDeltaY"in _e?-_e.wheelDeltaY:"wheelDelta"in _e?-_e.wheelDelta:0},deltaZ:0,deltaMode:0}),Fi=Cs(Ei),nr=Me({},Sa,{newState:0,oldState:0}),ur=Cs(nr),mr=[9,13,27,32],Er=oa&&"CompositionEvent"in window,Ar=null;oa&&"documentMode"in document&&(Ar=document.documentMode);var Ir=oa&&"TextEvent"in window&&!Ar,as=oa&&(!Er||Ar&&8<Ar&&11>=Ar),os=" ",ms=!1;function Vs(_e,Se){switch(_e){case"keyup":return mr.indexOf(Se.keyCode)!==-1;case"keydown":return Se.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ps(_e){return _e=_e.detail,typeof _e=="object"&&"data"in _e?_e.data:null}var Hs=!1;function ha(_e,Se){switch(_e){case"compositionend":return Ps(Se);case"keypress":return Se.which!==32?null:(ms=!0,os);case"textInput":return _e=Se.data,_e===os&&ms?null:_e;default:return null}}function xo(_e,Se){if(Hs)return _e==="compositionend"||!Er&&Vs(_e,Se)?(_e=jo(),Oo=Iu=to=null,Hs=!1,_e):null;switch(_e){case"paste":return null;case"keypress":if(!(Se.ctrlKey||Se.altKey||Se.metaKey)||Se.ctrlKey&&Se.altKey){if(Se.char&&1<Se.char.length)return Se.char;if(Se.which)return String.fromCharCode(Se.which)}return null;case"compositionend":return as&&Se.locale!=="ko"?null:Se.data;default:return null}}var gc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xl(_e){var Se=_e&&_e.nodeName&&_e.nodeName.toLowerCase();return Se==="input"?!!gc[_e.type]:Se==="textarea"}function Zl(_e,Se,Te,Ie){br?Do?Do.push(Ie):Do=[Ie]:br=Ie,Se=Ed(Se,"onChange"),0<Se.length&&(Te=new pl("onChange","change",null,Te,Ie),_e.push({event:Te,listeners:Se}))}var no=null,_o=null;function Uu(_e){Em(_e,0)}function Eo(_e){var Se=Mo(_e);if(xa(Se))return _e}function Zs(_e,Se){if(_e==="change")return Se}var vl=!1;if(oa){var Go;if(oa){var $o="oninput"in document;if(!$o){var Ql=document.createElement("div");Ql.setAttribute("oninput","return;"),$o=typeof Ql.oninput=="function"}Go=$o}else Go=!1;vl=Go&&(!document.documentMode||9<document.documentMode)}function Qs(){no&&(no.detachEvent("onpropertychange",mc),_o=no=null)}function mc(_e){if(_e.propertyName==="value"&&Eo(_o)){var Se=[];Zl(Se,_o,_e,Gl(_e)),ku(Uu,Se)}}function zu(_e,Se,Te){_e==="focusin"?(Qs(),no=Se,_o=Te,no.attachEvent("onpropertychange",mc)):_e==="focusout"&&Qs()}function yc(_e){if(_e==="selectionchange"||_e==="keyup"||_e==="keydown")return Eo(_o)}function $a(_e,Se){if(_e==="click")return Eo(Se)}function qu(_e,Se){if(_e==="input"||_e==="change")return Eo(Se)}function ah(_e,Se){return _e===Se&&(_e!==0||1/_e===1/Se)||_e!==_e&&Se!==Se}var ea=typeof Object.is=="function"?Object.is:ah;function Aa(_e,Se){if(ea(_e,Se))return!0;if(typeof _e!="object"||_e===null||typeof Se!="object"||Se===null)return!1;var Te=Object.keys(_e),Ie=Object.keys(Se);if(Te.length!==Ie.length)return!1;for(Ie=0;Ie<Te.length;Ie++){var je=Te[Ie];if(!Cn.call(Se,je)||!ea(_e[je],Se[je]))return!1}return!0}function da(_e){for(;_e&&_e.firstChild;)_e=_e.firstChild;return _e}function Pa(_e,Se){var Te=da(_e);_e=0;for(var Ie;Te;){if(Te.nodeType===3){if(Ie=_e+Te.textContent.length,_e<=Se&&Ie>=Se)return{node:Te,offset:Se-_e};_e=Ie}e:{for(;Te;){if(Te.nextSibling){Te=Te.nextSibling;break e}Te=Te.parentNode}Te=void 0}Te=da(Te)}}function So(_e,Se){return _e&&Se?_e===Se?!0:_e&&_e.nodeType===3?!1:Se&&Se.nodeType===3?So(_e,Se.parentNode):"contains"in _e?_e.contains(Se):_e.compareDocumentPosition?!!(_e.compareDocumentPosition(Se)&16):!1:!1}function Wa(_e){_e=_e!=null&&_e.ownerDocument!=null&&_e.ownerDocument.defaultView!=null?_e.ownerDocument.defaultView:window;for(var Se=vo(_e.document);Se instanceof _e.HTMLIFrameElement;){try{var Te=typeof Se.contentWindow.location.href=="string"}catch{Te=!1}if(Te)_e=Se.contentWindow;else break;Se=vo(_e.document)}return Se}function Ka(_e){var Se=_e&&_e.nodeName&&_e.nodeName.toLowerCase();return Se&&(Se==="input"&&(_e.type==="text"||_e.type==="search"||_e.type==="tel"||_e.type==="url"||_e.type==="password")||Se==="textarea"||_e.contentEditable==="true")}var eu=oa&&"documentMode"in document&&11>=document.documentMode,Gs=null,Wo=null,wo=null,io=!1;function Ta(_e,Se,Te){var Ie=Te.window===Te?Te.document:Te.nodeType===9?Te:Te.ownerDocument;io||Gs==null||Gs!==vo(Ie)||(Ie=Gs,"selectionStart"in Ie&&Ka(Ie)?Ie={start:Ie.selectionStart,end:Ie.selectionEnd}:(Ie=(Ie.ownerDocument&&Ie.ownerDocument.defaultView||window).getSelection(),Ie={anchorNode:Ie.anchorNode,anchorOffset:Ie.anchorOffset,focusNode:Ie.focusNode,focusOffset:Ie.focusOffset}),wo&&Aa(wo,Ie)||(wo=Ie,Ie=Ed(Wo,"onSelect"),0<Ie.length&&(Se=new pl("onSelect","select",null,Se,Te),_e.push({event:Se,listeners:Ie}),Se.target=Gs)))}function ta(_e,Se){var Te={};return Te[_e.toLowerCase()]=Se.toLowerCase(),Te["Webkit"+_e]="webkit"+Se,Te["Moz"+_e]="moz"+Se,Te}var Ca={animationend:ta("Animation","AnimationEnd"),animationiteration:ta("Animation","AnimationIteration"),animationstart:ta("Animation","AnimationStart"),transitionrun:ta("Transition","TransitionRun"),transitionstart:ta("Transition","TransitionStart"),transitioncancel:ta("Transition","TransitionCancel"),transitionend:ta("Transition","TransitionEnd")},Ko={},Yo={};oa&&(Yo=document.createElement("div").style,"AnimationEvent"in window||(delete Ca.animationend.animation,delete Ca.animationiteration.animation,delete Ca.animationstart.animation),"TransitionEvent"in window||delete Ca.transitionend.transition);function la(_e){if(Ko[_e])return Ko[_e];if(!Ca[_e])return _e;var Se=Ca[_e],Te;for(Te in Se)if(Se.hasOwnProperty(Te)&&Te in Yo)return Ko[_e]=Se[Te];return _e}var tu=la("animationend"),fa=la("animationiteration"),ro=la("animationstart"),Jr=la("transitionrun"),Xr=la("transitionstart"),ys=la("transitioncancel"),Ss=la("transitionend"),so=new Map,ao="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ao.push("scrollEnd");function $s(_e,Se){so.set(_e,Se),yo(Se,[_e])}var bl=typeof reportError=="function"?reportError:function(_e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof _e=="object"&&_e!==null&&typeof _e.message=="string"?String(_e.message):String(_e),error:_e});if(!window.dispatchEvent(Se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",_e);return}console.error(_e)},pa=[],xl=0,vc=0;function Hu(){for(var _e=xl,Se=vc=xl=0;Se<_e;){var Te=pa[Se];pa[Se++]=null;var Ie=pa[Se];pa[Se++]=null;var je=pa[Se];pa[Se++]=null;var Xe=pa[Se];if(pa[Se++]=null,Ie!==null&&je!==null){var En=Ie.pending;En===null?je.next=je:(je.next=En.next,En.next=je),Ie.pending=je}Xe!==0&&$u(Te,je,Xe)}}function Gu(_e,Se,Te,Ie){pa[xl++]=_e,pa[xl++]=Se,pa[xl++]=Te,pa[xl++]=Ie,vc|=Ie,_e.lanes|=Ie,_e=_e.alternate,_e!==null&&(_e.lanes|=Ie)}function bc(_e,Se,Te,Ie){return Gu(_e,Se,Te,Ie),Ws(_e)}function Ao(_e,Se){return Gu(_e,null,null,Se),Ws(_e)}function $u(_e,Se,Te){_e.lanes|=Te;var Ie=_e.alternate;Ie!==null&&(Ie.lanes|=Te);for(var je=!1,Xe=_e.return;Xe!==null;)Xe.childLanes|=Te,Ie=Xe.alternate,Ie!==null&&(Ie.childLanes|=Te),Xe.tag===22&&(_e=Xe.stateNode,_e===null||_e._visibility&1||(je=!0)),_e=Xe,Xe=Xe.return;return _e.tag===3?(Xe=_e.stateNode,je&&Se!==null&&(je=31-ni(Te),_e=Xe.hiddenUpdates,Ie=_e[je],Ie===null?_e[je]=[Se]:Ie.push(Se),Se.lane=Te|536870912),Xe):null}function Ws(_e){if(50<Ch)throw Ch=0,If=null,Error(xe(185));for(var Se=_e.return;Se!==null;)_e=Se,Se=_e.return;return _e.tag===3?_e.stateNode:null}var Ds={};function xc(_e,Se,Te,Ie){this.tag=_e,this.key=Te,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=Se,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Ie,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ks(_e,Se,Te,Ie){return new xc(_e,Se,Te,Ie)}function _c(_e){return _e=_e.prototype,!(!_e||!_e.isReactComponent)}function Ra(_e,Se){var Te=_e.alternate;return Te===null?(Te=Ks(_e.tag,Se,_e.key,_e.mode),Te.elementType=_e.elementType,Te.type=_e.type,Te.stateNode=_e.stateNode,Te.alternate=_e,_e.alternate=Te):(Te.pendingProps=Se,Te.type=_e.type,Te.flags=0,Te.subtreeFlags=0,Te.deletions=null),Te.flags=_e.flags&65011712,Te.childLanes=_e.childLanes,Te.lanes=_e.lanes,Te.child=_e.child,Te.memoizedProps=_e.memoizedProps,Te.memoizedState=_e.memoizedState,Te.updateQueue=_e.updateQueue,Se=_e.dependencies,Te.dependencies=Se===null?null:{lanes:Se.lanes,firstContext:Se.firstContext},Te.sibling=_e.sibling,Te.index=_e.index,Te.ref=_e.ref,Te.refCleanup=_e.refCleanup,Te}function Wu(_e,Se){_e.flags&=65011714;var Te=_e.alternate;return Te===null?(_e.childLanes=0,_e.lanes=Se,_e.child=null,_e.subtreeFlags=0,_e.memoizedProps=null,_e.memoizedState=null,_e.updateQueue=null,_e.dependencies=null,_e.stateNode=null):(_e.childLanes=Te.childLanes,_e.lanes=Te.lanes,_e.child=Te.child,_e.subtreeFlags=0,_e.deletions=null,_e.memoizedProps=Te.memoizedProps,_e.memoizedState=Te.memoizedState,_e.updateQueue=Te.updateQueue,_e.type=Te.type,Se=Te.dependencies,_e.dependencies=Se===null?null:{lanes:Se.lanes,firstContext:Se.firstContext}),_e}function nu(_e,Se,Te,Ie,je,Xe){var En=0;if(Ie=_e,typeof _e=="function")_c(_e)&&(En=1);else if(typeof _e=="string")En=Vy(_e,Te,Ze.current)?26:_e==="html"||_e==="head"||_e==="body"?27:5;else e:switch(_e){case sn:return _e=Ks(31,Te,Se,je),_e.elementType=sn,_e.lanes=Xe,_e;case $e:return Jo(Te.children,je,Xe,Se);case Ge:En=8,je|=24;break;case Ue:return _e=Ks(12,Te,Se,je|2),_e.elementType=Ue,_e.lanes=Xe,_e;case tn:return _e=Ks(13,Te,Se,je),_e.elementType=tn,_e.lanes=Xe,_e;case an:return _e=Ks(19,Te,Se,je),_e.elementType=an,_e.lanes=Xe,_e;default:if(typeof _e=="object"&&_e!==null)switch(_e.$$typeof){case Qe:En=10;break e;case Ye:En=9;break e;case rn:En=11;break e;case qe:En=14;break e;case Ke:En=16,Ie=null;break e}En=29,Te=Error(xe(130,_e===null?"null":typeof _e,"")),Ie=null}return Se=Ks(En,Te,Se,je),Se.elementType=_e,Se.type=Ie,Se.lanes=Xe,Se}function Jo(_e,Se,Te,Ie){return _e=Ks(7,_e,Ie,Se),_e.lanes=Te,_e}function Ku(_e,Se,Te){return _e=Ks(6,_e,null,Se),_e.lanes=Te,_e}function Ec(_e){var Se=Ks(18,null,null,0);return Se.stateNode=_e,Se}function iu(_e,Se,Te){return Se=Ks(4,_e.children!==null?_e.children:[],_e.key,Se),Se.lanes=Te,Se.stateNode={containerInfo:_e.containerInfo,pendingChildren:null,implementation:_e.implementation},Se}var Sc=new WeakMap;function Ba(_e,Se){if(typeof _e=="object"&&_e!==null){var Te=Sc.get(_e);return Te!==void 0?Te:(Se={value:_e,source:Se,stack:mn(Se)},Sc.set(_e,Se),Se)}return{value:_e,source:Se,stack:mn(Se)}}var ru=[],_l=0,wc=null,Yu=0,Na=[],ka=0,Xo=null,Ia=1,Ma="";function ga(_e,Se){ru[_l++]=Yu,ru[_l++]=wc,wc=_e,Yu=Se}function Wh(_e,Se,Te){Na[ka++]=Ia,Na[ka++]=Ma,Na[ka++]=Xo,Xo=_e;var Ie=Ia;_e=Ma;var je=32-ni(Ie)-1;Ie&=~(1<<je),Te+=1;var Xe=32-ni(Se)+je;if(30<Xe){var En=je-je%5;Xe=(Ie&(1<<En)-1).toString(32),Ie>>=En,je-=En,Ia=1<<32-ni(Se)+je|Te<<je|Ie,Ma=Xe+_e}else Ia=1<<Xe|Te<<je|Ie,Ma=_e}function oh(_e){_e.return!==null&&(ga(_e,1),Wh(_e,1,0))}function Ac(_e){for(;_e===wc;)wc=ru[--_l],ru[_l]=null,Yu=ru[--_l],ru[_l]=null;for(;_e===Xo;)Xo=Na[--ka],Na[ka]=null,Ma=Na[--ka],Na[ka]=null,Ia=Na[--ka],Na[ka]=null}function Kh(_e,Se){Na[ka++]=Ia,Na[ka++]=Ma,Na[ka++]=Xo,Ia=Se.id,Ma=Se.overflow,Xo=_e}var Fs=null,ts=null,Rr=!1,na=null,cs=!1,Ya=Error(xe(519));function Zo(_e){var Se=Error(xe(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw su(Ba(Se,_e)),Ya}function lh(_e){var Se=_e.stateNode,Te=_e.type,Ie=_e.memoizedProps;switch(Se[Qi]=_e,Se[rr]=Ie,Te){case"dialog":kr("cancel",Se),kr("close",Se);break;case"iframe":case"object":case"embed":kr("load",Se);break;case"video":case"audio":for(Te=0;Te<Bh.length;Te++)kr(Bh[Te],Se);break;case"source":kr("error",Se);break;case"img":case"image":case"link":kr("error",Se),kr("load",Se);break;case"details":kr("toggle",Se);break;case"input":kr("invalid",Se),ac(Se,Ie.value,Ie.defaultValue,Ie.checked,Ie.defaultChecked,Ie.type,Ie.name,!0);break;case"select":kr("invalid",Se);break;case"textarea":kr("invalid",Se),oc(Se,Ie.value,Ie.defaultValue,Ie.children)}Te=Ie.children,typeof Te!="string"&&typeof Te!="number"&&typeof Te!="bigint"||Se.textContent===""+Te||Ie.suppressHydrationWarning===!0||Pm(Se.textContent,Te)?(Ie.popover!=null&&(kr("beforetoggle",Se),kr("toggle",Se)),Ie.onScroll!=null&&kr("scroll",Se),Ie.onScrollEnd!=null&&kr("scrollend",Se),Ie.onClick!=null&&(Se.onclick=ss),Se=!0):Se=!1,Se||Zo(_e,!0)}function Po(_e){for(Fs=_e.return;Fs;)switch(Fs.tag){case 5:case 31:case 13:cs=!1;return;case 27:case 3:cs=!0;return;default:Fs=Fs.return}}function Os(_e){if(_e!==Fs)return!1;if(!Rr)return Po(_e),Rr=!0,!1;var Se=_e.tag,Te;if((Te=Se!==3&&Se!==27)&&((Te=Se===5)&&(Te=_e.type,Te=!(Te!=="form"&&Te!=="button")||Kf(_e.type,_e.memoizedProps)),Te=!Te),Te&&ts&&Zo(_e),Po(_e),Se===13){if(_e=_e.memoizedState,_e=_e!==null?_e.dehydrated:null,!_e)throw Error(xe(317));ts=Lm(_e)}else if(Se===31){if(_e=_e.memoizedState,_e=_e!==null?_e.dehydrated:null,!_e)throw Error(xe(317));ts=Lm(_e)}else Se===27?(Se=ts,bu(_e.type)?(_e=Qf,Qf=null,ts=_e):ts=Se):ts=Fs?po(_e.stateNode.nextSibling):null;return!0}function El(){ts=Fs=null,Rr=!1}function uh(){var _e=na;return _e!==null&&(ja===null?ja=_e:ja.push.apply(ja,_e),na=null),_e}function su(_e){na===null?na=[_e]:na.push(_e)}var Pc=xn(null),Qo=null,oo=null;function el(_e,Se,Te){We(Pc,Se._currentValue),Se._currentValue=Te}function La(_e){_e._currentValue=Pc.current,Je(Pc)}function au(_e,Se,Te){for(;_e!==null;){var Ie=_e.alternate;if((_e.childLanes&Se)!==Se?(_e.childLanes|=Se,Ie!==null&&(Ie.childLanes|=Se)):Ie!==null&&(Ie.childLanes&Se)!==Se&&(Ie.childLanes|=Se),_e===Te)break;_e=_e.return}}function Sl(_e,Se,Te,Ie){var je=_e.child;for(je!==null&&(je.return=_e);je!==null;){var Xe=je.dependencies;if(Xe!==null){var En=je.child;Xe=Xe.firstContext;e:for(;Xe!==null;){var On=Xe;Xe=je;for(var ri=0;ri<Se.length;ri++)if(On.context===Se[ri]){Xe.lanes|=Te,On=Xe.alternate,On!==null&&(On.lanes|=Te),au(Xe.return,Te,_e),Ie||(En=null);break e}Xe=On.next}}else if(je.tag===18){if(En=je.return,En===null)throw Error(xe(341));En.lanes|=Te,Xe=En.alternate,Xe!==null&&(Xe.lanes|=Te),au(En,Te,_e),En=null}else En=je.child;if(En!==null)En.return=je;else for(En=je;En!==null;){if(En===_e){En=null;break}if(je=En.sibling,je!==null){je.return=En.return,En=je;break}En=En.return}je=En}}function tl(_e,Se,Te,Ie){_e=null;for(var je=Se,Xe=!1;je!==null;){if(!Xe){if((je.flags&524288)!==0)Xe=!0;else if((je.flags&262144)!==0)break}if(je.tag===10){var En=je.alternate;if(En===null)throw Error(xe(387));if(En=En.memoizedProps,En!==null){var On=je.type;ea(je.pendingProps.value,En.value)||(_e!==null?_e.push(On):_e=[On])}}else if(je===_n.current){if(En=je.alternate,En===null)throw Error(xe(387));En.memoizedState.memoizedState!==je.memoizedState.memoizedState&&(_e!==null?_e.push(Lh):_e=[Lh])}je=je.return}_e!==null&&Sl(Se,_e,Te,Ie),Se.flags|=262144}function Tc(_e){for(_e=_e.firstContext;_e!==null;){if(!ea(_e.context._currentValue,_e.memoizedValue))return!0;_e=_e.next}return!1}function nl(_e){Qo=_e,oo=null,_e=_e.dependencies,_e!==null&&(_e.firstContext=null)}function js(_e){return Yh(Qo,_e)}function Cc(_e,Se){return Qo===null&&nl(_e),Yh(_e,Se)}function Yh(_e,Se){var Te=Se._currentValue;if(Se={context:Se,memoizedValue:Te,next:null},oo===null){if(_e===null)throw Error(xe(308));oo=Se,_e.dependencies={lanes:0,firstContext:Se},_e.flags|=524288}else oo=oo.next=Se;return Te}var Xd=typeof AbortController<"u"?AbortController:function(){var _e=[],Se=this.signal={aborted:!1,addEventListener:function(Te,Ie){_e.push(Ie)}};this.abort=function(){Se.aborted=!0,_e.forEach(function(Te){return Te()})}},Zd=t.unstable_scheduleCallback,Qd=t.unstable_NormalPriority,vs={$$typeof:Qe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ou(){return{controller:new Xd,data:new Map,refCount:0}}function Ju(_e){_e.refCount--,_e.refCount===0&&Zd(Qd,function(){_e.controller.abort()})}var Xu=null,Rc=0,De=0,ze=null;function on(_e,Se){if(Xu===null){var Te=Xu=[];Rc=0,De=Of(),ze={status:"pending",value:void 0,then:function(Ie){Te.push(Ie)}}}return Rc++,Se.then(vn,vn),Se}function vn(){if(--Rc===0&&Xu!==null){ze!==null&&(ze.status="fulfilled");var _e=Xu;Xu=null,De=0,ze=null;for(var Se=0;Se<_e.length;Se++)(0,_e[Se])()}}function Bn(_e,Se){var Te=[],Ie={status:"pending",value:null,reason:null,then:function(je){Te.push(je)}};return _e.then(function(){Ie.status="fulfilled",Ie.value=Se;for(var je=0;je<Te.length;je++)(0,Te[je])(Se)},function(je){for(Ie.status="rejected",Ie.reason=je,je=0;je<Te.length;je++)(0,Te[je])(void 0)}),Ie}var In=hn.S;hn.S=function(_e,Se){Jg=Qn(),typeof Se=="object"&&Se!==null&&typeof Se.then=="function"&&on(_e,Se),In!==null&&In(_e,Se)};var Mn=xn(null);function Vn(){var _e=Mn.current;return _e!==null?_e:is.pooledCache}function zn(_e,Se){Se===null?We(Mn,Mn.current):We(Mn,Se.pool)}function Kn(){var _e=Vn();return _e===null?null:{parent:vs._currentValue,pool:_e}}var ci=Error(xe(460)),Ai=Error(xe(474)),wi=Error(xe(542)),vi={then:function(){}};function Wi(_e){return _e=_e.status,_e==="fulfilled"||_e==="rejected"}function Li(_e,Se,Te){switch(Te=_e[Te],Te===void 0?_e.push(Se):Te!==Se&&(Se.then(ss,ss),Se=Te),Se.status){case"fulfilled":return Se.value;case"rejected":throw _e=Se.reason,Ji(_e),_e;default:if(typeof Se.status=="string")Se.then(ss,ss);else{if(_e=is,_e!==null&&100<_e.shellSuspendCounter)throw Error(xe(482));_e=Se,_e.status="pending",_e.then(function(Ie){if(Se.status==="pending"){var je=Se;je.status="fulfilled",je.value=Ie}},function(Ie){if(Se.status==="pending"){var je=Se;je.status="rejected",je.reason=Ie}})}switch(Se.status){case"fulfilled":return Se.value;case"rejected":throw _e=Se.reason,Ji(_e),_e}throw mi=Se,ci}}function hi(_e){try{var Se=_e._init;return Se(_e._payload)}catch(Te){throw Te!==null&&typeof Te=="object"&&typeof Te.then=="function"?(mi=Te,ci):Te}}var mi=null;function qi(){if(mi===null)throw Error(xe(459));var _e=mi;return mi=null,_e}function Ji(_e){if(_e===ci||_e===wi)throw Error(xe(483))}var Ui=null,lr=0;function sr(_e){var Se=lr;return lr+=1,Ui===null&&(Ui=[]),Li(Ui,_e,Se)}function gr(_e,Se){Se=Se.props.ref,_e.ref=Se!==void 0?Se:null}function or(_e,Se){throw Se.$$typeof===Fe?Error(xe(525)):(_e=Object.prototype.toString.call(Se),Error(xe(31,_e==="[object Object]"?"object with keys {"+Object.keys(Se).join(", ")+"}":_e)))}function Or(_e){function Se(_i,gi){if(_e){var Pi=_i.deletions;Pi===null?(_i.deletions=[gi],_i.flags|=16):Pi.push(gi)}}function Te(_i,gi){if(!_e)return null;for(;gi!==null;)Se(_i,gi),gi=gi.sibling;return null}function Ie(_i){for(var gi=new Map;_i!==null;)_i.key!==null?gi.set(_i.key,_i):gi.set(_i.index,_i),_i=_i.sibling;return gi}function je(_i,gi){return _i=Ra(_i,gi),_i.index=0,_i.sibling=null,_i}function Xe(_i,gi,Pi){return _i.index=Pi,_e?(Pi=_i.alternate,Pi!==null?(Pi=Pi.index,Pi<gi?(_i.flags|=67108866,gi):Pi):(_i.flags|=67108866,gi)):(_i.flags|=1048576,gi)}function En(_i){return _e&&_i.alternate===null&&(_i.flags|=67108866),_i}function On(_i,gi,Pi,Hi){return gi===null||gi.tag!==6?(gi=Ku(Pi,_i.mode,Hi),gi.return=_i,gi):(gi=je(gi,Pi),gi.return=_i,gi)}function ri(_i,gi,Pi,Hi){var yr=Pi.type;return yr===$e?Oi(_i,gi,Pi.props.children,Hi,Pi.key):gi!==null&&(gi.elementType===yr||typeof yr=="object"&&yr!==null&&yr.$$typeof===Ke&&hi(yr)===gi.type)?(gi=je(gi,Pi.props),gr(gi,Pi),gi.return=_i,gi):(gi=nu(Pi.type,Pi.key,Pi.props,null,_i.mode,Hi),gr(gi,Pi),gi.return=_i,gi)}function Ti(_i,gi,Pi,Hi){return gi===null||gi.tag!==4||gi.stateNode.containerInfo!==Pi.containerInfo||gi.stateNode.implementation!==Pi.implementation?(gi=iu(Pi,_i.mode,Hi),gi.return=_i,gi):(gi=je(gi,Pi.children||[]),gi.return=_i,gi)}function Oi(_i,gi,Pi,Hi,yr){return gi===null||gi.tag!==7?(gi=Jo(Pi,_i.mode,Hi,yr),gi.return=_i,gi):(gi=je(gi,Pi),gi.return=_i,gi)}function Ki(_i,gi,Pi){if(typeof gi=="string"&&gi!==""||typeof gi=="number"||typeof gi=="bigint")return gi=Ku(""+gi,_i.mode,Pi),gi.return=_i,gi;if(typeof gi=="object"&&gi!==null){switch(gi.$$typeof){case Ve:return Pi=nu(gi.type,gi.key,gi.props,null,_i.mode,Pi),gr(Pi,gi),Pi.return=_i,Pi;case Oe:return gi=iu(gi,_i.mode,Pi),gi.return=_i,gi;case Ke:return gi=hi(gi),Ki(_i,gi,Pi)}if(Tn(gi)||en(gi))return gi=Jo(gi,_i.mode,Pi,null),gi.return=_i,gi;if(typeof gi.then=="function")return Ki(_i,sr(gi),Pi);if(gi.$$typeof===Qe)return Ki(_i,Cc(_i,gi),Pi);or(_i,gi)}return null}function Ci(_i,gi,Pi,Hi){var yr=gi!==null?gi.key:null;if(typeof Pi=="string"&&Pi!==""||typeof Pi=="number"||typeof Pi=="bigint")return yr!==null?null:On(_i,gi,""+Pi,Hi);if(typeof Pi=="object"&&Pi!==null){switch(Pi.$$typeof){case Ve:return Pi.key===yr?ri(_i,gi,Pi,Hi):null;case Oe:return Pi.key===yr?Ti(_i,gi,Pi,Hi):null;case Ke:return Pi=hi(Pi),Ci(_i,gi,Pi,Hi)}if(Tn(Pi)||en(Pi))return yr!==null?null:Oi(_i,gi,Pi,Hi,null);if(typeof Pi.then=="function")return Ci(_i,gi,sr(Pi),Hi);if(Pi.$$typeof===Qe)return Ci(_i,gi,Cc(_i,Pi),Hi);or(_i,Pi)}return null}function Ii(_i,gi,Pi,Hi,yr){if(typeof Hi=="string"&&Hi!==""||typeof Hi=="number"||typeof Hi=="bigint")return _i=_i.get(Pi)||null,On(gi,_i,""+Hi,yr);if(typeof Hi=="object"&&Hi!==null){switch(Hi.$$typeof){case Ve:return _i=_i.get(Hi.key===null?Pi:Hi.key)||null,ri(gi,_i,Hi,yr);case Oe:return _i=_i.get(Hi.key===null?Pi:Hi.key)||null,Ti(gi,_i,Hi,yr);case Ke:return Hi=hi(Hi),Ii(_i,gi,Pi,Hi,yr)}if(Tn(Hi)||en(Hi))return _i=_i.get(Pi)||null,Oi(gi,_i,Hi,yr,null);if(typeof Hi.then=="function")return Ii(_i,gi,Pi,sr(Hi),yr);if(Hi.$$typeof===Qe)return Ii(_i,gi,Pi,Cc(gi,Hi),yr);or(gi,Hi)}return null}function dr(_i,gi,Pi,Hi){for(var yr=null,Ur=null,pr=gi,Tr=gi=0,Vr=null;pr!==null&&Tr<Pi.length;Tr++){pr.index>Tr?(Vr=pr,pr=null):Vr=pr.sibling;var zr=Ci(_i,pr,Pi[Tr],Hi);if(zr===null){pr===null&&(pr=Vr);break}_e&&pr&&zr.alternate===null&&Se(_i,pr),gi=Xe(zr,gi,Tr),Ur===null?yr=zr:Ur.sibling=zr,Ur=zr,pr=Vr}if(Tr===Pi.length)return Te(_i,pr),Rr&&ga(_i,Tr),yr;if(pr===null){for(;Tr<Pi.length;Tr++)pr=Ki(_i,Pi[Tr],Hi),pr!==null&&(gi=Xe(pr,gi,Tr),Ur===null?yr=pr:Ur.sibling=pr,Ur=pr);return Rr&&ga(_i,Tr),yr}for(pr=Ie(pr);Tr<Pi.length;Tr++)Vr=Ii(pr,_i,Tr,Pi[Tr],Hi),Vr!==null&&(_e&&Vr.alternate!==null&&pr.delete(Vr.key===null?Tr:Vr.key),gi=Xe(Vr,gi,Tr),Ur===null?yr=Vr:Ur.sibling=Vr,Ur=Vr);return _e&&pr.forEach(function(wu){return Se(_i,wu)}),Rr&&ga(_i,Tr),yr}function _r(_i,gi,Pi,Hi){if(Pi==null)throw Error(xe(151));for(var yr=null,Ur=null,pr=gi,Tr=gi=0,Vr=null,zr=Pi.next();pr!==null&&!zr.done;Tr++,zr=Pi.next()){pr.index>Tr?(Vr=pr,pr=null):Vr=pr.sibling;var wu=Ci(_i,pr,zr.value,Hi);if(wu===null){pr===null&&(pr=Vr);break}_e&&pr&&wu.alternate===null&&Se(_i,pr),gi=Xe(wu,gi,Tr),Ur===null?yr=wu:Ur.sibling=wu,Ur=wu,pr=Vr}if(zr.done)return Te(_i,pr),Rr&&ga(_i,Tr),yr;if(pr===null){for(;!zr.done;Tr++,zr=Pi.next())zr=Ki(_i,zr.value,Hi),zr!==null&&(gi=Xe(zr,gi,Tr),Ur===null?yr=zr:Ur.sibling=zr,Ur=zr);return Rr&&ga(_i,Tr),yr}for(pr=Ie(pr);!zr.done;Tr++,zr=Pi.next())zr=Ii(pr,_i,Tr,zr.value,Hi),zr!==null&&(_e&&zr.alternate!==null&&pr.delete(zr.key===null?Tr:zr.key),gi=Xe(zr,gi,Tr),Ur===null?yr=zr:Ur.sibling=zr,Ur=zr);return _e&&pr.forEach(function(Wy){return Se(_i,Wy)}),Rr&&ga(_i,Tr),yr}function es(_i,gi,Pi,Hi){if(typeof Pi=="object"&&Pi!==null&&Pi.type===$e&&Pi.key===null&&(Pi=Pi.props.children),typeof Pi=="object"&&Pi!==null){switch(Pi.$$typeof){case Ve:e:{for(var yr=Pi.key;gi!==null;){if(gi.key===yr){if(yr=Pi.type,yr===$e){if(gi.tag===7){Te(_i,gi.sibling),Hi=je(gi,Pi.props.children),Hi.return=_i,_i=Hi;break e}}else if(gi.elementType===yr||typeof yr=="object"&&yr!==null&&yr.$$typeof===Ke&&hi(yr)===gi.type){Te(_i,gi.sibling),Hi=je(gi,Pi.props),gr(Hi,Pi),Hi.return=_i,_i=Hi;break e}Te(_i,gi);break}else Se(_i,gi);gi=gi.sibling}Pi.type===$e?(Hi=Jo(Pi.props.children,_i.mode,Hi,Pi.key),Hi.return=_i,_i=Hi):(Hi=nu(Pi.type,Pi.key,Pi.props,null,_i.mode,Hi),gr(Hi,Pi),Hi.return=_i,_i=Hi)}return En(_i);case Oe:e:{for(yr=Pi.key;gi!==null;){if(gi.key===yr)if(gi.tag===4&&gi.stateNode.containerInfo===Pi.containerInfo&&gi.stateNode.implementation===Pi.implementation){Te(_i,gi.sibling),Hi=je(gi,Pi.children||[]),Hi.return=_i,_i=Hi;break e}else{Te(_i,gi);break}else Se(_i,gi);gi=gi.sibling}Hi=iu(Pi,_i.mode,Hi),Hi.return=_i,_i=Hi}return En(_i);case Ke:return Pi=hi(Pi),es(_i,gi,Pi,Hi)}if(Tn(Pi))return dr(_i,gi,Pi,Hi);if(en(Pi)){if(yr=en(Pi),typeof yr!="function")throw Error(xe(150));return Pi=yr.call(Pi),_r(_i,gi,Pi,Hi)}if(typeof Pi.then=="function")return es(_i,gi,sr(Pi),Hi);if(Pi.$$typeof===Qe)return es(_i,gi,Cc(_i,Pi),Hi);or(_i,Pi)}return typeof Pi=="string"&&Pi!==""||typeof Pi=="number"||typeof Pi=="bigint"?(Pi=""+Pi,gi!==null&&gi.tag===6?(Te(_i,gi.sibling),Hi=je(gi,Pi),Hi.return=_i,_i=Hi):(Te(_i,gi),Hi=Ku(Pi,_i.mode,Hi),Hi.return=_i,_i=Hi),En(_i)):Te(_i,gi)}return function(_i,gi,Pi,Hi){try{lr=0;var yr=es(_i,gi,Pi,Hi);return Ui=null,yr}catch(pr){if(pr===ci||pr===wi)throw pr;var Ur=Ks(29,pr,null,_i.mode);return Ur.lanes=Hi,Ur.return=_i,Ur}finally{}}}var Br=Or(!0),Mr=Or(!1),Pr=!1;function Hr(_e){_e.updateQueue={baseState:_e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jr(_e,Se){_e=_e.updateQueue,Se.updateQueue===_e&&(Se.updateQueue={baseState:_e.baseState,firstBaseUpdate:_e.firstBaseUpdate,lastBaseUpdate:_e.lastBaseUpdate,shared:_e.shared,callbacks:null})}function xr(_e){return{lane:_e,tag:0,payload:null,callback:null,next:null}}function $r(_e,Se,Te){var Ie=_e.updateQueue;if(Ie===null)return null;if(Ie=Ie.shared,(Gr&2)!==0){var je=Ie.pending;return je===null?Se.next=Se:(Se.next=je.next,je.next=Se),Ie.pending=Se,Se=Ws(_e),$u(_e,null,Te),Se}return Gu(_e,Ie,Se,Te),Ws(_e)}function Rs(_e,Se,Te){if(Se=Se.updateQueue,Se!==null&&(Se=Se.shared,(Te&4194048)!==0)){var Ie=Se.lanes;Ie&=_e.pendingLanes,Te|=Ie,Se.lanes=Te,Ri(_e,Te)}}function hs(_e,Se){var Te=_e.updateQueue,Ie=_e.alternate;if(Ie!==null&&(Ie=Ie.updateQueue,Te===Ie)){var je=null,Xe=null;if(Te=Te.firstBaseUpdate,Te!==null){do{var En={lane:Te.lane,tag:Te.tag,payload:Te.payload,callback:null,next:null};Xe===null?je=Xe=En:Xe=Xe.next=En,Te=Te.next}while(Te!==null);Xe===null?je=Xe=Se:Xe=Xe.next=Se}else je=Xe=Se;Te={baseState:Ie.baseState,firstBaseUpdate:je,lastBaseUpdate:Xe,shared:Ie.shared,callbacks:Ie.callbacks},_e.updateQueue=Te;return}_e=Te.lastBaseUpdate,_e===null?Te.firstBaseUpdate=Se:_e.next=Se,Te.lastBaseUpdate=Se}var Ys=!1;function Dr(){if(Ys){var _e=ze;if(_e!==null)throw _e}}function Us(_e,Se,Te,Ie){Ys=!1;var je=_e.updateQueue;Pr=!1;var Xe=je.firstBaseUpdate,En=je.lastBaseUpdate,On=je.shared.pending;if(On!==null){je.shared.pending=null;var ri=On,Ti=ri.next;ri.next=null,En===null?Xe=Ti:En.next=Ti,En=ri;var Oi=_e.alternate;Oi!==null&&(Oi=Oi.updateQueue,On=Oi.lastBaseUpdate,On!==En&&(On===null?Oi.firstBaseUpdate=Ti:On.next=Ti,Oi.lastBaseUpdate=ri))}if(Xe!==null){var Ki=je.baseState;En=0,Oi=Ti=ri=null,On=Xe;do{var Ci=On.lane&-536870913,Ii=Ci!==On.lane;if(Ii?(Lr&Ci)===Ci:(Ie&Ci)===Ci){Ci!==0&&Ci===De&&(Ys=!0),Oi!==null&&(Oi=Oi.next={lane:0,tag:On.tag,payload:On.payload,callback:null,next:null});e:{var dr=_e,_r=On;Ci=Se;var es=Te;switch(_r.tag){case 1:if(dr=_r.payload,typeof dr=="function"){Ki=dr.call(es,Ki,Ci);break e}Ki=dr;break e;case 3:dr.flags=dr.flags&-65537|128;case 0:if(dr=_r.payload,Ci=typeof dr=="function"?dr.call(es,Ki,Ci):dr,Ci==null)break e;Ki=Me({},Ki,Ci);break e;case 2:Pr=!0}}Ci=On.callback,Ci!==null&&(_e.flags|=64,Ii&&(_e.flags|=8192),Ii=je.callbacks,Ii===null?je.callbacks=[Ci]:Ii.push(Ci))}else Ii={lane:Ci,tag:On.tag,payload:On.payload,callback:On.callback,next:null},Oi===null?(Ti=Oi=Ii,ri=Ki):Oi=Oi.next=Ii,En|=Ci;if(On=On.next,On===null){if(On=je.shared.pending,On===null)break;Ii=On,On=Ii.next,Ii.next=null,je.lastBaseUpdate=Ii,je.shared.pending=null}}while(!0);Oi===null&&(ri=Ki),je.baseState=ri,je.firstBaseUpdate=Ti,je.lastBaseUpdate=Oi,Xe===null&&(je.shared.lanes=0),pu|=En,_e.lanes=En,_e.memoizedState=Ki}}function ua(_e,Se){if(typeof _e!="function")throw Error(xe(191,_e));_e.call(Se)}function Ts(_e,Se){var Te=_e.callbacks;if(Te!==null)for(_e.callbacks=null,_e=0;_e<Te.length;_e++)ua(Te[_e],Se)}var ds=xn(null),Bs=xn(0);function ma(_e,Se){_e=Ll,We(Bs,_e),We(ds,Se),Ll=_e|Se.baseLanes}function Va(){We(Bs,Ll),We(ds,ds.current)}function ws(){Ll=Bs.current,Je(ds),Je(Bs)}var bs=xn(null),Ns=null;function ya(_e){var Se=_e.alternate;We(fs,fs.current&1),We(bs,_e),Ns===null&&(Se===null||ds.current!==null||Se.memoizedState!==null)&&(Ns=_e)}function lo(_e){We(fs,fs.current),We(bs,_e),Ns===null&&(Ns=_e)}function ls(_e){_e.tag===22?(We(fs,fs.current),We(bs,_e),Ns===null&&(Ns=_e)):uo()}function uo(){We(fs,fs.current),We(bs,bs.current)}function ca(_e){Je(bs),Ns===_e&&(Ns=null),Je(fs)}var fs=xn(0);function wl(_e){for(var Se=_e;Se!==null;){if(Se.tag===13){var Te=Se.memoizedState;if(Te!==null&&(Te=Te.dehydrated,Te===null||Xf(Te)||Zf(Te)))return Se}else if(Se.tag===19&&(Se.memoizedProps.revealOrder==="forwards"||Se.memoizedProps.revealOrder==="backwards"||Se.memoizedProps.revealOrder==="unstable_legacy-backwards"||Se.memoizedProps.revealOrder==="together")){if((Se.flags&128)!==0)return Se}else if(Se.child!==null){Se.child.return=Se,Se=Se.child;continue}if(Se===_e)break;for(;Se.sibling===null;){if(Se.return===null||Se.return===_e)return null;Se=Se.return}Se.sibling.return=Se.return,Se=Se.sibling}return null}var va=0,Sr=null,Cr=null,ns=null,To=!1,Al=!1,co=!1,Zu=0,il=0,rl=null,Bc=0;function Zr(){throw Error(xe(321))}function ch(_e,Se){if(Se===null)return!1;for(var Te=0;Te<Se.length&&Te<_e.length;Te++)if(!ea(_e[Te],Se[Te]))return!1;return!0}function hh(_e,Se,Te,Ie,je,Xe){return va=Xe,Sr=Se,Se.memoizedState=null,Se.updateQueue=null,Se.lanes=0,hn.H=_e===null||_e.memoizedState===null?og:lf,co=!1,Xe=Te(Ie,je),co=!1,Al&&(Xe=Co(Se,Te,Ie,je)),Nc(_e),Xe}function Nc(_e){hn.H=bh;var Se=Cr!==null&&Cr.next!==null;if(va=0,ns=Cr=Sr=null,To=!1,il=0,rl=null,Se)throw Error(xe(300));_e===null||Is||(_e=_e.dependencies,_e!==null&&Tc(_e)&&(Is=!0))}function Co(_e,Se,Te,Ie){Sr=_e;var je=0;do{if(Al&&(rl=null),il=0,Al=!1,25<=je)throw Error(xe(301));if(je+=1,ns=Cr=null,_e.updateQueue!=null){var Xe=_e.updateQueue;Xe.lastEffect=null,Xe.events=null,Xe.stores=null,Xe.memoCache!=null&&(Xe.memoCache.index=0)}hn.H=lg,Xe=Se(Te,Ie)}while(Al);return Xe}function ef(){var _e=hn.H,Se=_e.useState()[0];return Se=typeof Se.then=="function"?sl(Se):Se,_e=_e.useState()[0],(Cr!==null?Cr.memoizedState:null)!==_e&&(Sr.flags|=1024),Se}function dh(){var _e=Zu!==0;return Zu=0,_e}function fh(_e,Se,Te){Se.updateQueue=_e.updateQueue,Se.flags&=-2053,_e.lanes&=~Te}function kc(_e){if(To){for(_e=_e.memoizedState;_e!==null;){var Se=_e.queue;Se!==null&&(Se.pending=null),_e=_e.next}To=!1}va=0,ns=Cr=Sr=null,Al=!1,il=Zu=0,rl=null}function ks(){var _e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ns===null?Sr.memoizedState=ns=_e:ns=ns.next=_e,ns}function ps(){if(Cr===null){var _e=Sr.alternate;_e=_e!==null?_e.memoizedState:null}else _e=Cr.next;var Se=ns===null?Sr.memoizedState:ns.next;if(Se!==null)ns=Se,Cr=_e;else{if(_e===null)throw Sr.alternate===null?Error(xe(467)):Error(xe(310));Cr=_e,_e={memoizedState:Cr.memoizedState,baseState:Cr.baseState,baseQueue:Cr.baseQueue,queue:Cr.queue,next:null},ns===null?Sr.memoizedState=ns=_e:ns=ns.next=_e}return ns}function Qu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function sl(_e){var Se=il;return il+=1,rl===null&&(rl=[]),_e=Li(rl,_e,Se),Se=Sr,(ns===null?Se.memoizedState:ns.next)===null&&(Se=Se.alternate,hn.H=Se===null||Se.memoizedState===null?og:lf),_e}function lu(_e){if(_e!==null&&typeof _e=="object"){if(typeof _e.then=="function")return sl(_e);if(_e.$$typeof===Qe)return js(_e)}throw Error(xe(438,String(_e)))}function Pl(_e){var Se=null,Te=Sr.updateQueue;if(Te!==null&&(Se=Te.memoCache),Se==null){var Ie=Sr.alternate;Ie!==null&&(Ie=Ie.updateQueue,Ie!==null&&(Ie=Ie.memoCache,Ie!=null&&(Se={data:Ie.data.map(function(je){return je.slice()}),index:0})))}if(Se==null&&(Se={data:[],index:0}),Te===null&&(Te=Qu(),Sr.updateQueue=Te),Te.memoCache=Se,Te=Se.data[Se.index],Te===void 0)for(Te=Se.data[Se.index]=Array(_e),Ie=0;Ie<_e;Ie++)Te[Ie]=gn;return Se.index++,Te}function ho(_e,Se){return typeof Se=="function"?Se(_e):Se}function Ic(_e){var Se=ps();return uu(Se,Cr,_e)}function uu(_e,Se,Te){var Ie=_e.queue;if(Ie===null)throw Error(xe(311));Ie.lastRenderedReducer=Te;var je=_e.baseQueue,Xe=Ie.pending;if(Xe!==null){if(je!==null){var En=je.next;je.next=Xe.next,Xe.next=En}Se.baseQueue=je=Xe,Ie.pending=null}if(Xe=_e.baseState,je===null)_e.memoizedState=Xe;else{Se=je.next;var On=En=null,ri=null,Ti=Se,Oi=!1;do{var Ki=Ti.lane&-536870913;if(Ki!==Ti.lane?(Lr&Ki)===Ki:(va&Ki)===Ki){var Ci=Ti.revertLane;if(Ci===0)ri!==null&&(ri=ri.next={lane:0,revertLane:0,gesture:null,action:Ti.action,hasEagerState:Ti.hasEagerState,eagerState:Ti.eagerState,next:null}),Ki===De&&(Oi=!0);else if((va&Ci)===Ci){Ti=Ti.next,Ci===De&&(Oi=!0);continue}else Ki={lane:0,revertLane:Ti.revertLane,gesture:null,action:Ti.action,hasEagerState:Ti.hasEagerState,eagerState:Ti.eagerState,next:null},ri===null?(On=ri=Ki,En=Xe):ri=ri.next=Ki,Sr.lanes|=Ci,pu|=Ci;Ki=Ti.action,co&&Te(Xe,Ki),Xe=Ti.hasEagerState?Ti.eagerState:Te(Xe,Ki)}else Ci={lane:Ki,revertLane:Ti.revertLane,gesture:Ti.gesture,action:Ti.action,hasEagerState:Ti.hasEagerState,eagerState:Ti.eagerState,next:null},ri===null?(On=ri=Ci,En=Xe):ri=ri.next=Ci,Sr.lanes|=Ki,pu|=Ki;Ti=Ti.next}while(Ti!==null&&Ti!==Se);if(ri===null?En=Xe:ri.next=On,!ea(Xe,_e.memoizedState)&&(Is=!0,Oi&&(Te=ze,Te!==null)))throw Te;_e.memoizedState=Xe,_e.baseState=En,_e.baseQueue=ri,Ie.lastRenderedState=Xe}return je===null&&(Ie.lanes=0),[_e.memoizedState,Ie.dispatch]}function Mc(_e){var Se=ps(),Te=Se.queue;if(Te===null)throw Error(xe(311));Te.lastRenderedReducer=_e;var Ie=Te.dispatch,je=Te.pending,Xe=Se.memoizedState;if(je!==null){Te.pending=null;var En=je=je.next;do Xe=_e(Xe,En.action),En=En.next;while(En!==je);ea(Xe,Se.memoizedState)||(Is=!0),Se.memoizedState=Xe,Se.baseQueue===null&&(Se.baseState=Xe),Te.lastRenderedState=Xe}return[Xe,Ie]}function Lc(_e,Se,Te){var Ie=Sr,je=ps(),Xe=Rr;if(Xe){if(Te===void 0)throw Error(xe(407));Te=Te()}else Te=Se();var En=!ea((Cr||je).memoizedState,Te);if(En&&(je.memoizedState=Te,Is=!0),je=je.queue,tf(gh.bind(null,Ie,je,_e),[_e]),je.getSnapshot!==Se||En||ns!==null&&ns.memoizedState.tag&1){if(Ie.flags|=2048,Cl(9,{destroy:void 0},ph.bind(null,Ie,je,Te,Se),null),is===null)throw Error(xe(349));Xe||(va&127)!==0||Ro(Ie,Se,Te)}return Te}function Ro(_e,Se,Te){_e.flags|=16384,_e={getSnapshot:Se,value:Te},Se=Sr.updateQueue,Se===null?(Se=Qu(),Sr.updateQueue=Se,Se.stores=[_e]):(Te=Se.stores,Te===null?Se.stores=[_e]:Te.push(_e))}function ph(_e,Se,Te,Ie){Se.value=Te,Se.getSnapshot=Ie,Jh(Se)&&mh(_e)}function gh(_e,Se,Te){return Te(function(){Jh(Se)&&mh(_e)})}function Jh(_e){var Se=_e.getSnapshot;_e=_e.value;try{var Te=Se();return!ea(_e,Te)}catch{return!0}}function mh(_e){var Se=Ao(_e,2);Se!==null&&Ua(Se,_e,2)}function al(_e){var Se=ks();if(typeof _e=="function"){var Te=_e;if(_e=Te(),co){fi(!0);try{Te()}finally{fi(!1)}}}return Se.memoizedState=Se.baseState=_e,Se.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ho,lastRenderedState:_e},Se}function Xh(_e,Se,Te,Ie){return _e.baseState=Te,uu(_e,Cr,typeof Ie=="function"?Ie:ho)}function Zh(_e,Se,Te,Ie,je){if(nd(_e))throw Error(xe(485));if(_e=Se.action,_e!==null){var Xe={payload:je,action:_e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(En){Xe.listeners.push(En)}};hn.T!==null?Te(!0):Xe.isTransition=!1,Ie(Xe),Te=Se.pending,Te===null?(Xe.next=Se.pending=Xe,Qh(Se,Xe)):(Xe.next=Te.next,Se.pending=Te.next=Xe)}}function Qh(_e,Se){var Te=Se.action,Ie=Se.payload,je=_e.state;if(Se.isTransition){var Xe=hn.T,En={};hn.T=En;try{var On=Te(je,Ie),ri=hn.S;ri!==null&&ri(En,On),yh(_e,Se,On)}catch(Ti){Tl(_e,Se,Ti)}finally{Xe!==null&&En.types!==null&&(Xe.types=En.types),hn.T=Xe}}else try{Xe=Te(je,Ie),yh(_e,Se,Xe)}catch(Ti){Tl(_e,Se,Ti)}}function yh(_e,Se,Te){Te!==null&&typeof Te=="object"&&typeof Te.then=="function"?Te.then(function(Ie){ed(_e,Se,Ie)},function(Ie){return Tl(_e,Se,Ie)}):ed(_e,Se,Te)}function ed(_e,Se,Te){Se.status="fulfilled",Se.value=Te,Vc(Se),_e.state=Te,Se=_e.pending,Se!==null&&(Te=Se.next,Te===Se?_e.pending=null:(Te=Te.next,Se.next=Te,Qh(_e,Te)))}function Tl(_e,Se,Te){var Ie=_e.pending;if(_e.pending=null,Ie!==null){Ie=Ie.next;do Se.status="rejected",Se.reason=Te,Vc(Se),Se=Se.next;while(Se!==Ie)}_e.action=null}function Vc(_e){_e=_e.listeners;for(var Se=0;Se<_e.length;Se++)(0,_e[Se])()}function ec(_e,Se){return Se}function fo(_e,Se){if(Rr){var Te=is.formState;if(Te!==null){e:{var Ie=Sr;if(Rr){if(ts){t:{for(var je=ts,Xe=cs;je.nodeType!==8;){if(!Xe){je=null;break t}if(je=po(je.nextSibling),je===null){je=null;break t}}Xe=je.data,je=Xe==="F!"||Xe==="F"?je:null}if(je){ts=po(je.nextSibling),Ie=je.data==="F!";break e}}Zo(Ie)}Ie=!1}Ie&&(Se=Te[0])}}return Te=ks(),Te.memoizedState=Te.baseState=Se,Ie={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ec,lastRenderedState:Se},Te.queue=Ie,Te=rg.bind(null,Sr,Ie),Ie.dispatch=Te,Ie=al(!1),Xe=of.bind(null,Sr,!1,Ie.queue),Ie=ks(),je={state:Se,dispatch:null,action:_e,pending:null},Ie.queue=je,Te=Zh.bind(null,Sr,je,Xe,Te),je.dispatch=Te,Ie.memoizedState=_e,[Se,Te,!1]}function Bo(_e){var Se=ps();return No(Se,Cr,_e)}function No(_e,Se,Te){if(Se=uu(_e,Se,ec)[0],_e=Ic(ho)[0],typeof Se=="object"&&Se!==null&&typeof Se.then=="function")try{var Ie=sl(Se)}catch(En){throw En===ci?wi:En}else Ie=Se;Se=ps();var je=Se.queue,Xe=je.dispatch;return Te!==Se.memoizedState&&(Sr.flags|=2048,Cl(9,{destroy:void 0},Dc.bind(null,je,Te),null)),[Ie,Xe,_e]}function Dc(_e,Se){_e.action=Se}function Fc(_e){var Se=ps(),Te=Cr;if(Te!==null)return No(Se,Te,_e);ps(),Se=Se.memoizedState,Te=ps();var Ie=Te.queue.dispatch;return Te.memoizedState=_e,[Se,Ie,!1]}function Cl(_e,Se,Te,Ie){return _e={tag:_e,create:Te,deps:Ie,inst:Se,next:null},Se=Sr.updateQueue,Se===null&&(Se=Qu(),Sr.updateQueue=Se),Te=Se.lastEffect,Te===null?Se.lastEffect=_e.next=_e:(Ie=Te.next,Te.next=_e,_e.next=Ie,Se.lastEffect=_e),_e}function td(){return ps().memoizedState}function cu(_e,Se,Te,Ie){var je=ks();Sr.flags|=_e,je.memoizedState=Cl(1|Se,{destroy:void 0},Te,Ie===void 0?null:Ie)}function hu(_e,Se,Te,Ie){var je=ps();Ie=Ie===void 0?null:Ie;var Xe=je.memoizedState.inst;Cr!==null&&Ie!==null&&ch(Ie,Cr.memoizedState.deps)?je.memoizedState=Cl(Se,Xe,Te,Ie):(Sr.flags|=_e,je.memoizedState=Cl(1|Se,Xe,Te,Ie))}function Hp(_e,Se){cu(8390656,8,_e,Se)}function tf(_e,Se){hu(2048,8,_e,Se)}function U0(_e){Sr.flags|=4;var Se=Sr.updateQueue;if(Se===null)Se=Qu(),Sr.updateQueue=Se,Se.events=[_e];else{var Te=Se.events;Te===null?Se.events=[_e]:Te.push(_e)}}function Gp(_e){var Se=ps().memoizedState;return U0({ref:Se,nextImpl:_e}),function(){if((Gr&2)!==0)throw Error(xe(440));return Se.impl.apply(void 0,arguments)}}function $p(_e,Se){return hu(4,2,_e,Se)}function Wp(_e,Se){return hu(4,4,_e,Se)}function Kp(_e,Se){if(typeof Se=="function"){_e=_e();var Te=Se(_e);return function(){typeof Te=="function"?Te():Se(null)}}if(Se!=null)return _e=_e(),Se.current=_e,function(){Se.current=null}}function Yp(_e,Se,Te){Te=Te!=null?Te.concat([_e]):null,hu(4,4,Kp.bind(null,Se,_e),Te)}function nf(){}function Jp(_e,Se){var Te=ps();Se=Se===void 0?null:Se;var Ie=Te.memoizedState;return Se!==null&&ch(Se,Ie[1])?Ie[0]:(Te.memoizedState=[_e,Se],_e)}function Xp(_e,Se){var Te=ps();Se=Se===void 0?null:Se;var Ie=Te.memoizedState;if(Se!==null&&ch(Se,Ie[1]))return Ie[0];if(Ie=_e(),co){fi(!0);try{_e()}finally{fi(!1)}}return Te.memoizedState=[Ie,Se],Ie}function rf(_e,Se,Te){return Te===void 0||(va&1073741824)!==0&&(Lr&261930)===0?_e.memoizedState=Se:(_e.memoizedState=Te,_e=Zg(),Sr.lanes|=_e,pu|=_e,Te)}function Zp(_e,Se,Te,Ie){return ea(Te,Se)?Te:ds.current!==null?(_e=rf(_e,Te,Ie),ea(_e,Se)||(Is=!0),_e):(va&42)===0||(va&1073741824)!==0&&(Lr&261930)===0?(Is=!0,_e.memoizedState=Te):(_e=Zg(),Sr.lanes|=_e,pu|=_e,Se)}function Qp(_e,Se,Te,Ie,je){var Xe=pn.p;pn.p=Xe!==0&&8>Xe?Xe:8;var En=hn.T,On={};hn.T=On,of(_e,!1,Se,Te);try{var ri=je(),Ti=hn.S;if(Ti!==null&&Ti(On,ri),ri!==null&&typeof ri=="object"&&typeof ri.then=="function"){var Oi=Bn(ri,Ie);vh(_e,Se,Oi,Za(_e))}else vh(_e,Se,Ie,Za(_e))}catch(Ki){vh(_e,Se,{then:function(){},status:"rejected",reason:Ki},Za())}finally{pn.p=Xe,En!==null&&On.types!==null&&(En.types=On.types),hn.T=En}}function z0(){}function sf(_e,Se,Te,Ie){if(_e.tag!==5)throw Error(xe(476));var je=eg(_e).queue;Qp(_e,je,Se,bn,Te===null?z0:function(){return tg(_e),Te(Ie)})}function eg(_e){var Se=_e.memoizedState;if(Se!==null)return Se;Se={memoizedState:bn,baseState:bn,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ho,lastRenderedState:bn},next:null};var Te={};return Se.next={memoizedState:Te,baseState:Te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ho,lastRenderedState:Te},next:null},_e.memoizedState=Se,_e=_e.alternate,_e!==null&&(_e.memoizedState=Se),Se}function tg(_e){var Se=eg(_e);Se.next===null&&(Se=_e.alternate.memoizedState),vh(_e,Se.next.queue,{},Za())}function af(){return js(Lh)}function ng(){return ps().memoizedState}function ig(){return ps().memoizedState}function q0(_e){for(var Se=_e.return;Se!==null;){switch(Se.tag){case 24:case 3:var Te=Za();_e=xr(Te);var Ie=$r(Se,_e,Te);Ie!==null&&(Ua(Ie,Se,Te),Rs(Ie,Se,Te)),Se={cache:ou()},_e.payload=Se;return}Se=Se.return}}function H0(_e,Se,Te){var Ie=Za();Te={lane:Ie,revertLane:0,gesture:null,action:Te,hasEagerState:!1,eagerState:null,next:null},nd(_e)?sg(Se,Te):(Te=bc(_e,Se,Te,Ie),Te!==null&&(Ua(Te,_e,Ie),ag(Te,Se,Ie)))}function rg(_e,Se,Te){var Ie=Za();vh(_e,Se,Te,Ie)}function vh(_e,Se,Te,Ie){var je={lane:Ie,revertLane:0,gesture:null,action:Te,hasEagerState:!1,eagerState:null,next:null};if(nd(_e))sg(Se,je);else{var Xe=_e.alternate;if(_e.lanes===0&&(Xe===null||Xe.lanes===0)&&(Xe=Se.lastRenderedReducer,Xe!==null))try{var En=Se.lastRenderedState,On=Xe(En,Te);if(je.hasEagerState=!0,je.eagerState=On,ea(On,En))return Gu(_e,Se,je,0),is===null&&Hu(),!1}catch{}finally{}if(Te=bc(_e,Se,je,Ie),Te!==null)return Ua(Te,_e,Ie),ag(Te,Se,Ie),!0}return!1}function of(_e,Se,Te,Ie){if(Ie={lane:2,revertLane:Of(),gesture:null,action:Ie,hasEagerState:!1,eagerState:null,next:null},nd(_e)){if(Se)throw Error(xe(479))}else Se=bc(_e,Te,Ie,2),Se!==null&&Ua(Se,_e,2)}function nd(_e){var Se=_e.alternate;return _e===Sr||Se!==null&&Se===Sr}function sg(_e,Se){Al=To=!0;var Te=_e.pending;Te===null?Se.next=Se:(Se.next=Te.next,Te.next=Se),_e.pending=Se}function ag(_e,Se,Te){if((Te&4194048)!==0){var Ie=Se.lanes;Ie&=_e.pendingLanes,Te|=Ie,Se.lanes=Te,Ri(_e,Te)}}var bh={readContext:js,use:lu,useCallback:Zr,useContext:Zr,useEffect:Zr,useImperativeHandle:Zr,useLayoutEffect:Zr,useInsertionEffect:Zr,useMemo:Zr,useReducer:Zr,useRef:Zr,useState:Zr,useDebugValue:Zr,useDeferredValue:Zr,useTransition:Zr,useSyncExternalStore:Zr,useId:Zr,useHostTransitionStatus:Zr,useFormState:Zr,useActionState:Zr,useOptimistic:Zr,useMemoCache:Zr,useCacheRefresh:Zr};bh.useEffectEvent=Zr;var og={readContext:js,use:lu,useCallback:function(_e,Se){return ks().memoizedState=[_e,Se===void 0?null:Se],_e},useContext:js,useEffect:Hp,useImperativeHandle:function(_e,Se,Te){Te=Te!=null?Te.concat([_e]):null,cu(4194308,4,Kp.bind(null,Se,_e),Te)},useLayoutEffect:function(_e,Se){return cu(4194308,4,_e,Se)},useInsertionEffect:function(_e,Se){cu(4,2,_e,Se)},useMemo:function(_e,Se){var Te=ks();Se=Se===void 0?null:Se;var Ie=_e();if(co){fi(!0);try{_e()}finally{fi(!1)}}return Te.memoizedState=[Ie,Se],Ie},useReducer:function(_e,Se,Te){var Ie=ks();if(Te!==void 0){var je=Te(Se);if(co){fi(!0);try{Te(Se)}finally{fi(!1)}}}else je=Se;return Ie.memoizedState=Ie.baseState=je,_e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_e,lastRenderedState:je},Ie.queue=_e,_e=_e.dispatch=H0.bind(null,Sr,_e),[Ie.memoizedState,_e]},useRef:function(_e){var Se=ks();return _e={current:_e},Se.memoizedState=_e},useState:function(_e){_e=al(_e);var Se=_e.queue,Te=rg.bind(null,Sr,Se);return Se.dispatch=Te,[_e.memoizedState,Te]},useDebugValue:nf,useDeferredValue:function(_e,Se){var Te=ks();return rf(Te,_e,Se)},useTransition:function(){var _e=al(!1);return _e=Qp.bind(null,Sr,_e.queue,!0,!1),ks().memoizedState=_e,[!1,_e]},useSyncExternalStore:function(_e,Se,Te){var Ie=Sr,je=ks();if(Rr){if(Te===void 0)throw Error(xe(407));Te=Te()}else{if(Te=Se(),is===null)throw Error(xe(349));(Lr&127)!==0||Ro(Ie,Se,Te)}je.memoizedState=Te;var Xe={value:Te,getSnapshot:Se};return je.queue=Xe,Hp(gh.bind(null,Ie,Xe,_e),[_e]),Ie.flags|=2048,Cl(9,{destroy:void 0},ph.bind(null,Ie,Xe,Te,Se),null),Te},useId:function(){var _e=ks(),Se=is.identifierPrefix;if(Rr){var Te=Ma,Ie=Ia;Te=(Ie&~(1<<32-ni(Ie)-1)).toString(32)+Te,Se="_"+Se+"R_"+Te,Te=Zu++,0<Te&&(Se+="H"+Te.toString(32)),Se+="_"}else Te=Bc++,Se="_"+Se+"r_"+Te.toString(32)+"_";return _e.memoizedState=Se},useHostTransitionStatus:af,useFormState:fo,useActionState:fo,useOptimistic:function(_e){var Se=ks();Se.memoizedState=Se.baseState=_e;var Te={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return Se.queue=Te,Se=of.bind(null,Sr,!0,Te),Te.dispatch=Se,[_e,Se]},useMemoCache:Pl,useCacheRefresh:function(){return ks().memoizedState=q0.bind(null,Sr)},useEffectEvent:function(_e){var Se=ks(),Te={impl:_e};return Se.memoizedState=Te,function(){if((Gr&2)!==0)throw Error(xe(440));return Te.impl.apply(void 0,arguments)}}},lf={readContext:js,use:lu,useCallback:Jp,useContext:js,useEffect:tf,useImperativeHandle:Yp,useInsertionEffect:$p,useLayoutEffect:Wp,useMemo:Xp,useReducer:Ic,useRef:td,useState:function(){return Ic(ho)},useDebugValue:nf,useDeferredValue:function(_e,Se){var Te=ps();return Zp(Te,Cr.memoizedState,_e,Se)},useTransition:function(){var _e=Ic(ho)[0],Se=ps().memoizedState;return[typeof _e=="boolean"?_e:sl(_e),Se]},useSyncExternalStore:Lc,useId:ng,useHostTransitionStatus:af,useFormState:Bo,useActionState:Bo,useOptimistic:function(_e,Se){var Te=ps();return Xh(Te,Cr,_e,Se)},useMemoCache:Pl,useCacheRefresh:ig};lf.useEffectEvent=Gp;var lg={readContext:js,use:lu,useCallback:Jp,useContext:js,useEffect:tf,useImperativeHandle:Yp,useInsertionEffect:$p,useLayoutEffect:Wp,useMemo:Xp,useReducer:Mc,useRef:td,useState:function(){return Mc(ho)},useDebugValue:nf,useDeferredValue:function(_e,Se){var Te=ps();return Cr===null?rf(Te,_e,Se):Zp(Te,Cr.memoizedState,_e,Se)},useTransition:function(){var _e=Mc(ho)[0],Se=ps().memoizedState;return[typeof _e=="boolean"?_e:sl(_e),Se]},useSyncExternalStore:Lc,useId:ng,useHostTransitionStatus:af,useFormState:Fc,useActionState:Fc,useOptimistic:function(_e,Se){var Te=ps();return Cr!==null?Xh(Te,Cr,_e,Se):(Te.baseState=_e,[_e,Te.queue.dispatch])},useMemoCache:Pl,useCacheRefresh:ig};lg.useEffectEvent=Gp;function uf(_e,Se,Te,Ie){Se=_e.memoizedState,Te=Te(Ie,Se),Te=Te==null?Se:Me({},Se,Te),_e.memoizedState=Te,_e.lanes===0&&(_e.updateQueue.baseState=Te)}var cf={enqueueSetState:function(_e,Se,Te){_e=_e._reactInternals;var Ie=Za(),je=xr(Ie);je.payload=Se,Te!=null&&(je.callback=Te),Se=$r(_e,je,Ie),Se!==null&&(Ua(Se,_e,Ie),Rs(Se,_e,Ie))},enqueueReplaceState:function(_e,Se,Te){_e=_e._reactInternals;var Ie=Za(),je=xr(Ie);je.tag=1,je.payload=Se,Te!=null&&(je.callback=Te),Se=$r(_e,je,Ie),Se!==null&&(Ua(Se,_e,Ie),Rs(Se,_e,Ie))},enqueueForceUpdate:function(_e,Se){_e=_e._reactInternals;var Te=Za(),Ie=xr(Te);Ie.tag=2,Se!=null&&(Ie.callback=Se),Se=$r(_e,Ie,Te),Se!==null&&(Ua(Se,_e,Te),Rs(Se,_e,Te))}};function ug(_e,Se,Te,Ie,je,Xe,En){return _e=_e.stateNode,typeof _e.shouldComponentUpdate=="function"?_e.shouldComponentUpdate(Ie,Xe,En):Se.prototype&&Se.prototype.isPureReactComponent?!Aa(Te,Ie)||!Aa(je,Xe):!0}function cg(_e,Se,Te,Ie){_e=Se.state,typeof Se.componentWillReceiveProps=="function"&&Se.componentWillReceiveProps(Te,Ie),typeof Se.UNSAFE_componentWillReceiveProps=="function"&&Se.UNSAFE_componentWillReceiveProps(Te,Ie),Se.state!==_e&&cf.enqueueReplaceState(Se,Se.state,null)}function tc(_e,Se){var Te=Se;if("ref"in Se){Te={};for(var Ie in Se)Ie!=="ref"&&(Te[Ie]=Se[Ie])}if(_e=_e.defaultProps){Te===Se&&(Te=Me({},Te));for(var je in _e)Te[je]===void 0&&(Te[je]=_e[je])}return Te}function hg(_e){bl(_e)}function dg(_e){console.error(_e)}function fg(_e){bl(_e)}function id(_e,Se){try{var Te=_e.onUncaughtError;Te(Se.value,{componentStack:Se.stack})}catch(Ie){setTimeout(function(){throw Ie})}}function pg(_e,Se,Te){try{var Ie=_e.onCaughtError;Ie(Te.value,{componentStack:Te.stack,errorBoundary:Se.tag===1?Se.stateNode:null})}catch(je){setTimeout(function(){throw je})}}function hf(_e,Se,Te){return Te=xr(Te),Te.tag=3,Te.payload={element:null},Te.callback=function(){id(_e,Se)},Te}function gg(_e){return _e=xr(_e),_e.tag=3,_e}function mg(_e,Se,Te,Ie){var je=Te.type.getDerivedStateFromError;if(typeof je=="function"){var Xe=Ie.value;_e.payload=function(){return je(Xe)},_e.callback=function(){pg(Se,Te,Ie)}}var En=Te.stateNode;En!==null&&typeof En.componentDidCatch=="function"&&(_e.callback=function(){pg(Se,Te,Ie),typeof je!="function"&&(gu===null?gu=new Set([this]):gu.add(this));var On=Ie.stack;this.componentDidCatch(Ie.value,{componentStack:On!==null?On:""})})}function G0(_e,Se,Te,Ie,je){if(Te.flags|=32768,Ie!==null&&typeof Ie=="object"&&typeof Ie.then=="function"){if(Se=Te.alternate,Se!==null&&tl(Se,Te,je,!0),Te=bs.current,Te!==null){switch(Te.tag){case 31:case 13:return Ns===null?md():Te.alternate===null&&As===0&&(As=3),Te.flags&=-257,Te.flags|=65536,Te.lanes=je,Ie===vi?Te.flags|=16384:(Se=Te.updateQueue,Se===null?Te.updateQueue=new Set([Ie]):Se.add(Ie),Vf(_e,Ie,je)),!1;case 22:return Te.flags|=65536,Ie===vi?Te.flags|=16384:(Se=Te.updateQueue,Se===null?(Se={transitions:null,markerInstances:null,retryQueue:new Set([Ie])},Te.updateQueue=Se):(Te=Se.retryQueue,Te===null?Se.retryQueue=new Set([Ie]):Te.add(Ie)),Vf(_e,Ie,je)),!1}throw Error(xe(435,Te.tag))}return Vf(_e,Ie,je),md(),!1}if(Rr)return Se=bs.current,Se!==null?((Se.flags&65536)===0&&(Se.flags|=256),Se.flags|=65536,Se.lanes=je,Ie!==Ya&&(_e=Error(xe(422),{cause:Ie}),su(Ba(_e,Te)))):(Ie!==Ya&&(Se=Error(xe(423),{cause:Ie}),su(Ba(Se,Te))),_e=_e.current.alternate,_e.flags|=65536,je&=-je,_e.lanes|=je,Ie=Ba(Ie,Te),je=hf(_e.stateNode,Ie,je),hs(_e,je),As!==4&&(As=2)),!1;var Xe=Error(xe(520),{cause:Ie});if(Xe=Ba(Xe,Te),Th===null?Th=[Xe]:Th.push(Xe),As!==4&&(As=2),Se===null)return!0;Ie=Ba(Ie,Te),Te=Se;do{switch(Te.tag){case 3:return Te.flags|=65536,_e=je&-je,Te.lanes|=_e,_e=hf(Te.stateNode,Ie,_e),hs(Te,_e),!1;case 1:if(Se=Te.type,Xe=Te.stateNode,(Te.flags&128)===0&&(typeof Se.getDerivedStateFromError=="function"||Xe!==null&&typeof Xe.componentDidCatch=="function"&&(gu===null||!gu.has(Xe))))return Te.flags|=65536,je&=-je,Te.lanes|=je,je=gg(je),mg(je,_e,Te,Ie),hs(Te,je),!1}Te=Te.return}while(Te!==null);return!1}var df=Error(xe(461)),Is=!1;function ia(_e,Se,Te,Ie){Se.child=_e===null?Mr(Se,null,Te,Ie):Br(Se,_e.child,Te,Ie)}function yg(_e,Se,Te,Ie,je){Te=Te.render;var Xe=Se.ref;if("ref"in Ie){var En={};for(var On in Ie)On!=="ref"&&(En[On]=Ie[On])}else En=Ie;return nl(Se),Ie=hh(_e,Se,Te,En,Xe,je),On=dh(),_e!==null&&!Is?(fh(_e,Se,je),Rl(_e,Se,je)):(Rr&&On&&oh(Se),Se.flags|=1,ia(_e,Se,Ie,je),Se.child)}function vg(_e,Se,Te,Ie,je){if(_e===null){var Xe=Te.type;return typeof Xe=="function"&&!_c(Xe)&&Xe.defaultProps===void 0&&Te.compare===null?(Se.tag=15,Se.type=Xe,bg(_e,Se,Xe,Ie,je)):(_e=nu(Te.type,null,Ie,Se,Se.mode,je),_e.ref=Se.ref,_e.return=Se,Se.child=_e)}if(Xe=_e.child,!xf(_e,je)){var En=Xe.memoizedProps;if(Te=Te.compare,Te=Te!==null?Te:Aa,Te(En,Ie)&&_e.ref===Se.ref)return Rl(_e,Se,je)}return Se.flags|=1,_e=Ra(Xe,Ie),_e.ref=Se.ref,_e.return=Se,Se.child=_e}function bg(_e,Se,Te,Ie,je){if(_e!==null){var Xe=_e.memoizedProps;if(Aa(Xe,Ie)&&_e.ref===Se.ref)if(Is=!1,Se.pendingProps=Ie=Xe,xf(_e,je))(_e.flags&131072)!==0&&(Is=!0);else return Se.lanes=_e.lanes,Rl(_e,Se,je)}return ff(_e,Se,Te,Ie,je)}function xg(_e,Se,Te,Ie){var je=Ie.children,Xe=_e!==null?_e.memoizedState:null;if(_e===null&&Se.stateNode===null&&(Se.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),Ie.mode==="hidden"){if((Se.flags&128)!==0){if(Xe=Xe!==null?Xe.baseLanes|Te:Te,_e!==null){for(Ie=Se.child=_e.child,je=0;Ie!==null;)je=je|Ie.lanes|Ie.childLanes,Ie=Ie.sibling;Ie=je&~Xe}else Ie=0,Se.child=null;return _g(_e,Se,Xe,Te,Ie)}if((Te&536870912)!==0)Se.memoizedState={baseLanes:0,cachePool:null},_e!==null&&zn(Se,Xe!==null?Xe.cachePool:null),Xe!==null?ma(Se,Xe):Va(),ls(Se);else return Ie=Se.lanes=536870912,_g(_e,Se,Xe!==null?Xe.baseLanes|Te:Te,Te,Ie)}else Xe!==null?(zn(Se,Xe.cachePool),ma(Se,Xe),uo(),Se.memoizedState=null):(_e!==null&&zn(Se,null),Va(),uo());return ia(_e,Se,je,Te),Se.child}function xh(_e,Se){return _e!==null&&_e.tag===22||Se.stateNode!==null||(Se.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),Se.sibling}function _g(_e,Se,Te,Ie,je){var Xe=Vn();return Xe=Xe===null?null:{parent:vs._currentValue,pool:Xe},Se.memoizedState={baseLanes:Te,cachePool:Xe},_e!==null&&zn(Se,null),Va(),ls(Se),_e!==null&&tl(_e,Se,Ie,!0),Se.childLanes=je,null}function rd(_e,Se){return Se=ad({mode:Se.mode,children:Se.children},_e.mode),Se.ref=_e.ref,_e.child=Se,Se.return=_e,Se}function Eg(_e,Se,Te){return Br(Se,_e.child,null,Te),_e=rd(Se,Se.pendingProps),_e.flags|=2,ca(Se),Se.memoizedState=null,_e}function $0(_e,Se,Te){var Ie=Se.pendingProps,je=(Se.flags&128)!==0;if(Se.flags&=-129,_e===null){if(Rr){if(Ie.mode==="hidden")return _e=rd(Se,Ie),Se.lanes=536870912,xh(null,_e);if(lo(Se),(_e=ts)?(_e=Mm(_e,cs),_e=_e!==null&&_e.data==="&"?_e:null,_e!==null&&(Se.memoizedState={dehydrated:_e,treeContext:Xo!==null?{id:Ia,overflow:Ma}:null,retryLane:536870912,hydrationErrors:null},Te=Ec(_e),Te.return=Se,Se.child=Te,Fs=Se,ts=null)):_e=null,_e===null)throw Zo(Se);return Se.lanes=536870912,null}return rd(Se,Ie)}var Xe=_e.memoizedState;if(Xe!==null){var En=Xe.dehydrated;if(lo(Se),je)if(Se.flags&256)Se.flags&=-257,Se=Eg(_e,Se,Te);else if(Se.memoizedState!==null)Se.child=_e.child,Se.flags|=128,Se=null;else throw Error(xe(558));else if(Is||tl(_e,Se,Te,!1),je=(Te&_e.childLanes)!==0,Is||je){if(Ie=is,Ie!==null&&(En=Bi(Ie,Te),En!==0&&En!==Xe.retryLane))throw Xe.retryLane=En,Ao(_e,En),Ua(Ie,_e,En),df;md(),Se=Eg(_e,Se,Te)}else _e=Xe.treeContext,ts=po(En.nextSibling),Fs=Se,Rr=!0,na=null,cs=!1,_e!==null&&Kh(Se,_e),Se=rd(Se,Ie),Se.flags|=4096;return Se}return _e=Ra(_e.child,{mode:Ie.mode,children:Ie.children}),_e.ref=Se.ref,Se.child=_e,_e.return=Se,_e}function sd(_e,Se){var Te=Se.ref;if(Te===null)_e!==null&&_e.ref!==null&&(Se.flags|=4194816);else{if(typeof Te!="function"&&typeof Te!="object")throw Error(xe(284));(_e===null||_e.ref!==Te)&&(Se.flags|=4194816)}}function ff(_e,Se,Te,Ie,je){return nl(Se),Te=hh(_e,Se,Te,Ie,void 0,je),Ie=dh(),_e!==null&&!Is?(fh(_e,Se,je),Rl(_e,Se,je)):(Rr&&Ie&&oh(Se),Se.flags|=1,ia(_e,Se,Te,je),Se.child)}function Sg(_e,Se,Te,Ie,je,Xe){return nl(Se),Se.updateQueue=null,Te=Co(Se,Ie,Te,je),Nc(_e),Ie=dh(),_e!==null&&!Is?(fh(_e,Se,Xe),Rl(_e,Se,Xe)):(Rr&&Ie&&oh(Se),Se.flags|=1,ia(_e,Se,Te,Xe),Se.child)}function wg(_e,Se,Te,Ie,je){if(nl(Se),Se.stateNode===null){var Xe=Ds,En=Te.contextType;typeof En=="object"&&En!==null&&(Xe=js(En)),Xe=new Te(Ie,Xe),Se.memoizedState=Xe.state!==null&&Xe.state!==void 0?Xe.state:null,Xe.updater=cf,Se.stateNode=Xe,Xe._reactInternals=Se,Xe=Se.stateNode,Xe.props=Ie,Xe.state=Se.memoizedState,Xe.refs={},Hr(Se),En=Te.contextType,Xe.context=typeof En=="object"&&En!==null?js(En):Ds,Xe.state=Se.memoizedState,En=Te.getDerivedStateFromProps,typeof En=="function"&&(uf(Se,Te,En,Ie),Xe.state=Se.memoizedState),typeof Te.getDerivedStateFromProps=="function"||typeof Xe.getSnapshotBeforeUpdate=="function"||typeof Xe.UNSAFE_componentWillMount!="function"&&typeof Xe.componentWillMount!="function"||(En=Xe.state,typeof Xe.componentWillMount=="function"&&Xe.componentWillMount(),typeof Xe.UNSAFE_componentWillMount=="function"&&Xe.UNSAFE_componentWillMount(),En!==Xe.state&&cf.enqueueReplaceState(Xe,Xe.state,null),Us(Se,Ie,Xe,je),Dr(),Xe.state=Se.memoizedState),typeof Xe.componentDidMount=="function"&&(Se.flags|=4194308),Ie=!0}else if(_e===null){Xe=Se.stateNode;var On=Se.memoizedProps,ri=tc(Te,On);Xe.props=ri;var Ti=Xe.context,Oi=Te.contextType;En=Ds,typeof Oi=="object"&&Oi!==null&&(En=js(Oi));var Ki=Te.getDerivedStateFromProps;Oi=typeof Ki=="function"||typeof Xe.getSnapshotBeforeUpdate=="function",On=Se.pendingProps!==On,Oi||typeof Xe.UNSAFE_componentWillReceiveProps!="function"&&typeof Xe.componentWillReceiveProps!="function"||(On||Ti!==En)&&cg(Se,Xe,Ie,En),Pr=!1;var Ci=Se.memoizedState;Xe.state=Ci,Us(Se,Ie,Xe,je),Dr(),Ti=Se.memoizedState,On||Ci!==Ti||Pr?(typeof Ki=="function"&&(uf(Se,Te,Ki,Ie),Ti=Se.memoizedState),(ri=Pr||ug(Se,Te,ri,Ie,Ci,Ti,En))?(Oi||typeof Xe.UNSAFE_componentWillMount!="function"&&typeof Xe.componentWillMount!="function"||(typeof Xe.componentWillMount=="function"&&Xe.componentWillMount(),typeof Xe.UNSAFE_componentWillMount=="function"&&Xe.UNSAFE_componentWillMount()),typeof Xe.componentDidMount=="function"&&(Se.flags|=4194308)):(typeof Xe.componentDidMount=="function"&&(Se.flags|=4194308),Se.memoizedProps=Ie,Se.memoizedState=Ti),Xe.props=Ie,Xe.state=Ti,Xe.context=En,Ie=ri):(typeof Xe.componentDidMount=="function"&&(Se.flags|=4194308),Ie=!1)}else{Xe=Se.stateNode,jr(_e,Se),En=Se.memoizedProps,Oi=tc(Te,En),Xe.props=Oi,Ki=Se.pendingProps,Ci=Xe.context,Ti=Te.contextType,ri=Ds,typeof Ti=="object"&&Ti!==null&&(ri=js(Ti)),On=Te.getDerivedStateFromProps,(Ti=typeof On=="function"||typeof Xe.getSnapshotBeforeUpdate=="function")||typeof Xe.UNSAFE_componentWillReceiveProps!="function"&&typeof Xe.componentWillReceiveProps!="function"||(En!==Ki||Ci!==ri)&&cg(Se,Xe,Ie,ri),Pr=!1,Ci=Se.memoizedState,Xe.state=Ci,Us(Se,Ie,Xe,je),Dr();var Ii=Se.memoizedState;En!==Ki||Ci!==Ii||Pr||_e!==null&&_e.dependencies!==null&&Tc(_e.dependencies)?(typeof On=="function"&&(uf(Se,Te,On,Ie),Ii=Se.memoizedState),(Oi=Pr||ug(Se,Te,Oi,Ie,Ci,Ii,ri)||_e!==null&&_e.dependencies!==null&&Tc(_e.dependencies))?(Ti||typeof Xe.UNSAFE_componentWillUpdate!="function"&&typeof Xe.componentWillUpdate!="function"||(typeof Xe.componentWillUpdate=="function"&&Xe.componentWillUpdate(Ie,Ii,ri),typeof Xe.UNSAFE_componentWillUpdate=="function"&&Xe.UNSAFE_componentWillUpdate(Ie,Ii,ri)),typeof Xe.componentDidUpdate=="function"&&(Se.flags|=4),typeof Xe.getSnapshotBeforeUpdate=="function"&&(Se.flags|=1024)):(typeof Xe.componentDidUpdate!="function"||En===_e.memoizedProps&&Ci===_e.memoizedState||(Se.flags|=4),typeof Xe.getSnapshotBeforeUpdate!="function"||En===_e.memoizedProps&&Ci===_e.memoizedState||(Se.flags|=1024),Se.memoizedProps=Ie,Se.memoizedState=Ii),Xe.props=Ie,Xe.state=Ii,Xe.context=ri,Ie=Oi):(typeof Xe.componentDidUpdate!="function"||En===_e.memoizedProps&&Ci===_e.memoizedState||(Se.flags|=4),typeof Xe.getSnapshotBeforeUpdate!="function"||En===_e.memoizedProps&&Ci===_e.memoizedState||(Se.flags|=1024),Ie=!1)}return Xe=Ie,sd(_e,Se),Ie=(Se.flags&128)!==0,Xe||Ie?(Xe=Se.stateNode,Te=Ie&&typeof Te.getDerivedStateFromError!="function"?null:Xe.render(),Se.flags|=1,_e!==null&&Ie?(Se.child=Br(Se,_e.child,null,je),Se.child=Br(Se,null,Te,je)):ia(_e,Se,Te,je),Se.memoizedState=Xe.state,_e=Se.child):_e=Rl(_e,Se,je),_e}function Ag(_e,Se,Te,Ie){return El(),Se.flags|=256,ia(_e,Se,Te,Ie),Se.child}var pf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gf(_e){return{baseLanes:_e,cachePool:Kn()}}function mf(_e,Se,Te){return _e=_e!==null?_e.childLanes&~Te:0,Se&&(_e|=Xa),_e}function Pg(_e,Se,Te){var Ie=Se.pendingProps,je=!1,Xe=(Se.flags&128)!==0,En;if((En=Xe)||(En=_e!==null&&_e.memoizedState===null?!1:(fs.current&2)!==0),En&&(je=!0,Se.flags&=-129),En=(Se.flags&32)!==0,Se.flags&=-33,_e===null){if(Rr){if(je?ya(Se):uo(),(_e=ts)?(_e=Mm(_e,cs),_e=_e!==null&&_e.data!=="&"?_e:null,_e!==null&&(Se.memoizedState={dehydrated:_e,treeContext:Xo!==null?{id:Ia,overflow:Ma}:null,retryLane:536870912,hydrationErrors:null},Te=Ec(_e),Te.return=Se,Se.child=Te,Fs=Se,ts=null)):_e=null,_e===null)throw Zo(Se);return Zf(_e)?Se.lanes=32:Se.lanes=536870912,null}var On=Ie.children;return Ie=Ie.fallback,je?(uo(),je=Se.mode,On=ad({mode:"hidden",children:On},je),Ie=Jo(Ie,je,Te,null),On.return=Se,Ie.return=Se,On.sibling=Ie,Se.child=On,Ie=Se.child,Ie.memoizedState=gf(Te),Ie.childLanes=mf(_e,En,Te),Se.memoizedState=pf,xh(null,Ie)):(ya(Se),yf(Se,On))}var ri=_e.memoizedState;if(ri!==null&&(On=ri.dehydrated,On!==null)){if(Xe)Se.flags&256?(ya(Se),Se.flags&=-257,Se=vf(_e,Se,Te)):Se.memoizedState!==null?(uo(),Se.child=_e.child,Se.flags|=128,Se=null):(uo(),On=Ie.fallback,je=Se.mode,Ie=ad({mode:"visible",children:Ie.children},je),On=Jo(On,je,Te,null),On.flags|=2,Ie.return=Se,On.return=Se,Ie.sibling=On,Se.child=Ie,Br(Se,_e.child,null,Te),Ie=Se.child,Ie.memoizedState=gf(Te),Ie.childLanes=mf(_e,En,Te),Se.memoizedState=pf,Se=xh(null,Ie));else if(ya(Se),Zf(On)){if(En=On.nextSibling&&On.nextSibling.dataset,En)var Ti=En.dgst;En=Ti,Ie=Error(xe(419)),Ie.stack="",Ie.digest=En,su({value:Ie,source:null,stack:null}),Se=vf(_e,Se,Te)}else if(Is||tl(_e,Se,Te,!1),En=(Te&_e.childLanes)!==0,Is||En){if(En=is,En!==null&&(Ie=Bi(En,Te),Ie!==0&&Ie!==ri.retryLane))throw ri.retryLane=Ie,Ao(_e,Ie),Ua(En,_e,Ie),df;Xf(On)||md(),Se=vf(_e,Se,Te)}else Xf(On)?(Se.flags|=192,Se.child=_e.child,Se=null):(_e=ri.treeContext,ts=po(On.nextSibling),Fs=Se,Rr=!0,na=null,cs=!1,_e!==null&&Kh(Se,_e),Se=yf(Se,Ie.children),Se.flags|=4096);return Se}return je?(uo(),On=Ie.fallback,je=Se.mode,ri=_e.child,Ti=ri.sibling,Ie=Ra(ri,{mode:"hidden",children:Ie.children}),Ie.subtreeFlags=ri.subtreeFlags&65011712,Ti!==null?On=Ra(Ti,On):(On=Jo(On,je,Te,null),On.flags|=2),On.return=Se,Ie.return=Se,Ie.sibling=On,Se.child=Ie,xh(null,Ie),Ie=Se.child,On=_e.child.memoizedState,On===null?On=gf(Te):(je=On.cachePool,je!==null?(ri=vs._currentValue,je=je.parent!==ri?{parent:ri,pool:ri}:je):je=Kn(),On={baseLanes:On.baseLanes|Te,cachePool:je}),Ie.memoizedState=On,Ie.childLanes=mf(_e,En,Te),Se.memoizedState=pf,xh(_e.child,Ie)):(ya(Se),Te=_e.child,_e=Te.sibling,Te=Ra(Te,{mode:"visible",children:Ie.children}),Te.return=Se,Te.sibling=null,_e!==null&&(En=Se.deletions,En===null?(Se.deletions=[_e],Se.flags|=16):En.push(_e)),Se.child=Te,Se.memoizedState=null,Te)}function yf(_e,Se){return Se=ad({mode:"visible",children:Se},_e.mode),Se.return=_e,_e.child=Se}function ad(_e,Se){return _e=Ks(22,_e,null,Se),_e.lanes=0,_e}function vf(_e,Se,Te){return Br(Se,_e.child,null,Te),_e=yf(Se,Se.pendingProps.children),_e.flags|=2,Se.memoizedState=null,_e}function Tg(_e,Se,Te){_e.lanes|=Se;var Ie=_e.alternate;Ie!==null&&(Ie.lanes|=Se),au(_e.return,Se,Te)}function bf(_e,Se,Te,Ie,je,Xe){var En=_e.memoizedState;En===null?_e.memoizedState={isBackwards:Se,rendering:null,renderingStartTime:0,last:Ie,tail:Te,tailMode:je,treeForkCount:Xe}:(En.isBackwards=Se,En.rendering=null,En.renderingStartTime=0,En.last=Ie,En.tail=Te,En.tailMode=je,En.treeForkCount=Xe)}function Cg(_e,Se,Te){var Ie=Se.pendingProps,je=Ie.revealOrder,Xe=Ie.tail;Ie=Ie.children;var En=fs.current,On=(En&2)!==0;if(On?(En=En&1|2,Se.flags|=128):En&=1,We(fs,En),ia(_e,Se,Ie,Te),Ie=Rr?Yu:0,!On&&_e!==null&&(_e.flags&128)!==0)e:for(_e=Se.child;_e!==null;){if(_e.tag===13)_e.memoizedState!==null&&Tg(_e,Te,Se);else if(_e.tag===19)Tg(_e,Te,Se);else if(_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===Se)break e;for(;_e.sibling===null;){if(_e.return===null||_e.return===Se)break e;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}switch(je){case"forwards":for(Te=Se.child,je=null;Te!==null;)_e=Te.alternate,_e!==null&&wl(_e)===null&&(je=Te),Te=Te.sibling;Te=je,Te===null?(je=Se.child,Se.child=null):(je=Te.sibling,Te.sibling=null),bf(Se,!1,je,Te,Xe,Ie);break;case"backwards":case"unstable_legacy-backwards":for(Te=null,je=Se.child,Se.child=null;je!==null;){if(_e=je.alternate,_e!==null&&wl(_e)===null){Se.child=je;break}_e=je.sibling,je.sibling=Te,Te=je,je=_e}bf(Se,!0,Te,null,Xe,Ie);break;case"together":bf(Se,!1,null,null,void 0,Ie);break;default:Se.memoizedState=null}return Se.child}function Rl(_e,Se,Te){if(_e!==null&&(Se.dependencies=_e.dependencies),pu|=Se.lanes,(Te&Se.childLanes)===0)if(_e!==null){if(tl(_e,Se,Te,!1),(Te&Se.childLanes)===0)return null}else return null;if(_e!==null&&Se.child!==_e.child)throw Error(xe(153));if(Se.child!==null){for(_e=Se.child,Te=Ra(_e,_e.pendingProps),Se.child=Te,Te.return=Se;_e.sibling!==null;)_e=_e.sibling,Te=Te.sibling=Ra(_e,_e.pendingProps),Te.return=Se;Te.sibling=null}return Se.child}function xf(_e,Se){return(_e.lanes&Se)!==0?!0:(_e=_e.dependencies,!!(_e!==null&&Tc(_e)))}function W0(_e,Se,Te){switch(Se.tag){case 3:wn(Se,Se.stateNode.containerInfo),el(Se,vs,_e.memoizedState.cache),El();break;case 27:case 5:$n(Se);break;case 4:wn(Se,Se.stateNode.containerInfo);break;case 10:el(Se,Se.type,Se.memoizedProps.value);break;case 31:if(Se.memoizedState!==null)return Se.flags|=128,lo(Se),null;break;case 13:var Ie=Se.memoizedState;if(Ie!==null)return Ie.dehydrated!==null?(ya(Se),Se.flags|=128,null):(Te&Se.child.childLanes)!==0?Pg(_e,Se,Te):(ya(Se),_e=Rl(_e,Se,Te),_e!==null?_e.sibling:null);ya(Se);break;case 19:var je=(_e.flags&128)!==0;if(Ie=(Te&Se.childLanes)!==0,Ie||(tl(_e,Se,Te,!1),Ie=(Te&Se.childLanes)!==0),je){if(Ie)return Cg(_e,Se,Te);Se.flags|=128}if(je=Se.memoizedState,je!==null&&(je.rendering=null,je.tail=null,je.lastEffect=null),We(fs,fs.current),Ie)break;return null;case 22:return Se.lanes=0,xg(_e,Se,Te,Se.pendingProps);case 24:el(Se,vs,_e.memoizedState.cache)}return Rl(_e,Se,Te)}function Rg(_e,Se,Te){if(_e!==null)if(_e.memoizedProps!==Se.pendingProps)Is=!0;else{if(!xf(_e,Te)&&(Se.flags&128)===0)return Is=!1,W0(_e,Se,Te);Is=(_e.flags&131072)!==0}else Is=!1,Rr&&(Se.flags&1048576)!==0&&Wh(Se,Yu,Se.index);switch(Se.lanes=0,Se.tag){case 16:e:{var Ie=Se.pendingProps;if(_e=hi(Se.elementType),Se.type=_e,typeof _e=="function")_c(_e)?(Ie=tc(_e,Ie),Se.tag=1,Se=wg(null,Se,_e,Ie,Te)):(Se.tag=0,Se=ff(null,Se,_e,Ie,Te));else{if(_e!=null){var je=_e.$$typeof;if(je===rn){Se.tag=11,Se=yg(null,Se,_e,Ie,Te);break e}else if(je===qe){Se.tag=14,Se=vg(null,Se,_e,Ie,Te);break e}}throw Se=Sn(_e)||_e,Error(xe(306,Se,""))}}return Se;case 0:return ff(_e,Se,Se.type,Se.pendingProps,Te);case 1:return Ie=Se.type,je=tc(Ie,Se.pendingProps),wg(_e,Se,Ie,je,Te);case 3:e:{if(wn(Se,Se.stateNode.containerInfo),_e===null)throw Error(xe(387));Ie=Se.pendingProps;var Xe=Se.memoizedState;je=Xe.element,jr(_e,Se),Us(Se,Ie,null,Te);var En=Se.memoizedState;if(Ie=En.cache,el(Se,vs,Ie),Ie!==Xe.cache&&Sl(Se,[vs],Te,!0),Dr(),Ie=En.element,Xe.isDehydrated)if(Xe={element:Ie,isDehydrated:!1,cache:En.cache},Se.updateQueue.baseState=Xe,Se.memoizedState=Xe,Se.flags&256){Se=Ag(_e,Se,Ie,Te);break e}else if(Ie!==je){je=Ba(Error(xe(424)),Se),su(je),Se=Ag(_e,Se,Ie,Te);break e}else{switch(_e=Se.stateNode.containerInfo,_e.nodeType){case 9:_e=_e.body;break;default:_e=_e.nodeName==="HTML"?_e.ownerDocument.body:_e}for(ts=po(_e.firstChild),Fs=Se,Rr=!0,na=null,cs=!0,Te=Mr(Se,null,Ie,Te),Se.child=Te;Te;)Te.flags=Te.flags&-3|4096,Te=Te.sibling}else{if(El(),Ie===je){Se=Rl(_e,Se,Te);break e}ia(_e,Se,Ie,Te)}Se=Se.child}return Se;case 26:return sd(_e,Se),_e===null?(Te=jm(Se.type,null,Se.pendingProps,null))?Se.memoizedState=Te:Rr||(Te=Se.type,_e=Se.pendingProps,Ie=Sd(yn.current).createElement(Te),Ie[Qi]=Se,Ie[rr]=_e,ra(Ie,Te,_e),Es(Ie),Se.stateNode=Ie):Se.memoizedState=jm(Se.type,_e.memoizedProps,Se.pendingProps,_e.memoizedState),null;case 27:return $n(Se),_e===null&&Rr&&(Ie=Se.stateNode=Dm(Se.type,Se.pendingProps,yn.current),Fs=Se,cs=!0,je=ts,bu(Se.type)?(Qf=je,ts=po(Ie.firstChild)):ts=je),ia(_e,Se,Se.pendingProps.children,Te),sd(_e,Se),_e===null&&(Se.flags|=4194304),Se.child;case 5:return _e===null&&Rr&&((je=Ie=ts)&&(Ie=Sy(Ie,Se.type,Se.pendingProps,cs),Ie!==null?(Se.stateNode=Ie,Fs=Se,ts=po(Ie.firstChild),cs=!1,je=!0):je=!1),je||Zo(Se)),$n(Se),je=Se.type,Xe=Se.pendingProps,En=_e!==null?_e.memoizedProps:null,Ie=Xe.children,Kf(je,Xe)?Ie=null:En!==null&&Kf(je,En)&&(Se.flags|=32),Se.memoizedState!==null&&(je=hh(_e,Se,ef,null,null,Te),Lh._currentValue=je),sd(_e,Se),ia(_e,Se,Ie,Te),Se.child;case 6:return _e===null&&Rr&&((_e=Te=ts)&&(Te=wy(Te,Se.pendingProps,cs),Te!==null?(Se.stateNode=Te,Fs=Se,ts=null,_e=!0):_e=!1),_e||Zo(Se)),null;case 13:return Pg(_e,Se,Te);case 4:return wn(Se,Se.stateNode.containerInfo),Ie=Se.pendingProps,_e===null?Se.child=Br(Se,null,Ie,Te):ia(_e,Se,Ie,Te),Se.child;case 11:return yg(_e,Se,Se.type,Se.pendingProps,Te);case 7:return ia(_e,Se,Se.pendingProps,Te),Se.child;case 8:return ia(_e,Se,Se.pendingProps.children,Te),Se.child;case 12:return ia(_e,Se,Se.pendingProps.children,Te),Se.child;case 10:return Ie=Se.pendingProps,el(Se,Se.type,Ie.value),ia(_e,Se,Ie.children,Te),Se.child;case 9:return je=Se.type._context,Ie=Se.pendingProps.children,nl(Se),je=js(je),Ie=Ie(je),Se.flags|=1,ia(_e,Se,Ie,Te),Se.child;case 14:return vg(_e,Se,Se.type,Se.pendingProps,Te);case 15:return bg(_e,Se,Se.type,Se.pendingProps,Te);case 19:return Cg(_e,Se,Te);case 31:return $0(_e,Se,Te);case 22:return xg(_e,Se,Te,Se.pendingProps);case 24:return nl(Se),Ie=js(vs),_e===null?(je=Vn(),je===null&&(je=is,Xe=ou(),je.pooledCache=Xe,Xe.refCount++,Xe!==null&&(je.pooledCacheLanes|=Te),je=Xe),Se.memoizedState={parent:Ie,cache:je},Hr(Se),el(Se,vs,je)):((_e.lanes&Te)!==0&&(jr(_e,Se),Us(Se,null,null,Te),Dr()),je=_e.memoizedState,Xe=Se.memoizedState,je.parent!==Ie?(je={parent:Ie,cache:Ie},Se.memoizedState=je,Se.lanes===0&&(Se.memoizedState=Se.updateQueue.baseState=je),el(Se,vs,Ie)):(Ie=Xe.cache,el(Se,vs,Ie),Ie!==je.cache&&Sl(Se,[vs],Te,!0))),ia(_e,Se,Se.pendingProps.children,Te),Se.child;case 29:throw Se.pendingProps}throw Error(xe(156,Se.tag))}function Bl(_e){_e.flags|=4}function _f(_e,Se,Te,Ie,je){if((Se=(_e.mode&32)!==0)&&(Se=!1),Se){if(_e.flags|=16777216,(je&335544128)===je)if(_e.stateNode.complete)_e.flags|=8192;else if(nm())_e.flags|=8192;else throw mi=vi,Ai}else _e.flags&=-16777217}function Bg(_e,Se){if(Se.type!=="stylesheet"||(Se.state.loading&4)!==0)_e.flags&=-16777217;else if(_e.flags|=16777216,!Gm(Se))if(nm())_e.flags|=8192;else throw mi=vi,Ai}function od(_e,Se){Se!==null&&(_e.flags|=4),_e.flags&16384&&(Se=_e.tag!==22?Hn():536870912,_e.lanes|=Se,zc|=Se)}function _h(_e,Se){if(!Rr)switch(_e.tailMode){case"hidden":Se=_e.tail;for(var Te=null;Se!==null;)Se.alternate!==null&&(Te=Se),Se=Se.sibling;Te===null?_e.tail=null:Te.sibling=null;break;case"collapsed":Te=_e.tail;for(var Ie=null;Te!==null;)Te.alternate!==null&&(Ie=Te),Te=Te.sibling;Ie===null?Se||_e.tail===null?_e.tail=null:_e.tail.sibling=null:Ie.sibling=null}}function us(_e){var Se=_e.alternate!==null&&_e.alternate.child===_e.child,Te=0,Ie=0;if(Se)for(var je=_e.child;je!==null;)Te|=je.lanes|je.childLanes,Ie|=je.subtreeFlags&65011712,Ie|=je.flags&65011712,je.return=_e,je=je.sibling;else for(je=_e.child;je!==null;)Te|=je.lanes|je.childLanes,Ie|=je.subtreeFlags,Ie|=je.flags,je.return=_e,je=je.sibling;return _e.subtreeFlags|=Ie,_e.childLanes=Te,Se}function K0(_e,Se,Te){var Ie=Se.pendingProps;switch(Ac(Se),Se.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return us(Se),null;case 1:return us(Se),null;case 3:return Te=Se.stateNode,Ie=null,_e!==null&&(Ie=_e.memoizedState.cache),Se.memoizedState.cache!==Ie&&(Se.flags|=2048),La(vs),kn(),Te.pendingContext&&(Te.context=Te.pendingContext,Te.pendingContext=null),(_e===null||_e.child===null)&&(Os(Se)?Bl(Se):_e===null||_e.memoizedState.isDehydrated&&(Se.flags&256)===0||(Se.flags|=1024,uh())),us(Se),null;case 26:var je=Se.type,Xe=Se.memoizedState;return _e===null?(Bl(Se),Xe!==null?(us(Se),Bg(Se,Xe)):(us(Se),_f(Se,je,null,Ie,Te))):Xe?Xe!==_e.memoizedState?(Bl(Se),us(Se),Bg(Se,Xe)):(us(Se),Se.flags&=-16777217):(_e=_e.memoizedProps,_e!==Ie&&Bl(Se),us(Se),_f(Se,je,_e,Ie,Te)),null;case 27:if(Ln(Se),Te=yn.current,je=Se.type,_e!==null&&Se.stateNode!=null)_e.memoizedProps!==Ie&&Bl(Se);else{if(!Ie){if(Se.stateNode===null)throw Error(xe(166));return us(Se),null}_e=Ze.current,Os(Se)?lh(Se):(_e=Dm(je,Ie,Te),Se.stateNode=_e,Bl(Se))}return us(Se),null;case 5:if(Ln(Se),je=Se.type,_e!==null&&Se.stateNode!=null)_e.memoizedProps!==Ie&&Bl(Se);else{if(!Ie){if(Se.stateNode===null)throw Error(xe(166));return us(Se),null}if(Xe=Ze.current,Os(Se))lh(Se);else{var En=Sd(yn.current);switch(Xe){case 1:Xe=En.createElementNS("http://www.w3.org/2000/svg",je);break;case 2:Xe=En.createElementNS("http://www.w3.org/1998/Math/MathML",je);break;default:switch(je){case"svg":Xe=En.createElementNS("http://www.w3.org/2000/svg",je);break;case"math":Xe=En.createElementNS("http://www.w3.org/1998/Math/MathML",je);break;case"script":Xe=En.createElement("div"),Xe.innerHTML="<script><\/script>",Xe=Xe.removeChild(Xe.firstChild);break;case"select":Xe=typeof Ie.is=="string"?En.createElement("select",{is:Ie.is}):En.createElement("select"),Ie.multiple?Xe.multiple=!0:Ie.size&&(Xe.size=Ie.size);break;default:Xe=typeof Ie.is=="string"?En.createElement(je,{is:Ie.is}):En.createElement(je)}}Xe[Qi]=Se,Xe[rr]=Ie;e:for(En=Se.child;En!==null;){if(En.tag===5||En.tag===6)Xe.appendChild(En.stateNode);else if(En.tag!==4&&En.tag!==27&&En.child!==null){En.child.return=En,En=En.child;continue}if(En===Se)break e;for(;En.sibling===null;){if(En.return===null||En.return===Se)break e;En=En.return}En.sibling.return=En.return,En=En.sibling}Se.stateNode=Xe;e:switch(ra(Xe,je,Ie),je){case"button":case"input":case"select":case"textarea":Ie=!!Ie.autoFocus;break e;case"img":Ie=!0;break e;default:Ie=!1}Ie&&Bl(Se)}}return us(Se),_f(Se,Se.type,_e===null?null:_e.memoizedProps,Se.pendingProps,Te),null;case 6:if(_e&&Se.stateNode!=null)_e.memoizedProps!==Ie&&Bl(Se);else{if(typeof Ie!="string"&&Se.stateNode===null)throw Error(xe(166));if(_e=yn.current,Os(Se)){if(_e=Se.stateNode,Te=Se.memoizedProps,Ie=null,je=Fs,je!==null)switch(je.tag){case 27:case 5:Ie=je.memoizedProps}_e[Qi]=Se,_e=!!(_e.nodeValue===Te||Ie!==null&&Ie.suppressHydrationWarning===!0||Pm(_e.nodeValue,Te)),_e||Zo(Se,!0)}else _e=Sd(_e).createTextNode(Ie),_e[Qi]=Se,Se.stateNode=_e}return us(Se),null;case 31:if(Te=Se.memoizedState,_e===null||_e.memoizedState!==null){if(Ie=Os(Se),Te!==null){if(_e===null){if(!Ie)throw Error(xe(318));if(_e=Se.memoizedState,_e=_e!==null?_e.dehydrated:null,!_e)throw Error(xe(557));_e[Qi]=Se}else El(),(Se.flags&128)===0&&(Se.memoizedState=null),Se.flags|=4;us(Se),_e=!1}else Te=uh(),_e!==null&&_e.memoizedState!==null&&(_e.memoizedState.hydrationErrors=Te),_e=!0;if(!_e)return Se.flags&256?(ca(Se),Se):(ca(Se),null);if((Se.flags&128)!==0)throw Error(xe(558))}return us(Se),null;case 13:if(Ie=Se.memoizedState,_e===null||_e.memoizedState!==null&&_e.memoizedState.dehydrated!==null){if(je=Os(Se),Ie!==null&&Ie.dehydrated!==null){if(_e===null){if(!je)throw Error(xe(318));if(je=Se.memoizedState,je=je!==null?je.dehydrated:null,!je)throw Error(xe(317));je[Qi]=Se}else El(),(Se.flags&128)===0&&(Se.memoizedState=null),Se.flags|=4;us(Se),je=!1}else je=uh(),_e!==null&&_e.memoizedState!==null&&(_e.memoizedState.hydrationErrors=je),je=!0;if(!je)return Se.flags&256?(ca(Se),Se):(ca(Se),null)}return ca(Se),(Se.flags&128)!==0?(Se.lanes=Te,Se):(Te=Ie!==null,_e=_e!==null&&_e.memoizedState!==null,Te&&(Ie=Se.child,je=null,Ie.alternate!==null&&Ie.alternate.memoizedState!==null&&Ie.alternate.memoizedState.cachePool!==null&&(je=Ie.alternate.memoizedState.cachePool.pool),Xe=null,Ie.memoizedState!==null&&Ie.memoizedState.cachePool!==null&&(Xe=Ie.memoizedState.cachePool.pool),Xe!==je&&(Ie.flags|=2048)),Te!==_e&&Te&&(Se.child.flags|=8192),od(Se,Se.updateQueue),us(Se),null);case 4:return kn(),_e===null&&qf(Se.stateNode.containerInfo),us(Se),null;case 10:return La(Se.type),us(Se),null;case 19:if(Je(fs),Ie=Se.memoizedState,Ie===null)return us(Se),null;if(je=(Se.flags&128)!==0,Xe=Ie.rendering,Xe===null)if(je)_h(Ie,!1);else{if(As!==0||_e!==null&&(_e.flags&128)!==0)for(_e=Se.child;_e!==null;){if(Xe=wl(_e),Xe!==null){for(Se.flags|=128,_h(Ie,!1),_e=Xe.updateQueue,Se.updateQueue=_e,od(Se,_e),Se.subtreeFlags=0,_e=Te,Te=Se.child;Te!==null;)Wu(Te,_e),Te=Te.sibling;return We(fs,fs.current&1|2),Rr&&ga(Se,Ie.treeForkCount),Se.child}_e=_e.sibling}Ie.tail!==null&&Qn()>dd&&(Se.flags|=128,je=!0,_h(Ie,!1),Se.lanes=4194304)}else{if(!je)if(_e=wl(Xe),_e!==null){if(Se.flags|=128,je=!0,_e=_e.updateQueue,Se.updateQueue=_e,od(Se,_e),_h(Ie,!0),Ie.tail===null&&Ie.tailMode==="hidden"&&!Xe.alternate&&!Rr)return us(Se),null}else 2*Qn()-Ie.renderingStartTime>dd&&Te!==536870912&&(Se.flags|=128,je=!0,_h(Ie,!1),Se.lanes=4194304);Ie.isBackwards?(Xe.sibling=Se.child,Se.child=Xe):(_e=Ie.last,_e!==null?_e.sibling=Xe:Se.child=Xe,Ie.last=Xe)}return Ie.tail!==null?(_e=Ie.tail,Ie.rendering=_e,Ie.tail=_e.sibling,Ie.renderingStartTime=Qn(),_e.sibling=null,Te=fs.current,We(fs,je?Te&1|2:Te&1),Rr&&ga(Se,Ie.treeForkCount),_e):(us(Se),null);case 22:case 23:return ca(Se),ws(),Ie=Se.memoizedState!==null,_e!==null?_e.memoizedState!==null!==Ie&&(Se.flags|=8192):Ie&&(Se.flags|=8192),Ie?(Te&536870912)!==0&&(Se.flags&128)===0&&(us(Se),Se.subtreeFlags&6&&(Se.flags|=8192)):us(Se),Te=Se.updateQueue,Te!==null&&od(Se,Te.retryQueue),Te=null,_e!==null&&_e.memoizedState!==null&&_e.memoizedState.cachePool!==null&&(Te=_e.memoizedState.cachePool.pool),Ie=null,Se.memoizedState!==null&&Se.memoizedState.cachePool!==null&&(Ie=Se.memoizedState.cachePool.pool),Ie!==Te&&(Se.flags|=2048),_e!==null&&Je(Mn),null;case 24:return Te=null,_e!==null&&(Te=_e.memoizedState.cache),Se.memoizedState.cache!==Te&&(Se.flags|=2048),La(vs),us(Se),null;case 25:return null;case 30:return null}throw Error(xe(156,Se.tag))}function Y0(_e,Se){switch(Ac(Se),Se.tag){case 1:return _e=Se.flags,_e&65536?(Se.flags=_e&-65537|128,Se):null;case 3:return La(vs),kn(),_e=Se.flags,(_e&65536)!==0&&(_e&128)===0?(Se.flags=_e&-65537|128,Se):null;case 26:case 27:case 5:return Ln(Se),null;case 31:if(Se.memoizedState!==null){if(ca(Se),Se.alternate===null)throw Error(xe(340));El()}return _e=Se.flags,_e&65536?(Se.flags=_e&-65537|128,Se):null;case 13:if(ca(Se),_e=Se.memoizedState,_e!==null&&_e.dehydrated!==null){if(Se.alternate===null)throw Error(xe(340));El()}return _e=Se.flags,_e&65536?(Se.flags=_e&-65537|128,Se):null;case 19:return Je(fs),null;case 4:return kn(),null;case 10:return La(Se.type),null;case 22:case 23:return ca(Se),ws(),_e!==null&&Je(Mn),_e=Se.flags,_e&65536?(Se.flags=_e&-65537|128,Se):null;case 24:return La(vs),null;case 25:return null;default:return null}}function Ng(_e,Se){switch(Ac(Se),Se.tag){case 3:La(vs),kn();break;case 26:case 27:case 5:Ln(Se);break;case 4:kn();break;case 31:Se.memoizedState!==null&&ca(Se);break;case 13:ca(Se);break;case 19:Je(fs);break;case 10:La(Se.type);break;case 22:case 23:ca(Se),ws(),_e!==null&&Je(Mn);break;case 24:La(vs)}}function Eh(_e,Se){try{var Te=Se.updateQueue,Ie=Te!==null?Te.lastEffect:null;if(Ie!==null){var je=Ie.next;Te=je;do{if((Te.tag&_e)===_e){Ie=void 0;var Xe=Te.create,En=Te.inst;Ie=Xe(),En.destroy=Ie}Te=Te.next}while(Te!==je)}}catch(On){Kr(Se,Se.return,On)}}function du(_e,Se,Te){try{var Ie=Se.updateQueue,je=Ie!==null?Ie.lastEffect:null;if(je!==null){var Xe=je.next;Ie=Xe;do{if((Ie.tag&_e)===_e){var En=Ie.inst,On=En.destroy;if(On!==void 0){En.destroy=void 0,je=Se;var ri=Te,Ti=On;try{Ti()}catch(Oi){Kr(je,ri,Oi)}}}Ie=Ie.next}while(Ie!==Xe)}}catch(Oi){Kr(Se,Se.return,Oi)}}function kg(_e){var Se=_e.updateQueue;if(Se!==null){var Te=_e.stateNode;try{Ts(Se,Te)}catch(Ie){Kr(_e,_e.return,Ie)}}}function Ig(_e,Se,Te){Te.props=tc(_e.type,_e.memoizedProps),Te.state=_e.memoizedState;try{Te.componentWillUnmount()}catch(Ie){Kr(_e,Se,Ie)}}function Sh(_e,Se){try{var Te=_e.ref;if(Te!==null){switch(_e.tag){case 26:case 27:case 5:var Ie=_e.stateNode;break;case 30:Ie=_e.stateNode;break;default:Ie=_e.stateNode}typeof Te=="function"?_e.refCleanup=Te(Ie):Te.current=Ie}}catch(je){Kr(_e,Se,je)}}function ol(_e,Se){var Te=_e.ref,Ie=_e.refCleanup;if(Te!==null)if(typeof Ie=="function")try{Ie()}catch(je){Kr(_e,Se,je)}finally{_e.refCleanup=null,_e=_e.alternate,_e!=null&&(_e.refCleanup=null)}else if(typeof Te=="function")try{Te(null)}catch(je){Kr(_e,Se,je)}else Te.current=null}function Mg(_e){var Se=_e.type,Te=_e.memoizedProps,Ie=_e.stateNode;try{e:switch(Se){case"button":case"input":case"select":case"textarea":Te.autoFocus&&Ie.focus();break e;case"img":Te.src?Ie.src=Te.src:Te.srcSet&&(Ie.srcset=Te.srcSet)}}catch(je){Kr(_e,_e.return,je)}}function Ef(_e,Se,Te){try{var Ie=_e.stateNode;yy(Ie,_e.type,Te,Se),Ie[rr]=Se}catch(je){Kr(_e,_e.return,je)}}function Lg(_e){return _e.tag===5||_e.tag===3||_e.tag===26||_e.tag===27&&bu(_e.type)||_e.tag===4}function Sf(_e){e:for(;;){for(;_e.sibling===null;){if(_e.return===null||Lg(_e.return))return null;_e=_e.return}for(_e.sibling.return=_e.return,_e=_e.sibling;_e.tag!==5&&_e.tag!==6&&_e.tag!==18;){if(_e.tag===27&&bu(_e.type)||_e.flags&2||_e.child===null||_e.tag===4)continue e;_e.child.return=_e,_e=_e.child}if(!(_e.flags&2))return _e.stateNode}}function wf(_e,Se,Te){var Ie=_e.tag;if(Ie===5||Ie===6)_e=_e.stateNode,Se?(Te.nodeType===9?Te.body:Te.nodeName==="HTML"?Te.ownerDocument.body:Te).insertBefore(_e,Se):(Se=Te.nodeType===9?Te.body:Te.nodeName==="HTML"?Te.ownerDocument.body:Te,Se.appendChild(_e),Te=Te._reactRootContainer,Te!=null||Se.onclick!==null||(Se.onclick=ss));else if(Ie!==4&&(Ie===27&&bu(_e.type)&&(Te=_e.stateNode,Se=null),_e=_e.child,_e!==null))for(wf(_e,Se,Te),_e=_e.sibling;_e!==null;)wf(_e,Se,Te),_e=_e.sibling}function ld(_e,Se,Te){var Ie=_e.tag;if(Ie===5||Ie===6)_e=_e.stateNode,Se?Te.insertBefore(_e,Se):Te.appendChild(_e);else if(Ie!==4&&(Ie===27&&bu(_e.type)&&(Te=_e.stateNode),_e=_e.child,_e!==null))for(ld(_e,Se,Te),_e=_e.sibling;_e!==null;)ld(_e,Se,Te),_e=_e.sibling}function Vg(_e){var Se=_e.stateNode,Te=_e.memoizedProps;try{for(var Ie=_e.type,je=Se.attributes;je.length;)Se.removeAttributeNode(je[0]);ra(Se,Ie,Te),Se[Qi]=_e,Se[rr]=Te}catch(Xe){Kr(_e,_e.return,Xe)}}var Nl=!1,Ms=!1,Af=!1,Dg=typeof WeakSet=="function"?WeakSet:Set,Js=null;function J0(_e,Se){if(_e=_e.containerInfo,$f=Bd,_e=Wa(_e),Ka(_e)){if("selectionStart"in _e)var Te={start:_e.selectionStart,end:_e.selectionEnd};else e:{Te=(Te=_e.ownerDocument)&&Te.defaultView||window;var Ie=Te.getSelection&&Te.getSelection();if(Ie&&Ie.rangeCount!==0){Te=Ie.anchorNode;var je=Ie.anchorOffset,Xe=Ie.focusNode;Ie=Ie.focusOffset;try{Te.nodeType,Xe.nodeType}catch{Te=null;break e}var En=0,On=-1,ri=-1,Ti=0,Oi=0,Ki=_e,Ci=null;t:for(;;){for(var Ii;Ki!==Te||je!==0&&Ki.nodeType!==3||(On=En+je),Ki!==Xe||Ie!==0&&Ki.nodeType!==3||(ri=En+Ie),Ki.nodeType===3&&(En+=Ki.nodeValue.length),(Ii=Ki.firstChild)!==null;)Ci=Ki,Ki=Ii;for(;;){if(Ki===_e)break t;if(Ci===Te&&++Ti===je&&(On=En),Ci===Xe&&++Oi===Ie&&(ri=En),(Ii=Ki.nextSibling)!==null)break;Ki=Ci,Ci=Ki.parentNode}Ki=Ii}Te=On===-1||ri===-1?null:{start:On,end:ri}}else Te=null}Te=Te||{start:0,end:0}}else Te=null;for(Wf={focusedElem:_e,selectionRange:Te},Bd=!1,Js=Se;Js!==null;)if(Se=Js,_e=Se.child,(Se.subtreeFlags&1028)!==0&&_e!==null)_e.return=Se,Js=_e;else for(;Js!==null;){switch(Se=Js,Xe=Se.alternate,_e=Se.flags,Se.tag){case 0:if((_e&4)!==0&&(_e=Se.updateQueue,_e=_e!==null?_e.events:null,_e!==null))for(Te=0;Te<_e.length;Te++)je=_e[Te],je.ref.impl=je.nextImpl;break;case 11:case 15:break;case 1:if((_e&1024)!==0&&Xe!==null){_e=void 0,Te=Se,je=Xe.memoizedProps,Xe=Xe.memoizedState,Ie=Te.stateNode;try{var dr=tc(Te.type,je);_e=Ie.getSnapshotBeforeUpdate(dr,Xe),Ie.__reactInternalSnapshotBeforeUpdate=_e}catch(_r){Kr(Te,Te.return,_r)}}break;case 3:if((_e&1024)!==0){if(_e=Se.stateNode.containerInfo,Te=_e.nodeType,Te===9)Jf(_e);else if(Te===1)switch(_e.nodeName){case"HEAD":case"HTML":case"BODY":Jf(_e);break;default:_e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((_e&1024)!==0)throw Error(xe(163))}if(_e=Se.sibling,_e!==null){_e.return=Se.return,Js=_e;break}Js=Se.return}}function Fg(_e,Se,Te){var Ie=Te.flags;switch(Te.tag){case 0:case 11:case 15:Il(_e,Te),Ie&4&&Eh(5,Te);break;case 1:if(Il(_e,Te),Ie&4)if(_e=Te.stateNode,Se===null)try{_e.componentDidMount()}catch(En){Kr(Te,Te.return,En)}else{var je=tc(Te.type,Se.memoizedProps);Se=Se.memoizedState;try{_e.componentDidUpdate(je,Se,_e.__reactInternalSnapshotBeforeUpdate)}catch(En){Kr(Te,Te.return,En)}}Ie&64&&kg(Te),Ie&512&&Sh(Te,Te.return);break;case 3:if(Il(_e,Te),Ie&64&&(_e=Te.updateQueue,_e!==null)){if(Se=null,Te.child!==null)switch(Te.child.tag){case 27:case 5:Se=Te.child.stateNode;break;case 1:Se=Te.child.stateNode}try{Ts(_e,Se)}catch(En){Kr(Te,Te.return,En)}}break;case 27:Se===null&&Ie&4&&Vg(Te);case 26:case 5:Il(_e,Te),Se===null&&Ie&4&&Mg(Te),Ie&512&&Sh(Te,Te.return);break;case 12:Il(_e,Te);break;case 31:Il(_e,Te),Ie&4&&Ug(_e,Te);break;case 13:Il(_e,Te),Ie&4&&zg(_e,Te),Ie&64&&(_e=Te.memoizedState,_e!==null&&(_e=_e.dehydrated,_e!==null&&(Te=sy.bind(null,Te),Ay(_e,Te))));break;case 22:if(Ie=Te.memoizedState!==null||Nl,!Ie){Se=Se!==null&&Se.memoizedState!==null||Ms,je=Nl;var Xe=Ms;Nl=Ie,(Ms=Se)&&!Xe?Ml(_e,Te,(Te.subtreeFlags&8772)!==0):Il(_e,Te),Nl=je,Ms=Xe}break;case 30:break;default:Il(_e,Te)}}function Og(_e){var Se=_e.alternate;Se!==null&&(_e.alternate=null,Og(Se)),_e.child=null,_e.deletions=null,_e.sibling=null,_e.tag===5&&(Se=_e.stateNode,Se!==null&&Ls(Se)),_e.stateNode=null,_e.return=null,_e.dependencies=null,_e.memoizedProps=null,_e.memoizedState=null,_e.pendingProps=null,_e.stateNode=null,_e.updateQueue=null}var gs=null,Da=!1;function kl(_e,Se,Te){for(Te=Te.child;Te!==null;)jg(_e,Se,Te),Te=Te.sibling}function jg(_e,Se,Te){if(Xi&&typeof Xi.onCommitFiberUnmount=="function")try{Xi.onCommitFiberUnmount(Di,Te)}catch{}switch(Te.tag){case 26:Ms||ol(Te,Se),kl(_e,Se,Te),Te.memoizedState?Te.memoizedState.count--:Te.stateNode&&(Te=Te.stateNode,Te.parentNode.removeChild(Te));break;case 27:Ms||ol(Te,Se);var Ie=gs,je=Da;bu(Te.type)&&(gs=Te.stateNode,Da=!1),kl(_e,Se,Te),kh(Te.stateNode),gs=Ie,Da=je;break;case 5:Ms||ol(Te,Se);case 6:if(Ie=gs,je=Da,gs=null,kl(_e,Se,Te),gs=Ie,Da=je,gs!==null)if(Da)try{(gs.nodeType===9?gs.body:gs.nodeName==="HTML"?gs.ownerDocument.body:gs).removeChild(Te.stateNode)}catch(Xe){Kr(Te,Se,Xe)}else try{gs.removeChild(Te.stateNode)}catch(Xe){Kr(Te,Se,Xe)}break;case 18:gs!==null&&(Da?(_e=gs,km(_e.nodeType===9?_e.body:_e.nodeName==="HTML"?_e.ownerDocument.body:_e,Te.stateNode),Jc(_e)):km(gs,Te.stateNode));break;case 4:Ie=gs,je=Da,gs=Te.stateNode.containerInfo,Da=!0,kl(_e,Se,Te),gs=Ie,Da=je;break;case 0:case 11:case 14:case 15:du(2,Te,Se),Ms||du(4,Te,Se),kl(_e,Se,Te);break;case 1:Ms||(ol(Te,Se),Ie=Te.stateNode,typeof Ie.componentWillUnmount=="function"&&Ig(Te,Se,Ie)),kl(_e,Se,Te);break;case 21:kl(_e,Se,Te);break;case 22:Ms=(Ie=Ms)||Te.memoizedState!==null,kl(_e,Se,Te),Ms=Ie;break;default:kl(_e,Se,Te)}}function Ug(_e,Se){if(Se.memoizedState===null&&(_e=Se.alternate,_e!==null&&(_e=_e.memoizedState,_e!==null))){_e=_e.dehydrated;try{Jc(_e)}catch(Te){Kr(Se,Se.return,Te)}}}function zg(_e,Se){if(Se.memoizedState===null&&(_e=Se.alternate,_e!==null&&(_e=_e.memoizedState,_e!==null&&(_e=_e.dehydrated,_e!==null))))try{Jc(_e)}catch(Te){Kr(Se,Se.return,Te)}}function X0(_e){switch(_e.tag){case 31:case 13:case 19:var Se=_e.stateNode;return Se===null&&(Se=_e.stateNode=new Dg),Se;case 22:return _e=_e.stateNode,Se=_e._retryCache,Se===null&&(Se=_e._retryCache=new Dg),Se;default:throw Error(xe(435,_e.tag))}}function ud(_e,Se){var Te=X0(_e);Se.forEach(function(Ie){if(!Te.has(Ie)){Te.add(Ie);var je=ay.bind(null,_e,Ie);Ie.then(je,je)}})}function Fa(_e,Se){var Te=Se.deletions;if(Te!==null)for(var Ie=0;Ie<Te.length;Ie++){var je=Te[Ie],Xe=_e,En=Se,On=En;e:for(;On!==null;){switch(On.tag){case 27:if(bu(On.type)){gs=On.stateNode,Da=!1;break e}break;case 5:gs=On.stateNode,Da=!1;break e;case 3:case 4:gs=On.stateNode.containerInfo,Da=!0;break e}On=On.return}if(gs===null)throw Error(xe(160));jg(Xe,En,je),gs=null,Da=!1,Xe=je.alternate,Xe!==null&&(Xe.return=null),je.return=null}if(Se.subtreeFlags&13886)for(Se=Se.child;Se!==null;)qg(Se,_e),Se=Se.sibling}var ko=null;function qg(_e,Se){var Te=_e.alternate,Ie=_e.flags;switch(_e.tag){case 0:case 11:case 14:case 15:Fa(Se,_e),Oa(_e),Ie&4&&(du(3,_e,_e.return),Eh(3,_e),du(5,_e,_e.return));break;case 1:Fa(Se,_e),Oa(_e),Ie&512&&(Ms||Te===null||ol(Te,Te.return)),Ie&64&&Nl&&(_e=_e.updateQueue,_e!==null&&(Ie=_e.callbacks,Ie!==null&&(Te=_e.shared.hiddenCallbacks,_e.shared.hiddenCallbacks=Te===null?Ie:Te.concat(Ie))));break;case 26:var je=ko;if(Fa(Se,_e),Oa(_e),Ie&512&&(Ms||Te===null||ol(Te,Te.return)),Ie&4){var Xe=Te!==null?Te.memoizedState:null;if(Ie=_e.memoizedState,Te===null)if(Ie===null)if(_e.stateNode===null){e:{Ie=_e.type,Te=_e.memoizedProps,je=je.ownerDocument||je;t:switch(Ie){case"title":Xe=je.getElementsByTagName("title")[0],(!Xe||Xe[xs]||Xe[Qi]||Xe.namespaceURI==="http://www.w3.org/2000/svg"||Xe.hasAttribute("itemprop"))&&(Xe=je.createElement(Ie),je.head.insertBefore(Xe,je.querySelector("head > title"))),ra(Xe,Ie,Te),Xe[Qi]=_e,Es(Xe),Ie=Xe;break e;case"link":var En=qm("link","href",je).get(Ie+(Te.href||""));if(En){for(var On=0;On<En.length;On++)if(Xe=En[On],Xe.getAttribute("href")===(Te.href==null||Te.href===""?null:Te.href)&&Xe.getAttribute("rel")===(Te.rel==null?null:Te.rel)&&Xe.getAttribute("title")===(Te.title==null?null:Te.title)&&Xe.getAttribute("crossorigin")===(Te.crossOrigin==null?null:Te.crossOrigin)){En.splice(On,1);break t}}Xe=je.createElement(Ie),ra(Xe,Ie,Te),je.head.appendChild(Xe);break;case"meta":if(En=qm("meta","content",je).get(Ie+(Te.content||""))){for(On=0;On<En.length;On++)if(Xe=En[On],Xe.getAttribute("content")===(Te.content==null?null:""+Te.content)&&Xe.getAttribute("name")===(Te.name==null?null:Te.name)&&Xe.getAttribute("property")===(Te.property==null?null:Te.property)&&Xe.getAttribute("http-equiv")===(Te.httpEquiv==null?null:Te.httpEquiv)&&Xe.getAttribute("charset")===(Te.charSet==null?null:Te.charSet)){En.splice(On,1);break t}}Xe=je.createElement(Ie),ra(Xe,Ie,Te),je.head.appendChild(Xe);break;default:throw Error(xe(468,Ie))}Xe[Qi]=_e,Es(Xe),Ie=Xe}_e.stateNode=Ie}else Hm(je,_e.type,_e.stateNode);else _e.stateNode=zm(je,Ie,_e.memoizedProps);else Xe!==Ie?(Xe===null?Te.stateNode!==null&&(Te=Te.stateNode,Te.parentNode.removeChild(Te)):Xe.count--,Ie===null?Hm(je,_e.type,_e.stateNode):zm(je,Ie,_e.memoizedProps)):Ie===null&&_e.stateNode!==null&&Ef(_e,_e.memoizedProps,Te.memoizedProps)}break;case 27:Fa(Se,_e),Oa(_e),Ie&512&&(Ms||Te===null||ol(Te,Te.return)),Te!==null&&Ie&4&&Ef(_e,_e.memoizedProps,Te.memoizedProps);break;case 5:if(Fa(Se,_e),Oa(_e),Ie&512&&(Ms||Te===null||ol(Te,Te.return)),_e.flags&32){je=_e.stateNode;try{eo(je,"")}catch(dr){Kr(_e,_e.return,dr)}}Ie&4&&_e.stateNode!=null&&(je=_e.memoizedProps,Ef(_e,je,Te!==null?Te.memoizedProps:je)),Ie&1024&&(Af=!0);break;case 6:if(Fa(Se,_e),Oa(_e),Ie&4){if(_e.stateNode===null)throw Error(xe(162));Ie=_e.memoizedProps,Te=_e.stateNode;try{Te.nodeValue=Ie}catch(dr){Kr(_e,_e.return,dr)}}break;case 3:if(Pd=null,je=ko,ko=wd(Se.containerInfo),Fa(Se,_e),ko=je,Oa(_e),Ie&4&&Te!==null&&Te.memoizedState.isDehydrated)try{Jc(Se.containerInfo)}catch(dr){Kr(_e,_e.return,dr)}Af&&(Af=!1,Hg(_e));break;case 4:Ie=ko,ko=wd(_e.stateNode.containerInfo),Fa(Se,_e),Oa(_e),ko=Ie;break;case 12:Fa(Se,_e),Oa(_e);break;case 31:Fa(Se,_e),Oa(_e),Ie&4&&(Ie=_e.updateQueue,Ie!==null&&(_e.updateQueue=null,ud(_e,Ie)));break;case 13:Fa(Se,_e),Oa(_e),_e.child.flags&8192&&_e.memoizedState!==null!=(Te!==null&&Te.memoizedState!==null)&&(hd=Qn()),Ie&4&&(Ie=_e.updateQueue,Ie!==null&&(_e.updateQueue=null,ud(_e,Ie)));break;case 22:je=_e.memoizedState!==null;var ri=Te!==null&&Te.memoizedState!==null,Ti=Nl,Oi=Ms;if(Nl=Ti||je,Ms=Oi||ri,Fa(Se,_e),Ms=Oi,Nl=Ti,Oa(_e),Ie&8192)e:for(Se=_e.stateNode,Se._visibility=je?Se._visibility&-2:Se._visibility|1,je&&(Te===null||ri||Nl||Ms||nc(_e)),Te=null,Se=_e;;){if(Se.tag===5||Se.tag===26){if(Te===null){ri=Te=Se;try{if(Xe=ri.stateNode,je)En=Xe.style,typeof En.setProperty=="function"?En.setProperty("display","none","important"):En.display="none";else{On=ri.stateNode;var Ki=ri.memoizedProps.style,Ci=Ki!=null&&Ki.hasOwnProperty("display")?Ki.display:null;On.style.display=Ci==null||typeof Ci=="boolean"?"":(""+Ci).trim()}}catch(dr){Kr(ri,ri.return,dr)}}}else if(Se.tag===6){if(Te===null){ri=Se;try{ri.stateNode.nodeValue=je?"":ri.memoizedProps}catch(dr){Kr(ri,ri.return,dr)}}}else if(Se.tag===18){if(Te===null){ri=Se;try{var Ii=ri.stateNode;je?Im(Ii,!0):Im(ri.stateNode,!1)}catch(dr){Kr(ri,ri.return,dr)}}}else if((Se.tag!==22&&Se.tag!==23||Se.memoizedState===null||Se===_e)&&Se.child!==null){Se.child.return=Se,Se=Se.child;continue}if(Se===_e)break e;for(;Se.sibling===null;){if(Se.return===null||Se.return===_e)break e;Te===Se&&(Te=null),Se=Se.return}Te===Se&&(Te=null),Se.sibling.return=Se.return,Se=Se.sibling}Ie&4&&(Ie=_e.updateQueue,Ie!==null&&(Te=Ie.retryQueue,Te!==null&&(Ie.retryQueue=null,ud(_e,Te))));break;case 19:Fa(Se,_e),Oa(_e),Ie&4&&(Ie=_e.updateQueue,Ie!==null&&(_e.updateQueue=null,ud(_e,Ie)));break;case 30:break;case 21:break;default:Fa(Se,_e),Oa(_e)}}function Oa(_e){var Se=_e.flags;if(Se&2){try{for(var Te,Ie=_e.return;Ie!==null;){if(Lg(Ie)){Te=Ie;break}Ie=Ie.return}if(Te==null)throw Error(xe(160));switch(Te.tag){case 27:var je=Te.stateNode,Xe=Sf(_e);ld(_e,Xe,je);break;case 5:var En=Te.stateNode;Te.flags&32&&(eo(En,""),Te.flags&=-33);var On=Sf(_e);ld(_e,On,En);break;case 3:case 4:var ri=Te.stateNode.containerInfo,Ti=Sf(_e);wf(_e,Ti,ri);break;default:throw Error(xe(161))}}catch(Oi){Kr(_e,_e.return,Oi)}_e.flags&=-3}Se&4096&&(_e.flags&=-4097)}function Hg(_e){if(_e.subtreeFlags&1024)for(_e=_e.child;_e!==null;){var Se=_e;Hg(Se),Se.tag===5&&Se.flags&1024&&Se.stateNode.reset(),_e=_e.sibling}}function Il(_e,Se){if(Se.subtreeFlags&8772)for(Se=Se.child;Se!==null;)Fg(_e,Se.alternate,Se),Se=Se.sibling}function nc(_e){for(_e=_e.child;_e!==null;){var Se=_e;switch(Se.tag){case 0:case 11:case 14:case 15:du(4,Se,Se.return),nc(Se);break;case 1:ol(Se,Se.return);var Te=Se.stateNode;typeof Te.componentWillUnmount=="function"&&Ig(Se,Se.return,Te),nc(Se);break;case 27:kh(Se.stateNode);case 26:case 5:ol(Se,Se.return),nc(Se);break;case 22:Se.memoizedState===null&&nc(Se);break;case 30:nc(Se);break;default:nc(Se)}_e=_e.sibling}}function Ml(_e,Se,Te){for(Te=Te&&(Se.subtreeFlags&8772)!==0,Se=Se.child;Se!==null;){var Ie=Se.alternate,je=_e,Xe=Se,En=Xe.flags;switch(Xe.tag){case 0:case 11:case 15:Ml(je,Xe,Te),Eh(4,Xe);break;case 1:if(Ml(je,Xe,Te),Ie=Xe,je=Ie.stateNode,typeof je.componentDidMount=="function")try{je.componentDidMount()}catch(Ti){Kr(Ie,Ie.return,Ti)}if(Ie=Xe,je=Ie.updateQueue,je!==null){var On=Ie.stateNode;try{var ri=je.shared.hiddenCallbacks;if(ri!==null)for(je.shared.hiddenCallbacks=null,je=0;je<ri.length;je++)ua(ri[je],On)}catch(Ti){Kr(Ie,Ie.return,Ti)}}Te&&En&64&&kg(Xe),Sh(Xe,Xe.return);break;case 27:Vg(Xe);case 26:case 5:Ml(je,Xe,Te),Te&&Ie===null&&En&4&&Mg(Xe),Sh(Xe,Xe.return);break;case 12:Ml(je,Xe,Te);break;case 31:Ml(je,Xe,Te),Te&&En&4&&Ug(je,Xe);break;case 13:Ml(je,Xe,Te),Te&&En&4&&zg(je,Xe);break;case 22:Xe.memoizedState===null&&Ml(je,Xe,Te),Sh(Xe,Xe.return);break;case 30:break;default:Ml(je,Xe,Te)}Se=Se.sibling}}function Pf(_e,Se){var Te=null;_e!==null&&_e.memoizedState!==null&&_e.memoizedState.cachePool!==null&&(Te=_e.memoizedState.cachePool.pool),_e=null,Se.memoizedState!==null&&Se.memoizedState.cachePool!==null&&(_e=Se.memoizedState.cachePool.pool),_e!==Te&&(_e!=null&&_e.refCount++,Te!=null&&Ju(Te))}function Tf(_e,Se){_e=null,Se.alternate!==null&&(_e=Se.alternate.memoizedState.cache),Se=Se.memoizedState.cache,Se!==_e&&(Se.refCount++,_e!=null&&Ju(_e))}function Io(_e,Se,Te,Ie){if(Se.subtreeFlags&10256)for(Se=Se.child;Se!==null;)Gg(_e,Se,Te,Ie),Se=Se.sibling}function Gg(_e,Se,Te,Ie){var je=Se.flags;switch(Se.tag){case 0:case 11:case 15:Io(_e,Se,Te,Ie),je&2048&&Eh(9,Se);break;case 1:Io(_e,Se,Te,Ie);break;case 3:Io(_e,Se,Te,Ie),je&2048&&(_e=null,Se.alternate!==null&&(_e=Se.alternate.memoizedState.cache),Se=Se.memoizedState.cache,Se!==_e&&(Se.refCount++,_e!=null&&Ju(_e)));break;case 12:if(je&2048){Io(_e,Se,Te,Ie),_e=Se.stateNode;try{var Xe=Se.memoizedProps,En=Xe.id,On=Xe.onPostCommit;typeof On=="function"&&On(En,Se.alternate===null?"mount":"update",_e.passiveEffectDuration,-0)}catch(ri){Kr(Se,Se.return,ri)}}else Io(_e,Se,Te,Ie);break;case 31:Io(_e,Se,Te,Ie);break;case 13:Io(_e,Se,Te,Ie);break;case 23:break;case 22:Xe=Se.stateNode,En=Se.alternate,Se.memoizedState!==null?Xe._visibility&2?Io(_e,Se,Te,Ie):wh(_e,Se):Xe._visibility&2?Io(_e,Se,Te,Ie):(Xe._visibility|=2,Oc(_e,Se,Te,Ie,(Se.subtreeFlags&10256)!==0||!1)),je&2048&&Pf(En,Se);break;case 24:Io(_e,Se,Te,Ie),je&2048&&Tf(Se.alternate,Se);break;default:Io(_e,Se,Te,Ie)}}function Oc(_e,Se,Te,Ie,je){for(je=je&&((Se.subtreeFlags&10256)!==0||!1),Se=Se.child;Se!==null;){var Xe=_e,En=Se,On=Te,ri=Ie,Ti=En.flags;switch(En.tag){case 0:case 11:case 15:Oc(Xe,En,On,ri,je),Eh(8,En);break;case 23:break;case 22:var Oi=En.stateNode;En.memoizedState!==null?Oi._visibility&2?Oc(Xe,En,On,ri,je):wh(Xe,En):(Oi._visibility|=2,Oc(Xe,En,On,ri,je)),je&&Ti&2048&&Pf(En.alternate,En);break;case 24:Oc(Xe,En,On,ri,je),je&&Ti&2048&&Tf(En.alternate,En);break;default:Oc(Xe,En,On,ri,je)}Se=Se.sibling}}function wh(_e,Se){if(Se.subtreeFlags&10256)for(Se=Se.child;Se!==null;){var Te=_e,Ie=Se,je=Ie.flags;switch(Ie.tag){case 22:wh(Te,Ie),je&2048&&Pf(Ie.alternate,Ie);break;case 24:wh(Te,Ie),je&2048&&Tf(Ie.alternate,Ie);break;default:wh(Te,Ie)}Se=Se.sibling}}var Ah=8192;function jc(_e,Se,Te){if(_e.subtreeFlags&Ah)for(_e=_e.child;_e!==null;)$g(_e,Se,Te),_e=_e.sibling}function $g(_e,Se,Te){switch(_e.tag){case 26:jc(_e,Se,Te),_e.flags&Ah&&_e.memoizedState!==null&&Dy(Te,ko,_e.memoizedState,_e.memoizedProps);break;case 5:jc(_e,Se,Te);break;case 3:case 4:var Ie=ko;ko=wd(_e.stateNode.containerInfo),jc(_e,Se,Te),ko=Ie;break;case 22:_e.memoizedState===null&&(Ie=_e.alternate,Ie!==null&&Ie.memoizedState!==null?(Ie=Ah,Ah=16777216,jc(_e,Se,Te),Ah=Ie):jc(_e,Se,Te));break;default:jc(_e,Se,Te)}}function Wg(_e){var Se=_e.alternate;if(Se!==null&&(_e=Se.child,_e!==null)){Se.child=null;do Se=_e.sibling,_e.sibling=null,_e=Se;while(_e!==null)}}function Ph(_e){var Se=_e.deletions;if((_e.flags&16)!==0){if(Se!==null)for(var Te=0;Te<Se.length;Te++){var Ie=Se[Te];Js=Ie,Yg(Ie,_e)}Wg(_e)}if(_e.subtreeFlags&10256)for(_e=_e.child;_e!==null;)Kg(_e),_e=_e.sibling}function Kg(_e){switch(_e.tag){case 0:case 11:case 15:Ph(_e),_e.flags&2048&&du(9,_e,_e.return);break;case 3:Ph(_e);break;case 12:Ph(_e);break;case 22:var Se=_e.stateNode;_e.memoizedState!==null&&Se._visibility&2&&(_e.return===null||_e.return.tag!==13)?(Se._visibility&=-3,cd(_e)):Ph(_e);break;default:Ph(_e)}}function cd(_e){var Se=_e.deletions;if((_e.flags&16)!==0){if(Se!==null)for(var Te=0;Te<Se.length;Te++){var Ie=Se[Te];Js=Ie,Yg(Ie,_e)}Wg(_e)}for(_e=_e.child;_e!==null;){switch(Se=_e,Se.tag){case 0:case 11:case 15:du(8,Se,Se.return),cd(Se);break;case 22:Te=Se.stateNode,Te._visibility&2&&(Te._visibility&=-3,cd(Se));break;default:cd(Se)}_e=_e.sibling}}function Yg(_e,Se){for(;Js!==null;){var Te=Js;switch(Te.tag){case 0:case 11:case 15:du(8,Te,Se);break;case 23:case 22:if(Te.memoizedState!==null&&Te.memoizedState.cachePool!==null){var Ie=Te.memoizedState.cachePool.pool;Ie!=null&&Ie.refCount++}break;case 24:Ju(Te.memoizedState.cache)}if(Ie=Te.child,Ie!==null)Ie.return=Te,Js=Ie;else e:for(Te=_e;Js!==null;){Ie=Js;var je=Ie.sibling,Xe=Ie.return;if(Og(Ie),Ie===Te){Js=null;break e}if(je!==null){je.return=Xe,Js=je;break e}Js=Xe}}}var Z0={getCacheForType:function(_e){var Se=js(vs),Te=Se.data.get(_e);return Te===void 0&&(Te=_e(),Se.data.set(_e,Te)),Te},cacheSignal:function(){return js(vs).controller.signal}},Q0=typeof WeakMap=="function"?WeakMap:Map,Gr=0,is=null,Nr=null,Lr=0,Wr=0,Ja=null,fu=!1,Uc=!1,Cf=!1,Ll=0,As=0,pu=0,ic=0,Rf=0,Xa=0,zc=0,Th=null,ja=null,Bf=!1,hd=0,Jg=0,dd=1/0,pd=null,gu=null,zs=0,mu=null,qc=null,Vl=0,Nf=0,kf=null,Xg=null,Ch=0,If=null;function Za(){return(Gr&2)!==0&&Lr!==0?Lr&-Lr:hn.T!==null?Of():Yi()}function Zg(){if(Xa===0)if((Lr&536870912)===0||Rr){var _e=Fn;Fn<<=1,(Fn&3932160)===0&&(Fn=262144),Xa=_e}else Xa=536870912;return _e=bs.current,_e!==null&&(_e.flags|=32),Xa}function Ua(_e,Se,Te){(_e===is&&(Wr===2||Wr===9)||_e.cancelPendingCommit!==null)&&(Hc(_e,0),yu(_e,Lr,Xa,!1)),ti(_e,Te),((Gr&2)===0||_e!==is)&&(_e===is&&((Gr&2)===0&&(ic|=Te),As===4&&yu(_e,Lr,Xa,!1)),ll(_e))}function Qg(_e,Se,Te){if((Gr&6)!==0)throw Error(xe(327));var Ie=!Te&&(Se&127)===0&&(Se&_e.expiredLanes)===0||$i(_e,Se),je=Ie?ny(_e,Se):Lf(_e,Se,!0),Xe=Ie;do{if(je===0){Uc&&!Ie&&yu(_e,Se,0,!1);break}else{if(Te=_e.current.alternate,Xe&&!ey(Te)){je=Lf(_e,Se,!1),Xe=!1;continue}if(je===2){if(Xe=Se,_e.errorRecoveryDisabledLanes&Xe)var En=0;else En=_e.pendingLanes&-536870913,En=En!==0?En:En&536870912?536870912:0;if(En!==0){Se=En;e:{var On=_e;je=Th;var ri=On.current.memoizedState.isDehydrated;if(ri&&(Hc(On,En).flags|=256),En=Lf(On,En,!1),En!==2){if(Cf&&!ri){On.errorRecoveryDisabledLanes|=Xe,ic|=Xe,je=4;break e}Xe=ja,ja=je,Xe!==null&&(ja===null?ja=Xe:ja.push.apply(ja,Xe))}je=En}if(Xe=!1,je!==2)continue}}if(je===1){Hc(_e,0),yu(_e,Se,0,!0);break}e:{switch(Ie=_e,Xe=je,Xe){case 0:case 1:throw Error(xe(345));case 4:if((Se&4194048)!==Se)break;case 6:yu(Ie,Se,Xa,!fu);break e;case 2:ja=null;break;case 3:case 5:break;default:throw Error(xe(329))}if((Se&62914560)===Se&&(je=hd+300-Qn(),10<je)){if(yu(Ie,Se,Xa,!fu),ki(Ie,0,!0)!==0)break e;Vl=Se,Ie.timeoutHandle=Bm(em.bind(null,Ie,Te,ja,pd,Bf,Se,Xa,ic,zc,fu,Xe,"Throttled",-0,0),je);break e}em(Ie,Te,ja,pd,Bf,Se,Xa,ic,zc,fu,Xe,null,-0,0)}}break}while(!0);ll(_e)}function em(_e,Se,Te,Ie,je,Xe,En,On,ri,Ti,Oi,Ki,Ci,Ii){if(_e.timeoutHandle=-1,Ki=Se.subtreeFlags,Ki&8192||(Ki&16785408)===16785408){Ki={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ss},$g(Se,Xe,Ki);var dr=(Xe&62914560)===Xe?hd-Qn():(Xe&4194048)===Xe?Jg-Qn():0;if(dr=Fy(Ki,dr),dr!==null){Vl=Xe,_e.cancelPendingCommit=dr(lm.bind(null,_e,Se,Xe,Te,Ie,je,En,On,ri,Oi,Ki,null,Ci,Ii)),yu(_e,Xe,En,!Ti);return}}lm(_e,Se,Xe,Te,Ie,je,En,On,ri)}function ey(_e){for(var Se=_e;;){var Te=Se.tag;if((Te===0||Te===11||Te===15)&&Se.flags&16384&&(Te=Se.updateQueue,Te!==null&&(Te=Te.stores,Te!==null)))for(var Ie=0;Ie<Te.length;Ie++){var je=Te[Ie],Xe=je.getSnapshot;je=je.value;try{if(!ea(Xe(),je))return!1}catch{return!1}}if(Te=Se.child,Se.subtreeFlags&16384&&Te!==null)Te.return=Se,Se=Te;else{if(Se===_e)break;for(;Se.sibling===null;){if(Se.return===null||Se.return===_e)return!0;Se=Se.return}Se.sibling.return=Se.return,Se=Se.sibling}}return!0}function yu(_e,Se,Te,Ie){Se&=~Rf,Se&=~ic,_e.suspendedLanes|=Se,_e.pingedLanes&=~Se,Ie&&(_e.warmLanes|=Se),Ie=_e.expirationTimes;for(var je=Se;0<je;){var Xe=31-ni(je),En=1<<Xe;Ie[Xe]=-1,je&=~En}Te!==0&&si(_e,Te,Se)}function gd(){return(Gr&6)===0?(Rh(0),!1):!0}function Mf(){if(Nr!==null){if(Wr===0)var _e=Nr.return;else _e=Nr,oo=Qo=null,kc(_e),Ui=null,lr=0,_e=Nr;for(;_e!==null;)Ng(_e.alternate,_e),_e=_e.return;Nr=null}}function Hc(_e,Se){var Te=_e.timeoutHandle;Te!==-1&&(_e.timeoutHandle=-1,xy(Te)),Te=_e.cancelPendingCommit,Te!==null&&(_e.cancelPendingCommit=null,Te()),Vl=0,Mf(),is=_e,Nr=Te=Ra(_e.current,null),Lr=Se,Wr=0,Ja=null,fu=!1,Uc=$i(_e,Se),Cf=!1,zc=Xa=Rf=ic=pu=As=0,ja=Th=null,Bf=!1,(Se&8)!==0&&(Se|=Se&32);var Ie=_e.entangledLanes;if(Ie!==0)for(_e=_e.entanglements,Ie&=Se;0<Ie;){var je=31-ni(Ie),Xe=1<<je;Se|=_e[je],Ie&=~Xe}return Ll=Se,Hu(),Te}function tm(_e,Se){Sr=null,hn.H=bh,Se===ci||Se===wi?(Se=qi(),Wr=3):Se===Ai?(Se=qi(),Wr=4):Wr=Se===df?8:Se!==null&&typeof Se=="object"&&typeof Se.then=="function"?6:1,Ja=Se,Nr===null&&(As=1,id(_e,Ba(Se,_e.current)))}function nm(){var _e=bs.current;return _e===null?!0:(Lr&4194048)===Lr?Ns===null:(Lr&62914560)===Lr||(Lr&536870912)!==0?_e===Ns:!1}function im(){var _e=hn.H;return hn.H=bh,_e===null?bh:_e}function rm(){var _e=hn.A;return hn.A=Z0,_e}function md(){As=4,fu||(Lr&4194048)!==Lr&&bs.current!==null||(Uc=!0),(pu&134217727)===0&&(ic&134217727)===0||is===null||yu(is,Lr,Xa,!1)}function Lf(_e,Se,Te){var Ie=Gr;Gr|=2;var je=im(),Xe=rm();(is!==_e||Lr!==Se)&&(pd=null,Hc(_e,Se)),Se=!1;var En=As;e:do try{if(Wr!==0&&Nr!==null){var On=Nr,ri=Ja;switch(Wr){case 8:Mf(),En=6;break e;case 3:case 2:case 9:case 6:bs.current===null&&(Se=!0);var Ti=Wr;if(Wr=0,Ja=null,Gc(_e,On,ri,Ti),Te&&Uc){En=0;break e}break;default:Ti=Wr,Wr=0,Ja=null,Gc(_e,On,ri,Ti)}}ty(),En=As;break}catch(Oi){tm(_e,Oi)}while(!0);return Se&&_e.shellSuspendCounter++,oo=Qo=null,Gr=Ie,hn.H=je,hn.A=Xe,Nr===null&&(is=null,Lr=0,Hu()),En}function ty(){for(;Nr!==null;)sm(Nr)}function ny(_e,Se){var Te=Gr;Gr|=2;var Ie=im(),je=rm();is!==_e||Lr!==Se?(pd=null,dd=Qn()+500,Hc(_e,Se)):Uc=$i(_e,Se);e:do try{if(Wr!==0&&Nr!==null){Se=Nr;var Xe=Ja;t:switch(Wr){case 1:Wr=0,Ja=null,Gc(_e,Se,Xe,1);break;case 2:case 9:if(Wi(Xe)){Wr=0,Ja=null,am(Se);break}Se=function(){Wr!==2&&Wr!==9||is!==_e||(Wr=7),ll(_e)},Xe.then(Se,Se);break e;case 3:Wr=7;break e;case 4:Wr=5;break e;case 7:Wi(Xe)?(Wr=0,Ja=null,am(Se)):(Wr=0,Ja=null,Gc(_e,Se,Xe,7));break;case 5:var En=null;switch(Nr.tag){case 26:En=Nr.memoizedState;case 5:case 27:var On=Nr;if(En?Gm(En):On.stateNode.complete){Wr=0,Ja=null;var ri=On.sibling;if(ri!==null)Nr=ri;else{var Ti=On.return;Ti!==null?(Nr=Ti,yd(Ti)):Nr=null}break t}}Wr=0,Ja=null,Gc(_e,Se,Xe,5);break;case 6:Wr=0,Ja=null,Gc(_e,Se,Xe,6);break;case 8:Mf(),As=6;break e;default:throw Error(xe(462))}}iy();break}catch(Oi){tm(_e,Oi)}while(!0);return oo=Qo=null,hn.H=Ie,hn.A=je,Gr=Te,Nr!==null?0:(is=null,Lr=0,Hu(),As)}function iy(){for(;Nr!==null&&!Dn();)sm(Nr)}function sm(_e){var Se=Rg(_e.alternate,_e,Ll);_e.memoizedProps=_e.pendingProps,Se===null?yd(_e):Nr=Se}function am(_e){var Se=_e,Te=Se.alternate;switch(Se.tag){case 15:case 0:Se=Sg(Te,Se,Se.pendingProps,Se.type,void 0,Lr);break;case 11:Se=Sg(Te,Se,Se.pendingProps,Se.type.render,Se.ref,Lr);break;case 5:kc(Se);default:Ng(Te,Se),Se=Nr=Wu(Se,Ll),Se=Rg(Te,Se,Ll)}_e.memoizedProps=_e.pendingProps,Se===null?yd(_e):Nr=Se}function Gc(_e,Se,Te,Ie){oo=Qo=null,kc(Se),Ui=null,lr=0;var je=Se.return;try{if(G0(_e,je,Se,Te,Lr)){As=1,id(_e,Ba(Te,_e.current)),Nr=null;return}}catch(Xe){if(je!==null)throw Nr=je,Xe;As=1,id(_e,Ba(Te,_e.current)),Nr=null;return}Se.flags&32768?(Rr||Ie===1?_e=!0:Uc||(Lr&536870912)!==0?_e=!1:(fu=_e=!0,(Ie===2||Ie===9||Ie===3||Ie===6)&&(Ie=bs.current,Ie!==null&&Ie.tag===13&&(Ie.flags|=16384))),om(Se,_e)):yd(Se)}function yd(_e){var Se=_e;do{if((Se.flags&32768)!==0){om(Se,fu);return}_e=Se.return;var Te=K0(Se.alternate,Se,Ll);if(Te!==null){Nr=Te;return}if(Se=Se.sibling,Se!==null){Nr=Se;return}Nr=Se=_e}while(Se!==null);As===0&&(As=5)}function om(_e,Se){do{var Te=Y0(_e.alternate,_e);if(Te!==null){Te.flags&=32767,Nr=Te;return}if(Te=_e.return,Te!==null&&(Te.flags|=32768,Te.subtreeFlags=0,Te.deletions=null),!Se&&(_e=_e.sibling,_e!==null)){Nr=_e;return}Nr=_e=Te}while(_e!==null);As=6,Nr=null}function lm(_e,Se,Te,Ie,je,Xe,En,On,ri){_e.cancelPendingCommit=null;do vd();while(zs!==0);if((Gr&6)!==0)throw Error(xe(327));if(Se!==null){if(Se===_e.current)throw Error(xe(177));if(Xe=Se.lanes|Se.childLanes,Xe|=vc,ei(_e,Te,Xe,En,On,ri),_e===is&&(Nr=is=null,Lr=0),qc=Se,mu=_e,Vl=Te,Nf=Xe,kf=je,Xg=Ie,(Se.subtreeFlags&10256)!==0||(Se.flags&10256)!==0?(_e.callbackNode=null,_e.callbackPriority=0,oy(zi,function(){return fm(),null})):(_e.callbackNode=null,_e.callbackPriority=0),Ie=(Se.flags&13878)!==0,(Se.subtreeFlags&13878)!==0||Ie){Ie=hn.T,hn.T=null,je=pn.p,pn.p=2,En=Gr,Gr|=4;try{J0(_e,Se,Te)}finally{Gr=En,pn.p=je,hn.T=Ie}}zs=1,um(),cm(),hm()}}function um(){if(zs===1){zs=0;var _e=mu,Se=qc,Te=(Se.flags&13878)!==0;if((Se.subtreeFlags&13878)!==0||Te){Te=hn.T,hn.T=null;var Ie=pn.p;pn.p=2;var je=Gr;Gr|=4;try{qg(Se,_e);var Xe=Wf,En=Wa(_e.containerInfo),On=Xe.focusedElem,ri=Xe.selectionRange;if(En!==On&&On&&On.ownerDocument&&So(On.ownerDocument.documentElement,On)){if(ri!==null&&Ka(On)){var Ti=ri.start,Oi=ri.end;if(Oi===void 0&&(Oi=Ti),"selectionStart"in On)On.selectionStart=Ti,On.selectionEnd=Math.min(Oi,On.value.length);else{var Ki=On.ownerDocument||document,Ci=Ki&&Ki.defaultView||window;if(Ci.getSelection){var Ii=Ci.getSelection(),dr=On.textContent.length,_r=Math.min(ri.start,dr),es=ri.end===void 0?_r:Math.min(ri.end,dr);!Ii.extend&&_r>es&&(En=es,es=_r,_r=En);var _i=Pa(On,_r),gi=Pa(On,es);if(_i&&gi&&(Ii.rangeCount!==1||Ii.anchorNode!==_i.node||Ii.anchorOffset!==_i.offset||Ii.focusNode!==gi.node||Ii.focusOffset!==gi.offset)){var Pi=Ki.createRange();Pi.setStart(_i.node,_i.offset),Ii.removeAllRanges(),_r>es?(Ii.addRange(Pi),Ii.extend(gi.node,gi.offset)):(Pi.setEnd(gi.node,gi.offset),Ii.addRange(Pi))}}}}for(Ki=[],Ii=On;Ii=Ii.parentNode;)Ii.nodeType===1&&Ki.push({element:Ii,left:Ii.scrollLeft,top:Ii.scrollTop});for(typeof On.focus=="function"&&On.focus(),On=0;On<Ki.length;On++){var Hi=Ki[On];Hi.element.scrollLeft=Hi.left,Hi.element.scrollTop=Hi.top}}Bd=!!$f,Wf=$f=null}finally{Gr=je,pn.p=Ie,hn.T=Te}}_e.current=Se,zs=2}}function cm(){if(zs===2){zs=0;var _e=mu,Se=qc,Te=(Se.flags&8772)!==0;if((Se.subtreeFlags&8772)!==0||Te){Te=hn.T,hn.T=null;var Ie=pn.p;pn.p=2;var je=Gr;Gr|=4;try{Fg(_e,Se.alternate,Se)}finally{Gr=je,pn.p=Ie,hn.T=Te}}zs=3}}function hm(){if(zs===4||zs===3){zs=0,Jn();var _e=mu,Se=qc,Te=Vl,Ie=Xg;(Se.subtreeFlags&10256)!==0||(Se.flags&10256)!==0?zs=5:(zs=0,qc=mu=null,dm(_e,_e.pendingLanes));var je=_e.pendingLanes;if(je===0&&(gu=null),Zi(Te),Se=Se.stateNode,Xi&&typeof Xi.onCommitFiberRoot=="function")try{Xi.onCommitFiberRoot(Di,Se,void 0,(Se.current.flags&128)===128)}catch{}if(Ie!==null){Se=hn.T,je=pn.p,pn.p=2,hn.T=null;try{for(var Xe=_e.onRecoverableError,En=0;En<Ie.length;En++){var On=Ie[En];Xe(On.value,{componentStack:On.stack})}}finally{hn.T=Se,pn.p=je}}(Vl&3)!==0&&vd(),ll(_e),je=_e.pendingLanes,(Te&261930)!==0&&(je&42)!==0?_e===If?Ch++:(Ch=0,If=_e):Ch=0,Rh(0)}}function dm(_e,Se){(_e.pooledCacheLanes&=Se)===0&&(Se=_e.pooledCache,Se!=null&&(_e.pooledCache=null,Ju(Se)))}function vd(){return um(),cm(),hm(),fm()}function fm(){if(zs!==5)return!1;var _e=mu,Se=Nf;Nf=0;var Te=Zi(Vl),Ie=hn.T,je=pn.p;try{pn.p=32>Te?32:Te,hn.T=null,Te=kf,kf=null;var Xe=mu,En=Vl;if(zs=0,qc=mu=null,Vl=0,(Gr&6)!==0)throw Error(xe(331));var On=Gr;if(Gr|=4,Kg(Xe.current),Gg(Xe,Xe.current,En,Te),Gr=On,Rh(0,!1),Xi&&typeof Xi.onPostCommitFiberRoot=="function")try{Xi.onPostCommitFiberRoot(Di,Xe)}catch{}return!0}finally{pn.p=je,hn.T=Ie,dm(_e,Se)}}function pm(_e,Se,Te){Se=Ba(Te,Se),Se=hf(_e.stateNode,Se,2),_e=$r(_e,Se,2),_e!==null&&(ti(_e,2),ll(_e))}function Kr(_e,Se,Te){if(_e.tag===3)pm(_e,_e,Te);else for(;Se!==null;){if(Se.tag===3){pm(Se,_e,Te);break}else if(Se.tag===1){var Ie=Se.stateNode;if(typeof Se.type.getDerivedStateFromError=="function"||typeof Ie.componentDidCatch=="function"&&(gu===null||!gu.has(Ie))){_e=Ba(Te,_e),Te=gg(2),Ie=$r(Se,Te,2),Ie!==null&&(mg(Te,Ie,Se,_e),ti(Ie,2),ll(Ie));break}}Se=Se.return}}function Vf(_e,Se,Te){var Ie=_e.pingCache;if(Ie===null){Ie=_e.pingCache=new Q0;var je=new Set;Ie.set(Se,je)}else je=Ie.get(Se),je===void 0&&(je=new Set,Ie.set(Se,je));je.has(Te)||(Cf=!0,je.add(Te),_e=ry.bind(null,_e,Se,Te),Se.then(_e,_e))}function ry(_e,Se,Te){var Ie=_e.pingCache;Ie!==null&&Ie.delete(Se),_e.pingedLanes|=_e.suspendedLanes&Te,_e.warmLanes&=~Te,is===_e&&(Lr&Te)===Te&&(As===4||As===3&&(Lr&62914560)===Lr&&300>Qn()-hd?(Gr&2)===0&&Hc(_e,0):Rf|=Te,zc===Lr&&(zc=0)),ll(_e)}function gm(_e,Se){Se===0&&(Se=Hn()),_e=Ao(_e,Se),_e!==null&&(ti(_e,Se),ll(_e))}function sy(_e){var Se=_e.memoizedState,Te=0;Se!==null&&(Te=Se.retryLane),gm(_e,Te)}function ay(_e,Se){var Te=0;switch(_e.tag){case 31:case 13:var Ie=_e.stateNode,je=_e.memoizedState;je!==null&&(Te=je.retryLane);break;case 19:Ie=_e.stateNode;break;case 22:Ie=_e.stateNode._retryCache;break;default:throw Error(xe(314))}Ie!==null&&Ie.delete(Se),gm(_e,Te)}function oy(_e,Se){return jn(_e,Se)}var bd=null,$c=null,Df=!1,xd=!1,Ff=!1,vu=0;function ll(_e){_e!==$c&&_e.next===null&&($c===null?bd=$c=_e:$c=$c.next=_e),xd=!0,Df||(Df=!0,uy())}function Rh(_e,Se){if(!Ff&&xd){Ff=!0;do for(var Te=!1,Ie=bd;Ie!==null;){if(_e!==0){var je=Ie.pendingLanes;if(je===0)var Xe=0;else{var En=Ie.suspendedLanes,On=Ie.pingedLanes;Xe=(1<<31-ni(42|_e)+1)-1,Xe&=je&~(En&~On),Xe=Xe&201326741?Xe&201326741|1:Xe?Xe|2:0}Xe!==0&&(Te=!0,bm(Ie,Xe))}else Xe=Lr,Xe=ki(Ie,Ie===is?Xe:0,Ie.cancelPendingCommit!==null||Ie.timeoutHandle!==-1),(Xe&3)===0||$i(Ie,Xe)||(Te=!0,bm(Ie,Xe));Ie=Ie.next}while(Te);Ff=!1}}function ly(){mm()}function mm(){xd=Df=!1;var _e=0;vu!==0&&by()&&(_e=vu);for(var Se=Qn(),Te=null,Ie=bd;Ie!==null;){var je=Ie.next,Xe=ym(Ie,Se);Xe===0?(Ie.next=null,Te===null?bd=je:Te.next=je,je===null&&($c=Te)):(Te=Ie,(_e!==0||(Xe&3)!==0)&&(xd=!0)),Ie=je}zs!==0&&zs!==5||Rh(_e),vu!==0&&(vu=0)}function ym(_e,Se){for(var Te=_e.suspendedLanes,Ie=_e.pingedLanes,je=_e.expirationTimes,Xe=_e.pendingLanes&-62914561;0<Xe;){var En=31-ni(Xe),On=1<<En,ri=je[En];ri===-1?((On&Te)===0||(On&Ie)!==0)&&(je[En]=tr(On,Se)):ri<=Se&&(_e.expiredLanes|=On),Xe&=~On}if(Se=is,Te=Lr,Te=ki(_e,_e===Se?Te:0,_e.cancelPendingCommit!==null||_e.timeoutHandle!==-1),Ie=_e.callbackNode,Te===0||_e===Se&&(Wr===2||Wr===9)||_e.cancelPendingCommit!==null)return Ie!==null&&Ie!==null&&Rn(Ie),_e.callbackNode=null,_e.callbackPriority=0;if((Te&3)===0||$i(_e,Te)){if(Se=Te&-Te,Se===_e.callbackPriority)return Se;switch(Ie!==null&&Rn(Ie),Zi(Te)){case 2:case 8:Te=di;break;case 32:Te=zi;break;case 268435456:Te=Gi;break;default:Te=zi}return Ie=vm.bind(null,_e),Te=jn(Te,Ie),_e.callbackPriority=Se,_e.callbackNode=Te,Se}return Ie!==null&&Ie!==null&&Rn(Ie),_e.callbackPriority=2,_e.callbackNode=null,2}function vm(_e,Se){if(zs!==0&&zs!==5)return _e.callbackNode=null,_e.callbackPriority=0,null;var Te=_e.callbackNode;if(vd()&&_e.callbackNode!==Te)return null;var Ie=Lr;return Ie=ki(_e,_e===is?Ie:0,_e.cancelPendingCommit!==null||_e.timeoutHandle!==-1),Ie===0?null:(Qg(_e,Ie,Se),ym(_e,Qn()),_e.callbackNode!=null&&_e.callbackNode===Te?vm.bind(null,_e):null)}function bm(_e,Se){if(vd())return null;Qg(_e,Se,!0)}function uy(){_y(function(){(Gr&6)!==0?jn(yi,ly):mm()})}function Of(){if(vu===0){var _e=De;_e===0&&(_e=ar,ar<<=1,(ar&261888)===0&&(ar=256)),vu=_e}return vu}function xm(_e){return _e==null||typeof _e=="symbol"||typeof _e=="boolean"?null:typeof _e=="function"?_e:cl(""+_e)}function _m(_e,Se){var Te=Se.ownerDocument.createElement("input");return Te.name=Se.name,Te.value=Se.value,_e.id&&Te.setAttribute("form",_e.id),Se.parentNode.insertBefore(Te,Se),_e=new FormData(_e),Te.parentNode.removeChild(Te),_e}function cy(_e,Se,Te,Ie,je){if(Se==="submit"&&Te&&Te.stateNode===je){var Xe=xm((je[rr]||null).action),En=Ie.submitter;En&&(Se=(Se=En[rr]||null)?xm(Se.formAction):En.getAttribute("formAction"),Se!==null&&(Xe=Se,En=null));var On=new pl("action","action",null,Ie,je);_e.push({event:On,listeners:[{instance:null,listener:function(){if(Ie.defaultPrevented){if(vu!==0){var ri=En?_m(je,En):new FormData(je);sf(Te,{pending:!0,data:ri,method:je.method,action:Xe},null,ri)}}else typeof Xe=="function"&&(On.preventDefault(),ri=En?_m(je,En):new FormData(je),sf(Te,{pending:!0,data:ri,method:je.method,action:Xe},Xe,ri))},currentTarget:je}]})}}for(var jf=0;jf<ao.length;jf++){var Uf=ao[jf],hy=Uf.toLowerCase(),dy=Uf[0].toUpperCase()+Uf.slice(1);$s(hy,"on"+dy)}$s(tu,"onAnimationEnd"),$s(fa,"onAnimationIteration"),$s(ro,"onAnimationStart"),$s("dblclick","onDoubleClick"),$s("focusin","onFocus"),$s("focusout","onBlur"),$s(Jr,"onTransitionRun"),$s(Xr,"onTransitionStart"),$s(ys,"onTransitionCancel"),$s(Ss,"onTransitionEnd"),Qa("onMouseEnter",["mouseout","mouseover"]),Qa("onMouseLeave",["mouseout","mouseover"]),Qa("onPointerEnter",["pointerout","pointerover"]),Qa("onPointerLeave",["pointerout","pointerover"]),yo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yo("onBeforeInput",["compositionend","keypress","textInput","paste"]),yo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bh));function Em(_e,Se){Se=(Se&4)!==0;for(var Te=0;Te<_e.length;Te++){var Ie=_e[Te],je=Ie.event;Ie=Ie.listeners;e:{var Xe=void 0;if(Se)for(var En=Ie.length-1;0<=En;En--){var On=Ie[En],ri=On.instance,Ti=On.currentTarget;if(On=On.listener,ri!==Xe&&je.isPropagationStopped())break e;Xe=On,je.currentTarget=Ti;try{Xe(je)}catch(Oi){bl(Oi)}je.currentTarget=null,Xe=ri}else for(En=0;En<Ie.length;En++){if(On=Ie[En],ri=On.instance,Ti=On.currentTarget,On=On.listener,ri!==Xe&&je.isPropagationStopped())break e;Xe=On,je.currentTarget=Ti;try{Xe(je)}catch(Oi){bl(Oi)}je.currentTarget=null,Xe=ri}}}}function kr(_e,Se){var Te=Se[vr];Te===void 0&&(Te=Se[vr]=new Set);var Ie=_e+"__bubble";Te.has(Ie)||(Sm(Se,_e,2,!1),Te.add(Ie))}function zf(_e,Se,Te){var Ie=0;Se&&(Ie|=4),Sm(Te,_e,Ie,Se)}var _d="_reactListening"+Math.random().toString(36).slice(2);function qf(_e){if(!_e[_d]){_e[_d]=!0,ul.forEach(function(Te){Te!=="selectionchange"&&(fy.has(Te)||zf(Te,!1,_e),zf(Te,!0,_e))});var Se=_e.nodeType===9?_e:_e.ownerDocument;Se===null||Se[_d]||(Se[_d]=!0,zf("selectionchange",!1,Se))}}function Sm(_e,Se,Te,Ie){switch(Zm(Se)){case 2:var je=Uy;break;case 8:je=zy;break;default:je=rp}Te=je.bind(null,Se,Te,_e),je=void 0,!hl||Se!=="touchstart"&&Se!=="touchmove"&&Se!=="wheel"||(je=!0),Ie?je!==void 0?_e.addEventListener(Se,Te,{capture:!0,passive:je}):_e.addEventListener(Se,Te,!0):je!==void 0?_e.addEventListener(Se,Te,{passive:je}):_e.addEventListener(Se,Te,!1)}function Hf(_e,Se,Te,Ie,je){var Xe=Ie;if((Se&1)===0&&(Se&2)===0&&Ie!==null)e:for(;;){if(Ie===null)return;var En=Ie.tag;if(En===3||En===4){var On=Ie.stateNode.containerInfo;if(On===je)break;if(En===4)for(En=Ie.return;En!==null;){var ri=En.tag;if((ri===3||ri===4)&&En.stateNode.containerInfo===je)return;En=En.return}for(;On!==null;){if(En=_s(On),En===null)return;if(ri=En.tag,ri===5||ri===6||ri===26||ri===27){Ie=Xe=En;continue e}On=On.parentNode}}Ie=Ie.return}ku(function(){var Ti=Xe,Oi=Gl(Te),Ki=[];e:{var Ci=so.get(_e);if(Ci!==void 0){var Ii=pl,dr=_e;switch(_e){case"keypress":if(qa(Te)===0)break e;case"keydown":case"keyup":Ii=ju;break;case"focusin":dr="focus",Ii=Lu;break;case"focusout":dr="blur",Ii=Lu;break;case"beforeblur":case"afterblur":Ii=Lu;break;case"click":if(Te.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ii=bo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ii=Mu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ii=Nn;break;case tu:case fa:case ro:Ii=rh;break;case Ss:Ii=li;break;case"scroll":case"scrollend":Ii=dc;break;case"wheel":Ii=Fi;break;case"copy":case"cut":case"paste":Ii=Du;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ii=Jl;break;case"toggle":case"beforetoggle":Ii=ur}var _r=(Se&4)!==0,es=!_r&&(_e==="scroll"||_e==="scrollend"),_i=_r?Ci!==null?Ci+"Capture":null:Ci;_r=[];for(var gi=Ti,Pi;gi!==null;){var Hi=gi;if(Pi=Hi.stateNode,Hi=Hi.tag,Hi!==5&&Hi!==26&&Hi!==27||Pi===null||_i===null||(Hi=Fo(gi,_i),Hi!=null&&_r.push(Nh(gi,Hi,Pi))),es)break;gi=gi.return}0<_r.length&&(Ci=new Ii(Ci,dr,null,Te,Oi),Ki.push({event:Ci,listeners:_r}))}}if((Se&7)===0){e:{if(Ci=_e==="mouseover"||_e==="pointerover",Ii=_e==="mouseout"||_e==="pointerout",Ci&&Te!==Nu&&(dr=Te.relatedTarget||Te.fromElement)&&(_s(dr)||dr[cr]))break e;if((Ii||Ci)&&(Ci=Oi.window===Oi?Oi:(Ci=Oi.ownerDocument)?Ci.defaultView||Ci.parentWindow:window,Ii?(dr=Te.relatedTarget||Te.toElement,Ii=Ti,dr=dr?_s(dr):null,dr!==null&&(es=Ae(dr),_r=dr.tag,dr!==es||_r!==5&&_r!==27&&_r!==6)&&(dr=null)):(Ii=null,dr=Ti),Ii!==dr)){if(_r=bo,Hi="onMouseLeave",_i="onMouseEnter",gi="mouse",(_e==="pointerout"||_e==="pointerover")&&(_r=Jl,Hi="onPointerLeave",_i="onPointerEnter",gi="pointer"),es=Ii==null?Ci:Mo(Ii),Pi=dr==null?Ci:Mo(dr),Ci=new _r(Hi,gi+"leave",Ii,Te,Oi),Ci.target=es,Ci.relatedTarget=Pi,Hi=null,_s(Oi)===Ti&&(_r=new _r(_i,gi+"enter",dr,Te,Oi),_r.target=Pi,_r.relatedTarget=es,Hi=_r),es=Hi,Ii&&dr)t:{for(_r=py,_i=Ii,gi=dr,Pi=0,Hi=_i;Hi;Hi=_r(Hi))Pi++;Hi=0;for(var yr=gi;yr;yr=_r(yr))Hi++;for(;0<Pi-Hi;)_i=_r(_i),Pi--;for(;0<Hi-Pi;)gi=_r(gi),Hi--;for(;Pi--;){if(_i===gi||gi!==null&&_i===gi.alternate){_r=_i;break t}_i=_r(_i),gi=_r(gi)}_r=null}else _r=null;Ii!==null&&wm(Ki,Ci,Ii,_r,!1),dr!==null&&es!==null&&wm(Ki,es,dr,_r,!0)}}e:{if(Ci=Ti?Mo(Ti):window,Ii=Ci.nodeName&&Ci.nodeName.toLowerCase(),Ii==="select"||Ii==="input"&&Ci.type==="file")var Ur=Zs;else if(Xl(Ci))if(vl)Ur=qu;else{Ur=yc;var pr=zu}else Ii=Ci.nodeName,!Ii||Ii.toLowerCase()!=="input"||Ci.type!=="checkbox"&&Ci.type!=="radio"?Ti&&za(Ti.elementType)&&(Ur=Zs):Ur=$a;if(Ur&&(Ur=Ur(_e,Ti))){Zl(Ki,Ur,Te,Oi);break e}pr&&pr(_e,Ci,Ti),_e==="focusout"&&Ti&&Ci.type==="number"&&Ti.memoizedProps.value!=null&&zl(Ci,"number",Ci.value)}switch(pr=Ti?Mo(Ti):window,_e){case"focusin":(Xl(pr)||pr.contentEditable==="true")&&(Gs=pr,Wo=Ti,wo=null);break;case"focusout":wo=Wo=Gs=null;break;case"mousedown":io=!0;break;case"contextmenu":case"mouseup":case"dragend":io=!1,Ta(Ki,Te,Oi);break;case"selectionchange":if(eu)break;case"keydown":case"keyup":Ta(Ki,Te,Oi)}var Tr;if(Er)e:{switch(_e){case"compositionstart":var Vr="onCompositionStart";break e;case"compositionend":Vr="onCompositionEnd";break e;case"compositionupdate":Vr="onCompositionUpdate";break e}Vr=void 0}else Hs?Vs(_e,Te)&&(Vr="onCompositionEnd"):_e==="keydown"&&Te.keyCode===229&&(Vr="onCompositionStart");Vr&&(as&&Te.locale!=="ko"&&(Hs||Vr!=="onCompositionStart"?Vr==="onCompositionEnd"&&Hs&&(Tr=jo()):(to=Oi,Iu="value"in to?to.value:to.textContent,Hs=!0)),pr=Ed(Ti,Vr),0<pr.length&&(Vr=new ml(Vr,_e,null,Te,Oi),Ki.push({event:Vr,listeners:pr}),Tr?Vr.data=Tr:(Tr=Ps(Te),Tr!==null&&(Vr.data=Tr)))),(Tr=Ir?ha(_e,Te):xo(_e,Te))&&(Vr=Ed(Ti,"onBeforeInput"),0<Vr.length&&(pr=new ml("onBeforeInput","beforeinput",null,Te,Oi),Ki.push({event:pr,listeners:Vr}),pr.data=Tr)),cy(Ki,_e,Ti,Te,Oi)}Em(Ki,Se)})}function Nh(_e,Se,Te){return{instance:_e,listener:Se,currentTarget:Te}}function Ed(_e,Se){for(var Te=Se+"Capture",Ie=[];_e!==null;){var je=_e,Xe=je.stateNode;if(je=je.tag,je!==5&&je!==26&&je!==27||Xe===null||(je=Fo(_e,Te),je!=null&&Ie.unshift(Nh(_e,je,Xe)),je=Fo(_e,Se),je!=null&&Ie.push(Nh(_e,je,Xe))),_e.tag===3)return Ie;_e=_e.return}return[]}function py(_e){if(_e===null)return null;do _e=_e.return;while(_e&&_e.tag!==5&&_e.tag!==27);return _e||null}function wm(_e,Se,Te,Ie,je){for(var Xe=Se._reactName,En=[];Te!==null&&Te!==Ie;){var On=Te,ri=On.alternate,Ti=On.stateNode;if(On=On.tag,ri!==null&&ri===Ie)break;On!==5&&On!==26&&On!==27||Ti===null||(ri=Ti,je?(Ti=Fo(Te,Xe),Ti!=null&&En.unshift(Nh(Te,Ti,ri))):je||(Ti=Fo(Te,Xe),Ti!=null&&En.push(Nh(Te,Ti,ri)))),Te=Te.return}En.length!==0&&_e.push({event:Se,listeners:En})}var gy=/\r\n?/g,my=/\u0000|\uFFFD/g;function Am(_e){return(typeof _e=="string"?_e:""+_e).replace(gy,`
`).replace(my,"")}function Pm(_e,Se){return Se=Am(Se),Am(_e)===Se}function Qr(_e,Se,Te,Ie,je,Xe){switch(Te){case"children":typeof Ie=="string"?Se==="body"||Se==="textarea"&&Ie===""||eo(_e,Ie):(typeof Ie=="number"||typeof Ie=="bigint")&&Se!=="body"&&eo(_e,""+Ie);break;case"className":rs(_e,"class",Ie);break;case"tabIndex":rs(_e,"tabindex",Ie);break;case"dir":case"role":case"viewBox":case"width":case"height":rs(_e,Te,Ie);break;case"style":cc(_e,Ie,Xe);break;case"data":if(Se!=="object"){rs(_e,"data",Ie);break}case"src":case"href":if(Ie===""&&(Se!=="a"||Te!=="href")){_e.removeAttribute(Te);break}if(Ie==null||typeof Ie=="function"||typeof Ie=="symbol"||typeof Ie=="boolean"){_e.removeAttribute(Te);break}Ie=cl(""+Ie),_e.setAttribute(Te,Ie);break;case"action":case"formAction":if(typeof Ie=="function"){_e.setAttribute(Te,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof Xe=="function"&&(Te==="formAction"?(Se!=="input"&&Qr(_e,Se,"name",je.name,je,null),Qr(_e,Se,"formEncType",je.formEncType,je,null),Qr(_e,Se,"formMethod",je.formMethod,je,null),Qr(_e,Se,"formTarget",je.formTarget,je,null)):(Qr(_e,Se,"encType",je.encType,je,null),Qr(_e,Se,"method",je.method,je,null),Qr(_e,Se,"target",je.target,je,null)));if(Ie==null||typeof Ie=="symbol"||typeof Ie=="boolean"){_e.removeAttribute(Te);break}Ie=cl(""+Ie),_e.setAttribute(Te,Ie);break;case"onClick":Ie!=null&&(_e.onclick=ss);break;case"onScroll":Ie!=null&&kr("scroll",_e);break;case"onScrollEnd":Ie!=null&&kr("scrollend",_e);break;case"dangerouslySetInnerHTML":if(Ie!=null){if(typeof Ie!="object"||!("__html"in Ie))throw Error(xe(61));if(Te=Ie.__html,Te!=null){if(je.children!=null)throw Error(xe(60));_e.innerHTML=Te}}break;case"multiple":_e.multiple=Ie&&typeof Ie!="function"&&typeof Ie!="symbol";break;case"muted":_e.muted=Ie&&typeof Ie!="function"&&typeof Ie!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(Ie==null||typeof Ie=="function"||typeof Ie=="boolean"||typeof Ie=="symbol"){_e.removeAttribute("xlink:href");break}Te=cl(""+Ie),_e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Te);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":Ie!=null&&typeof Ie!="function"&&typeof Ie!="symbol"?_e.setAttribute(Te,""+Ie):_e.removeAttribute(Te);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":Ie&&typeof Ie!="function"&&typeof Ie!="symbol"?_e.setAttribute(Te,""):_e.removeAttribute(Te);break;case"capture":case"download":Ie===!0?_e.setAttribute(Te,""):Ie!==!1&&Ie!=null&&typeof Ie!="function"&&typeof Ie!="symbol"?_e.setAttribute(Te,Ie):_e.removeAttribute(Te);break;case"cols":case"rows":case"size":case"span":Ie!=null&&typeof Ie!="function"&&typeof Ie!="symbol"&&!isNaN(Ie)&&1<=Ie?_e.setAttribute(Te,Ie):_e.removeAttribute(Te);break;case"rowSpan":case"start":Ie==null||typeof Ie=="function"||typeof Ie=="symbol"||isNaN(Ie)?_e.removeAttribute(Te):_e.setAttribute(Te,Ie);break;case"popover":kr("beforetoggle",_e),kr("toggle",_e),jl(_e,"popover",Ie);break;case"xlinkActuate":ba(_e,"http://www.w3.org/1999/xlink","xlink:actuate",Ie);break;case"xlinkArcrole":ba(_e,"http://www.w3.org/1999/xlink","xlink:arcrole",Ie);break;case"xlinkRole":ba(_e,"http://www.w3.org/1999/xlink","xlink:role",Ie);break;case"xlinkShow":ba(_e,"http://www.w3.org/1999/xlink","xlink:show",Ie);break;case"xlinkTitle":ba(_e,"http://www.w3.org/1999/xlink","xlink:title",Ie);break;case"xlinkType":ba(_e,"http://www.w3.org/1999/xlink","xlink:type",Ie);break;case"xmlBase":ba(_e,"http://www.w3.org/XML/1998/namespace","xml:base",Ie);break;case"xmlLang":ba(_e,"http://www.w3.org/XML/1998/namespace","xml:lang",Ie);break;case"xmlSpace":ba(_e,"http://www.w3.org/XML/1998/namespace","xml:space",Ie);break;case"is":jl(_e,"is",Ie);break;case"innerText":case"textContent":break;default:(!(2<Te.length)||Te[0]!=="o"&&Te[0]!=="O"||Te[1]!=="n"&&Te[1]!=="N")&&(Te=ql.get(Te)||Te,jl(_e,Te,Ie))}}function Gf(_e,Se,Te,Ie,je,Xe){switch(Te){case"style":cc(_e,Ie,Xe);break;case"dangerouslySetInnerHTML":if(Ie!=null){if(typeof Ie!="object"||!("__html"in Ie))throw Error(xe(61));if(Te=Ie.__html,Te!=null){if(je.children!=null)throw Error(xe(60));_e.innerHTML=Te}}break;case"children":typeof Ie=="string"?eo(_e,Ie):(typeof Ie=="number"||typeof Ie=="bigint")&&eo(_e,""+Ie);break;case"onScroll":Ie!=null&&kr("scroll",_e);break;case"onScrollEnd":Ie!=null&&kr("scrollend",_e);break;case"onClick":Ie!=null&&(_e.onclick=ss);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Au.hasOwnProperty(Te))e:{if(Te[0]==="o"&&Te[1]==="n"&&(je=Te.endsWith("Capture"),Se=Te.slice(2,je?Te.length-7:void 0),Xe=_e[rr]||null,Xe=Xe!=null?Xe[Te]:null,typeof Xe=="function"&&_e.removeEventListener(Se,Xe,je),typeof Ie=="function")){typeof Xe!="function"&&Xe!==null&&(Te in _e?_e[Te]=null:_e.hasAttribute(Te)&&_e.removeAttribute(Te)),_e.addEventListener(Se,Ie,je);break e}Te in _e?_e[Te]=Ie:Ie===!0?_e.setAttribute(Te,""):jl(_e,Te,Ie)}}}function ra(_e,Se,Te){switch(Se){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":kr("error",_e),kr("load",_e);var Ie=!1,je=!1,Xe;for(Xe in Te)if(Te.hasOwnProperty(Xe)){var En=Te[Xe];if(En!=null)switch(Xe){case"src":Ie=!0;break;case"srcSet":je=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(xe(137,Se));default:Qr(_e,Se,Xe,En,Te,null)}}je&&Qr(_e,Se,"srcSet",Te.srcSet,Te,null),Ie&&Qr(_e,Se,"src",Te.src,Te,null);return;case"input":kr("invalid",_e);var On=Xe=En=je=null,ri=null,Ti=null;for(Ie in Te)if(Te.hasOwnProperty(Ie)){var Oi=Te[Ie];if(Oi!=null)switch(Ie){case"name":je=Oi;break;case"type":En=Oi;break;case"checked":ri=Oi;break;case"defaultChecked":Ti=Oi;break;case"value":Xe=Oi;break;case"defaultValue":On=Oi;break;case"children":case"dangerouslySetInnerHTML":if(Oi!=null)throw Error(xe(137,Se));break;default:Qr(_e,Se,Ie,Oi,Te,null)}}ac(_e,Xe,On,ri,Ti,En,je,!1);return;case"select":kr("invalid",_e),Ie=En=Xe=null;for(je in Te)if(Te.hasOwnProperty(je)&&(On=Te[je],On!=null))switch(je){case"value":Xe=On;break;case"defaultValue":En=On;break;case"multiple":Ie=On;default:Qr(_e,Se,je,On,Te,null)}Se=Xe,Te=En,_e.multiple=!!Ie,Se!=null?Vo(_e,!!Ie,Se,!1):Te!=null&&Vo(_e,!!Ie,Te,!0);return;case"textarea":kr("invalid",_e),Xe=je=Ie=null;for(En in Te)if(Te.hasOwnProperty(En)&&(On=Te[En],On!=null))switch(En){case"value":Ie=On;break;case"defaultValue":je=On;break;case"children":Xe=On;break;case"dangerouslySetInnerHTML":if(On!=null)throw Error(xe(91));break;default:Qr(_e,Se,En,On,Te,null)}oc(_e,Ie,je,Xe);return;case"option":for(ri in Te)if(Te.hasOwnProperty(ri)&&(Ie=Te[ri],Ie!=null))switch(ri){case"selected":_e.selected=Ie&&typeof Ie!="function"&&typeof Ie!="symbol";break;default:Qr(_e,Se,ri,Ie,Te,null)}return;case"dialog":kr("beforetoggle",_e),kr("toggle",_e),kr("cancel",_e),kr("close",_e);break;case"iframe":case"object":kr("load",_e);break;case"video":case"audio":for(Ie=0;Ie<Bh.length;Ie++)kr(Bh[Ie],_e);break;case"image":kr("error",_e),kr("load",_e);break;case"details":kr("toggle",_e);break;case"embed":case"source":case"link":kr("error",_e),kr("load",_e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ti in Te)if(Te.hasOwnProperty(Ti)&&(Ie=Te[Ti],Ie!=null))switch(Ti){case"children":case"dangerouslySetInnerHTML":throw Error(xe(137,Se));default:Qr(_e,Se,Ti,Ie,Te,null)}return;default:if(za(Se)){for(Oi in Te)Te.hasOwnProperty(Oi)&&(Ie=Te[Oi],Ie!==void 0&&Gf(_e,Se,Oi,Ie,Te,void 0));return}}for(On in Te)Te.hasOwnProperty(On)&&(Ie=Te[On],Ie!=null&&Qr(_e,Se,On,Ie,Te,null))}function yy(_e,Se,Te,Ie){switch(Se){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var je=null,Xe=null,En=null,On=null,ri=null,Ti=null,Oi=null;for(Ii in Te){var Ki=Te[Ii];if(Te.hasOwnProperty(Ii)&&Ki!=null)switch(Ii){case"checked":break;case"value":break;case"defaultValue":ri=Ki;default:Ie.hasOwnProperty(Ii)||Qr(_e,Se,Ii,null,Ie,Ki)}}for(var Ci in Ie){var Ii=Ie[Ci];if(Ki=Te[Ci],Ie.hasOwnProperty(Ci)&&(Ii!=null||Ki!=null))switch(Ci){case"type":Xe=Ii;break;case"name":je=Ii;break;case"checked":Ti=Ii;break;case"defaultChecked":Oi=Ii;break;case"value":En=Ii;break;case"defaultValue":On=Ii;break;case"children":case"dangerouslySetInnerHTML":if(Ii!=null)throw Error(xe(137,Se));break;default:Ii!==Ki&&Qr(_e,Se,Ci,Ii,Ie,Ki)}}Ul(_e,En,On,ri,Ti,Oi,Xe,je);return;case"select":Ii=En=On=Ci=null;for(Xe in Te)if(ri=Te[Xe],Te.hasOwnProperty(Xe)&&ri!=null)switch(Xe){case"value":break;case"multiple":Ii=ri;default:Ie.hasOwnProperty(Xe)||Qr(_e,Se,Xe,null,Ie,ri)}for(je in Ie)if(Xe=Ie[je],ri=Te[je],Ie.hasOwnProperty(je)&&(Xe!=null||ri!=null))switch(je){case"value":Ci=Xe;break;case"defaultValue":On=Xe;break;case"multiple":En=Xe;default:Xe!==ri&&Qr(_e,Se,je,Xe,Ie,ri)}Se=On,Te=En,Ie=Ii,Ci!=null?Vo(_e,!!Te,Ci,!1):!!Ie!=!!Te&&(Se!=null?Vo(_e,!!Te,Se,!0):Vo(_e,!!Te,Te?[]:"",!1));return;case"textarea":Ii=Ci=null;for(On in Te)if(je=Te[On],Te.hasOwnProperty(On)&&je!=null&&!Ie.hasOwnProperty(On))switch(On){case"value":break;case"children":break;default:Qr(_e,Se,On,null,Ie,je)}for(En in Ie)if(je=Ie[En],Xe=Te[En],Ie.hasOwnProperty(En)&&(je!=null||Xe!=null))switch(En){case"value":Ci=je;break;case"defaultValue":Ii=je;break;case"children":break;case"dangerouslySetInnerHTML":if(je!=null)throw Error(xe(91));break;default:je!==Xe&&Qr(_e,Se,En,je,Ie,Xe)}Bu(_e,Ci,Ii);return;case"option":for(var dr in Te)if(Ci=Te[dr],Te.hasOwnProperty(dr)&&Ci!=null&&!Ie.hasOwnProperty(dr))switch(dr){case"selected":_e.selected=!1;break;default:Qr(_e,Se,dr,null,Ie,Ci)}for(ri in Ie)if(Ci=Ie[ri],Ii=Te[ri],Ie.hasOwnProperty(ri)&&Ci!==Ii&&(Ci!=null||Ii!=null))switch(ri){case"selected":_e.selected=Ci&&typeof Ci!="function"&&typeof Ci!="symbol";break;default:Qr(_e,Se,ri,Ci,Ie,Ii)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _r in Te)Ci=Te[_r],Te.hasOwnProperty(_r)&&Ci!=null&&!Ie.hasOwnProperty(_r)&&Qr(_e,Se,_r,null,Ie,Ci);for(Ti in Ie)if(Ci=Ie[Ti],Ii=Te[Ti],Ie.hasOwnProperty(Ti)&&Ci!==Ii&&(Ci!=null||Ii!=null))switch(Ti){case"children":case"dangerouslySetInnerHTML":if(Ci!=null)throw Error(xe(137,Se));break;default:Qr(_e,Se,Ti,Ci,Ie,Ii)}return;default:if(za(Se)){for(var es in Te)Ci=Te[es],Te.hasOwnProperty(es)&&Ci!==void 0&&!Ie.hasOwnProperty(es)&&Gf(_e,Se,es,void 0,Ie,Ci);for(Oi in Ie)Ci=Ie[Oi],Ii=Te[Oi],!Ie.hasOwnProperty(Oi)||Ci===Ii||Ci===void 0&&Ii===void 0||Gf(_e,Se,Oi,Ci,Ie,Ii);return}}for(var _i in Te)Ci=Te[_i],Te.hasOwnProperty(_i)&&Ci!=null&&!Ie.hasOwnProperty(_i)&&Qr(_e,Se,_i,null,Ie,Ci);for(Ki in Ie)Ci=Ie[Ki],Ii=Te[Ki],!Ie.hasOwnProperty(Ki)||Ci===Ii||Ci==null&&Ii==null||Qr(_e,Se,Ki,Ci,Ie,Ii)}function Tm(_e){switch(_e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function vy(){if(typeof performance.getEntriesByType=="function"){for(var _e=0,Se=0,Te=performance.getEntriesByType("resource"),Ie=0;Ie<Te.length;Ie++){var je=Te[Ie],Xe=je.transferSize,En=je.initiatorType,On=je.duration;if(Xe&&On&&Tm(En)){for(En=0,On=je.responseEnd,Ie+=1;Ie<Te.length;Ie++){var ri=Te[Ie],Ti=ri.startTime;if(Ti>On)break;var Oi=ri.transferSize,Ki=ri.initiatorType;Oi&&Tm(Ki)&&(ri=ri.responseEnd,En+=Oi*(ri<On?1:(On-Ti)/(ri-Ti)))}if(--Ie,Se+=8*(Xe+En)/(je.duration/1e3),_e++,10<_e)break}}if(0<_e)return Se/_e/1e6}return navigator.connection&&(_e=navigator.connection.downlink,typeof _e=="number")?_e:5}var $f=null,Wf=null;function Sd(_e){return _e.nodeType===9?_e:_e.ownerDocument}function Cm(_e){switch(_e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Rm(_e,Se){if(_e===0)switch(Se){case"svg":return 1;case"math":return 2;default:return 0}return _e===1&&Se==="foreignObject"?0:_e}function Kf(_e,Se){return _e==="textarea"||_e==="noscript"||typeof Se.children=="string"||typeof Se.children=="number"||typeof Se.children=="bigint"||typeof Se.dangerouslySetInnerHTML=="object"&&Se.dangerouslySetInnerHTML!==null&&Se.dangerouslySetInnerHTML.__html!=null}var Yf=null;function by(){var _e=window.event;return _e&&_e.type==="popstate"?_e===Yf?!1:(Yf=_e,!0):(Yf=null,!1)}var Bm=typeof setTimeout=="function"?setTimeout:void 0,xy=typeof clearTimeout=="function"?clearTimeout:void 0,Nm=typeof Promise=="function"?Promise:void 0,_y=typeof queueMicrotask=="function"?queueMicrotask:typeof Nm<"u"?function(_e){return Nm.resolve(null).then(_e).catch(Ey)}:Bm;function Ey(_e){setTimeout(function(){throw _e})}function bu(_e){return _e==="head"}function km(_e,Se){var Te=Se,Ie=0;do{var je=Te.nextSibling;if(_e.removeChild(Te),je&&je.nodeType===8)if(Te=je.data,Te==="/$"||Te==="/&"){if(Ie===0){_e.removeChild(je),Jc(Se);return}Ie--}else if(Te==="$"||Te==="$?"||Te==="$~"||Te==="$!"||Te==="&")Ie++;else if(Te==="html")kh(_e.ownerDocument.documentElement);else if(Te==="head"){Te=_e.ownerDocument.head,kh(Te);for(var Xe=Te.firstChild;Xe;){var En=Xe.nextSibling,On=Xe.nodeName;Xe[xs]||On==="SCRIPT"||On==="STYLE"||On==="LINK"&&Xe.rel.toLowerCase()==="stylesheet"||Te.removeChild(Xe),Xe=En}}else Te==="body"&&kh(_e.ownerDocument.body);Te=je}while(Te);Jc(Se)}function Im(_e,Se){var Te=_e;_e=0;do{var Ie=Te.nextSibling;if(Te.nodeType===1?Se?(Te._stashedDisplay=Te.style.display,Te.style.display="none"):(Te.style.display=Te._stashedDisplay||"",Te.getAttribute("style")===""&&Te.removeAttribute("style")):Te.nodeType===3&&(Se?(Te._stashedText=Te.nodeValue,Te.nodeValue=""):Te.nodeValue=Te._stashedText||""),Ie&&Ie.nodeType===8)if(Te=Ie.data,Te==="/$"){if(_e===0)break;_e--}else Te!=="$"&&Te!=="$?"&&Te!=="$~"&&Te!=="$!"||_e++;Te=Ie}while(Te)}function Jf(_e){var Se=_e.firstChild;for(Se&&Se.nodeType===10&&(Se=Se.nextSibling);Se;){var Te=Se;switch(Se=Se.nextSibling,Te.nodeName){case"HTML":case"HEAD":case"BODY":Jf(Te),Ls(Te);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(Te.rel.toLowerCase()==="stylesheet")continue}_e.removeChild(Te)}}function Sy(_e,Se,Te,Ie){for(;_e.nodeType===1;){var je=Te;if(_e.nodeName.toLowerCase()!==Se.toLowerCase()){if(!Ie&&(_e.nodeName!=="INPUT"||_e.type!=="hidden"))break}else if(Ie){if(!_e[xs])switch(Se){case"meta":if(!_e.hasAttribute("itemprop"))break;return _e;case"link":if(Xe=_e.getAttribute("rel"),Xe==="stylesheet"&&_e.hasAttribute("data-precedence"))break;if(Xe!==je.rel||_e.getAttribute("href")!==(je.href==null||je.href===""?null:je.href)||_e.getAttribute("crossorigin")!==(je.crossOrigin==null?null:je.crossOrigin)||_e.getAttribute("title")!==(je.title==null?null:je.title))break;return _e;case"style":if(_e.hasAttribute("data-precedence"))break;return _e;case"script":if(Xe=_e.getAttribute("src"),(Xe!==(je.src==null?null:je.src)||_e.getAttribute("type")!==(je.type==null?null:je.type)||_e.getAttribute("crossorigin")!==(je.crossOrigin==null?null:je.crossOrigin))&&Xe&&_e.hasAttribute("async")&&!_e.hasAttribute("itemprop"))break;return _e;default:return _e}}else if(Se==="input"&&_e.type==="hidden"){var Xe=je.name==null?null:""+je.name;if(je.type==="hidden"&&_e.getAttribute("name")===Xe)return _e}else return _e;if(_e=po(_e.nextSibling),_e===null)break}return null}function wy(_e,Se,Te){if(Se==="")return null;for(;_e.nodeType!==3;)if((_e.nodeType!==1||_e.nodeName!=="INPUT"||_e.type!=="hidden")&&!Te||(_e=po(_e.nextSibling),_e===null))return null;return _e}function Mm(_e,Se){for(;_e.nodeType!==8;)if((_e.nodeType!==1||_e.nodeName!=="INPUT"||_e.type!=="hidden")&&!Se||(_e=po(_e.nextSibling),_e===null))return null;return _e}function Xf(_e){return _e.data==="$?"||_e.data==="$~"}function Zf(_e){return _e.data==="$!"||_e.data==="$?"&&_e.ownerDocument.readyState!=="loading"}function Ay(_e,Se){var Te=_e.ownerDocument;if(_e.data==="$~")_e._reactRetry=Se;else if(_e.data!=="$?"||Te.readyState!=="loading")Se();else{var Ie=function(){Se(),Te.removeEventListener("DOMContentLoaded",Ie)};Te.addEventListener("DOMContentLoaded",Ie),_e._reactRetry=Ie}}function po(_e){for(;_e!=null;_e=_e.nextSibling){var Se=_e.nodeType;if(Se===1||Se===3)break;if(Se===8){if(Se=_e.data,Se==="$"||Se==="$!"||Se==="$?"||Se==="$~"||Se==="&"||Se==="F!"||Se==="F")break;if(Se==="/$"||Se==="/&")return null}}return _e}var Qf=null;function Lm(_e){_e=_e.nextSibling;for(var Se=0;_e;){if(_e.nodeType===8){var Te=_e.data;if(Te==="/$"||Te==="/&"){if(Se===0)return po(_e.nextSibling);Se--}else Te!=="$"&&Te!=="$!"&&Te!=="$?"&&Te!=="$~"&&Te!=="&"||Se++}_e=_e.nextSibling}return null}function Vm(_e){_e=_e.previousSibling;for(var Se=0;_e;){if(_e.nodeType===8){var Te=_e.data;if(Te==="$"||Te==="$!"||Te==="$?"||Te==="$~"||Te==="&"){if(Se===0)return _e;Se--}else Te!=="/$"&&Te!=="/&"||Se++}_e=_e.previousSibling}return null}function Dm(_e,Se,Te){switch(Se=Sd(Te),_e){case"html":if(_e=Se.documentElement,!_e)throw Error(xe(452));return _e;case"head":if(_e=Se.head,!_e)throw Error(xe(453));return _e;case"body":if(_e=Se.body,!_e)throw Error(xe(454));return _e;default:throw Error(xe(451))}}function kh(_e){for(var Se=_e.attributes;Se.length;)_e.removeAttributeNode(Se[0]);Ls(_e)}var go=new Map,Fm=new Set;function wd(_e){return typeof _e.getRootNode=="function"?_e.getRootNode():_e.nodeType===9?_e:_e.ownerDocument}var Dl=pn.d;pn.d={f:Py,r:Ty,D:Cy,C:Ry,L:By,m:Ny,X:Iy,S:ky,M:My};function Py(){var _e=Dl.f(),Se=gd();return _e||Se}function Ty(_e){var Se=sa(_e);Se!==null&&Se.tag===5&&Se.type==="form"?tg(Se):Dl.r(_e)}var Wc=typeof document>"u"?null:document;function Om(_e,Se,Te){var Ie=Wc;if(Ie&&typeof Se=="string"&&Se){var je=qs(Se);je='link[rel="'+_e+'"][href="'+je+'"]',typeof Te=="string"&&(je+='[crossorigin="'+Te+'"]'),Fm.has(je)||(Fm.add(je),_e={rel:_e,crossOrigin:Te,href:Se},Ie.querySelector(je)===null&&(Se=Ie.createElement("link"),ra(Se,"link",_e),Es(Se),Ie.head.appendChild(Se)))}}function Cy(_e){Dl.D(_e),Om("dns-prefetch",_e,null)}function Ry(_e,Se){Dl.C(_e,Se),Om("preconnect",_e,Se)}function By(_e,Se,Te){Dl.L(_e,Se,Te);var Ie=Wc;if(Ie&&_e&&Se){var je='link[rel="preload"][as="'+qs(Se)+'"]';Se==="image"&&Te&&Te.imageSrcSet?(je+='[imagesrcset="'+qs(Te.imageSrcSet)+'"]',typeof Te.imageSizes=="string"&&(je+='[imagesizes="'+qs(Te.imageSizes)+'"]')):je+='[href="'+qs(_e)+'"]';var Xe=je;switch(Se){case"style":Xe=Kc(_e);break;case"script":Xe=Yc(_e)}go.has(Xe)||(_e=Me({rel:"preload",href:Se==="image"&&Te&&Te.imageSrcSet?void 0:_e,as:Se},Te),go.set(Xe,_e),Ie.querySelector(je)!==null||Se==="style"&&Ie.querySelector(Ih(Xe))||Se==="script"&&Ie.querySelector(Mh(Xe))||(Se=Ie.createElement("link"),ra(Se,"link",_e),Es(Se),Ie.head.appendChild(Se)))}}function Ny(_e,Se){Dl.m(_e,Se);var Te=Wc;if(Te&&_e){var Ie=Se&&typeof Se.as=="string"?Se.as:"script",je='link[rel="modulepreload"][as="'+qs(Ie)+'"][href="'+qs(_e)+'"]',Xe=je;switch(Ie){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":Xe=Yc(_e)}if(!go.has(Xe)&&(_e=Me({rel:"modulepreload",href:_e},Se),go.set(Xe,_e),Te.querySelector(je)===null)){switch(Ie){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(Te.querySelector(Mh(Xe)))return}Ie=Te.createElement("link"),ra(Ie,"link",_e),Es(Ie),Te.head.appendChild(Ie)}}}function ky(_e,Se,Te){Dl.S(_e,Se,Te);var Ie=Wc;if(Ie&&_e){var je=Lo(Ie).hoistableStyles,Xe=Kc(_e);Se=Se||"default";var En=je.get(Xe);if(!En){var On={loading:0,preload:null};if(En=Ie.querySelector(Ih(Xe)))On.loading=5;else{_e=Me({rel:"stylesheet",href:_e,"data-precedence":Se},Te),(Te=go.get(Xe))&&ep(_e,Te);var ri=En=Ie.createElement("link");Es(ri),ra(ri,"link",_e),ri._p=new Promise(function(Ti,Oi){ri.onload=Ti,ri.onerror=Oi}),ri.addEventListener("load",function(){On.loading|=1}),ri.addEventListener("error",function(){On.loading|=2}),On.loading|=4,Ad(En,Se,Ie)}En={type:"stylesheet",instance:En,count:1,state:On},je.set(Xe,En)}}}function Iy(_e,Se){Dl.X(_e,Se);var Te=Wc;if(Te&&_e){var Ie=Lo(Te).hoistableScripts,je=Yc(_e),Xe=Ie.get(je);Xe||(Xe=Te.querySelector(Mh(je)),Xe||(_e=Me({src:_e,async:!0},Se),(Se=go.get(je))&&tp(_e,Se),Xe=Te.createElement("script"),Es(Xe),ra(Xe,"link",_e),Te.head.appendChild(Xe)),Xe={type:"script",instance:Xe,count:1,state:null},Ie.set(je,Xe))}}function My(_e,Se){Dl.M(_e,Se);var Te=Wc;if(Te&&_e){var Ie=Lo(Te).hoistableScripts,je=Yc(_e),Xe=Ie.get(je);Xe||(Xe=Te.querySelector(Mh(je)),Xe||(_e=Me({src:_e,async:!0,type:"module"},Se),(Se=go.get(je))&&tp(_e,Se),Xe=Te.createElement("script"),Es(Xe),ra(Xe,"link",_e),Te.head.appendChild(Xe)),Xe={type:"script",instance:Xe,count:1,state:null},Ie.set(je,Xe))}}function jm(_e,Se,Te,Ie){var je=(je=yn.current)?wd(je):null;if(!je)throw Error(xe(446));switch(_e){case"meta":case"title":return null;case"style":return typeof Te.precedence=="string"&&typeof Te.href=="string"?(Se=Kc(Te.href),Te=Lo(je).hoistableStyles,Ie=Te.get(Se),Ie||(Ie={type:"style",instance:null,count:0,state:null},Te.set(Se,Ie)),Ie):{type:"void",instance:null,count:0,state:null};case"link":if(Te.rel==="stylesheet"&&typeof Te.href=="string"&&typeof Te.precedence=="string"){_e=Kc(Te.href);var Xe=Lo(je).hoistableStyles,En=Xe.get(_e);if(En||(je=je.ownerDocument||je,En={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},Xe.set(_e,En),(Xe=je.querySelector(Ih(_e)))&&!Xe._p&&(En.instance=Xe,En.state.loading=5),go.has(_e)||(Te={rel:"preload",as:"style",href:Te.href,crossOrigin:Te.crossOrigin,integrity:Te.integrity,media:Te.media,hrefLang:Te.hrefLang,referrerPolicy:Te.referrerPolicy},go.set(_e,Te),Xe||Ly(je,_e,Te,En.state))),Se&&Ie===null)throw Error(xe(528,""));return En}if(Se&&Ie!==null)throw Error(xe(529,""));return null;case"script":return Se=Te.async,Te=Te.src,typeof Te=="string"&&Se&&typeof Se!="function"&&typeof Se!="symbol"?(Se=Yc(Te),Te=Lo(je).hoistableScripts,Ie=Te.get(Se),Ie||(Ie={type:"script",instance:null,count:0,state:null},Te.set(Se,Ie)),Ie):{type:"void",instance:null,count:0,state:null};default:throw Error(xe(444,_e))}}function Kc(_e){return'href="'+qs(_e)+'"'}function Ih(_e){return'link[rel="stylesheet"]['+_e+"]"}function Um(_e){return Me({},_e,{"data-precedence":_e.precedence,precedence:null})}function Ly(_e,Se,Te,Ie){_e.querySelector('link[rel="preload"][as="style"]['+Se+"]")?Ie.loading=1:(Se=_e.createElement("link"),Ie.preload=Se,Se.addEventListener("load",function(){return Ie.loading|=1}),Se.addEventListener("error",function(){return Ie.loading|=2}),ra(Se,"link",Te),Es(Se),_e.head.appendChild(Se))}function Yc(_e){return'[src="'+qs(_e)+'"]'}function Mh(_e){return"script[async]"+_e}function zm(_e,Se,Te){if(Se.count++,Se.instance===null)switch(Se.type){case"style":var Ie=_e.querySelector('style[data-href~="'+qs(Te.href)+'"]');if(Ie)return Se.instance=Ie,Es(Ie),Ie;var je=Me({},Te,{"data-href":Te.href,"data-precedence":Te.precedence,href:null,precedence:null});return Ie=(_e.ownerDocument||_e).createElement("style"),Es(Ie),ra(Ie,"style",je),Ad(Ie,Te.precedence,_e),Se.instance=Ie;case"stylesheet":je=Kc(Te.href);var Xe=_e.querySelector(Ih(je));if(Xe)return Se.state.loading|=4,Se.instance=Xe,Es(Xe),Xe;Ie=Um(Te),(je=go.get(je))&&ep(Ie,je),Xe=(_e.ownerDocument||_e).createElement("link"),Es(Xe);var En=Xe;return En._p=new Promise(function(On,ri){En.onload=On,En.onerror=ri}),ra(Xe,"link",Ie),Se.state.loading|=4,Ad(Xe,Te.precedence,_e),Se.instance=Xe;case"script":return Xe=Yc(Te.src),(je=_e.querySelector(Mh(Xe)))?(Se.instance=je,Es(je),je):(Ie=Te,(je=go.get(Xe))&&(Ie=Me({},Te),tp(Ie,je)),_e=_e.ownerDocument||_e,je=_e.createElement("script"),Es(je),ra(je,"link",Ie),_e.head.appendChild(je),Se.instance=je);case"void":return null;default:throw Error(xe(443,Se.type))}else Se.type==="stylesheet"&&(Se.state.loading&4)===0&&(Ie=Se.instance,Se.state.loading|=4,Ad(Ie,Te.precedence,_e));return Se.instance}function Ad(_e,Se,Te){for(var Ie=Te.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),je=Ie.length?Ie[Ie.length-1]:null,Xe=je,En=0;En<Ie.length;En++){var On=Ie[En];if(On.dataset.precedence===Se)Xe=On;else if(Xe!==je)break}Xe?Xe.parentNode.insertBefore(_e,Xe.nextSibling):(Se=Te.nodeType===9?Te.head:Te,Se.insertBefore(_e,Se.firstChild))}function ep(_e,Se){_e.crossOrigin==null&&(_e.crossOrigin=Se.crossOrigin),_e.referrerPolicy==null&&(_e.referrerPolicy=Se.referrerPolicy),_e.title==null&&(_e.title=Se.title)}function tp(_e,Se){_e.crossOrigin==null&&(_e.crossOrigin=Se.crossOrigin),_e.referrerPolicy==null&&(_e.referrerPolicy=Se.referrerPolicy),_e.integrity==null&&(_e.integrity=Se.integrity)}var Pd=null;function qm(_e,Se,Te){if(Pd===null){var Ie=new Map,je=Pd=new Map;je.set(Te,Ie)}else je=Pd,Ie=je.get(Te),Ie||(Ie=new Map,je.set(Te,Ie));if(Ie.has(_e))return Ie;for(Ie.set(_e,null),Te=Te.getElementsByTagName(_e),je=0;je<Te.length;je++){var Xe=Te[je];if(!(Xe[xs]||Xe[Qi]||_e==="link"&&Xe.getAttribute("rel")==="stylesheet")&&Xe.namespaceURI!=="http://www.w3.org/2000/svg"){var En=Xe.getAttribute(Se)||"";En=_e+En;var On=Ie.get(En);On?On.push(Xe):Ie.set(En,[Xe])}}return Ie}function Hm(_e,Se,Te){_e=_e.ownerDocument||_e,_e.head.insertBefore(Te,Se==="title"?_e.querySelector("head > title"):null)}function Vy(_e,Se,Te){if(Te===1||Se.itemProp!=null)return!1;switch(_e){case"meta":case"title":return!0;case"style":if(typeof Se.precedence!="string"||typeof Se.href!="string"||Se.href==="")break;return!0;case"link":if(typeof Se.rel!="string"||typeof Se.href!="string"||Se.href===""||Se.onLoad||Se.onError)break;switch(Se.rel){case"stylesheet":return _e=Se.disabled,typeof Se.precedence=="string"&&_e==null;default:return!0}case"script":if(Se.async&&typeof Se.async!="function"&&typeof Se.async!="symbol"&&!Se.onLoad&&!Se.onError&&Se.src&&typeof Se.src=="string")return!0}return!1}function Gm(_e){return!(_e.type==="stylesheet"&&(_e.state.loading&3)===0)}function Dy(_e,Se,Te,Ie){if(Te.type==="stylesheet"&&(typeof Ie.media!="string"||matchMedia(Ie.media).matches!==!1)&&(Te.state.loading&4)===0){if(Te.instance===null){var je=Kc(Ie.href),Xe=Se.querySelector(Ih(je));if(Xe){Se=Xe._p,Se!==null&&typeof Se=="object"&&typeof Se.then=="function"&&(_e.count++,_e=Td.bind(_e),Se.then(_e,_e)),Te.state.loading|=4,Te.instance=Xe,Es(Xe);return}Xe=Se.ownerDocument||Se,Ie=Um(Ie),(je=go.get(je))&&ep(Ie,je),Xe=Xe.createElement("link"),Es(Xe);var En=Xe;En._p=new Promise(function(On,ri){En.onload=On,En.onerror=ri}),ra(Xe,"link",Ie),Te.instance=Xe}_e.stylesheets===null&&(_e.stylesheets=new Map),_e.stylesheets.set(Te,Se),(Se=Te.state.preload)&&(Te.state.loading&3)===0&&(_e.count++,Te=Td.bind(_e),Se.addEventListener("load",Te),Se.addEventListener("error",Te))}}var np=0;function Fy(_e,Se){return _e.stylesheets&&_e.count===0&&Rd(_e,_e.stylesheets),0<_e.count||0<_e.imgCount?function(Te){var Ie=setTimeout(function(){if(_e.stylesheets&&Rd(_e,_e.stylesheets),_e.unsuspend){var Xe=_e.unsuspend;_e.unsuspend=null,Xe()}},6e4+Se);0<_e.imgBytes&&np===0&&(np=62500*vy());var je=setTimeout(function(){if(_e.waitingForImages=!1,_e.count===0&&(_e.stylesheets&&Rd(_e,_e.stylesheets),_e.unsuspend)){var Xe=_e.unsuspend;_e.unsuspend=null,Xe()}},(_e.imgBytes>np?50:800)+Se);return _e.unsuspend=Te,function(){_e.unsuspend=null,clearTimeout(Ie),clearTimeout(je)}}:null}function Td(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Rd(this,this.stylesheets);else if(this.unsuspend){var _e=this.unsuspend;this.unsuspend=null,_e()}}}var Cd=null;function Rd(_e,Se){_e.stylesheets=null,_e.unsuspend!==null&&(_e.count++,Cd=new Map,Se.forEach(Oy,_e),Cd=null,Td.call(_e))}function Oy(_e,Se){if(!(Se.state.loading&4)){var Te=Cd.get(_e);if(Te)var Ie=Te.get(null);else{Te=new Map,Cd.set(_e,Te);for(var je=_e.querySelectorAll("link[data-precedence],style[data-precedence]"),Xe=0;Xe<je.length;Xe++){var En=je[Xe];(En.nodeName==="LINK"||En.getAttribute("media")!=="not all")&&(Te.set(En.dataset.precedence,En),Ie=En)}Ie&&Te.set(null,Ie)}je=Se.instance,En=je.getAttribute("data-precedence"),Xe=Te.get(En)||Ie,Xe===Ie&&Te.set(null,je),Te.set(En,je),this.count++,Ie=Td.bind(this),je.addEventListener("load",Ie),je.addEventListener("error",Ie),Xe?Xe.parentNode.insertBefore(je,Xe.nextSibling):(_e=_e.nodeType===9?_e.head:_e,_e.insertBefore(je,_e.firstChild)),Se.state.loading|=4}}var Lh={$$typeof:Qe,Provider:null,Consumer:null,_currentValue:bn,_currentValue2:bn,_threadCount:0};function jy(_e,Se,Te,Ie,je,Xe,En,On,ri){this.tag=1,this.containerInfo=_e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Un(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Un(0),this.hiddenUpdates=Un(null),this.identifierPrefix=Ie,this.onUncaughtError=je,this.onCaughtError=Xe,this.onRecoverableError=En,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ri,this.incompleteTransitions=new Map}function $m(_e,Se,Te,Ie,je,Xe,En,On,ri,Ti,Oi,Ki){return _e=new jy(_e,Se,Te,En,ri,Ti,Oi,Ki,On),Se=1,Xe===!0&&(Se|=24),Xe=Ks(3,null,null,Se),_e.current=Xe,Xe.stateNode=_e,Se=ou(),Se.refCount++,_e.pooledCache=Se,Se.refCount++,Xe.memoizedState={element:Ie,isDehydrated:Te,cache:Se},Hr(Xe),_e}function Wm(_e){return _e?(_e=Ds,_e):Ds}function Km(_e,Se,Te,Ie,je,Xe){je=Wm(je),Ie.context===null?Ie.context=je:Ie.pendingContext=je,Ie=xr(Se),Ie.payload={element:Te},Xe=Xe===void 0?null:Xe,Xe!==null&&(Ie.callback=Xe),Te=$r(_e,Ie,Se),Te!==null&&(Ua(Te,_e,Se),Rs(Te,_e,Se))}function Ym(_e,Se){if(_e=_e.memoizedState,_e!==null&&_e.dehydrated!==null){var Te=_e.retryLane;_e.retryLane=Te!==0&&Te<Se?Te:Se}}function ip(_e,Se){Ym(_e,Se),(_e=_e.alternate)&&Ym(_e,Se)}function Jm(_e){if(_e.tag===13||_e.tag===31){var Se=Ao(_e,67108864);Se!==null&&Ua(Se,_e,67108864),ip(_e,67108864)}}function Xm(_e){if(_e.tag===13||_e.tag===31){var Se=Za();Se=er(Se);var Te=Ao(_e,Se);Te!==null&&Ua(Te,_e,Se),ip(_e,Se)}}var Bd=!0;function Uy(_e,Se,Te,Ie){var je=hn.T;hn.T=null;var Xe=pn.p;try{pn.p=2,rp(_e,Se,Te,Ie)}finally{pn.p=Xe,hn.T=je}}function zy(_e,Se,Te,Ie){var je=hn.T;hn.T=null;var Xe=pn.p;try{pn.p=8,rp(_e,Se,Te,Ie)}finally{pn.p=Xe,hn.T=je}}function rp(_e,Se,Te,Ie){if(Bd){var je=sp(Ie);if(je===null)Hf(_e,Se,Ie,Nd,Te),Qm(_e,Ie);else if(Hy(je,_e,Se,Te,Ie))Ie.stopPropagation();else if(Qm(_e,Ie),Se&4&&-1<qy.indexOf(_e)){for(;je!==null;){var Xe=sa(je);if(Xe!==null)switch(Xe.tag){case 3:if(Xe=Xe.stateNode,Xe.current.memoizedState.isDehydrated){var En=Mi(Xe.pendingLanes);if(En!==0){var On=Xe;for(On.pendingLanes|=2,On.entangledLanes|=2;En;){var ri=1<<31-ni(En);On.entanglements[1]|=ri,En&=~ri}ll(Xe),(Gr&6)===0&&(dd=Qn()+500,Rh(0))}}break;case 31:case 13:On=Ao(Xe,2),On!==null&&Ua(On,Xe,2),gd(),ip(Xe,2)}if(Xe=sp(Ie),Xe===null&&Hf(_e,Se,Ie,Nd,Te),Xe===je)break;je=Xe}je!==null&&Ie.stopPropagation()}else Hf(_e,Se,Ie,null,Te)}}function sp(_e){return _e=Gl(_e),ap(_e)}var Nd=null;function ap(_e){if(Nd=null,_e=_s(_e),_e!==null){var Se=Ae(_e);if(Se===null)_e=null;else{var Te=Se.tag;if(Te===13){if(_e=Pe(Se),_e!==null)return _e;_e=null}else if(Te===31){if(_e=Re(Se),_e!==null)return _e;_e=null}else if(Te===3){if(Se.stateNode.current.memoizedState.isDehydrated)return Se.tag===3?Se.stateNode.containerInfo:null;_e=null}else Se!==_e&&(_e=null)}}return Nd=_e,null}function Zm(_e){switch(_e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qn()){case yi:return 2;case di:return 8;case zi:case Ni:return 32;case Gi:return 268435456;default:return 32}default:return 32}}var op=!1,xu=null,_u=null,Eu=null,Vh=new Map,Dh=new Map,Su=[],qy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Qm(_e,Se){switch(_e){case"focusin":case"focusout":xu=null;break;case"dragenter":case"dragleave":_u=null;break;case"mouseover":case"mouseout":Eu=null;break;case"pointerover":case"pointerout":Vh.delete(Se.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dh.delete(Se.pointerId)}}function Fh(_e,Se,Te,Ie,je,Xe){return _e===null||_e.nativeEvent!==Xe?(_e={blockedOn:Se,domEventName:Te,eventSystemFlags:Ie,nativeEvent:Xe,targetContainers:[je]},Se!==null&&(Se=sa(Se),Se!==null&&Jm(Se)),_e):(_e.eventSystemFlags|=Ie,Se=_e.targetContainers,je!==null&&Se.indexOf(je)===-1&&Se.push(je),_e)}function Hy(_e,Se,Te,Ie,je){switch(Se){case"focusin":return xu=Fh(xu,_e,Se,Te,Ie,je),!0;case"dragenter":return _u=Fh(_u,_e,Se,Te,Ie,je),!0;case"mouseover":return Eu=Fh(Eu,_e,Se,Te,Ie,je),!0;case"pointerover":var Xe=je.pointerId;return Vh.set(Xe,Fh(Vh.get(Xe)||null,_e,Se,Te,Ie,je)),!0;case"gotpointercapture":return Xe=je.pointerId,Dh.set(Xe,Fh(Dh.get(Xe)||null,_e,Se,Te,Ie,je)),!0}return!1}function e0(_e){var Se=_s(_e.target);if(Se!==null){var Te=Ae(Se);if(Te!==null){if(Se=Te.tag,Se===13){if(Se=Pe(Te),Se!==null){_e.blockedOn=Se,fr(_e.priority,function(){Xm(Te)});return}}else if(Se===31){if(Se=Re(Te),Se!==null){_e.blockedOn=Se,fr(_e.priority,function(){Xm(Te)});return}}else if(Se===3&&Te.stateNode.current.memoizedState.isDehydrated){_e.blockedOn=Te.tag===3?Te.stateNode.containerInfo:null;return}}}_e.blockedOn=null}function kd(_e){if(_e.blockedOn!==null)return!1;for(var Se=_e.targetContainers;0<Se.length;){var Te=sp(_e.nativeEvent);if(Te===null){Te=_e.nativeEvent;var Ie=new Te.constructor(Te.type,Te);Nu=Ie,Te.target.dispatchEvent(Ie),Nu=null}else return Se=sa(Te),Se!==null&&Jm(Se),_e.blockedOn=Te,!1;Se.shift()}return!0}function t0(_e,Se,Te){kd(_e)&&Te.delete(Se)}function Gy(){op=!1,xu!==null&&kd(xu)&&(xu=null),_u!==null&&kd(_u)&&(_u=null),Eu!==null&&kd(Eu)&&(Eu=null),Vh.forEach(t0),Dh.forEach(t0)}function Id(_e,Se){_e.blockedOn===Se&&(_e.blockedOn=null,op||(op=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Gy)))}var Md=null;function n0(_e){Md!==_e&&(Md=_e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Md===_e&&(Md=null);for(var Se=0;Se<_e.length;Se+=3){var Te=_e[Se],Ie=_e[Se+1],je=_e[Se+2];if(typeof Ie!="function"){if(ap(Ie||Te)===null)continue;break}var Xe=sa(Te);Xe!==null&&(_e.splice(Se,3),Se-=3,sf(Xe,{pending:!0,data:je,method:Te.method,action:Ie},Ie,je))}}))}function Jc(_e){function Se(ri){return Id(ri,_e)}xu!==null&&Id(xu,_e),_u!==null&&Id(_u,_e),Eu!==null&&Id(Eu,_e),Vh.forEach(Se),Dh.forEach(Se);for(var Te=0;Te<Su.length;Te++){var Ie=Su[Te];Ie.blockedOn===_e&&(Ie.blockedOn=null)}for(;0<Su.length&&(Te=Su[0],Te.blockedOn===null);)e0(Te),Te.blockedOn===null&&Su.shift();if(Te=(_e.ownerDocument||_e).$$reactFormReplay,Te!=null)for(Ie=0;Ie<Te.length;Ie+=3){var je=Te[Ie],Xe=Te[Ie+1],En=je[rr]||null;if(typeof Xe=="function")En||n0(Te);else if(En){var On=null;if(Xe&&Xe.hasAttribute("formAction")){if(je=Xe,En=Xe[rr]||null)On=En.formAction;else if(ap(je)!==null)continue}else On=En.action;typeof On=="function"?Te[Ie+1]=On:(Te.splice(Ie,3),Ie-=3),n0(Te)}}}function i0(){function _e(Xe){Xe.canIntercept&&Xe.info==="react-transition"&&Xe.intercept({handler:function(){return new Promise(function(En){return je=En})},focusReset:"manual",scroll:"manual"})}function Se(){je!==null&&(je(),je=null),Ie||setTimeout(Te,20)}function Te(){if(!Ie&&!navigation.transition){var Xe=navigation.currentEntry;Xe&&Xe.url!=null&&navigation.navigate(Xe.url,{state:Xe.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var Ie=!1,je=null;return navigation.addEventListener("navigate",_e),navigation.addEventListener("navigatesuccess",Se),navigation.addEventListener("navigateerror",Se),setTimeout(Te,100),function(){Ie=!0,navigation.removeEventListener("navigate",_e),navigation.removeEventListener("navigatesuccess",Se),navigation.removeEventListener("navigateerror",Se),je!==null&&(je(),je=null)}}}function lp(_e){this._internalRoot=_e}Ld.prototype.render=lp.prototype.render=function(_e){var Se=this._internalRoot;if(Se===null)throw Error(xe(409));var Te=Se.current,Ie=Za();Km(Te,Ie,_e,Se,null,null)},Ld.prototype.unmount=lp.prototype.unmount=function(){var _e=this._internalRoot;if(_e!==null){this._internalRoot=null;var Se=_e.containerInfo;Km(_e.current,2,null,_e,null,null),gd(),Se[cr]=null}};function Ld(_e){this._internalRoot=_e}Ld.prototype.unstable_scheduleHydration=function(_e){if(_e){var Se=Yi();_e={blockedOn:null,target:_e,priority:Se};for(var Te=0;Te<Su.length&&Se!==0&&Se<Su[Te].priority;Te++);Su.splice(Te,0,_e),Te===0&&e0(_e)}};var r0=e.version;if(r0!=="19.2.3")throw Error(xe(527,r0,"19.2.3"));pn.findDOMNode=function(_e){var Se=_e._reactInternals;if(Se===void 0)throw typeof _e.render=="function"?Error(xe(188)):(_e=Object.keys(_e).join(","),Error(xe(268,_e)));return _e=Be(Se),_e=_e!==null?ke(_e):null,_e=_e===null?null:_e.stateNode,_e};var $y={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:hn,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vd.isDisabled&&Vd.supportsFiber)try{Di=Vd.inject($y),Xi=Vd}catch{}}return reactDomClient_production.createRoot=function(_e,Se){if(!Ee(_e))throw Error(xe(299));var Te=!1,Ie="",je=hg,Xe=dg,En=fg;return Se!=null&&(Se.unstable_strictMode===!0&&(Te=!0),Se.identifierPrefix!==void 0&&(Ie=Se.identifierPrefix),Se.onUncaughtError!==void 0&&(je=Se.onUncaughtError),Se.onCaughtError!==void 0&&(Xe=Se.onCaughtError),Se.onRecoverableError!==void 0&&(En=Se.onRecoverableError)),Se=$m(_e,1,!1,null,null,Te,Ie,null,je,Xe,En,i0),_e[cr]=Se.current,qf(_e),new lp(Se)},reactDomClient_production.hydrateRoot=function(_e,Se,Te){if(!Ee(_e))throw Error(xe(299));var Ie=!1,je="",Xe=hg,En=dg,On=fg,ri=null;return Te!=null&&(Te.unstable_strictMode===!0&&(Ie=!0),Te.identifierPrefix!==void 0&&(je=Te.identifierPrefix),Te.onUncaughtError!==void 0&&(Xe=Te.onUncaughtError),Te.onCaughtError!==void 0&&(En=Te.onCaughtError),Te.onRecoverableError!==void 0&&(On=Te.onRecoverableError),Te.formState!==void 0&&(ri=Te.formState)),Se=$m(_e,1,!0,Se,Te??null,Ie,je,ri,Xe,En,On,i0),Se.context=Wm(null),Te=Se.current,Ie=Za(),Ie=er(Ie),je=xr(Ie),je.callback=null,$r(Te,je,Ie),Te=Ie,Se.current.lanes=Te,ti(Se,Te),ll(Se),_e[cr]=Se.current,qf(_e),new Ld(Se)},reactDomClient_production.version="19.2.3",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();const ReactDOM=getDefaultExportFromCjs(clientExports),UploadArea=({onFilesSelected:t,isProcessing:e})=>{const r=reactExports.useCallback(Ee=>{if(Ee.preventDefault(),!e&&Ee.dataTransfer.files&&Ee.dataTransfer.files.length>0){const Pe=Array.from(Ee.dataTransfer.files).filter(Re=>["image/png","image/jpeg","application/pdf","image/webp","image/heic","image/heif","image/bmp","image/gif"].includes(Re.type));Pe.length>0&&t(Pe)}},[t,e]),xe=Ee=>{if(Ee.target.files&&Ee.target.files.length>0){const Ae=Array.from(Ee.target.files);t(Ae)}};return jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-4 w-full",children:jsxRuntimeExports.jsx("div",{className:`border-2 border-dashed rounded-md p-8 text-center transition-colors relative ${e?"border-slate-200 bg-slate-50 opacity-60 cursor-not-allowed":"border-slate-300 bg-white hover:bg-slate-50 hover:border-slate-400"}`,onDragOver:Ee=>Ee.preventDefault(),onDrop:r,children:e?jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-2 py-4",children:[jsxRuntimeExports.jsx("div",{className:"w-6 h-6 border-2 border-slate-300 border-t-blue-600 rounded-full animate-spin"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-slate-500 font-medium",children:"Analysiere Belege..."})]}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center gap-6 py-2",children:[jsxRuntimeExports.jsxs("div",{className:"w-full",children:[jsxRuntimeExports.jsx("input",{type:"file",id:"file-upload",className:"hidden",accept:"image/png,image/jpeg,application/pdf,image/webp,image/heic,image/heif,image/bmp,image/gif",multiple:!0,onChange:xe,disabled:e}),jsxRuntimeExports.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer flex flex-col items-center justify-center w-full group",children:[jsxRuntimeExports.jsx("div",{className:"bg-blue-50 text-blue-600 p-3 rounded-full mb-3 group-hover:bg-blue-100 transition-colors",children:jsxRuntimeExports.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),jsxRuntimeExports.jsx("polyline",{points:"17 8 12 3 7 8"}),jsxRuntimeExports.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]})}),jsxRuntimeExports.jsx("span",{className:"text-sm font-semibold text-slate-700",children:"Datei auswhlen"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-slate-500 mt-1",children:"PNG, JPG, PDF oder Drag & Drop"})]})]}),jsxRuntimeExports.jsxs("div",{className:"w-full flex items-center gap-4",children:[jsxRuntimeExports.jsx("div",{className:"h-px bg-slate-200 flex-1"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-slate-400 uppercase font-medium",children:"oder"}),jsxRuntimeExports.jsx("div",{className:"h-px bg-slate-200 flex-1"})]}),jsxRuntimeExports.jsxs("div",{className:"w-full",children:[jsxRuntimeExports.jsx("input",{type:"file",id:"camera-upload",className:"hidden",accept:"image/*",capture:"environment",onChange:xe,disabled:e}),jsxRuntimeExports.jsxs("label",{htmlFor:"camera-upload",className:"cursor-pointer flex flex-col items-center justify-center w-full group",children:[jsxRuntimeExports.jsx("div",{className:"bg-slate-100 text-slate-600 p-2 rounded-full mb-2 group-hover:bg-slate-200 transition-colors",children:jsxRuntimeExports.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),jsxRuntimeExports.jsx("circle",{cx:"12",cy:"13",r:"4"})]})}),jsxRuntimeExports.jsx("span",{className:"text-xs font-semibold text-slate-600",children:"Foto aufnehmen"})]})]})]})})})};var DocumentStatus=(t=>(t.PROCESSING="PROCESSING",t.REVIEW_NEEDED="REVIEW_NEEDED",t.COMPLETED="COMPLETED",t.ERROR="ERROR",t.DUPLICATE="DUPLICATE",t.PRIVATE="PRIVATE",t))(DocumentStatus||{});const scriptRel="modulepreload",assetsURL=function(t){return"/"+t},seen={},__vitePreload=function(e,r,xe){let Ee=Promise.resolve();if(r&&r.length>0){let Pe=function(Be){return Promise.all(Be.map(ke=>Promise.resolve(ke).then(Me=>({status:"fulfilled",value:Me}),Me=>({status:"rejected",reason:Me}))))};document.getElementsByTagName("link");const Re=document.querySelector("meta[property=csp-nonce]"),Ce=(Re==null?void 0:Re.nonce)||(Re==null?void 0:Re.getAttribute("nonce"));Ee=Pe(r.map(Be=>{if(Be=assetsURL(Be),Be in seen)return;seen[Be]=!0;const ke=Be.endsWith(".css"),Me=ke?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${Be}"]${Me}`))return;const Fe=document.createElement("link");if(Fe.rel=ke?"stylesheet":scriptRel,ke||(Fe.as="script"),Fe.crossOrigin="",Fe.href=Be,Ce&&Fe.setAttribute("nonce",Ce),document.head.appendChild(Fe),ke)return new Promise((Ve,Oe)=>{Fe.addEventListener("load",Ve),Fe.addEventListener("error",()=>Oe(new Error(`Unable to preload CSS for ${Be}`)))})}))}function Ae(Pe){const Re=new Event("vite:preloadError",{cancelable:!0});if(Re.payload=Pe,window.dispatchEvent(Re),!Re.defaultPrevented)throw Pe}return Ee.then(Pe=>{for(const Re of Pe||[])Re.status==="rejected"&&Ae(Re.reason);return e().catch(Ae)})};function _typeof$2(t){"@babel/helpers - typeof";return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$2(t)}var u8=Uint8Array,u16=Uint16Array,u32=Uint32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(t,e){for(var r=new u16(31),xe=0;xe<31;++xe)r[xe]=e+=1<<t[xe-1];for(var Ee=new u32(r[30]),xe=1;xe<30;++xe)for(var Ae=r[xe];Ae<r[xe+1];++Ae)Ee[Ae]=Ae-r[xe]<<5|xe;return[r,Ee]},_a$1=freb(fleb,2),fl=_a$1[0],revfl=_a$1[1];fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),fd=_b[0],revfd=_b[1],rev=new u16(32768);for(var i$1=0;i$1<32768;++i$1){var x$1=(i$1&43690)>>>1|(i$1&21845)<<1;x$1=(x$1&52428)>>>2|(x$1&13107)<<2,x$1=(x$1&61680)>>>4|(x$1&3855)<<4,rev[i$1]=((x$1&65280)>>>8|(x$1&255)<<8)>>>1}var hMap=(function(t,e,r){for(var xe=t.length,Ee=0,Ae=new u16(e);Ee<xe;++Ee)++Ae[t[Ee]-1];var Pe=new u16(e);for(Ee=0;Ee<e;++Ee)Pe[Ee]=Pe[Ee-1]+Ae[Ee-1]<<1;var Re;if(r){Re=new u16(1<<e);var Ce=15-e;for(Ee=0;Ee<xe;++Ee)if(t[Ee])for(var Be=Ee<<4|t[Ee],ke=e-t[Ee],Me=Pe[t[Ee]-1]++<<ke,Fe=Me|(1<<ke)-1;Me<=Fe;++Me)Re[rev[Me]>>>Ce]=Be}else for(Re=new u16(xe),Ee=0;Ee<xe;++Ee)Re[Ee]=rev[Pe[t[Ee]-1]++]>>>15-t[Ee];return Re}),flt=new u8(288);for(var i$1=0;i$1<144;++i$1)flt[i$1]=8;for(var i$1=144;i$1<256;++i$1)flt[i$1]=9;for(var i$1=256;i$1<280;++i$1)flt[i$1]=7;for(var i$1=280;i$1<288;++i$1)flt[i$1]=8;var fdt=new u8(32);for(var i$1=0;i$1<32;++i$1)fdt[i$1]=5;var flm=hMap(flt,9,0),flrm=hMap(flt,9,1),fdm=hMap(fdt,5,0),fdrm=hMap(fdt,5,1),max=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},bits=function(t,e,r){var xe=e/8>>0;return(t[xe]|t[xe+1]<<8)>>>(e&7)&r},bits16=function(t,e){var r=e/8>>0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>>(e&7)},shft=function(t){return(t/8>>0)+(t&7&&1)},slc=function(t,e,r){(r==null||r>t.length)&&(r=t.length);var xe=new(t instanceof u16?u16:t instanceof u32?u32:u8)(r-e);return xe.set(t.subarray(e,r)),xe},inflt=function(t,e,r){var xe=t.length,Ee=!e||r,Ae=!r||r.i;r||(r={}),e||(e=new u8(xe*3));var Pe=function(yn){var _n=e.length;if(yn>_n){var wn=new u8(Math.max(_n*2,yn));wn.set(e),e=wn}},Re=r.f||0,Ce=r.p||0,Be=r.b||0,ke=r.l,Me=r.d,Fe=r.m,Ve=r.n,Oe=xe*8;do{if(!ke){r.f=Re=bits(t,Ce,1);var $e=bits(t,Ce+1,3);if(Ce+=3,$e)if($e==1)ke=flrm,Me=fdrm,Fe=9,Ve=5;else if($e==2){var Qe=bits(t,Ce,31)+257,rn=bits(t,Ce+10,15)+4,tn=Qe+bits(t,Ce+5,31)+1;Ce+=14;for(var an=new u8(tn),qe=new u8(19),Ke=0;Ke<rn;++Ke)qe[clim[Ke]]=bits(t,Ce+Ke*3,7);Ce+=rn*3;var sn=max(qe),gn=(1<<sn)-1;if(!Ae&&Ce+tn*(sn+7)>Oe)break;for(var He=hMap(qe,sn,1),Ke=0;Ke<tn;){var en=He[bits(t,Ce,gn)];Ce+=en&15;var Ge=en>>>4;if(Ge<16)an[Ke++]=Ge;else{var cn=0,Sn=0;for(Ge==16?(Sn=3+bits(t,Ce,3),Ce+=2,cn=an[Ke-1]):Ge==17?(Sn=3+bits(t,Ce,7),Ce+=3):Ge==18&&(Sn=11+bits(t,Ce,127),Ce+=7);Sn--;)an[Ke++]=cn}}var Tn=an.subarray(0,Qe),hn=an.subarray(Qe);Fe=max(Tn),Ve=max(hn),ke=hMap(Tn,Fe,1),Me=hMap(hn,Ve,1)}else throw"invalid block type";else{var Ge=shft(Ce)+4,Ue=t[Ge-4]|t[Ge-3]<<8,Ye=Ge+Ue;if(Ye>xe){if(Ae)throw"unexpected EOF";break}Ee&&Pe(Be+Ue),e.set(t.subarray(Ge,Ye),Be),r.b=Be+=Ue,r.p=Ce=Ye*8;continue}if(Ce>Oe)throw"unexpected EOF"}Ee&&Pe(Be+131072);for(var pn=(1<<Fe)-1,bn=(1<<Ve)-1,fn=Fe+Ve+18;Ae||Ce+fn<Oe;){var cn=ke[bits16(t,Ce)&pn],An=cn>>>4;if(Ce+=cn&15,Ce>Oe)throw"unexpected EOF";if(!cn)throw"invalid length/literal";if(An<256)e[Be++]=An;else if(An==256){ke=null;break}else{var xn=An-254;if(An>264){var Ke=An-257,Je=fleb[Ke];xn=bits(t,Ce,(1<<Je)-1)+fl[Ke],Ce+=Je}var We=Me[bits16(t,Ce)&bn],Ze=We>>>4;if(!We)throw"invalid distance";Ce+=We&15;var hn=fd[Ze];if(Ze>3){var Je=fdeb[Ze];hn+=bits16(t,Ce)&(1<<Je)-1,Ce+=Je}if(Ce>Oe)throw"unexpected EOF";Ee&&Pe(Be+131072);for(var un=Be+xn;Be<un;Be+=4)e[Be]=e[Be-hn],e[Be+1]=e[Be+1-hn],e[Be+2]=e[Be+2-hn],e[Be+3]=e[Be+3-hn];Be=un}}r.l=ke,r.p=Ce,r.b=Be,ke&&(Re=1,r.m=Fe,r.d=Me,r.n=Ve)}while(!Re);return Be==e.length?e:slc(e,0,Be)},wbits=function(t,e,r){r<<=e&7;var xe=e/8>>0;t[xe]|=r,t[xe+1]|=r>>>8},wbits16=function(t,e,r){r<<=e&7;var xe=e/8>>0;t[xe]|=r,t[xe+1]|=r>>>8,t[xe+2]|=r>>>16},hTree=function(t,e){for(var r=[],xe=0;xe<t.length;++xe)t[xe]&&r.push({s:xe,f:t[xe]});var Ee=r.length,Ae=r.slice();if(!Ee)return[new u8(0),0];if(Ee==1){var Pe=new u8(r[0].s+1);return Pe[r[0].s]=1,[Pe,1]}r.sort(function(tn,an){return tn.f-an.f}),r.push({s:-1,f:25001});var Re=r[0],Ce=r[1],Be=0,ke=1,Me=2;for(r[0]={s:-1,f:Re.f+Ce.f,l:Re,r:Ce};ke!=Ee-1;)Re=r[r[Be].f<r[Me].f?Be++:Me++],Ce=r[Be!=ke&&r[Be].f<r[Me].f?Be++:Me++],r[ke++]={s:-1,f:Re.f+Ce.f,l:Re,r:Ce};for(var Fe=Ae[0].s,xe=1;xe<Ee;++xe)Ae[xe].s>Fe&&(Fe=Ae[xe].s);var Ve=new u16(Fe+1),Oe=ln(r[ke-1],Ve,0);if(Oe>e){var xe=0,$e=0,Ge=Oe-e,Ue=1<<Ge;for(Ae.sort(function(an,qe){return Ve[qe.s]-Ve[an.s]||an.f-qe.f});xe<Ee;++xe){var Ye=Ae[xe].s;if(Ve[Ye]>e)$e+=Ue-(1<<Oe-Ve[Ye]),Ve[Ye]=e;else break}for($e>>>=Ge;$e>0;){var Qe=Ae[xe].s;Ve[Qe]<e?$e-=1<<e-Ve[Qe]++-1:++xe}for(;xe>=0&&$e;--xe){var rn=Ae[xe].s;Ve[rn]==e&&(--Ve[rn],++$e)}Oe=e}return[new u8(Ve),Oe]},ln=function(t,e,r){return t.s==-1?Math.max(ln(t.l,e,r+1),ln(t.r,e,r+1)):e[t.s]=r},lc=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new u16(++e),xe=0,Ee=t[0],Ae=1,Pe=function(Ce){r[xe++]=Ce},Re=1;Re<=e;++Re)if(t[Re]==Ee&&Re!=e)++Ae;else{if(!Ee&&Ae>2){for(;Ae>138;Ae-=138)Pe(32754);Ae>2&&(Pe(Ae>10?Ae-11<<5|28690:Ae-3<<5|12305),Ae=0)}else if(Ae>3){for(Pe(Ee),--Ae;Ae>6;Ae-=6)Pe(8304);Ae>2&&(Pe(Ae-3<<5|8208),Ae=0)}for(;Ae--;)Pe(Ee);Ae=1,Ee=t[Re]}return[r.subarray(0,xe),e]},clen=function(t,e){for(var r=0,xe=0;xe<e.length;++xe)r+=t[xe]*e[xe];return r},wfblk=function(t,e,r){var xe=r.length,Ee=shft(e+2);t[Ee]=xe&255,t[Ee+1]=xe>>>8,t[Ee+2]=t[Ee]^255,t[Ee+3]=t[Ee+1]^255;for(var Ae=0;Ae<xe;++Ae)t[Ee+Ae+4]=r[Ae];return(Ee+4+xe)*8},wblk=function(t,e,r,xe,Ee,Ae,Pe,Re,Ce,Be,ke){wbits(e,ke++,r),++Ee[256];for(var Me=hTree(Ee,15),Fe=Me[0],Ve=Me[1],Oe=hTree(Ae,15),$e=Oe[0],Ge=Oe[1],Ue=lc(Fe),Ye=Ue[0],Qe=Ue[1],rn=lc($e),tn=rn[0],an=rn[1],qe=new u16(19),Ke=0;Ke<Ye.length;++Ke)qe[Ye[Ke]&31]++;for(var Ke=0;Ke<tn.length;++Ke)qe[tn[Ke]&31]++;for(var sn=hTree(qe,7),gn=sn[0],He=sn[1],en=19;en>4&&!gn[clim[en-1]];--en);var cn=Be+5<<3,Sn=clen(Ee,flt)+clen(Ae,fdt)+Pe,Tn=clen(Ee,Fe)+clen(Ae,$e)+Pe+14+3*en+clen(qe,gn)+(2*qe[16]+3*qe[17]+7*qe[18]);if(cn<=Sn&&cn<=Tn)return wfblk(e,ke,t.subarray(Ce,Ce+Be));var hn,pn,bn,fn;if(wbits(e,ke,1+(Tn<Sn)),ke+=2,Tn<Sn){hn=hMap(Fe,Ve,0),pn=Fe,bn=hMap($e,Ge,0),fn=$e;var An=hMap(gn,He,0);wbits(e,ke,Qe-257),wbits(e,ke+5,an-1),wbits(e,ke+10,en-4),ke+=14;for(var Ke=0;Ke<en;++Ke)wbits(e,ke+3*Ke,gn[clim[Ke]]);ke+=3*en;for(var xn=[Ye,tn],Je=0;Je<2;++Je)for(var We=xn[Je],Ke=0;Ke<We.length;++Ke){var Ze=We[Ke]&31;wbits(e,ke,An[Ze]),ke+=gn[Ze],Ze>15&&(wbits(e,ke,We[Ke]>>>5&127),ke+=We[Ke]>>>12)}}else hn=flm,pn=flt,bn=fdm,fn=fdt;for(var Ke=0;Ke<Re;++Ke)if(xe[Ke]>255){var Ze=xe[Ke]>>>18&31;wbits16(e,ke,hn[Ze+257]),ke+=pn[Ze+257],Ze>7&&(wbits(e,ke,xe[Ke]>>>23&31),ke+=fleb[Ze]);var un=xe[Ke]&31;wbits16(e,ke,bn[un]),ke+=fn[un],un>3&&(wbits16(e,ke,xe[Ke]>>>5&8191),ke+=fdeb[un])}else wbits16(e,ke,hn[xe[Ke]]),ke+=pn[xe[Ke]];return wbits16(e,ke,hn[256]),ke+pn[256]},deo=new u32([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),dflt=function(t,e,r,xe,Ee,Ae){var Pe=t.length,Re=new u8(xe+Pe+5*(1+Math.floor(Pe/7e3))+Ee),Ce=Re.subarray(xe,Re.length-Ee),Be=0;if(!e||Pe<8)for(var ke=0;ke<=Pe;ke+=65535){var Me=ke+65535;Me<Pe?Be=wfblk(Ce,Be,t.subarray(ke,Me)):(Ce[ke]=Ae,Be=wfblk(Ce,Be,t.subarray(ke,Pe)))}else{for(var Fe=deo[e-1],Ve=Fe>>>13,Oe=Fe&8191,$e=(1<<r)-1,Ge=new u16(32768),Ue=new u16($e+1),Ye=Math.ceil(r/3),Qe=2*Ye,rn=function(ii){return(t[ii]^t[ii+1]<<Ye^t[ii+2]<<Qe)&$e},tn=new u32(25e3),an=new u16(288),qe=new u16(32),Ke=0,sn=0,ke=0,gn=0,He=0,en=0;ke<Pe;++ke){var cn=rn(ke),Sn=ke&32767,Tn=Ue[cn];if(Ge[Sn]=Tn,Ue[cn]=Sn,He<=ke){var hn=Pe-ke;if((Ke>7e3||gn>24576)&&hn>423){Be=wblk(t,Ce,0,tn,an,qe,sn,gn,en,ke-en,Be),gn=Ke=sn=0,en=ke;for(var pn=0;pn<286;++pn)an[pn]=0;for(var pn=0;pn<30;++pn)qe[pn]=0}var bn=2,fn=0,An=Oe,xn=Sn-Tn&32767;if(hn>2&&cn==rn(ke-xn))for(var Je=Math.min(Ve,hn)-1,We=Math.min(32767,ke),Ze=Math.min(258,hn);xn<=We&&--An&&Sn!=Tn;){if(t[ke+bn]==t[ke+bn-xn]){for(var un=0;un<Ze&&t[ke+un]==t[ke+un-xn];++un);if(un>bn){if(bn=un,fn=xn,un>Je)break;for(var yn=Math.min(xn,un-2),_n=0,pn=0;pn<yn;++pn){var wn=ke-xn+pn+32768&32767,kn=Ge[wn],$n=wn-kn+32768&32767;$n>_n&&(_n=$n,Tn=wn)}}}Sn=Tn,Tn=Ge[Sn],xn+=Sn-Tn+32768&32767}if(fn){tn[gn++]=268435456|revfl[bn]<<18|revfd[fn];var Ln=revfl[bn]&31,Gn=revfd[fn]&31;sn+=fleb[Ln]+fdeb[Gn],++an[257+Ln],++qe[Gn],He=ke+bn,++Ke}else tn[gn++]=t[ke],++an[t[ke]]}}Be=wblk(t,Ce,Ae,tn,an,qe,sn,gn,en,ke-en,Be)}return slc(Re,0,xe+shft(Be)+Ee)},adler=function(){var t=1,e=0;return{p:function(r){for(var xe=t,Ee=e,Ae=r.length,Pe=0;Pe!=Ae;){for(var Re=Math.min(Pe+5552,Ae);Pe<Re;++Pe)xe+=r[Pe],Ee+=xe;xe%=65521,Ee%=65521}t=xe,e=Ee},d:function(){return(t>>>8<<16|(e&255)<<8|e>>>8)+((t&255)<<23)*2}}},dopt=function(t,e,r,xe,Ee){return dflt(t,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):12+e.mem,r,xe,!0)},wbytes=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},zlh=function(t,e){var r=e.level,xe=r==0?0:r<6?1:r==9?3:2;t[0]=120,t[1]=xe<<6|(xe?32-2*xe:1)},zlv=function(t){if((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(t[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function zlibSync(t,e){e===void 0&&(e={});var r=adler();r.p(t);var xe=dopt(t,e,2,4);return zlh(xe,e),wbytes(xe,xe.length-4,r.d()),xe}function unzlibSync(t,e){return inflt((zlv(t),t.subarray(2,-4)),e)}var n=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function i(){n.console&&typeof n.console.log=="function"&&n.console.log.apply(n.console,arguments)}var a={log:i,warn:function(t){n.console&&(typeof n.console.warn=="function"?n.console.warn.apply(n.console,arguments):i.call(null,arguments))},error:function(t){n.console&&(typeof n.console.error=="function"?n.console.error.apply(n.console,arguments):i(t))}};function o(t,e,r){var xe=new XMLHttpRequest;xe.open("GET",t),xe.responseType="blob",xe.onload=function(){l(xe.response,e,r)},xe.onerror=function(){a.error("could not download file")},xe.send()}function s(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function c(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var u,h,l=n.saveAs||((typeof window>"u"?"undefined":_typeof$2(window))!=="object"||window!==n?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var xe=n.URL||n.webkitURL,Ee=document.createElement("a");e=e||t.name||"download",Ee.download=e,Ee.rel="noopener",typeof t=="string"?(Ee.href=t,Ee.origin!==location.origin?s(Ee.href)?o(t,e,r):c(Ee,Ee.target="_blank"):c(Ee)):(Ee.href=xe.createObjectURL(t),setTimeout((function(){xe.revokeObjectURL(Ee.href)}),4e4),setTimeout((function(){c(Ee)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(s(t))o(t,e,r);else{var xe=document.createElement("a");xe.href=t,xe.target="_blank",setTimeout((function(){c(xe)}))}else navigator.msSaveOrOpenBlob((function(Ee,Ae){return Ae===void 0?Ae={autoBom:!1}:_typeof$2(Ae)!=="object"&&(a.warn("Deprecated: Expected third argument to be a object"),Ae={autoBom:!Ae}),Ae.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(Ee.type)?new Blob(["\uFEFF",Ee],{type:Ee.type}):Ee})(t,r),e)}:function(t,e,r,xe){if((xe=xe||open("","_blank"))&&(xe.document.title=xe.document.body.innerText="downloading..."),typeof t=="string")return o(t,e,r);var Ee=t.type==="application/octet-stream",Ae=/constructor/i.test(n.HTMLElement)||n.safari,Pe=/CriOS\/[\d]+/.test(navigator.userAgent);if((Pe||Ee&&Ae)&&(typeof FileReader>"u"?"undefined":_typeof$2(FileReader))==="object"){var Re=new FileReader;Re.onloadend=function(){var ke=Re.result;ke=Pe?ke:ke.replace(/^data:[^;]*;/,"data:attachment/file;"),xe?xe.location.href=ke:location=ke,xe=null},Re.readAsDataURL(t)}else{var Ce=n.URL||n.webkitURL,Be=Ce.createObjectURL(t);xe?xe.location=Be:location.href=Be,xe=null,setTimeout((function(){Ce.revokeObjectURL(Be)}),4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function f(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(Re){return[parseInt(Re[1]),parseInt(Re[2]),parseInt(Re[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(Re){return[parseInt(Re[1],16),parseInt(Re[2],16),parseInt(Re[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(Re){return[parseInt(Re[1]+Re[1],16),parseInt(Re[2]+Re[2],16),parseInt(Re[3]+Re[3],16)]}}],xe=0;xe<r.length;xe++){var Ee=r[xe].re,Ae=r[xe].process,Pe=Ee.exec(t);Pe&&(e=Ae(Pe),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var Re=this.r.toString(16),Ce=this.g.toString(16),Be=this.b.toString(16);return Re.length==1&&(Re="0"+Re),Ce.length==1&&(Ce="0"+Ce),Be.length==1&&(Be="0"+Be),"#"+Re+Ce+Be}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function d(t,e){var r=t[0],xe=t[1],Ee=t[2],Ae=t[3];r=g(r,xe,Ee,Ae,e[0],7,-680876936),Ae=g(Ae,r,xe,Ee,e[1],12,-389564586),Ee=g(Ee,Ae,r,xe,e[2],17,606105819),xe=g(xe,Ee,Ae,r,e[3],22,-1044525330),r=g(r,xe,Ee,Ae,e[4],7,-176418897),Ae=g(Ae,r,xe,Ee,e[5],12,1200080426),Ee=g(Ee,Ae,r,xe,e[6],17,-1473231341),xe=g(xe,Ee,Ae,r,e[7],22,-45705983),r=g(r,xe,Ee,Ae,e[8],7,1770035416),Ae=g(Ae,r,xe,Ee,e[9],12,-1958414417),Ee=g(Ee,Ae,r,xe,e[10],17,-42063),xe=g(xe,Ee,Ae,r,e[11],22,-1990404162),r=g(r,xe,Ee,Ae,e[12],7,1804603682),Ae=g(Ae,r,xe,Ee,e[13],12,-40341101),Ee=g(Ee,Ae,r,xe,e[14],17,-1502002290),r=m(r,xe=g(xe,Ee,Ae,r,e[15],22,1236535329),Ee,Ae,e[1],5,-165796510),Ae=m(Ae,r,xe,Ee,e[6],9,-1069501632),Ee=m(Ee,Ae,r,xe,e[11],14,643717713),xe=m(xe,Ee,Ae,r,e[0],20,-373897302),r=m(r,xe,Ee,Ae,e[5],5,-701558691),Ae=m(Ae,r,xe,Ee,e[10],9,38016083),Ee=m(Ee,Ae,r,xe,e[15],14,-660478335),xe=m(xe,Ee,Ae,r,e[4],20,-405537848),r=m(r,xe,Ee,Ae,e[9],5,568446438),Ae=m(Ae,r,xe,Ee,e[14],9,-1019803690),Ee=m(Ee,Ae,r,xe,e[3],14,-187363961),xe=m(xe,Ee,Ae,r,e[8],20,1163531501),r=m(r,xe,Ee,Ae,e[13],5,-1444681467),Ae=m(Ae,r,xe,Ee,e[2],9,-51403784),Ee=m(Ee,Ae,r,xe,e[7],14,1735328473),r=v(r,xe=m(xe,Ee,Ae,r,e[12],20,-1926607734),Ee,Ae,e[5],4,-378558),Ae=v(Ae,r,xe,Ee,e[8],11,-2022574463),Ee=v(Ee,Ae,r,xe,e[11],16,1839030562),xe=v(xe,Ee,Ae,r,e[14],23,-35309556),r=v(r,xe,Ee,Ae,e[1],4,-1530992060),Ae=v(Ae,r,xe,Ee,e[4],11,1272893353),Ee=v(Ee,Ae,r,xe,e[7],16,-155497632),xe=v(xe,Ee,Ae,r,e[10],23,-1094730640),r=v(r,xe,Ee,Ae,e[13],4,681279174),Ae=v(Ae,r,xe,Ee,e[0],11,-358537222),Ee=v(Ee,Ae,r,xe,e[3],16,-722521979),xe=v(xe,Ee,Ae,r,e[6],23,76029189),r=v(r,xe,Ee,Ae,e[9],4,-640364487),Ae=v(Ae,r,xe,Ee,e[12],11,-421815835),Ee=v(Ee,Ae,r,xe,e[15],16,530742520),r=b(r,xe=v(xe,Ee,Ae,r,e[2],23,-995338651),Ee,Ae,e[0],6,-198630844),Ae=b(Ae,r,xe,Ee,e[7],10,1126891415),Ee=b(Ee,Ae,r,xe,e[14],15,-1416354905),xe=b(xe,Ee,Ae,r,e[5],21,-57434055),r=b(r,xe,Ee,Ae,e[12],6,1700485571),Ae=b(Ae,r,xe,Ee,e[3],10,-1894986606),Ee=b(Ee,Ae,r,xe,e[10],15,-1051523),xe=b(xe,Ee,Ae,r,e[1],21,-2054922799),r=b(r,xe,Ee,Ae,e[8],6,1873313359),Ae=b(Ae,r,xe,Ee,e[15],10,-30611744),Ee=b(Ee,Ae,r,xe,e[6],15,-1560198380),xe=b(xe,Ee,Ae,r,e[13],21,1309151649),r=b(r,xe,Ee,Ae,e[4],6,-145523070),Ae=b(Ae,r,xe,Ee,e[11],10,-1120210379),Ee=b(Ee,Ae,r,xe,e[2],15,718787259),xe=b(xe,Ee,Ae,r,e[9],21,-343485551),t[0]=_(r,t[0]),t[1]=_(xe,t[1]),t[2]=_(Ee,t[2]),t[3]=_(Ae,t[3])}function p(t,e,r,xe,Ee,Ae){return e=_(_(e,t),_(xe,Ae)),_(e<<Ee|e>>>32-Ee,r)}function g(t,e,r,xe,Ee,Ae,Pe){return p(e&r|~e&xe,t,e,Ee,Ae,Pe)}function m(t,e,r,xe,Ee,Ae,Pe){return p(e&xe|r&~xe,t,e,Ee,Ae,Pe)}function v(t,e,r,xe,Ee,Ae,Pe){return p(e^r^xe,t,e,Ee,Ae,Pe)}function b(t,e,r,xe,Ee,Ae,Pe){return p(r^(e|~xe),t,e,Ee,Ae,Pe)}function y(t){var e,r=t.length,xe=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)d(xe,w(t.substring(e-64,e)));t=t.substring(e-64);var Ee=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)Ee[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(Ee[e>>2]|=128<<(e%4<<3),e>55)for(d(xe,Ee),e=0;e<16;e++)Ee[e]=0;return Ee[14]=8*r,d(xe,Ee),xe}function w(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}u=n.atob.bind(n),h=n.btoa.bind(n);var N="0123456789abcdef".split("");function L(t){for(var e="",r=0;r<4;r++)e+=N[t>>8*r+4&15]+N[t>>8*r&15];return e}function A(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function x(t){return y(t).map(A).join("")}var S=(function(t){for(var e=0;e<t.length;e++)t[e]=L(t[e]);return t.join("")})(y("hello"))!="5d41402abc4b2a76b9719d911017c592";function _(t,e){if(S){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function P(t,e){var r,xe,Ee,Ae;if(t!==r){for(var Pe=(Ee=t,Ae=1+(256/t.length>>0),new Array(Ae+1).join(Ee)),Re=[],Ce=0;Ce<256;Ce++)Re[Ce]=Ce;var Be=0;for(Ce=0;Ce<256;Ce++){var ke=Re[Ce];Be=(Be+ke+Pe.charCodeAt(Ce))%256,Re[Ce]=Re[Be],Re[Be]=ke}r=t,xe=Re}else Re=xe;var Me=e.length,Fe=0,Ve=0,Oe="";for(Ce=0;Ce<Me;Ce++)Ve=(Ve+(ke=Re[Fe=(Fe+1)%256]))%256,Re[Fe]=Re[Ve],Re[Ve]=ke,Pe=Re[(Re[Fe]+Re[Ve])%256],Oe+=String.fromCharCode(e.charCodeAt(Ce)^Pe);return Oe}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var k={print:4,modify:8,copy:16,"annot-forms":32};function I(t,e,r,xe){this.v=1,this.r=2;var Ee=192;t.forEach((function(Re){if(k.perm!==void 0)throw new Error("Invalid permission: "+Re);Ee+=k[Re]})),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var Ae=(e+this.padding).substr(0,32),Pe=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(Ae,Pe),this.P=-(1+(255^Ee)),this.encryptionKey=x(Ae+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(xe)).substr(0,5),this.U=P(this.encryptionKey,this.padding)}function F(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,xe=0;xe<r;xe++){var Ee=t.charCodeAt(xe);Ee<33||Ee===35||Ee===37||Ee===40||Ee===41||Ee===47||Ee===60||Ee===62||Ee===91||Ee===93||Ee===123||Ee===125||Ee>126?e+="#"+("0"+Ee.toString(16)).slice(-2):e+=t[xe]}return e}function C(t){if(_typeof$2(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,xe,Ee){if(Ee=Ee||!1,typeof r!="string"||typeof xe!="function"||typeof Ee!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var Ae=Math.random().toString(35);return e[r][Ae]=[xe,!!Ee],Ae},this.unsubscribe=function(r){for(var xe in e)if(e[xe][r])return delete e[xe][r],Object.keys(e[xe]).length===0&&delete e[xe],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var xe=Array.prototype.slice.call(arguments,1),Ee=[];for(var Ae in e[r]){var Pe=e[r][Ae];try{Pe[0].apply(t,xe)}catch(Re){n.console&&a.error("jsPDF PubSub Error",Re.message,Re)}Pe[1]&&Ee.push(Ae)}Ee.length&&Ee.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function j(t){if(!(this instanceof j))return new j(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function O(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function B(t,e,r,xe,Ee){if(!(this instanceof B))return new B(t,e,r,xe,Ee);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,O.call(this,xe,Ee)}function M(t,e,r,xe,Ee){if(!(this instanceof M))return new M(t,e,r,xe,Ee);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,O.call(this,xe,Ee)}function E(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",xe=arguments[1],Ee=arguments[2],Ae=arguments[3],Pe=[],Re=1,Ce=16,Be="S",ke=null;_typeof$2(t=t||{})==="object"&&(r=t.orientation,xe=t.unit||xe,Ee=t.format||Ee,Ae=t.compress||t.compressPdf||Ae,(ke=t.encryption||null)!==null&&(ke.userPassword=ke.userPassword||"",ke.ownerPassword=ke.ownerPassword||"",ke.userPermissions=ke.userPermissions||[]),Re=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(Ce=t.floatPrecision),Be=t.defaultPathOperation||"S"),Pe=t.filters||(Ae===!0?["FlateEncode"]:Pe),xe=xe||"mm",r=(""+(r||"P")).toLowerCase();var Me=t.putOnlyUsedFonts||!1,Fe={},Ve={internal:{},__private__:{}};Ve.__private__.PubSub=C;var Oe="1.3",$e=Ve.__private__.getPdfVersion=function(){return Oe};Ve.__private__.setPdfVersion=function(nn){Oe=nn};var Ge={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};Ve.__private__.getPageFormats=function(){return Ge};var Ue=Ve.__private__.getPageFormat=function(nn){return Ge[nn]};Ee=Ee||"a4";var Ye={COMPAT:"compat",ADVANCED:"advanced"},Qe=Ye.COMPAT;function rn(){this.saveGraphicsState(),Pn(new ei(ui,0,0,-ui,0,Ho()*ui).toString()+" cm"),this.setFontSize(this.getFontSize()/ui),Be="n",Qe=Ye.ADVANCED}function tn(){this.restoreGraphicsState(),Be="S",Qe=Ye.COMPAT}var an=Ve.__private__.combineFontStyleAndFontWeight=function(nn,Nn){if(nn=="bold"&&Nn=="normal"||nn=="bold"&&Nn==400||nn=="normal"&&Nn=="italic"||nn=="bold"&&Nn=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Nn&&(nn=Nn==400||Nn==="normal"?nn==="italic"?"italic":"normal":Nn!=700&&Nn!=="bold"||nn!=="normal"?(Nn==700?"bold":Nn)+""+nn:"bold"),nn};Ve.advancedAPI=function(nn){var Nn=Qe===Ye.COMPAT;return Nn&&rn.call(this),typeof nn!="function"||(nn(this),Nn&&tn.call(this)),this},Ve.compatAPI=function(nn){var Nn=Qe===Ye.ADVANCED;return Nn&&tn.call(this),typeof nn!="function"||(nn(this),Nn&&rn.call(this)),this},Ve.isAdvancedAPI=function(){return Qe===Ye.ADVANCED};var qe,Ke=function(nn){if(Qe!==Ye.ADVANCED)throw new Error(nn+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},sn=Ve.roundToPrecision=Ve.__private__.roundToPrecision=function(nn,Nn){var Xn=e||Nn;if(isNaN(nn)||isNaN(Xn))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return nn.toFixed(Xn).replace(/0+$/,"")};qe=Ve.hpf=Ve.__private__.hpf=typeof Ce=="number"?function(nn){if(isNaN(nn))throw new Error("Invalid argument passed to jsPDF.hpf");return sn(nn,Ce)}:Ce==="smart"?function(nn){if(isNaN(nn))throw new Error("Invalid argument passed to jsPDF.hpf");return sn(nn,nn>-1&&nn<1?16:5)}:function(nn){if(isNaN(nn))throw new Error("Invalid argument passed to jsPDF.hpf");return sn(nn,16)};var gn=Ve.f2=Ve.__private__.f2=function(nn){if(isNaN(nn))throw new Error("Invalid argument passed to jsPDF.f2");return sn(nn,2)},He=Ve.__private__.f3=function(nn){if(isNaN(nn))throw new Error("Invalid argument passed to jsPDF.f3");return sn(nn,3)},en=Ve.scale=Ve.__private__.scale=function(nn){if(isNaN(nn))throw new Error("Invalid argument passed to jsPDF.scale");return Qe===Ye.COMPAT?nn*ui:Qe===Ye.ADVANCED?nn:void 0},cn=function(nn){return Qe===Ye.COMPAT?Ho()-nn:Qe===Ye.ADVANCED?nn:void 0},Sn=function(nn){return en(cn(nn))};Ve.__private__.setPrecision=Ve.setPrecision=function(nn){typeof parseInt(nn,10)=="number"&&(e=parseInt(nn,10))};var Tn,hn="00000000000000000000000000000000",pn=Ve.__private__.getFileId=function(){return hn},bn=Ve.__private__.setFileId=function(nn){return hn=nn!==void 0&&/^[a-fA-F0-9]{32}$/.test(nn)?nn.toUpperCase():hn.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),ke!==null&&(ss=new I(ke.userPermissions,ke.userPassword,ke.ownerPassword,hn)),hn};Ve.setFileId=function(nn){return bn(nn),this},Ve.getFileId=function(){return pn()};var fn=Ve.__private__.convertDateToPDFDate=function(nn){var Nn=nn.getTimezoneOffset(),Xn=Nn<0?"+":"-",li=Math.floor(Math.abs(Nn/60)),Ei=Math.abs(Nn%60),Fi=[Xn,Ze(li),"'",Ze(Ei),"'"].join("");return["D:",nn.getFullYear(),Ze(nn.getMonth()+1),Ze(nn.getDate()),Ze(nn.getHours()),Ze(nn.getMinutes()),Ze(nn.getSeconds()),Fi].join("")},An=Ve.__private__.convertPDFDateToDate=function(nn){var Nn=parseInt(nn.substr(2,4),10),Xn=parseInt(nn.substr(6,2),10)-1,li=parseInt(nn.substr(8,2),10),Ei=parseInt(nn.substr(10,2),10),Fi=parseInt(nn.substr(12,2),10),nr=parseInt(nn.substr(14,2),10);return new Date(Nn,Xn,li,Ei,Fi,nr,0)},xn=Ve.__private__.setCreationDate=function(nn){var Nn;if(nn===void 0&&(nn=new Date),nn instanceof Date)Nn=fn(nn);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(nn))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Nn=nn}return Tn=Nn},Je=Ve.__private__.getCreationDate=function(nn){var Nn=Tn;return nn==="jsDate"&&(Nn=An(Tn)),Nn};Ve.setCreationDate=function(nn){return xn(nn),this},Ve.getCreationDate=function(nn){return Je(nn)};var We,Ze=Ve.__private__.padd2=function(nn){return("0"+parseInt(nn)).slice(-2)},un=Ve.__private__.padd2Hex=function(nn){return("00"+(nn=nn.toString())).substr(nn.length)},yn=0,_n=[],wn=[],kn=0,$n=[],Ln=[],Gn=!1,Yn=wn,ii=function(){yn=0,kn=0,wn=[],_n=[],$n=[],ir=Zi(),Qi=Zi()};Ve.__private__.setCustomOutputDestination=function(nn){Gn=!0,Yn=nn};var Wn=function(nn){Gn||(Yn=nn)};Ve.__private__.resetCustomOutputDestination=function(){Gn=!1,Yn=wn};var Pn=Ve.__private__.out=function(nn){return nn=nn.toString(),kn+=nn.length+1,Yn.push(nn),Yn},Zn=Ve.__private__.write=function(nn){return Pn(arguments.length===1?nn.toString():Array.prototype.join.call(arguments," "))},mn=Ve.__private__.getArrayBuffer=function(nn){for(var Nn=nn.length,Xn=new ArrayBuffer(Nn),li=new Uint8Array(Xn);Nn--;)li[Nn]=nn.charCodeAt(Nn);return Xn},Cn=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];Ve.__private__.getStandardFonts=function(){return Cn};var jn=t.fontSize||16;Ve.__private__.setFontSize=Ve.setFontSize=function(nn){return jn=Qe===Ye.ADVANCED?nn/ui:nn,this};var Rn,Dn=Ve.__private__.getFontSize=Ve.getFontSize=function(){return Qe===Ye.COMPAT?jn:jn*ui},Jn=t.R2L||!1;Ve.__private__.setR2L=Ve.setR2L=function(nn){return Jn=nn,this},Ve.__private__.getR2L=Ve.getR2L=function(){return Jn};var Qn,qn=Ve.__private__.setZoomMode=function(nn){var Nn=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(nn))Rn=nn;else if(isNaN(nn)){if(Nn.indexOf(nn)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+nn+'" is not recognized.');Rn=nn}else Rn=parseInt(nn,10)};Ve.__private__.getZoomMode=function(){return Rn};var yi,di=Ve.__private__.setPageMode=function(nn){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(nn)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+nn+'" is not recognized.');Qn=nn};Ve.__private__.getPageMode=function(){return Qn};var zi=Ve.__private__.setLayoutMode=function(nn){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(nn)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+nn+'" is not recognized.');yi=nn};Ve.__private__.getLayoutMode=function(){return yi},Ve.__private__.setDisplayMode=Ve.setDisplayMode=function(nn,Nn,Xn){return qn(nn),zi(Nn),di(Xn),this};var Ni={title:"",subject:"",author:"",keywords:"",creator:""};Ve.__private__.getDocumentProperty=function(nn){if(Object.keys(Ni).indexOf(nn)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ni[nn]},Ve.__private__.getDocumentProperties=function(){return Ni},Ve.__private__.setDocumentProperties=Ve.setProperties=Ve.setDocumentProperties=function(nn){for(var Nn in Ni)Ni.hasOwnProperty(Nn)&&nn[Nn]&&(Ni[Nn]=nn[Nn]);return this},Ve.__private__.setDocumentProperty=function(nn,Nn){if(Object.keys(Ni).indexOf(nn)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ni[nn]=Nn};var Gi,ui,Vi,Di,Xi,fi={},ni={},pi=[],ji={},hr={},ar={},Fn={},Si=null,Mi=0,ki=[],$i=new C(Ve),tr=t.hotfixes||[],Hn={},Un={},ti=[],ei=function nn(Nn,Xn,li,Ei,Fi,nr){if(!(this instanceof nn))return new nn(Nn,Xn,li,Ei,Fi,nr);isNaN(Nn)&&(Nn=1),isNaN(Xn)&&(Xn=0),isNaN(li)&&(li=0),isNaN(Ei)&&(Ei=1),isNaN(Fi)&&(Fi=0),isNaN(nr)&&(nr=0),this._matrix=[Nn,Xn,li,Ei,Fi,nr]};Object.defineProperty(ei.prototype,"sx",{get:function(){return this._matrix[0]},set:function(nn){this._matrix[0]=nn}}),Object.defineProperty(ei.prototype,"shy",{get:function(){return this._matrix[1]},set:function(nn){this._matrix[1]=nn}}),Object.defineProperty(ei.prototype,"shx",{get:function(){return this._matrix[2]},set:function(nn){this._matrix[2]=nn}}),Object.defineProperty(ei.prototype,"sy",{get:function(){return this._matrix[3]},set:function(nn){this._matrix[3]=nn}}),Object.defineProperty(ei.prototype,"tx",{get:function(){return this._matrix[4]},set:function(nn){this._matrix[4]=nn}}),Object.defineProperty(ei.prototype,"ty",{get:function(){return this._matrix[5]},set:function(nn){this._matrix[5]=nn}}),Object.defineProperty(ei.prototype,"a",{get:function(){return this._matrix[0]},set:function(nn){this._matrix[0]=nn}}),Object.defineProperty(ei.prototype,"b",{get:function(){return this._matrix[1]},set:function(nn){this._matrix[1]=nn}}),Object.defineProperty(ei.prototype,"c",{get:function(){return this._matrix[2]},set:function(nn){this._matrix[2]=nn}}),Object.defineProperty(ei.prototype,"d",{get:function(){return this._matrix[3]},set:function(nn){this._matrix[3]=nn}}),Object.defineProperty(ei.prototype,"e",{get:function(){return this._matrix[4]},set:function(nn){this._matrix[4]=nn}}),Object.defineProperty(ei.prototype,"f",{get:function(){return this._matrix[5]},set:function(nn){this._matrix[5]=nn}}),Object.defineProperty(ei.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ei.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ei.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ei.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ei.prototype.join=function(nn){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(qe).join(nn)},ei.prototype.multiply=function(nn){var Nn=nn.sx*this.sx+nn.shy*this.shx,Xn=nn.sx*this.shy+nn.shy*this.sy,li=nn.shx*this.sx+nn.sy*this.shx,Ei=nn.shx*this.shy+nn.sy*this.sy,Fi=nn.tx*this.sx+nn.ty*this.shx+this.tx,nr=nn.tx*this.shy+nn.ty*this.sy+this.ty;return new ei(Nn,Xn,li,Ei,Fi,nr)},ei.prototype.decompose=function(){var nn=this.sx,Nn=this.shy,Xn=this.shx,li=this.sy,Ei=this.tx,Fi=this.ty,nr=Math.sqrt(nn*nn+Nn*Nn),ur=(nn/=nr)*Xn+(Nn/=nr)*li;Xn-=nn*ur,li-=Nn*ur;var mr=Math.sqrt(Xn*Xn+li*li);return ur/=mr,nn*(li/=mr)<Nn*(Xn/=mr)&&(nn=-nn,Nn=-Nn,ur=-ur,nr=-nr),{scale:new ei(nr,0,0,mr,0,0),translate:new ei(1,0,0,1,Ei,Fi),rotate:new ei(nn,Nn,-Nn,nn,0,0),skew:new ei(1,0,ur,1,0,0)}},ei.prototype.toString=function(nn){return this.join(" ")},ei.prototype.inversed=function(){var nn=this.sx,Nn=this.shy,Xn=this.shx,li=this.sy,Ei=this.tx,Fi=this.ty,nr=1/(nn*li-Nn*Xn),ur=li*nr,mr=-Nn*nr,Er=-Xn*nr,Ar=nn*nr;return new ei(ur,mr,Er,Ar,-ur*Ei-Er*Fi,-mr*Ei-Ar*Fi)},ei.prototype.applyToPoint=function(nn){var Nn=nn.x*this.sx+nn.y*this.shx+this.tx,Xn=nn.x*this.shy+nn.y*this.sy+this.ty;return new ml(Nn,Xn)},ei.prototype.applyToRectangle=function(nn){var Nn=this.applyToPoint(nn),Xn=this.applyToPoint(new ml(nn.x+nn.w,nn.y+nn.h));return new Fu(Nn.x,Nn.y,Xn.x-Nn.x,Xn.y-Nn.y)},ei.prototype.clone=function(){var nn=this.sx,Nn=this.shy,Xn=this.shx,li=this.sy,Ei=this.tx,Fi=this.ty;return new ei(nn,Nn,Xn,li,Ei,Fi)},Ve.Matrix=ei;var si=Ve.matrixMult=function(nn,Nn){return Nn.multiply(nn)},Ri=new ei(1,0,0,1,0,0);Ve.unitMatrix=Ve.identityMatrix=Ri;var Bi=function(nn,Nn){if(!hr[nn]){var Xn=(Nn instanceof B?"Sh":"P")+(Object.keys(ji).length+1).toString(10);Nn.id=Xn,hr[nn]=Xn,ji[Xn]=Nn,$i.publish("addPattern",Nn)}};Ve.ShadingPattern=B,Ve.TilingPattern=M,Ve.addShadingPattern=function(nn,Nn){return Ke("addShadingPattern()"),Bi(nn,Nn),this},Ve.beginTilingPattern=function(nn){Ke("beginTilingPattern()"),pc(nn.boundingBox[0],nn.boundingBox[1],nn.boundingBox[2]-nn.boundingBox[0],nn.boundingBox[3]-nn.boundingBox[1],nn.matrix)},Ve.endTilingPattern=function(nn,Nn){Ke("endTilingPattern()"),Nn.stream=Ln[We].join(`
`),Bi(nn,Nn),$i.publish("endTilingPattern",Nn),ti.pop().restore()};var er=Ve.__private__.newObject=function(){var nn=Zi();return Yi(nn,!0),nn},Zi=Ve.__private__.newObjectDeferred=function(){return yn++,_n[yn]=function(){return kn},yn},Yi=function(nn,Nn){return Nn=typeof Nn=="boolean"&&Nn,_n[nn]=kn,Nn&&Pn(nn+" 0 obj"),nn},fr=Ve.__private__.newAdditionalObject=function(){var nn={objId:Zi(),content:""};return $n.push(nn),nn},ir=Zi(),Qi=Zi(),rr=Ve.__private__.decodeColorString=function(nn){var Nn=nn.split(" ");if(Nn.length!==2||Nn[1]!=="g"&&Nn[1]!=="G")Nn.length===5&&(Nn[4]==="k"||Nn[4]==="K")&&(Nn=[(1-Nn[0])*(1-Nn[3]),(1-Nn[1])*(1-Nn[3]),(1-Nn[2])*(1-Nn[3]),"r"]);else{var Xn=parseFloat(Nn[0]);Nn=[Xn,Xn,Xn,"r"]}for(var li="#",Ei=0;Ei<3;Ei++)li+=("0"+Math.floor(255*parseFloat(Nn[Ei])).toString(16)).slice(-2);return li},cr=Ve.__private__.encodeColorString=function(nn){var Nn;typeof nn=="string"&&(nn={ch1:nn});var Xn=nn.ch1,li=nn.ch2,Ei=nn.ch3,Fi=nn.ch4,nr=nn.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Xn=="string"&&Xn.charAt(0)!=="#"){var ur=new f(Xn);if(ur.ok)Xn=ur.toHex();else if(!/^\d*\.?\d*$/.test(Xn))throw new Error('Invalid color "'+Xn+'" passed to jsPDF.encodeColorString.')}if(typeof Xn=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Xn)&&(Xn="#"+Xn[1]+Xn[1]+Xn[2]+Xn[2]+Xn[3]+Xn[3]),typeof Xn=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Xn)){var mr=parseInt(Xn.substr(1),16);Xn=mr>>16&255,li=mr>>8&255,Ei=255&mr}if(li===void 0||Fi===void 0&&Xn===li&&li===Ei)if(typeof Xn=="string")Nn=Xn+" "+nr[0];else switch(nn.precision){case 2:Nn=gn(Xn/255)+" "+nr[0];break;case 3:default:Nn=He(Xn/255)+" "+nr[0]}else if(Fi===void 0||_typeof$2(Fi)==="object"){if(Fi&&!isNaN(Fi.a)&&Fi.a===0)return Nn=["1.","1.","1.",nr[1]].join(" ");if(typeof Xn=="string")Nn=[Xn,li,Ei,nr[1]].join(" ");else switch(nn.precision){case 2:Nn=[gn(Xn/255),gn(li/255),gn(Ei/255),nr[1]].join(" ");break;default:case 3:Nn=[He(Xn/255),He(li/255),He(Ei/255),nr[1]].join(" ")}}else if(typeof Xn=="string")Nn=[Xn,li,Ei,Fi,nr[2]].join(" ");else switch(nn.precision){case 2:Nn=[gn(Xn),gn(li),gn(Ei),gn(Fi),nr[2]].join(" ");break;case 3:default:Nn=[He(Xn),He(li),He(Ei),He(Fi),nr[2]].join(" ")}return Nn},vr=Ve.__private__.getFilters=function(){return Pe},wr=Ve.__private__.putStream=function(nn){var Nn=(nn=nn||{}).data||"",Xn=nn.filters||vr(),li=nn.alreadyAppliedFilters||[],Ei=nn.addLength1||!1,Fi=Nn.length,nr=nn.objectId,ur=function(Vs){return Vs};if(ke!==null&&nr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");ke!==null&&(ur=ss.encryptor(nr,0));var mr={};Xn===!0&&(Xn=["FlateEncode"]);var Er=nn.additionalKeyValues||[],Ar=(mr=E.API.processDataByFilters!==void 0?E.API.processDataByFilters(Nn,Xn):{data:Nn,reverseChain:[]}).reverseChain+(Array.isArray(li)?li.join(" "):li.toString());if(mr.data.length!==0&&(Er.push({key:"Length",value:mr.data.length}),Ei===!0&&Er.push({key:"Length1",value:Fi})),Ar.length!=0)if(Ar.split("/").length-1==1)Er.push({key:"Filter",value:Ar});else{Er.push({key:"Filter",value:"["+Ar+"]"});for(var Ir=0;Ir<Er.length;Ir+=1)if(Er[Ir].key==="DecodeParms"){for(var as=[],os=0;os<mr.reverseChain.split("/").length-1;os+=1)as.push("null");as.push(Er[Ir].value),Er[Ir].value="["+as.join(" ")+"]"}}Pn("<<");for(var ms=0;ms<Er.length;ms++)Pn("/"+Er[ms].key+" "+Er[ms].value);Pn(">>"),mr.data.length!==0&&(Pn("stream"),Pn(ur(mr.data)),Pn("endstream"))},qr=Ve.__private__.putPage=function(nn){var Nn=nn.number,Xn=nn.data,li=nn.objId,Ei=nn.contentsObjId;Yi(li,!0),Pn("<</Type /Page"),Pn("/Parent "+nn.rootDictionaryObjId+" 0 R"),Pn("/Resources "+nn.resourceDictionaryObjId+" 0 R"),Pn("/MediaBox ["+parseFloat(qe(nn.mediaBox.bottomLeftX))+" "+parseFloat(qe(nn.mediaBox.bottomLeftY))+" "+qe(nn.mediaBox.topRightX)+" "+qe(nn.mediaBox.topRightY)+"]"),nn.cropBox!==null&&Pn("/CropBox ["+qe(nn.cropBox.bottomLeftX)+" "+qe(nn.cropBox.bottomLeftY)+" "+qe(nn.cropBox.topRightX)+" "+qe(nn.cropBox.topRightY)+"]"),nn.bleedBox!==null&&Pn("/BleedBox ["+qe(nn.bleedBox.bottomLeftX)+" "+qe(nn.bleedBox.bottomLeftY)+" "+qe(nn.bleedBox.topRightX)+" "+qe(nn.bleedBox.topRightY)+"]"),nn.trimBox!==null&&Pn("/TrimBox ["+qe(nn.trimBox.bottomLeftX)+" "+qe(nn.trimBox.bottomLeftY)+" "+qe(nn.trimBox.topRightX)+" "+qe(nn.trimBox.topRightY)+"]"),nn.artBox!==null&&Pn("/ArtBox ["+qe(nn.artBox.bottomLeftX)+" "+qe(nn.artBox.bottomLeftY)+" "+qe(nn.artBox.topRightX)+" "+qe(nn.artBox.topRightY)+"]"),typeof nn.userUnit=="number"&&nn.userUnit!==1&&Pn("/UserUnit "+nn.userUnit),$i.publish("putPage",{objId:li,pageContext:ki[Nn],pageNumber:Nn,page:Xn}),Pn("/Contents "+Ei+" 0 R"),Pn(">>"),Pn("endobj");var Fi=Xn.join(`
`);return Qe===Ye.ADVANCED&&(Fi+=`
Q`),Yi(Ei,!0),wr({data:Fi,filters:vr(),objectId:Ei}),Pn("endobj"),li},Fr=Ve.__private__.putPages=function(){var nn,Nn,Xn=[];for(nn=1;nn<=Mi;nn++)ki[nn].objId=Zi(),ki[nn].contentsObjId=Zi();for(nn=1;nn<=Mi;nn++)Xn.push(qr({number:nn,data:Ln[nn],objId:ki[nn].objId,contentsObjId:ki[nn].contentsObjId,mediaBox:ki[nn].mediaBox,cropBox:ki[nn].cropBox,bleedBox:ki[nn].bleedBox,trimBox:ki[nn].trimBox,artBox:ki[nn].artBox,userUnit:ki[nn].userUnit,rootDictionaryObjId:ir,resourceDictionaryObjId:Qi}));Yi(ir,!0),Pn("<</Type /Pages");var li="/Kids [";for(Nn=0;Nn<Mi;Nn++)li+=Xn[Nn]+" 0 R ";Pn(li+"]"),Pn("/Count "+Mi),Pn(">>"),Pn("endobj"),$i.publish("postPutPages")},xs=function(nn){$i.publish("putFont",{font:nn,out:Pn,newObject:er,putStream:wr}),nn.isAlreadyPutted!==!0&&(nn.objectNumber=er(),Pn("<<"),Pn("/Type /Font"),Pn("/BaseFont /"+F(nn.postScriptName)),Pn("/Subtype /Type1"),typeof nn.encoding=="string"&&Pn("/Encoding /"+nn.encoding),Pn("/FirstChar 32"),Pn("/LastChar 255"),Pn(">>"),Pn("endobj"))},Ls=function(){for(var nn in fi)fi.hasOwnProperty(nn)&&(Me===!1||Me===!0&&Fe.hasOwnProperty(nn))&&xs(fi[nn])},_s=function(nn){nn.objectNumber=er();var Nn=[];Nn.push({key:"Type",value:"/XObject"}),Nn.push({key:"Subtype",value:"/Form"}),Nn.push({key:"BBox",value:"["+[qe(nn.x),qe(nn.y),qe(nn.x+nn.width),qe(nn.y+nn.height)].join(" ")+"]"}),Nn.push({key:"Matrix",value:"["+nn.matrix.toString()+"]"});var Xn=nn.pages[1].join(`
`);wr({data:Xn,additionalKeyValues:Nn,objectId:nn.objectNumber}),Pn("endobj")},sa=function(){for(var nn in Hn)Hn.hasOwnProperty(nn)&&_s(Hn[nn])},Mo=function(nn,Nn){var Xn,li=[],Ei=1/(Nn-1);for(Xn=0;Xn<1;Xn+=Ei)li.push(Xn);if(li.push(1),nn[0].offset!=0){var Fi={offset:0,color:nn[0].color};nn.unshift(Fi)}if(nn[nn.length-1].offset!=1){var nr={offset:1,color:nn[nn.length-1].color};nn.push(nr)}for(var ur="",mr=0,Er=0;Er<li.length;Er++){for(Xn=li[Er];Xn>nn[mr+1].offset;)mr++;var Ar=nn[mr].offset,Ir=(Xn-Ar)/(nn[mr+1].offset-Ar),as=nn[mr].color,os=nn[mr+1].color;ur+=un(Math.round((1-Ir)*as[0]+Ir*os[0]).toString(16))+un(Math.round((1-Ir)*as[1]+Ir*os[1]).toString(16))+un(Math.round((1-Ir)*as[2]+Ir*os[2]).toString(16))}return ur.trim()},Lo=function(nn,Nn){Nn||(Nn=21);var Xn=er(),li=Mo(nn.colors,Nn),Ei=[];Ei.push({key:"FunctionType",value:"0"}),Ei.push({key:"Domain",value:"[0.0 1.0]"}),Ei.push({key:"Size",value:"["+Nn+"]"}),Ei.push({key:"BitsPerSample",value:"8"}),Ei.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ei.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),wr({data:li,additionalKeyValues:Ei,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Xn}),Pn("endobj"),nn.objectNumber=er(),Pn("<< /ShadingType "+nn.type),Pn("/ColorSpace /DeviceRGB");var Fi="/Coords ["+qe(parseFloat(nn.coords[0]))+" "+qe(parseFloat(nn.coords[1]))+" ";nn.type===2?Fi+=qe(parseFloat(nn.coords[2]))+" "+qe(parseFloat(nn.coords[3])):Fi+=qe(parseFloat(nn.coords[2]))+" "+qe(parseFloat(nn.coords[3]))+" "+qe(parseFloat(nn.coords[4]))+" "+qe(parseFloat(nn.coords[5])),Pn(Fi+="]"),nn.matrix&&Pn("/Matrix ["+nn.matrix.toString()+"]"),Pn("/Function "+Xn+" 0 R"),Pn("/Extend [true true]"),Pn(">>"),Pn("endobj")},Es=function(nn,Nn){var Xn=Zi(),li=er();Nn.push({resourcesOid:Xn,objectOid:li}),nn.objectNumber=li;var Ei=[];Ei.push({key:"Type",value:"/Pattern"}),Ei.push({key:"PatternType",value:"1"}),Ei.push({key:"PaintType",value:"1"}),Ei.push({key:"TilingType",value:"1"}),Ei.push({key:"BBox",value:"["+nn.boundingBox.map(qe).join(" ")+"]"}),Ei.push({key:"XStep",value:qe(nn.xStep)}),Ei.push({key:"YStep",value:qe(nn.yStep)}),Ei.push({key:"Resources",value:Xn+" 0 R"}),nn.matrix&&Ei.push({key:"Matrix",value:"["+nn.matrix.toString()+"]"}),wr({data:nn.stream,additionalKeyValues:Ei,objectId:nn.objectNumber}),Pn("endobj")},ul=function(nn){var Nn;for(Nn in ji)ji.hasOwnProperty(Nn)&&(ji[Nn]instanceof B?Lo(ji[Nn]):ji[Nn]instanceof M&&Es(ji[Nn],nn))},Au=function(nn){for(var Nn in nn.objectNumber=er(),Pn("<<"),nn)switch(Nn){case"opacity":Pn("/ca "+gn(nn[Nn]));break;case"stroke-opacity":Pn("/CA "+gn(nn[Nn]))}Pn(">>"),Pn("endobj")},yo=function(){var nn;for(nn in ar)ar.hasOwnProperty(nn)&&Au(ar[nn])},Qa=function(){for(var nn in Pn("/XObject <<"),Hn)Hn.hasOwnProperty(nn)&&Hn[nn].objectNumber>=0&&Pn("/"+nn+" "+Hn[nn].objectNumber+" 0 R");$i.publish("putXobjectDict"),Pn(">>")},nh=function(){ss.oid=er(),Pn("<<"),Pn("/Filter /Standard"),Pn("/V "+ss.v),Pn("/R "+ss.r),Pn("/U <"+ss.toHexString(ss.U)+">"),Pn("/O <"+ss.toHexString(ss.O)+">"),Pn("/P "+ss.P),Pn(">>"),Pn("endobj")},Pu=function(){for(var nn in Pn("/Font <<"),fi)fi.hasOwnProperty(nn)&&(Me===!1||Me===!0&&Fe.hasOwnProperty(nn))&&Pn("/"+nn+" "+fi[nn].objectNumber+" 0 R");Pn(">>")},sc=function(){if(Object.keys(ji).length>0){for(var nn in Pn("/Shading <<"),ji)ji.hasOwnProperty(nn)&&ji[nn]instanceof B&&ji[nn].objectNumber>=0&&Pn("/"+nn+" "+ji[nn].objectNumber+" 0 R");$i.publish("putShadingPatternDict"),Pn(">>")}},Ol=function(nn){if(Object.keys(ji).length>0){for(var Nn in Pn("/Pattern <<"),ji)ji.hasOwnProperty(Nn)&&ji[Nn]instanceof Ve.TilingPattern&&ji[Nn].objectNumber>=0&&ji[Nn].objectNumber<nn&&Pn("/"+Nn+" "+ji[Nn].objectNumber+" 0 R");$i.publish("putTilingPatternDict"),Pn(">>")}},jl=function(){if(Object.keys(ar).length>0){var nn;for(nn in Pn("/ExtGState <<"),ar)ar.hasOwnProperty(nn)&&ar[nn].objectNumber>=0&&Pn("/"+nn+" "+ar[nn].objectNumber+" 0 R");$i.publish("putGStateDict"),Pn(">>")}},rs=function(nn){Yi(nn.resourcesOid,!0),Pn("<<"),Pn("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Pu(),sc(),Ol(nn.objectOid),jl(),Qa(),Pn(">>"),Pn("endobj")},ba=function(){var nn=[];Ls(),yo(),sa(),ul(nn),$i.publish("putResources"),nn.forEach(rs),rs({resourcesOid:Qi,objectOid:Number.MAX_SAFE_INTEGER}),$i.publish("postPutResources")},Xs=function(){$i.publish("putAdditionalObjects");for(var nn=0;nn<$n.length;nn++){var Nn=$n[nn];Yi(Nn.objId,!0),Pn(Nn.content),Pn("endobj")}$i.publish("postPutAdditionalObjects")},Tu=function(nn){ni[nn.fontName]=ni[nn.fontName]||{},ni[nn.fontName][nn.fontStyle]=nn.id},Cu=function(nn,Nn,Xn,li,Ei){var Fi={id:"F"+(Object.keys(fi).length+1).toString(10),postScriptName:nn,fontName:Nn,fontStyle:Xn,encoding:li,isStandardFont:Ei||!1,metadata:{}};return $i.publish("addFont",{font:Fi,instance:this}),fi[Fi.id]=Fi,Tu(Fi),Fi.id},Ru=function(nn){for(var Nn=0,Xn=Cn.length;Nn<Xn;Nn++){var li=Cu.call(this,nn[Nn][0],nn[Nn][1],nn[Nn][2],Cn[Nn][3],!0);Me===!1&&(Fe[li]=!0);var Ei=nn[Nn][0].split("-");Tu({id:li,fontName:Ei[0],fontStyle:Ei[1]||""})}$i.publish("addFonts",{fonts:fi,dictionary:ni})},xa=function(nn){return nn.foo=function(){try{return nn.apply(this,arguments)}catch(li){var Nn=li.stack||"";~Nn.indexOf(" at ")&&(Nn=Nn.split(" at ")[1]);var Xn="Error in function "+Nn.split(`
`)[0].split("<")[0]+": "+li.message;if(!n.console)throw new Error(Xn);n.console.error(Xn,li),n.alert&&alert(Xn)}},nn.foo.bar=nn,nn.foo},vo=function(nn,Nn){var Xn,li,Ei,Fi,nr,ur,mr,Er,Ar;if(Ei=(Nn=Nn||{}).sourceEncoding||"Unicode",nr=Nn.outputEncoding,(Nn.autoencode||nr)&&fi[Gi].metadata&&fi[Gi].metadata[Ei]&&fi[Gi].metadata[Ei].encoding&&(Fi=fi[Gi].metadata[Ei].encoding,!nr&&fi[Gi].encoding&&(nr=fi[Gi].encoding),!nr&&Fi.codePages&&(nr=Fi.codePages[0]),typeof nr=="string"&&(nr=Fi[nr]),nr)){for(mr=!1,ur=[],Xn=0,li=nn.length;Xn<li;Xn++)(Er=nr[nn.charCodeAt(Xn)])?ur.push(String.fromCharCode(Er)):ur.push(nn[Xn]),ur[Xn].charCodeAt(0)>>8&&(mr=!0);nn=ur.join("")}for(Xn=nn.length;mr===void 0&&Xn!==0;)nn.charCodeAt(Xn-1)>>8&&(mr=!0),Xn--;if(!mr)return nn;for(ur=Nn.noBOM?[]:[254,255],Xn=0,li=nn.length;Xn<li;Xn++){if((Ar=(Er=nn.charCodeAt(Xn))>>8)>>8)throw new Error("Character at position "+Xn+" of string '"+nn+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ur.push(Ar),ur.push(Er-(Ar<<8))}return String.fromCharCode.apply(void 0,ur)},aa=Ve.__private__.pdfEscape=Ve.pdfEscape=function(nn,Nn){return vo(nn,Nn).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},qs=Ve.__private__.beginPage=function(nn){Ln[++Mi]=[],ki[Mi]={objId:0,contentsObjId:0,userUnit:Number(Re),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(nn[0]),topRightY:Number(nn[1])}},zl(Mi),Wn(Ln[We])},Ul=function(nn,Nn){var Xn,li,Ei;switch(r=Nn||r,typeof nn=="string"&&(Xn=Ue(nn.toLowerCase()),Array.isArray(Xn)&&(li=Xn[0],Ei=Xn[1])),Array.isArray(nn)&&(li=nn[0]*ui,Ei=nn[1]*ui),isNaN(li)&&(li=Ee[0],Ei=Ee[1]),(li>14400||Ei>14400)&&(a.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),li=Math.min(14400,li),Ei=Math.min(14400,Ei)),Ee=[li,Ei],r.substr(0,1)){case"l":Ei>li&&(Ee=[Ei,li]);break;case"p":li>Ei&&(Ee=[Ei,li])}qs(Ee),pl(Cs),Pn(Ga),Vu!==0&&Pn(Vu+" J"),Du!==0&&Pn(Du+" j"),$i.publish("addPage",{pageNumber:Mi})},ac=function(nn){nn>0&&nn<=Mi&&(Ln.splice(nn,1),ki.splice(nn,1),Mi--,We>Mi&&(We=Mi),this.setPage(We))},zl=function(nn){nn>0&&nn<=Mi&&(We=nn)},Vo=Ve.__private__.getNumberOfPages=Ve.getNumberOfPages=function(){return Ln.length-1},Bu=function(nn,Nn,Xn){var li,Ei=void 0;return Xn=Xn||{},nn=nn!==void 0?nn:fi[Gi].fontName,Nn=Nn!==void 0?Nn:fi[Gi].fontStyle,li=nn.toLowerCase(),ni[li]!==void 0&&ni[li][Nn]!==void 0?Ei=ni[li][Nn]:ni[nn]!==void 0&&ni[nn][Nn]!==void 0?Ei=ni[nn][Nn]:Xn.disableWarning===!1&&a.warn("Unable to look up font label for font '"+nn+"', '"+Nn+"'. Refer to getFontList() for available fonts."),Ei||Xn.noFallback||(Ei=ni.times[Nn])==null&&(Ei=ni.times.normal),Ei},oc=Ve.__private__.putInfo=function(){var nn=er(),Nn=function(li){return li};for(var Xn in ke!==null&&(Nn=ss.encryptor(nn,0)),Pn("<<"),Pn("/Producer ("+aa(Nn("jsPDF "+E.version))+")"),Ni)Ni.hasOwnProperty(Xn)&&Ni[Xn]&&Pn("/"+Xn.substr(0,1).toUpperCase()+Xn.substr(1)+" ("+aa(Nn(Ni[Xn]))+")");Pn("/CreationDate ("+aa(Nn(Tn))+")"),Pn(">>"),Pn("endobj")},eo=Ve.__private__.putCatalog=function(nn){var Nn=(nn=nn||{}).rootDictionaryObjId||ir;switch(er(),Pn("<<"),Pn("/Type /Catalog"),Pn("/Pages "+Nn+" 0 R"),Rn||(Rn="fullwidth"),Rn){case"fullwidth":Pn("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Pn("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Pn("/OpenAction [3 0 R /Fit]");break;case"original":Pn("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Xn=""+Rn;Xn.substr(Xn.length-1)==="%"&&(Rn=parseInt(Rn)/100),typeof Rn=="number"&&Pn("/OpenAction [3 0 R /XYZ null null "+gn(Rn)+"]")}switch(yi||(yi="continuous"),yi){case"continuous":Pn("/PageLayout /OneColumn");break;case"single":Pn("/PageLayout /SinglePage");break;case"two":case"twoleft":Pn("/PageLayout /TwoColumnLeft");break;case"tworight":Pn("/PageLayout /TwoColumnRight")}Qn&&Pn("/PageMode /"+Qn),$i.publish("putCatalog"),Pn(">>"),Pn("endobj")},ih=Ve.__private__.putTrailer=function(){Pn("trailer"),Pn("<<"),Pn("/Size "+(yn+1)),Pn("/Root "+yn+" 0 R"),Pn("/Info "+(yn-1)+" 0 R"),ke!==null&&Pn("/Encrypt "+ss.oid+" 0 R"),Pn("/ID [ <"+hn+"> <"+hn+"> ]"),Pn(">>")},uc=Ve.__private__.putHeader=function(){Pn("%PDF-"+Oe),Pn("%")},cc=Ve.__private__.putXRef=function(){var nn="0000000000";Pn("xref"),Pn("0 "+(yn+1)),Pn("0000000000 65535 f ");for(var Nn=1;Nn<=yn;Nn++)typeof _n[Nn]=="function"?Pn((nn+_n[Nn]()).slice(-10)+" 00000 n "):_n[Nn]!==void 0?Pn((nn+_n[Nn]).slice(-10)+" 00000 n "):Pn("0000000000 00000 n ")},za=Ve.__private__.buildDocument=function(){ii(),Wn(wn),$i.publish("buildDocument"),uc(),Fr(),Xs(),ba(),ke!==null&&nh(),oc(),eo();var nn=kn;return cc(),ih(),Pn("startxref"),Pn(""+nn),Pn("%%EOF"),Wn(Ln[We]),wn.join(`
`)},ql=Ve.__private__.getBlob=function(nn){return new Blob([mn(nn)],{type:"application/pdf"})},Hl=Ve.output=Ve.__private__.output=xa((function(nn,Nn){switch(typeof(Nn=Nn||{})=="string"?Nn={filename:Nn}:Nn.filename=Nn.filename||"generated.pdf",nn){case void 0:return za();case"save":Ve.save(Nn.filename);break;case"arraybuffer":return mn(za());case"blob":return ql(za());case"bloburi":case"bloburl":if(n.URL!==void 0&&typeof n.URL.createObjectURL=="function")return n.URL&&n.URL.createObjectURL(ql(za()))||void 0;a.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Xn="",li=za();try{Xn=h(li)}catch{Xn=h(unescape(encodeURIComponent(li)))}return"data:application/pdf;filename="+Nn.filename+";base64,"+Xn;case"pdfobjectnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var Ei="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Fi=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Nn.pdfObjectUrl&&(Ei=Nn.pdfObjectUrl,Fi="");var nr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ei+'"'+Fi+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Nn)+");<\/script></body></html>",ur=n.open();return ur!==null&&ur.document.write(nr),ur}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var mr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Nn.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Nn.filename+'" width="500px" height="400px" /></body></html>',Er=n.open();if(Er!==null){Er.document.write(mr);var Ar=this;Er.document.documentElement.querySelector("#pdfViewer").onload=function(){Er.document.title=Nn.filename,Er.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ar.output("bloburl"))}}return Er}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(n)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Ir='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Nn)+'"></iframe></body></html>',as=n.open();if(as!==null&&(as.document.write(Ir),as.document.title=Nn.filename),as||typeof safari>"u")return as;break;case"datauri":case"dataurl":return n.document.location.href=this.output("datauristring",Nn);default:return null}})),cl=function(nn){return Array.isArray(tr)===!0&&tr.indexOf(nn)>-1};switch(xe){case"pt":ui=1;break;case"mm":ui=72/25.4;break;case"cm":ui=72/2.54;break;case"in":ui=72;break;case"px":ui=cl("px_scaling")==1?.75:96/72;break;case"pc":case"em":ui=12;break;case"ex":ui=6;break;default:if(typeof xe!="number")throw new Error("Invalid unit: "+xe);ui=xe}var ss=null;xn(),bn();var Nu=function(nn){return ke!==null?ss.encryptor(nn,0):function(Nn){return Nn}},Gl=Ve.__private__.getPageInfo=Ve.getPageInfo=function(nn){if(isNaN(nn)||nn%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ki[nn].objId,pageNumber:nn,pageContext:ki[nn]}},br=Ve.__private__.getPageInfoByObjId=function(nn){if(isNaN(nn)||nn%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Nn in ki)if(ki[Nn].objId===nn)break;return Gl(Nn)},Do=Ve.__private__.getCurrentPageInfo=Ve.getCurrentPageInfo=function(){return{objId:ki[We].objId,pageNumber:We,pageContext:ki[We]}};Ve.addPage=function(){return Ul.apply(this,arguments),this},Ve.setPage=function(){return zl.apply(this,arguments),Wn.call(this,Ln[We]),this},Ve.insertPage=function(nn){return this.addPage(),this.movePage(We,nn),this},Ve.movePage=function(nn,Nn){var Xn,li;if(nn>Nn){Xn=Ln[nn],li=ki[nn];for(var Ei=nn;Ei>Nn;Ei--)Ln[Ei]=Ln[Ei-1],ki[Ei]=ki[Ei-1];Ln[Nn]=Xn,ki[Nn]=li,this.setPage(Nn)}else if(nn<Nn){Xn=Ln[nn],li=ki[nn];for(var Fi=nn;Fi<Nn;Fi++)Ln[Fi]=Ln[Fi+1],ki[Fi]=ki[Fi+1];Ln[Nn]=Xn,ki[Nn]=li,this.setPage(Nn)}return this},Ve.deletePage=function(){return ac.apply(this,arguments),this},Ve.__private__.text=Ve.text=function(nn,Nn,Xn,li,Ei){var Fi,nr,ur,mr,Er,Ar,Ir,as,os,ms=(li=li||{}).scope||this;if(typeof nn=="number"&&typeof Nn=="number"&&(typeof Xn=="string"||Array.isArray(Xn))){var Vs=Xn;Xn=Nn,Nn=nn,nn=Vs}if(arguments[3]instanceof ei?(Ke("The transform parameter of text() with a Matrix value"),os=Ei):(ur=arguments[4],mr=arguments[5],_typeof$2(Ir=arguments[3])==="object"&&Ir!==null||(typeof ur=="string"&&(mr=ur,ur=null),typeof Ir=="string"&&(mr=Ir,Ir=null),typeof Ir=="number"&&(ur=Ir,Ir=null),li={flags:Ir,angle:ur,align:mr})),isNaN(Nn)||isNaN(Xn)||nn==null)throw new Error("Invalid arguments passed to jsPDF.text");if(nn.length===0)return ms;var Ps="",Hs=!1,ha=typeof li.lineHeightFactor=="number"?li.lineHeightFactor:Uo,xo=ms.internal.scaleFactor;function gc(Jr){return Jr=Jr.split("	").join(Array(li.TabLen||9).join(" ")),aa(Jr,Ir)}function Xl(Jr){for(var Xr,ys=Jr.concat(),Ss=[],so=ys.length;so--;)typeof(Xr=ys.shift())=="string"?Ss.push(Xr):Array.isArray(Jr)&&(Xr.length===1||Xr[1]===void 0&&Xr[2]===void 0)?Ss.push(Xr[0]):Ss.push([Xr[0],Xr[1],Xr[2]]);return Ss}function Zl(Jr,Xr){var ys;if(typeof Jr=="string")ys=Xr(Jr)[0];else if(Array.isArray(Jr)){for(var Ss,so,ao=Jr.concat(),$s=[],bl=ao.length;bl--;)typeof(Ss=ao.shift())=="string"?$s.push(Xr(Ss)[0]):Array.isArray(Ss)&&typeof Ss[0]=="string"&&(so=Xr(Ss[0],Ss[1],Ss[2]),$s.push([so[0],so[1],so[2]]));ys=$s}return ys}var no=!1,_o=!0;if(typeof nn=="string")no=!0;else if(Array.isArray(nn)){var Uu=nn.concat();nr=[];for(var Eo,Zs=Uu.length;Zs--;)(typeof(Eo=Uu.shift())!="string"||Array.isArray(Eo)&&typeof Eo[0]!="string")&&(_o=!1);no=_o}if(no===!1)throw new Error('Type of text must be string or Array. "'+nn+'" is not recognized.');typeof nn=="string"&&(nn=nn.match(/[\r?\n]/)?nn.split(/\r\n|\r|\n/g):[nn]);var vl=jn/ms.internal.scaleFactor,Go=vl*(ha-1);switch(li.baseline){case"bottom":Xn-=Go;break;case"top":Xn+=vl-Go;break;case"hanging":Xn+=vl-2*Go;break;case"middle":Xn+=vl/2-Go}if((Ar=li.maxWidth||0)>0&&(typeof nn=="string"?nn=ms.splitTextToSize(nn,Ar):Object.prototype.toString.call(nn)==="[object Array]"&&(nn=nn.reduce((function(Jr,Xr){return Jr.concat(ms.splitTextToSize(Xr,Ar))}),[]))),Fi={text:nn,x:Nn,y:Xn,options:li,mutex:{pdfEscape:aa,activeFontKey:Gi,fonts:fi,activeFontSize:jn}},$i.publish("preProcessText",Fi),nn=Fi.text,ur=(li=Fi.options).angle,!(os instanceof ei)&&ur&&typeof ur=="number"){ur*=Math.PI/180,li.rotationDirection===0&&(ur=-ur),Qe===Ye.ADVANCED&&(ur=-ur);var $o=Math.cos(ur),Ql=Math.sin(ur);os=new ei($o,Ql,-Ql,$o,0,0)}else ur&&ur instanceof ei&&(os=ur);Qe!==Ye.ADVANCED||os||(os=Ri),(Er=li.charSpace||Yl)!==void 0&&(Ps+=qe(en(Er))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(as=li.horizontalScale)!==void 0&&(Ps+=qe(100*as)+` Tz
`),li.lang;var Qs=-1,mc=li.renderingMode!==void 0?li.renderingMode:li.stroke,zu=ms.internal.getCurrentPageInfo().pageContext;switch(mc){case 0:case!1:case"fill":Qs=0;break;case 1:case!0:case"stroke":Qs=1;break;case 2:case"fillThenStroke":Qs=2;break;case 3:case"invisible":Qs=3;break;case 4:case"fillAndAddForClipping":Qs=4;break;case 5:case"strokeAndAddPathForClipping":Qs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Qs=6;break;case 7:case"addToPathForClipping":Qs=7}var yc=zu.usedRenderingMode!==void 0?zu.usedRenderingMode:-1;Qs!==-1?Ps+=Qs+` Tr
`:yc!==-1&&(Ps+=`0 Tr
`),Qs!==-1&&(zu.usedRenderingMode=Qs),mr=li.align||"left";var $a,qu=jn*ha,ah=ms.internal.pageSize.getWidth(),ea=fi[Gi];Er=li.charSpace||Yl,Ar=li.maxWidth||0,Ir=Object.assign({autoencode:!0,noBOM:!0},li.flags);var Aa=[];if(Object.prototype.toString.call(nn)==="[object Array]"){var da;nr=Xl(nn),mr!=="left"&&($a=nr.map((function(Jr){return ms.getStringUnitWidth(Jr,{font:ea,charSpace:Er,fontSize:jn,doKerning:!1})*jn/xo})));var Pa,So=0;if(mr==="right"){Nn-=$a[0],nn=[],Zs=nr.length;for(var Wa=0;Wa<Zs;Wa++)Wa===0?(Pa=Ha(Nn),da=wa(Xn)):(Pa=en(So-$a[Wa]),da=-qu),nn.push([nr[Wa],Pa,da]),So=$a[Wa]}else if(mr==="center"){Nn-=$a[0]/2,nn=[],Zs=nr.length;for(var Ka=0;Ka<Zs;Ka++)Ka===0?(Pa=Ha(Nn),da=wa(Xn)):(Pa=en((So-$a[Ka])/2),da=-qu),nn.push([nr[Ka],Pa,da]),So=$a[Ka]}else if(mr==="left"){nn=[],Zs=nr.length;for(var eu=0;eu<Zs;eu++)nn.push(nr[eu])}else{if(mr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');nn=[],Zs=nr.length,Ar=Ar!==0?Ar:ah;for(var Gs=0;Gs<Zs;Gs++)da=Gs===0?wa(Xn):-qu,Pa=Gs===0?Ha(Nn):0,Gs<Zs-1?Aa.push(qe(en((Ar-$a[Gs])/(nr[Gs].split(" ").length-1)))):Aa.push(0),nn.push([nr[Gs],Pa,da])}}var Wo=typeof li.R2L=="boolean"?li.R2L:Jn;Wo===!0&&(nn=Zl(nn,(function(Jr,Xr,ys){return[Jr.split("").reverse().join(""),Xr,ys]}))),Fi={text:nn,x:Nn,y:Xn,options:li,mutex:{pdfEscape:aa,activeFontKey:Gi,fonts:fi,activeFontSize:jn}},$i.publish("postProcessText",Fi),nn=Fi.text,Hs=Fi.mutex.isHex||!1;var wo=fi[Gi].encoding;wo!=="WinAnsiEncoding"&&wo!=="StandardEncoding"||(nn=Zl(nn,(function(Jr,Xr,ys){return[gc(Jr),Xr,ys]}))),nr=Xl(nn),nn=[];for(var io,Ta,ta,Ca=0,Ko=1,Yo=Array.isArray(nr[0])?Ko:Ca,la="",tu=function(Jr,Xr,ys){var Ss="";return ys instanceof ei?(ys=typeof li.angle=="number"?si(ys,new ei(1,0,0,1,Jr,Xr)):si(new ei(1,0,0,1,Jr,Xr),ys),Qe===Ye.ADVANCED&&(ys=si(new ei(1,0,0,-1,0,0),ys)),Ss=ys.join(" ")+` Tm
`):Ss=qe(Jr)+" "+qe(Xr)+` Td
`,Ss},fa=0;fa<nr.length;fa++){switch(la="",Yo){case Ko:ta=(Hs?"<":"(")+nr[fa][0]+(Hs?">":")"),io=parseFloat(nr[fa][1]),Ta=parseFloat(nr[fa][2]);break;case Ca:ta=(Hs?"<":"(")+nr[fa]+(Hs?">":")"),io=Ha(Nn),Ta=wa(Xn)}Aa!==void 0&&Aa[fa]!==void 0&&(la=Aa[fa]+` Tw
`),fa===0?nn.push(la+tu(io,Ta,os)+ta):Yo===Ca?nn.push(la+ta):Yo===Ko&&nn.push(la+tu(io,Ta,os)+ta)}nn=Yo===Ca?nn.join(` Tj
T* `):nn.join(` Tj
`),nn+=` Tj
`;var ro=`BT
/`;return ro+=Gi+" "+jn+` Tf
`,ro+=qe(jn*ha)+` TL
`,ro+=gl+`
`,ro+=Ps,ro+=nn,Pn(ro+="ET"),Fe[Gi]=!0,ms};var hc=Ve.__private__.clip=Ve.clip=function(nn){return Pn(nn==="evenodd"?"W*":"W"),this};Ve.clipEvenOdd=function(){return hc("evenodd")},Ve.__private__.discardPath=Ve.discardPath=function(){return Pn("n"),this};var Ea=Ve.__private__.isValidStyle=function(nn){var Nn=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(nn)!==-1&&(Nn=!0),Nn};Ve.__private__.setDefaultPathOperation=Ve.setDefaultPathOperation=function(nn){return Ea(nn)&&(Be=nn),this};var ku=Ve.__private__.getStyle=Ve.getStyle=function(nn){var Nn=Be;switch(nn){case"D":case"S":Nn="S";break;case"F":Nn="f";break;case"FD":case"DF":Nn="B";break;case"f":case"f*":case"B":case"B*":Nn=nn}return Nn},Fo=Ve.close=function(){return Pn("h"),this};Ve.stroke=function(){return Pn("S"),this},Ve.fill=function(nn){return oa("f",nn),this},Ve.fillEvenOdd=function(nn){return oa("f*",nn),this},Ve.fillStroke=function(nn){return oa("B",nn),this},Ve.fillStrokeEvenOdd=function(nn){return oa("B*",nn),this};var oa=function(nn,Nn){_typeof$2(Nn)==="object"?to(Nn,nn):Pn(nn)},hl=function(nn){nn===null||Qe===Ye.ADVANCED&&nn===void 0||(nn=ku(nn),Pn(nn))};function dl(nn,Nn,Xn,li,Ei){var Fi=new M(Nn||this.boundingBox,Xn||this.xStep,li||this.yStep,this.gState,Ei||this.matrix);Fi.stream=this.stream;var nr=nn+"$$"+this.cloneIndex+++"$$";return Bi(nr,Fi),Fi}var to=function(nn,Nn){var Xn=hr[nn.key],li=ji[Xn];if(li instanceof B)Pn("q"),Pn(Iu(Nn)),li.gState&&Ve.setGState(li.gState),Pn(nn.matrix.toString()+" cm"),Pn("/"+Xn+" sh"),Pn("Q");else if(li instanceof M){var Ei=new ei(1,0,0,-1,0,Ho());nn.matrix&&(Ei=Ei.multiply(nn.matrix||Ri),Xn=dl.call(li,nn.key,nn.boundingBox,nn.xStep,nn.yStep,Ei).id),Pn("q"),Pn("/Pattern cs"),Pn("/"+Xn+" scn"),li.gState&&Ve.setGState(li.gState),Pn(Nn),Pn("Q")}},Iu=function(nn){switch(nn){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Oo=Ve.moveTo=function(nn,Nn){return Pn(qe(en(nn))+" "+qe(Sn(Nn))+" m"),this},jo=Ve.lineTo=function(nn,Nn){return Pn(qe(en(nn))+" "+qe(Sn(Nn))+" l"),this},qa=Ve.curveTo=function(nn,Nn,Xn,li,Ei,Fi){return Pn([qe(en(nn)),qe(Sn(Nn)),qe(en(Xn)),qe(Sn(li)),qe(en(Ei)),qe(Sn(Fi)),"c"].join(" ")),this};Ve.__private__.line=Ve.line=function(nn,Nn,Xn,li,Ei){if(isNaN(nn)||isNaN(Nn)||isNaN(Xn)||isNaN(li)||!Ea(Ei))throw new Error("Invalid arguments passed to jsPDF.line");return Qe===Ye.COMPAT?this.lines([[Xn-nn,li-Nn]],nn,Nn,[1,1],Ei||"S"):this.lines([[Xn-nn,li-Nn]],nn,Nn,[1,1]).stroke()},Ve.__private__.lines=Ve.lines=function(nn,Nn,Xn,li,Ei,Fi){var nr,ur,mr,Er,Ar,Ir,as,os,ms,Vs,Ps,Hs;if(typeof nn=="number"&&(Hs=Xn,Xn=Nn,Nn=nn,nn=Hs),li=li||[1,1],Fi=Fi||!1,isNaN(Nn)||isNaN(Xn)||!Array.isArray(nn)||!Array.isArray(li)||!Ea(Ei)||typeof Fi!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Oo(Nn,Xn),nr=li[0],ur=li[1],Er=nn.length,Vs=Nn,Ps=Xn,mr=0;mr<Er;mr++)(Ar=nn[mr]).length===2?(Vs=Ar[0]*nr+Vs,Ps=Ar[1]*ur+Ps,jo(Vs,Ps)):(Ir=Ar[0]*nr+Vs,as=Ar[1]*ur+Ps,os=Ar[2]*nr+Vs,ms=Ar[3]*ur+Ps,Vs=Ar[4]*nr+Vs,Ps=Ar[5]*ur+Ps,qa(Ir,as,os,ms,Vs,Ps));return Fi&&Fo(),hl(Ei),this},Ve.path=function(nn){for(var Nn=0;Nn<nn.length;Nn++){var Xn=nn[Nn],li=Xn.c;switch(Xn.op){case"m":Oo(li[0],li[1]);break;case"l":jo(li[0],li[1]);break;case"c":qa.apply(this,li);break;case"h":Fo()}}return this},Ve.__private__.rect=Ve.rect=function(nn,Nn,Xn,li,Ei){if(isNaN(nn)||isNaN(Nn)||isNaN(Xn)||isNaN(li)||!Ea(Ei))throw new Error("Invalid arguments passed to jsPDF.rect");return Qe===Ye.COMPAT&&(li=-li),Pn([qe(en(nn)),qe(Sn(Nn)),qe(en(Xn)),qe(en(li)),"re"].join(" ")),hl(Ei),this},Ve.__private__.triangle=Ve.triangle=function(nn,Nn,Xn,li,Ei,Fi,nr){if(isNaN(nn)||isNaN(Nn)||isNaN(Xn)||isNaN(li)||isNaN(Ei)||isNaN(Fi)||!Ea(nr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Xn-nn,li-Nn],[Ei-Xn,Fi-li],[nn-Ei,Nn-Fi]],nn,Nn,[1,1],nr,!0),this},Ve.__private__.roundedRect=Ve.roundedRect=function(nn,Nn,Xn,li,Ei,Fi,nr){if(isNaN(nn)||isNaN(Nn)||isNaN(Xn)||isNaN(li)||isNaN(Ei)||isNaN(Fi)||!Ea(nr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ur=4/3*(Math.SQRT2-1);return Ei=Math.min(Ei,.5*Xn),Fi=Math.min(Fi,.5*li),this.lines([[Xn-2*Ei,0],[Ei*ur,0,Ei,Fi-Fi*ur,Ei,Fi],[0,li-2*Fi],[0,Fi*ur,-Ei*ur,Fi,-Ei,Fi],[2*Ei-Xn,0],[-Ei*ur,0,-Ei,-Fi*ur,-Ei,-Fi],[0,2*Fi-li],[0,-Fi*ur,Ei*ur,-Fi,Ei,-Fi]],nn+Ei,Nn,[1,1],nr,!0),this},Ve.__private__.ellipse=Ve.ellipse=function(nn,Nn,Xn,li,Ei){if(isNaN(nn)||isNaN(Nn)||isNaN(Xn)||isNaN(li)||!Ea(Ei))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Fi=4/3*(Math.SQRT2-1)*Xn,nr=4/3*(Math.SQRT2-1)*li;return Oo(nn+Xn,Nn),qa(nn+Xn,Nn-nr,nn+Fi,Nn-li,nn,Nn-li),qa(nn-Fi,Nn-li,nn-Xn,Nn-nr,nn-Xn,Nn),qa(nn-Xn,Nn+nr,nn-Fi,Nn+li,nn,Nn+li),qa(nn+Fi,Nn+li,nn+Xn,Nn+nr,nn+Xn,Nn),hl(Ei),this},Ve.__private__.circle=Ve.circle=function(nn,Nn,Xn,li){if(isNaN(nn)||isNaN(Nn)||isNaN(Xn)||!Ea(li))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(nn,Nn,Xn,Xn,li)},Ve.setFont=function(nn,Nn,Xn){return Xn&&(Nn=an(Nn,Xn)),Gi=Bu(nn,Nn,{disableWarning:!1}),this};var $l=Ve.__private__.getFont=Ve.getFont=function(){return fi[Bu.apply(Ve,arguments)]};Ve.__private__.getFontList=Ve.getFontList=function(){var nn,Nn,Xn={};for(nn in ni)if(ni.hasOwnProperty(nn))for(Nn in Xn[nn]=[],ni[nn])ni[nn].hasOwnProperty(Nn)&&Xn[nn].push(Nn);return Xn},Ve.addFont=function(nn,Nn,Xn,li,Ei){var Fi=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Fi.indexOf(arguments[3])!==-1?Ei=arguments[3]:arguments[3]&&Fi.indexOf(arguments[3])==-1&&(Xn=an(Xn,li)),Ei=Ei||"Identity-H",Cu.call(this,nn,Nn,Xn,Ei)};var Uo,Cs=t.lineWidth||.200025,Sa=Ve.__private__.getLineWidth=Ve.getLineWidth=function(){return Cs},pl=Ve.__private__.setLineWidth=Ve.setLineWidth=function(nn){return Cs=nn,Pn(qe(en(nn))+" w"),this};Ve.__private__.setLineDash=E.API.setLineDash=E.API.setLineDashPattern=function(nn,Nn){if(nn=nn||[],Nn=Nn||0,isNaN(Nn)||!Array.isArray(nn))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return nn=nn.map((function(Xn){return qe(en(Xn))})).join(" "),Nn=qe(en(Nn)),Pn("["+nn+"] "+Nn+" d"),this};var zo=Ve.__private__.getLineHeight=Ve.getLineHeight=function(){return jn*Uo};Ve.__private__.getLineHeight=Ve.getLineHeight=function(){return jn*Uo};var dc=Ve.__private__.setLineHeightFactor=Ve.setLineHeightFactor=function(nn){return typeof(nn=nn||1.15)=="number"&&(Uo=nn),this},Wl=Ve.__private__.getLineHeightFactor=Ve.getLineHeightFactor=function(){return Uo};dc(t.lineHeight);var Ha=Ve.__private__.getHorizontalCoordinate=function(nn){return en(nn)},wa=Ve.__private__.getVerticalCoordinate=function(nn){return Qe===Ye.ADVANCED?nn:ki[We].mediaBox.topRightY-ki[We].mediaBox.bottomLeftY-en(nn)},Kl=Ve.__private__.getHorizontalCoordinateString=Ve.getHorizontalCoordinateString=function(nn){return qe(Ha(nn))},bo=Ve.__private__.getVerticalCoordinateString=Ve.getVerticalCoordinateString=function(nn){return qe(wa(nn))},Ga=t.strokeColor||"0 G";Ve.__private__.getStrokeColor=Ve.getDrawColor=function(){return rr(Ga)},Ve.__private__.setStrokeColor=Ve.setDrawColor=function(nn,Nn,Xn,li){return Ga=cr({ch1:nn,ch2:Nn,ch3:Xn,ch4:li,pdfColorType:"draw",precision:2}),Pn(Ga),this};var Mu=t.fillColor||"0 g";Ve.__private__.getFillColor=Ve.getFillColor=function(){return rr(Mu)},Ve.__private__.setFillColor=Ve.setFillColor=function(nn,Nn,Xn,li){return Mu=cr({ch1:nn,ch2:Nn,ch3:Xn,ch4:li,pdfColorType:"fill",precision:2}),Pn(Mu),this};var gl=t.textColor||"0 g",Lu=Ve.__private__.getTextColor=Ve.getTextColor=function(){return rr(gl)};Ve.__private__.setTextColor=Ve.setTextColor=function(nn,Nn,Xn,li){return gl=cr({ch1:nn,ch2:Nn,ch3:Xn,ch4:li,pdfColorType:"text",precision:3}),this};var Yl=t.charSpace,rh=Ve.__private__.getCharSpace=Ve.getCharSpace=function(){return parseFloat(Yl||0)};Ve.__private__.setCharSpace=Ve.setCharSpace=function(nn){if(isNaN(nn))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Yl=nn,this};var Vu=0;Ve.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},Ve.__private__.setLineCap=Ve.setLineCap=function(nn){var Nn=Ve.CapJoinStyles[nn];if(Nn===void 0)throw new Error("Line cap style of '"+nn+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Vu=Nn,Pn(Nn+" J"),this};var Du=0;Ve.__private__.setLineJoin=Ve.setLineJoin=function(nn){var Nn=Ve.CapJoinStyles[nn];if(Nn===void 0)throw new Error("Line join style of '"+nn+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Du=Nn,Pn(Nn+" j"),this},Ve.__private__.setLineMiterLimit=Ve.__private__.setMiterLimit=Ve.setLineMiterLimit=Ve.setMiterLimit=function(nn){if(nn=nn||0,isNaN(nn))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Pn(qe(en(nn))+" M"),this},Ve.GState=j,Ve.setGState=function(nn){(nn=typeof nn=="string"?ar[Fn[nn]]:fc(null,nn)).equals(Si)||(Pn("/"+nn.id+" gs"),Si=nn)};var fc=function(nn,Nn){if(!nn||!Fn[nn]){var Xn=!1;for(var li in ar)if(ar.hasOwnProperty(li)&&ar[li].equals(Nn)){Xn=!0;break}if(Xn)Nn=ar[li];else{var Ei="GS"+(Object.keys(ar).length+1).toString(10);ar[Ei]=Nn,Nn.id=Ei}return nn&&(Fn[nn]=Nn.id),$i.publish("addGState",Nn),Nn}};Ve.addGState=function(nn,Nn){return fc(nn,Nn),this},Ve.saveGraphicsState=function(){return Pn("q"),pi.push({key:Gi,size:jn,color:gl}),this},Ve.restoreGraphicsState=function(){Pn("Q");var nn=pi.pop();return Gi=nn.key,jn=nn.size,gl=nn.color,Si=null,this},Ve.setCurrentTransformationMatrix=function(nn){return Pn(nn.toString()+" cm"),this},Ve.comment=function(nn){return Pn("#"+nn),this};var ml=function(nn,Nn){var Xn=nn||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Xn},set:function(Fi){isNaN(Fi)||(Xn=parseFloat(Fi))}});var li=Nn||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return li},set:function(Fi){isNaN(Fi)||(li=parseFloat(Fi))}});var Ei="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ei},set:function(Fi){Ei=Fi.toString()}}),this},Fu=function(nn,Nn,Xn,li){ml.call(this,nn,Nn),this.type="rect";var Ei=Xn||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ei},set:function(nr){isNaN(nr)||(Ei=parseFloat(nr))}});var Fi=li||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Fi},set:function(nr){isNaN(nr)||(Fi=parseFloat(nr))}}),this},Ou=function(){this.page=Mi,this.currentPage=We,this.pages=Ln.slice(0),this.pagesContext=ki.slice(0),this.x=Vi,this.y=Di,this.matrix=Xi,this.width=yl(We),this.height=Ho(We),this.outputDestination=Yn,this.id="",this.objectNumber=-1};Ou.prototype.restore=function(){Mi=this.page,We=this.currentPage,ki=this.pagesContext,Ln=this.pages,Vi=this.x,Di=this.y,Xi=this.matrix,ju(We,this.width),Jl(We,this.height),Yn=this.outputDestination};var pc=function(nn,Nn,Xn,li,Ei){ti.push(new Ou),Mi=We=0,Ln=[],Vi=nn,Di=Nn,Xi=Ei,qs([Xn,li])},sh=function(nn){if(Un[nn])ti.pop().restore();else{var Nn=new Ou,Xn="Xo"+(Object.keys(Hn).length+1).toString(10);Nn.id=Xn,Un[nn]=Xn,Hn[Xn]=Nn,$i.publish("addFormObject",Nn),ti.pop().restore()}};for(var qo in Ve.beginFormObject=function(nn,Nn,Xn,li,Ei){return pc(nn,Nn,Xn,li,Ei),this},Ve.endFormObject=function(nn){return sh(nn),this},Ve.doFormObject=function(nn,Nn){var Xn=Hn[Un[nn]];return Pn("q"),Pn(Nn.toString()+" cm"),Pn("/"+Xn.id+" Do"),Pn("Q"),this},Ve.getFormObject=function(nn){var Nn=Hn[Un[nn]];return{x:Nn.x,y:Nn.y,width:Nn.width,height:Nn.height,matrix:Nn.matrix}},Ve.save=function(nn,Nn){return nn=nn||"generated.pdf",(Nn=Nn||{}).returnPromise=Nn.returnPromise||!1,Nn.returnPromise===!1?(l(ql(za()),nn),typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),this):new Promise((function(Xn,li){try{var Ei=l(ql(za()),nn);typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),Xn(Ei)}catch(Fi){li(Fi.message)}}))},E.API)E.API.hasOwnProperty(qo)&&(qo==="events"&&E.API.events.length?(function(nn,Nn){var Xn,li,Ei;for(Ei=Nn.length-1;Ei!==-1;Ei--)Xn=Nn[Ei][0],li=Nn[Ei][1],nn.subscribe.apply(nn,[Xn].concat(typeof li=="function"?[li]:li))})($i,E.API.events):Ve[qo]=E.API[qo]);var yl=Ve.getPageWidth=function(nn){return(ki[nn=nn||We].mediaBox.topRightX-ki[nn].mediaBox.bottomLeftX)/ui},ju=Ve.setPageWidth=function(nn,Nn){ki[nn].mediaBox.topRightX=Nn*ui+ki[nn].mediaBox.bottomLeftX},Ho=Ve.getPageHeight=function(nn){return(ki[nn=nn||We].mediaBox.topRightY-ki[nn].mediaBox.bottomLeftY)/ui},Jl=Ve.setPageHeight=function(nn,Nn){ki[nn].mediaBox.topRightY=Nn*ui+ki[nn].mediaBox.bottomLeftY};return Ve.internal={pdfEscape:aa,getStyle:ku,getFont:$l,getFontSize:Dn,getCharSpace:rh,getTextColor:Lu,getLineHeight:zo,getLineHeightFactor:Wl,getLineWidth:Sa,write:Zn,getHorizontalCoordinate:Ha,getVerticalCoordinate:wa,getCoordinateString:Kl,getVerticalCoordinateString:bo,collections:{},newObject:er,newAdditionalObject:fr,newObjectDeferred:Zi,newObjectDeferredBegin:Yi,getFilters:vr,putStream:wr,events:$i,scaleFactor:ui,pageSize:{getWidth:function(){return yl(We)},setWidth:function(nn){ju(We,nn)},getHeight:function(){return Ho(We)},setHeight:function(nn){Jl(We,nn)}},encryptionOptions:ke,encryption:ss,getEncryptor:Nu,output:Hl,getNumberOfPages:Vo,pages:Ln,out:Pn,f2:gn,f3:He,getPageInfo:Gl,getPageInfoByObjId:br,getCurrentPageInfo:Do,getPDFVersion:$e,Point:ml,Rectangle:Fu,Matrix:ei,hasHotfix:cl},Object.defineProperty(Ve.internal.pageSize,"width",{get:function(){return yl(We)},set:function(nn){ju(We,nn)},enumerable:!0,configurable:!0}),Object.defineProperty(Ve.internal.pageSize,"height",{get:function(){return Ho(We)},set:function(nn){Jl(We,nn)},enumerable:!0,configurable:!0}),Ru.call(Ve,Cn),Gi="F1",Ul(Ee,r),$i.publish("initialized"),Ve}I.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},I.prototype.toHexString=function(t){return t.split("").map((function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)})).join("")},I.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},I.prototype.processOwnerPassword=function(t,e){return P(x(e).substr(0,5),t)},I.prototype.encryptor=function(t,e){var r=x(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(xe){return P(r,xe)}},j.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||_typeof$2(t)!==_typeof$2(this))return!1;var xe=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;xe++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&xe--;return xe===0},E.API={events:[]},E.version="2.5.1";var q=E.API,D=1,R=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},T=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},U=function(t){return t.toFixed(2)},z=function(t){return t.toFixed(5)};q.__acroform__={};var H=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},W=function(t){return t*D},V=function(t){var e=new ut,r=At.internal.getHeight(t)||0,xe=At.internal.getWidth(t)||0;return e.BBox=[0,0,Number(U(xe)),Number(U(r))],e},G=q.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},Y=q.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},J=q.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},X=q.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return J(t,e-1)},K=q.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return G(t,e-1)},Z=q.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Y(t,e-1)},$=q.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,xe=e.internal.getVerticalCoordinate,Ee=t[0],Ae=t[1],Pe=t[2],Re=t[3],Ce={};return Ce.lowerLeft_X=r(Ee)||0,Ce.lowerLeft_Y=xe(Ae+Re)||0,Ce.upperRight_X=r(Ee+Pe)||0,Ce.upperRight_Y=xe(Ae)||0,[Number(U(Ce.lowerLeft_X)),Number(U(Ce.lowerLeft_Y)),Number(U(Ce.upperRight_X)),Number(U(Ce.upperRight_Y))]},Q=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,xe=tt(t,r),Ee=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+Ee+" "+U(xe.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(xe.text),e.push("ET"),e.push("Q"),e.push("EMC");var Ae=V(t);return Ae.scope=t.scope,Ae.stream=e.join(`
`),Ae}},tt=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,xe={text:"",fontSize:""},Ee=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");Ee=t.multiline?Ee.map((function(He){return He.split(`
`)})):Ee.map((function(He){return[He]}));var Ae=r,Pe=At.internal.getHeight(t)||0;Pe=Pe<0?-Pe:Pe;var Re=At.internal.getWidth(t)||0;Re=Re<0?-Re:Re;var Ce=function(He,en,cn){if(He+1<Ee.length){var Sn=en+" "+Ee[He+1][0];return et(Sn,t,cn).width<=Re-4}return!1};Ae++;e:for(;Ae>0;){e="",Ae--;var Be,ke,Me=et("3",t,Ae).height,Fe=t.multiline?Pe-Ae:(Pe-Me)/2,Ve=Fe+=2,Oe=0,$e=0,Ge=0;if(Ae<=0){e=`(...) Tj
`,e+="% Width of Text: "+et(e,t,Ae=12).width+", FieldWidth:"+Re+`
`;break}for(var Ue="",Ye=0,Qe=0;Qe<Ee.length;Qe++)if(Ee.hasOwnProperty(Qe)){var rn=!1;if(Ee[Qe].length!==1&&Ge!==Ee[Qe].length-1){if((Me+2)*(Ye+2)+2>Pe)continue e;Ue+=Ee[Qe][Ge],rn=!0,$e=Qe,Qe--}else{Ue=(Ue+=Ee[Qe][Ge]+" ").substr(Ue.length-1)==" "?Ue.substr(0,Ue.length-1):Ue;var tn=parseInt(Qe),an=Ce(tn,Ue,Ae),qe=Qe>=Ee.length-1;if(an&&!qe){Ue+=" ",Ge=0;continue}if(an||qe){if(qe)$e=tn;else if(t.multiline&&(Me+2)*(Ye+2)+2>Pe)continue e}else{if(!t.multiline||(Me+2)*(Ye+2)+2>Pe)continue e;$e=tn}}for(var Ke="",sn=Oe;sn<=$e;sn++){var gn=Ee[sn];if(t.multiline){if(sn===$e){Ke+=gn[Ge]+" ",Ge=(Ge+1)%gn.length;continue}if(sn===Oe){Ke+=gn[gn.length-1]+" ";continue}}Ke+=gn[0]+" "}switch(Ke=Ke.substr(Ke.length-1)==" "?Ke.substr(0,Ke.length-1):Ke,ke=et(Ke,t,Ae).width,t.textAlign){case"right":Be=Re-ke-2;break;case"center":Be=(Re-ke)/2;break;case"left":default:Be=2}e+=U(Be)+" "+U(Ve)+` Td
`,e+="("+R(Ke)+`) Tj
`,e+=-U(Be)+` 0 Td
`,Ve=-(Ae+2),ke=0,Oe=rn?$e:$e+1,Ye++,Ue=""}break}return xe.text=e,xe.fontSize=Ae,xe},et=function(t,e,r){var xe=e.scope.internal.getFont(e.fontName,e.fontStyle),Ee=e.scope.getStringUnitWidth(t,{font:xe,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:xe,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:Ee}},rt={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},nt=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find((function(xe){return xe.type===r.type&&xe.object===r.object}))===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},it=function(t,e){for(var r in t)if(t.hasOwnProperty(r)){var xe=r,Ee=t[r];e.internal.newObjectDeferredBegin(Ee.objId,!0),_typeof$2(Ee)==="object"&&typeof Ee.putStream=="function"&&Ee.putStream(),delete t[xe]}},at=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(lt.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(rt)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");D=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new ht,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",(function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)})),t.internal.events.subscribe("buildDocument",(function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var xe=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var Ee in xe)if(xe.hasOwnProperty(Ee)){var Ae=xe[Ee];Ae.objId=void 0,Ae.hasAnnotation&&nt(Ae,r)}})(t)})),t.internal.events.subscribe("putCatalog",(function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)})),t.internal.events.subscribe("postPutPages",(function(r){(function(xe,Ee){var Ae=!xe;for(var Pe in xe||(Ee.internal.newObjectDeferredBegin(Ee.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),Ee.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),xe=xe||Ee.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(xe.hasOwnProperty(Pe)){var Re=xe[Pe],Ce=[],Be=Re.Rect;if(Re.Rect&&(Re.Rect=$(Re.Rect,Ee)),Ee.internal.newObjectDeferredBegin(Re.objId,!0),Re.DA=At.createDefaultAppearanceStream(Re),_typeof$2(Re)==="object"&&typeof Re.getKeyValueListForStream=="function"&&(Ce=Re.getKeyValueListForStream()),Re.Rect=Be,Re.hasAppearanceStream&&!Re.appearanceStreamContent){var ke=Q(Re);Ce.push({key:"AP",value:"<</N "+ke+">>"}),Ee.internal.acroformPlugin.xForms.push(ke)}if(Re.appearanceStreamContent){var Me="";for(var Fe in Re.appearanceStreamContent)if(Re.appearanceStreamContent.hasOwnProperty(Fe)){var Ve=Re.appearanceStreamContent[Fe];if(Me+="/"+Fe+" ",Me+="<<",Object.keys(Ve).length>=1||Array.isArray(Ve)){for(var Pe in Ve)if(Ve.hasOwnProperty(Pe)){var Oe=Ve[Pe];typeof Oe=="function"&&(Oe=Oe.call(Ee,Re)),Me+="/"+Pe+" "+Oe+" ",Ee.internal.acroformPlugin.xForms.indexOf(Oe)>=0||Ee.internal.acroformPlugin.xForms.push(Oe)}}else typeof(Oe=Ve)=="function"&&(Oe=Oe.call(Ee,Re)),Me+="/"+Pe+" "+Oe,Ee.internal.acroformPlugin.xForms.indexOf(Oe)>=0||Ee.internal.acroformPlugin.xForms.push(Oe);Me+=">>"}Ce.push({key:"AP",value:`<<
`+Me+">>"})}Ee.internal.putStream({additionalKeyValues:Ce,objectId:Re.objId}),Ee.internal.out("endobj")}Ae&&it(Ee.internal.acroformPlugin.xForms,Ee)})(r,t)})),t.internal.acroformPlugin.isInitialized=!0}},ot=q.__acroform__.arrayToPdfArray=function(t,e,r){var xe=function(Pe){return Pe};if(Array.isArray(t)){for(var Ee="[",Ae=0;Ae<t.length;Ae++)switch(Ae!==0&&(Ee+=" "),_typeof$2(t[Ae])){case"boolean":case"number":case"object":Ee+=t[Ae].toString();break;case"string":t[Ae].substr(0,1)!=="/"?(e!==void 0&&r&&(xe=r.internal.getEncryptor(e)),Ee+="("+R(xe(t[Ae].toString()))+")"):Ee+=t[Ae].toString()}return Ee+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},st=function(t,e,r){var xe=function(Ee){return Ee};return e!==void 0&&r&&(xe=r.internal.getEncryptor(e)),(t=t||"").toString(),t="("+R(xe(t))+")"},ct=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ct.prototype.toString=function(){return this.objId+" 0 R"},ct.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},ct.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter((function(Ae){return Ae!="content"&&Ae!="appearanceStreamContent"&&Ae!="scope"&&Ae!="objId"&&Ae.substring(0,1)!="_"}));for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var xe=e[r],Ee=this[xe];Ee&&(Array.isArray(Ee)?t.push({key:xe,value:ot(Ee,this.objId,this.scope)}):Ee instanceof ct?(Ee.scope=this.scope,t.push({key:xe,value:Ee.objId+" 0 R"})):typeof Ee!="function"&&t.push({key:xe,value:Ee}))}return t};var ut=function(){ct.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};H(ut,ct);var ht=function(){ct.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(xe){return xe};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+R(r(t))+")"}},set:function(r){t=r}})};H(ht,ct);var lt=function t(){ct.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(Ue){if(isNaN(Ue))throw new Error('Invalid value "'+Ue+'" for attribute F supplied.');e=Ue}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!X(e,3)},set:function(Ue){Ue?this.F=K(e,3):this.F=Z(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(Ue){if(isNaN(Ue))throw new Error('Invalid value "'+Ue+'" for attribute Ff supplied.');r=Ue}});var xe=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(xe.length!==0)return xe},set:function(Ue){xe=Ue!==void 0?Ue:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!xe||isNaN(xe[0])?0:xe[0]},set:function(Ue){xe[0]=Ue}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!xe||isNaN(xe[1])?0:xe[1]},set:function(Ue){xe[1]=Ue}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!xe||isNaN(xe[2])?0:xe[2]},set:function(Ue){xe[2]=Ue}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!xe||isNaN(xe[3])?0:xe[3]},set:function(Ue){xe[3]=Ue}});var Ee="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return Ee},set:function(Ue){switch(Ue){case"/Btn":case"/Tx":case"/Ch":case"/Sig":Ee=Ue;break;default:throw new Error('Invalid value "'+Ue+'" for attribute FT supplied.')}}});var Ae=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!Ae||Ae.length<1){if(this instanceof yt)return;Ae="FieldObject"+t.FieldNum++}var Ue=function(Ye){return Ye};return this.scope&&(Ue=this.scope.internal.getEncryptor(this.objId)),"("+R(Ue(Ae))+")"},set:function(Ue){Ae=Ue.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return Ae},set:function(Ue){Ae=Ue}});var Pe="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return Pe},set:function(Ue){Pe=Ue}});var Re="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return Re},set:function(Ue){Re=Ue}});var Ce=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return Ce},set:function(Ue){Ce=Ue}});var Be=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return Be===void 0?50/D:Be},set:function(Ue){Be=Ue}});var ke="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return ke},set:function(Ue){ke=Ue}});var Me="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!Me||this instanceof yt||this instanceof Nt))return st(Me,this.objId,this.scope)},set:function(Ue){Ue=Ue.toString(),Me=Ue}});var Fe=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(Fe)return this instanceof mt?Fe:st(Fe,this.objId,this.scope)},set:function(Ue){Ue=Ue.toString(),Fe=this instanceof mt?Ue:Ue.substr(0,1)==="("?T(Ue.substr(1,Ue.length-2)):T(Ue)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(Fe.substr(1,Fe.length-1)):Fe},set:function(Ue){Ue=Ue.toString(),Fe=this instanceof mt?"/"+Ue:Ue}});var Ve=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(Ve)return Ve},set:function(Ue){this.V=Ue}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(Ve)return this instanceof mt?Ve:st(Ve,this.objId,this.scope)},set:function(Ue){Ue=Ue.toString(),Ve=this instanceof mt?Ue:Ue.substr(0,1)==="("?T(Ue.substr(1,Ue.length-2)):T(Ue)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(Ve.substr(1,Ve.length-1)):Ve},set:function(Ue){Ue=Ue.toString(),Ve=this instanceof mt?"/"+Ue:Ue}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var Oe,$e=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return $e},set:function(Ue){Ue=!!Ue,$e=Ue}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(Oe)return Oe},set:function(Ue){Oe=Ue}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,1)},set:function(Ue){Ue?this.Ff=K(this.Ff,1):this.Ff=Z(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,2)},set:function(Ue){Ue?this.Ff=K(this.Ff,2):this.Ff=Z(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,3)},set:function(Ue){Ue?this.Ff=K(this.Ff,3):this.Ff=Z(this.Ff,3)}});var Ge=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(Ge!==null)return Ge},set:function(Ue){if([0,1,2].indexOf(Ue)===-1)throw new Error('Invalid value "'+Ue+'" for attribute Q supplied.');Ge=Ue}}),Object.defineProperty(this,"textAlign",{get:function(){var Ue;switch(Ge){case 0:default:Ue="left";break;case 1:Ue="center";break;case 2:Ue="right"}return Ue},configurable:!0,enumerable:!0,set:function(Ue){switch(Ue){case"right":case 2:Ge=2;break;case"center":case 1:Ge=1;break;case"left":case 0:default:Ge=0}}})};H(lt,ct);var ft=function(){lt.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ot(e,this.objId,this.scope)},set:function(r){var xe,Ee;Ee=[],typeof(xe=r)=="string"&&(Ee=(function(Ae,Pe,Re){Re||(Re=1);for(var Ce,Be=[];Ce=Pe.exec(Ae);)Be.push(Ce[Re]);return Be})(xe,/\((.*?)\)/g)),e=Ee}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,xe){for(xe=xe||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),xe!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,18)},set:function(r){r?this.Ff=K(this.Ff,18):this.Ff=Z(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=K(this.Ff,19):this.Ff=Z(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,20)},set:function(r){r?(this.Ff=K(this.Ff,20),e.sort()):this.Ff=Z(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,22)},set:function(r){r?this.Ff=K(this.Ff,22):this.Ff=Z(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,23)},set:function(r){r?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,27)},set:function(r){r?this.Ff=K(this.Ff,27):this.Ff=Z(this.Ff,27)}}),this.hasAppearanceStream=!1};H(ft,lt);var dt=function(){ft.call(this),this.fontName="helvetica",this.combo=!1};H(dt,ft);var pt=function(){dt.call(this),this.combo=!0};H(pt,dt);var gt=function(){pt.call(this),this.edit=!0};H(gt,pt);var mt=function(){lt.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,15)},set:function(r){r?this.Ff=K(this.Ff,15):this.Ff=Z(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,16)},set:function(r){r?this.Ff=K(this.Ff,16):this.Ff=Z(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,17)},set:function(r){r?this.Ff=K(this.Ff,17):this.Ff=Z(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,26)},set:function(r){r?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(Ae){return Ae};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var xe,Ee=[];for(xe in Ee.push("<<"),e)Ee.push("/"+xe+" ("+R(r(e[xe]))+")");return Ee.push(">>"),Ee.join(`
`)}},set:function(r){_typeof$2(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};H(mt,lt);var vt=function(){mt.call(this),this.pushButton=!0};H(vt,mt);var bt=function(){mt.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};H(bt,mt);var yt=function(){var t,e;lt.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(Ee){t=Ee}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(Ee){e=Ee}});var r,xe={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var Ee=function(Re){return Re};this.scope&&(Ee=this.scope.internal.getEncryptor(this.objId));var Ae,Pe=[];for(Ae in Pe.push("<<"),xe)Pe.push("/"+Ae+" ("+R(Ee(xe[Ae]))+")");return Pe.push(">>"),Pe.join(`
`)},set:function(Ee){_typeof$2(Ee)==="object"&&(xe=Ee)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return xe.CA||""},set:function(Ee){typeof Ee=="string"&&(xe.CA=Ee)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(Ee){r=Ee}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(Ee){r="/"+Ee}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=At.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};H(yt,lt),bt.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},bt.prototype.createOption=function(t){var e=new yt;return e.Parent=this,e.optionName=t,this.Kids.push(e),xt.call(this.scope,e),e};var wt=function(){mt.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=At.CheckBox.createAppearanceStream()};H(wt,mt);var Nt=function(){lt.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,13)},set:function(e){e?this.Ff=K(this.Ff,13):this.Ff=Z(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,21)},set:function(e){e?this.Ff=K(this.Ff,21):this.Ff=Z(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,23)},set:function(e){e?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,24)},set:function(e){e?this.Ff=K(this.Ff,24):this.Ff=Z(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,25)},set:function(e){e?this.Ff=K(this.Ff,25):this.Ff=Z(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,26)},set:function(e){e?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};H(Nt,lt);var Lt=function(){Nt.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,14)},set:function(t){t?this.Ff=K(this.Ff,14):this.Ff=Z(this.Ff,14)}}),this.password=!0};H(Lt,Nt);var At={CheckBox:{createAppearanceStream:function(){return{N:{On:At.CheckBox.YesNormal},D:{On:At.CheckBox.YesPushDown,Off:At.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=V(t);e.scope=t.scope;var r=[],xe=t.scope.internal.getFont(t.fontName,t.fontStyle).id,Ee=t.scope.__private__.encodeColorString(t.color),Ae=tt(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+U(At.internal.getWidth(t))+" "+U(At.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+xe+" "+U(Ae.fontSize)+" Tf "+Ee),r.push("BT"),r.push(Ae.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=V(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,xe=t.scope.__private__.encodeColorString(t.color),Ee=[],Ae=At.internal.getHeight(t),Pe=At.internal.getWidth(t),Re=tt(t,t.caption);return Ee.push("1 g"),Ee.push("0 0 "+U(Pe)+" "+U(Ae)+" re"),Ee.push("f"),Ee.push("q"),Ee.push("0 0 1 rg"),Ee.push("0 0 "+U(Pe-1)+" "+U(Ae-1)+" re"),Ee.push("W"),Ee.push("n"),Ee.push("0 g"),Ee.push("BT"),Ee.push("/"+r+" "+U(Re.fontSize)+" Tf "+xe),Ee.push(Re.text),Ee.push("ET"),Ee.push("Q"),e.stream=Ee.join(`
`),e},OffPushDown:function(t){var e=V(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+U(At.internal.getWidth(t))+" "+U(At.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:At.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=At.RadioButton.Circle.YesNormal,e.D[t]=At.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=V(t);e.scope=t.scope;var r=[],xe=At.internal.getWidth(t)<=At.internal.getHeight(t)?At.internal.getWidth(t)/4:At.internal.getHeight(t)/4;xe=Number((.9*xe).toFixed(5));var Ee=At.internal.Bezier_C,Ae=Number((xe*Ee).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+z(At.internal.getWidth(t)/2)+" "+z(At.internal.getHeight(t)/2)+" cm"),r.push(xe+" 0 m"),r.push(xe+" "+Ae+" "+Ae+" "+xe+" 0 "+xe+" c"),r.push("-"+Ae+" "+xe+" -"+xe+" "+Ae+" -"+xe+" 0 c"),r.push("-"+xe+" -"+Ae+" -"+Ae+" -"+xe+" 0 -"+xe+" c"),r.push(Ae+" -"+xe+" "+xe+" -"+Ae+" "+xe+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=V(t);e.scope=t.scope;var r=[],xe=At.internal.getWidth(t)<=At.internal.getHeight(t)?At.internal.getWidth(t)/4:At.internal.getHeight(t)/4;xe=Number((.9*xe).toFixed(5));var Ee=Number((2*xe).toFixed(5)),Ae=Number((Ee*At.internal.Bezier_C).toFixed(5)),Pe=Number((xe*At.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+z(At.internal.getWidth(t)/2)+" "+z(At.internal.getHeight(t)/2)+" cm"),r.push(Ee+" 0 m"),r.push(Ee+" "+Ae+" "+Ae+" "+Ee+" 0 "+Ee+" c"),r.push("-"+Ae+" "+Ee+" -"+Ee+" "+Ae+" -"+Ee+" 0 c"),r.push("-"+Ee+" -"+Ae+" -"+Ae+" -"+Ee+" 0 -"+Ee+" c"),r.push(Ae+" -"+Ee+" "+Ee+" -"+Ae+" "+Ee+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+z(At.internal.getWidth(t)/2)+" "+z(At.internal.getHeight(t)/2)+" cm"),r.push(xe+" 0 m"),r.push(xe+" "+Pe+" "+Pe+" "+xe+" 0 "+xe+" c"),r.push("-"+Pe+" "+xe+" -"+xe+" "+Pe+" -"+xe+" 0 c"),r.push("-"+xe+" -"+Pe+" -"+Pe+" -"+xe+" 0 -"+xe+" c"),r.push(Pe+" -"+xe+" "+xe+" -"+Pe+" "+xe+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=V(t);e.scope=t.scope;var r=[],xe=At.internal.getWidth(t)<=At.internal.getHeight(t)?At.internal.getWidth(t)/4:At.internal.getHeight(t)/4;xe=Number((.9*xe).toFixed(5));var Ee=Number((2*xe).toFixed(5)),Ae=Number((Ee*At.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+z(At.internal.getWidth(t)/2)+" "+z(At.internal.getHeight(t)/2)+" cm"),r.push(Ee+" 0 m"),r.push(Ee+" "+Ae+" "+Ae+" "+Ee+" 0 "+Ee+" c"),r.push("-"+Ae+" "+Ee+" -"+Ee+" "+Ae+" -"+Ee+" 0 c"),r.push("-"+Ee+" -"+Ae+" -"+Ae+" -"+Ee+" 0 -"+Ee+" c"),r.push(Ae+" -"+Ee+" "+Ee+" -"+Ae+" "+Ee+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:At.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=At.RadioButton.Cross.YesNormal,e.D[t]=At.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=V(t);e.scope=t.scope;var r=[],xe=At.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+U(At.internal.getWidth(t)-2)+" "+U(At.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(U(xe.x1.x)+" "+U(xe.x1.y)+" m"),r.push(U(xe.x2.x)+" "+U(xe.x2.y)+" l"),r.push(U(xe.x4.x)+" "+U(xe.x4.y)+" m"),r.push(U(xe.x3.x)+" "+U(xe.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=V(t);e.scope=t.scope;var r=At.internal.calculateCross(t),xe=[];return xe.push("0.749023 g"),xe.push("0 0 "+U(At.internal.getWidth(t))+" "+U(At.internal.getHeight(t))+" re"),xe.push("f"),xe.push("q"),xe.push("1 1 "+U(At.internal.getWidth(t)-2)+" "+U(At.internal.getHeight(t)-2)+" re"),xe.push("W"),xe.push("n"),xe.push(U(r.x1.x)+" "+U(r.x1.y)+" m"),xe.push(U(r.x2.x)+" "+U(r.x2.y)+" l"),xe.push(U(r.x4.x)+" "+U(r.x4.y)+" m"),xe.push(U(r.x3.x)+" "+U(r.x3.y)+" l"),xe.push("s"),xe.push("Q"),e.stream=xe.join(`
`),e},OffPushDown:function(t){var e=V(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+U(At.internal.getWidth(t))+" "+U(At.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};At.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=At.internal.getWidth(t),r=At.internal.getHeight(t),xe=Math.min(e,r);return{x1:{x:(e-xe)/2,y:(r-xe)/2+xe},x2:{x:(e-xe)/2+xe,y:(r-xe)/2},x3:{x:(e-xe)/2,y:(r-xe)/2},x4:{x:(e-xe)/2+xe,y:(r-xe)/2+xe}}}},At.internal.getWidth=function(t){var e=0;return _typeof$2(t)==="object"&&(e=W(t.Rect[2])),e},At.internal.getHeight=function(t){var e=0;return _typeof$2(t)==="object"&&(e=W(t.Rect[3])),e};var xt=q.addField=function(t){if(at(this,t),!(t instanceof lt))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};q.AcroFormChoiceField=ft,q.AcroFormListBox=dt,q.AcroFormComboBox=pt,q.AcroFormEditBox=gt,q.AcroFormButton=mt,q.AcroFormPushButton=vt,q.AcroFormRadioButton=bt,q.AcroFormCheckBox=wt,q.AcroFormTextField=Nt,q.AcroFormPasswordField=Lt,q.AcroFormAppearance=At,q.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At},E.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At};var St=E.AcroForm;function _t(t){return t.reduce((function(e,r,xe){return e[r]=xe,e}),{})}(function(t){t.__addimage__={};var e="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},xe=t.__addimage__.getImageFileTypeByImageData=function(He,en){var cn,Sn,Tn,hn,pn,bn=e;if((en=en||e)==="RGBA"||He.data!==void 0&&He.data instanceof Uint8ClampedArray&&"height"in He&&"width"in He)return"RGBA";if(an(He))for(pn in r)for(Tn=r[pn],cn=0;cn<Tn.length;cn+=1){for(hn=!0,Sn=0;Sn<Tn[cn].length;Sn+=1)if(Tn[cn][Sn]!==void 0&&Tn[cn][Sn]!==He[Sn]){hn=!1;break}if(hn===!0){bn=pn;break}}else for(pn in r)for(Tn=r[pn],cn=0;cn<Tn.length;cn+=1){for(hn=!0,Sn=0;Sn<Tn[cn].length;Sn+=1)if(Tn[cn][Sn]!==void 0&&Tn[cn][Sn]!==He.charCodeAt(Sn)){hn=!1;break}if(hn===!0){bn=pn;break}}return bn===e&&en!==e&&(bn=en),bn},Ee=function He(en){for(var cn=this.internal.write,Sn=this.internal.putStream,Tn=(0,this.internal.getFilters)();Tn.indexOf("FlateEncode")!==-1;)Tn.splice(Tn.indexOf("FlateEncode"),1);en.objectId=this.internal.newObject();var hn=[];if(hn.push({key:"Type",value:"/XObject"}),hn.push({key:"Subtype",value:"/Image"}),hn.push({key:"Width",value:en.width}),hn.push({key:"Height",value:en.height}),en.colorSpace===Ge.INDEXED?hn.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(en.palette.length/3-1)+" "+("sMask"in en&&en.sMask!==void 0?en.objectId+2:en.objectId+1)+" 0 R]"}):(hn.push({key:"ColorSpace",value:"/"+en.colorSpace}),en.colorSpace===Ge.DEVICE_CMYK&&hn.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),hn.push({key:"BitsPerComponent",value:en.bitsPerComponent}),"decodeParameters"in en&&en.decodeParameters!==void 0&&hn.push({key:"DecodeParms",value:"<<"+en.decodeParameters+">>"}),"transparency"in en&&Array.isArray(en.transparency)){for(var pn="",bn=0,fn=en.transparency.length;bn<fn;bn++)pn+=en.transparency[bn]+" "+en.transparency[bn]+" ";hn.push({key:"Mask",value:"["+pn+"]"})}en.sMask!==void 0&&hn.push({key:"SMask",value:en.objectId+1+" 0 R"});var An=en.filter!==void 0?["/"+en.filter]:void 0;if(Sn({data:en.data,additionalKeyValues:hn,alreadyAppliedFilters:An,objectId:en.objectId}),cn("endobj"),"sMask"in en&&en.sMask!==void 0){var xn="/Predictor "+en.predictor+" /Colors 1 /BitsPerComponent "+en.bitsPerComponent+" /Columns "+en.width,Je={width:en.width,height:en.height,colorSpace:"DeviceGray",bitsPerComponent:en.bitsPerComponent,decodeParameters:xn,data:en.sMask};"filter"in en&&(Je.filter=en.filter),He.call(this,Je)}if(en.colorSpace===Ge.INDEXED){var We=this.internal.newObject();Sn({data:Ke(new Uint8Array(en.palette)),objectId:We}),cn("endobj")}},Ae=function(){var He=this.internal.collections.addImage_images;for(var en in He)Ee.call(this,He[en])},Pe=function(){var He,en=this.internal.collections.addImage_images,cn=this.internal.write;for(var Sn in en)cn("/I"+(He=en[Sn]).index,He.objectId,"0","R")},Re=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",Ae),this.internal.events.subscribe("putXobjectDict",Pe))},Ce=function(){var He=this.internal.collections.addImage_images;return Re.call(this),He},Be=function(){return Object.keys(this.internal.collections.addImage_images).length},ke=function(He){return typeof t["process"+He.toUpperCase()]=="function"},Me=function(He){return _typeof$2(He)==="object"&&He.nodeType===1},Fe=function(He,en){if(He.nodeName==="IMG"&&He.hasAttribute("src")){var cn=""+He.getAttribute("src");if(cn.indexOf("data:image/")===0)return u(unescape(cn).split("base64,").pop());var Sn=t.loadFile(cn,!0);if(Sn!==void 0)return Sn}if(He.nodeName==="CANVAS"){if(He.width===0||He.height===0)throw new Error("Given canvas must have data. Canvas width: "+He.width+", height: "+He.height);var Tn;switch(en){case"PNG":Tn="image/png";break;case"WEBP":Tn="image/webp";break;case"JPEG":case"JPG":default:Tn="image/jpeg"}return u(He.toDataURL(Tn,1).split("base64,").pop())}},Ve=function(He){var en=this.internal.collections.addImage_images;if(en){for(var cn in en)if(He===en[cn].alias)return en[cn]}},Oe=function(He,en,cn){return He||en||(He=-96,en=-96),He<0&&(He=-1*cn.width*72/He/this.internal.scaleFactor),en<0&&(en=-1*cn.height*72/en/this.internal.scaleFactor),He===0&&(He=en*cn.width/cn.height),en===0&&(en=He*cn.height/cn.width),[He,en]},$e=function(He,en,cn,Sn,Tn,hn){var pn=Oe.call(this,cn,Sn,Tn),bn=this.internal.getCoordinateString,fn=this.internal.getVerticalCoordinateString,An=Ce.call(this);if(cn=pn[0],Sn=pn[1],An[Tn.index]=Tn,hn){hn*=Math.PI/180;var xn=Math.cos(hn),Je=Math.sin(hn),We=function(un){return un.toFixed(4)},Ze=[We(xn),We(Je),We(-1*Je),We(xn),0,0,"cm"]}this.internal.write("q"),hn?(this.internal.write([1,"0","0",1,bn(He),fn(en+Sn),"cm"].join(" ")),this.internal.write(Ze.join(" ")),this.internal.write([bn(cn),"0","0",bn(Sn),"0","0","cm"].join(" "))):this.internal.write([bn(cn),"0","0",bn(Sn),bn(He),fn(en+Sn),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Tn.index+" Do"),this.internal.write("Q")},Ge=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var Ue=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},Ye=t.__addimage__.sHashCode=function(He){var en,cn,Sn=0;if(typeof He=="string")for(cn=He.length,en=0;en<cn;en++)Sn=(Sn<<5)-Sn+He.charCodeAt(en),Sn|=0;else if(an(He))for(cn=He.byteLength/2,en=0;en<cn;en++)Sn=(Sn<<5)-Sn+He[en],Sn|=0;return Sn},Qe=t.__addimage__.validateStringAsBase64=function(He){(He=He||"").toString().trim();var en=!0;return He.length===0&&(en=!1),He.length%4!=0&&(en=!1),/^[A-Za-z0-9+/]+$/.test(He.substr(0,He.length-2))===!1&&(en=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(He.substr(-2))===!1&&(en=!1),en},rn=t.__addimage__.extractImageFromDataUrl=function(He){var en=(He=He||"").split("base64,"),cn=null;if(en.length===2){var Sn=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(en[0]);Array.isArray(Sn)&&(cn={mimeType:Sn[1],charset:Sn[2],data:en[1]})}return cn},tn=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(He){return tn()&&He instanceof ArrayBuffer};var an=t.__addimage__.isArrayBufferView=function(He){return tn()&&typeof Uint32Array<"u"&&(He instanceof Int8Array||He instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&He instanceof Uint8ClampedArray||He instanceof Int16Array||He instanceof Uint16Array||He instanceof Int32Array||He instanceof Uint32Array||He instanceof Float32Array||He instanceof Float64Array)},qe=t.__addimage__.binaryStringToUint8Array=function(He){for(var en=He.length,cn=new Uint8Array(en),Sn=0;Sn<en;Sn++)cn[Sn]=He.charCodeAt(Sn);return cn},Ke=t.__addimage__.arrayBufferToBinaryString=function(He){for(var en="",cn=an(He)?He:new Uint8Array(He),Sn=0;Sn<cn.length;Sn+=8192)en+=String.fromCharCode.apply(null,cn.subarray(Sn,Sn+8192));return en};t.addImage=function(){var He,en,cn,Sn,Tn,hn,pn,bn,fn;if(typeof arguments[1]=="number"?(en=e,cn=arguments[1],Sn=arguments[2],Tn=arguments[3],hn=arguments[4],pn=arguments[5],bn=arguments[6],fn=arguments[7]):(en=arguments[1],cn=arguments[2],Sn=arguments[3],Tn=arguments[4],hn=arguments[5],pn=arguments[6],bn=arguments[7],fn=arguments[8]),_typeof$2(He=arguments[0])==="object"&&!Me(He)&&"imageData"in He){var An=He;He=An.imageData,en=An.format||en||e,cn=An.x||cn||0,Sn=An.y||Sn||0,Tn=An.w||An.width||Tn,hn=An.h||An.height||hn,pn=An.alias||pn,bn=An.compression||bn,fn=An.rotation||An.angle||fn}var xn=this.internal.getFilters();if(bn===void 0&&xn.indexOf("FlateEncode")!==-1&&(bn="SLOW"),isNaN(cn)||isNaN(Sn))throw new Error("Invalid coordinates passed to jsPDF.addImage");Re.call(this);var Je=sn.call(this,He,en,pn,bn);return $e.call(this,cn,Sn,Tn,hn,Je,fn),this};var sn=function(He,en,cn,Sn){var Tn,hn,pn;if(typeof He=="string"&&xe(He)===e){He=unescape(He);var bn=gn(He,!1);(bn!==""||(bn=t.loadFile(He,!0))!==void 0)&&(He=bn)}if(Me(He)&&(He=Fe(He,en)),en=xe(He,en),!ke(en))throw new Error("addImage does not support files of type '"+en+"', please ensure that a plugin for '"+en+"' support is added.");if(((pn=cn)==null||pn.length===0)&&(cn=(function(fn){return typeof fn=="string"||an(fn)?Ye(fn):an(fn.data)?Ye(fn.data):null})(He)),(Tn=Ve.call(this,cn))||(tn()&&(He instanceof Uint8Array||en==="RGBA"||(hn=He,He=qe(He))),Tn=this["process"+en.toUpperCase()](He,Be.call(this),cn,(function(fn){return fn&&typeof fn=="string"&&(fn=fn.toUpperCase()),fn in t.image_compression?fn:Ue.NONE})(Sn),hn)),!Tn)throw new Error("An unknown error occurred whilst processing the image.");return Tn},gn=t.__addimage__.convertBase64ToBinaryString=function(He,en){var cn;en=typeof en!="boolean"||en;var Sn,Tn="";if(typeof He=="string"){Sn=(cn=rn(He))!==null?cn.data:He;try{Tn=u(Sn)}catch(hn){if(en)throw Qe(Sn)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+hn.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Tn};t.getImageProperties=function(He){var en,cn,Sn="";if(Me(He)&&(He=Fe(He)),typeof He=="string"&&xe(He)===e&&((Sn=gn(He,!1))===""&&(Sn=t.loadFile(He)||""),He=Sn),cn=xe(He),!ke(cn))throw new Error("addImage does not support files of type '"+cn+"', please ensure that a plugin for '"+cn+"' support is added.");if(!tn()||He instanceof Uint8Array||(He=qe(He)),!(en=this["process"+cn.toUpperCase()](He)))throw new Error("An unknown error occurred whilst processing the image");return en.fileType=cn,en}})(E.API),(function(t){var e=function(r){if(r!==void 0&&r!="")return!0};E.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var xe,Ee,Ae,Pe=this.internal.getCoordinateString,Re=this.internal.getVerticalCoordinateString,Ce=this.internal.getPageInfoByObjId(r.objId),Be=r.pageContext.annotations,ke=!1,Me=0;Me<Be.length&&!ke;Me++)switch((xe=Be[Me]).type){case"link":(e(xe.options.url)||e(xe.options.pageNumber))&&(ke=!0);break;case"reference":case"text":case"freetext":ke=!0}if(ke!=0){this.internal.write("/Annots [");for(var Fe=0;Fe<Be.length;Fe++){xe=Be[Fe];var Ve=this.internal.pdfEscape,Oe=this.internal.getEncryptor(r.objId);switch(xe.type){case"reference":this.internal.write(" "+xe.object.objId+" 0 R ");break;case"text":var $e=this.internal.newAdditionalObject(),Ge=this.internal.newAdditionalObject(),Ue=this.internal.getEncryptor($e.objId),Ye=xe.title||"Note";Ae="<</Type /Annot /Subtype /Text "+(Ee="/Rect ["+Pe(xe.bounds.x)+" "+Re(xe.bounds.y+xe.bounds.h)+" "+Pe(xe.bounds.x+xe.bounds.w)+" "+Re(xe.bounds.y)+"] ")+"/Contents ("+Ve(Ue(xe.contents))+")",Ae+=" /Popup "+Ge.objId+" 0 R",Ae+=" /P "+Ce.objId+" 0 R",Ae+=" /T ("+Ve(Ue(Ye))+") >>",$e.content=Ae;var Qe=$e.objId+" 0 R";Ae="<</Type /Annot /Subtype /Popup "+(Ee="/Rect ["+Pe(xe.bounds.x+30)+" "+Re(xe.bounds.y+xe.bounds.h)+" "+Pe(xe.bounds.x+xe.bounds.w+30)+" "+Re(xe.bounds.y)+"] ")+" /Parent "+Qe,xe.open&&(Ae+=" /Open true"),Ae+=" >>",Ge.content=Ae,this.internal.write($e.objId,"0 R",Ge.objId,"0 R");break;case"freetext":Ee="/Rect ["+Pe(xe.bounds.x)+" "+Re(xe.bounds.y)+" "+Pe(xe.bounds.x+xe.bounds.w)+" "+Re(xe.bounds.y+xe.bounds.h)+"] ";var rn=xe.color||"#000000";Ae="<</Type /Annot /Subtype /FreeText "+Ee+"/Contents ("+Ve(Oe(xe.contents))+")",Ae+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+rn+")",Ae+=" /Border [0 0 0]",Ae+=" >>",this.internal.write(Ae);break;case"link":if(xe.options.name){var tn=this.annotations._nameMap[xe.options.name];xe.options.pageNumber=tn.page,xe.options.top=tn.y}else xe.options.top||(xe.options.top=0);if(Ee="/Rect ["+xe.finalBounds.x+" "+xe.finalBounds.y+" "+xe.finalBounds.w+" "+xe.finalBounds.h+"] ",Ae="",xe.options.url)Ae="<</Type /Annot /Subtype /Link "+Ee+"/Border [0 0 0] /A <</S /URI /URI ("+Ve(Oe(xe.options.url))+") >>";else if(xe.options.pageNumber)switch(Ae="<</Type /Annot /Subtype /Link "+Ee+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(xe.options.pageNumber).objId+" 0 R",xe.options.magFactor=xe.options.magFactor||"XYZ",xe.options.magFactor){case"Fit":Ae+=" /Fit]";break;case"FitH":Ae+=" /FitH "+xe.options.top+"]";break;case"FitV":xe.options.left=xe.options.left||0,Ae+=" /FitV "+xe.options.left+"]";break;case"XYZ":default:var an=Re(xe.options.top);xe.options.left=xe.options.left||0,xe.options.zoom===void 0&&(xe.options.zoom=0),Ae+=" /XYZ "+xe.options.left+" "+an+" "+xe.options.zoom+"]"}Ae!=""&&(Ae+=" >>",this.internal.write(Ae))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var xe=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":xe.pageContext.annotations.push(r)}},t.link=function(r,xe,Ee,Ae,Pe){var Re=this.internal.getCurrentPageInfo(),Ce=this.internal.getCoordinateString,Be=this.internal.getVerticalCoordinateString;Re.pageContext.annotations.push({finalBounds:{x:Ce(r),y:Be(xe),w:Ce(r+Ee),h:Be(xe+Ae)},options:Pe,type:"link"})},t.textWithLink=function(r,xe,Ee,Ae){var Pe,Re,Ce=this.getTextWidth(r),Be=this.internal.getLineHeight()/this.internal.scaleFactor;if(Ae.maxWidth!==void 0){Re=Ae.maxWidth;var ke=this.splitTextToSize(r,Re).length;Pe=Math.ceil(Be*ke)}else Re=Ce,Pe=Be;return this.text(r,xe,Ee,Ae),Ee+=.2*Be,Ae.align==="center"&&(xe-=Ce/2),Ae.align==="right"&&(xe-=Ce),this.link(xe,Ee-Be,Re,Pe,Ae),Ce},t.getTextWidth=function(r){var xe=this.internal.getFontSize();return this.getStringUnitWidth(r)*xe/this.internal.scaleFactor}})(E.API),(function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},xe={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},Ee=[1570,1571,1573,1575];t.__arabicParser__={};var Ae=t.__arabicParser__.isInArabicSubstitutionA=function($e){return e[$e.charCodeAt(0)]!==void 0},Pe=t.__arabicParser__.isArabicLetter=function($e){return typeof $e=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test($e)},Re=t.__arabicParser__.isArabicEndLetter=function($e){return Pe($e)&&Ae($e)&&e[$e.charCodeAt(0)].length<=2},Ce=t.__arabicParser__.isArabicAlfLetter=function($e){return Pe($e)&&Ee.indexOf($e.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function($e){return Pe($e)&&Ae($e)&&e[$e.charCodeAt(0)].length>=1};var Be=t.__arabicParser__.arabicLetterHasFinalForm=function($e){return Pe($e)&&Ae($e)&&e[$e.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function($e){return Pe($e)&&Ae($e)&&e[$e.charCodeAt(0)].length>=3};var ke=t.__arabicParser__.arabicLetterHasMedialForm=function($e){return Pe($e)&&Ae($e)&&e[$e.charCodeAt(0)].length==4},Me=t.__arabicParser__.resolveLigatures=function($e){var Ge=0,Ue=r,Ye="",Qe=0;for(Ge=0;Ge<$e.length;Ge+=1)Ue[$e.charCodeAt(Ge)]!==void 0?(Qe++,typeof(Ue=Ue[$e.charCodeAt(Ge)])=="number"&&(Ye+=String.fromCharCode(Ue),Ue=r,Qe=0),Ge===$e.length-1&&(Ue=r,Ye+=$e.charAt(Ge-(Qe-1)),Ge-=Qe-1,Qe=0)):(Ue=r,Ye+=$e.charAt(Ge-Qe),Ge-=Qe,Qe=0);return Ye};t.__arabicParser__.isArabicDiacritic=function($e){return $e!==void 0&&xe[$e.charCodeAt(0)]!==void 0};var Fe=t.__arabicParser__.getCorrectForm=function($e,Ge,Ue){return Pe($e)?Ae($e)===!1?-1:!Be($e)||!Pe(Ge)&&!Pe(Ue)||!Pe(Ue)&&Re(Ge)||Re($e)&&!Pe(Ge)||Re($e)&&Ce(Ge)||Re($e)&&Re(Ge)?0:ke($e)&&Pe(Ge)&&!Re(Ge)&&Pe(Ue)&&Be(Ue)?3:Re($e)||!Pe(Ue)?1:2:-1},Ve=function($e){var Ge=0,Ue=0,Ye=0,Qe="",rn="",tn="",an=($e=$e||"").split("\\s+"),qe=[];for(Ge=0;Ge<an.length;Ge+=1){for(qe.push(""),Ue=0;Ue<an[Ge].length;Ue+=1)Qe=an[Ge][Ue],rn=an[Ge][Ue-1],tn=an[Ge][Ue+1],Pe(Qe)?(Ye=Fe(Qe,rn,tn),qe[Ge]+=Ye!==-1?String.fromCharCode(e[Qe.charCodeAt(0)][Ye]):Qe):qe[Ge]+=Qe;qe[Ge]=Me(qe[Ge])}return qe.join(" ")},Oe=t.__arabicParser__.processArabic=t.processArabic=function(){var $e,Ge=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,Ue=[];if(Array.isArray(Ge)){var Ye=0;for(Ue=[],Ye=0;Ye<Ge.length;Ye+=1)Array.isArray(Ge[Ye])?Ue.push([Ve(Ge[Ye][0]),Ge[Ye][1],Ge[Ye][2]]):Ue.push([Ve(Ge[Ye])]);$e=Ue}else $e=Ve(Ge);return typeof arguments[0]=="string"?$e:(arguments[0].text=$e,arguments[0])};t.events.push(["preProcessText",Oe])})(E.API),E.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",(function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+e+" 0 R")}))}return this},(function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(Re){r=Re}});var xe=150;Object.defineProperty(this,"width",{get:function(){return xe},set:function(Re){xe=isNaN(Re)||Number.isInteger(Re)===!1||Re<0?150:Re,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=xe+1)}});var Ee=300;Object.defineProperty(this,"height",{get:function(){return Ee},set:function(Re){Ee=isNaN(Re)||Number.isInteger(Re)===!1||Re<0?300:Re,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=Ee+1)}});var Ae=[];Object.defineProperty(this,"childNodes",{get:function(){return Ae},set:function(Re){Ae=Re}});var Pe={};Object.defineProperty(this,"style",{get:function(){return Pe},set:function(Re){Pe=Re}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,xe){var Ee;if((r=r||"2d")!=="2d")return null;for(Ee in xe)this.pdf.context2d.hasOwnProperty(Ee)&&(this.pdf.context2d[Ee]=xe[Ee]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(E.API),(function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,xe=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),Ee.call(this))},Ee=function(){this.internal.__cell__.lastCell=new Ae,this.internal.__cell__.pages=1},Ae=function(){var Ce=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ce},set:function($e){Ce=$e}});var Be=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Be},set:function($e){Be=$e}});var ke=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return ke},set:function($e){ke=$e}});var Me=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return Me},set:function($e){Me=$e}});var Fe=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return Fe},set:function($e){Fe=$e}});var Ve=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return Ve},set:function($e){Ve=$e}});var Oe=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return Oe},set:function($e){Oe=$e}}),this};Ae.prototype.clone=function(){return new Ae(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},Ae.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(Ce){return xe.call(this),this.internal.__cell__.headerFunction=typeof Ce=="function"?Ce:void 0,this},t.getTextDimensions=function(Ce,Be){xe.call(this);var ke=(Be=Be||{}).fontSize||this.getFontSize(),Me=Be.font||this.getFont(),Fe=Be.scaleFactor||this.internal.scaleFactor,Ve=0,Oe=0,$e=0,Ge=this;if(!Array.isArray(Ce)&&typeof Ce!="string"){if(typeof Ce!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");Ce=String(Ce)}var Ue=Be.maxWidth;Ue>0?typeof Ce=="string"?Ce=this.splitTextToSize(Ce,Ue):Object.prototype.toString.call(Ce)==="[object Array]"&&(Ce=Ce.reduce((function(Qe,rn){return Qe.concat(Ge.splitTextToSize(rn,Ue))}),[])):Ce=Array.isArray(Ce)?Ce:[Ce];for(var Ye=0;Ye<Ce.length;Ye++)Ve<($e=this.getStringUnitWidth(Ce[Ye],{font:Me})*ke)&&(Ve=$e);return Ve!==0&&(Oe=Ce.length),{w:Ve/=Fe,h:Math.max((Oe*ke*this.getLineHeightFactor()-ke*(this.getLineHeightFactor()-1))/Fe,0)}},t.cellAddPage=function(){xe.call(this),this.addPage();var Ce=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new Ae(Ce.left,Ce.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var Pe=t.cell=function(){var Ce;Ce=arguments[0]instanceof Ae?arguments[0]:new Ae(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),xe.call(this);var Be=this.internal.__cell__.lastCell,ke=this.internal.__cell__.padding,Me=this.internal.__cell__.margins||e,Fe=this.internal.__cell__.tableHeaderRow,Ve=this.internal.__cell__.printHeaders;return Be.lineNumber!==void 0&&(Be.lineNumber===Ce.lineNumber?(Ce.x=(Be.x||0)+(Be.width||0),Ce.y=Be.y||0):Be.y+Be.height+Ce.height+Me.bottom>this.getPageHeight()?(this.cellAddPage(),Ce.y=Me.top,Ve&&Fe&&(this.printHeaderRow(Ce.lineNumber,!0),Ce.y+=Fe[0].height)):Ce.y=Be.y+Be.height||Ce.y),Ce.text[0]!==void 0&&(this.rect(Ce.x,Ce.y,Ce.width,Ce.height,r===!0?"FD":void 0),Ce.align==="right"?this.text(Ce.text,Ce.x+Ce.width-ke,Ce.y+ke,{align:"right",baseline:"top"}):Ce.align==="center"?this.text(Ce.text,Ce.x+Ce.width/2,Ce.y+ke,{align:"center",baseline:"top",maxWidth:Ce.width-ke-ke}):this.text(Ce.text,Ce.x+ke,Ce.y+ke,{align:"left",baseline:"top",maxWidth:Ce.width-ke-ke})),this.internal.__cell__.lastCell=Ce,this};t.table=function(Ce,Be,ke,Me,Fe){if(xe.call(this),!ke)throw new Error("No data for PDF table.");var Ve,Oe,$e,Ge,Ue=[],Ye=[],Qe=[],rn={},tn={},an=[],qe=[],Ke=(Fe=Fe||{}).autoSize||!1,sn=Fe.printHeaders!==!1,gn=Fe.css&&Fe.css["font-size"]!==void 0?16*Fe.css["font-size"]:Fe.fontSize||12,He=Fe.margins||Object.assign({width:this.getPageWidth()},e),en=typeof Fe.padding=="number"?Fe.padding:3,cn=Fe.headerBackgroundColor||"#c8c8c8",Sn=Fe.headerTextColor||"#000";if(Ee.call(this),this.internal.__cell__.printHeaders=sn,this.internal.__cell__.margins=He,this.internal.__cell__.table_font_size=gn,this.internal.__cell__.padding=en,this.internal.__cell__.headerBackgroundColor=cn,this.internal.__cell__.headerTextColor=Sn,this.setFontSize(gn),Me==null)Ye=Ue=Object.keys(ke[0]),Qe=Ue.map((function(){return"left"}));else if(Array.isArray(Me)&&_typeof$2(Me[0])==="object")for(Ue=Me.map((function(An){return An.name})),Ye=Me.map((function(An){return An.prompt||An.name||""})),Qe=Me.map((function(An){return An.align||"left"})),Ve=0;Ve<Me.length;Ve+=1)tn[Me[Ve].name]=Me[Ve].width*(19.049976/25.4);else Array.isArray(Me)&&typeof Me[0]=="string"&&(Ye=Ue=Me,Qe=Ue.map((function(){return"left"})));if(Ke||Array.isArray(Me)&&typeof Me[0]=="string")for(Ve=0;Ve<Ue.length;Ve+=1){for(rn[Ge=Ue[Ve]]=ke.map((function(An){return An[Ge]})),this.setFont(void 0,"bold"),an.push(this.getTextDimensions(Ye[Ve],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),Oe=rn[Ge],this.setFont(void 0,"normal"),$e=0;$e<Oe.length;$e+=1)an.push(this.getTextDimensions(Oe[$e],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);tn[Ge]=Math.max.apply(null,an)+en+en,an=[]}if(sn){var Tn={};for(Ve=0;Ve<Ue.length;Ve+=1)Tn[Ue[Ve]]={},Tn[Ue[Ve]].text=Ye[Ve],Tn[Ue[Ve]].align=Qe[Ve];var hn=Re.call(this,Tn,tn);qe=Ue.map((function(An){return new Ae(Ce,Be,tn[An],hn,Tn[An].text,void 0,Tn[An].align)})),this.setTableHeaderRow(qe),this.printHeaderRow(1,!1)}var pn=Me.reduce((function(An,xn){return An[xn.name]=xn.align,An}),{});for(Ve=0;Ve<ke.length;Ve+=1){"rowStart"in Fe&&Fe.rowStart instanceof Function&&Fe.rowStart({row:Ve,data:ke[Ve]},this);var bn=Re.call(this,ke[Ve],tn);for($e=0;$e<Ue.length;$e+=1){var fn=ke[Ve][Ue[$e]];"cellStart"in Fe&&Fe.cellStart instanceof Function&&Fe.cellStart({row:Ve,col:$e,data:fn},this),Pe.call(this,new Ae(Ce,Be,tn[Ue[$e]],bn,fn,Ve+2,pn[Ue[$e]]))}}return this.internal.__cell__.table_x=Ce,this.internal.__cell__.table_y=Be,this};var Re=function(Ce,Be){var ke=this.internal.__cell__.padding,Me=this.internal.__cell__.table_font_size,Fe=this.internal.scaleFactor;return Object.keys(Ce).map((function(Ve){var Oe=Ce[Ve];return this.splitTextToSize(Oe.hasOwnProperty("text")?Oe.text:Oe,Be[Ve]-ke-ke)}),this).map((function(Ve){return this.getLineHeightFactor()*Ve.length*Me/Fe+ke+ke}),this).reduce((function(Ve,Oe){return Math.max(Ve,Oe)}),0)};t.setTableHeaderRow=function(Ce){xe.call(this),this.internal.__cell__.tableHeaderRow=Ce},t.printHeaderRow=function(Ce,Be){if(xe.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var ke;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var Me=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new Ae(Me[0],Me[1],Me[2],Me[3],void 0,-1)}this.setFont(void 0,"bold");for(var Fe=[],Ve=0;Ve<this.internal.__cell__.tableHeaderRow.length;Ve+=1){ke=this.internal.__cell__.tableHeaderRow[Ve].clone(),Be&&(ke.y=this.internal.__cell__.margins.top||0,Fe.push(ke)),ke.lineNumber=Ce;var Oe=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),Pe.call(this,ke),this.setTextColor(Oe)}Fe.length>0&&this.setTableHeaderRow(Fe),this.setFont(void 0,"normal"),r=!1}})(E.API);var Pt={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},kt=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],It=_t(kt),Ft=[100,200,300,400,500,600,700,800,900],Ct=_t(Ft);function jt(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=(function(Ae){return Pt[Ae=Ae||"normal"]?Ae:"normal"})(t.style),xe=(function(Ae){if(!Ae)return 400;if(typeof Ae=="number")return Ae>=100&&Ae<=900&&Ae%100==0?Ae:400;if(/^\d00$/.test(Ae))return parseInt(Ae);switch(Ae){case"bold":return 700;case"normal":default:return 400}})(t.weight),Ee=(function(Ae){return typeof It[Ae=Ae||"normal"]=="number"?Ae:"normal"})(t.stretch);return{family:e,style:r,weight:xe,stretch:Ee,src:t.src||[],ref:t.ref||{name:e,style:[Ee,r,xe].join(" ")}}}function Ot(t,e,r,xe){var Ee;for(Ee=r;Ee>=0&&Ee<e.length;Ee+=xe)if(t[e[Ee]])return t[e[Ee]];for(Ee=r;Ee>=0&&Ee<e.length;Ee-=xe)if(t[e[Ee]])return t[e[Ee]]}var Bt={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Mt={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Et(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function qt(t,e,r){for(var xe=(r=r||{}).defaultFontFamily||"times",Ee=Object.assign({},Bt,r.genericFontFamilies||{}),Ae=null,Pe=null,Re=0;Re<e.length;++Re)if(Ee[(Ae=jt(e[Re])).family]&&(Ae.family=Ee[Ae.family]),t.hasOwnProperty(Ae.family)){Pe=t[Ae.family];break}if(!(Pe=Pe||t[xe]))throw new Error("Could not find a font-family for the rule '"+Et(Ae)+"' and default family '"+xe+"'.");if(Pe=(function(Ce,Be){if(Be[Ce])return Be[Ce];var ke=It[Ce],Me=ke<=It.normal?-1:1,Fe=Ot(Be,kt,ke,Me);if(!Fe)throw new Error("Could not find a matching font-stretch value for "+Ce);return Fe})(Ae.stretch,Pe),Pe=(function(Ce,Be){if(Be[Ce])return Be[Ce];for(var ke=Pt[Ce],Me=0;Me<ke.length;++Me)if(Be[ke[Me]])return Be[ke[Me]];throw new Error("Could not find a matching font-style for "+Ce)})(Ae.style,Pe),!(Pe=(function(Ce,Be){if(Be[Ce])return Be[Ce];if(Ce===400&&Be[500])return Be[500];if(Ce===500&&Be[400])return Be[400];var ke=Ct[Ce],Me=Ot(Be,Ft,ke,Ce<400?-1:1);if(!Me)throw new Error("Could not find a matching font-weight for value "+Ce);return Me})(Ae.weight,Pe)))throw new Error("Failed to resolve a font for the rule '"+Et(Ae)+"'.");return Pe}function Dt(t){return t.trimLeft()}function Rt(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function Tt(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Ut,zt,Ht,Wt=["times"];(function(t){var e,r,xe,Ee,Ae,Pe,Re,Ce,Be,ke=function(Je){return Je=Je||{},this.isStrokeTransparent=Je.isStrokeTransparent||!1,this.strokeOpacity=Je.strokeOpacity||1,this.strokeStyle=Je.strokeStyle||"#000000",this.fillStyle=Je.fillStyle||"#000000",this.isFillTransparent=Je.isFillTransparent||!1,this.fillOpacity=Je.fillOpacity||1,this.font=Je.font||"10px sans-serif",this.textBaseline=Je.textBaseline||"alphabetic",this.textAlign=Je.textAlign||"left",this.lineWidth=Je.lineWidth||1,this.lineJoin=Je.lineJoin||"miter",this.lineCap=Je.lineCap||"butt",this.path=Je.path||[],this.transform=Je.transform!==void 0?Je.transform.clone():new Ce,this.globalCompositeOperation=Je.globalCompositeOperation||"normal",this.globalAlpha=Je.globalAlpha||1,this.clip_path=Je.clip_path||[],this.currentPoint=Je.currentPoint||new Pe,this.miterLimit=Je.miterLimit||10,this.lastPoint=Je.lastPoint||new Pe,this.lineDashOffset=Je.lineDashOffset||0,this.lineDash=Je.lineDash||[],this.margin=Je.margin||[0,0,0,0],this.prevPageLastElemOffset=Je.prevPageLastElemOffset||0,this.ignoreClearRect=typeof Je.ignoreClearRect!="boolean"||Je.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new Me(this),e=this.internal.f2,r=this.internal.getCoordinateString,xe=this.internal.getVerticalCoordinateString,Ee=this.internal.getHorizontalCoordinate,Ae=this.internal.getVerticalCoordinate,Pe=this.internal.Point,Re=this.internal.Rectangle,Ce=this.internal.Matrix,Be=new ke}]);var Me=function(Je){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var We=Je;Object.defineProperty(this,"pdf",{get:function(){return We}});var Ze=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Ze},set:function(Wn){Ze=!!Wn}});var un=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return un},set:function(Wn){un=!!Wn}});var yn=0;Object.defineProperty(this,"posX",{get:function(){return yn},set:function(Wn){isNaN(Wn)||(yn=Wn)}});var _n=0;Object.defineProperty(this,"posY",{get:function(){return _n},set:function(Wn){isNaN(Wn)||(_n=Wn)}}),Object.defineProperty(this,"margin",{get:function(){return Be.margin},set:function(Wn){var Pn;typeof Wn=="number"?Pn=[Wn,Wn,Wn,Wn]:((Pn=new Array(4))[0]=Wn[0],Pn[1]=Wn.length>=2?Wn[1]:Pn[0],Pn[2]=Wn.length>=3?Wn[2]:Pn[0],Pn[3]=Wn.length>=4?Wn[3]:Pn[1]),Be.margin=Pn}});var wn=!1;Object.defineProperty(this,"autoPaging",{get:function(){return wn},set:function(Wn){wn=Wn}});var kn=0;Object.defineProperty(this,"lastBreak",{get:function(){return kn},set:function(Wn){kn=Wn}});var $n=[];Object.defineProperty(this,"pageBreaks",{get:function(){return $n},set:function(Wn){$n=Wn}}),Object.defineProperty(this,"ctx",{get:function(){return Be},set:function(Wn){Wn instanceof ke&&(Be=Wn)}}),Object.defineProperty(this,"path",{get:function(){return Be.path},set:function(Wn){Be.path=Wn}});var Ln=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ln},set:function(Wn){Ln=Wn}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Wn){var Pn;Pn=Fe(Wn),this.ctx.fillStyle=Pn.style,this.ctx.isFillTransparent=Pn.a===0,this.ctx.fillOpacity=Pn.a,this.pdf.setFillColor(Pn.r,Pn.g,Pn.b,{a:Pn.a}),this.pdf.setTextColor(Pn.r,Pn.g,Pn.b,{a:Pn.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Wn){var Pn=Fe(Wn);this.ctx.strokeStyle=Pn.style,this.ctx.isStrokeTransparent=Pn.a===0,this.ctx.strokeOpacity=Pn.a,Pn.a===0?this.pdf.setDrawColor(255,255,255):(Pn.a,this.pdf.setDrawColor(Pn.r,Pn.g,Pn.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Wn){["butt","round","square"].indexOf(Wn)!==-1&&(this.ctx.lineCap=Wn,this.pdf.setLineCap(Wn))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Wn){isNaN(Wn)||(this.ctx.lineWidth=Wn,this.pdf.setLineWidth(Wn))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Wn){["bevel","round","miter"].indexOf(Wn)!==-1&&(this.ctx.lineJoin=Wn,this.pdf.setLineJoin(Wn))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Wn){isNaN(Wn)||(this.ctx.miterLimit=Wn,this.pdf.setMiterLimit(Wn))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Wn){this.ctx.textBaseline=Wn}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Wn){["right","end","center","left","start"].indexOf(Wn)!==-1&&(this.ctx.textAlign=Wn)}});var Gn=null;function Yn(Wn,Pn){if(Gn===null){var Zn=(function(mn){var Cn=[];return Object.keys(mn).forEach((function(jn){mn[jn].forEach((function(Rn){var Dn=null;switch(Rn){case"bold":Dn={family:jn,weight:"bold"};break;case"italic":Dn={family:jn,style:"italic"};break;case"bolditalic":Dn={family:jn,weight:"bold",style:"italic"};break;case"":case"normal":Dn={family:jn}}Dn!==null&&(Dn.ref={name:jn,style:Rn},Cn.push(Dn))}))})),Cn})(Wn.getFontList());Gn=(function(mn){for(var Cn={},jn=0;jn<mn.length;++jn){var Rn=jt(mn[jn]),Dn=Rn.family,Jn=Rn.stretch,Qn=Rn.style,qn=Rn.weight;Cn[Dn]=Cn[Dn]||{},Cn[Dn][Jn]=Cn[Dn][Jn]||{},Cn[Dn][Jn][Qn]=Cn[Dn][Jn][Qn]||{},Cn[Dn][Jn][Qn][qn]=Rn}return Cn})(Zn.concat(Pn))}return Gn}var ii=null;Object.defineProperty(this,"fontFaces",{get:function(){return ii},set:function(Wn){Gn=null,ii=Wn}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Wn){var Pn;if(this.ctx.font=Wn,(Pn=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Wn))!==null){var Zn=Pn[1],mn=(Pn[2],Pn[3]),Cn=Pn[4],jn=(Pn[5],Pn[6]),Rn=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Cn)[2];Cn=Math.floor(Rn==="px"?parseFloat(Cn)*this.pdf.internal.scaleFactor:Rn==="em"?parseFloat(Cn)*this.pdf.getFontSize():parseFloat(Cn)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Cn);var Dn=(function(Ni){var Gi,ui,Vi=[],Di=Ni.trim();if(Di==="")return Wt;if(Di in Mt)return[Mt[Di]];for(;Di!=="";){switch(ui=null,Gi=(Di=Dt(Di)).charAt(0)){case'"':case"'":ui=Rt(Di.substring(1),Gi);break;default:ui=Tt(Di)}if(ui===null||(Vi.push(ui[0]),(Di=Dt(ui[1]))!==""&&Di.charAt(0)!==","))return Wt;Di=Di.replace(/^,/,"")}return Vi})(jn);if(this.fontFaces){var Jn=qt(Yn(this.pdf,this.fontFaces),Dn.map((function(Ni){return{family:Ni,stretch:"normal",weight:mn,style:Zn}})));this.pdf.setFont(Jn.ref.name,Jn.ref.style)}else{var Qn="";(mn==="bold"||parseInt(mn,10)>=700||Zn==="bold")&&(Qn="bold"),Zn==="italic"&&(Qn+="italic"),Qn.length===0&&(Qn="normal");for(var qn="",yi={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},di=0;di<Dn.length;di++){if(this.pdf.internal.getFont(Dn[di],Qn,{noFallback:!0,disableWarning:!0})!==void 0){qn=Dn[di];break}if(Qn==="bolditalic"&&this.pdf.internal.getFont(Dn[di],"bold",{noFallback:!0,disableWarning:!0})!==void 0)qn=Dn[di],Qn="bold";else if(this.pdf.internal.getFont(Dn[di],"normal",{noFallback:!0,disableWarning:!0})!==void 0){qn=Dn[di],Qn="normal";break}}if(qn===""){for(var zi=0;zi<Dn.length;zi++)if(yi[Dn[zi]]){qn=yi[Dn[zi]];break}}qn=qn===""?"Times":qn,this.pdf.setFont(qn,Qn)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Wn){this.ctx.globalCompositeOperation=Wn}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Wn){this.ctx.globalAlpha=Wn}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Wn){this.ctx.lineDashOffset=Wn,xn.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Wn){this.ctx.lineDash=Wn,xn.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Wn){this.ctx.ignoreClearRect=!!Wn}})};Me.prototype.setLineDash=function(Je){this.lineDash=Je},Me.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},Me.prototype.fill=function(){rn.call(this,"fill",!1)},Me.prototype.stroke=function(){rn.call(this,"stroke",!1)},Me.prototype.beginPath=function(){this.path=[{type:"begin"}]},Me.prototype.moveTo=function(Je,We){if(isNaN(Je)||isNaN(We))throw a.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Ze=this.ctx.transform.applyToPoint(new Pe(Je,We));this.path.push({type:"mt",x:Ze.x,y:Ze.y}),this.ctx.lastPoint=new Pe(Je,We)},Me.prototype.closePath=function(){var Je=new Pe(0,0),We=0;for(We=this.path.length-1;We!==-1;We--)if(this.path[We].type==="begin"&&_typeof$2(this.path[We+1])==="object"&&typeof this.path[We+1].x=="number"){Je=new Pe(this.path[We+1].x,this.path[We+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new Pe(Je.x,Je.y)},Me.prototype.lineTo=function(Je,We){if(isNaN(Je)||isNaN(We))throw a.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Ze=this.ctx.transform.applyToPoint(new Pe(Je,We));this.path.push({type:"lt",x:Ze.x,y:Ze.y}),this.ctx.lastPoint=new Pe(Ze.x,Ze.y)},Me.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),rn.call(this,null,!0)},Me.prototype.quadraticCurveTo=function(Je,We,Ze,un){if(isNaN(Ze)||isNaN(un)||isNaN(Je)||isNaN(We))throw a.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var yn=this.ctx.transform.applyToPoint(new Pe(Ze,un)),_n=this.ctx.transform.applyToPoint(new Pe(Je,We));this.path.push({type:"qct",x1:_n.x,y1:_n.y,x:yn.x,y:yn.y}),this.ctx.lastPoint=new Pe(yn.x,yn.y)},Me.prototype.bezierCurveTo=function(Je,We,Ze,un,yn,_n){if(isNaN(yn)||isNaN(_n)||isNaN(Je)||isNaN(We)||isNaN(Ze)||isNaN(un))throw a.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var wn=this.ctx.transform.applyToPoint(new Pe(yn,_n)),kn=this.ctx.transform.applyToPoint(new Pe(Je,We)),$n=this.ctx.transform.applyToPoint(new Pe(Ze,un));this.path.push({type:"bct",x1:kn.x,y1:kn.y,x2:$n.x,y2:$n.y,x:wn.x,y:wn.y}),this.ctx.lastPoint=new Pe(wn.x,wn.y)},Me.prototype.arc=function(Je,We,Ze,un,yn,_n){if(isNaN(Je)||isNaN(We)||isNaN(Ze)||isNaN(un)||isNaN(yn))throw a.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(_n=!!_n,!this.ctx.transform.isIdentity){var wn=this.ctx.transform.applyToPoint(new Pe(Je,We));Je=wn.x,We=wn.y;var kn=this.ctx.transform.applyToPoint(new Pe(0,Ze)),$n=this.ctx.transform.applyToPoint(new Pe(0,0));Ze=Math.sqrt(Math.pow(kn.x-$n.x,2)+Math.pow(kn.y-$n.y,2))}Math.abs(yn-un)>=2*Math.PI&&(un=0,yn=2*Math.PI),this.path.push({type:"arc",x:Je,y:We,radius:Ze,startAngle:un,endAngle:yn,counterclockwise:_n})},Me.prototype.arcTo=function(Je,We,Ze,un,yn){throw new Error("arcTo not implemented.")},Me.prototype.rect=function(Je,We,Ze,un){if(isNaN(Je)||isNaN(We)||isNaN(Ze)||isNaN(un))throw a.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(Je,We),this.lineTo(Je+Ze,We),this.lineTo(Je+Ze,We+un),this.lineTo(Je,We+un),this.lineTo(Je,We),this.lineTo(Je+Ze,We),this.lineTo(Je,We)},Me.prototype.fillRect=function(Je,We,Ze,un){if(isNaN(Je)||isNaN(We)||isNaN(Ze)||isNaN(un))throw a.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!Ve.call(this)){var yn={};this.lineCap!=="butt"&&(yn.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(yn.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(Je,We,Ze,un),this.fill(),yn.hasOwnProperty("lineCap")&&(this.lineCap=yn.lineCap),yn.hasOwnProperty("lineJoin")&&(this.lineJoin=yn.lineJoin)}},Me.prototype.strokeRect=function(Je,We,Ze,un){if(isNaN(Je)||isNaN(We)||isNaN(Ze)||isNaN(un))throw a.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");Oe.call(this)||(this.beginPath(),this.rect(Je,We,Ze,un),this.stroke())},Me.prototype.clearRect=function(Je,We,Ze,un){if(isNaN(Je)||isNaN(We)||isNaN(Ze)||isNaN(un))throw a.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(Je,We,Ze,un))},Me.prototype.save=function(Je){Je=typeof Je!="boolean"||Je;for(var We=this.pdf.internal.getCurrentPageInfo().pageNumber,Ze=0;Ze<this.pdf.internal.getNumberOfPages();Ze++)this.pdf.setPage(Ze+1),this.pdf.internal.out("q");if(this.pdf.setPage(We),Je){this.ctx.fontSize=this.pdf.internal.getFontSize();var un=new ke(this.ctx);this.ctxStack.push(this.ctx),this.ctx=un}},Me.prototype.restore=function(Je){Je=typeof Je!="boolean"||Je;for(var We=this.pdf.internal.getCurrentPageInfo().pageNumber,Ze=0;Ze<this.pdf.internal.getNumberOfPages();Ze++)this.pdf.setPage(Ze+1),this.pdf.internal.out("Q");this.pdf.setPage(We),Je&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},Me.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var Fe=function(Je){var We,Ze,un,yn;if(Je.isCanvasGradient===!0&&(Je=Je.getColor()),!Je)return{r:0,g:0,b:0,a:0,style:Je};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(Je))We=0,Ze=0,un=0,yn=0;else{var _n=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(Je);if(_n!==null)We=parseInt(_n[1]),Ze=parseInt(_n[2]),un=parseInt(_n[3]),yn=1;else if((_n=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(Je))!==null)We=parseInt(_n[1]),Ze=parseInt(_n[2]),un=parseInt(_n[3]),yn=parseFloat(_n[4]);else{if(yn=1,typeof Je=="string"&&Je.charAt(0)!=="#"){var wn=new f(Je);Je=wn.ok?wn.toHex():"#000000"}Je.length===4?(We=Je.substring(1,2),We+=We,Ze=Je.substring(2,3),Ze+=Ze,un=Je.substring(3,4),un+=un):(We=Je.substring(1,3),Ze=Je.substring(3,5),un=Je.substring(5,7)),We=parseInt(We,16),Ze=parseInt(Ze,16),un=parseInt(un,16)}}return{r:We,g:Ze,b:un,a:yn,style:Je}},Ve=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},Oe=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};Me.prototype.fillText=function(Je,We,Ze,un){if(isNaN(We)||isNaN(Ze)||typeof Je!="string")throw a.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(un=isNaN(un)?void 0:un,!Ve.call(this)){var yn=bn(this.ctx.transform.rotation),_n=this.ctx.transform.scaleX;en.call(this,{text:Je,x:We,y:Ze,scale:_n,angle:yn,align:this.textAlign,maxWidth:un})}},Me.prototype.strokeText=function(Je,We,Ze,un){if(isNaN(We)||isNaN(Ze)||typeof Je!="string")throw a.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!Oe.call(this)){un=isNaN(un)?void 0:un;var yn=bn(this.ctx.transform.rotation),_n=this.ctx.transform.scaleX;en.call(this,{text:Je,x:We,y:Ze,scale:_n,renderingMode:"stroke",angle:yn,align:this.textAlign,maxWidth:un})}},Me.prototype.measureText=function(Je){if(typeof Je!="string")throw a.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var We=this.pdf,Ze=this.pdf.internal.scaleFactor,un=We.internal.getFontSize(),yn=We.getStringUnitWidth(Je)*un/We.internal.scaleFactor,_n=function(wn){var kn=(wn=wn||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return kn}}),this};return new _n({width:yn*=Math.round(96*Ze/72*1e4)/1e4})},Me.prototype.scale=function(Je,We){if(isNaN(Je)||isNaN(We))throw a.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Ze=new Ce(Je,0,0,We,0,0);this.ctx.transform=this.ctx.transform.multiply(Ze)},Me.prototype.rotate=function(Je){if(isNaN(Je))throw a.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var We=new Ce(Math.cos(Je),Math.sin(Je),-Math.sin(Je),Math.cos(Je),0,0);this.ctx.transform=this.ctx.transform.multiply(We)},Me.prototype.translate=function(Je,We){if(isNaN(Je)||isNaN(We))throw a.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Ze=new Ce(1,0,0,1,Je,We);this.ctx.transform=this.ctx.transform.multiply(Ze)},Me.prototype.transform=function(Je,We,Ze,un,yn,_n){if(isNaN(Je)||isNaN(We)||isNaN(Ze)||isNaN(un)||isNaN(yn)||isNaN(_n))throw a.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var wn=new Ce(Je,We,Ze,un,yn,_n);this.ctx.transform=this.ctx.transform.multiply(wn)},Me.prototype.setTransform=function(Je,We,Ze,un,yn,_n){Je=isNaN(Je)?1:Je,We=isNaN(We)?0:We,Ze=isNaN(Ze)?0:Ze,un=isNaN(un)?1:un,yn=isNaN(yn)?0:yn,_n=isNaN(_n)?0:_n,this.ctx.transform=new Ce(Je,We,Ze,un,yn,_n)};var $e=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};Me.prototype.drawImage=function(Je,We,Ze,un,yn,_n,wn,kn,$n){var Ln=this.pdf.getImageProperties(Je),Gn=1,Yn=1,ii=1,Wn=1;un!==void 0&&kn!==void 0&&(ii=kn/un,Wn=$n/yn,Gn=Ln.width/un*kn/un,Yn=Ln.height/yn*$n/yn),_n===void 0&&(_n=We,wn=Ze,We=0,Ze=0),un!==void 0&&kn===void 0&&(kn=un,$n=yn),un===void 0&&kn===void 0&&(kn=Ln.width,$n=Ln.height);for(var Pn,Zn=this.ctx.transform.decompose(),mn=bn(Zn.rotate.shx),Cn=new Ce,jn=(Cn=(Cn=(Cn=Cn.multiply(Zn.translate)).multiply(Zn.skew)).multiply(Zn.scale)).applyToRectangle(new Re(_n-We*ii,wn-Ze*Wn,un*Gn,yn*Yn)),Rn=Ge.call(this,jn),Dn=[],Jn=0;Jn<Rn.length;Jn+=1)Dn.indexOf(Rn[Jn])===-1&&Dn.push(Rn[Jn]);if(Qe(Dn),this.autoPaging)for(var Qn=Dn[0],qn=Dn[Dn.length-1],yi=Qn;yi<qn+1;yi++){this.pdf.setPage(yi);var di=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],zi=yi===1?this.posY+this.margin[0]:this.margin[0],Ni=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Gi=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ui=yi===1?0:Ni+(yi-2)*Gi;if(this.ctx.clip_path.length!==0){var Vi=this.path;Pn=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Ye(Pn,this.posX+this.margin[3],-ui+zi+this.ctx.prevPageLastElemOffset),tn.call(this,"fill",!0),this.path=Vi}var Di=JSON.parse(JSON.stringify(jn));Di=Ye([Di],this.posX+this.margin[3],-ui+zi+this.ctx.prevPageLastElemOffset)[0];var Xi=(yi>Qn||yi<qn)&&$e.call(this);Xi&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],di,Gi,null).clip().discardPath()),this.pdf.addImage(Je,"JPEG",Di.x,Di.y,Di.w,Di.h,null,null,mn),Xi&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(Je,"JPEG",jn.x,jn.y,jn.w,jn.h,null,null,mn)};var Ge=function(Je,We,Ze){var un=[];We=We||this.pdf.internal.pageSize.width,Ze=Ze||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var yn=this.posY+this.ctx.prevPageLastElemOffset;switch(Je.type){default:case"mt":case"lt":un.push(Math.floor((Je.y+yn)/Ze)+1);break;case"arc":un.push(Math.floor((Je.y+yn-Je.radius)/Ze)+1),un.push(Math.floor((Je.y+yn+Je.radius)/Ze)+1);break;case"qct":var _n=fn(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Je.x1,Je.y1,Je.x,Je.y);un.push(Math.floor((_n.y+yn)/Ze)+1),un.push(Math.floor((_n.y+_n.h+yn)/Ze)+1);break;case"bct":var wn=An(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Je.x1,Je.y1,Je.x2,Je.y2,Je.x,Je.y);un.push(Math.floor((wn.y+yn)/Ze)+1),un.push(Math.floor((wn.y+wn.h+yn)/Ze)+1);break;case"rect":un.push(Math.floor((Je.y+yn)/Ze)+1),un.push(Math.floor((Je.y+Je.h+yn)/Ze)+1)}for(var kn=0;kn<un.length;kn+=1)for(;this.pdf.internal.getNumberOfPages()<un[kn];)Ue.call(this);return un},Ue=function(){var Je=this.fillStyle,We=this.strokeStyle,Ze=this.font,un=this.lineCap,yn=this.lineWidth,_n=this.lineJoin;this.pdf.addPage(),this.fillStyle=Je,this.strokeStyle=We,this.font=Ze,this.lineCap=un,this.lineWidth=yn,this.lineJoin=_n},Ye=function(Je,We,Ze){for(var un=0;un<Je.length;un++)switch(Je[un].type){case"bct":Je[un].x2+=We,Je[un].y2+=Ze;case"qct":Je[un].x1+=We,Je[un].y1+=Ze;case"mt":case"lt":case"arc":default:Je[un].x+=We,Je[un].y+=Ze}return Je},Qe=function(Je){return Je.sort((function(We,Ze){return We-Ze}))},rn=function(Je,We){for(var Ze,un,yn=this.fillStyle,_n=this.strokeStyle,wn=this.lineCap,kn=this.lineWidth,$n=Math.abs(kn*this.ctx.transform.scaleX),Ln=this.lineJoin,Gn=JSON.parse(JSON.stringify(this.path)),Yn=JSON.parse(JSON.stringify(this.path)),ii=[],Wn=0;Wn<Yn.length;Wn++)if(Yn[Wn].x!==void 0)for(var Pn=Ge.call(this,Yn[Wn]),Zn=0;Zn<Pn.length;Zn+=1)ii.indexOf(Pn[Zn])===-1&&ii.push(Pn[Zn]);for(var mn=0;mn<ii.length;mn++)for(;this.pdf.internal.getNumberOfPages()<ii[mn];)Ue.call(this);if(Qe(ii),this.autoPaging)for(var Cn=ii[0],jn=ii[ii.length-1],Rn=Cn;Rn<jn+1;Rn++){this.pdf.setPage(Rn),this.fillStyle=yn,this.strokeStyle=_n,this.lineCap=wn,this.lineWidth=$n,this.lineJoin=Ln;var Dn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Jn=Rn===1?this.posY+this.margin[0]:this.margin[0],Qn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],yi=Rn===1?0:Qn+(Rn-2)*qn;if(this.ctx.clip_path.length!==0){var di=this.path;Ze=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Ye(Ze,this.posX+this.margin[3],-yi+Jn+this.ctx.prevPageLastElemOffset),tn.call(this,Je,!0),this.path=di}if(un=JSON.parse(JSON.stringify(Gn)),this.path=Ye(un,this.posX+this.margin[3],-yi+Jn+this.ctx.prevPageLastElemOffset),We===!1||Rn===0){var zi=(Rn>Cn||Rn<jn)&&$e.call(this);zi&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Dn,qn,null).clip().discardPath()),tn.call(this,Je,We),zi&&this.pdf.restoreGraphicsState()}this.lineWidth=kn}else this.lineWidth=$n,tn.call(this,Je,We),this.lineWidth=kn;this.path=Gn},tn=function(Je,We){if((Je!=="stroke"||We||!Oe.call(this))&&(Je==="stroke"||We||!Ve.call(this))){for(var Ze,un,yn=[],_n=this.path,wn=0;wn<_n.length;wn++){var kn=_n[wn];switch(kn.type){case"begin":yn.push({begin:!0});break;case"close":yn.push({close:!0});break;case"mt":yn.push({start:kn,deltas:[],abs:[]});break;case"lt":var $n=yn.length;if(_n[wn-1]&&!isNaN(_n[wn-1].x)&&(Ze=[kn.x-_n[wn-1].x,kn.y-_n[wn-1].y],$n>0)){for(;$n>=0;$n--)if(yn[$n-1].close!==!0&&yn[$n-1].begin!==!0){yn[$n-1].deltas.push(Ze),yn[$n-1].abs.push(kn);break}}break;case"bct":Ze=[kn.x1-_n[wn-1].x,kn.y1-_n[wn-1].y,kn.x2-_n[wn-1].x,kn.y2-_n[wn-1].y,kn.x-_n[wn-1].x,kn.y-_n[wn-1].y],yn[yn.length-1].deltas.push(Ze);break;case"qct":var Ln=_n[wn-1].x+2/3*(kn.x1-_n[wn-1].x),Gn=_n[wn-1].y+2/3*(kn.y1-_n[wn-1].y),Yn=kn.x+2/3*(kn.x1-kn.x),ii=kn.y+2/3*(kn.y1-kn.y),Wn=kn.x,Pn=kn.y;Ze=[Ln-_n[wn-1].x,Gn-_n[wn-1].y,Yn-_n[wn-1].x,ii-_n[wn-1].y,Wn-_n[wn-1].x,Pn-_n[wn-1].y],yn[yn.length-1].deltas.push(Ze);break;case"arc":yn.push({deltas:[],abs:[],arc:!0}),Array.isArray(yn[yn.length-1].abs)&&yn[yn.length-1].abs.push(kn)}}un=We?null:Je==="stroke"?"stroke":"fill";for(var Zn=!1,mn=0;mn<yn.length;mn++)if(yn[mn].arc)for(var Cn=yn[mn].abs,jn=0;jn<Cn.length;jn++){var Rn=Cn[jn];Rn.type==="arc"?Ke.call(this,Rn.x,Rn.y,Rn.radius,Rn.startAngle,Rn.endAngle,Rn.counterclockwise,void 0,We,!Zn):cn.call(this,Rn.x,Rn.y),Zn=!0}else if(yn[mn].close===!0)this.pdf.internal.out("h"),Zn=!1;else if(yn[mn].begin!==!0){var Dn=yn[mn].start.x,Jn=yn[mn].start.y;Sn.call(this,yn[mn].deltas,Dn,Jn),Zn=!0}un&&sn.call(this,un),We&&gn.call(this)}},an=function(Je){var We=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Ze=We*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return Je-Ze;case"top":return Je+We-Ze;case"hanging":return Je+We-2*Ze;case"middle":return Je+We/2-Ze;case"ideographic":return Je;case"alphabetic":default:return Je}},qe=function(Je){return Je+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};Me.prototype.createLinearGradient=function(){var Je=function(){};return Je.colorStops=[],Je.addColorStop=function(We,Ze){this.colorStops.push([We,Ze])},Je.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},Je.isCanvasGradient=!0,Je},Me.prototype.createPattern=function(){return this.createLinearGradient()},Me.prototype.createRadialGradient=function(){return this.createLinearGradient()};var Ke=function(Je,We,Ze,un,yn,_n,wn,kn,$n){for(var Ln=hn.call(this,Ze,un,yn,_n),Gn=0;Gn<Ln.length;Gn++){var Yn=Ln[Gn];Gn===0&&($n?He.call(this,Yn.x1+Je,Yn.y1+We):cn.call(this,Yn.x1+Je,Yn.y1+We)),Tn.call(this,Je,We,Yn.x2,Yn.y2,Yn.x3,Yn.y3,Yn.x4,Yn.y4)}kn?gn.call(this):sn.call(this,wn)},sn=function(Je){switch(Je){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},gn=function(){this.pdf.clip(),this.pdf.discardPath()},He=function(Je,We){this.pdf.internal.out(r(Je)+" "+xe(We)+" m")},en=function(Je){var We;switch(Je.align){case"right":case"end":We="right";break;case"center":We="center";break;case"left":case"start":default:We="left"}var Ze=this.pdf.getTextDimensions(Je.text),un=an.call(this,Je.y),yn=qe.call(this,un)-Ze.h,_n=this.ctx.transform.applyToPoint(new Pe(Je.x,un)),wn=this.ctx.transform.decompose(),kn=new Ce;kn=(kn=(kn=kn.multiply(wn.translate)).multiply(wn.skew)).multiply(wn.scale);for(var $n,Ln,Gn,Yn=this.ctx.transform.applyToRectangle(new Re(Je.x,un,Ze.w,Ze.h)),ii=kn.applyToRectangle(new Re(Je.x,yn,Ze.w,Ze.h)),Wn=Ge.call(this,ii),Pn=[],Zn=0;Zn<Wn.length;Zn+=1)Pn.indexOf(Wn[Zn])===-1&&Pn.push(Wn[Zn]);if(Qe(Pn),this.autoPaging)for(var mn=Pn[0],Cn=Pn[Pn.length-1],jn=mn;jn<Cn+1;jn++){this.pdf.setPage(jn);var Rn=jn===1?this.posY+this.margin[0]:this.margin[0],Dn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Jn=this.pdf.internal.pageSize.height-this.margin[2],Qn=Jn-this.margin[0],qn=this.pdf.internal.pageSize.width-this.margin[1],yi=qn-this.margin[3],di=jn===1?0:Dn+(jn-2)*Qn;if(this.ctx.clip_path.length!==0){var zi=this.path;$n=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Ye($n,this.posX+this.margin[3],-1*di+Rn),tn.call(this,"fill",!0),this.path=zi}var Ni=Ye([JSON.parse(JSON.stringify(ii))],this.posX+this.margin[3],-di+Rn+this.ctx.prevPageLastElemOffset)[0];Je.scale>=.01&&(Ln=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ln*Je.scale),Gn=this.lineWidth,this.lineWidth=Gn*Je.scale);var Gi=this.autoPaging!=="text";if(Gi||Ni.y+Ni.h<=Jn){if(Gi||Ni.y>=Rn&&Ni.x<=qn){var ui=Gi?Je.text:this.pdf.splitTextToSize(Je.text,Je.maxWidth||qn-Ni.x)[0],Vi=Ye([JSON.parse(JSON.stringify(Yn))],this.posX+this.margin[3],-di+Rn+this.ctx.prevPageLastElemOffset)[0],Di=Gi&&(jn>mn||jn<Cn)&&$e.call(this);Di&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],yi,Qn,null).clip().discardPath()),this.pdf.text(ui,Vi.x,Vi.y,{angle:Je.angle,align:We,renderingMode:Je.renderingMode}),Di&&this.pdf.restoreGraphicsState()}}else Ni.y<Jn&&(this.ctx.prevPageLastElemOffset+=Jn-Ni.y);Je.scale>=.01&&(this.pdf.setFontSize(Ln),this.lineWidth=Gn)}else Je.scale>=.01&&(Ln=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ln*Je.scale),Gn=this.lineWidth,this.lineWidth=Gn*Je.scale),this.pdf.text(Je.text,_n.x+this.posX,_n.y+this.posY,{angle:Je.angle,align:We,renderingMode:Je.renderingMode,maxWidth:Je.maxWidth}),Je.scale>=.01&&(this.pdf.setFontSize(Ln),this.lineWidth=Gn)},cn=function(Je,We,Ze,un){Ze=Ze||0,un=un||0,this.pdf.internal.out(r(Je+Ze)+" "+xe(We+un)+" l")},Sn=function(Je,We,Ze){return this.pdf.lines(Je,We,Ze,null,null)},Tn=function(Je,We,Ze,un,yn,_n,wn,kn){this.pdf.internal.out([e(Ee(Ze+Je)),e(Ae(un+We)),e(Ee(yn+Je)),e(Ae(_n+We)),e(Ee(wn+Je)),e(Ae(kn+We)),"c"].join(" "))},hn=function(Je,We,Ze,un){for(var yn=2*Math.PI,_n=Math.PI/2;We>Ze;)We-=yn;var wn=Math.abs(Ze-We);wn<yn&&un&&(wn=yn-wn);for(var kn=[],$n=un?-1:1,Ln=We;wn>1e-5;){var Gn=Ln+$n*Math.min(wn,_n);kn.push(pn.call(this,Je,Ln,Gn)),wn-=Math.abs(Gn-Ln),Ln=Gn}return kn},pn=function(Je,We,Ze){var un=(Ze-We)/2,yn=Je*Math.cos(un),_n=Je*Math.sin(un),wn=yn,kn=-_n,$n=wn*wn+kn*kn,Ln=$n+wn*yn+kn*_n,Gn=4/3*(Math.sqrt(2*$n*Ln)-Ln)/(wn*_n-kn*yn),Yn=wn-Gn*kn,ii=kn+Gn*wn,Wn=Yn,Pn=-ii,Zn=un+We,mn=Math.cos(Zn),Cn=Math.sin(Zn);return{x1:Je*Math.cos(We),y1:Je*Math.sin(We),x2:Yn*mn-ii*Cn,y2:Yn*Cn+ii*mn,x3:Wn*mn-Pn*Cn,y3:Wn*Cn+Pn*mn,x4:Je*Math.cos(Ze),y4:Je*Math.sin(Ze)}},bn=function(Je){return 180*Je/Math.PI},fn=function(Je,We,Ze,un,yn,_n){var wn=Je+.5*(Ze-Je),kn=We+.5*(un-We),$n=yn+.5*(Ze-yn),Ln=_n+.5*(un-_n),Gn=Math.min(Je,yn,wn,$n),Yn=Math.max(Je,yn,wn,$n),ii=Math.min(We,_n,kn,Ln),Wn=Math.max(We,_n,kn,Ln);return new Re(Gn,ii,Yn-Gn,Wn-ii)},An=function(Je,We,Ze,un,yn,_n,wn,kn){var $n,Ln,Gn,Yn,ii,Wn,Pn,Zn,mn,Cn,jn,Rn,Dn,Jn,Qn=Ze-Je,qn=un-We,yi=yn-Ze,di=_n-un,zi=wn-yn,Ni=kn-_n;for(Ln=0;Ln<41;Ln++)mn=(Pn=(Gn=Je+($n=Ln/40)*Qn)+$n*((ii=Ze+$n*yi)-Gn))+$n*(ii+$n*(yn+$n*zi-ii)-Pn),Cn=(Zn=(Yn=We+$n*qn)+$n*((Wn=un+$n*di)-Yn))+$n*(Wn+$n*(_n+$n*Ni-Wn)-Zn),Ln==0?(jn=mn,Rn=Cn,Dn=mn,Jn=Cn):(jn=Math.min(jn,mn),Rn=Math.min(Rn,Cn),Dn=Math.max(Dn,mn),Jn=Math.max(Jn,Cn));return new Re(Math.round(jn),Math.round(Rn),Math.round(Dn-jn),Math.round(Jn-Rn))},xn=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var Je,We,Ze=(Je=this.ctx.lineDash,We=this.ctx.lineDashOffset,JSON.stringify({lineDash:Je,lineDashOffset:We}));this.prevLineDash!==Ze&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Ze)}}})(E.API),(function(t){var e=function(Ae){var Pe,Re,Ce,Be,ke,Me,Fe,Ve,Oe,$e;for(Re=[],Ce=0,Be=(Ae+=Pe="\0\0\0\0".slice(Ae.length%4||4)).length;Be>Ce;Ce+=4)(ke=(Ae.charCodeAt(Ce)<<24)+(Ae.charCodeAt(Ce+1)<<16)+(Ae.charCodeAt(Ce+2)<<8)+Ae.charCodeAt(Ce+3))!==0?(Me=(ke=((ke=((ke=((ke=(ke-($e=ke%85))/85)-(Oe=ke%85))/85)-(Ve=ke%85))/85)-(Fe=ke%85))/85)%85,Re.push(Me+33,Fe+33,Ve+33,Oe+33,$e+33)):Re.push(122);return(function(Ge,Ue){for(var Ye=Ue;Ye>0;Ye--)Ge.pop()})(Re,Pe.length),String.fromCharCode.apply(String,Re)+"~>"},r=function(Ae){var Pe,Re,Ce,Be,ke,Me=String,Fe="length",Ve=255,Oe="charCodeAt",$e="slice",Ge="replace";for(Ae[$e](-2),Ae=Ae[$e](0,-2)[Ge](/\s/g,"")[Ge]("z","!!!!!"),Ce=[],Be=0,ke=(Ae+=Pe="uuuuu"[$e](Ae[Fe]%5||5))[Fe];ke>Be;Be+=5)Re=52200625*(Ae[Oe](Be)-33)+614125*(Ae[Oe](Be+1)-33)+7225*(Ae[Oe](Be+2)-33)+85*(Ae[Oe](Be+3)-33)+(Ae[Oe](Be+4)-33),Ce.push(Ve&Re>>24,Ve&Re>>16,Ve&Re>>8,Ve&Re);return(function(Ue,Ye){for(var Qe=Ye;Qe>0;Qe--)Ue.pop()})(Ce,Pe[Fe]),Me.fromCharCode.apply(Me,Ce)},xe=function(Ae){var Pe=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((Ae=Ae.replace(/\s/g,"")).indexOf(">")!==-1&&(Ae=Ae.substr(0,Ae.indexOf(">"))),Ae.length%2&&(Ae+="0"),Pe.test(Ae)===!1)return"";for(var Re="",Ce=0;Ce<Ae.length;Ce+=2)Re+=String.fromCharCode("0x"+(Ae[Ce]+Ae[Ce+1]));return Re},Ee=function(Ae){for(var Pe=new Uint8Array(Ae.length),Re=Ae.length;Re--;)Pe[Re]=Ae.charCodeAt(Re);return Ae=(Pe=zlibSync(Pe)).reduce((function(Ce,Be){return Ce+String.fromCharCode(Be)}),"")};t.processDataByFilters=function(Ae,Pe){var Re=0,Ce=Ae||"",Be=[];for(typeof(Pe=Pe||[])=="string"&&(Pe=[Pe]),Re=0;Re<Pe.length;Re+=1)switch(Pe[Re]){case"ASCII85Decode":case"/ASCII85Decode":Ce=r(Ce),Be.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":Ce=e(Ce),Be.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":Ce=xe(Ce),Be.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":Ce=Ce.split("").map((function(ke){return("0"+ke.charCodeAt().toString(16)).slice(-2)})).join("")+">",Be.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":Ce=Ee(Ce),Be.push("/FlateDecode");break;default:throw new Error('The filter: "'+Pe[Re]+'" is not implemented')}return{data:Ce,reverseChain:Be.reverse().join(" ")}}})(E.API),(function(t){t.loadFile=function(e,r,xe){return(function(Ee,Ae,Pe){Ae=Ae!==!1,Pe=typeof Pe=="function"?Pe:function(){};var Re=void 0;try{Re=(function(Ce,Be,ke){var Me=new XMLHttpRequest,Fe=0,Ve=function(Oe){var $e=Oe.length,Ge=[],Ue=String.fromCharCode;for(Fe=0;Fe<$e;Fe+=1)Ge.push(Ue(255&Oe.charCodeAt(Fe)));return Ge.join("")};if(Me.open("GET",Ce,!Be),Me.overrideMimeType("text/plain; charset=x-user-defined"),Be===!1&&(Me.onload=function(){Me.status===200?ke(Ve(this.responseText)):ke(void 0)}),Me.send(null),Be&&Me.status===200)return Ve(Me.responseText)})(Ee,Ae,Pe)}catch{}return Re})(e,r,xe)},t.loadImageFile=t.loadFile})(E.API),(function(t){function e(){return(n.html2canvas?Promise.resolve(n.html2canvas):__vitePreload(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch((function(Pe){return Promise.reject(new Error("Could not load html2canvas: "+Pe))})).then((function(Pe){return Pe.default?Pe.default:Pe}))}function r(){return(n.DOMPurify?Promise.resolve(n.DOMPurify):__vitePreload(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch((function(Pe){return Promise.reject(new Error("Could not load dompurify: "+Pe))})).then((function(Pe){return Pe.default?Pe.default:Pe}))}var xe=function(Pe){var Re=_typeof$2(Pe);return Re==="undefined"?"undefined":Re==="string"||Pe instanceof String?"string":Re==="number"||Pe instanceof Number?"number":Re==="function"||Pe instanceof Function?"function":Pe&&Pe.constructor===Array?"array":Pe&&Pe.nodeType===1?"element":Re==="object"?"object":"unknown"},Ee=function(Pe,Re){var Ce=document.createElement(Pe);for(var Be in Re.className&&(Ce.className=Re.className),Re.innerHTML&&Re.dompurify&&(Ce.innerHTML=Re.dompurify.sanitize(Re.innerHTML)),Re.style)Ce.style[Be]=Re.style[Be];return Ce},Ae=function Pe(Re){var Ce=Object.assign(Pe.convert(Promise.resolve()),JSON.parse(JSON.stringify(Pe.template))),Be=Pe.convert(Promise.resolve(),Ce);return Be=(Be=Be.setProgress(1,Pe,1,[Pe])).set(Re)};(Ae.prototype=Object.create(Promise.prototype)).constructor=Ae,Ae.convert=function(Pe,Re){return Pe.__proto__=Re||Ae.prototype,Pe},Ae.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},Ae.prototype.from=function(Pe,Re){return this.then((function(){switch(Re=Re||(function(Ce){switch(xe(Ce)){case"string":return"string";case"element":return Ce.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(Pe)){case"string":return this.then(r).then((function(Ce){return this.set({src:Ee("div",{innerHTML:Pe,dompurify:Ce})})}));case"element":return this.set({src:Pe});case"canvas":return this.set({canvas:Pe});case"img":return this.set({img:Pe});default:return this.error("Unknown source type.")}}))},Ae.prototype.to=function(Pe){switch(Pe){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},Ae.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var Pe={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},Re=(function Ce(Be,ke){for(var Me=Be.nodeType===3?document.createTextNode(Be.nodeValue):Be.cloneNode(!1),Fe=Be.firstChild;Fe;Fe=Fe.nextSibling)ke!==!0&&Fe.nodeType===1&&Fe.nodeName==="SCRIPT"||Me.appendChild(Ce(Fe,ke));return Be.nodeType===1&&(Be.nodeName==="CANVAS"?(Me.width=Be.width,Me.height=Be.height,Me.getContext("2d").drawImage(Be,0,0)):Be.nodeName!=="TEXTAREA"&&Be.nodeName!=="SELECT"||(Me.value=Be.value),Me.addEventListener("load",(function(){Me.scrollTop=Be.scrollTop,Me.scrollLeft=Be.scrollLeft}),!0)),Me})(this.prop.src,this.opt.html2canvas.javascriptEnabled);Re.tagName==="BODY"&&(Pe.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=Ee("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=Ee("div",{className:"html2pdf__container",style:Pe}),this.prop.container.appendChild(Re),this.prop.container.firstChild.appendChild(Ee("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},Ae.prototype.toCanvas=function(){var Pe=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(Pe).then(e).then((function(Re){var Ce=Object.assign({},this.opt.html2canvas);return delete Ce.onrendered,Re(this.prop.container,Ce)})).then((function(Re){(this.opt.html2canvas.onrendered||function(){})(Re),this.prop.canvas=Re,document.body.removeChild(this.prop.overlay)}))},Ae.prototype.toContext2d=function(){var Pe=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(Pe).then(e).then((function(Re){var Ce=this.opt.jsPDF,Be=this.opt.fontFaces,ke=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,Me=Object.assign({async:!0,allowTaint:!0,scale:ke,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete Me.onrendered,Ce.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,Ce.context2d.posX=this.opt.x,Ce.context2d.posY=this.opt.y,Ce.context2d.margin=this.opt.margin,Ce.context2d.fontFaces=Be,Be)for(var Fe=0;Fe<Be.length;++Fe){var Ve=Be[Fe],Oe=Ve.src.find((function($e){return $e.format==="truetype"}));Oe&&Ce.addFont(Oe.url,Ve.ref.name,Ve.ref.style)}return Me.windowHeight=Me.windowHeight||0,Me.windowHeight=Me.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):Me.windowHeight,Ce.context2d.save(!0),Re(this.prop.container,Me)})).then((function(Re){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(Re),this.prop.canvas=Re,document.body.removeChild(this.prop.overlay)}))},Ae.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var Pe=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=Pe}))},Ae.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},Ae.prototype.output=function(Pe,Re,Ce){return(Ce=Ce||"pdf").toLowerCase()==="img"||Ce.toLowerCase()==="image"?this.outputImg(Pe,Re):this.outputPdf(Pe,Re)},Ae.prototype.outputPdf=function(Pe,Re){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(Pe,Re)}))},Ae.prototype.outputImg=function(Pe){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(Pe){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+Pe+'" is not supported.'}}))},Ae.prototype.save=function(Pe){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(Pe?{filename:Pe}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},Ae.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},Ae.prototype.set=function(Pe){if(xe(Pe)!=="object")return this;var Re=Object.keys(Pe||{}).map((function(Ce){if(Ce in Ae.template.prop)return function(){this.prop[Ce]=Pe[Ce]};switch(Ce){case"margin":return this.setMargin.bind(this,Pe.margin);case"jsPDF":return function(){return this.opt.jsPDF=Pe.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,Pe.pageSize);default:return function(){this.opt[Ce]=Pe[Ce]}}}),this);return this.then((function(){return this.thenList(Re)}))},Ae.prototype.get=function(Pe,Re){return this.then((function(){var Ce=Pe in Ae.template.prop?this.prop[Pe]:this.opt[Pe];return Re?Re(Ce):Ce}))},Ae.prototype.setMargin=function(Pe){return this.then((function(){switch(xe(Pe)){case"number":Pe=[Pe,Pe,Pe,Pe];case"array":if(Pe.length===2&&(Pe=[Pe[0],Pe[1],Pe[0],Pe[1]]),Pe.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=Pe})).then(this.setPageSize)},Ae.prototype.setPageSize=function(Pe){function Re(Ce,Be){return Math.floor(Ce*Be/72*96)}return this.then((function(){(Pe=Pe||E.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(Pe.inner={width:Pe.width-this.opt.margin[1]-this.opt.margin[3],height:Pe.height-this.opt.margin[0]-this.opt.margin[2]},Pe.inner.px={width:Re(Pe.inner.width,Pe.k),height:Re(Pe.inner.height,Pe.k)},Pe.inner.ratio=Pe.inner.height/Pe.inner.width),this.prop.pageSize=Pe}))},Ae.prototype.setProgress=function(Pe,Re,Ce,Be){return Pe!=null&&(this.progress.val=Pe),Re!=null&&(this.progress.state=Re),Ce!=null&&(this.progress.n=Ce),Be!=null&&(this.progress.stack=Be),this.progress.ratio=this.progress.val/this.progress.state,this},Ae.prototype.updateProgress=function(Pe,Re,Ce,Be){return this.setProgress(Pe?this.progress.val+Pe:null,Re||null,Ce?this.progress.n+Ce:null,Be?this.progress.stack.concat(Be):null)},Ae.prototype.then=function(Pe,Re){var Ce=this;return this.thenCore(Pe,Re,(function(Be,ke){return Ce.updateProgress(null,null,1,[Be]),Promise.prototype.then.call(this,(function(Me){return Ce.updateProgress(null,Be),Me})).then(Be,ke).then((function(Me){return Ce.updateProgress(1),Me}))}))},Ae.prototype.thenCore=function(Pe,Re,Ce){Ce=Ce||Promise.prototype.then,Pe&&(Pe=Pe.bind(this)),Re&&(Re=Re.bind(this));var Be=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:Ae.convert(Object.assign({},this),Promise.prototype),ke=Ce.call(Be,Pe,Re);return Ae.convert(ke,this.__proto__)},Ae.prototype.thenExternal=function(Pe,Re){return Promise.prototype.then.call(this,Pe,Re)},Ae.prototype.thenList=function(Pe){var Re=this;return Pe.forEach((function(Ce){Re=Re.thenCore(Ce)})),Re},Ae.prototype.catch=function(Pe){Pe&&(Pe=Pe.bind(this));var Re=Promise.prototype.catch.call(this,Pe);return Ae.convert(Re,this)},Ae.prototype.catchExternal=function(Pe){return Promise.prototype.catch.call(this,Pe)},Ae.prototype.error=function(Pe){return this.then((function(){throw new Error(Pe)}))},Ae.prototype.using=Ae.prototype.set,Ae.prototype.saveAs=Ae.prototype.save,Ae.prototype.export=Ae.prototype.output,Ae.prototype.run=Ae.prototype.then,E.getPageSize=function(Pe,Re,Ce){if(_typeof$2(Pe)==="object"){var Be=Pe;Pe=Be.orientation,Re=Be.unit||Re,Ce=Be.format||Ce}Re=Re||"mm",Ce=Ce||"a4",Pe=(""+(Pe||"P")).toLowerCase();var ke,Me=(""+Ce).toLowerCase(),Fe={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(Re){case"pt":ke=1;break;case"mm":ke=72/25.4;break;case"cm":ke=72/2.54;break;case"in":ke=72;break;case"px":ke=.75;break;case"pc":case"em":ke=12;break;case"ex":ke=6;break;default:throw"Invalid unit: "+Re}var Ve,Oe=0,$e=0;if(Fe.hasOwnProperty(Me))Oe=Fe[Me][1]/ke,$e=Fe[Me][0]/ke;else try{Oe=Ce[1],$e=Ce[0]}catch{throw new Error("Invalid format: "+Ce)}if(Pe==="p"||Pe==="portrait")Pe="p",$e>Oe&&(Ve=$e,$e=Oe,Oe=Ve);else{if(Pe!=="l"&&Pe!=="landscape")throw"Invalid orientation: "+Pe;Pe="l",Oe>$e&&(Ve=$e,$e=Oe,Oe=Ve)}return{width:$e,height:Oe,unit:Re,k:ke,orientation:Pe}},t.html=function(Pe,Re){(Re=Re||{}).callback=Re.callback||function(){},Re.html2canvas=Re.html2canvas||{},Re.html2canvas.canvas=Re.html2canvas.canvas||this.canvas,Re.jsPDF=Re.jsPDF||this,Re.fontFaces=Re.fontFaces?Re.fontFaces.map(jt):null;var Ce=new Ae(Re);return Re.worker?Ce:Ce.from(Pe).doCallback()}})(E.API),E.API.addJS=function(t){return Ht=t,this.internal.events.subscribe("postPutResources",(function(){Ut=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ut+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),zt=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ht+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){Ut!==void 0&&zt!==void 0&&this.internal.out("/Names <</JavaScript "+Ut+" 0 R>>")})),this},(function(t){var e;t.events.push(["postPutResources",function(){var r=this,xe=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var Ee=r.outline.render().split(/\r\n/),Ae=0;Ae<Ee.length;Ae++){var Pe=Ee[Ae],Re=xe.exec(Pe);if(Re!=null){var Ce=Re[1];r.internal.newObjectDeferredBegin(Ce,!1)}r.internal.write(Pe)}if(this.outline.createNamedDestinations){var Be=this.internal.pages.length,ke=[];for(Ae=0;Ae<Be;Ae++){var Me=r.internal.newObject();ke.push(Me);var Fe=r.internal.getPageInfo(Ae+1);r.internal.write("<< /D["+Fe.objId+" 0 R /XYZ null null null]>> endobj")}var Ve=r.internal.newObject();for(r.internal.write("<< /Names [ "),Ae=0;Ae<ke.length;Ae++)r.internal.write("(page_"+(Ae+1)+")"+ke[Ae]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+Ve+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(xe,Ee,Ae){var Pe={title:Ee,options:Ae,children:[]};return xe==null&&(xe=this.root),xe.children.push(Pe),Pe},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(xe){xe.id=r.internal.newObjectDeferred();for(var Ee=0;Ee<xe.children.length;Ee++)this.genIds_r(xe.children[Ee])},r.outline.renderRoot=function(xe){this.objStart(xe),this.line("/Type /Outlines"),xe.children.length>0&&(this.line("/First "+this.makeRef(xe.children[0])),this.line("/Last "+this.makeRef(xe.children[xe.children.length-1]))),this.line("/Count "+this.count_r({count:0},xe)),this.objEnd()},r.outline.renderItems=function(xe){for(var Ee=this.ctx.pdf.internal.getVerticalCoordinateString,Ae=0;Ae<xe.children.length;Ae++){var Pe=xe.children[Ae];this.objStart(Pe),this.line("/Title "+this.makeString(Pe.title)),this.line("/Parent "+this.makeRef(xe)),Ae>0&&this.line("/Prev "+this.makeRef(xe.children[Ae-1])),Ae<xe.children.length-1&&this.line("/Next "+this.makeRef(xe.children[Ae+1])),Pe.children.length>0&&(this.line("/First "+this.makeRef(Pe.children[0])),this.line("/Last "+this.makeRef(Pe.children[Pe.children.length-1])));var Re=this.count=this.count_r({count:0},Pe);if(Re>0&&this.line("/Count "+Re),Pe.options&&Pe.options.pageNumber){var Ce=r.internal.getPageInfo(Pe.options.pageNumber);this.line("/Dest ["+Ce.objId+" 0 R /XYZ 0 "+Ee(0)+" 0]")}this.objEnd()}for(var Be=0;Be<xe.children.length;Be++)this.renderItems(xe.children[Be])},r.outline.line=function(xe){this.ctx.val+=xe+`\r
`},r.outline.makeRef=function(xe){return xe.id+" 0 R"},r.outline.makeString=function(xe){return"("+r.internal.pdfEscape(xe)+")"},r.outline.objStart=function(xe){this.ctx.val+=`\r
`+xe.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(xe,Ee){for(var Ae=0;Ae<Ee.children.length;Ae++)xe.count++,this.count_r(xe,Ee.children[Ae]);return xe.count}}])})(E.API),(function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,xe,Ee,Ae,Pe,Re){var Ce,Be=this.decode.DCT_DECODE,ke=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=Pe||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(Ce=(function(Me){for(var Fe,Ve=256*Me.charCodeAt(4)+Me.charCodeAt(5),Oe=Me.length,$e={width:0,height:0,numcomponents:1},Ge=4;Ge<Oe;Ge+=2){if(Ge+=Ve,e.indexOf(Me.charCodeAt(Ge+1))!==-1){Fe=256*Me.charCodeAt(Ge+5)+Me.charCodeAt(Ge+6),$e={width:256*Me.charCodeAt(Ge+7)+Me.charCodeAt(Ge+8),height:Fe,numcomponents:Me.charCodeAt(Ge+9)};break}Ve=256*Me.charCodeAt(Ge+2)+Me.charCodeAt(Ge+3)}return $e})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:Re=this.color_spaces.DEVICE_GRAY;break;case 4:Re=this.color_spaces.DEVICE_CMYK;break;case 3:Re=this.color_spaces.DEVICE_RGB}ke={data:r,width:Ce.width,height:Ce.height,colorSpace:Re,bitsPerComponent:8,filter:Be,index:xe,alias:Ee}}return ke}})(E.API);var Vt,Gt,Yt,Jt,Xt,Kt=(function(){var t,e,r;function xe(Ae){var Pe,Re,Ce,Be,ke,Me,Fe,Ve,Oe,$e,Ge,Ue,Ye,Qe;for(this.data=Ae,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},Me=null;;){switch(Pe=this.readUInt32(),Oe=(function(){var rn,tn;for(tn=[],rn=0;rn<4;++rn)tn.push(String.fromCharCode(this.data[this.pos++]));return tn}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(Pe);break;case"fcTL":Me&&this.animation.frames.push(Me),this.pos+=4,Me={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},ke=this.readUInt16(),Be=this.readUInt16()||100,Me.delay=1e3*ke/Be,Me.disposeOp=this.data[this.pos++],Me.blendOp=this.data[this.pos++],Me.data=[];break;case"IDAT":case"fdAT":for(Oe==="fdAT"&&(this.pos+=4,Pe-=4),Ae=(Me!=null?Me.data:void 0)||this.imgData,Ue=0;0<=Pe?Ue<Pe:Ue>Pe;0<=Pe?++Ue:--Ue)Ae.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(Ce=this.palette.length/3,this.transparency.indexed=this.read(Pe),this.transparency.indexed.length>Ce)throw new Error("More transparent colors than palette size");if(($e=Ce-this.transparency.indexed.length)>0)for(Ye=0;0<=$e?Ye<$e:Ye>$e;0<=$e?++Ye:--Ye)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(Pe)[0];break;case 2:this.transparency.rgb=this.read(Pe)}break;case"tEXt":Fe=(Ge=this.read(Pe)).indexOf(0),Ve=String.fromCharCode.apply(String,Ge.slice(0,Fe)),this.text[Ve]=String.fromCharCode.apply(String,Ge.slice(Fe+1));break;case"IEND":return Me&&this.animation.frames.push(Me),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(Qe=this.colorType)===4||Qe===6,Re=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*Re,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=Pe}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}xe.prototype.read=function(Ae){var Pe,Re;for(Re=[],Pe=0;0<=Ae?Pe<Ae:Pe>Ae;0<=Ae?++Pe:--Pe)Re.push(this.data[this.pos++]);return Re},xe.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},xe.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},xe.prototype.decodePixels=function(Ae){var Pe=this.pixelBitlength/8,Re=new Uint8Array(this.width*this.height*Pe),Ce=0,Be=this;if(Ae==null&&(Ae=this.imgData),Ae.length===0)return new Uint8Array(0);function ke(Me,Fe,Ve,Oe){var $e,Ge,Ue,Ye,Qe,rn,tn,an,qe,Ke,sn,gn,He,en,cn,Sn,Tn,hn,pn,bn,fn,An=Math.ceil((Be.width-Me)/Ve),xn=Math.ceil((Be.height-Fe)/Oe),Je=Be.width==An&&Be.height==xn;for(en=Pe*An,gn=Je?Re:new Uint8Array(en*xn),rn=Ae.length,He=0,Ge=0;He<xn&&Ce<rn;){switch(Ae[Ce++]){case 0:for(Ye=Tn=0;Tn<en;Ye=Tn+=1)gn[Ge++]=Ae[Ce++];break;case 1:for(Ye=hn=0;hn<en;Ye=hn+=1)$e=Ae[Ce++],Qe=Ye<Pe?0:gn[Ge-Pe],gn[Ge++]=($e+Qe)%256;break;case 2:for(Ye=pn=0;pn<en;Ye=pn+=1)$e=Ae[Ce++],Ue=(Ye-Ye%Pe)/Pe,cn=He&&gn[(He-1)*en+Ue*Pe+Ye%Pe],gn[Ge++]=(cn+$e)%256;break;case 3:for(Ye=bn=0;bn<en;Ye=bn+=1)$e=Ae[Ce++],Ue=(Ye-Ye%Pe)/Pe,Qe=Ye<Pe?0:gn[Ge-Pe],cn=He&&gn[(He-1)*en+Ue*Pe+Ye%Pe],gn[Ge++]=($e+Math.floor((Qe+cn)/2))%256;break;case 4:for(Ye=fn=0;fn<en;Ye=fn+=1)$e=Ae[Ce++],Ue=(Ye-Ye%Pe)/Pe,Qe=Ye<Pe?0:gn[Ge-Pe],He===0?cn=Sn=0:(cn=gn[(He-1)*en+Ue*Pe+Ye%Pe],Sn=Ue&&gn[(He-1)*en+(Ue-1)*Pe+Ye%Pe]),tn=Qe+cn-Sn,an=Math.abs(tn-Qe),Ke=Math.abs(tn-cn),sn=Math.abs(tn-Sn),qe=an<=Ke&&an<=sn?Qe:Ke<=sn?cn:Sn,gn[Ge++]=($e+qe)%256;break;default:throw new Error("Invalid filter algorithm: "+Ae[Ce-1])}if(!Je){var We=((Fe+He*Oe)*Be.width+Me)*Pe,Ze=He*en;for(Ye=0;Ye<An;Ye+=1){for(var un=0;un<Pe;un+=1)Re[We++]=gn[Ze++];We+=(Ve-1)*Pe}}He++}}return Ae=unzlibSync(Ae),Be.interlaceMethod==1?(ke(0,0,8,8),ke(4,0,8,8),ke(0,4,4,8),ke(2,0,4,4),ke(0,2,2,4),ke(1,0,2,2),ke(0,1,1,2)):ke(0,0,1,1),Re},xe.prototype.decodePalette=function(){var Ae,Pe,Re,Ce,Be,ke,Me,Fe,Ve;for(Re=this.palette,ke=this.transparency.indexed||[],Be=new Uint8Array((ke.length||0)+Re.length),Ce=0,Ae=0,Pe=Me=0,Fe=Re.length;Me<Fe;Pe=Me+=3)Be[Ce++]=Re[Pe],Be[Ce++]=Re[Pe+1],Be[Ce++]=Re[Pe+2],Be[Ce++]=(Ve=ke[Ae++])!=null?Ve:255;return Be},xe.prototype.copyToImageData=function(Ae,Pe){var Re,Ce,Be,ke,Me,Fe,Ve,Oe,$e,Ge,Ue;if(Ce=this.colors,$e=null,Re=this.hasAlphaChannel,this.palette.length&&($e=(Ue=this._decodedPalette)!=null?Ue:this._decodedPalette=this.decodePalette(),Ce=4,Re=!0),Oe=(Be=Ae.data||Ae).length,Me=$e||Pe,ke=Fe=0,Ce===1)for(;ke<Oe;)Ve=$e?4*Pe[ke/4]:Fe,Ge=Me[Ve++],Be[ke++]=Ge,Be[ke++]=Ge,Be[ke++]=Ge,Be[ke++]=Re?Me[Ve++]:255,Fe=Ve;else for(;ke<Oe;)Ve=$e?4*Pe[ke/4]:Fe,Be[ke++]=Me[Ve++],Be[ke++]=Me[Ve++],Be[ke++]=Me[Ve++],Be[ke++]=Re?Me[Ve++]:255,Fe=Ve},xe.prototype.decode=function(){var Ae;return Ae=new Uint8Array(this.width*this.height*4),this.copyToImageData(Ae,this.decodePixels()),Ae};var Ee=function(){if(Object.prototype.toString.call(n)==="[object Window]"){try{e=n.document.createElement("canvas"),r=e.getContext("2d")}catch{return!1}return!0}return!1};return Ee(),t=function(Ae){var Pe;if(Ee()===!0)return r.width=Ae.width,r.height=Ae.height,r.clearRect(0,0,Ae.width,Ae.height),r.putImageData(Ae,0,0),(Pe=new Image).src=e.toDataURL(),Pe;throw new Error("This method requires a Browser with Canvas-capability.")},xe.prototype.decodeFrames=function(Ae){var Pe,Re,Ce,Be,ke,Me,Fe,Ve;if(this.animation){for(Ve=[],Re=ke=0,Me=(Fe=this.animation.frames).length;ke<Me;Re=++ke)Pe=Fe[Re],Ce=Ae.createImageData(Pe.width,Pe.height),Be=this.decodePixels(new Uint8Array(Pe.data)),this.copyToImageData(Ce,Be),Pe.imageData=Ce,Ve.push(Pe.image=t(Ce));return Ve}},xe.prototype.renderFrame=function(Ae,Pe){var Re,Ce,Be;return Re=(Ce=this.animation.frames)[Pe],Be=Ce[Pe-1],Pe===0&&Ae.clearRect(0,0,this.width,this.height),(Be!=null?Be.disposeOp:void 0)===1?Ae.clearRect(Be.xOffset,Be.yOffset,Be.width,Be.height):(Be!=null?Be.disposeOp:void 0)===2&&Ae.putImageData(Be.imageData,Be.xOffset,Be.yOffset),Re.blendOp===0&&Ae.clearRect(Re.xOffset,Re.yOffset,Re.width,Re.height),Ae.drawImage(Re.image,Re.xOffset,Re.yOffset)},xe.prototype.animate=function(Ae){var Pe,Re,Ce,Be,ke,Me,Fe=this;return Re=0,Me=this.animation,Be=Me.numFrames,Ce=Me.frames,ke=Me.numPlays,(Pe=function(){var Ve,Oe;if(Ve=Re++%Be,Oe=Ce[Ve],Fe.renderFrame(Ae,Ve),Be>1&&Re/Be<ke)return Fe.animation._timeout=setTimeout(Pe,Oe.delay)})()},xe.prototype.stopAnimation=function(){var Ae;return clearTimeout((Ae=this.animation)!=null?Ae._timeout:void 0)},xe.prototype.render=function(Ae){var Pe,Re;return Ae._png&&Ae._png.stopAnimation(),Ae._png=this,Ae.width=this.width,Ae.height=this.height,Pe=Ae.getContext("2d"),this.animation?(this.decodeFrames(Pe),this.animate(Pe)):(Re=Pe.createImageData(this.width,this.height),this.copyToImageData(Re,this.decodePixels()),Pe.putImageData(Re,0,0))},xe})();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Zt(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,xe=t[e++]|t[e++]<<8,Ee=t[e++],Ae=Ee>>7,Pe=1<<(7&Ee)+1;t[e++],t[e++];var Re=null,Ce=null;Ae&&(Re=e,Ce=Pe,e+=3*Pe);var Be=!0,ke=[],Me=0,Fe=null,Ve=0,Oe=null;for(this.width=r,this.height=xe;Be&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,Oe=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((He=t[e++])>=0))throw Error("Invalid block size");if(He===0)break;e+=He}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var $e=t[e++];Me=t[e++]|t[e++]<<8,Fe=t[e++],(1&$e)==0&&(Fe=null),Ve=$e>>2&7,e++;break;case 254:for(;;){if(!((He=t[e++])>=0))throw Error("Invalid block size");if(He===0)break;e+=He}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var Ge=t[e++]|t[e++]<<8,Ue=t[e++]|t[e++]<<8,Ye=t[e++]|t[e++]<<8,Qe=t[e++]|t[e++]<<8,rn=t[e++],tn=rn>>6&1,an=1<<(7&rn)+1,qe=Re,Ke=Ce,sn=!1;rn>>7&&(sn=!0,qe=e,Ke=an,e+=3*an);var gn=e;for(e++;;){var He;if(!((He=t[e++])>=0))throw Error("Invalid block size");if(He===0)break;e+=He}ke.push({x:Ge,y:Ue,width:Ye,height:Qe,has_local_palette:sn,palette_offset:qe,palette_size:Ke,data_offset:gn,data_length:e-gn,transparent_index:Fe,interlaced:!!tn,delay:Me,disposal:Ve});break;case 59:Be=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return ke.length},this.loopCount=function(){return Oe},this.frameInfo=function(en){if(en<0||en>=ke.length)throw new Error("Frame index out of range.");return ke[en]},this.decodeAndBlitFrameBGRA=function(en,cn){var Sn=this.frameInfo(en),Tn=Sn.width*Sn.height,hn=new Uint8Array(Tn);$t(t,Sn.data_offset,hn,Tn);var pn=Sn.palette_offset,bn=Sn.transparent_index;bn===null&&(bn=256);var fn=Sn.width,An=r-fn,xn=fn,Je=4*(Sn.y*r+Sn.x),We=4*((Sn.y+Sn.height)*r+Sn.x),Ze=Je,un=4*An;Sn.interlaced===!0&&(un+=4*r*7);for(var yn=8,_n=0,wn=hn.length;_n<wn;++_n){var kn=hn[_n];if(xn===0&&(xn=fn,(Ze+=un)>=We&&(un=4*An+4*r*(yn-1),Ze=Je+(fn+An)*(yn<<1),yn>>=1)),kn===bn)Ze+=4;else{var $n=t[pn+3*kn],Ln=t[pn+3*kn+1],Gn=t[pn+3*kn+2];cn[Ze++]=Gn,cn[Ze++]=Ln,cn[Ze++]=$n,cn[Ze++]=255}--xn}},this.decodeAndBlitFrameRGBA=function(en,cn){var Sn=this.frameInfo(en),Tn=Sn.width*Sn.height,hn=new Uint8Array(Tn);$t(t,Sn.data_offset,hn,Tn);var pn=Sn.palette_offset,bn=Sn.transparent_index;bn===null&&(bn=256);var fn=Sn.width,An=r-fn,xn=fn,Je=4*(Sn.y*r+Sn.x),We=4*((Sn.y+Sn.height)*r+Sn.x),Ze=Je,un=4*An;Sn.interlaced===!0&&(un+=4*r*7);for(var yn=8,_n=0,wn=hn.length;_n<wn;++_n){var kn=hn[_n];if(xn===0&&(xn=fn,(Ze+=un)>=We&&(un=4*An+4*r*(yn-1),Ze=Je+(fn+An)*(yn<<1),yn>>=1)),kn===bn)Ze+=4;else{var $n=t[pn+3*kn],Ln=t[pn+3*kn+1],Gn=t[pn+3*kn+2];cn[Ze++]=$n,cn[Ze++]=Ln,cn[Ze++]=Gn,cn[Ze++]=255}--xn}}}function $t(t,e,r,xe){for(var Ee=t[e++],Ae=1<<Ee,Pe=Ae+1,Re=Pe+1,Ce=Ee+1,Be=(1<<Ce)-1,ke=0,Me=0,Fe=0,Ve=t[e++],Oe=new Int32Array(4096),$e=null;;){for(;ke<16&&Ve!==0;)Me|=t[e++]<<ke,ke+=8,Ve===1?Ve=t[e++]:--Ve;if(ke<Ce)break;var Ge=Me&Be;if(Me>>=Ce,ke-=Ce,Ge!==Ae){if(Ge===Pe)break;for(var Ue=Ge<Re?Ge:$e,Ye=0,Qe=Ue;Qe>Ae;)Qe=Oe[Qe]>>8,++Ye;var rn=Qe;if(Fe+Ye+(Ue!==Ge?1:0)>xe)return void a.log("Warning, gif stream longer than expected.");r[Fe++]=rn;var tn=Fe+=Ye;for(Ue!==Ge&&(r[Fe++]=rn),Qe=Ue;Ye--;)Qe=Oe[Qe],r[--tn]=255&Qe,Qe>>=8;$e!==null&&Re<4096&&(Oe[Re++]=$e<<8|rn,Re>=Be+1&&Ce<12&&(++Ce,Be=Be<<1|1)),$e=Ge}else Re=Pe+1,Be=(1<<(Ce=Ee+1))-1,$e=null}return Fe!==xe&&a.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Qt(t){var e,r,xe,Ee,Ae,Pe=Math.floor,Re=new Array(64),Ce=new Array(64),Be=new Array(64),ke=new Array(64),Me=new Array(65535),Fe=new Array(65535),Ve=new Array(64),Oe=new Array(64),$e=[],Ge=0,Ue=7,Ye=new Array(64),Qe=new Array(64),rn=new Array(64),tn=new Array(256),an=new Array(2048),qe=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Ke=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],sn=[0,1,2,3,4,5,6,7,8,9,10,11],gn=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],He=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],en=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],cn=[0,1,2,3,4,5,6,7,8,9,10,11],Sn=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Tn=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function hn(Je,We){for(var Ze=0,un=0,yn=new Array,_n=1;_n<=16;_n++){for(var wn=1;wn<=Je[_n];wn++)yn[We[un]]=[],yn[We[un]][0]=Ze,yn[We[un]][1]=_n,un++,Ze++;Ze*=2}return yn}function pn(Je){for(var We=Je[0],Ze=Je[1]-1;Ze>=0;)We&1<<Ze&&(Ge|=1<<Ue),Ze--,--Ue<0&&(Ge==255?(bn(255),bn(0)):bn(Ge),Ue=7,Ge=0)}function bn(Je){$e.push(Je)}function fn(Je){bn(Je>>8&255),bn(255&Je)}function An(Je,We,Ze,un,yn){for(var _n,wn=yn[0],kn=yn[240],$n=(function(Cn,jn){var Rn,Dn,Jn,Qn,qn,yi,di,zi,Ni,Gi,ui=0;for(Ni=0;Ni<8;++Ni){Rn=Cn[ui],Dn=Cn[ui+1],Jn=Cn[ui+2],Qn=Cn[ui+3],qn=Cn[ui+4],yi=Cn[ui+5],di=Cn[ui+6];var Vi=Rn+(zi=Cn[ui+7]),Di=Rn-zi,Xi=Dn+di,fi=Dn-di,ni=Jn+yi,pi=Jn-yi,ji=Qn+qn,hr=Qn-qn,ar=Vi+ji,Fn=Vi-ji,Si=Xi+ni,Mi=Xi-ni;Cn[ui]=ar+Si,Cn[ui+4]=ar-Si;var ki=.707106781*(Mi+Fn);Cn[ui+2]=Fn+ki,Cn[ui+6]=Fn-ki;var $i=.382683433*((ar=hr+pi)-(Mi=fi+Di)),tr=.5411961*ar+$i,Hn=1.306562965*Mi+$i,Un=.707106781*(Si=pi+fi),ti=Di+Un,ei=Di-Un;Cn[ui+5]=ei+tr,Cn[ui+3]=ei-tr,Cn[ui+1]=ti+Hn,Cn[ui+7]=ti-Hn,ui+=8}for(ui=0,Ni=0;Ni<8;++Ni){Rn=Cn[ui],Dn=Cn[ui+8],Jn=Cn[ui+16],Qn=Cn[ui+24],qn=Cn[ui+32],yi=Cn[ui+40],di=Cn[ui+48];var si=Rn+(zi=Cn[ui+56]),Ri=Rn-zi,Bi=Dn+di,er=Dn-di,Zi=Jn+yi,Yi=Jn-yi,fr=Qn+qn,ir=Qn-qn,Qi=si+fr,rr=si-fr,cr=Bi+Zi,vr=Bi-Zi;Cn[ui]=Qi+cr,Cn[ui+32]=Qi-cr;var wr=.707106781*(vr+rr);Cn[ui+16]=rr+wr,Cn[ui+48]=rr-wr;var qr=.382683433*((Qi=ir+Yi)-(vr=er+Ri)),Fr=.5411961*Qi+qr,xs=1.306562965*vr+qr,Ls=.707106781*(cr=Yi+er),_s=Ri+Ls,sa=Ri-Ls;Cn[ui+40]=sa+Fr,Cn[ui+24]=sa-Fr,Cn[ui+8]=_s+xs,Cn[ui+56]=_s-xs,ui++}for(Ni=0;Ni<64;++Ni)Gi=Cn[Ni]*jn[Ni],Ve[Ni]=Gi>0?Gi+.5|0:Gi-.5|0;return Ve})(Je,We),Ln=0;Ln<64;++Ln)Oe[qe[Ln]]=$n[Ln];var Gn=Oe[0]-Ze;Ze=Oe[0],Gn==0?pn(un[0]):(pn(un[Fe[_n=32767+Gn]]),pn(Me[_n]));for(var Yn=63;Yn>0&&Oe[Yn]==0;)Yn--;if(Yn==0)return pn(wn),Ze;for(var ii,Wn=1;Wn<=Yn;){for(var Pn=Wn;Oe[Wn]==0&&Wn<=Yn;)++Wn;var Zn=Wn-Pn;if(Zn>=16){ii=Zn>>4;for(var mn=1;mn<=ii;++mn)pn(kn);Zn&=15}_n=32767+Oe[Wn],pn(yn[(Zn<<4)+Fe[_n]]),pn(Me[_n]),Wn++}return Yn!=63&&pn(wn),Ze}function xn(Je){Je=Math.min(Math.max(Je,1),100),Ae!=Je&&((function(We){for(var Ze=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],un=0;un<64;un++){var yn=Pe((Ze[un]*We+50)/100);yn=Math.min(Math.max(yn,1),255),Re[qe[un]]=yn}for(var _n=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],wn=0;wn<64;wn++){var kn=Pe((_n[wn]*We+50)/100);kn=Math.min(Math.max(kn,1),255),Ce[qe[wn]]=kn}for(var $n=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ln=0,Gn=0;Gn<8;Gn++)for(var Yn=0;Yn<8;Yn++)Be[Ln]=1/(Re[qe[Ln]]*$n[Gn]*$n[Yn]*8),ke[Ln]=1/(Ce[qe[Ln]]*$n[Gn]*$n[Yn]*8),Ln++})(Je<50?Math.floor(5e3/Je):Math.floor(200-2*Je)),Ae=Je)}this.encode=function(Je,We){We&&xn(We),$e=new Array,Ge=0,Ue=7,fn(65496),fn(65504),fn(16),bn(74),bn(70),bn(73),bn(70),bn(0),bn(1),bn(1),bn(0),fn(1),fn(1),bn(0),bn(0),(function(){fn(65499),fn(132),bn(0);for(var Dn=0;Dn<64;Dn++)bn(Re[Dn]);bn(1);for(var Jn=0;Jn<64;Jn++)bn(Ce[Jn])})(),(function(Dn,Jn){fn(65472),fn(17),bn(8),fn(Jn),fn(Dn),bn(3),bn(1),bn(17),bn(0),bn(2),bn(17),bn(1),bn(3),bn(17),bn(1)})(Je.width,Je.height),(function(){fn(65476),fn(418),bn(0);for(var Dn=0;Dn<16;Dn++)bn(Ke[Dn+1]);for(var Jn=0;Jn<=11;Jn++)bn(sn[Jn]);bn(16);for(var Qn=0;Qn<16;Qn++)bn(gn[Qn+1]);for(var qn=0;qn<=161;qn++)bn(He[qn]);bn(1);for(var yi=0;yi<16;yi++)bn(en[yi+1]);for(var di=0;di<=11;di++)bn(cn[di]);bn(17);for(var zi=0;zi<16;zi++)bn(Sn[zi+1]);for(var Ni=0;Ni<=161;Ni++)bn(Tn[Ni])})(),fn(65498),fn(12),bn(3),bn(1),bn(0),bn(2),bn(17),bn(3),bn(17),bn(0),bn(63),bn(0);var Ze=0,un=0,yn=0;Ge=0,Ue=7,this.encode.displayName="_encode_";for(var _n,wn,kn,$n,Ln,Gn,Yn,ii,Wn,Pn=Je.data,Zn=Je.width,mn=Je.height,Cn=4*Zn,jn=0;jn<mn;){for(_n=0;_n<Cn;){for(Ln=Cn*jn+_n,Yn=-1,ii=0,Wn=0;Wn<64;Wn++)Gn=Ln+(ii=Wn>>3)*Cn+(Yn=4*(7&Wn)),jn+ii>=mn&&(Gn-=Cn*(jn+1+ii-mn)),_n+Yn>=Cn&&(Gn-=_n+Yn-Cn+4),wn=Pn[Gn++],kn=Pn[Gn++],$n=Pn[Gn++],Ye[Wn]=(an[wn]+an[kn+256>>0]+an[$n+512>>0]>>16)-128,Qe[Wn]=(an[wn+768>>0]+an[kn+1024>>0]+an[$n+1280>>0]>>16)-128,rn[Wn]=(an[wn+1280>>0]+an[kn+1536>>0]+an[$n+1792>>0]>>16)-128;Ze=An(Ye,Be,Ze,e,xe),un=An(Qe,ke,un,r,Ee),yn=An(rn,ke,yn,r,Ee),_n+=32}jn+=8}if(Ue>=0){var Rn=[];Rn[1]=Ue+1,Rn[0]=(1<<Ue+1)-1,pn(Rn)}return fn(65497),new Uint8Array($e)},t=t||50,(function(){for(var Je=String.fromCharCode,We=0;We<256;We++)tn[We]=Je(We)})(),e=hn(Ke,sn),r=hn(en,cn),xe=hn(gn,He),Ee=hn(Sn,Tn),(function(){for(var Je=1,We=2,Ze=1;Ze<=15;Ze++){for(var un=Je;un<We;un++)Fe[32767+un]=Ze,Me[32767+un]=[],Me[32767+un][1]=Ze,Me[32767+un][0]=un;for(var yn=-(We-1);yn<=-Je;yn++)Fe[32767+yn]=Ze,Me[32767+yn]=[],Me[32767+yn][1]=Ze,Me[32767+yn][0]=We-1+yn;Je<<=1,We<<=1}})(),(function(){for(var Je=0;Je<256;Je++)an[Je]=19595*Je,an[Je+256>>0]=38470*Je,an[Je+512>>0]=7471*Je+32768,an[Je+768>>0]=-11059*Je,an[Je+1024>>0]=-21709*Je,an[Je+1280>>0]=32768*Je+8421375,an[Je+1536>>0]=-27439*Je,an[Je+1792>>0]=-5329*Je})(),xn(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function te(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ee(t){function e(Ke){if(!Ke)throw Error("assert :P")}function r(Ke,sn,gn){for(var He=0;4>He;He++)if(Ke[sn+He]!=gn.charCodeAt(He))return!0;return!1}function xe(Ke,sn,gn,He,en){for(var cn=0;cn<en;cn++)Ke[sn+cn]=gn[He+cn]}function Ee(Ke,sn,gn,He){for(var en=0;en<He;en++)Ke[sn+en]=gn}function Ae(Ke){return new Int32Array(Ke)}function Pe(Ke,sn){for(var gn=[],He=0;He<Ke;He++)gn.push(new sn);return gn}function Re(Ke,sn){var gn=[];return(function He(en,cn,Sn){for(var Tn=Sn[cn],hn=0;hn<Tn&&(en.push(Sn.length>cn+1?[]:new sn),!(Sn.length<cn+1));hn++)He(en[hn],cn+1,Sn)})(gn,0,Ke),gn}var Ce=function(){var Ke=this;function sn(De,ze){for(var on=1<<ze-1>>>0;De&on;)on>>>=1;return on?(De&on-1)+on:De}function gn(De,ze,on,vn,Bn){e(!(vn%on));do De[ze+(vn-=on)]=Bn;while(0<vn)}function He(De,ze,on,vn,Bn){if(e(2328>=Bn),512>=Bn)var In=Ae(512);else if((In=Ae(Bn))==null)return 0;return(function(Mn,Vn,zn,Kn,ci,Ai){var wi,vi,Wi=Vn,Li=1<<zn,hi=Ae(16),mi=Ae(16);for(e(ci!=0),e(Kn!=null),e(Mn!=null),e(0<zn),vi=0;vi<ci;++vi){if(15<Kn[vi])return 0;++hi[Kn[vi]]}if(hi[0]==ci)return 0;for(mi[1]=0,wi=1;15>wi;++wi){if(hi[wi]>1<<wi)return 0;mi[wi+1]=mi[wi]+hi[wi]}for(vi=0;vi<ci;++vi)wi=Kn[vi],0<Kn[vi]&&(Ai[mi[wi]++]=vi);if(mi[15]==1)return(Kn=new en).g=0,Kn.value=Ai[0],gn(Mn,Wi,1,Li,Kn),Li;var qi,Ji=-1,Ui=Li-1,lr=0,sr=1,gr=1,or=1<<zn;for(vi=0,wi=1,ci=2;wi<=zn;++wi,ci<<=1){if(sr+=gr<<=1,0>(gr-=hi[wi]))return 0;for(;0<hi[wi];--hi[wi])(Kn=new en).g=wi,Kn.value=Ai[vi++],gn(Mn,Wi+lr,ci,or,Kn),lr=sn(lr,wi)}for(wi=zn+1,ci=2;15>=wi;++wi,ci<<=1){if(sr+=gr<<=1,0>(gr-=hi[wi]))return 0;for(;0<hi[wi];--hi[wi]){if(Kn=new en,(lr&Ui)!=Ji){for(Wi+=or,qi=1<<(Ji=wi)-zn;15>Ji&&!(0>=(qi-=hi[Ji]));)++Ji,qi<<=1;Li+=or=1<<(qi=Ji-zn),Mn[Vn+(Ji=lr&Ui)].g=qi+zn,Mn[Vn+Ji].value=Wi-Vn-Ji}Kn.g=wi-zn,Kn.value=Ai[vi++],gn(Mn,Wi+(lr>>zn),ci,or,Kn),lr=sn(lr,wi)}}return sr!=2*mi[15]-1?0:Li})(De,ze,on,vn,Bn,In)}function en(){this.value=this.g=0}function cn(){this.value=this.g=0}function Sn(){this.G=Pe(5,en),this.H=Ae(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=Pe(Zs,cn)}function Tn(De,ze,on,vn){e(De!=null),e(ze!=null),e(2147483648>vn),De.Ca=254,De.I=0,De.b=-8,De.Ka=0,De.oa=ze,De.pa=on,De.Jd=ze,De.Yc=on+vn,De.Zc=4<=vn?on+vn-4+1:on,_n(De)}function hn(De,ze){for(var on=0;0<ze--;)on|=kn(De,128)<<ze;return on}function pn(De,ze){var on=hn(De,ze);return wn(De)?-on:on}function bn(De,ze,on,vn){var Bn,In=0;for(e(De!=null),e(ze!=null),e(4294967288>vn),De.Sb=vn,De.Ra=0,De.u=0,De.h=0,4<vn&&(vn=4),Bn=0;Bn<vn;++Bn)In+=ze[on+Bn]<<8*Bn;De.Ra=In,De.bb=vn,De.oa=ze,De.pa=on}function fn(De){for(;8<=De.u&&De.bb<De.Sb;)De.Ra>>>=8,De.Ra+=De.oa[De.pa+De.bb]<<$o-8>>>0,++De.bb,De.u-=8;Ze(De)&&(De.h=1,De.u=0)}function An(De,ze){if(e(0<=ze),!De.h&&ze<=Go){var on=We(De)&vl[ze];return De.u+=ze,fn(De),on}return De.h=1,De.u=0}function xn(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Je(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function We(De){return De.Ra>>>(De.u&$o-1)>>>0}function Ze(De){return e(De.bb<=De.Sb),De.h||De.bb==De.Sb&&De.u>$o}function un(De,ze){De.u=ze,De.h=Ze(De)}function yn(De){De.u>=Ql&&(e(De.u>=Ql),fn(De))}function _n(De){e(De!=null&&De.oa!=null),De.pa<De.Zc?(De.I=(De.oa[De.pa++]|De.I<<8)>>>0,De.b+=8):(e(De!=null&&De.oa!=null),De.pa<De.Yc?(De.b+=8,De.I=De.oa[De.pa++]|De.I<<8):De.Ka?De.b=0:(De.I<<=8,De.b+=8,De.Ka=1))}function wn(De){return hn(De,1)}function kn(De,ze){var on=De.Ca;0>De.b&&_n(De);var vn=De.b,Bn=on*ze>>>8,In=(De.I>>>vn>Bn)+0;for(In?(on-=Bn,De.I-=Bn+1<<vn>>>0):on=Bn+1,vn=on,Bn=0;256<=vn;)Bn+=8,vn>>=8;return vn=7^Bn+Qs[vn],De.b-=vn,De.Ca=(on<<vn)-1,In}function $n(De,ze,on){De[ze+0]=on>>24&255,De[ze+1]=on>>16&255,De[ze+2]=on>>8&255,De[ze+3]=on>>0&255}function Ln(De,ze){return De[ze+0]<<0|De[ze+1]<<8}function Gn(De,ze){return Ln(De,ze)|De[ze+2]<<16}function Yn(De,ze){return Ln(De,ze)|Ln(De,ze+2)<<16}function ii(De,ze){var on=1<<ze;return e(De!=null),e(0<ze),De.X=Ae(on),De.X==null?0:(De.Mb=32-ze,De.Xa=ze,1)}function Wn(De,ze){e(De!=null),e(ze!=null),e(De.Xa==ze.Xa),xe(ze.X,0,De.X,0,1<<ze.Xa)}function Pn(){this.X=[],this.Xa=this.Mb=0}function Zn(De,ze,on,vn){e(on!=null),e(vn!=null);var Bn=on[0],In=vn[0];return Bn==0&&(Bn=(De*In+ze/2)/ze),In==0&&(In=(ze*Bn+De/2)/De),0>=Bn||0>=In?0:(on[0]=Bn,vn[0]=In,1)}function mn(De,ze){return De+(1<<ze)-1>>>ze}function Cn(De,ze){return((4278255360&De)+(4278255360&ze)>>>0&4278255360)+((16711935&De)+(16711935&ze)>>>0&16711935)>>>0}function jn(De,ze){Ke[ze]=function(on,vn,Bn,In,Mn,Vn,zn){var Kn;for(Kn=0;Kn<Mn;++Kn){var ci=Ke[De](Vn[zn+Kn-1],Bn,In+Kn);Vn[zn+Kn]=Cn(on[vn+Kn],ci)}}}function Rn(){this.ud=this.hd=this.jd=0}function Dn(De,ze){return((4278124286&(De^ze))>>>1)+(De&ze)>>>0}function Jn(De){return 0<=De&&256>De?De:0>De?0:255<De?255:void 0}function Qn(De,ze){return Jn(De+(De-ze+.5>>1))}function qn(De,ze,on){return Math.abs(ze-on)-Math.abs(De-on)}function yi(De,ze,on,vn,Bn,In,Mn){for(vn=In[Mn-1],on=0;on<Bn;++on)In[Mn+on]=vn=Cn(De[ze+on],vn)}function di(De,ze,on,vn,Bn){var In;for(In=0;In<on;++In){var Mn=De[ze+In],Vn=Mn>>8&255,zn=16711935&(zn=(zn=16711935&Mn)+((Vn<<16)+Vn));vn[Bn+In]=(4278255360&Mn)+zn>>>0}}function zi(De,ze){ze.jd=De>>0&255,ze.hd=De>>8&255,ze.ud=De>>16&255}function Ni(De,ze,on,vn,Bn,In){var Mn;for(Mn=0;Mn<vn;++Mn){var Vn=ze[on+Mn],zn=Vn>>>8,Kn=Vn,ci=255&(ci=(ci=Vn>>>16)+((De.jd<<24>>24)*(zn<<24>>24)>>>5));Kn=255&(Kn=(Kn=Kn+((De.hd<<24>>24)*(zn<<24>>24)>>>5))+((De.ud<<24>>24)*(ci<<24>>24)>>>5)),Bn[In+Mn]=(4278255360&Vn)+(ci<<16)+Kn}}function Gi(De,ze,on,vn,Bn){Ke[ze]=function(In,Mn,Vn,zn,Kn,ci,Ai,wi,vi){for(zn=Ai;zn<wi;++zn)for(Ai=0;Ai<vi;++Ai)Kn[ci++]=Bn(Vn[vn(In[Mn++])])},Ke[De]=function(In,Mn,Vn,zn,Kn,ci,Ai){var wi=8>>In.b,vi=In.Ea,Wi=In.K[0],Li=In.w;if(8>wi)for(In=(1<<In.b)-1,Li=(1<<wi)-1;Mn<Vn;++Mn){var hi,mi=0;for(hi=0;hi<vi;++hi)hi&In||(mi=vn(zn[Kn++])),ci[Ai++]=Bn(Wi[mi&Li]),mi>>=wi}else Ke["VP8LMapColor"+on](zn,Kn,Wi,Li,ci,Ai,Mn,Vn,vi)}}function ui(De,ze,on,vn,Bn){for(on=ze+on;ze<on;){var In=De[ze++];vn[Bn++]=In>>16&255,vn[Bn++]=In>>8&255,vn[Bn++]=In>>0&255}}function Vi(De,ze,on,vn,Bn){for(on=ze+on;ze<on;){var In=De[ze++];vn[Bn++]=In>>16&255,vn[Bn++]=In>>8&255,vn[Bn++]=In>>0&255,vn[Bn++]=In>>24&255}}function Di(De,ze,on,vn,Bn){for(on=ze+on;ze<on;){var In=(Mn=De[ze++])>>16&240|Mn>>12&15,Mn=Mn>>0&240|Mn>>28&15;vn[Bn++]=In,vn[Bn++]=Mn}}function Xi(De,ze,on,vn,Bn){for(on=ze+on;ze<on;){var In=(Mn=De[ze++])>>16&248|Mn>>13&7,Mn=Mn>>5&224|Mn>>3&31;vn[Bn++]=In,vn[Bn++]=Mn}}function fi(De,ze,on,vn,Bn){for(on=ze+on;ze<on;){var In=De[ze++];vn[Bn++]=In>>0&255,vn[Bn++]=In>>8&255,vn[Bn++]=In>>16&255}}function ni(De,ze,on,vn,Bn,In){if(In==0)for(on=ze+on;ze<on;)$n(vn,((In=De[ze++])[0]>>24|In[1]>>8&65280|In[2]<<8&16711680|In[3]<<24)>>>0),Bn+=32;else xe(vn,Bn,De,ze,on)}function pi(De,ze){Ke[ze][0]=Ke[De+"0"],Ke[ze][1]=Ke[De+"1"],Ke[ze][2]=Ke[De+"2"],Ke[ze][3]=Ke[De+"3"],Ke[ze][4]=Ke[De+"4"],Ke[ze][5]=Ke[De+"5"],Ke[ze][6]=Ke[De+"6"],Ke[ze][7]=Ke[De+"7"],Ke[ze][8]=Ke[De+"8"],Ke[ze][9]=Ke[De+"9"],Ke[ze][10]=Ke[De+"10"],Ke[ze][11]=Ke[De+"11"],Ke[ze][12]=Ke[De+"12"],Ke[ze][13]=Ke[De+"13"],Ke[ze][14]=Ke[De+"0"],Ke[ze][15]=Ke[De+"0"]}function ji(De){return De==Ku||De==Ec||De==iu||De==Sc}function hr(){this.eb=[],this.size=this.A=this.fb=0}function ar(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Fn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new hr,this.f.kb=new ar,this.sd=null}function Si(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Mi(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ki(De){return alert("todo:WebPSamplerProcessPlane"),De.T}function $i(De,ze){var on=De.T,vn=ze.ba.f.RGBA,Bn=vn.eb,In=vn.fb+De.ka*vn.A,Mn=Os[ze.ba.S],Vn=De.y,zn=De.O,Kn=De.f,ci=De.N,Ai=De.ea,wi=De.W,vi=ze.cc,Wi=ze.dc,Li=ze.Mc,hi=ze.Nc,mi=De.ka,qi=De.ka+De.T,Ji=De.U,Ui=Ji+1>>1;for(mi==0?Mn(Vn,zn,null,null,Kn,ci,Ai,wi,Kn,ci,Ai,wi,Bn,In,null,null,Ji):(Mn(ze.ec,ze.fc,Vn,zn,vi,Wi,Li,hi,Kn,ci,Ai,wi,Bn,In-vn.A,Bn,In,Ji),++on);mi+2<qi;mi+=2)vi=Kn,Wi=ci,Li=Ai,hi=wi,ci+=De.Rc,wi+=De.Rc,In+=2*vn.A,Mn(Vn,(zn+=2*De.fa)-De.fa,Vn,zn,vi,Wi,Li,hi,Kn,ci,Ai,wi,Bn,In-vn.A,Bn,In,Ji);return zn+=De.fa,De.j+qi<De.o?(xe(ze.ec,ze.fc,Vn,zn,Ji),xe(ze.cc,ze.dc,Kn,ci,Ui),xe(ze.Mc,ze.Nc,Ai,wi,Ui),on--):1&qi||Mn(Vn,zn,null,null,Kn,ci,Ai,wi,Kn,ci,Ai,wi,Bn,In+vn.A,null,null,Ji),on}function tr(De,ze,on){var vn=De.F,Bn=[De.J];if(vn!=null){var In=De.U,Mn=ze.ba.S,Vn=Mn==Wu||Mn==iu;ze=ze.ba.f.RGBA;var zn=[0],Kn=De.ka;zn[0]=De.T,De.Kb&&(Kn==0?--zn[0]:(--Kn,Bn[0]-=De.width),De.j+De.ka+De.T==De.o&&(zn[0]=De.o-De.j-Kn));var ci=ze.eb;Kn=ze.fb+Kn*ze.A,De=bl(vn,Bn[0],De.width,In,zn,ci,Kn+(Vn?0:3),ze.A),e(on==zn),De&&ji(Mn)&&ao(ci,Kn,Vn,In,zn,ze.A)}return 0}function Hn(De){var ze=De.ma,on=ze.ba.S,vn=11>on,Bn=on==Ks||on==Ra||on==Wu||on==nu||on==12||ji(on);if(ze.memory=null,ze.Ib=null,ze.Jb=null,ze.Nd=null,!_o(ze.Oa,De,Bn?11:12))return 0;if(Bn&&ji(on)&&nr(),De.da)alert("todo:use_scaling");else{if(vn){if(ze.Ib=ki,De.Kb){if(on=De.U+1>>1,ze.memory=Ae(De.U+2*on),ze.memory==null)return 0;ze.ec=ze.memory,ze.fc=0,ze.cc=ze.ec,ze.dc=ze.fc+De.U,ze.Mc=ze.cc,ze.Nc=ze.dc+on,ze.Ib=$i,nr()}}else alert("todo:EmitYUV");Bn&&(ze.Jb=tr,vn&&Ei())}if(vn&&!nl){for(De=0;256>De;++De)js[De]=89858*(De-128)+au>>La,Xd[De]=-22014*(De-128)+au,Yh[De]=-45773*(De-128),Cc[De]=113618*(De-128)+au>>La;for(De=Sl;De<tl;++De)ze=76283*(De-16)+au>>La,Zd[De-Sl]=ha(ze,255),Qd[De-Sl]=ha(ze+8>>4,15);nl=1}return 1}function Un(De){var ze=De.ma,on=De.U,vn=De.T;return e(!(1&De.ka)),0>=on||0>=vn?0:(on=ze.Ib(De,ze),ze.Jb!=null&&ze.Jb(De,ze,on),ze.Dc+=on,1)}function ti(De){De.ma.memory=null}function ei(De,ze,on,vn){return An(De,8)!=47?0:(ze[0]=An(De,14)+1,on[0]=An(De,14)+1,vn[0]=An(De,1),An(De,3)!=0?0:!De.h)}function si(De,ze){if(4>De)return De+1;var on=De-2>>1;return(2+(1&De)<<on)+An(ze,on)+1}function Ri(De,ze){return 120<ze?ze-120:1<=(on=((on=Na[ze-1])>>4)*De+(8-(15&on)))?on:1;var on}function Bi(De,ze,on){var vn=We(on),Bn=De[ze+=255&vn].g-8;return 0<Bn&&(un(on,on.u+8),vn=We(on),ze+=De[ze].value,ze+=vn&(1<<Bn)-1),un(on,on.u+De[ze].g),De[ze].value}function er(De,ze,on){return on.g+=De.g,on.value+=De.value<<ze>>>0,e(8>=on.g),De.g}function Zi(De,ze,on){var vn=De.xc;return e((ze=vn==0?0:De.vc[De.md*(on>>vn)+(ze>>vn)])<De.Wb),De.Ya[ze]}function Yi(De,ze,on,vn){var Bn=De.ab,In=De.c*ze,Mn=De.C;ze=Mn+ze;var Vn=on,zn=vn;for(vn=De.Ta,on=De.Ua;0<Bn--;){var Kn=De.gc[Bn],ci=Mn,Ai=ze,wi=Vn,vi=zn,Wi=(zn=vn,Vn=on,Kn.Ea);switch(e(ci<Ai),e(Ai<=Kn.nc),Kn.hc){case 2:yc(wi,vi,(Ai-ci)*Wi,zn,Vn);break;case 0:var Li=ci,hi=Ai,mi=zn,qi=Vn,Ji=(or=Kn).Ea;Li==0&&(mc(wi,vi,null,null,1,mi,qi),yi(wi,vi+1,0,0,Ji-1,mi,qi+1),vi+=Ji,qi+=Ji,++Li);for(var Ui=1<<or.b,lr=Ui-1,sr=mn(Ji,or.b),gr=or.K,or=or.w+(Li>>or.b)*sr;Li<hi;){var Or=gr,Br=or,Mr=1;for(zu(wi,vi,mi,qi-Ji,1,mi,qi);Mr<Ji;){var Pr=(Mr&~lr)+Ui;Pr>Ji&&(Pr=Ji),(0,Aa[Or[Br++]>>8&15])(wi,vi+ +Mr,mi,qi+Mr-Ji,Pr-Mr,mi,qi+Mr),Mr=Pr}vi+=Ji,qi+=Ji,++Li&lr||(or+=sr)}Ai!=Kn.nc&&xe(zn,Vn-Wi,zn,Vn+(Ai-ci-1)*Wi,Wi);break;case 1:for(Wi=wi,hi=vi,Ji=(wi=Kn.Ea)-(qi=wi&~(mi=(vi=1<<Kn.b)-1)),Li=mn(wi,Kn.b),Ui=Kn.K,Kn=Kn.w+(ci>>Kn.b)*Li;ci<Ai;){for(lr=Ui,sr=Kn,gr=new Rn,or=hi+qi,Or=hi+wi;hi<or;)zi(lr[sr++],gr),da(gr,Wi,hi,vi,zn,Vn),hi+=vi,Vn+=vi;hi<Or&&(zi(lr[sr++],gr),da(gr,Wi,hi,Ji,zn,Vn),hi+=Ji,Vn+=Ji),++ci&mi||(Kn+=Li)}break;case 3:if(wi==zn&&vi==Vn&&0<Kn.b){for(hi=zn,wi=Wi=Vn+(Ai-ci)*Wi-(qi=(Ai-ci)*mn(Kn.Ea,Kn.b)),vi=zn,mi=Vn,Li=[],qi=(Ji=qi)-1;0<=qi;--qi)Li[qi]=vi[mi+qi];for(qi=Ji-1;0<=qi;--qi)hi[wi+qi]=Li[qi];$a(Kn,ci,Ai,zn,Wi,zn,Vn)}else $a(Kn,ci,Ai,wi,vi,zn,Vn)}Vn=vn,zn=on}zn!=on&&xe(vn,on,Vn,zn,In)}function fr(De,ze){var on=De.V,vn=De.Ba+De.c*De.C,Bn=ze-De.C;if(e(ze<=De.l.o),e(16>=Bn),0<Bn){var In=De.l,Mn=De.Ta,Vn=De.Ua,zn=In.width;if(Yi(De,Bn,on,vn),Bn=Vn=[Vn],e((on=De.C)<(vn=ze)),e(In.v<In.va),vn>In.o&&(vn=In.o),on<In.j){var Kn=In.j-on;on=In.j,Bn[0]+=Kn*zn}if(on>=vn?on=0:(Bn[0]+=4*In.v,In.ka=on-In.j,In.U=In.va-In.v,In.T=vn-on,on=1),on){if(Vn=Vn[0],11>(on=De.ca).S){var ci=on.f.RGBA,Ai=(vn=on.S,Bn=In.U,In=In.T,Kn=ci.eb,ci.A),wi=In;for(ci=ci.fb+De.Ma*ci.A;0<wi--;){var vi=Mn,Wi=Vn,Li=Bn,hi=Kn,mi=ci;switch(vn){case xc:Pa(vi,Wi,Li,hi,mi);break;case Ks:So(vi,Wi,Li,hi,mi);break;case Ku:So(vi,Wi,Li,hi,mi),ao(hi,mi,0,Li,1,0);break;case _c:eu(vi,Wi,Li,hi,mi);break;case Ra:ni(vi,Wi,Li,hi,mi,1);break;case Ec:ni(vi,Wi,Li,hi,mi,1),ao(hi,mi,0,Li,1,0);break;case Wu:ni(vi,Wi,Li,hi,mi,0);break;case iu:ni(vi,Wi,Li,hi,mi,0),ao(hi,mi,1,Li,1,0);break;case nu:Wa(vi,Wi,Li,hi,mi);break;case Sc:Wa(vi,Wi,Li,hi,mi),$s(hi,mi,Li,1,0);break;case Jo:Ka(vi,Wi,Li,hi,mi);break;default:e(0)}Vn+=zn,ci+=Ai}De.Ma+=In}else alert("todo:EmitRescaledRowsYUVA");e(De.Ma<=on.height)}}De.C=ze,e(De.C<=De.i)}function ir(De){var ze;if(0<De.ua)return 0;for(ze=0;ze<De.Wb;++ze){var on=De.Ya[ze].G,vn=De.Ya[ze].H;if(0<on[1][vn[1]+0].g||0<on[2][vn[2]+0].g||0<on[3][vn[3]+0].g)return 0}return 1}function Qi(De,ze,on,vn,Bn,In){if(De.Z!=0){var Mn=De.qd,Vn=De.rd;for(e(Po[De.Z]!=null);ze<on;++ze)Po[De.Z](Mn,Vn,vn,Bn,vn,Bn,In),Mn=vn,Vn=Bn,Bn+=In;De.qd=Mn,De.rd=Vn}}function rr(De,ze){var on=De.l.ma,vn=on.Z==0||on.Z==1?De.l.j:De.C;if(vn=De.C<vn?vn:De.C,e(ze<=De.l.o),ze>vn){var Bn=De.l.width,In=on.ca,Mn=on.tb+Bn*vn,Vn=De.V,zn=De.Ba+De.c*vn,Kn=De.gc;e(De.ab==1),e(Kn[0].hc==3),ah(Kn[0],vn,ze,Vn,zn,In,Mn),Qi(on,vn,ze,In,Mn,Bn)}De.C=De.Ma=ze}function cr(De,ze,on,vn,Bn,In,Mn){var Vn=De.$/vn,zn=De.$%vn,Kn=De.m,ci=De.s,Ai=on+De.$,wi=Ai;Bn=on+vn*Bn;var vi=on+vn*In,Wi=280+ci.ua,Li=De.Pb?Vn:16777216,hi=0<ci.ua?ci.Wa:null,mi=ci.wc,qi=Ai<vi?Zi(ci,zn,Vn):null;e(De.C<In),e(vi<=Bn);var Ji=!1;e:for(;;){for(;Ji||Ai<vi;){var Ui=0;if(Vn>=Li){var lr=Ai-on;e((Li=De).Pb),Li.wd=Li.m,Li.xd=lr,0<Li.s.ua&&Wn(Li.s.Wa,Li.s.vb),Li=Vn+Xo}if(zn&mi||(qi=Zi(ci,zn,Vn)),e(qi!=null),qi.Qb&&(ze[Ai]=qi.qb,Ji=!0),!Ji)if(yn(Kn),qi.jc){Ui=Kn,lr=ze;var sr=Ai,gr=qi.pd[We(Ui)&Zs-1];e(qi.jc),256>gr.g?(un(Ui,Ui.u+gr.g),lr[sr]=gr.value,Ui=0):(un(Ui,Ui.u+gr.g-256),e(256<=gr.value),Ui=gr.value),Ui==0&&(Ji=!0)}else Ui=Bi(qi.G[0],qi.H[0],Kn);if(Kn.h)break;if(Ji||256>Ui){if(!Ji)if(qi.nd)ze[Ai]=(qi.qb|Ui<<8)>>>0;else{if(yn(Kn),Ji=Bi(qi.G[1],qi.H[1],Kn),yn(Kn),lr=Bi(qi.G[2],qi.H[2],Kn),sr=Bi(qi.G[3],qi.H[3],Kn),Kn.h)break;ze[Ai]=(sr<<24|Ji<<16|Ui<<8|lr)>>>0}if(Ji=!1,++Ai,++zn>=vn&&(zn=0,++Vn,Mn!=null&&Vn<=In&&!(Vn%16)&&Mn(De,Vn),hi!=null))for(;wi<Ai;)Ui=ze[wi++],hi.X[(506832829*Ui&4294967295)>>>hi.Mb]=Ui}else if(280>Ui){if(Ui=si(Ui-256,Kn),lr=Bi(qi.G[4],qi.H[4],Kn),yn(Kn),lr=Ri(vn,lr=si(lr,Kn)),Kn.h)break;if(Ai-on<lr||Bn-Ai<Ui)break e;for(sr=0;sr<Ui;++sr)ze[Ai+sr]=ze[Ai+sr-lr];for(Ai+=Ui,zn+=Ui;zn>=vn;)zn-=vn,++Vn,Mn!=null&&Vn<=In&&!(Vn%16)&&Mn(De,Vn);if(e(Ai<=Bn),zn&mi&&(qi=Zi(ci,zn,Vn)),hi!=null)for(;wi<Ai;)Ui=ze[wi++],hi.X[(506832829*Ui&4294967295)>>>hi.Mb]=Ui}else{if(!(Ui<Wi))break e;for(Ji=Ui-280,e(hi!=null);wi<Ai;)Ui=ze[wi++],hi.X[(506832829*Ui&4294967295)>>>hi.Mb]=Ui;Ui=Ai,e(!(Ji>>>(lr=hi).Xa)),ze[Ui]=lr.X[Ji],Ji=!0}Ji||e(Kn.h==Ze(Kn))}if(De.Pb&&Kn.h&&Ai<Bn)e(De.m.h),De.a=5,De.m=De.wd,De.$=De.xd,0<De.s.ua&&Wn(De.s.vb,De.s.Wa);else{if(Kn.h)break e;Mn!=null&&Mn(De,Vn>In?In:Vn),De.a=0,De.$=Ai-on}return 1}return De.a=3,0}function vr(De){e(De!=null),De.vc=null,De.yc=null,De.Ya=null;var ze=De.Wa;ze!=null&&(ze.X=null),De.vb=null,e(De!=null)}function wr(){var De=new sh;return De==null?null:(De.a=0,De.xb=lh,pi("Predictor","VP8LPredictors"),pi("Predictor","VP8LPredictors_C"),pi("PredictorAdd","VP8LPredictorsAdd"),pi("PredictorAdd","VP8LPredictorsAdd_C"),yc=di,da=Ni,Pa=ui,So=Vi,Wa=Di,Ka=Xi,eu=fi,Ke.VP8LMapColor32b=qu,Ke.VP8LMapColor8b=ea,De)}function qr(De,ze,on,vn,Bn){var In=1,Mn=[De],Vn=[ze],zn=vn.m,Kn=vn.s,ci=null,Ai=0;e:for(;;){if(on)for(;In&&An(zn,1);){var wi=Mn,vi=Vn,Wi=vn,Li=1,hi=Wi.m,mi=Wi.gc[Wi.ab],qi=An(hi,2);if(Wi.Oc&1<<qi)In=0;else{switch(Wi.Oc|=1<<qi,mi.hc=qi,mi.Ea=wi[0],mi.nc=vi[0],mi.K=[null],++Wi.ab,e(4>=Wi.ab),qi){case 0:case 1:mi.b=An(hi,3)+2,Li=qr(mn(mi.Ea,mi.b),mn(mi.nc,mi.b),0,Wi,mi.K),mi.K=mi.K[0];break;case 3:var Ji,Ui=An(hi,8)+1,lr=16<Ui?0:4<Ui?1:2<Ui?2:3;if(wi[0]=mn(mi.Ea,lr),mi.b=lr,Ji=Li=qr(Ui,1,0,Wi,mi.K)){var sr,gr=Ui,or=mi,Or=1<<(8>>or.b),Br=Ae(Or);if(Br==null)Ji=0;else{var Mr=or.K[0],Pr=or.w;for(Br[0]=or.K[0][0],sr=1;sr<1*gr;++sr)Br[sr]=Cn(Mr[Pr+sr],Br[sr-1]);for(;sr<4*Or;++sr)Br[sr]=0;or.K[0]=null,or.K[0]=Br,Ji=1}}Li=Ji;break;case 2:break;default:e(0)}In=Li}}if(Mn=Mn[0],Vn=Vn[0],In&&An(zn,1)&&!(In=1<=(Ai=An(zn,4))&&11>=Ai)){vn.a=3;break e}var Hr;if(Hr=In)t:{var jr,xr,$r,Rs=vn,hs=Mn,Ys=Vn,Dr=Ai,Us=on,ua=Rs.m,Ts=Rs.s,ds=[null],Bs=1,ma=0,Va=ka[Dr];n:for(;;){if(Us&&An(ua,1)){var ws=An(ua,3)+2,bs=mn(hs,ws),Ns=mn(Ys,ws),ya=bs*Ns;if(!qr(bs,Ns,0,Rs,ds))break n;for(ds=ds[0],Ts.xc=ws,jr=0;jr<ya;++jr){var lo=ds[jr]>>8&65535;ds[jr]=lo,lo>=Bs&&(Bs=lo+1)}}if(ua.h)break n;for(xr=0;5>xr;++xr){var ls=_l[xr];!xr&&0<Dr&&(ls+=1<<Dr),ma<ls&&(ma=ls)}var uo=Pe(Bs*Va,en),ca=Bs,fs=Pe(ca,Sn);if(fs==null)var wl=null;else e(65536>=ca),wl=fs;var va=Ae(ma);if(wl==null||va==null||uo==null){Rs.a=1;break n}var Sr=uo;for(jr=$r=0;jr<Bs;++jr){var Cr=wl[jr],ns=Cr.G,To=Cr.H,Al=0,co=1,Zu=0;for(xr=0;5>xr;++xr){ls=_l[xr],ns[xr]=Sr,To[xr]=$r,!xr&&0<Dr&&(ls+=1<<Dr);r:{var il,rl=ls,Bc=Rs,Zr=va,ch=Sr,hh=$r,Nc=0,Co=Bc.m,ef=An(Co,1);if(Ee(Zr,0,0,rl),ef){var dh=An(Co,1)+1,fh=An(Co,1),kc=An(Co,fh==0?1:8);Zr[kc]=1,dh==2&&(Zr[kc=An(Co,8)]=1);var ks=1}else{var ps=Ae(19),Qu=An(Co,4)+4;if(19<Qu){Bc.a=3;var sl=0;break r}for(il=0;il<Qu;++il)ps[Yu[il]]=An(Co,3);var lu=void 0,Pl=void 0,ho=Bc,Ic=ps,uu=rl,Mc=Zr,Lc=0,Ro=ho.m,ph=8,gh=Pe(128,en);i:for(;He(gh,0,7,Ic,19);){if(An(Ro,1)){var Jh=2+2*An(Ro,3);if((lu=2+An(Ro,Jh))>uu)break i}else lu=uu;for(Pl=0;Pl<uu&&lu--;){yn(Ro);var mh=gh[0+(127&We(Ro))];un(Ro,Ro.u+mh.g);var al=mh.value;if(16>al)Mc[Pl++]=al,al!=0&&(ph=al);else{var Xh=al==16,Zh=al-16,Qh=ru[Zh],yh=An(Ro,Ba[Zh])+Qh;if(Pl+yh>uu)break i;for(var ed=Xh?ph:0;0<yh--;)Mc[Pl++]=ed}}Lc=1;break i}Lc||(ho.a=3),ks=Lc}(ks=ks&&!Co.h)&&(Nc=He(ch,hh,8,Zr,rl)),ks&&Nc!=0?sl=Nc:(Bc.a=3,sl=0)}if(sl==0)break n;if(co&&wc[xr]==1&&(co=Sr[$r].g==0),Al+=Sr[$r].g,$r+=sl,3>=xr){var Tl,Vc=va[0];for(Tl=1;Tl<ls;++Tl)va[Tl]>Vc&&(Vc=va[Tl]);Zu+=Vc}}if(Cr.nd=co,Cr.Qb=0,co&&(Cr.qb=(ns[3][To[3]+0].value<<24|ns[1][To[1]+0].value<<16|ns[2][To[2]+0].value)>>>0,Al==0&&256>ns[0][To[0]+0].value&&(Cr.Qb=1,Cr.qb+=ns[0][To[0]+0].value<<8)),Cr.jc=!Cr.Qb&&6>Zu,Cr.jc){var ec,fo=Cr;for(ec=0;ec<Zs;++ec){var Bo=ec,No=fo.pd[Bo],Dc=fo.G[0][fo.H[0]+Bo];256<=Dc.value?(No.g=Dc.g+256,No.value=Dc.value):(No.g=0,No.value=0,Bo>>=er(Dc,8,No),Bo>>=er(fo.G[1][fo.H[1]+Bo],16,No),Bo>>=er(fo.G[2][fo.H[2]+Bo],0,No),er(fo.G[3][fo.H[3]+Bo],24,No))}}}Ts.vc=ds,Ts.Wb=Bs,Ts.Ya=wl,Ts.yc=uo,Hr=1;break t}Hr=0}if(!(In=Hr)){vn.a=3;break e}if(0<Ai){if(Kn.ua=1<<Ai,!ii(Kn.Wa,Ai)){vn.a=1,In=0;break e}}else Kn.ua=0;var Fc=vn,Cl=Mn,td=Vn,cu=Fc.s,hu=cu.xc;if(Fc.c=Cl,Fc.i=td,cu.md=mn(Cl,hu),cu.wc=hu==0?-1:(1<<hu)-1,on){vn.xb=Zo;break e}if((ci=Ae(Mn*Vn))==null){vn.a=1,In=0;break e}In=(In=cr(vn,ci,0,Mn,Vn,Vn,null))&&!zn.h;break e}return In?(Bn!=null?Bn[0]=ci:(e(ci==null),e(on)),vn.$=0,on||vr(Kn)):vr(Kn),In}function Fr(De,ze){var on=De.c*De.i,vn=on+ze+16*ze;return e(De.c<=ze),De.V=Ae(vn),De.V==null?(De.Ta=null,De.Ua=0,De.a=1,0):(De.Ta=De.V,De.Ua=De.Ba+on+ze,1)}function xs(De,ze){var on=De.C,vn=ze-on,Bn=De.V,In=De.Ba+De.c*on;for(e(ze<=De.l.o);0<vn;){var Mn=16<vn?16:vn,Vn=De.l.ma,zn=De.l.width,Kn=zn*Mn,ci=Vn.ca,Ai=Vn.tb+zn*on,wi=De.Ta,vi=De.Ua;Yi(De,Mn,Bn,In),pa(wi,vi,ci,Ai,Kn),Qi(Vn,on,on+Mn,ci,Ai,zn),vn-=Mn,Bn+=Mn*De.c,on+=Mn}e(on==ze),De.C=De.Ma=ze}function Ls(){this.ub=this.yd=this.td=this.Rb=0}function _s(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function sa(){this.Fb=this.Bb=this.Cb=0,this.Zb=Ae(4),this.Lb=Ae(4)}function Mo(){this.Yb=(function(){var De=[];return(function ze(on,vn,Bn){for(var In=Bn[vn],Mn=0;Mn<In&&(on.push(Bn.length>vn+1?[]:0),!(Bn.length<vn+1));Mn++)ze(on[Mn],vn+1,Bn)})(De,0,[3,11]),De})()}function Lo(){this.jb=Ae(3),this.Wc=Re([4,8],Mo),this.Xc=Re([4,17],Mo)}function Es(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new Ae(4),this.od=new Ae(4)}function ul(){this.ld=this.La=this.dd=this.tc=0}function Au(){this.Na=this.la=0}function yo(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Qa(){this.ad=Ae(384),this.Za=0,this.Ob=Ae(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function nh(){this.uc=this.M=this.Nb=0,this.wa=Array(new ul),this.Y=0,this.ya=Array(new Qa),this.aa=0,this.l=new Ol}function Pu(){this.y=Ae(16),this.f=Ae(8),this.ea=Ae(8)}function sc(){this.cb=this.a=0,this.sc="",this.m=new xn,this.Od=new Ls,this.Kc=new _s,this.ed=new Es,this.Qa=new sa,this.Ic=this.$c=this.Aa=0,this.D=new nh,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=Pe(8,xn),this.ia=0,this.pb=Pe(4,yo),this.Pa=new Lo,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Pu),this.Hd=0,this.rb=Array(new Au),this.sb=0,this.wa=Array(new ul),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Qa),this.L=this.aa=0,this.gd=Re([4,2],ul),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ol(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function jl(){var De=new sc;return De!=null&&(De.a=0,De.sc="OK",De.cb=0,De.Xb=0,ga||(ga=Tu)),De}function rs(De,ze,on){return De.a==0&&(De.a=ze,De.sc=on,De.cb=0),0}function ba(De,ze,on){return 3<=on&&De[ze+0]==157&&De[ze+1]==1&&De[ze+2]==42}function Xs(De,ze){if(De==null)return 0;if(De.a=0,De.sc="OK",ze==null)return rs(De,2,"null VP8Io passed to VP8GetHeaders()");var on=ze.data,vn=ze.w,Bn=ze.ha;if(4>Bn)return rs(De,7,"Truncated header.");var In=on[vn+0]|on[vn+1]<<8|on[vn+2]<<16,Mn=De.Od;if(Mn.Rb=!(1&In),Mn.td=In>>1&7,Mn.yd=In>>4&1,Mn.ub=In>>5,3<Mn.td)return rs(De,3,"Incorrect keyframe parameters.");if(!Mn.yd)return rs(De,4,"Frame not displayable.");vn+=3,Bn-=3;var Vn=De.Kc;if(Mn.Rb){if(7>Bn)return rs(De,7,"cannot parse picture header");if(!ba(on,vn,Bn))return rs(De,3,"Bad code word");Vn.c=16383&(on[vn+4]<<8|on[vn+3]),Vn.Td=on[vn+4]>>6,Vn.i=16383&(on[vn+6]<<8|on[vn+5]),Vn.Ud=on[vn+6]>>6,vn+=7,Bn-=7,De.za=Vn.c+15>>4,De.Ub=Vn.i+15>>4,ze.width=Vn.c,ze.height=Vn.i,ze.Da=0,ze.j=0,ze.v=0,ze.va=ze.width,ze.o=ze.height,ze.da=0,ze.ib=ze.width,ze.hb=ze.height,ze.U=ze.width,ze.T=ze.height,Ee((In=De.Pa).jb,0,255,In.jb.length),e((In=De.Qa)!=null),In.Cb=0,In.Bb=0,In.Fb=1,Ee(In.Zb,0,0,In.Zb.length),Ee(In.Lb,0,0,In.Lb)}if(Mn.ub>Bn)return rs(De,7,"bad partition length");Tn(In=De.m,on,vn,Mn.ub),vn+=Mn.ub,Bn-=Mn.ub,Mn.Rb&&(Vn.Ld=wn(In),Vn.Kd=wn(In)),Vn=De.Qa;var zn,Kn=De.Pa;if(e(In!=null),e(Vn!=null),Vn.Cb=wn(In),Vn.Cb){if(Vn.Bb=wn(In),wn(In)){for(Vn.Fb=wn(In),zn=0;4>zn;++zn)Vn.Zb[zn]=wn(In)?pn(In,7):0;for(zn=0;4>zn;++zn)Vn.Lb[zn]=wn(In)?pn(In,6):0}if(Vn.Bb)for(zn=0;3>zn;++zn)Kn.jb[zn]=wn(In)?hn(In,8):255}else Vn.Bb=0;if(In.Ka)return rs(De,3,"cannot parse segment header");if((Vn=De.ed).zd=wn(In),Vn.Tb=hn(In,6),Vn.wb=hn(In,3),Vn.Pc=wn(In),Vn.Pc&&wn(In)){for(Kn=0;4>Kn;++Kn)wn(In)&&(Vn.vd[Kn]=pn(In,6));for(Kn=0;4>Kn;++Kn)wn(In)&&(Vn.od[Kn]=pn(In,6))}if(De.L=Vn.Tb==0?0:Vn.zd?1:2,In.Ka)return rs(De,3,"cannot parse filter header");var ci=Bn;if(Bn=zn=vn,vn=zn+ci,Vn=ci,De.Xb=(1<<hn(De.m,2))-1,ci<3*(Kn=De.Xb))on=7;else{for(zn+=3*Kn,Vn-=3*Kn,ci=0;ci<Kn;++ci){var Ai=on[Bn+0]|on[Bn+1]<<8|on[Bn+2]<<16;Ai>Vn&&(Ai=Vn),Tn(De.Jc[+ci],on,zn,Ai),zn+=Ai,Vn-=Ai,Bn+=3}Tn(De.Jc[+Kn],on,zn,Vn),on=zn<vn?0:5}if(on!=0)return rs(De,on,"cannot parse partitions");for(on=hn(zn=De.m,7),Bn=wn(zn)?pn(zn,4):0,vn=wn(zn)?pn(zn,4):0,Vn=wn(zn)?pn(zn,4):0,Kn=wn(zn)?pn(zn,4):0,zn=wn(zn)?pn(zn,4):0,ci=De.Qa,Ai=0;4>Ai;++Ai){if(ci.Cb){var wi=ci.Zb[Ai];ci.Fb||(wi+=on)}else{if(0<Ai){De.pb[Ai]=De.pb[0];continue}wi=on}var vi=De.pb[Ai];vi.Sc[0]=Ia[ha(wi+Bn,127)],vi.Sc[1]=Ma[ha(wi+0,127)],vi.Eb[0]=2*Ia[ha(wi+vn,127)],vi.Eb[1]=101581*Ma[ha(wi+Vn,127)]>>16,8>vi.Eb[1]&&(vi.Eb[1]=8),vi.Qc[0]=Ia[ha(wi+Kn,117)],vi.Qc[1]=Ma[ha(wi+zn,127)],vi.lc=wi+zn}if(!Mn.Rb)return rs(De,4,"Not a key frame.");for(wn(In),Mn=De.Pa,on=0;4>on;++on){for(Bn=0;8>Bn;++Bn)for(vn=0;3>vn;++vn)for(Vn=0;11>Vn;++Vn)Kn=kn(In,ts[on][Bn][vn][Vn])?hn(In,8):Kh[on][Bn][vn][Vn],Mn.Wc[on][Bn].Yb[vn][Vn]=Kn;for(Bn=0;17>Bn;++Bn)Mn.Xc[on][Bn]=Mn.Wc[on][Rr[Bn]]}return De.kc=wn(In),De.kc&&(De.Bd=hn(In,8)),De.cb=1}function Tu(De,ze,on,vn,Bn,In,Mn){var Vn=ze[Bn].Yb[on];for(on=0;16>Bn;++Bn){if(!kn(De,Vn[on+0]))return Bn;for(;!kn(De,Vn[on+1]);)if(Vn=ze[++Bn].Yb[0],on=0,Bn==16)return 16;var zn=ze[Bn+1].Yb;if(kn(De,Vn[on+2])){var Kn=De,ci=0;if(kn(Kn,(wi=Vn)[(Ai=on)+3]))if(kn(Kn,wi[Ai+6])){for(Vn=0,Ai=2*(ci=kn(Kn,wi[Ai+8]))+(wi=kn(Kn,wi[Ai+9+ci])),ci=0,wi=Wh[Ai];wi[Vn];++Vn)ci+=ci+kn(Kn,wi[Vn]);ci+=3+(8<<Ai)}else kn(Kn,wi[Ai+7])?(ci=7+2*kn(Kn,165),ci+=kn(Kn,145)):ci=5+kn(Kn,159);else ci=kn(Kn,wi[Ai+4])?3+kn(Kn,wi[Ai+5]):2;Vn=zn[2]}else ci=1,Vn=zn[1];zn=Mn+oh[Bn],0>(Kn=De).b&&_n(Kn);var Ai,wi=Kn.b,vi=(Ai=Kn.Ca>>1)-(Kn.I>>wi)>>31;--Kn.b,Kn.Ca+=vi,Kn.Ca|=1,Kn.I-=(Ai+1&vi)<<wi,In[zn]=((ci^vi)-vi)*vn[(0<Bn)+0]}return 16}function Cu(De){var ze=De.rb[De.sb-1];ze.la=0,ze.Na=0,Ee(De.zc,0,0,De.zc.length),De.ja=0}function Ru(De,ze){if(De==null)return 0;if(ze==null)return rs(De,2,"NULL VP8Io parameter in VP8Decode().");if(!De.cb&&!Xs(De,ze))return 0;if(e(De.cb),ze.ac==null||ze.ac(ze)){ze.ob&&(De.L=0);var on=ou[De.L];if(De.L==2?(De.yb=0,De.zb=0):(De.yb=ze.v-on>>4,De.zb=ze.j-on>>4,0>De.yb&&(De.yb=0),0>De.zb&&(De.zb=0)),De.Va=ze.o+15+on>>4,De.Hb=ze.va+15+on>>4,De.Hb>De.za&&(De.Hb=De.za),De.Va>De.Ub&&(De.Va=De.Ub),0<De.L){var vn=De.ed;for(on=0;4>on;++on){var Bn;if(De.Qa.Cb){var In=De.Qa.Lb[on];De.Qa.Fb||(In+=vn.Tb)}else In=vn.Tb;for(Bn=0;1>=Bn;++Bn){var Mn=De.gd[on][Bn],Vn=In;if(vn.Pc&&(Vn+=vn.vd[0],Bn&&(Vn+=vn.od[0])),0<(Vn=0>Vn?0:63<Vn?63:Vn)){var zn=Vn;0<vn.wb&&(zn=4<vn.wb?zn>>2:zn>>1)>9-vn.wb&&(zn=9-vn.wb),1>zn&&(zn=1),Mn.dd=zn,Mn.tc=2*Vn+zn,Mn.ld=40<=Vn?2:15<=Vn?1:0}else Mn.tc=0;Mn.La=Bn}}}on=0}else rs(De,6,"Frame setup failed"),on=De.a;if(on=on==0){if(on){De.$c=0,0<De.Aa||(De.Ic=Xu);e:{on=De.Ic,vn=4*(zn=De.za);var Kn=32*zn,ci=zn+1,Ai=0<De.L?zn*(0<De.Aa?2:1):0,wi=(De.Aa==2?2:1)*zn;if((Mn=vn+832+(Bn=3*(16*on+ou[De.L])/2*Kn)+(In=De.Fa!=null&&0<De.Fa.length?De.Kc.c*De.Kc.i:0))!=Mn)on=0;else{if(Mn>De.Vb){if(De.Vb=0,De.Ec=Ae(Mn),De.Fc=0,De.Ec==null){on=rs(De,1,"no memory during frame initialization.");break e}De.Vb=Mn}Mn=De.Ec,Vn=De.Fc,De.Ac=Mn,De.Bc=Vn,Vn+=vn,De.Gd=Pe(Kn,Pu),De.Hd=0,De.rb=Pe(ci+1,Au),De.sb=1,De.wa=Ai?Pe(Ai,ul):null,De.Y=0,De.D.Nb=0,De.D.wa=De.wa,De.D.Y=De.Y,0<De.Aa&&(De.D.Y+=zn),e(!0),De.oc=Mn,De.pc=Vn,Vn+=832,De.ya=Pe(wi,Qa),De.aa=0,De.D.ya=De.ya,De.D.aa=De.aa,De.Aa==2&&(De.D.aa+=zn),De.R=16*zn,De.B=8*zn,zn=(Kn=ou[De.L])*De.R,Kn=Kn/2*De.B,De.sa=Mn,De.ta=Vn+zn,De.qa=De.sa,De.ra=De.ta+16*on*De.R+Kn,De.Ha=De.qa,De.Ia=De.ra+8*on*De.B+Kn,De.$c=0,Vn+=Bn,De.mb=In?Mn:null,De.nb=In?Vn:null,e(Vn+In<=De.Fc+De.Vb),Cu(De),Ee(De.Ac,De.Bc,0,vn),on=1}}if(on){if(ze.ka=0,ze.y=De.sa,ze.O=De.ta,ze.f=De.qa,ze.N=De.ra,ze.ea=De.Ha,ze.Vd=De.Ia,ze.fa=De.R,ze.Rc=De.B,ze.F=null,ze.J=0,!bc){for(on=-255;255>=on;++on)xl[255+on]=0>on?-on:on;for(on=-1020;1020>=on;++on)vc[1020+on]=-128>on?-128:127<on?127:on;for(on=-112;112>=on;++on)Hu[112+on]=-16>on?-16:15<on?15:on;for(on=-255;510>=on;++on)Gu[255+on]=0>on?0:255<on?255:on;bc=1}Gs=oc,Wo=ac,io=zl,Ta=Vo,ta=Bu,wo=Ul,Ca=Mu,Ko=gl,Yo=rh,la=Vu,tu=Lu,fa=Yl,ro=Du,Jr=fc,Xr=Wl,ys=Ha,Ss=wa,so=Kl,cs[0]=Ea,cs[1]=ih,cs[2]=Do,cs[3]=hc,cs[4]=ku,cs[5]=oa,cs[6]=Fo,cs[7]=hl,cs[8]=to,cs[9]=dl,na[0]=cl,na[1]=cc,na[2]=za,na[3]=ql,na[4]=ss,na[5]=Nu,na[6]=Gl,Ya[0]=qa,Ya[1]=uc,Ya[2]=Iu,Ya[3]=Oo,Ya[4]=Uo,Ya[5]=$l,Ya[6]=Cs,on=1}else on=0}on&&(on=(function(vi,Wi){for(vi.M=0;vi.M<vi.Va;++vi.M){var Li,hi=vi.Jc[vi.M&vi.Xb],mi=vi.m,qi=vi;for(Li=0;Li<qi.za;++Li){var Ji=mi,Ui=qi,lr=Ui.Ac,sr=Ui.Bc+4*Li,gr=Ui.zc,or=Ui.ya[Ui.aa+Li];if(Ui.Qa.Bb?or.$b=kn(Ji,Ui.Pa.jb[0])?2+kn(Ji,Ui.Pa.jb[2]):kn(Ji,Ui.Pa.jb[1]):or.$b=0,Ui.kc&&(or.Ad=kn(Ji,Ui.Bd)),or.Za=!kn(Ji,145)+0,or.Za){var Or=or.Ob,Br=0;for(Ui=0;4>Ui;++Ui){var Mr,Pr=gr[0+Ui];for(Mr=0;4>Mr;++Mr){Pr=Fs[lr[sr+Mr]][Pr];for(var Hr=Ac[kn(Ji,Pr[0])];0<Hr;)Hr=Ac[2*Hr+kn(Ji,Pr[Hr])];Pr=-Hr,lr[sr+Mr]=Pr}xe(Or,Br,lr,sr,4),Br+=4,gr[0+Ui]=Pr}}else Pr=kn(Ji,156)?kn(Ji,128)?1:3:kn(Ji,163)?2:0,or.Ob[0]=Pr,Ee(lr,sr,Pr,4),Ee(gr,0,Pr,4);or.Dd=kn(Ji,142)?kn(Ji,114)?kn(Ji,183)?1:3:2:0}if(qi.m.Ka)return rs(vi,7,"Premature end-of-partition0 encountered.");for(;vi.ja<vi.za;++vi.ja){if(qi=hi,Ji=(mi=vi).rb[mi.sb-1],lr=mi.rb[mi.sb+mi.ja],Li=mi.ya[mi.aa+mi.ja],sr=mi.kc?Li.Ad:0)Ji.la=lr.la=0,Li.Za||(Ji.Na=lr.Na=0),Li.Hc=0,Li.Gc=0,Li.ia=0;else{var jr,xr;if(Ji=lr,lr=qi,sr=mi.Pa.Xc,gr=mi.ya[mi.aa+mi.ja],or=mi.pb[gr.$b],Ui=gr.ad,Or=0,Br=mi.rb[mi.sb-1],Pr=Mr=0,Ee(Ui,Or,0,384),gr.Za)var $r=0,Rs=sr[3];else{Hr=Ae(16);var hs=Ji.Na+Br.Na;if(hs=ga(lr,sr[1],hs,or.Eb,0,Hr,0),Ji.Na=Br.Na=(0<hs)+0,1<hs)Gs(Hr,0,Ui,Or);else{var Ys=Hr[0]+3>>3;for(Hr=0;256>Hr;Hr+=16)Ui[Or+Hr]=Ys}$r=1,Rs=sr[0]}var Dr=15&Ji.la,Us=15&Br.la;for(Hr=0;4>Hr;++Hr){var ua=1&Us;for(Ys=xr=0;4>Ys;++Ys)Dr=Dr>>1|(ua=(hs=ga(lr,Rs,hs=ua+(1&Dr),or.Sc,$r,Ui,Or))>$r)<<7,xr=xr<<2|(3<hs?3:1<hs?2:Ui[Or+0]!=0),Or+=16;Dr>>=4,Us=Us>>1|ua<<7,Mr=(Mr<<8|xr)>>>0}for(Rs=Dr,$r=Us>>4,jr=0;4>jr;jr+=2){for(xr=0,Dr=Ji.la>>4+jr,Us=Br.la>>4+jr,Hr=0;2>Hr;++Hr){for(ua=1&Us,Ys=0;2>Ys;++Ys)hs=ua+(1&Dr),Dr=Dr>>1|(ua=0<(hs=ga(lr,sr[2],hs,or.Qc,0,Ui,Or)))<<3,xr=xr<<2|(3<hs?3:1<hs?2:Ui[Or+0]!=0),Or+=16;Dr>>=2,Us=Us>>1|ua<<5}Pr|=xr<<4*jr,Rs|=Dr<<4<<jr,$r|=(240&Us)<<jr}Ji.la=Rs,Br.la=$r,gr.Hc=Mr,gr.Gc=Pr,gr.ia=43690&Pr?0:or.ia,sr=!(Mr|Pr)}if(0<mi.L&&(mi.wa[mi.Y+mi.ja]=mi.gd[Li.$b][Li.Za],mi.wa[mi.Y+mi.ja].La|=!sr),qi.Ka)return rs(vi,7,"Premature end-of-file encountered.")}if(Cu(vi),mi=Wi,qi=1,Li=(hi=vi).D,Ji=0<hi.L&&hi.M>=hi.zb&&hi.M<=hi.Va,hi.Aa==0)e:{if(Li.M=hi.M,Li.uc=Ji,Zl(hi,Li),qi=1,Li=(xr=hi.D).Nb,Ji=(Pr=ou[hi.L])*hi.R,lr=Pr/2*hi.B,Hr=16*Li*hi.R,Ys=8*Li*hi.B,sr=hi.sa,gr=hi.ta-Ji+Hr,or=hi.qa,Ui=hi.ra-lr+Ys,Or=hi.Ha,Br=hi.Ia-lr+Ys,Us=(Dr=xr.M)==0,Mr=Dr>=hi.Va-1,hi.Aa==2&&Zl(hi,xr),xr.uc)for(ua=(hs=hi).D.M,e(hs.D.uc),xr=hs.yb;xr<hs.Hb;++xr){$r=xr,Rs=ua;var Ts=(ds=(ls=hs).D).Nb;jr=ls.R;var ds=ds.wa[ds.Y+$r],Bs=ls.sa,ma=ls.ta+16*Ts*jr+16*$r,Va=ds.dd,ws=ds.tc;if(ws!=0)if(e(3<=ws),ls.L==1)0<$r&&ys(Bs,ma,jr,ws+4),ds.La&&so(Bs,ma,jr,ws),0<Rs&&Xr(Bs,ma,jr,ws+4),ds.La&&Ss(Bs,ma,jr,ws);else{var bs=ls.B,Ns=ls.qa,ya=ls.ra+8*Ts*bs+8*$r,lo=ls.Ha,ls=ls.Ia+8*Ts*bs+8*$r;Ts=ds.ld,0<$r&&(Ko(Bs,ma,jr,ws+4,Va,Ts),la(Ns,ya,lo,ls,bs,ws+4,Va,Ts)),ds.La&&(fa(Bs,ma,jr,ws,Va,Ts),Jr(Ns,ya,lo,ls,bs,ws,Va,Ts)),0<Rs&&(Ca(Bs,ma,jr,ws+4,Va,Ts),Yo(Ns,ya,lo,ls,bs,ws+4,Va,Ts)),ds.La&&(tu(Bs,ma,jr,ws,Va,Ts),ro(Ns,ya,lo,ls,bs,ws,Va,Ts))}}if(hi.ia&&alert("todo:DitherRow"),mi.put!=null){if(xr=16*Dr,Dr=16*(Dr+1),Us?(mi.y=hi.sa,mi.O=hi.ta+Hr,mi.f=hi.qa,mi.N=hi.ra+Ys,mi.ea=hi.Ha,mi.W=hi.Ia+Ys):(xr-=Pr,mi.y=sr,mi.O=gr,mi.f=or,mi.N=Ui,mi.ea=Or,mi.W=Br),Mr||(Dr-=Pr),Dr>mi.o&&(Dr=mi.o),mi.F=null,mi.J=null,hi.Fa!=null&&0<hi.Fa.length&&xr<Dr&&(mi.J=Jl(hi,mi,xr,Dr-xr),mi.F=hi.mb,mi.F==null&&mi.F.length==0)){qi=rs(hi,3,"Could not decode alpha data.");break e}xr<mi.j&&(Pr=mi.j-xr,xr=mi.j,e(!(1&Pr)),mi.O+=hi.R*Pr,mi.N+=hi.B*(Pr>>1),mi.W+=hi.B*(Pr>>1),mi.F!=null&&(mi.J+=mi.width*Pr)),xr<Dr&&(mi.O+=mi.v,mi.N+=mi.v>>1,mi.W+=mi.v>>1,mi.F!=null&&(mi.J+=mi.v),mi.ka=xr-mi.j,mi.U=mi.va-mi.v,mi.T=Dr-xr,qi=mi.put(mi))}Li+1!=hi.Ic||Mr||(xe(hi.sa,hi.ta-Ji,sr,gr+16*hi.R,Ji),xe(hi.qa,hi.ra-lr,or,Ui+8*hi.B,lr),xe(hi.Ha,hi.Ia-lr,Or,Br+8*hi.B,lr))}if(!qi)return rs(vi,6,"Output aborted.")}return 1})(De,ze)),ze.bc!=null&&ze.bc(ze),on&=1}return on?(De.cb=0,on):0}function xa(De,ze,on,vn,Bn){Bn=De[ze+on+32*vn]+(Bn>>3),De[ze+on+32*vn]=-256&Bn?0>Bn?0:255:Bn}function vo(De,ze,on,vn,Bn,In){xa(De,ze,0,on,vn+Bn),xa(De,ze,1,on,vn+In),xa(De,ze,2,on,vn-In),xa(De,ze,3,on,vn-Bn)}function aa(De){return(20091*De>>16)+De}function qs(De,ze,on,vn){var Bn,In=0,Mn=Ae(16);for(Bn=0;4>Bn;++Bn){var Vn=De[ze+0]+De[ze+8],zn=De[ze+0]-De[ze+8],Kn=(35468*De[ze+4]>>16)-aa(De[ze+12]),ci=aa(De[ze+4])+(35468*De[ze+12]>>16);Mn[In+0]=Vn+ci,Mn[In+1]=zn+Kn,Mn[In+2]=zn-Kn,Mn[In+3]=Vn-ci,In+=4,ze++}for(Bn=In=0;4>Bn;++Bn)Vn=(De=Mn[In+0]+4)+Mn[In+8],zn=De-Mn[In+8],Kn=(35468*Mn[In+4]>>16)-aa(Mn[In+12]),xa(on,vn,0,0,Vn+(ci=aa(Mn[In+4])+(35468*Mn[In+12]>>16))),xa(on,vn,1,0,zn+Kn),xa(on,vn,2,0,zn-Kn),xa(on,vn,3,0,Vn-ci),In++,vn+=32}function Ul(De,ze,on,vn){var Bn=De[ze+0]+4,In=35468*De[ze+4]>>16,Mn=aa(De[ze+4]),Vn=35468*De[ze+1]>>16;vo(on,vn,0,Bn+Mn,De=aa(De[ze+1]),Vn),vo(on,vn,1,Bn+In,De,Vn),vo(on,vn,2,Bn-In,De,Vn),vo(on,vn,3,Bn-Mn,De,Vn)}function ac(De,ze,on,vn,Bn){qs(De,ze,on,vn),Bn&&qs(De,ze+16,on,vn+4)}function zl(De,ze,on,vn){Wo(De,ze+0,on,vn,1),Wo(De,ze+32,on,vn+128,1)}function Vo(De,ze,on,vn){var Bn;for(De=De[ze+0]+4,Bn=0;4>Bn;++Bn)for(ze=0;4>ze;++ze)xa(on,vn,ze,Bn,De)}function Bu(De,ze,on,vn){De[ze+0]&&Ta(De,ze+0,on,vn),De[ze+16]&&Ta(De,ze+16,on,vn+4),De[ze+32]&&Ta(De,ze+32,on,vn+128),De[ze+48]&&Ta(De,ze+48,on,vn+128+4)}function oc(De,ze,on,vn){var Bn,In=Ae(16);for(Bn=0;4>Bn;++Bn){var Mn=De[ze+0+Bn]+De[ze+12+Bn],Vn=De[ze+4+Bn]+De[ze+8+Bn],zn=De[ze+4+Bn]-De[ze+8+Bn],Kn=De[ze+0+Bn]-De[ze+12+Bn];In[0+Bn]=Mn+Vn,In[8+Bn]=Mn-Vn,In[4+Bn]=Kn+zn,In[12+Bn]=Kn-zn}for(Bn=0;4>Bn;++Bn)Mn=(De=In[0+4*Bn]+3)+In[3+4*Bn],Vn=In[1+4*Bn]+In[2+4*Bn],zn=In[1+4*Bn]-In[2+4*Bn],Kn=De-In[3+4*Bn],on[vn+0]=Mn+Vn>>3,on[vn+16]=Kn+zn>>3,on[vn+32]=Mn-Vn>>3,on[vn+48]=Kn-zn>>3,vn+=64}function eo(De,ze,on){var vn,Bn=ze-32,In=Ws,Mn=255-De[Bn-1];for(vn=0;vn<on;++vn){var Vn,zn=In,Kn=Mn+De[ze-1];for(Vn=0;Vn<on;++Vn)De[ze+Vn]=zn[Kn+De[Bn+Vn]];ze+=32}}function ih(De,ze){eo(De,ze,4)}function uc(De,ze){eo(De,ze,8)}function cc(De,ze){eo(De,ze,16)}function za(De,ze){var on;for(on=0;16>on;++on)xe(De,ze+32*on,De,ze-32,16)}function ql(De,ze){var on;for(on=16;0<on;--on)Ee(De,ze,De[ze-1],16),ze+=32}function Hl(De,ze,on){var vn;for(vn=0;16>vn;++vn)Ee(ze,on+32*vn,De,16)}function cl(De,ze){var on,vn=16;for(on=0;16>on;++on)vn+=De[ze-1+32*on]+De[ze+on-32];Hl(vn>>5,De,ze)}function ss(De,ze){var on,vn=8;for(on=0;16>on;++on)vn+=De[ze-1+32*on];Hl(vn>>4,De,ze)}function Nu(De,ze){var on,vn=8;for(on=0;16>on;++on)vn+=De[ze+on-32];Hl(vn>>4,De,ze)}function Gl(De,ze){Hl(128,De,ze)}function br(De,ze,on){return De+2*ze+on+2>>2}function Do(De,ze){var on,vn=ze-32;for(vn=new Uint8Array([br(De[vn-1],De[vn+0],De[vn+1]),br(De[vn+0],De[vn+1],De[vn+2]),br(De[vn+1],De[vn+2],De[vn+3]),br(De[vn+2],De[vn+3],De[vn+4])]),on=0;4>on;++on)xe(De,ze+32*on,vn,0,vn.length)}function hc(De,ze){var on=De[ze-1],vn=De[ze-1+32],Bn=De[ze-1+64],In=De[ze-1+96];$n(De,ze+0,16843009*br(De[ze-1-32],on,vn)),$n(De,ze+32,16843009*br(on,vn,Bn)),$n(De,ze+64,16843009*br(vn,Bn,In)),$n(De,ze+96,16843009*br(Bn,In,In))}function Ea(De,ze){var on,vn=4;for(on=0;4>on;++on)vn+=De[ze+on-32]+De[ze-1+32*on];for(vn>>=3,on=0;4>on;++on)Ee(De,ze+32*on,vn,4)}function ku(De,ze){var on=De[ze-1+0],vn=De[ze-1+32],Bn=De[ze-1+64],In=De[ze-1-32],Mn=De[ze+0-32],Vn=De[ze+1-32],zn=De[ze+2-32],Kn=De[ze+3-32];De[ze+0+96]=br(vn,Bn,De[ze-1+96]),De[ze+1+96]=De[ze+0+64]=br(on,vn,Bn),De[ze+2+96]=De[ze+1+64]=De[ze+0+32]=br(In,on,vn),De[ze+3+96]=De[ze+2+64]=De[ze+1+32]=De[ze+0+0]=br(Mn,In,on),De[ze+3+64]=De[ze+2+32]=De[ze+1+0]=br(Vn,Mn,In),De[ze+3+32]=De[ze+2+0]=br(zn,Vn,Mn),De[ze+3+0]=br(Kn,zn,Vn)}function Fo(De,ze){var on=De[ze+1-32],vn=De[ze+2-32],Bn=De[ze+3-32],In=De[ze+4-32],Mn=De[ze+5-32],Vn=De[ze+6-32],zn=De[ze+7-32];De[ze+0+0]=br(De[ze+0-32],on,vn),De[ze+1+0]=De[ze+0+32]=br(on,vn,Bn),De[ze+2+0]=De[ze+1+32]=De[ze+0+64]=br(vn,Bn,In),De[ze+3+0]=De[ze+2+32]=De[ze+1+64]=De[ze+0+96]=br(Bn,In,Mn),De[ze+3+32]=De[ze+2+64]=De[ze+1+96]=br(In,Mn,Vn),De[ze+3+64]=De[ze+2+96]=br(Mn,Vn,zn),De[ze+3+96]=br(Vn,zn,zn)}function oa(De,ze){var on=De[ze-1+0],vn=De[ze-1+32],Bn=De[ze-1+64],In=De[ze-1-32],Mn=De[ze+0-32],Vn=De[ze+1-32],zn=De[ze+2-32],Kn=De[ze+3-32];De[ze+0+0]=De[ze+1+64]=In+Mn+1>>1,De[ze+1+0]=De[ze+2+64]=Mn+Vn+1>>1,De[ze+2+0]=De[ze+3+64]=Vn+zn+1>>1,De[ze+3+0]=zn+Kn+1>>1,De[ze+0+96]=br(Bn,vn,on),De[ze+0+64]=br(vn,on,In),De[ze+0+32]=De[ze+1+96]=br(on,In,Mn),De[ze+1+32]=De[ze+2+96]=br(In,Mn,Vn),De[ze+2+32]=De[ze+3+96]=br(Mn,Vn,zn),De[ze+3+32]=br(Vn,zn,Kn)}function hl(De,ze){var on=De[ze+0-32],vn=De[ze+1-32],Bn=De[ze+2-32],In=De[ze+3-32],Mn=De[ze+4-32],Vn=De[ze+5-32],zn=De[ze+6-32],Kn=De[ze+7-32];De[ze+0+0]=on+vn+1>>1,De[ze+1+0]=De[ze+0+64]=vn+Bn+1>>1,De[ze+2+0]=De[ze+1+64]=Bn+In+1>>1,De[ze+3+0]=De[ze+2+64]=In+Mn+1>>1,De[ze+0+32]=br(on,vn,Bn),De[ze+1+32]=De[ze+0+96]=br(vn,Bn,In),De[ze+2+32]=De[ze+1+96]=br(Bn,In,Mn),De[ze+3+32]=De[ze+2+96]=br(In,Mn,Vn),De[ze+3+64]=br(Mn,Vn,zn),De[ze+3+96]=br(Vn,zn,Kn)}function dl(De,ze){var on=De[ze-1+0],vn=De[ze-1+32],Bn=De[ze-1+64],In=De[ze-1+96];De[ze+0+0]=on+vn+1>>1,De[ze+2+0]=De[ze+0+32]=vn+Bn+1>>1,De[ze+2+32]=De[ze+0+64]=Bn+In+1>>1,De[ze+1+0]=br(on,vn,Bn),De[ze+3+0]=De[ze+1+32]=br(vn,Bn,In),De[ze+3+32]=De[ze+1+64]=br(Bn,In,In),De[ze+3+64]=De[ze+2+64]=De[ze+0+96]=De[ze+1+96]=De[ze+2+96]=De[ze+3+96]=In}function to(De,ze){var on=De[ze-1+0],vn=De[ze-1+32],Bn=De[ze-1+64],In=De[ze-1+96],Mn=De[ze-1-32],Vn=De[ze+0-32],zn=De[ze+1-32],Kn=De[ze+2-32];De[ze+0+0]=De[ze+2+32]=on+Mn+1>>1,De[ze+0+32]=De[ze+2+64]=vn+on+1>>1,De[ze+0+64]=De[ze+2+96]=Bn+vn+1>>1,De[ze+0+96]=In+Bn+1>>1,De[ze+3+0]=br(Vn,zn,Kn),De[ze+2+0]=br(Mn,Vn,zn),De[ze+1+0]=De[ze+3+32]=br(on,Mn,Vn),De[ze+1+32]=De[ze+3+64]=br(vn,on,Mn),De[ze+1+64]=De[ze+3+96]=br(Bn,vn,on),De[ze+1+96]=br(In,Bn,vn)}function Iu(De,ze){var on;for(on=0;8>on;++on)xe(De,ze+32*on,De,ze-32,8)}function Oo(De,ze){var on;for(on=0;8>on;++on)Ee(De,ze,De[ze-1],8),ze+=32}function jo(De,ze,on){var vn;for(vn=0;8>vn;++vn)Ee(ze,on+32*vn,De,8)}function qa(De,ze){var on,vn=8;for(on=0;8>on;++on)vn+=De[ze+on-32]+De[ze-1+32*on];jo(vn>>4,De,ze)}function $l(De,ze){var on,vn=4;for(on=0;8>on;++on)vn+=De[ze+on-32];jo(vn>>3,De,ze)}function Uo(De,ze){var on,vn=4;for(on=0;8>on;++on)vn+=De[ze-1+32*on];jo(vn>>3,De,ze)}function Cs(De,ze){jo(128,De,ze)}function Sa(De,ze,on){var vn=De[ze-on],Bn=De[ze+0],In=3*(Bn-vn)+Ao[1020+De[ze-2*on]-De[ze+on]],Mn=$u[112+(In+4>>3)];De[ze-on]=Ws[255+vn+$u[112+(In+3>>3)]],De[ze+0]=Ws[255+Bn-Mn]}function pl(De,ze,on,vn){var Bn=De[ze+0],In=De[ze+on];return Ds[255+De[ze-2*on]-De[ze-on]]>vn||Ds[255+In-Bn]>vn}function zo(De,ze,on,vn){return 4*Ds[255+De[ze-on]-De[ze+0]]+Ds[255+De[ze-2*on]-De[ze+on]]<=vn}function dc(De,ze,on,vn,Bn){var In=De[ze-3*on],Mn=De[ze-2*on],Vn=De[ze-on],zn=De[ze+0],Kn=De[ze+on],ci=De[ze+2*on],Ai=De[ze+3*on];return 4*Ds[255+Vn-zn]+Ds[255+Mn-Kn]>vn?0:Ds[255+De[ze-4*on]-In]<=Bn&&Ds[255+In-Mn]<=Bn&&Ds[255+Mn-Vn]<=Bn&&Ds[255+Ai-ci]<=Bn&&Ds[255+ci-Kn]<=Bn&&Ds[255+Kn-zn]<=Bn}function Wl(De,ze,on,vn){var Bn=2*vn+1;for(vn=0;16>vn;++vn)zo(De,ze+vn,on,Bn)&&Sa(De,ze+vn,on)}function Ha(De,ze,on,vn){var Bn=2*vn+1;for(vn=0;16>vn;++vn)zo(De,ze+vn*on,1,Bn)&&Sa(De,ze+vn*on,1)}function wa(De,ze,on,vn){var Bn;for(Bn=3;0<Bn;--Bn)Wl(De,ze+=4*on,on,vn)}function Kl(De,ze,on,vn){var Bn;for(Bn=3;0<Bn;--Bn)Ha(De,ze+=4,on,vn)}function bo(De,ze,on,vn,Bn,In,Mn,Vn){for(In=2*In+1;0<Bn--;){if(dc(De,ze,on,In,Mn))if(pl(De,ze,on,Vn))Sa(De,ze,on);else{var zn=De,Kn=ze,ci=on,Ai=zn[Kn-2*ci],wi=zn[Kn-ci],vi=zn[Kn+0],Wi=zn[Kn+ci],Li=zn[Kn+2*ci],hi=27*(qi=Ao[1020+3*(vi-wi)+Ao[1020+Ai-Wi]])+63>>7,mi=18*qi+63>>7,qi=9*qi+63>>7;zn[Kn-3*ci]=Ws[255+zn[Kn-3*ci]+qi],zn[Kn-2*ci]=Ws[255+Ai+mi],zn[Kn-ci]=Ws[255+wi+hi],zn[Kn+0]=Ws[255+vi-hi],zn[Kn+ci]=Ws[255+Wi-mi],zn[Kn+2*ci]=Ws[255+Li-qi]}ze+=vn}}function Ga(De,ze,on,vn,Bn,In,Mn,Vn){for(In=2*In+1;0<Bn--;){if(dc(De,ze,on,In,Mn))if(pl(De,ze,on,Vn))Sa(De,ze,on);else{var zn=De,Kn=ze,ci=on,Ai=zn[Kn-ci],wi=zn[Kn+0],vi=zn[Kn+ci],Wi=$u[112+((Li=3*(wi-Ai))+4>>3)],Li=$u[112+(Li+3>>3)],hi=Wi+1>>1;zn[Kn-2*ci]=Ws[255+zn[Kn-2*ci]+hi],zn[Kn-ci]=Ws[255+Ai+Li],zn[Kn+0]=Ws[255+wi-Wi],zn[Kn+ci]=Ws[255+vi-hi]}ze+=vn}}function Mu(De,ze,on,vn,Bn,In){bo(De,ze,on,1,16,vn,Bn,In)}function gl(De,ze,on,vn,Bn,In){bo(De,ze,1,on,16,vn,Bn,In)}function Lu(De,ze,on,vn,Bn,In){var Mn;for(Mn=3;0<Mn;--Mn)Ga(De,ze+=4*on,on,1,16,vn,Bn,In)}function Yl(De,ze,on,vn,Bn,In){var Mn;for(Mn=3;0<Mn;--Mn)Ga(De,ze+=4,1,on,16,vn,Bn,In)}function rh(De,ze,on,vn,Bn,In,Mn,Vn){bo(De,ze,Bn,1,8,In,Mn,Vn),bo(on,vn,Bn,1,8,In,Mn,Vn)}function Vu(De,ze,on,vn,Bn,In,Mn,Vn){bo(De,ze,1,Bn,8,In,Mn,Vn),bo(on,vn,1,Bn,8,In,Mn,Vn)}function Du(De,ze,on,vn,Bn,In,Mn,Vn){Ga(De,ze+4*Bn,Bn,1,8,In,Mn,Vn),Ga(on,vn+4*Bn,Bn,1,8,In,Mn,Vn)}function fc(De,ze,on,vn,Bn,In,Mn,Vn){Ga(De,ze+4,1,Bn,8,In,Mn,Vn),Ga(on,vn+4,1,Bn,8,In,Mn,Vn)}function ml(){this.ba=new Fn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Mi,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Fu(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ou(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function pc(){this.ua=0,this.Wa=new Pn,this.vb=new Pn,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Sn,this.yc=new en}function sh(){this.xb=this.a=0,this.l=new Ol,this.ca=new Fn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Je,this.Pb=0,this.wd=new Je,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new pc,this.ab=0,this.gc=Pe(4,Ou),this.Oc=0}function qo(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ol,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function yl(De,ze,on,vn,Bn,In,Mn){for(De=De==null?0:De[ze+0],ze=0;ze<Mn;++ze)Bn[In+ze]=De+on[vn+ze]&255,De=Bn[In+ze]}function ju(De,ze,on,vn,Bn,In,Mn){var Vn;if(De==null)yl(null,null,on,vn,Bn,In,Mn);else for(Vn=0;Vn<Mn;++Vn)Bn[In+Vn]=De[ze+Vn]+on[vn+Vn]&255}function Ho(De,ze,on,vn,Bn,In,Mn){if(De==null)yl(null,null,on,vn,Bn,In,Mn);else{var Vn,zn=De[ze+0],Kn=zn,ci=zn;for(Vn=0;Vn<Mn;++Vn)Kn=ci+(zn=De[ze+Vn])-Kn,ci=on[vn+Vn]+(-256&Kn?0>Kn?0:255:Kn)&255,Kn=zn,Bn[In+Vn]=ci}}function Jl(De,ze,on,vn){var Bn=ze.width,In=ze.o;if(e(De!=null&&ze!=null),0>on||0>=vn||on+vn>In)return null;if(!De.Cc){if(De.ga==null){var Mn;if(De.ga=new qo,(Mn=De.ga==null)||(Mn=ze.width*ze.o,e(De.Gb.length==0),De.Gb=Ae(Mn),De.Uc=0,De.Gb==null?Mn=0:(De.mb=De.Gb,De.nb=De.Uc,De.rc=null,Mn=1),Mn=!Mn),!Mn){Mn=De.ga;var Vn=De.Fa,zn=De.P,Kn=De.qc,ci=De.mb,Ai=De.nb,wi=zn+1,vi=Kn-1,Wi=Mn.l;if(e(Vn!=null&&ci!=null&&ze!=null),Po[0]=null,Po[1]=yl,Po[2]=ju,Po[3]=Ho,Mn.ca=ci,Mn.tb=Ai,Mn.c=ze.width,Mn.i=ze.height,e(0<Mn.c&&0<Mn.i),1>=Kn)ze=0;else if(Mn.$a=Vn[zn+0]>>0&3,Mn.Z=Vn[zn+0]>>2&3,Mn.Lc=Vn[zn+0]>>4&3,zn=Vn[zn+0]>>6&3,0>Mn.$a||1<Mn.$a||4<=Mn.Z||1<Mn.Lc||zn)ze=0;else if(Wi.put=Un,Wi.ac=Hn,Wi.bc=ti,Wi.ma=Mn,Wi.width=ze.width,Wi.height=ze.height,Wi.Da=ze.Da,Wi.v=ze.v,Wi.va=ze.va,Wi.j=ze.j,Wi.o=ze.o,Mn.$a)e:{e(Mn.$a==1),ze=wr();t:for(;;){if(ze==null){ze=0;break e}if(e(Mn!=null),Mn.mc=ze,ze.c=Mn.c,ze.i=Mn.i,ze.l=Mn.l,ze.l.ma=Mn,ze.l.width=Mn.c,ze.l.height=Mn.i,ze.a=0,bn(ze.m,Vn,wi,vi),!qr(Mn.c,Mn.i,1,ze,null)||(ze.ab==1&&ze.gc[0].hc==3&&ir(ze.s)?(Mn.ic=1,Vn=ze.c*ze.i,ze.Ta=null,ze.Ua=0,ze.V=Ae(Vn),ze.Ba=0,ze.V==null?(ze.a=1,ze=0):ze=1):(Mn.ic=0,ze=Fr(ze,Mn.c)),!ze))break t;ze=1;break e}Mn.mc=null,ze=0}else ze=vi>=Mn.c*Mn.i;Mn=!ze}if(Mn)return null;De.ga.Lc!=1?De.Ga=0:vn=In-on}e(De.ga!=null),e(on+vn<=In);e:{if(ze=(Vn=De.ga).c,In=Vn.l.o,Vn.$a==0){if(wi=De.rc,vi=De.Vc,Wi=De.Fa,zn=De.P+1+on*ze,Kn=De.mb,ci=De.nb+on*ze,e(zn<=De.P+De.qc),Vn.Z!=0)for(e(Po[Vn.Z]!=null),Mn=0;Mn<vn;++Mn)Po[Vn.Z](wi,vi,Wi,zn,Kn,ci,ze),wi=Kn,vi=ci,ci+=ze,zn+=ze;else for(Mn=0;Mn<vn;++Mn)xe(Kn,ci,Wi,zn,ze),wi=Kn,vi=ci,ci+=ze,zn+=ze;De.rc=wi,De.Vc=vi}else{if(e(Vn.mc!=null),ze=on+vn,e((Mn=Vn.mc)!=null),e(ze<=Mn.i),Mn.C>=ze)ze=1;else if(Vn.ic||Ei(),Vn.ic){Vn=Mn.V,wi=Mn.Ba,vi=Mn.c;var Li=Mn.i,hi=(Wi=1,zn=Mn.$/vi,Kn=Mn.$%vi,ci=Mn.m,Ai=Mn.s,Mn.$),mi=vi*Li,qi=vi*ze,Ji=Ai.wc,Ui=hi<qi?Zi(Ai,Kn,zn):null;e(hi<=mi),e(ze<=Li),e(ir(Ai));t:for(;;){for(;!ci.h&&hi<qi;){if(Kn&Ji||(Ui=Zi(Ai,Kn,zn)),e(Ui!=null),yn(ci),256>(Li=Bi(Ui.G[0],Ui.H[0],ci)))Vn[wi+hi]=Li,++hi,++Kn>=vi&&(Kn=0,++zn<=ze&&!(zn%16)&&rr(Mn,zn));else{if(!(280>Li)){Wi=0;break t}Li=si(Li-256,ci);var lr,sr=Bi(Ui.G[4],Ui.H[4],ci);if(yn(ci),!(hi>=(sr=Ri(vi,sr=si(sr,ci)))&&mi-hi>=Li)){Wi=0;break t}for(lr=0;lr<Li;++lr)Vn[wi+hi+lr]=Vn[wi+hi+lr-sr];for(hi+=Li,Kn+=Li;Kn>=vi;)Kn-=vi,++zn<=ze&&!(zn%16)&&rr(Mn,zn);hi<qi&&Kn&Ji&&(Ui=Zi(Ai,Kn,zn))}e(ci.h==Ze(ci))}rr(Mn,zn>ze?ze:zn);break t}!Wi||ci.h&&hi<mi?(Wi=0,Mn.a=ci.h?5:3):Mn.$=hi,ze=Wi}else ze=cr(Mn,Mn.V,Mn.Ba,Mn.c,Mn.i,ze,xs);if(!ze){vn=0;break e}}on+vn>=In&&(De.Cc=1),vn=1}if(!vn)return null;if(De.Cc&&((vn=De.ga)!=null&&(vn.mc=null),De.ga=null,0<De.Ga))return alert("todo:WebPDequantizeLevels"),null}return De.nb+on*Bn}function nn(De,ze,on,vn,Bn,In){for(;0<Bn--;){var Mn,Vn=De,zn=ze+(on?1:0),Kn=De,ci=ze+(on?0:3);for(Mn=0;Mn<vn;++Mn){var Ai=Kn[ci+4*Mn];Ai!=255&&(Ai*=32897,Vn[zn+4*Mn+0]=Vn[zn+4*Mn+0]*Ai>>23,Vn[zn+4*Mn+1]=Vn[zn+4*Mn+1]*Ai>>23,Vn[zn+4*Mn+2]=Vn[zn+4*Mn+2]*Ai>>23)}ze+=In}}function Nn(De,ze,on,vn,Bn){for(;0<vn--;){var In;for(In=0;In<on;++In){var Mn=De[ze+2*In+0],Vn=15&(Kn=De[ze+2*In+1]),zn=4369*Vn,Kn=(240&Kn|Kn>>4)*zn>>16;De[ze+2*In+0]=(240&Mn|Mn>>4)*zn>>16&240|(15&Mn|Mn<<4)*zn>>16>>4&15,De[ze+2*In+1]=240&Kn|Vn}ze+=Bn}}function Xn(De,ze,on,vn,Bn,In,Mn,Vn){var zn,Kn,ci=255;for(Kn=0;Kn<Bn;++Kn){for(zn=0;zn<vn;++zn){var Ai=De[ze+zn];In[Mn+4*zn]=Ai,ci&=Ai}ze+=on,Mn+=Vn}return ci!=255}function li(De,ze,on,vn,Bn){var In;for(In=0;In<Bn;++In)on[vn+In]=De[ze+In]>>8}function Ei(){ao=nn,$s=Nn,bl=Xn,pa=li}function Fi(De,ze,on){Ke[De]=function(vn,Bn,In,Mn,Vn,zn,Kn,ci,Ai,wi,vi,Wi,Li,hi,mi,qi,Ji){var Ui,lr=Ji-1>>1,sr=Vn[zn+0]|Kn[ci+0]<<16,gr=Ai[wi+0]|vi[Wi+0]<<16;e(vn!=null);var or=3*sr+gr+131074>>2;for(ze(vn[Bn+0],255&or,or>>16,Li,hi),In!=null&&(or=3*gr+sr+131074>>2,ze(In[Mn+0],255&or,or>>16,mi,qi)),Ui=1;Ui<=lr;++Ui){var Or=Vn[zn+Ui]|Kn[ci+Ui]<<16,Br=Ai[wi+Ui]|vi[Wi+Ui]<<16,Mr=sr+Or+gr+Br+524296,Pr=Mr+2*(Or+gr)>>3;or=Pr+sr>>1,sr=(Mr=Mr+2*(sr+Br)>>3)+Or>>1,ze(vn[Bn+2*Ui-1],255&or,or>>16,Li,hi+(2*Ui-1)*on),ze(vn[Bn+2*Ui-0],255&sr,sr>>16,Li,hi+(2*Ui-0)*on),In!=null&&(or=Mr+gr>>1,sr=Pr+Br>>1,ze(In[Mn+2*Ui-1],255&or,or>>16,mi,qi+(2*Ui-1)*on),ze(In[Mn+2*Ui+0],255&sr,sr>>16,mi,qi+(2*Ui+0)*on)),sr=Or,gr=Br}1&Ji||(or=3*sr+gr+131074>>2,ze(vn[Bn+Ji-1],255&or,or>>16,Li,hi+(Ji-1)*on),In!=null&&(or=3*gr+sr+131074>>2,ze(In[Mn+Ji-1],255&or,or>>16,mi,qi+(Ji-1)*on)))}}function nr(){Os[xc]=El,Os[Ks]=su,Os[_c]=uh,Os[Ra]=Pc,Os[Wu]=Qo,Os[nu]=oo,Os[Jo]=el,Os[Ku]=su,Os[Ec]=Pc,Os[iu]=Qo,Os[Sc]=oo}function ur(De){return De&-16384?0>De?0:255:De>>Tc}function mr(De,ze){return ur((19077*De>>8)+(26149*ze>>8)-14234)}function Er(De,ze,on){return ur((19077*De>>8)-(6419*ze>>8)-(13320*on>>8)+8708)}function Ar(De,ze){return ur((19077*De>>8)+(33050*ze>>8)-17685)}function Ir(De,ze,on,vn,Bn){vn[Bn+0]=mr(De,on),vn[Bn+1]=Er(De,ze,on),vn[Bn+2]=Ar(De,ze)}function as(De,ze,on,vn,Bn){vn[Bn+0]=Ar(De,ze),vn[Bn+1]=Er(De,ze,on),vn[Bn+2]=mr(De,on)}function os(De,ze,on,vn,Bn){var In=Er(De,ze,on);ze=In<<3&224|Ar(De,ze)>>3,vn[Bn+0]=248&mr(De,on)|In>>5,vn[Bn+1]=ze}function ms(De,ze,on,vn,Bn){var In=240&Ar(De,ze)|15;vn[Bn+0]=240&mr(De,on)|Er(De,ze,on)>>4,vn[Bn+1]=In}function Vs(De,ze,on,vn,Bn){vn[Bn+0]=255,Ir(De,ze,on,vn,Bn+1)}function Ps(De,ze,on,vn,Bn){as(De,ze,on,vn,Bn),vn[Bn+3]=255}function Hs(De,ze,on,vn,Bn){Ir(De,ze,on,vn,Bn),vn[Bn+3]=255}function ha(De,ze){return 0>De?0:De>ze?ze:De}function xo(De,ze,on){Ke[De]=function(vn,Bn,In,Mn,Vn,zn,Kn,ci,Ai){for(var wi=ci+(-2&Ai)*on;ci!=wi;)ze(vn[Bn+0],In[Mn+0],Vn[zn+0],Kn,ci),ze(vn[Bn+1],In[Mn+0],Vn[zn+0],Kn,ci+on),Bn+=2,++Mn,++zn,ci+=2*on;1&Ai&&ze(vn[Bn+0],In[Mn+0],Vn[zn+0],Kn,ci)}}function gc(De,ze,on){return on==0?De==0?ze==0?6:5:ze==0?4:0:on}function Xl(De,ze,on,vn,Bn){switch(De>>>30){case 3:Wo(ze,on,vn,Bn,0);break;case 2:wo(ze,on,vn,Bn);break;case 1:Ta(ze,on,vn,Bn)}}function Zl(De,ze){var on,vn,Bn=ze.M,In=ze.Nb,Mn=De.oc,Vn=De.pc+40,zn=De.oc,Kn=De.pc+584,ci=De.oc,Ai=De.pc+600;for(on=0;16>on;++on)Mn[Vn+32*on-1]=129;for(on=0;8>on;++on)zn[Kn+32*on-1]=129,ci[Ai+32*on-1]=129;for(0<Bn?Mn[Vn-1-32]=zn[Kn-1-32]=ci[Ai-1-32]=129:(Ee(Mn,Vn-32-1,127,21),Ee(zn,Kn-32-1,127,9),Ee(ci,Ai-32-1,127,9)),vn=0;vn<De.za;++vn){var wi=ze.ya[ze.aa+vn];if(0<vn){for(on=-1;16>on;++on)xe(Mn,Vn+32*on-4,Mn,Vn+32*on+12,4);for(on=-1;8>on;++on)xe(zn,Kn+32*on-4,zn,Kn+32*on+4,4),xe(ci,Ai+32*on-4,ci,Ai+32*on+4,4)}var vi=De.Gd,Wi=De.Hd+vn,Li=wi.ad,hi=wi.Hc;if(0<Bn&&(xe(Mn,Vn-32,vi[Wi].y,0,16),xe(zn,Kn-32,vi[Wi].f,0,8),xe(ci,Ai-32,vi[Wi].ea,0,8)),wi.Za){var mi=Mn,qi=Vn-32+16;for(0<Bn&&(vn>=De.za-1?Ee(mi,qi,vi[Wi].y[15],4):xe(mi,qi,vi[Wi+1].y,0,4)),on=0;4>on;on++)mi[qi+128+on]=mi[qi+256+on]=mi[qi+384+on]=mi[qi+0+on];for(on=0;16>on;++on,hi<<=2)mi=Mn,qi=Vn+vs[on],cs[wi.Ob[on]](mi,qi),Xl(hi,Li,16*+on,mi,qi)}else if(mi=gc(vn,Bn,wi.Ob[0]),na[mi](Mn,Vn),hi!=0)for(on=0;16>on;++on,hi<<=2)Xl(hi,Li,16*+on,Mn,Vn+vs[on]);for(on=wi.Gc,mi=gc(vn,Bn,wi.Dd),Ya[mi](zn,Kn),Ya[mi](ci,Ai),hi=Li,mi=zn,qi=Kn,255&(wi=on>>0)&&(170&wi?io(hi,256,mi,qi):ta(hi,256,mi,qi)),wi=ci,hi=Ai,255&(on>>=8)&&(170&on?io(Li,320,wi,hi):ta(Li,320,wi,hi)),Bn<De.Ub-1&&(xe(vi[Wi].y,0,Mn,Vn+480,16),xe(vi[Wi].f,0,zn,Kn+224,8),xe(vi[Wi].ea,0,ci,Ai+224,8)),on=8*In*De.B,vi=De.sa,Wi=De.ta+16*vn+16*In*De.R,Li=De.qa,wi=De.ra+8*vn+on,hi=De.Ha,mi=De.Ia+8*vn+on,on=0;16>on;++on)xe(vi,Wi+on*De.R,Mn,Vn+32*on,16);for(on=0;8>on;++on)xe(Li,wi+on*De.B,zn,Kn+32*on,8),xe(hi,mi+on*De.B,ci,Ai+32*on,8)}}function no(De,ze,on,vn,Bn,In,Mn,Vn,zn){var Kn=[0],ci=[0],Ai=0,wi=zn!=null?zn.kd:0,vi=zn??new Fu;if(De==null||12>on)return 7;vi.data=De,vi.w=ze,vi.ha=on,ze=[ze],on=[on],vi.gb=[vi.gb];e:{var Wi=ze,Li=on,hi=vi.gb;if(e(De!=null),e(Li!=null),e(hi!=null),hi[0]=0,12<=Li[0]&&!r(De,Wi[0],"RIFF")){if(r(De,Wi[0]+8,"WEBP")){hi=3;break e}var mi=Yn(De,Wi[0]+4);if(12>mi||4294967286<mi){hi=3;break e}if(wi&&mi>Li[0]-8){hi=7;break e}hi[0]=mi,Wi[0]+=12,Li[0]-=12}hi=0}if(hi!=0)return hi;for(mi=0<vi.gb[0],on=on[0];;){e:{var qi=De;Li=ze,hi=on;var Ji=Kn,Ui=ci,lr=Wi=[0];if((or=Ai=[Ai])[0]=0,8>hi[0])hi=7;else{if(!r(qi,Li[0],"VP8X")){if(Yn(qi,Li[0]+4)!=10){hi=3;break e}if(18>hi[0]){hi=7;break e}var sr=Yn(qi,Li[0]+8),gr=1+Gn(qi,Li[0]+12);if(2147483648<=gr*(qi=1+Gn(qi,Li[0]+15))){hi=3;break e}lr!=null&&(lr[0]=sr),Ji!=null&&(Ji[0]=gr),Ui!=null&&(Ui[0]=qi),Li[0]+=18,hi[0]-=18,or[0]=1}hi=0}}if(Ai=Ai[0],Wi=Wi[0],hi!=0)return hi;if(Li=!!(2&Wi),!mi&&Ai)return 3;if(In!=null&&(In[0]=!!(16&Wi)),Mn!=null&&(Mn[0]=Li),Vn!=null&&(Vn[0]=0),Mn=Kn[0],Wi=ci[0],Ai&&Li&&zn==null){hi=0;break}if(4>on){hi=7;break}if(mi&&Ai||!mi&&!Ai&&!r(De,ze[0],"ALPH")){on=[on],vi.na=[vi.na],vi.P=[vi.P],vi.Sa=[vi.Sa];e:{sr=De,hi=ze,mi=on;var or=vi.gb;Ji=vi.na,Ui=vi.P,lr=vi.Sa,gr=22,e(sr!=null),e(mi!=null),qi=hi[0];var Or=mi[0];for(e(Ji!=null),e(lr!=null),Ji[0]=null,Ui[0]=null,lr[0]=0;;){if(hi[0]=qi,mi[0]=Or,8>Or){hi=7;break e}var Br=Yn(sr,qi+4);if(4294967286<Br){hi=3;break e}var Mr=8+Br+1&-2;if(gr+=Mr,0<or&&gr>or){hi=3;break e}if(!r(sr,qi,"VP8 ")||!r(sr,qi,"VP8L")){hi=0;break e}if(Or[0]<Mr){hi=7;break e}r(sr,qi,"ALPH")||(Ji[0]=sr,Ui[0]=qi+8,lr[0]=Br),qi+=Mr,Or-=Mr}}if(on=on[0],vi.na=vi.na[0],vi.P=vi.P[0],vi.Sa=vi.Sa[0],hi!=0)break}on=[on],vi.Ja=[vi.Ja],vi.xa=[vi.xa];e:if(or=De,hi=ze,mi=on,Ji=vi.gb[0],Ui=vi.Ja,lr=vi.xa,sr=hi[0],qi=!r(or,sr,"VP8 "),gr=!r(or,sr,"VP8L"),e(or!=null),e(mi!=null),e(Ui!=null),e(lr!=null),8>mi[0])hi=7;else{if(qi||gr){if(or=Yn(or,sr+4),12<=Ji&&or>Ji-12){hi=3;break e}if(wi&&or>mi[0]-8){hi=7;break e}Ui[0]=or,hi[0]+=8,mi[0]-=8,lr[0]=gr}else lr[0]=5<=mi[0]&&or[sr+0]==47&&!(or[sr+4]>>5),Ui[0]=mi[0];hi=0}if(on=on[0],vi.Ja=vi.Ja[0],vi.xa=vi.xa[0],ze=ze[0],hi!=0)break;if(4294967286<vi.Ja)return 3;if(Vn==null||Li||(Vn[0]=vi.xa?2:1),Mn=[Mn],Wi=[Wi],vi.xa){if(5>on){hi=7;break}Vn=Mn,wi=Wi,Li=In,De==null||5>on?De=0:5<=on&&De[ze+0]==47&&!(De[ze+4]>>5)?(mi=[0],or=[0],Ji=[0],bn(Ui=new Je,De,ze,on),ei(Ui,mi,or,Ji)?(Vn!=null&&(Vn[0]=mi[0]),wi!=null&&(wi[0]=or[0]),Li!=null&&(Li[0]=Ji[0]),De=1):De=0):De=0}else{if(10>on){hi=7;break}Vn=Wi,De==null||10>on||!ba(De,ze+3,on-3)?De=0:(wi=De[ze+0]|De[ze+1]<<8|De[ze+2]<<16,Li=16383&(De[ze+7]<<8|De[ze+6]),De=16383&(De[ze+9]<<8|De[ze+8]),1&wi||3<(wi>>1&7)||!(wi>>4&1)||wi>>5>=vi.Ja||!Li||!De?De=0:(Mn&&(Mn[0]=Li),Vn&&(Vn[0]=De),De=1))}if(!De||(Mn=Mn[0],Wi=Wi[0],Ai&&(Kn[0]!=Mn||ci[0]!=Wi)))return 3;zn!=null&&(zn[0]=vi,zn.offset=ze-zn.w,e(4294967286>ze-zn.w),e(zn.offset==zn.ha-on));break}return hi==0||hi==7&&Ai&&zn==null?(In!=null&&(In[0]|=vi.na!=null&&0<vi.na.length),vn!=null&&(vn[0]=Mn),Bn!=null&&(Bn[0]=Wi),0):hi}function _o(De,ze,on){var vn=ze.width,Bn=ze.height,In=0,Mn=0,Vn=vn,zn=Bn;if(ze.Da=De!=null&&0<De.Da,ze.Da&&(Vn=De.cd,zn=De.bd,In=De.v,Mn=De.j,11>on||(In&=-2,Mn&=-2),0>In||0>Mn||0>=Vn||0>=zn||In+Vn>vn||Mn+zn>Bn))return 0;if(ze.v=In,ze.j=Mn,ze.va=In+Vn,ze.o=Mn+zn,ze.U=Vn,ze.T=zn,ze.da=De!=null&&0<De.da,ze.da){if(!Zn(Vn,zn,on=[De.ib],In=[De.hb]))return 0;ze.ib=on[0],ze.hb=In[0]}return ze.ob=De!=null&&De.ob,ze.Kb=De==null||!De.Sd,ze.da&&(ze.ob=ze.ib<3*vn/4&&ze.hb<3*Bn/4,ze.Kb=0),1}function Uu(De){if(De==null)return 2;if(11>De.S){var ze=De.f.RGBA;ze.fb+=(De.height-1)*ze.A,ze.A=-ze.A}else ze=De.f.kb,De=De.height,ze.O+=(De-1)*ze.fa,ze.fa=-ze.fa,ze.N+=(De-1>>1)*ze.Ab,ze.Ab=-ze.Ab,ze.W+=(De-1>>1)*ze.Db,ze.Db=-ze.Db,ze.F!=null&&(ze.J+=(De-1)*ze.lb,ze.lb=-ze.lb);return 0}function Eo(De,ze,on,vn){if(vn==null||0>=De||0>=ze)return 2;if(on!=null){if(on.Da){var Bn=on.cd,In=on.bd,Mn=-2&on.v,Vn=-2&on.j;if(0>Mn||0>Vn||0>=Bn||0>=In||Mn+Bn>De||Vn+In>ze)return 2;De=Bn,ze=In}if(on.da){if(!Zn(De,ze,Bn=[on.ib],In=[on.hb]))return 2;De=Bn[0],ze=In[0]}}vn.width=De,vn.height=ze;e:{var zn=vn.width,Kn=vn.height;if(De=vn.S,0>=zn||0>=Kn||!(De>=xc&&13>De))De=2;else{if(0>=vn.Rd&&vn.sd==null){Mn=In=Bn=ze=0;var ci=(Vn=zn*Rc[De])*Kn;if(11>De||(In=(Kn+1)/2*(ze=(zn+1)/2),De==12&&(Mn=(Bn=zn)*Kn)),(Kn=Ae(ci+2*In+Mn))==null){De=1;break e}vn.sd=Kn,11>De?((zn=vn.f.RGBA).eb=Kn,zn.fb=0,zn.A=Vn,zn.size=ci):((zn=vn.f.kb).y=Kn,zn.O=0,zn.fa=Vn,zn.Fd=ci,zn.f=Kn,zn.N=0+ci,zn.Ab=ze,zn.Cd=In,zn.ea=Kn,zn.W=0+ci+In,zn.Db=ze,zn.Ed=In,De==12&&(zn.F=Kn,zn.J=0+ci+2*In),zn.Tc=Mn,zn.lb=Bn)}if(ze=1,Bn=vn.S,In=vn.width,Mn=vn.height,Bn>=xc&&13>Bn)if(11>Bn)De=vn.f.RGBA,ze&=(Vn=Math.abs(De.A))*(Mn-1)+In<=De.size,ze&=Vn>=In*Rc[Bn],ze&=De.eb!=null;else{De=vn.f.kb,Vn=(In+1)/2,ci=(Mn+1)/2,zn=Math.abs(De.fa),Kn=Math.abs(De.Ab);var Ai=Math.abs(De.Db),wi=Math.abs(De.lb),vi=wi*(Mn-1)+In;ze&=zn*(Mn-1)+In<=De.Fd,ze&=Kn*(ci-1)+Vn<=De.Cd,ze=(ze&=Ai*(ci-1)+Vn<=De.Ed)&zn>=In&Kn>=Vn&Ai>=Vn,ze&=De.y!=null,ze&=De.f!=null,ze&=De.ea!=null,Bn==12&&(ze&=wi>=In,ze&=vi<=De.Tc,ze&=De.F!=null)}else ze=0;De=ze?0:2}}return De!=0||on!=null&&on.fd&&(De=Uu(vn)),De}var Zs=64,vl=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Go=24,$o=32,Ql=8,Qs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];jn("Predictor0","PredictorAdd0"),Ke.Predictor0=function(){return 4278190080},Ke.Predictor1=function(De){return De},Ke.Predictor2=function(De,ze,on){return ze[on+0]},Ke.Predictor3=function(De,ze,on){return ze[on+1]},Ke.Predictor4=function(De,ze,on){return ze[on-1]},Ke.Predictor5=function(De,ze,on){return Dn(Dn(De,ze[on+1]),ze[on+0])},Ke.Predictor6=function(De,ze,on){return Dn(De,ze[on-1])},Ke.Predictor7=function(De,ze,on){return Dn(De,ze[on+0])},Ke.Predictor8=function(De,ze,on){return Dn(ze[on-1],ze[on+0])},Ke.Predictor9=function(De,ze,on){return Dn(ze[on+0],ze[on+1])},Ke.Predictor10=function(De,ze,on){return Dn(Dn(De,ze[on-1]),Dn(ze[on+0],ze[on+1]))},Ke.Predictor11=function(De,ze,on){var vn=ze[on+0];return 0>=qn(vn>>24&255,De>>24&255,(ze=ze[on-1])>>24&255)+qn(vn>>16&255,De>>16&255,ze>>16&255)+qn(vn>>8&255,De>>8&255,ze>>8&255)+qn(255&vn,255&De,255&ze)?vn:De},Ke.Predictor12=function(De,ze,on){var vn=ze[on+0];return(Jn((De>>24&255)+(vn>>24&255)-((ze=ze[on-1])>>24&255))<<24|Jn((De>>16&255)+(vn>>16&255)-(ze>>16&255))<<16|Jn((De>>8&255)+(vn>>8&255)-(ze>>8&255))<<8|Jn((255&De)+(255&vn)-(255&ze)))>>>0},Ke.Predictor13=function(De,ze,on){var vn=ze[on-1];return(Qn((De=Dn(De,ze[on+0]))>>24&255,vn>>24&255)<<24|Qn(De>>16&255,vn>>16&255)<<16|Qn(De>>8&255,vn>>8&255)<<8|Qn(De>>0&255,vn>>0&255))>>>0};var mc=Ke.PredictorAdd0;Ke.PredictorAdd1=yi,jn("Predictor2","PredictorAdd2"),jn("Predictor3","PredictorAdd3"),jn("Predictor4","PredictorAdd4"),jn("Predictor5","PredictorAdd5"),jn("Predictor6","PredictorAdd6"),jn("Predictor7","PredictorAdd7"),jn("Predictor8","PredictorAdd8"),jn("Predictor9","PredictorAdd9"),jn("Predictor10","PredictorAdd10"),jn("Predictor11","PredictorAdd11"),jn("Predictor12","PredictorAdd12"),jn("Predictor13","PredictorAdd13");var zu=Ke.PredictorAdd2;Gi("ColorIndexInverseTransform","MapARGB","32b",(function(De){return De>>8&255}),(function(De){return De})),Gi("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(De){return De}),(function(De){return De>>8&255}));var yc,$a=Ke.ColorIndexInverseTransform,qu=Ke.MapARGB,ah=Ke.VP8LColorIndexInverseTransformAlpha,ea=Ke.MapAlpha,Aa=Ke.VP8LPredictorsAdd=[];Aa.length=16,(Ke.VP8LPredictors=[]).length=16,(Ke.VP8LPredictorsAdd_C=[]).length=16,(Ke.VP8LPredictors_C=[]).length=16;var da,Pa,So,Wa,Ka,eu,Gs,Wo,wo,io,Ta,ta,Ca,Ko,Yo,la,tu,fa,ro,Jr,Xr,ys,Ss,so,ao,$s,bl,pa,xl=Ae(511),vc=Ae(2041),Hu=Ae(225),Gu=Ae(767),bc=0,Ao=vc,$u=Hu,Ws=Gu,Ds=xl,xc=0,Ks=1,_c=2,Ra=3,Wu=4,nu=5,Jo=6,Ku=7,Ec=8,iu=9,Sc=10,Ba=[2,3,7],ru=[3,3,11],_l=[280,256,256,256,40],wc=[0,1,1,1,0],Yu=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Na=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],ka=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Xo=8,Ia=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Ma=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ga=null,Wh=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],oh=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Ac=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Kh=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Fs=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ts=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Rr=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],na=[],cs=[],Ya=[],Zo=1,lh=2,Po=[],Os=[];Fi("UpsampleRgbLinePair",Ir,3),Fi("UpsampleBgrLinePair",as,3),Fi("UpsampleRgbaLinePair",Hs,4),Fi("UpsampleBgraLinePair",Ps,4),Fi("UpsampleArgbLinePair",Vs,4),Fi("UpsampleRgba4444LinePair",ms,2),Fi("UpsampleRgb565LinePair",os,2);var El=Ke.UpsampleRgbLinePair,uh=Ke.UpsampleBgrLinePair,su=Ke.UpsampleRgbaLinePair,Pc=Ke.UpsampleBgraLinePair,Qo=Ke.UpsampleArgbLinePair,oo=Ke.UpsampleRgba4444LinePair,el=Ke.UpsampleRgb565LinePair,La=16,au=1<<La-1,Sl=-227,tl=482,Tc=6,nl=0,js=Ae(256),Cc=Ae(256),Yh=Ae(256),Xd=Ae(256),Zd=Ae(tl-Sl),Qd=Ae(tl-Sl);xo("YuvToRgbRow",Ir,3),xo("YuvToBgrRow",as,3),xo("YuvToRgbaRow",Hs,4),xo("YuvToBgraRow",Ps,4),xo("YuvToArgbRow",Vs,4),xo("YuvToRgba4444Row",ms,2),xo("YuvToRgb565Row",os,2);var vs=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ou=[0,2,8],Ju=[8,7,6,4,4,2,2,2,1,1,1,1],Xu=1;this.WebPDecodeRGBA=function(De,ze,on,vn,Bn){var In=Ks,Mn=new ml,Vn=new Fn;Mn.ba=Vn,Vn.S=In,Vn.width=[Vn.width],Vn.height=[Vn.height];var zn=Vn.width,Kn=Vn.height,ci=new Si;if(ci==null||De==null)var Ai=2;else e(ci!=null),Ai=no(De,ze,on,ci.width,ci.height,ci.Pd,ci.Qd,ci.format,null);if(Ai!=0?zn=0:(zn!=null&&(zn[0]=ci.width[0]),Kn!=null&&(Kn[0]=ci.height[0]),zn=1),zn){Vn.width=Vn.width[0],Vn.height=Vn.height[0],vn!=null&&(vn[0]=Vn.width),Bn!=null&&(Bn[0]=Vn.height);e:{if(vn=new Ol,(Bn=new Fu).data=De,Bn.w=ze,Bn.ha=on,Bn.kd=1,ze=[0],e(Bn!=null),((De=no(Bn.data,Bn.w,Bn.ha,null,null,null,ze,null,Bn))==0||De==7)&&ze[0]&&(De=4),(ze=De)==0){if(e(Mn!=null),vn.data=Bn.data,vn.w=Bn.w+Bn.offset,vn.ha=Bn.ha-Bn.offset,vn.put=Un,vn.ac=Hn,vn.bc=ti,vn.ma=Mn,Bn.xa){if((De=wr())==null){Mn=1;break e}if((function(wi,vi){var Wi=[0],Li=[0],hi=[0];t:for(;;){if(wi==null)return 0;if(vi==null)return wi.a=2,0;if(wi.l=vi,wi.a=0,bn(wi.m,vi.data,vi.w,vi.ha),!ei(wi.m,Wi,Li,hi)){wi.a=3;break t}if(wi.xb=lh,vi.width=Wi[0],vi.height=Li[0],!qr(Wi[0],Li[0],1,wi,null))break t;return 1}return e(wi.a!=0),0})(De,vn)){if(vn=(ze=Eo(vn.width,vn.height,Mn.Oa,Mn.ba))==0){t:{vn=De;n:for(;;){if(vn==null){vn=0;break t}if(e(vn.s.yc!=null),e(vn.s.Ya!=null),e(0<vn.s.Wb),e((on=vn.l)!=null),e((Bn=on.ma)!=null),vn.xb!=0){if(vn.ca=Bn.ba,vn.tb=Bn.tb,e(vn.ca!=null),!_o(Bn.Oa,on,Ra)){vn.a=2;break n}if(!Fr(vn,on.width)||on.da)break n;if((on.da||ji(vn.ca.S))&&Ei(),11>vn.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),vn.ca.f.kb.F!=null&&Ei()),vn.Pb&&0<vn.s.ua&&vn.s.vb.X==null&&!ii(vn.s.vb,vn.s.Wa.Xa)){vn.a=1;break n}vn.xb=0}if(!cr(vn,vn.V,vn.Ba,vn.c,vn.i,on.o,fr))break n;Bn.Dc=vn.Ma,vn=1;break t}e(vn.a!=0),vn=0}vn=!vn}vn&&(ze=De.a)}else ze=De.a}else{if((De=new jl)==null){Mn=1;break e}if(De.Fa=Bn.na,De.P=Bn.P,De.qc=Bn.Sa,Xs(De,vn)){if((ze=Eo(vn.width,vn.height,Mn.Oa,Mn.ba))==0){if(De.Aa=0,on=Mn.Oa,e((Bn=De)!=null),on!=null){if(0<(zn=0>(zn=on.Md)?0:100<zn?255:255*zn/100)){for(Kn=ci=0;4>Kn;++Kn)12>(Ai=Bn.pb[Kn]).lc&&(Ai.ia=zn*Ju[0>Ai.lc?0:Ai.lc]>>3),ci|=Ai.ia;ci&&(alert("todo:VP8InitRandom"),Bn.ia=1)}Bn.Ga=on.Id,100<Bn.Ga?Bn.Ga=100:0>Bn.Ga&&(Bn.Ga=0)}Ru(De,vn)||(ze=De.a)}}else ze=De.a}ze==0&&Mn.Oa!=null&&Mn.Oa.fd&&(ze=Uu(Mn.ba))}Mn=ze}In=Mn!=0?null:11>In?Vn.f.RGBA.eb:Vn.f.kb.y}else In=null;return In};var Rc=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function Be(Ke,sn){for(var gn="",He=0;He<4;He++)gn+=String.fromCharCode(Ke[sn++]);return gn}function ke(Ke,sn){return(Ke[sn+0]<<0|Ke[sn+1]<<8|Ke[sn+2]<<16)>>>0}function Me(Ke,sn){return(Ke[sn+0]<<0|Ke[sn+1]<<8|Ke[sn+2]<<16|Ke[sn+3]<<24)>>>0}new Ce;var Fe=[0],Ve=[0],Oe=[],$e=new Ce,Ge=t,Ue=(function(Ke,sn){var gn={},He=0,en=!1,cn=0,Sn=0;if(gn.frames=[],!(function(We,Ze,un,yn){for(var _n=0;_n<yn;_n++)if(We[Ze+_n]!=un.charCodeAt(_n))return!0;return!1})(Ke,sn,"RIFF",4)){var Tn,hn;for(Me(Ke,sn+=4),sn+=8;sn<Ke.length;){var pn=Be(Ke,sn),bn=Me(Ke,sn+=4);sn+=4;var fn=bn+(1&bn);switch(pn){case"VP8 ":case"VP8L":gn.frames[He]===void 0&&(gn.frames[He]={}),(Je=gn.frames[He]).src_off=en?Sn:sn-8,Je.src_size=cn+bn+8,He++,en&&(en=!1,cn=0,Sn=0);break;case"VP8X":(Je=gn.header={}).feature_flags=Ke[sn];var An=sn+4;Je.canvas_width=1+ke(Ke,An),An+=3,Je.canvas_height=1+ke(Ke,An),An+=3;break;case"ALPH":en=!0,cn=fn+8,Sn=sn-8;break;case"ANIM":(Je=gn.header).bgcolor=Me(Ke,sn),An=sn+4,Je.loop_count=(Tn=Ke)[(hn=An)+0]<<0|Tn[hn+1]<<8,An+=2;break;case"ANMF":var xn,Je;(Je=gn.frames[He]={}).offset_x=2*ke(Ke,sn),sn+=3,Je.offset_y=2*ke(Ke,sn),sn+=3,Je.width=1+ke(Ke,sn),sn+=3,Je.height=1+ke(Ke,sn),sn+=3,Je.duration=ke(Ke,sn),sn+=3,xn=Ke[sn++],Je.dispose=1&xn,Je.blend=xn>>1&1}pn!="ANMF"&&(sn+=fn)}return gn}})(Ge,0);Ue.response=Ge,Ue.rgbaoutput=!0,Ue.dataurl=!1;var Ye=Ue.header?Ue.header:null,Qe=Ue.frames?Ue.frames:null;if(Ye){Ye.loop_counter=Ye.loop_count,Fe=[Ye.canvas_height],Ve=[Ye.canvas_width];for(var rn=0;rn<Qe.length&&Qe[rn].blend!=0;rn++);}var tn=Qe[0],an=$e.WebPDecodeRGBA(Ge,tn.src_off,tn.src_size,Ve,Fe);tn.rgba=an,tn.imgwidth=Ve[0],tn.imgheight=Fe[0];for(var qe=0;qe<Ve[0]*Fe[0]*4;qe++)Oe[qe]=an[qe];return this.width=Ve,this.height=Fe,this.data=Oe,this}(function(t){var e=function(){return typeof zlibSync=="function"},r=function(Fe,Ve,Oe,$e){var Ge=4,Ue=Pe;switch($e){case t.image_compression.FAST:Ge=1,Ue=Ae;break;case t.image_compression.MEDIUM:Ge=6,Ue=Re;break;case t.image_compression.SLOW:Ge=9,Ue=Ce}Fe=xe(Fe,Ve,Oe,Ue);var Ye=zlibSync(Fe,{level:Ge});return t.__addimage__.arrayBufferToBinaryString(Ye)},xe=function(Fe,Ve,Oe,$e){for(var Ge,Ue,Ye,Qe=Fe.length/Ve,rn=new Uint8Array(Fe.length+Qe),tn=ke(),an=0;an<Qe;an+=1){if(Ye=an*Ve,Ge=Fe.subarray(Ye,Ye+Ve),$e)rn.set($e(Ge,Oe,Ue),Ye+an);else{for(var qe,Ke=tn.length,sn=[];qe<Ke;qe+=1)sn[qe]=tn[qe](Ge,Oe,Ue);var gn=Me(sn.concat());rn.set(sn[gn],Ye+an)}Ue=Ge}return rn},Ee=function(Fe){var Ve=Array.apply([],Fe);return Ve.unshift(0),Ve},Ae=function(Fe,Ve){var Oe,$e=[],Ge=Fe.length;$e[0]=1;for(var Ue=0;Ue<Ge;Ue+=1)Oe=Fe[Ue-Ve]||0,$e[Ue+1]=Fe[Ue]-Oe+256&255;return $e},Pe=function(Fe,Ve,Oe){var $e,Ge=[],Ue=Fe.length;Ge[0]=2;for(var Ye=0;Ye<Ue;Ye+=1)$e=Oe&&Oe[Ye]||0,Ge[Ye+1]=Fe[Ye]-$e+256&255;return Ge},Re=function(Fe,Ve,Oe){var $e,Ge,Ue=[],Ye=Fe.length;Ue[0]=3;for(var Qe=0;Qe<Ye;Qe+=1)$e=Fe[Qe-Ve]||0,Ge=Oe&&Oe[Qe]||0,Ue[Qe+1]=Fe[Qe]+256-($e+Ge>>>1)&255;return Ue},Ce=function(Fe,Ve,Oe){var $e,Ge,Ue,Ye,Qe=[],rn=Fe.length;Qe[0]=4;for(var tn=0;tn<rn;tn+=1)$e=Fe[tn-Ve]||0,Ge=Oe&&Oe[tn]||0,Ue=Oe&&Oe[tn-Ve]||0,Ye=Be($e,Ge,Ue),Qe[tn+1]=Fe[tn]-Ye+256&255;return Qe},Be=function(Fe,Ve,Oe){if(Fe===Ve&&Ve===Oe)return Fe;var $e=Math.abs(Ve-Oe),Ge=Math.abs(Fe-Oe),Ue=Math.abs(Fe+Ve-Oe-Oe);return $e<=Ge&&$e<=Ue?Fe:Ge<=Ue?Ve:Oe},ke=function(){return[Ee,Ae,Pe,Re,Ce]},Me=function(Fe){var Ve=Fe.map((function(Oe){return Oe.reduce((function($e,Ge){return $e+Math.abs(Ge)}),0)}));return Ve.indexOf(Math.min.apply(null,Ve))};t.processPNG=function(Fe,Ve,Oe,$e){var Ge,Ue,Ye,Qe,rn,tn,an,qe,Ke,sn,gn,He,en,cn,Sn,Tn=this.decode.FLATE_DECODE,hn="";if(this.__addimage__.isArrayBuffer(Fe)&&(Fe=new Uint8Array(Fe)),this.__addimage__.isArrayBufferView(Fe)){if(Fe=(Ye=new Kt(Fe)).imgData,Ue=Ye.bits,Ge=Ye.colorSpace,rn=Ye.colors,[4,6].indexOf(Ye.colorType)!==-1){if(Ye.bits===8){Ke=(qe=Ye.pixelBitlength==32?new Uint32Array(Ye.decodePixels().buffer):Ye.pixelBitlength==16?new Uint16Array(Ye.decodePixels().buffer):new Uint8Array(Ye.decodePixels().buffer)).length,gn=new Uint8Array(Ke*Ye.colors),sn=new Uint8Array(Ke);var pn,bn=Ye.pixelBitlength-Ye.bits;for(cn=0,Sn=0;cn<Ke;cn++){for(en=qe[cn],pn=0;pn<bn;)gn[Sn++]=en>>>pn&255,pn+=Ye.bits;sn[cn]=en>>>pn&255}}if(Ye.bits===16){Ke=(qe=new Uint32Array(Ye.decodePixels().buffer)).length,gn=new Uint8Array(Ke*(32/Ye.pixelBitlength)*Ye.colors),sn=new Uint8Array(Ke*(32/Ye.pixelBitlength)),He=Ye.colors>1,cn=0,Sn=0;for(var fn=0;cn<Ke;)en=qe[cn++],gn[Sn++]=en>>>0&255,He&&(gn[Sn++]=en>>>16&255,en=qe[cn++],gn[Sn++]=en>>>0&255),sn[fn++]=en>>>16&255;Ue=8}$e!==t.image_compression.NONE&&e()?(Fe=r(gn,Ye.width*Ye.colors,Ye.colors,$e),an=r(sn,Ye.width,1,$e)):(Fe=gn,an=sn,Tn=void 0)}if(Ye.colorType===3&&(Ge=this.color_spaces.INDEXED,tn=Ye.palette,Ye.transparency.indexed)){var An=Ye.transparency.indexed,xn=0;for(cn=0,Ke=An.length;cn<Ke;++cn)xn+=An[cn];if((xn/=255)===Ke-1&&An.indexOf(0)!==-1)Qe=[An.indexOf(0)];else if(xn!==Ke){for(qe=Ye.decodePixels(),sn=new Uint8Array(qe.length),cn=0,Ke=qe.length;cn<Ke;cn++)sn[cn]=An[qe[cn]];an=r(sn,Ye.width,1)}}var Je=(function(We){var Ze;switch(We){case t.image_compression.FAST:Ze=11;break;case t.image_compression.MEDIUM:Ze=13;break;case t.image_compression.SLOW:Ze=14;break;default:Ze=12}return Ze})($e);return Tn===this.decode.FLATE_DECODE&&(hn="/Predictor "+Je+" "),hn+="/Colors "+rn+" /BitsPerComponent "+Ue+" /Columns "+Ye.width,(this.__addimage__.isArrayBuffer(Fe)||this.__addimage__.isArrayBufferView(Fe))&&(Fe=this.__addimage__.arrayBufferToBinaryString(Fe)),(an&&this.__addimage__.isArrayBuffer(an)||this.__addimage__.isArrayBufferView(an))&&(an=this.__addimage__.arrayBufferToBinaryString(an)),{alias:Oe,data:Fe,index:Ve,filter:Tn,decodeParameters:hn,transparency:Qe,palette:tn,sMask:an,predictor:Je,width:Ye.width,height:Ye.height,bitsPerComponent:Ue,colorSpace:Ge}}}})(E.API),(function(t){t.processGIF89A=function(e,r,xe,Ee){var Ae=new Zt(e),Pe=Ae.width,Re=Ae.height,Ce=[];Ae.decodeAndBlitFrameRGBA(0,Ce);var Be={data:Ce,width:Pe,height:Re},ke=new Qt(100).encode(Be,100);return t.processJPEG.call(this,ke,r,xe,Ee)},t.processGIF87A=t.processGIF89A})(E.API),te.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),xe=this.datav.getUint8(this.pos++,!0),Ee=this.datav.getUint8(this.pos++,!0),Ae=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:Ee,green:xe,blue:r,quad:Ae}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},te.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){a.log("bit decode error:"+r)}},te.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var xe=this.bottom_up?t:this.height-1-t,Ee=0;Ee<e;Ee++)for(var Ae=this.datav.getUint8(this.pos++,!0),Pe=xe*this.width*4+8*Ee*4,Re=0;Re<8&&8*Ee+Re<this.width;Re++){var Ce=this.palette[Ae>>7-Re&1];this.data[Pe+4*Re]=Ce.blue,this.data[Pe+4*Re+1]=Ce.green,this.data[Pe+4*Re+2]=Ce.red,this.data[Pe+4*Re+3]=255}r!==0&&(this.pos+=4-r)}},te.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var xe=this.bottom_up?r:this.height-1-r,Ee=0;Ee<t;Ee++){var Ae=this.datav.getUint8(this.pos++,!0),Pe=xe*this.width*4+2*Ee*4,Re=Ae>>4,Ce=15&Ae,Be=this.palette[Re];if(this.data[Pe]=Be.blue,this.data[Pe+1]=Be.green,this.data[Pe+2]=Be.red,this.data[Pe+3]=255,2*Ee+1>=this.width)break;Be=this.palette[Ce],this.data[Pe+4]=Be.blue,this.data[Pe+4+1]=Be.green,this.data[Pe+4+2]=Be.red,this.data[Pe+4+3]=255}e!==0&&(this.pos+=4-e)}},te.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,xe=0;xe<this.width;xe++){var Ee=this.datav.getUint8(this.pos++,!0),Ae=r*this.width*4+4*xe;if(Ee<this.palette.length){var Pe=this.palette[Ee];this.data[Ae]=Pe.red,this.data[Ae+1]=Pe.green,this.data[Ae+2]=Pe.blue,this.data[Ae+3]=255}else this.data[Ae]=255,this.data[Ae+1]=255,this.data[Ae+2]=255,this.data[Ae+3]=255}t!==0&&(this.pos+=4-t)}},te.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var xe=this.bottom_up?r:this.height-1-r,Ee=0;Ee<this.width;Ee++){var Ae=this.datav.getUint16(this.pos,!0);this.pos+=2;var Pe=(Ae&e)/e*255|0,Re=(Ae>>5&e)/e*255|0,Ce=(Ae>>10&e)/e*255|0,Be=Ae>>15?255:0,ke=xe*this.width*4+4*Ee;this.data[ke]=Ce,this.data[ke+1]=Re,this.data[ke+2]=Pe,this.data[ke+3]=Be}this.pos+=t}},te.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),xe=this.height-1;xe>=0;xe--){for(var Ee=this.bottom_up?xe:this.height-1-xe,Ae=0;Ae<this.width;Ae++){var Pe=this.datav.getUint16(this.pos,!0);this.pos+=2;var Re=(Pe&e)/e*255|0,Ce=(Pe>>5&r)/r*255|0,Be=(Pe>>11)/e*255|0,ke=Ee*this.width*4+4*Ae;this.data[ke]=Be,this.data[ke+1]=Ce,this.data[ke+2]=Re,this.data[ke+3]=255}this.pos+=t}},te.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var xe=this.datav.getUint8(this.pos++,!0),Ee=this.datav.getUint8(this.pos++,!0),Ae=this.datav.getUint8(this.pos++,!0),Pe=e*this.width*4+4*r;this.data[Pe]=Ae,this.data[Pe+1]=Ee,this.data[Pe+2]=xe,this.data[Pe+3]=255}this.pos+=this.width%4}},te.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var xe=this.datav.getUint8(this.pos++,!0),Ee=this.datav.getUint8(this.pos++,!0),Ae=this.datav.getUint8(this.pos++,!0),Pe=this.datav.getUint8(this.pos++,!0),Re=e*this.width*4+4*r;this.data[Re]=Ae,this.data[Re+1]=Ee,this.data[Re+2]=xe,this.data[Re+3]=Pe}},te.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(e,r,xe,Ee){var Ae=new te(e,!1),Pe=Ae.width,Re=Ae.height,Ce={data:Ae.getData(),width:Pe,height:Re},Be=new Qt(100).encode(Ce,100);return t.processJPEG.call(this,Be,r,xe,Ee)}})(E.API),ee.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(e,r,xe,Ee){var Ae=new ee(e),Pe=Ae.width,Re=Ae.height,Ce={data:Ae.getData(),width:Pe,height:Re},Be=new Qt(100).encode(Ce,100);return t.processJPEG.call(this,Be,r,xe,Ee)}})(E.API),E.API.processRGBA=function(t,e,r){for(var xe=t.data,Ee=xe.length,Ae=new Uint8Array(Ee/4*3),Pe=new Uint8Array(Ee/4),Re=0,Ce=0,Be=0;Be<Ee;Be+=4){var ke=xe[Be],Me=xe[Be+1],Fe=xe[Be+2],Ve=xe[Be+3];Ae[Re++]=ke,Ae[Re++]=Me,Ae[Re++]=Fe,Pe[Ce++]=Ve}var Oe=this.__addimage__.arrayBufferToBinaryString(Ae);return{alpha:this.__addimage__.arrayBufferToBinaryString(Pe),data:Oe,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},E.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},Vt=E.API,Gt=Vt.getCharWidthsArray=function(t,e){var r,xe,Ee=(e=e||{}).font||this.internal.getFont(),Ae=e.fontSize||this.internal.getFontSize(),Pe=e.charSpace||this.internal.getCharSpace(),Re=e.widths?e.widths:Ee.metadata.Unicode.widths,Ce=Re.fof?Re.fof:1,Be=e.kerning?e.kerning:Ee.metadata.Unicode.kerning,ke=Be.fof?Be.fof:1,Me=e.doKerning!==!1,Fe=0,Ve=t.length,Oe=0,$e=Re[0]||Ce,Ge=[];for(r=0;r<Ve;r++)xe=t.charCodeAt(r),typeof Ee.metadata.widthOfString=="function"?Ge.push((Ee.metadata.widthOfGlyph(Ee.metadata.characterToGlyph(xe))+Pe*(1e3/Ae)||0)/1e3):(Fe=Me&&_typeof$2(Be[xe])==="object"&&!isNaN(parseInt(Be[xe][Oe],10))?Be[xe][Oe]/ke:0,Ge.push((Re[xe]||$e)/Ce+Fe)),Oe=xe;return Ge},Yt=Vt.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),xe=e.font||this.internal.getFont(),Ee=e.charSpace||this.internal.getCharSpace();return Vt.processArabic&&(t=Vt.processArabic(t)),typeof xe.metadata.widthOfString=="function"?xe.metadata.widthOfString(t,r,Ee)/r:Gt.apply(this,arguments).reduce((function(Ae,Pe){return Ae+Pe}),0)},Jt=function(t,e,r,xe){for(var Ee=[],Ae=0,Pe=t.length,Re=0;Ae!==Pe&&Re+e[Ae]<r;)Re+=e[Ae],Ae++;Ee.push(t.slice(0,Ae));var Ce=Ae;for(Re=0;Ae!==Pe;)Re+e[Ae]>xe&&(Ee.push(t.slice(Ce,Ae)),Re=0,Ce=Ae),Re+=e[Ae],Ae++;return Ce!==Ae&&Ee.push(t.slice(Ce,Ae)),Ee},Xt=function(t,e,r){r||(r={});var xe,Ee,Ae,Pe,Re,Ce,Be,ke=[],Me=[ke],Fe=r.textIndent||0,Ve=0,Oe=0,$e=t.split(" "),Ge=Gt.apply(this,[" ",r])[0];if(Ce=r.lineIndent===-1?$e[0].length+2:r.lineIndent||0){var Ue=Array(Ce).join(" "),Ye=[];$e.map((function(rn){(rn=rn.split(/\s*\n/)).length>1?Ye=Ye.concat(rn.map((function(tn,an){return(an&&tn.length?`
`:"")+tn}))):Ye.push(rn[0])})),$e=Ye,Ce=Yt.apply(this,[Ue,r])}for(Ae=0,Pe=$e.length;Ae<Pe;Ae++){var Qe=0;if(xe=$e[Ae],Ce&&xe[0]==`
`&&(xe=xe.substr(1),Qe=1),Fe+Ve+(Oe=(Ee=Gt.apply(this,[xe,r])).reduce((function(rn,tn){return rn+tn}),0))>e||Qe){if(Oe>e){for(Re=Jt.apply(this,[xe,Ee,e-(Fe+Ve),e]),ke.push(Re.shift()),ke=[Re.pop()];Re.length;)Me.push([Re.shift()]);Oe=Ee.slice(xe.length-(ke[0]?ke[0].length:0)).reduce((function(rn,tn){return rn+tn}),0)}else ke=[xe];Me.push(ke),Fe=Oe+Ce,Ve=Ge}else ke.push(xe),Fe+=Ve+Oe,Ve=Ge}return Be=Ce?function(rn,tn){return(tn?Ue:"")+rn.join(" ")}:function(rn){return rn.join(" ")},Me.map(Be)},Vt.splitTextToSize=function(t,e,r){var xe,Ee=(r=r||{}).fontSize||this.internal.getFontSize(),Ae=(function(ke){if(ke.widths&&ke.kerning)return{widths:ke.widths,kerning:ke.kerning};var Me=this.internal.getFont(ke.fontName,ke.fontStyle);return Me.metadata.Unicode?{widths:Me.metadata.Unicode.widths||{0:1},kerning:Me.metadata.Unicode.kerning||{}}:{font:Me.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);xe=Array.isArray(t)?t:String(t).split(/\r?\n/);var Pe=1*this.internal.scaleFactor*e/Ee;Ae.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/Ee:0,Ae.lineIndent=r.lineIndent;var Re,Ce,Be=[];for(Re=0,Ce=xe.length;Re<Ce;Re++)Be=Be.concat(Xt.apply(this,[xe[Re],Pe,Ae]));return Be},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",r={},xe={},Ee=0;Ee<e.length;Ee++)r[e[Ee]]="0123456789abcdef"[Ee],xe["0123456789abcdef"[Ee]]=e[Ee];var Ae=function(Me){return"0x"+parseInt(Me,10).toString(16)},Pe=t.__fontmetrics__.compress=function(Me){var Fe,Ve,Oe,$e,Ge=["{"];for(var Ue in Me){if(Fe=Me[Ue],isNaN(parseInt(Ue,10))?Ve="'"+Ue+"'":(Ue=parseInt(Ue,10),Ve=(Ve=Ae(Ue).slice(2)).slice(0,-1)+xe[Ve.slice(-1)]),typeof Fe=="number")Fe<0?(Oe=Ae(Fe).slice(3),$e="-"):(Oe=Ae(Fe).slice(2),$e=""),Oe=$e+Oe.slice(0,-1)+xe[Oe.slice(-1)];else{if(_typeof$2(Fe)!=="object")throw new Error("Don't know what to do with value type "+_typeof$2(Fe)+".");Oe=Pe(Fe)}Ge.push(Ve+Oe)}return Ge.push("}"),Ge.join("")},Re=t.__fontmetrics__.uncompress=function(Me){if(typeof Me!="string")throw new Error("Invalid argument passed to uncompress.");for(var Fe,Ve,Oe,$e,Ge={},Ue=1,Ye=Ge,Qe=[],rn="",tn="",an=Me.length-1,qe=1;qe<an;qe+=1)($e=Me[qe])=="'"?Fe?(Oe=Fe.join(""),Fe=void 0):Fe=[]:Fe?Fe.push($e):$e=="{"?(Qe.push([Ye,Oe]),Ye={},Oe=void 0):$e=="}"?((Ve=Qe.pop())[0][Ve[1]]=Ye,Oe=void 0,Ye=Ve[0]):$e=="-"?Ue=-1:Oe===void 0?r.hasOwnProperty($e)?(rn+=r[$e],Oe=parseInt(rn,16)*Ue,Ue=1,rn=""):rn+=$e:r.hasOwnProperty($e)?(tn+=r[$e],Ye[Oe]=parseInt(tn,16)*Ue,Ue=1,Oe=void 0,tn=""):tn+=$e;return Ge},Ce={codePages:["WinAnsiEncoding"],WinAnsiEncoding:Re("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},Be={Unicode:{Courier:Ce,"Courier-Bold":Ce,"Courier-BoldOblique":Ce,"Courier-Oblique":Ce,Helvetica:Ce,"Helvetica-Bold":Ce,"Helvetica-BoldOblique":Ce,"Helvetica-Oblique":Ce,"Times-Roman":Ce,"Times-Bold":Ce,"Times-BoldItalic":Ce,"Times-Italic":Ce}},ke={Unicode:{"Courier-Oblique":Re("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":Re("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":Re("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:Re("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":Re("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":Re("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:Re("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:Re("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":Re("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:Re("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":Re("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":Re("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":Re("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":Re("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(Me){var Fe=Me.font,Ve=ke.Unicode[Fe.postScriptName];Ve&&(Fe.metadata.Unicode={},Fe.metadata.Unicode.widths=Ve.widths,Fe.metadata.Unicode.kerning=Ve.kerning);var Oe=Be.Unicode[Fe.postScriptName];Oe&&(Fe.metadata.Unicode.encoding=Oe,Fe.encoding=Oe.codePages[0])}])})(E.API),(function(t){var e=function(r){for(var xe=r.length,Ee=new Uint8Array(xe),Ae=0;Ae<xe;Ae++)Ee[Ae]=r.charCodeAt(Ae);return Ee};t.API.events.push(["addFont",function(r){var xe=void 0,Ee=r.font,Ae=r.instance;if(!Ee.isStandardFont){if(Ae===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+Ee.postScriptName+"').");if(typeof(xe=Ae.existsFileInVFS(Ee.postScriptName)===!1?Ae.loadFile(Ee.postScriptName):Ae.getFileFromVFS(Ee.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+Ee.postScriptName+"').");(function(Pe,Re){Re=/^\x00\x01\x00\x00/.test(Re)?e(Re):e(u(Re)),Pe.metadata=t.API.TTFFont.open(Re),Pe.metadata.Unicode=Pe.metadata.Unicode||{encoding:{},kerning:{},widths:[]},Pe.metadata.glyIdsUsed=[0]})(Ee,xe)}}])})(E),(function(t){function e(){return(n.canvg?Promise.resolve(n.canvg):__vitePreload(()=>import("./index.es-DV1_aAHR.js"),[])).catch((function(r){return Promise.reject(new Error("Could not load canvg: "+r))})).then((function(r){return r.default?r.default:r}))}E.API.addSvgAsImage=function(r,xe,Ee,Ae,Pe,Re,Ce,Be){if(isNaN(xe)||isNaN(Ee))throw a.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(Ae)||isNaN(Pe))throw a.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var ke=document.createElement("canvas");ke.width=Ae,ke.height=Pe;var Me=ke.getContext("2d");Me.fillStyle="#fff",Me.fillRect(0,0,ke.width,ke.height);var Fe={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},Ve=this;return e().then((function(Oe){return Oe.fromString(Me,r,Fe)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(Oe){return Oe.render(Fe)})).then((function(){Ve.addImage(ke.toDataURL("image/jpeg",1),xe,Ee,Ae,Pe,Ce,Be)}))}})(),E.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var xe=1;xe<=this.internal.getNumberOfPages();xe++)for(var Ee=0;Ee<this.internal.pages[xe].length;Ee++)this.internal.pages[xe][Ee]=this.internal.pages[xe][Ee].replace(e,r);return this},E.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var xe,Ee,Ae,Pe={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},Re=Object.keys(Pe),Ce=[],Be=0,ke=0,Me=0;function Fe(Oe,$e){var Ge,Ue=!1;for(Ge=0;Ge<Oe.length;Ge+=1)Oe[Ge]===$e&&(Ue=!0);return Ue}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(Pe)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var Ve=Re.length;for(Me=0;Me<Ve;Me+=1)r[Re[Me]].value=r[Re[Me]].defaultValue,r[Re[Me]].explicitSet=!1}if(_typeof$2(t)==="object"){for(Ee in t)if(Ae=t[Ee],Fe(Re,Ee)&&Ae!==void 0){if(r[Ee].type==="boolean"&&typeof Ae=="boolean")r[Ee].value=Ae;else if(r[Ee].type==="name"&&Fe(r[Ee].valueSet,Ae))r[Ee].value=Ae;else if(r[Ee].type==="integer"&&Number.isInteger(Ae))r[Ee].value=Ae;else if(r[Ee].type==="array"){for(Be=0;Be<Ae.length;Be+=1)if(xe=!0,Ae[Be].length===1&&typeof Ae[Be][0]=="number")Ce.push(String(Ae[Be]-1));else if(Ae[Be].length>1){for(ke=0;ke<Ae[Be].length;ke+=1)typeof Ae[Be][ke]!="number"&&(xe=!1);xe===!0&&Ce.push([Ae[Be][0]-1,Ae[Be][1]-1].join(" "))}r[Ee].value="["+Ce.join(" ")+"]"}else r[Ee].value=r[Ee].defaultValue;r[Ee].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){var Oe,$e=[];for(Oe in r)r[Oe].explicitSet===!0&&(r[Oe].type==="name"?$e.push("/"+Oe+" /"+r[Oe].value):$e.push("/"+Oe+" "+r[Oe].value));$e.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+$e.join(`
`)+`
>>`)})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(t){var e=function(){var xe='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',Ee=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),Ae=unescape(encodeURIComponent(xe)),Pe=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),Re=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),Ce=unescape(encodeURIComponent("</x:xmpmeta>")),Be=Ae.length+Pe.length+Re.length+Ee.length+Ce.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+Be+" >>"),this.internal.write("stream"),this.internal.write(Ee+Ae+Pe+Re+Ce),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(xe,Ee){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:xe,namespaceuri:Ee||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}})(E.API),(function(t){var e=t.API,r=e.pdfEscape16=function(Ae,Pe){for(var Re,Ce=Pe.metadata.Unicode.widths,Be=["","0","00","000","0000"],ke=[""],Me=0,Fe=Ae.length;Me<Fe;++Me){if(Re=Pe.metadata.characterToGlyph(Ae.charCodeAt(Me)),Pe.metadata.glyIdsUsed.push(Re),Pe.metadata.toUnicode[Re]=Ae.charCodeAt(Me),Ce.indexOf(Re)==-1&&(Ce.push(Re),Ce.push([parseInt(Pe.metadata.widthOfGlyph(Re),10)])),Re=="0")return ke.join("");Re=Re.toString(16),ke.push(Be[4-Re.length],Re)}return ke.join("")},xe=function(Ae){var Pe,Re,Ce,Be,ke,Me,Fe;for(ke=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,Ce=[],Me=0,Fe=(Re=Object.keys(Ae).sort((function(Ve,Oe){return Ve-Oe}))).length;Me<Fe;Me++)Pe=Re[Me],Ce.length>=100&&(ke+=`
`+Ce.length+` beginbfchar
`+Ce.join(`
`)+`
endbfchar`,Ce=[]),Ae[Pe]!==void 0&&Ae[Pe]!==null&&typeof Ae[Pe].toString=="function"&&(Be=("0000"+Ae[Pe].toString(16)).slice(-4),Pe=("0000"+(+Pe).toString(16)).slice(-4),Ce.push("<"+Pe+"><"+Be+">"));return Ce.length&&(ke+=`
`+Ce.length+` beginbfchar
`+Ce.join(`
`)+`
endbfchar
`),ke+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(Ae){(function(Pe){var Re=Pe.font,Ce=Pe.out,Be=Pe.newObject,ke=Pe.putStream;if(Re.metadata instanceof t.API.TTFFont&&Re.encoding==="Identity-H"){for(var Me=Re.metadata.Unicode.widths,Fe=Re.metadata.subset.encode(Re.metadata.glyIdsUsed,1),Ve="",Oe=0;Oe<Fe.length;Oe++)Ve+=String.fromCharCode(Fe[Oe]);var $e=Be();ke({data:Ve,addLength1:!0,objectId:$e}),Ce("endobj");var Ge=Be();ke({data:xe(Re.metadata.toUnicode),addLength1:!0,objectId:Ge}),Ce("endobj");var Ue=Be();Ce("<<"),Ce("/Type /FontDescriptor"),Ce("/FontName /"+F(Re.fontName)),Ce("/FontFile2 "+$e+" 0 R"),Ce("/FontBBox "+t.API.PDFObject.convert(Re.metadata.bbox)),Ce("/Flags "+Re.metadata.flags),Ce("/StemV "+Re.metadata.stemV),Ce("/ItalicAngle "+Re.metadata.italicAngle),Ce("/Ascent "+Re.metadata.ascender),Ce("/Descent "+Re.metadata.decender),Ce("/CapHeight "+Re.metadata.capHeight),Ce(">>"),Ce("endobj");var Ye=Be();Ce("<<"),Ce("/Type /Font"),Ce("/BaseFont /"+F(Re.fontName)),Ce("/FontDescriptor "+Ue+" 0 R"),Ce("/W "+t.API.PDFObject.convert(Me)),Ce("/CIDToGIDMap /Identity"),Ce("/DW 1000"),Ce("/Subtype /CIDFontType2"),Ce("/CIDSystemInfo"),Ce("<<"),Ce("/Supplement 0"),Ce("/Registry (Adobe)"),Ce("/Ordering ("+Re.encoding+")"),Ce(">>"),Ce(">>"),Ce("endobj"),Re.objectNumber=Be(),Ce("<<"),Ce("/Type /Font"),Ce("/Subtype /Type0"),Ce("/ToUnicode "+Ge+" 0 R"),Ce("/BaseFont /"+F(Re.fontName)),Ce("/Encoding /"+Re.encoding),Ce("/DescendantFonts ["+Ye+" 0 R]"),Ce(">>"),Ce("endobj"),Re.isAlreadyPutted=!0}})(Ae)}]),e.events.push(["putFont",function(Ae){(function(Pe){var Re=Pe.font,Ce=Pe.out,Be=Pe.newObject,ke=Pe.putStream;if(Re.metadata instanceof t.API.TTFFont&&Re.encoding==="WinAnsiEncoding"){for(var Me=Re.metadata.rawData,Fe="",Ve=0;Ve<Me.length;Ve++)Fe+=String.fromCharCode(Me[Ve]);var Oe=Be();ke({data:Fe,addLength1:!0,objectId:Oe}),Ce("endobj");var $e=Be();ke({data:xe(Re.metadata.toUnicode),addLength1:!0,objectId:$e}),Ce("endobj");var Ge=Be();Ce("<<"),Ce("/Descent "+Re.metadata.decender),Ce("/CapHeight "+Re.metadata.capHeight),Ce("/StemV "+Re.metadata.stemV),Ce("/Type /FontDescriptor"),Ce("/FontFile2 "+Oe+" 0 R"),Ce("/Flags 96"),Ce("/FontBBox "+t.API.PDFObject.convert(Re.metadata.bbox)),Ce("/FontName /"+F(Re.fontName)),Ce("/ItalicAngle "+Re.metadata.italicAngle),Ce("/Ascent "+Re.metadata.ascender),Ce(">>"),Ce("endobj"),Re.objectNumber=Be();for(var Ue=0;Ue<Re.metadata.hmtx.widths.length;Ue++)Re.metadata.hmtx.widths[Ue]=parseInt(Re.metadata.hmtx.widths[Ue]*(1e3/Re.metadata.head.unitsPerEm));Ce("<</Subtype/TrueType/Type/Font/ToUnicode "+$e+" 0 R/BaseFont/"+F(Re.fontName)+"/FontDescriptor "+Ge+" 0 R/Encoding/"+Re.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(Re.metadata.hmtx.widths)+">>"),Ce("endobj"),Re.isAlreadyPutted=!0}})(Ae)}]);var Ee=function(Ae){var Pe,Re=Ae.text||"",Ce=Ae.x,Be=Ae.y,ke=Ae.options||{},Me=Ae.mutex||{},Fe=Me.pdfEscape,Ve=Me.activeFontKey,Oe=Me.fonts,$e=Ve,Ge="",Ue=0,Ye="",Qe=Oe[$e].encoding;if(Oe[$e].encoding!=="Identity-H")return{text:Re,x:Ce,y:Be,options:ke,mutex:Me};for(Ye=Re,$e=Ve,Array.isArray(Re)&&(Ye=Re[0]),Ue=0;Ue<Ye.length;Ue+=1)Oe[$e].metadata.hasOwnProperty("cmap")&&(Pe=Oe[$e].metadata.cmap.unicode.codeMap[Ye[Ue].charCodeAt(0)]),Pe||Ye[Ue].charCodeAt(0)<256&&Oe[$e].metadata.hasOwnProperty("Unicode")?Ge+=Ye[Ue]:Ge+="";var rn="";return parseInt($e.slice(1))<14||Qe==="WinAnsiEncoding"?rn=Fe(Ge,$e).split("").map((function(tn){return tn.charCodeAt(0).toString(16)})).join(""):Qe==="Identity-H"&&(rn=r(Ge,Oe[$e])),Me.isHex=!0,{text:rn,x:Ce,y:Be,options:ke,mutex:Me}};e.events.push(["postProcessText",function(Ae){var Pe=Ae.text||"",Re=[],Ce={text:Pe,x:Ae.x,y:Ae.y,options:Ae.options,mutex:Ae.mutex};if(Array.isArray(Pe)){var Be=0;for(Be=0;Be<Pe.length;Be+=1)Array.isArray(Pe[Be])&&Pe[Be].length===3?Re.push([Ee(Object.assign({},Ce,{text:Pe[Be][0]})).text,Pe[Be][1],Pe[Be][2]]):Re.push(Ee(Object.assign({},Ce,{text:Pe[Be]})).text);Ae.text=Re}else Ae.text=Ee(Object.assign({},Ce,{text:Pe})).text}])})(E),(function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,xe){return e.call(this),this.internal.vFS[r]=xe,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(E.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(xe){var Ee,Ae,Pe,Re,Ce,Be,ke,Me=e,Fe=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],Ve=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],Oe={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},$e={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},Ge=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Ue=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),Ye=!1,Qe=0;this.__bidiEngine__={};var rn=function(He){var en=He.charCodeAt(),cn=en>>8,Sn=$e[cn];return Sn!==void 0?Me[256*Sn+(255&en)]:cn===252||cn===253?"AL":Ue.test(cn)?"L":cn===8?"R":"N"},tn=function(He){for(var en,cn=0;cn<He.length;cn++){if((en=rn(He.charAt(cn)))==="L")return!1;if(en==="R")return!0}return!1},an=function(He,en,cn,Sn){var Tn,hn,pn,bn,fn=en[Sn];switch(fn){case"L":case"R":Ye=!1;break;case"N":case"AN":break;case"EN":Ye&&(fn="AN");break;case"AL":Ye=!0,fn="R";break;case"WS":fn="N";break;case"CS":Sn<1||Sn+1>=en.length||(Tn=cn[Sn-1])!=="EN"&&Tn!=="AN"||(hn=en[Sn+1])!=="EN"&&hn!=="AN"?fn="N":Ye&&(hn="AN"),fn=hn===Tn?hn:"N";break;case"ES":fn=(Tn=Sn>0?cn[Sn-1]:"B")==="EN"&&Sn+1<en.length&&en[Sn+1]==="EN"?"EN":"N";break;case"ET":if(Sn>0&&cn[Sn-1]==="EN"){fn="EN";break}if(Ye){fn="N";break}for(pn=Sn+1,bn=en.length;pn<bn&&en[pn]==="ET";)pn++;fn=pn<bn&&en[pn]==="EN"?"EN":"N";break;case"NSM":if(Pe&&!Re){for(bn=en.length,pn=Sn+1;pn<bn&&en[pn]==="NSM";)pn++;if(pn<bn){var An=He[Sn],xn=An>=1425&&An<=2303||An===64286;if(Tn=en[pn],xn&&(Tn==="R"||Tn==="AL")){fn="R";break}}}fn=Sn<1||(Tn=en[Sn-1])==="B"?"N":cn[Sn-1];break;case"B":Ye=!1,Ee=!0,fn=Qe;break;case"S":Ae=!0,fn="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":Ye=!1;break;case"BN":fn="N"}return fn},qe=function(He,en,cn){var Sn=He.split("");return cn&&Ke(Sn,cn,{hiLevel:Qe}),Sn.reverse(),en&&en.reverse(),Sn.join("")},Ke=function(He,en,cn){var Sn,Tn,hn,pn,bn,fn=-1,An=He.length,xn=0,Je=[],We=Qe?Ve:Fe,Ze=[];for(Ye=!1,Ee=!1,Ae=!1,Tn=0;Tn<An;Tn++)Ze[Tn]=rn(He[Tn]);for(hn=0;hn<An;hn++){if(bn=xn,Je[hn]=an(He,Ze,Je,hn),Sn=240&(xn=We[bn][Oe[Je[hn]]]),xn&=15,en[hn]=pn=We[xn][5],Sn>0)if(Sn===16){for(Tn=fn;Tn<hn;Tn++)en[Tn]=1;fn=-1}else fn=-1;if(We[xn][6])fn===-1&&(fn=hn);else if(fn>-1){for(Tn=fn;Tn<hn;Tn++)en[Tn]=pn;fn=-1}Ze[hn]==="B"&&(en[hn]=0),cn.hiLevel|=pn}Ae&&(function(un,yn,_n){for(var wn=0;wn<_n;wn++)if(un[wn]==="S"){yn[wn]=Qe;for(var kn=wn-1;kn>=0&&un[kn]==="WS";kn--)yn[kn]=Qe}})(Ze,en,An)},sn=function(He,en,cn,Sn,Tn){if(!(Tn.hiLevel<He)){if(He===1&&Qe===1&&!Ee)return en.reverse(),void(cn&&cn.reverse());for(var hn,pn,bn,fn,An=en.length,xn=0;xn<An;){if(Sn[xn]>=He){for(bn=xn+1;bn<An&&Sn[bn]>=He;)bn++;for(fn=xn,pn=bn-1;fn<pn;fn++,pn--)hn=en[fn],en[fn]=en[pn],en[pn]=hn,cn&&(hn=cn[fn],cn[fn]=cn[pn],cn[pn]=hn);xn=bn}xn++}}},gn=function(He,en,cn){var Sn=He.split(""),Tn={hiLevel:Qe};return cn||(cn=[]),Ke(Sn,cn,Tn),(function(hn,pn,bn){if(bn.hiLevel!==0&&ke)for(var fn,An=0;An<hn.length;An++)pn[An]===1&&(fn=Ge.indexOf(hn[An]))>=0&&(hn[An]=Ge[fn+1])})(Sn,cn,Tn),sn(2,Sn,en,cn,Tn),sn(1,Sn,en,cn,Tn),Sn.join("")};return this.__bidiEngine__.doBidiReorder=function(He,en,cn){if((function(Tn,hn){if(hn)for(var pn=0;pn<Tn.length;pn++)hn[pn]=pn;Re===void 0&&(Re=tn(Tn)),Be===void 0&&(Be=tn(Tn))})(He,en),Pe||!Ce||Be)if(Pe&&Ce&&Re^Be)Qe=Re?1:0,He=qe(He,en,cn);else if(!Pe&&Ce&&Be)Qe=Re?1:0,He=gn(He,en,cn),He=qe(He,en);else if(!Pe||Re||Ce||Be){if(Pe&&!Ce&&Re^Be)He=qe(He,en),Re?(Qe=0,He=gn(He,en,cn)):(Qe=1,He=gn(He,en,cn),He=qe(He,en));else if(Pe&&Re&&!Ce&&Be)Qe=1,He=gn(He,en,cn),He=qe(He,en);else if(!Pe&&!Ce&&Re^Be){var Sn=ke;Re?(Qe=1,He=gn(He,en,cn),Qe=0,ke=!1,He=gn(He,en,cn),ke=Sn):(Qe=0,He=gn(He,en,cn),He=qe(He,en),Qe=1,ke=!1,He=gn(He,en,cn),ke=Sn,He=qe(He,en))}}else Qe=0,He=gn(He,en,cn);else Qe=Re?1:0,He=gn(He,en,cn);return He},this.__bidiEngine__.setOptions=function(He){He&&(Pe=He.isInputVisual,Ce=He.isOutputVisual,Re=He.isInputRtl,Be=He.isOutputRtl,ke=He.isSymmetricSwapping)},this.__bidiEngine__.setOptions(xe),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(xe){var Ee=xe.text,Ae=(xe.x,xe.y,xe.options||{}),Pe=(xe.mutex,Ae.lang,[]);if(Ae.isInputVisual=typeof Ae.isInputVisual!="boolean"||Ae.isInputVisual,r.setOptions(Ae),Object.prototype.toString.call(Ee)==="[object Array]"){var Re=0;for(Pe=[],Re=0;Re<Ee.length;Re+=1)Object.prototype.toString.call(Ee[Re])==="[object Array]"?Pe.push([r.doBidiReorder(Ee[Re][0]),Ee[Re][1],Ee[Re][2]]):Pe.push([r.doBidiReorder(Ee[Re])]);xe.text=Pe}else xe.text=r.doBidiReorder(Ee);r.setOptions({isInputVisual:!0})}])})(E),E.API.TTFFont=(function(){function t(e){var r;if(this.rawData=e,r=this.contents=new ne(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Le(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new ie(this.contents),this.head=new se(this),this.name=new pe(this),this.cmap=new ue(this),this.toUnicode={},this.hhea=new he(this),this.maxp=new ge(this),this.hmtx=new me(this),this.post=new fe(this),this.os2=new le(this),this.loca=new Ne(this),this.glyf=new be(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,xe,Ee,Ae;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var Pe,Re,Ce,Be;for(Be=[],Pe=0,Re=(Ce=this.bbox).length;Pe<Re;Pe++)e=Ce[Pe],Be.push(Math.round(e*this.scaleFactor));return Be}).call(this),this.stemV=0,this.post.exists?(xe=255&(Ee=this.post.italic_angle),(32768&(r=Ee>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+xe)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(Ae=this.familyClass)===1||Ae===2||Ae===3||Ae===4||Ae===5||Ae===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,xe){var Ee,Ae,Pe,Re;for(Pe=0,Ae=0,Re=(e=""+e).length;0<=Re?Ae<Re:Ae>Re;Ae=0<=Re?++Ae:--Ae)Ee=e.charCodeAt(Ae),Pe+=this.widthOfGlyph(this.characterToGlyph(Ee))+xe*(1e3/r)||0;return Pe*(r/1e3)},t.prototype.lineHeight=function(e,r){var xe;return r==null&&(r=!1),xe=r?this.lineGap:0,(this.ascender+xe-this.decender)/1e3*e},t})();var re,ne=(function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,xe;for(xe=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)xe[r]=String.fromCharCode(this.readByte());return xe.join("")},t.prototype.writeString=function(e){var r,xe,Ee;for(Ee=[],r=0,xe=e.length;0<=xe?r<xe:r>xe;r=0<=xe?++r:--r)Ee.push(this.writeByte(e.charCodeAt(r)));return Ee},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,xe,Ee,Ae,Pe,Re,Ce;return e=this.readByte(),r=this.readByte(),xe=this.readByte(),Ee=this.readByte(),Ae=this.readByte(),Pe=this.readByte(),Re=this.readByte(),Ce=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^xe)+4294967296*(255^Ee)+16777216*(255^Ae)+65536*(255^Pe)+256*(255^Re)+(255^Ce)+1):72057594037927940*e+281474976710656*r+1099511627776*xe+4294967296*Ee+16777216*Ae+65536*Pe+256*Re+Ce},t.prototype.writeLongLong=function(e){var r,xe;return r=Math.floor(e/4294967296),xe=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(xe>>24&255),this.writeByte(xe>>16&255),this.writeByte(xe>>8&255),this.writeByte(255&xe)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,xe;for(r=[],xe=0;0<=e?xe<e:xe>e;xe=0<=e?++xe:--xe)r.push(this.readByte());return r},t.prototype.write=function(e){var r,xe,Ee,Ae;for(Ae=[],xe=0,Ee=e.length;xe<Ee;xe++)r=e[xe],Ae.push(this.writeByte(r));return Ae},t})(),ie=(function(){var t;function e(r){var xe,Ee,Ae;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},Ee=0,Ae=this.tableCount;0<=Ae?Ee<Ae:Ee>Ae;Ee=0<=Ae?++Ee:--Ee)xe={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[xe.tag]=xe}return e.prototype.encode=function(r){var xe,Ee,Ae,Pe,Re,Ce,Be,ke,Me,Fe,Ve,Oe,$e;for($e in Ve=Object.keys(r).length,Ce=Math.log(2),Me=16*Math.floor(Math.log(Ve)/Ce),Pe=Math.floor(Me/Ce),ke=16*Ve-Me,(Ee=new ne).writeInt(this.scalarType),Ee.writeShort(Ve),Ee.writeShort(Me),Ee.writeShort(Pe),Ee.writeShort(ke),Ae=16*Ve,Be=Ee.pos+Ae,Re=null,Oe=[],r)for(Fe=r[$e],Ee.writeString($e),Ee.writeInt(t(Fe)),Ee.writeInt(Be),Ee.writeInt(Fe.length),Oe=Oe.concat(Fe),$e==="head"&&(Re=Be),Be+=Fe.length;Be%4;)Oe.push(0),Be++;return Ee.write(Oe),xe=2981146554-t(Ee.data),Ee.pos=Re+8,Ee.writeUInt32(xe),Ee.data},t=function(r){var xe,Ee,Ae,Pe;for(r=ve.call(r);r.length%4;)r.push(0);for(Ae=new ne(r),Ee=0,xe=0,Pe=r.length;xe<Pe;xe=xe+=4)Ee+=Ae.readUInt32();return 4294967295&Ee},e})(),ae={}.hasOwnProperty,oe=function(t,e){for(var r in e)ae.call(e,r)&&(t[r]=e[r]);function xe(){this.constructor=t}return xe.prototype=e.prototype,t.prototype=new xe,t.__super__=e.prototype,t};re=(function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var se=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="head",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},e.prototype.encode=function(r){var xe;return(xe=new ne).writeInt(this.version),xe.writeInt(this.revision),xe.writeInt(this.checkSumAdjustment),xe.writeInt(this.magicNumber),xe.writeShort(this.flags),xe.writeShort(this.unitsPerEm),xe.writeLongLong(this.created),xe.writeLongLong(this.modified),xe.writeShort(this.xMin),xe.writeShort(this.yMin),xe.writeShort(this.xMax),xe.writeShort(this.yMax),xe.writeShort(this.macStyle),xe.writeShort(this.lowestRecPPEM),xe.writeShort(this.fontDirectionHint),xe.writeShort(r),xe.writeShort(this.glyphDataFormat),xe.data},e})(),ce=(function(){function t(e,r){var xe,Ee,Ae,Pe,Re,Ce,Be,ke,Me,Fe,Ve,Oe,$e,Ge,Ue,Ye,Qe;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),Me=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(Ce=0;Ce<256;++Ce)this.codeMap[Ce]=e.readByte();break;case 4:for(Ve=e.readUInt16(),Fe=Ve/2,e.pos+=6,Ae=(function(){var rn,tn;for(tn=[],Ce=rn=0;0<=Fe?rn<Fe:rn>Fe;Ce=0<=Fe?++rn:--rn)tn.push(e.readUInt16());return tn})(),e.pos+=2,$e=(function(){var rn,tn;for(tn=[],Ce=rn=0;0<=Fe?rn<Fe:rn>Fe;Ce=0<=Fe?++rn:--rn)tn.push(e.readUInt16());return tn})(),Be=(function(){var rn,tn;for(tn=[],Ce=rn=0;0<=Fe?rn<Fe:rn>Fe;Ce=0<=Fe?++rn:--rn)tn.push(e.readUInt16());return tn})(),ke=(function(){var rn,tn;for(tn=[],Ce=rn=0;0<=Fe?rn<Fe:rn>Fe;Ce=0<=Fe?++rn:--rn)tn.push(e.readUInt16());return tn})(),Ee=(this.length-e.pos+this.offset)/2,Re=(function(){var rn,tn;for(tn=[],Ce=rn=0;0<=Ee?rn<Ee:rn>Ee;Ce=0<=Ee?++rn:--rn)tn.push(e.readUInt16());return tn})(),Ce=Ue=0,Qe=Ae.length;Ue<Qe;Ce=++Ue)for(Ge=Ae[Ce],xe=Ye=Oe=$e[Ce];Oe<=Ge?Ye<=Ge:Ye>=Ge;xe=Oe<=Ge?++Ye:--Ye)ke[Ce]===0?Pe=xe+Be[Ce]:(Pe=Re[ke[Ce]/2+(xe-Oe)-(Fe-Ce)]||0)!==0&&(Pe+=Be[Ce]),this.codeMap[xe]=65535&Pe}e.pos=Me}return t.encode=function(e,r){var xe,Ee,Ae,Pe,Re,Ce,Be,ke,Me,Fe,Ve,Oe,$e,Ge,Ue,Ye,Qe,rn,tn,an,qe,Ke,sn,gn,He,en,cn,Sn,Tn,hn,pn,bn,fn,An,xn,Je,We,Ze,un,yn,_n,wn,kn,$n,Ln,Gn;switch(Sn=new ne,Pe=Object.keys(e).sort((function(Yn,ii){return Yn-ii})),r){case"macroman":for($e=0,Ge=(function(){var Yn=[];for(Oe=0;Oe<256;++Oe)Yn.push(0);return Yn})(),Ye={0:0},Ae={},Tn=0,fn=Pe.length;Tn<fn;Tn++)Ye[kn=e[Ee=Pe[Tn]]]==null&&(Ye[kn]=++$e),Ae[Ee]={old:e[Ee],new:Ye[e[Ee]]},Ge[Ee]=Ye[e[Ee]];return Sn.writeUInt16(1),Sn.writeUInt16(0),Sn.writeUInt32(12),Sn.writeUInt16(0),Sn.writeUInt16(262),Sn.writeUInt16(0),Sn.write(Ge),{charMap:Ae,subtable:Sn.data,maxGlyphID:$e+1};case"unicode":for(en=[],Me=[],Qe=0,Ye={},xe={},Ue=Be=null,hn=0,An=Pe.length;hn<An;hn++)Ye[tn=e[Ee=Pe[hn]]]==null&&(Ye[tn]=++Qe),xe[Ee]={old:tn,new:Ye[tn]},Re=Ye[tn]-Ee,Ue!=null&&Re===Be||(Ue&&Me.push(Ue),en.push(Ee),Be=Re),Ue=Ee;for(Ue&&Me.push(Ue),Me.push(65535),en.push(65535),gn=2*(sn=en.length),Ke=2*Math.pow(Math.log(sn)/Math.LN2,2),Fe=Math.log(Ke/2)/Math.LN2,qe=2*sn-Ke,Ce=[],an=[],Ve=[],Oe=pn=0,xn=en.length;pn<xn;Oe=++pn){if(He=en[Oe],ke=Me[Oe],He===65535){Ce.push(0),an.push(0);break}if(He-(cn=xe[He].new)>=32768)for(Ce.push(0),an.push(2*(Ve.length+sn-Oe)),Ee=bn=He;He<=ke?bn<=ke:bn>=ke;Ee=He<=ke?++bn:--bn)Ve.push(xe[Ee].new);else Ce.push(cn-He),an.push(0)}for(Sn.writeUInt16(3),Sn.writeUInt16(1),Sn.writeUInt32(12),Sn.writeUInt16(4),Sn.writeUInt16(16+8*sn+2*Ve.length),Sn.writeUInt16(0),Sn.writeUInt16(gn),Sn.writeUInt16(Ke),Sn.writeUInt16(Fe),Sn.writeUInt16(qe),_n=0,Je=Me.length;_n<Je;_n++)Ee=Me[_n],Sn.writeUInt16(Ee);for(Sn.writeUInt16(0),wn=0,We=en.length;wn<We;wn++)Ee=en[wn],Sn.writeUInt16(Ee);for($n=0,Ze=Ce.length;$n<Ze;$n++)Re=Ce[$n],Sn.writeUInt16(Re);for(Ln=0,un=an.length;Ln<un;Ln++)rn=an[Ln],Sn.writeUInt16(rn);for(Gn=0,yn=Ve.length;Gn<yn;Gn++)$e=Ve[Gn],Sn.writeUInt16($e);return{charMap:xe,subtable:Sn.data,maxGlyphID:Qe+1}}},t})(),ue=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="cmap",e.prototype.parse=function(r){var xe,Ee,Ae;for(r.pos=this.offset,this.version=r.readUInt16(),Ae=r.readUInt16(),this.tables=[],this.unicode=null,Ee=0;0<=Ae?Ee<Ae:Ee>Ae;Ee=0<=Ae?++Ee:--Ee)xe=new ce(r,this.offset),this.tables.push(xe),xe.isUnicode&&this.unicode==null&&(this.unicode=xe);return!0},e.encode=function(r,xe){var Ee,Ae;return xe==null&&(xe="macroman"),Ee=ce.encode(r,xe),(Ae=new ne).writeUInt16(0),Ae.writeUInt16(1),Ee.table=Ae.data.concat(Ee.subtable),Ee},e})(),he=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="hhea",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},e})(),le=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="OS/2",e.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=(function(){var xe,Ee;for(Ee=[],xe=0;xe<10;++xe)Ee.push(r.readByte());return Ee})(),this.charRange=(function(){var xe,Ee;for(Ee=[],xe=0;xe<4;++xe)Ee.push(r.readInt());return Ee})(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=(function(){var xe,Ee;for(Ee=[],xe=0;xe<2;xe=++xe)Ee.push(r.readInt());return Ee})(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},e})(),fe=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="post",e.prototype.parse=function(r){var xe,Ee,Ae;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var Pe;for(Ee=r.readUInt16(),this.glyphNameIndex=[],Pe=0;0<=Ee?Pe<Ee:Pe>Ee;Pe=0<=Ee?++Pe:--Pe)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],Ae=[];r.pos<this.offset+this.length;)xe=r.readByte(),Ae.push(this.names.push(r.readString(xe)));return Ae;case 151552:return Ee=r.readUInt16(),this.offsets=r.read(Ee);case 196608:break;case 262144:return this.map=(function(){var Re,Ce,Be;for(Be=[],Pe=Re=0,Ce=this.file.maxp.numGlyphs;0<=Ce?Re<Ce:Re>Ce;Pe=0<=Ce?++Re:--Re)Be.push(r.readUInt32());return Be}).call(this)}},e})(),de=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},pe=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="name",e.prototype.parse=function(r){var xe,Ee,Ae,Pe,Re,Ce,Be,ke,Me,Fe,Ve;for(r.pos=this.offset,r.readShort(),xe=r.readShort(),Ce=r.readShort(),Ee=[],Pe=0;0<=xe?Pe<xe:Pe>xe;Pe=0<=xe?++Pe:--Pe)Ee.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+Ce+r.readShort()});for(Be={},Pe=Me=0,Fe=Ee.length;Me<Fe;Pe=++Me)Ae=Ee[Pe],r.pos=Ae.offset,ke=r.readString(Ae.length),Re=new de(ke,Ae),Be[Ve=Ae.nameID]==null&&(Be[Ve]=[]),Be[Ae.nameID].push(Re);this.strings=Be,this.copyright=Be[0],this.fontFamily=Be[1],this.fontSubfamily=Be[2],this.uniqueSubfamily=Be[3],this.fontName=Be[4],this.version=Be[5];try{this.postscriptName=Be[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=Be[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=Be[7],this.manufacturer=Be[8],this.designer=Be[9],this.description=Be[10],this.vendorUrl=Be[11],this.designerUrl=Be[12],this.license=Be[13],this.licenseUrl=Be[14],this.preferredFamily=Be[15],this.preferredSubfamily=Be[17],this.compatibleFull=Be[18],this.sampleText=Be[19]},e})(),ge=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="maxp",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},e})(),me=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="hmtx",e.prototype.parse=function(r){var xe,Ee,Ae,Pe,Re,Ce,Be;for(r.pos=this.offset,this.metrics=[],xe=0,Ce=this.file.hhea.numberOfMetrics;0<=Ce?xe<Ce:xe>Ce;xe=0<=Ce?++xe:--xe)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(Ae=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var ke,Me;for(Me=[],xe=ke=0;0<=Ae?ke<Ae:ke>Ae;xe=0<=Ae?++ke:--ke)Me.push(r.readInt16());return Me})(),this.widths=(function(){var ke,Me,Fe,Ve;for(Ve=[],ke=0,Me=(Fe=this.metrics).length;ke<Me;ke++)Pe=Fe[ke],Ve.push(Pe.advance);return Ve}).call(this),Ee=this.widths[this.widths.length-1],Be=[],xe=Re=0;0<=Ae?Re<Ae:Re>Ae;xe=0<=Ae?++Re:--Re)Be.push(this.widths.push(Ee));return Be},e.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},e})(),ve=[].slice,be=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(r){var xe,Ee,Ae,Pe,Re,Ce,Be,ke,Me,Fe;return r in this.cache?this.cache[r]:(Pe=this.file.loca,xe=this.file.contents,Ee=Pe.indexOf(r),(Ae=Pe.lengthOf(r))===0?this.cache[r]=null:(xe.pos=this.offset+Ee,Re=(Ce=new ne(xe.read(Ae))).readShort(),ke=Ce.readShort(),Fe=Ce.readShort(),Be=Ce.readShort(),Me=Ce.readShort(),this.cache[r]=Re===-1?new we(Ce,ke,Fe,Be,Me):new ye(Ce,Re,ke,Fe,Be,Me),this.cache[r]))},e.prototype.encode=function(r,xe,Ee){var Ae,Pe,Re,Ce,Be;for(Re=[],Pe=[],Ce=0,Be=xe.length;Ce<Be;Ce++)Ae=r[xe[Ce]],Pe.push(Re.length),Ae&&(Re=Re.concat(Ae.encode(Ee)));return Pe.push(Re.length),{table:Re,offsets:Pe}},e})(),ye=(function(){function t(e,r,xe,Ee,Ae,Pe){this.raw=e,this.numberOfContours=r,this.xMin=xe,this.yMin=Ee,this.xMax=Ae,this.yMax=Pe,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),we=(function(){function t(e,r,xe,Ee,Ae){var Pe,Re;for(this.raw=e,this.xMin=r,this.yMin=xe,this.xMax=Ee,this.yMax=Ae,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],Pe=this.raw;Re=Pe.readShort(),this.glyphOffsets.push(Pe.pos),this.glyphIDs.push(Pe.readUInt16()),32&Re;)Pe.pos+=1&Re?4:2,128&Re?Pe.pos+=8:64&Re?Pe.pos+=4:8&Re&&(Pe.pos+=2)}return t.prototype.encode=function(){var e,r,xe;for(r=new ne(ve.call(this.raw.data)),e=0,xe=this.glyphIDs.length;e<xe;++e)r.pos=this.glyphOffsets[e];return r.data},t})(),Ne=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="loca",e.prototype.parse=function(r){var xe,Ee;return r.pos=this.offset,xe=this.file.head.indexToLocFormat,this.offsets=xe===0?(function(){var Ae,Pe;for(Pe=[],Ee=0,Ae=this.length;Ee<Ae;Ee+=2)Pe.push(2*r.readUInt16());return Pe}).call(this):(function(){var Ae,Pe;for(Pe=[],Ee=0,Ae=this.length;Ee<Ae;Ee+=4)Pe.push(r.readUInt32());return Pe}).call(this)},e.prototype.indexOf=function(r){return this.offsets[r]},e.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},e.prototype.encode=function(r,xe){for(var Ee=new Uint32Array(this.offsets.length),Ae=0,Pe=0,Re=0;Re<Ee.length;++Re)if(Ee[Re]=Ae,Pe<xe.length&&xe[Pe]==Re){++Pe,Ee[Re]=Ae;var Ce=this.offsets[Re],Be=this.offsets[Re+1]-Ce;Be>0&&(Ae+=Be)}for(var ke=new Array(4*Ee.length),Me=0;Me<Ee.length;++Me)ke[4*Me+3]=255&Ee[Me],ke[4*Me+2]=(65280&Ee[Me])>>8,ke[4*Me+1]=(16711680&Ee[Me])>>16,ke[4*Me]=(4278190080&Ee[Me])>>24;return ke},e})(),Le=(function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,xe,Ee,Ae;for(r in Ee=this.font.cmap.tables[0].codeMap,e={},Ae=this.subset)xe=Ae[r],e[r]=Ee[xe];return e},t.prototype.glyphsFor=function(e){var r,xe,Ee,Ae,Pe,Re,Ce;for(Ee={},Pe=0,Re=e.length;Pe<Re;Pe++)Ee[Ae=e[Pe]]=this.font.glyf.glyphFor(Ae);for(Ae in r=[],Ee)(xe=Ee[Ae])!=null&&xe.compound&&r.push.apply(r,xe.glyphIDs);if(r.length>0)for(Ae in Ce=this.glyphsFor(r))xe=Ce[Ae],Ee[Ae]=xe;return Ee},t.prototype.encode=function(e,r){var xe,Ee,Ae,Pe,Re,Ce,Be,ke,Me,Fe,Ve,Oe,$e,Ge,Ue;for(Ee in xe=ue.encode(this.generateCmap(),"unicode"),Pe=this.glyphsFor(e),Ve={0:0},Ue=xe.charMap)Ve[(Ce=Ue[Ee]).old]=Ce.new;for(Oe in Fe=xe.maxGlyphID,Pe)Oe in Ve||(Ve[Oe]=Fe++);return ke=(function(Ye){var Qe,rn;for(Qe in rn={},Ye)rn[Ye[Qe]]=Qe;return rn})(Ve),Me=Object.keys(ke).sort((function(Ye,Qe){return Ye-Qe})),$e=(function(){var Ye,Qe,rn;for(rn=[],Ye=0,Qe=Me.length;Ye<Qe;Ye++)Re=Me[Ye],rn.push(ke[Re]);return rn})(),Ae=this.font.glyf.encode(Pe,$e,Ve),Be=this.font.loca.encode(Ae.offsets,$e),Ge={cmap:this.font.cmap.raw(),glyf:Ae.table,loca:Be,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(Ge["OS/2"]=this.font.os2.raw()),this.font.directory.encode(Ge)},t})();E.API.PDFObject=(function(){var t;function e(){}return t=function(r,xe){return(Array(xe+1).join("0")+r).slice(-xe)},e.convert=function(r){var xe,Ee,Ae,Pe;if(Array.isArray(r))return"["+(function(){var Re,Ce,Be;for(Be=[],Re=0,Ce=r.length;Re<Ce;Re++)xe=r[Re],Be.push(e.convert(xe));return Be})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(Ee in Ae=["<<"],r)Pe=r[Ee],Ae.push("/"+Ee+" "+e.convert(Pe));return Ae.push(">>"),Ae.join(`
`)}return""+r},e})();const jspdf_es_min=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:St,AcroFormAppearance:At,AcroFormButton:mt,AcroFormCheckBox:wt,AcroFormChoiceField:ft,AcroFormComboBox:pt,AcroFormEditBox:gt,AcroFormListBox:dt,AcroFormPasswordField:Lt,AcroFormPushButton:vt,AcroFormRadioButton:bt,AcroFormTextField:Nt,GState:j,ShadingPattern:B,TilingPattern:M,default:E,jsPDF:E},Symbol.toStringTag,{value:"Module"}));var jspdf_plugin_autotable$1={exports:{}};const require$$0=getAugmentedNamespace(jspdf_es_min);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.1
 *
 *               Copyright (c) 2023 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */var jspdf_plugin_autotable=jspdf_plugin_autotable$1.exports,hasRequiredJspdf_plugin_autotable;function requireJspdf_plugin_autotable(){return hasRequiredJspdf_plugin_autotable||(hasRequiredJspdf_plugin_autotable=1,(function(t,e){(function(xe,Ee){t.exports=Ee((function(){try{return require$$0}catch{}})())})(typeof globalThis<"u"?globalThis:typeof jspdf_plugin_autotable<"u"?jspdf_plugin_autotable:typeof window<"u"?window:typeof self<"u"?self:commonjsGlobal,function(r){return(function(){var xe={662:(function(Re,Ce){var Be=this&&this.__extends||(function(){var Fe=function(Ve,Oe){return Fe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($e,Ge){$e.__proto__=Ge}||function($e,Ge){for(var Ue in Ge)Object.prototype.hasOwnProperty.call(Ge,Ue)&&($e[Ue]=Ge[Ue])},Fe(Ve,Oe)};return function(Ve,Oe){if(typeof Oe!="function"&&Oe!==null)throw new TypeError("Class extends value "+String(Oe)+" is not a constructor or null");Fe(Ve,Oe);function $e(){this.constructor=Ve}Ve.prototype=Oe===null?Object.create(Oe):($e.prototype=Oe.prototype,new $e)}})();Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.CellHookData=Ce.HookData=void 0;var ke=(function(){function Fe(Ve,Oe,$e){this.table=Oe,this.pageNumber=Oe.pageNumber,this.pageCount=this.pageNumber,this.settings=Oe.settings,this.cursor=$e,this.doc=Ve.getDocument()}return Fe})();Ce.HookData=ke;var Me=(function(Fe){Be(Ve,Fe);function Ve(Oe,$e,Ge,Ue,Ye,Qe){var rn=Fe.call(this,Oe,$e,Qe)||this;return rn.cell=Ge,rn.row=Ue,rn.column=Ye,rn.section=Ue.section,rn}return Ve})(ke);Ce.CellHookData=Me}),790:(function(Re,Ce,Be){Object.defineProperty(Ce,"__esModule",{value:!0});var ke=Be(148),Me=Be(938),Fe=Be(323),Ve=Be(587),Oe=Be(49),$e=Be(858);function Ge(Ue){Ue.API.autoTable=function(){for(var Ye=[],Qe=0;Qe<arguments.length;Qe++)Ye[Qe]=arguments[Qe];var rn;Ye.length===1?rn=Ye[0]:(console.error("Use of deprecated autoTable initiation"),rn=Ye[2]||{},rn.columns=Ye[0],rn.body=Ye[1]);var tn=(0,Ve.parseInput)(this,rn),an=(0,$e.createTable)(this,tn);return(0,Oe.drawTable)(this,an),this},Ue.API.lastAutoTable=!1,Ue.API.previousAutoTable=!1,Ue.API.autoTable.previous=!1,Ue.API.autoTableText=function(Ye,Qe,rn,tn){(0,Me.default)(Ye,Qe,rn,tn,this)},Ue.API.autoTableSetDefaults=function(Ye){return Fe.DocHandler.setDefaults(Ye,this),this},Ue.autoTableSetDefaults=function(Ye,Qe){Fe.DocHandler.setDefaults(Ye,Qe)},Ue.API.autoTableHtmlToJson=function(Ye,Qe){if(Qe===void 0&&(Qe=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var rn=new Fe.DocHandler(this),tn=(0,ke.parseHtml)(rn,Ye,window,Qe,!1),an=tn.head,qe=tn.body,Ke=an[0].map(function(sn){return sn.content});return{columns:Ke,rows:qe,data:qe}},Ue.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var Ye=this.lastAutoTable;return Ye&&Ye.finalY?Ye.finalY:0},Ue.API.autoTableAddPageContent=function(Ye){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),Ue.API.autoTable.globalDefaults||(Ue.API.autoTable.globalDefaults={}),Ue.API.autoTable.globalDefaults.addPageContent=Ye,this},Ue.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}Ce.default=Ge}),938:(function(Re,Ce){Object.defineProperty(Ce,"__esModule",{value:!0});function Be(ke,Me,Fe,Ve,Oe){Ve=Ve||{};var $e=1.15,Ge=Oe.internal.scaleFactor,Ue=Oe.internal.getFontSize()/Ge,Ye=Oe.getLineHeightFactor?Oe.getLineHeightFactor():$e,Qe=Ue*Ye,rn=/\r\n|\r|\n/g,tn="",an=1;if((Ve.valign==="middle"||Ve.valign==="bottom"||Ve.halign==="center"||Ve.halign==="right")&&(tn=typeof ke=="string"?ke.split(rn):ke,an=tn.length||1),Fe+=Ue*(2-$e),Ve.valign==="middle"?Fe-=an/2*Qe:Ve.valign==="bottom"&&(Fe-=an*Qe),Ve.halign==="center"||Ve.halign==="right"){var qe=Ue;if(Ve.halign==="center"&&(qe*=.5),tn&&an>=1){for(var Ke=0;Ke<tn.length;Ke++)Oe.text(tn[Ke],Me-Oe.getStringUnitWidth(tn[Ke])*qe,Fe),Fe+=Qe;return Oe}Me-=Oe.getStringUnitWidth(ke)*qe}return Ve.halign==="justify"?Oe.text(ke,Me,Fe,{maxWidth:Ve.maxWidth||100,align:"justify"}):Oe.text(ke,Me,Fe),Oe}Ce.default=Be}),200:(function(Re,Ce){Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.getPageAvailableWidth=Ce.parseSpacing=Ce.getFillStyle=Ce.addTableBorder=Ce.getStringWidth=void 0;function Be(Oe,$e,Ge){Ge.applyStyles($e,!0);var Ue=Array.isArray(Oe)?Oe:[Oe],Ye=Ue.map(function(Qe){return Ge.getTextWidth(Qe)}).reduce(function(Qe,rn){return Math.max(Qe,rn)},0);return Ye}Ce.getStringWidth=Be;function ke(Oe,$e,Ge,Ue){var Ye=$e.settings.tableLineWidth,Qe=$e.settings.tableLineColor;Oe.applyStyles({lineWidth:Ye,lineColor:Qe});var rn=Me(Ye,!1);rn&&Oe.rect(Ge.x,Ge.y,$e.getWidth(Oe.pageSize().width),Ue.y-Ge.y,rn)}Ce.addTableBorder=ke;function Me(Oe,$e){var Ge=Oe>0,Ue=$e||$e===0;return Ge&&Ue?"DF":Ge?"S":Ue?"F":null}Ce.getFillStyle=Me;function Fe(Oe,$e){var Ge,Ue,Ye,Qe;if(Oe=Oe||$e,Array.isArray(Oe)){if(Oe.length>=4)return{top:Oe[0],right:Oe[1],bottom:Oe[2],left:Oe[3]};if(Oe.length===3)return{top:Oe[0],right:Oe[1],bottom:Oe[2],left:Oe[1]};if(Oe.length===2)return{top:Oe[0],right:Oe[1],bottom:Oe[0],left:Oe[1]};Oe.length===1?Oe=Oe[0]:Oe=$e}return typeof Oe=="object"?(typeof Oe.vertical=="number"&&(Oe.top=Oe.vertical,Oe.bottom=Oe.vertical),typeof Oe.horizontal=="number"&&(Oe.right=Oe.horizontal,Oe.left=Oe.horizontal),{left:(Ge=Oe.left)!==null&&Ge!==void 0?Ge:$e,top:(Ue=Oe.top)!==null&&Ue!==void 0?Ue:$e,right:(Ye=Oe.right)!==null&&Ye!==void 0?Ye:$e,bottom:(Qe=Oe.bottom)!==null&&Qe!==void 0?Qe:$e}):(typeof Oe!="number"&&(Oe=$e),{top:Oe,right:Oe,bottom:Oe,left:Oe})}Ce.parseSpacing=Fe;function Ve(Oe,$e){var Ge=Fe($e.settings.margin,0);return Oe.pageSize().width-(Ge.left+Ge.right)}Ce.getPageAvailableWidth=Ve}),913:(function(Re,Ce){var Be=this&&this.__extends||(function(){var Ve=function(Oe,$e){return Ve=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ge,Ue){Ge.__proto__=Ue}||function(Ge,Ue){for(var Ye in Ue)Object.prototype.hasOwnProperty.call(Ue,Ye)&&(Ge[Ye]=Ue[Ye])},Ve(Oe,$e)};return function(Oe,$e){if(typeof $e!="function"&&$e!==null)throw new TypeError("Class extends value "+String($e)+" is not a constructor or null");Ve(Oe,$e);function Ge(){this.constructor=Oe}Oe.prototype=$e===null?Object.create($e):(Ge.prototype=$e.prototype,new Ge)}})();Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.getTheme=Ce.defaultStyles=Ce.HtmlRowInput=void 0;var ke=(function(Ve){Be(Oe,Ve);function Oe($e){var Ge=Ve.call(this)||this;return Ge._element=$e,Ge}return Oe})(Array);Ce.HtmlRowInput=ke;function Me(Ve){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/Ve,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}Ce.defaultStyles=Me;function Fe(Ve){var Oe={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return Oe[Ve]}Ce.getTheme=Fe}),259:(function(Re,Ce,Be){Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.parseCss=void 0;var ke=Be(200);function Me(Ge,Ue,Ye,Qe,rn){var tn={},an=1.3333333333333333,qe=Ve(Ue,function(fn){return rn.getComputedStyle(fn).backgroundColor});qe!=null&&(tn.fillColor=qe);var Ke=Ve(Ue,function(fn){return rn.getComputedStyle(fn).color});Ke!=null&&(tn.textColor=Ke);var sn=$e(Qe,Ye);sn&&(tn.cellPadding=sn);var gn="borderTopColor",He=an*Ye,en=Qe.borderTopWidth;if(Qe.borderBottomWidth===en&&Qe.borderRightWidth===en&&Qe.borderLeftWidth===en){var cn=(parseFloat(en)||0)/He;cn&&(tn.lineWidth=cn)}else tn.lineWidth={top:(parseFloat(Qe.borderTopWidth)||0)/He,right:(parseFloat(Qe.borderRightWidth)||0)/He,bottom:(parseFloat(Qe.borderBottomWidth)||0)/He,left:(parseFloat(Qe.borderLeftWidth)||0)/He},tn.lineWidth.top||(tn.lineWidth.right?gn="borderRightColor":tn.lineWidth.bottom?gn="borderBottomColor":tn.lineWidth.left&&(gn="borderLeftColor"));console.log(tn.lineWidth);var Sn=Ve(Ue,function(fn){return rn.getComputedStyle(fn)[gn]});Sn!=null&&(tn.lineColor=Sn);var Tn=["left","right","center","justify"];Tn.indexOf(Qe.textAlign)!==-1&&(tn.halign=Qe.textAlign),Tn=["middle","bottom","top"],Tn.indexOf(Qe.verticalAlign)!==-1&&(tn.valign=Qe.verticalAlign);var hn=parseInt(Qe.fontSize||"");isNaN(hn)||(tn.fontSize=hn/an);var pn=Fe(Qe);pn&&(tn.fontStyle=pn);var bn=(Qe.fontFamily||"").toLowerCase();return Ge.indexOf(bn)!==-1&&(tn.font=bn),tn}Ce.parseCss=Me;function Fe(Ge){var Ue="";return(Ge.fontWeight==="bold"||Ge.fontWeight==="bolder"||parseInt(Ge.fontWeight)>=700)&&(Ue="bold"),(Ge.fontStyle==="italic"||Ge.fontStyle==="oblique")&&(Ue+="italic"),Ue}function Ve(Ge,Ue){var Ye=Oe(Ge,Ue);if(!Ye)return null;var Qe=Ye.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!Qe||!Array.isArray(Qe))return null;var rn=[parseInt(Qe[1]),parseInt(Qe[2]),parseInt(Qe[3])],tn=parseInt(Qe[4]);return tn===0||isNaN(rn[0])||isNaN(rn[1])||isNaN(rn[2])?null:rn}function Oe(Ge,Ue){var Ye=Ue(Ge);return Ye==="rgba(0, 0, 0, 0)"||Ye==="transparent"||Ye==="initial"||Ye==="inherit"?Ge.parentElement==null?null:Oe(Ge.parentElement,Ue):Ye}function $e(Ge,Ue){var Ye=[Ge.paddingTop,Ge.paddingRight,Ge.paddingBottom,Ge.paddingLeft],Qe=96/(72/Ue),rn=(parseInt(Ge.lineHeight)-parseInt(Ge.fontSize))/Ue/2,tn=Ye.map(function(qe){return parseInt(qe||"0")/Qe}),an=(0,ke.parseSpacing)(tn,0);return rn>an.top&&(an.top=rn),rn>an.bottom&&(an.bottom=rn),an}}),323:(function(Re,Ce){Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.DocHandler=void 0;var Be={},ke=(function(){function Me(Fe){this.jsPDFDocument=Fe,this.userStyles={textColor:Fe.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:Fe.internal.getFontSize(),fontStyle:Fe.internal.getFont().fontStyle,font:Fe.internal.getFont().fontName,lineWidth:Fe.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:Fe.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return Me.setDefaults=function(Fe,Ve){Ve===void 0&&(Ve=null),Ve?Ve.__autoTableDocumentDefaults=Fe:Be=Fe},Me.unifyColor=function(Fe){return Array.isArray(Fe)?Fe:typeof Fe=="number"?[Fe,Fe,Fe]:typeof Fe=="string"?[Fe]:null},Me.prototype.applyStyles=function(Fe,Ve){var Oe,$e,Ge;Ve===void 0&&(Ve=!1),Fe.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(Fe.fontStyle);var Ue=this.jsPDFDocument.internal.getFont(),Ye=Ue.fontStyle,Qe=Ue.fontName;if(Fe.font&&(Qe=Fe.font),Fe.fontStyle){Ye=Fe.fontStyle;var rn=this.getFontList()[Qe];rn&&rn.indexOf(Ye)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(rn[0]),Ye=rn[0])}if(this.jsPDFDocument.setFont(Qe,Ye),Fe.fontSize&&this.jsPDFDocument.setFontSize(Fe.fontSize),!Ve){var tn=Me.unifyColor(Fe.fillColor);tn&&(Oe=this.jsPDFDocument).setFillColor.apply(Oe,tn),tn=Me.unifyColor(Fe.textColor),tn&&($e=this.jsPDFDocument).setTextColor.apply($e,tn),tn=Me.unifyColor(Fe.lineColor),tn&&(Ge=this.jsPDFDocument).setDrawColor.apply(Ge,tn),typeof Fe.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(Fe.lineWidth)}},Me.prototype.splitTextToSize=function(Fe,Ve,Oe){return this.jsPDFDocument.splitTextToSize(Fe,Ve,Oe)},Me.prototype.rect=function(Fe,Ve,Oe,$e,Ge){return this.jsPDFDocument.rect(Fe,Ve,Oe,$e,Ge)},Me.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},Me.prototype.getTextWidth=function(Fe){return this.jsPDFDocument.getTextWidth(Fe)},Me.prototype.getDocument=function(){return this.jsPDFDocument},Me.prototype.setPage=function(Fe){this.jsPDFDocument.setPage(Fe)},Me.prototype.addPage=function(){return this.jsPDFDocument.addPage()},Me.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},Me.prototype.getGlobalOptions=function(){return Be||{}},Me.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},Me.prototype.pageSize=function(){var Fe=this.jsPDFDocument.internal.pageSize;return Fe.width==null&&(Fe={width:Fe.getWidth(),height:Fe.getHeight()}),Fe},Me.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},Me.prototype.getLineHeightFactor=function(){var Fe=this.jsPDFDocument;return Fe.getLineHeightFactor?Fe.getLineHeightFactor():1.15},Me.prototype.getLineHeight=function(Fe){return Fe/this.scaleFactor()*this.getLineHeightFactor()},Me.prototype.pageNumber=function(){var Fe=this.jsPDFDocument.internal.getCurrentPageInfo();return Fe?Fe.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},Me})();Ce.DocHandler=ke}),148:(function(Re,Ce,Be){Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.parseHtml=void 0;var ke=Be(259),Me=Be(913);function Fe($e,Ge,Ue,Ye,Qe){var rn,tn;Ye===void 0&&(Ye=!1),Qe===void 0&&(Qe=!1);var an;typeof Ge=="string"?an=Ue.document.querySelector(Ge):an=Ge;var qe=Object.keys($e.getFontList()),Ke=$e.scaleFactor(),sn=[],gn=[],He=[];if(!an)return console.error("Html table could not be found with input: ",Ge),{head:sn,body:gn,foot:He};for(var en=0;en<an.rows.length;en++){var cn=an.rows[en],Sn=(tn=(rn=cn==null?void 0:cn.parentElement)===null||rn===void 0?void 0:rn.tagName)===null||tn===void 0?void 0:tn.toLowerCase(),Tn=Ve(qe,Ke,Ue,cn,Ye,Qe);Tn&&(Sn==="thead"?sn.push(Tn):Sn==="tfoot"?He.push(Tn):gn.push(Tn))}return{head:sn,body:gn,foot:He}}Ce.parseHtml=Fe;function Ve($e,Ge,Ue,Ye,Qe,rn){for(var tn=new Me.HtmlRowInput(Ye),an=0;an<Ye.cells.length;an++){var qe=Ye.cells[an],Ke=Ue.getComputedStyle(qe);if(Qe||Ke.display!=="none"){var sn=void 0;rn&&(sn=(0,ke.parseCss)($e,qe,Ge,Ke,Ue)),tn.push({rowSpan:qe.rowSpan,colSpan:qe.colSpan,styles:sn,_element:qe,content:Oe(qe)})}}var gn=Ue.getComputedStyle(Ye);if(tn.length>0&&(Qe||gn.display!=="none"))return tn}function Oe($e){var Ge=$e.cloneNode(!0);return Ge.innerHTML=Ge.innerHTML.replace(/\n/g,"").replace(/ +/g," "),Ge.innerHTML=Ge.innerHTML.split(/<br.*?>/).map(function(Ue){return Ue.trim()}).join(`
`),Ge.innerText||Ge.textContent||""}}),587:(function(Re,Ce,Be){Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.parseInput=void 0;var ke=Be(148),Me=Be(360),Fe=Be(200),Ve=Be(323),Oe=Be(291);function $e(an,qe){var Ke=new Ve.DocHandler(an),sn=Ke.getDocumentOptions(),gn=Ke.getGlobalOptions();(0,Oe.default)(Ke,gn,sn,qe);var He=(0,Me.assign)({},gn,sn,qe),en;typeof window<"u"&&(en=window);var cn=Ge(gn,sn,qe),Sn=Ue(gn,sn,qe),Tn=Ye(Ke,He),hn=rn(Ke,He,en);return{id:qe.tableId,content:hn,hooks:Sn,styles:cn,settings:Tn}}Ce.parseInput=$e;function Ge(an,qe,Ke){for(var sn={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},gn=function(Sn){if(Sn==="columnStyles"){var Tn=an[Sn],hn=qe[Sn],pn=Ke[Sn];sn.columnStyles=(0,Me.assign)({},Tn,hn,pn)}else{var bn=[an,qe,Ke],fn=bn.map(function(An){return An[Sn]||{}});sn[Sn]=(0,Me.assign)({},fn[0],fn[1],fn[2])}},He=0,en=Object.keys(sn);He<en.length;He++){var cn=en[He];gn(cn)}return sn}function Ue(an,qe,Ke){for(var sn=[an,qe,Ke],gn={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},He=0,en=sn;He<en.length;He++){var cn=en[He];cn.didParseCell&&gn.didParseCell.push(cn.didParseCell),cn.willDrawCell&&gn.willDrawCell.push(cn.willDrawCell),cn.didDrawCell&&gn.didDrawCell.push(cn.didDrawCell),cn.willDrawPage&&gn.willDrawPage.push(cn.willDrawPage),cn.didDrawPage&&gn.didDrawPage.push(cn.didDrawPage)}return gn}function Ye(an,qe){var Ke,sn,gn,He,en,cn,Sn,Tn,hn,pn,bn,fn,An=(0,Fe.parseSpacing)(qe.margin,40/an.scaleFactor()),xn=(Ke=Qe(an,qe.startY))!==null&&Ke!==void 0?Ke:An.top,Je;qe.showFoot===!0?Je="everyPage":qe.showFoot===!1?Je="never":Je=(sn=qe.showFoot)!==null&&sn!==void 0?sn:"everyPage";var We;qe.showHead===!0?We="everyPage":qe.showHead===!1?We="never":We=(gn=qe.showHead)!==null&&gn!==void 0?gn:"everyPage";var Ze=(He=qe.useCss)!==null&&He!==void 0?He:!1,un=qe.theme||(Ze?"plain":"striped"),yn=!!qe.horizontalPageBreak,_n=(en=qe.horizontalPageBreakRepeat)!==null&&en!==void 0?en:null;return{includeHiddenHtml:(cn=qe.includeHiddenHtml)!==null&&cn!==void 0?cn:!1,useCss:Ze,theme:un,startY:xn,margin:An,pageBreak:(Sn=qe.pageBreak)!==null&&Sn!==void 0?Sn:"auto",rowPageBreak:(Tn=qe.rowPageBreak)!==null&&Tn!==void 0?Tn:"auto",tableWidth:(hn=qe.tableWidth)!==null&&hn!==void 0?hn:"auto",showHead:We,showFoot:Je,tableLineWidth:(pn=qe.tableLineWidth)!==null&&pn!==void 0?pn:0,tableLineColor:(bn=qe.tableLineColor)!==null&&bn!==void 0?bn:200,horizontalPageBreak:yn,horizontalPageBreakRepeat:_n,horizontalPageBreakBehaviour:(fn=qe.horizontalPageBreakBehaviour)!==null&&fn!==void 0?fn:"afterAllRows"}}function Qe(an,qe){var Ke=an.getLastAutoTable(),sn=an.scaleFactor(),gn=an.pageNumber(),He=!1;if(Ke&&Ke.startPageNumber){var en=Ke.startPageNumber+Ke.pageNumber-1;He=en===gn}return typeof qe=="number"?qe:(qe==null||qe===!1)&&He&&(Ke==null?void 0:Ke.finalY)!=null?Ke.finalY+20/sn:null}function rn(an,qe,Ke){var sn=qe.head||[],gn=qe.body||[],He=qe.foot||[];if(qe.html){var en=qe.includeHiddenHtml;if(Ke){var cn=(0,ke.parseHtml)(an,qe.html,Ke,en,qe.useCss)||{};sn=cn.head||sn,gn=cn.body||sn,He=cn.foot||sn}else console.error("Cannot parse html in non browser environment")}var Sn=qe.columns||tn(sn,gn,He);return{columns:Sn,head:sn,body:gn,foot:He}}function tn(an,qe,Ke){var sn=an[0]||qe[0]||Ke[0]||[],gn=[];return Object.keys(sn).filter(function(He){return He!=="_element"}).forEach(function(He){var en=1,cn;Array.isArray(sn)?cn=sn[parseInt(He)]:cn=sn[He],typeof cn=="object"&&!Array.isArray(cn)&&(en=(cn==null?void 0:cn.colSpan)||1);for(var Sn=0;Sn<en;Sn++){var Tn=void 0;Array.isArray(sn)?Tn=gn.length:Tn=He+(Sn>0?"_".concat(Sn):"");var hn={dataKey:Tn};gn.push(hn)}}),gn}}),291:(function(Re,Ce){Object.defineProperty(Ce,"__esModule",{value:!0});function Be(Me,Fe,Ve,Oe){for(var $e=function(Qe){Qe&&typeof Qe!="object"&&console.error("The options parameter should be of type object, is: "+typeof Qe),typeof Qe.extendWidth<"u"&&(Qe.tableWidth=Qe.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof Qe.margins<"u"&&(typeof Qe.margin>"u"&&(Qe.margin=Qe.margins),console.error("Use of deprecated option: margins, use margin instead.")),Qe.startY&&typeof Qe.startY!="number"&&(console.error("Invalid value for startY option",Qe.startY),delete Qe.startY),!Qe.didDrawPage&&(Qe.afterPageContent||Qe.beforePageContent||Qe.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),Qe.didDrawPage=function(He){Me.applyStyles(Me.userStyles),Qe.beforePageContent&&Qe.beforePageContent(He),Me.applyStyles(Me.userStyles),Qe.afterPageContent&&Qe.afterPageContent(He),Me.applyStyles(Me.userStyles),Qe.afterPageAdd&&He.pageNumber>1&&He.afterPageAdd(He),Me.applyStyles(Me.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(He){Qe[He]&&console.error('The "'.concat(He,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(He){var en=He[0],cn=He[1];Qe[cn]&&(console.error("Use of deprecated option ".concat(cn,". Use ").concat(en," instead")),Qe[en]=Qe[cn])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(He){var en=typeof He=="string"?He:He[0],cn=typeof He=="string"?He:He[1];typeof Qe[en]<"u"&&(typeof Qe.styles[cn]>"u"&&(Qe.styles[cn]=Qe[en]),console.error("Use of deprecated option: "+en+", use the style "+cn+" instead."))});for(var rn=0,tn=["styles","bodyStyles","headStyles","footStyles"];rn<tn.length;rn++){var an=tn[rn];ke(Qe[an]||{})}for(var qe=Qe.columnStyles||{},Ke=0,sn=Object.keys(qe);Ke<sn.length;Ke++){var gn=sn[Ke];ke(qe[gn]||{})}},Ge=0,Ue=[Fe,Ve,Oe];Ge<Ue.length;Ge++){var Ye=Ue[Ge];$e(Ye)}}Ce.default=Be;function ke(Me){Me.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),Me.minCellHeight||(Me.minCellHeight=Me.rowHeight)):Me.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),Me.cellWidth||(Me.cellWidth=Me.columnWidth))}}),287:(function(Re,Ce,Be){Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.Column=Ce.Cell=Ce.Row=Ce.Table=void 0;var ke=Be(913),Me=Be(662),Fe=Be(200),Ve=(function(){function Ue(Ye,Qe){this.pageNumber=1,this.pageCount=1,this.id=Ye.id,this.settings=Ye.settings,this.styles=Ye.styles,this.hooks=Ye.hooks,this.columns=Qe.columns,this.head=Qe.head,this.body=Qe.body,this.foot=Qe.foot}return Ue.prototype.getHeadHeight=function(Ye){return this.head.reduce(function(Qe,rn){return Qe+rn.getMaxCellHeight(Ye)},0)},Ue.prototype.getFootHeight=function(Ye){return this.foot.reduce(function(Qe,rn){return Qe+rn.getMaxCellHeight(Ye)},0)},Ue.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},Ue.prototype.callCellHooks=function(Ye,Qe,rn,tn,an,qe){for(var Ke=0,sn=Qe;Ke<sn.length;Ke++){var gn=sn[Ke],He=new Me.CellHookData(Ye,this,rn,tn,an,qe),en=gn(He)===!1;if(rn.text=Array.isArray(rn.text)?rn.text:[rn.text],en)return!1}return!0},Ue.prototype.callEndPageHooks=function(Ye,Qe){Ye.applyStyles(Ye.userStyles);for(var rn=0,tn=this.hooks.didDrawPage;rn<tn.length;rn++){var an=tn[rn];an(new Me.HookData(Ye,this,Qe))}},Ue.prototype.callWillDrawPageHooks=function(Ye,Qe){for(var rn=0,tn=this.hooks.willDrawPage;rn<tn.length;rn++){var an=tn[rn];an(new Me.HookData(Ye,this,Qe))}},Ue.prototype.getWidth=function(Ye){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var Qe=this.columns.reduce(function(tn,an){return tn+an.wrappedWidth},0);return Qe}else{var rn=this.settings.margin;return Ye-rn.left-rn.right}},Ue})();Ce.Table=Ve;var Oe=(function(){function Ue(Ye,Qe,rn,tn,an){an===void 0&&(an=!1),this.height=0,this.raw=Ye,Ye instanceof ke.HtmlRowInput&&(this.raw=Ye._element,this.element=Ye._element),this.index=Qe,this.section=rn,this.cells=tn,this.spansMultiplePages=an}return Ue.prototype.getMaxCellHeight=function(Ye){var Qe=this;return Ye.reduce(function(rn,tn){var an;return Math.max(rn,((an=Qe.cells[tn.index])===null||an===void 0?void 0:an.height)||0)},0)},Ue.prototype.hasRowSpan=function(Ye){var Qe=this;return Ye.filter(function(rn){var tn=Qe.cells[rn.index];return tn?tn.rowSpan>1:!1}).length>0},Ue.prototype.canEntireRowFit=function(Ye,Qe){return this.getMaxCellHeight(Qe)<=Ye},Ue.prototype.getMinimumRowHeight=function(Ye,Qe){var rn=this;return Ye.reduce(function(tn,an){var qe=rn.cells[an.index];if(!qe)return 0;var Ke=Qe.getLineHeight(qe.styles.fontSize),sn=qe.padding("vertical"),gn=sn+Ke;return gn>tn?gn:tn},0)},Ue})();Ce.Row=Oe;var $e=(function(){function Ue(Ye,Qe,rn){var tn,an;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=Qe,this.section=rn,this.raw=Ye;var qe=Ye;Ye!=null&&typeof Ye=="object"&&!Array.isArray(Ye)?(this.rowSpan=Ye.rowSpan||1,this.colSpan=Ye.colSpan||1,qe=(an=(tn=Ye.content)!==null&&tn!==void 0?tn:Ye.title)!==null&&an!==void 0?an:Ye,Ye._element&&(this.raw=Ye._element)):(this.rowSpan=1,this.colSpan=1);var Ke=qe!=null?""+qe:"",sn=/\r\n|\r|\n/g;this.text=Ke.split(sn)}return Ue.prototype.getTextPos=function(){var Ye;if(this.styles.valign==="top")Ye=this.y+this.padding("top");else if(this.styles.valign==="bottom")Ye=this.y+this.height-this.padding("bottom");else{var Qe=this.height-this.padding("vertical");Ye=this.y+Qe/2+this.padding("top")}var rn;if(this.styles.halign==="right")rn=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var tn=this.width-this.padding("horizontal");rn=this.x+tn/2+this.padding("left")}else rn=this.x+this.padding("left");return{x:rn,y:Ye}},Ue.prototype.getContentHeight=function(Ye,Qe){Qe===void 0&&(Qe=1.15);var rn=Array.isArray(this.text)?this.text.length:1,tn=this.styles.fontSize/Ye*Qe,an=rn*tn+this.padding("vertical");return Math.max(an,this.styles.minCellHeight)},Ue.prototype.padding=function(Ye){var Qe=(0,Fe.parseSpacing)(this.styles.cellPadding,0);return Ye==="vertical"?Qe.top+Qe.bottom:Ye==="horizontal"?Qe.left+Qe.right:Qe[Ye]},Ue})();Ce.Cell=$e;var Ge=(function(){function Ue(Ye,Qe,rn){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=Ye,this.raw=Qe,this.index=rn}return Ue.prototype.getMaxCustomCellWidth=function(Ye){for(var Qe=0,rn=0,tn=Ye.allRows();rn<tn.length;rn++){var an=tn[rn],qe=an.cells[this.index];qe&&typeof qe.styles.cellWidth=="number"&&(Qe=Math.max(Qe,qe.styles.cellWidth))}return Qe},Ue})();Ce.Column=Ge}),360:(function(Re,Ce){Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.assign=void 0;function Be(ke,Me,Fe,Ve,Oe){if(ke==null)throw new TypeError("Cannot convert undefined or null to object");for(var $e=Object(ke),Ge=1;Ge<arguments.length;Ge++){var Ue=arguments[Ge];if(Ue!=null)for(var Ye in Ue)Object.prototype.hasOwnProperty.call(Ue,Ye)&&($e[Ye]=Ue[Ye])}return $e}Ce.assign=Be}),858:(function(Re,Ce,Be){Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.createTable=void 0;var ke=Be(323),Me=Be(287),Fe=Be(189),Ve=Be(913),Oe=Be(360);function $e(an,qe){var Ke=new ke.DocHandler(an),sn=Ge(qe,Ke.scaleFactor()),gn=new Me.Table(qe,sn);return(0,Fe.calculateWidths)(Ke,gn),Ke.applyStyles(Ke.userStyles),gn}Ce.createTable=$e;function Ge(an,qe){var Ke=an.content,sn=rn(Ke.columns);if(Ke.head.length===0){var gn=Ye(sn,"head");gn&&Ke.head.push(gn)}if(Ke.foot.length===0){var gn=Ye(sn,"foot");gn&&Ke.foot.push(gn)}var He=an.settings.theme,en=an.styles;return{columns:sn,head:Ue("head",Ke.head,sn,en,He,qe),body:Ue("body",Ke.body,sn,en,He,qe),foot:Ue("foot",Ke.foot,sn,en,He,qe)}}function Ue(an,qe,Ke,sn,gn,He){var en={},cn=qe.map(function(Sn,Tn){for(var hn=0,pn={},bn=0,fn=0,An=0,xn=Ke;An<xn.length;An++){var Je=xn[An];if(en[Je.index]==null||en[Je.index].left===0)if(fn===0){var We=void 0;Array.isArray(Sn)?We=Sn[Je.index-bn-hn]:We=Sn[Je.dataKey];var Ze={};typeof We=="object"&&!Array.isArray(We)&&(Ze=(We==null?void 0:We.styles)||{});var un=tn(an,Je,Tn,gn,sn,He,Ze),yn=new Me.Cell(We,un,an);pn[Je.dataKey]=yn,pn[Je.index]=yn,fn=yn.colSpan-1,en[Je.index]={left:yn.rowSpan-1,times:fn}}else fn--,bn++;else en[Je.index].left--,fn=en[Je.index].times,hn++}return new Me.Row(Sn,Tn,an,pn)});return cn}function Ye(an,qe){var Ke={};return an.forEach(function(sn){if(sn.raw!=null){var gn=Qe(qe,sn.raw);gn!=null&&(Ke[sn.dataKey]=gn)}}),Object.keys(Ke).length>0?Ke:null}function Qe(an,qe){if(an==="head"){if(typeof qe=="object")return qe.header||qe.title||null;if(typeof qe=="string"||typeof qe=="number")return qe}else if(an==="foot"&&typeof qe=="object")return qe.footer;return null}function rn(an){return an.map(function(qe,Ke){var sn,gn,He;return typeof qe=="object"?He=(gn=(sn=qe.dataKey)!==null&&sn!==void 0?sn:qe.key)!==null&&gn!==void 0?gn:Ke:He=Ke,new Me.Column(He,qe,Ke)})}function tn(an,qe,Ke,sn,gn,He,en){var cn=(0,Ve.getTheme)(sn),Sn;an==="head"?Sn=gn.headStyles:an==="body"?Sn=gn.bodyStyles:an==="foot"&&(Sn=gn.footStyles);var Tn=(0,Oe.assign)({},cn.table,cn[an],gn.styles,Sn),hn=gn.columnStyles[qe.dataKey]||gn.columnStyles[qe.index]||{},pn=an==="body"?hn:{},bn=an==="body"&&Ke%2===0?(0,Oe.assign)({},cn.alternateRow,gn.alternateRowStyles):{},fn=(0,Ve.defaultStyles)(He),An=(0,Oe.assign)({},fn,Tn,bn,pn);return(0,Oe.assign)(An,en)}}),49:(function(Re,Ce,Be){Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.addPage=Ce.drawTable=void 0;var ke=Be(200),Me=Be(287),Fe=Be(323),Ve=Be(360),Oe=Be(938),$e=Be(435);function Ge(hn,pn){var bn=pn.settings,fn=bn.startY,An=bn.margin,xn={x:An.left,y:fn},Je=pn.getHeadHeight(pn.columns)+pn.getFootHeight(pn.columns),We=fn+An.bottom+Je;if(bn.pageBreak==="avoid"){var Ze=pn.body,un=Ze.reduce(function(wn,kn){return wn+kn.height},0);We+=un}var yn=new Fe.DocHandler(hn);(bn.pageBreak==="always"||bn.startY!=null&&We>yn.pageSize().height)&&(Tn(yn),xn.y=An.top),pn.callWillDrawPageHooks(yn,xn);var _n=(0,Ve.assign)({},xn);pn.startPageNumber=yn.pageNumber(),bn.horizontalPageBreak?Ue(yn,pn,_n,xn):(yn.applyStyles(yn.userStyles),(bn.showHead==="firstPage"||bn.showHead==="everyPage")&&pn.head.forEach(function(wn){return gn(yn,pn,wn,xn,pn.columns)}),yn.applyStyles(yn.userStyles),pn.body.forEach(function(wn,kn){var $n=kn===pn.body.length-1;sn(yn,pn,wn,$n,_n,xn,pn.columns)}),yn.applyStyles(yn.userStyles),(bn.showFoot==="lastPage"||bn.showFoot==="everyPage")&&pn.foot.forEach(function(wn){return gn(yn,pn,wn,xn,pn.columns)})),(0,ke.addTableBorder)(yn,pn,_n,xn),pn.callEndPageHooks(yn,xn),pn.finalY=xn.y,hn.lastAutoTable=pn,hn.previousAutoTable=pn,hn.autoTable&&(hn.autoTable.previous=pn),yn.applyStyles(yn.userStyles)}Ce.drawTable=Ge;function Ue(hn,pn,bn,fn){var An=(0,$e.calculateAllColumnsCanFitInPage)(hn,pn),xn=pn.settings;if(xn.horizontalPageBreakBehaviour==="afterAllRows")An.forEach(function(un,yn){hn.applyStyles(hn.userStyles),yn>0?Sn(hn,pn,bn,fn,un.columns,!0):Ye(hn,pn,fn,un.columns),Qe(hn,pn,bn,fn,un.columns),tn(hn,pn,fn,un.columns)});else for(var Je=-1,We=An[0],Ze=function(){var un=Je;if(We){hn.applyStyles(hn.userStyles);var yn=We.columns;Je>=0?Sn(hn,pn,bn,fn,yn,!0):Ye(hn,pn,fn,yn),un=rn(hn,pn,Je+1,fn,yn),tn(hn,pn,fn,yn)}var _n=un-Je;An.slice(1).forEach(function(wn){hn.applyStyles(hn.userStyles),Sn(hn,pn,bn,fn,wn.columns,!0),rn(hn,pn,Je+1,fn,wn.columns,_n),tn(hn,pn,fn,wn.columns)}),Je=un};Je<pn.body.length-1;)Ze()}function Ye(hn,pn,bn,fn){var An=pn.settings;hn.applyStyles(hn.userStyles),(An.showHead==="firstPage"||An.showHead==="everyPage")&&pn.head.forEach(function(xn){return gn(hn,pn,xn,bn,fn)})}function Qe(hn,pn,bn,fn,An){hn.applyStyles(hn.userStyles),pn.body.forEach(function(xn,Je){var We=Je===pn.body.length-1;sn(hn,pn,xn,We,bn,fn,An)})}function rn(hn,pn,bn,fn,An,xn){hn.applyStyles(hn.userStyles),xn=xn??pn.body.length;var Je=Math.min(bn+xn,pn.body.length),We=-1;return pn.body.slice(bn,Je).forEach(function(Ze,un){var yn=bn+un===pn.body.length-1,_n=cn(hn,pn,yn,fn);Ze.canEntireRowFit(_n,An)&&(gn(hn,pn,Ze,fn,An),We=bn+un)}),We}function tn(hn,pn,bn,fn){var An=pn.settings;hn.applyStyles(hn.userStyles),(An.showFoot==="lastPage"||An.showFoot==="everyPage")&&pn.foot.forEach(function(xn){return gn(hn,pn,xn,bn,fn)})}function an(hn,pn,bn){var fn=bn.getLineHeight(hn.styles.fontSize),An=hn.padding("vertical"),xn=Math.floor((pn-An)/fn);return Math.max(0,xn)}function qe(hn,pn,bn,fn){var An={};hn.spansMultiplePages=!0,hn.height=0;for(var xn=0,Je=0,We=bn.columns;Je<We.length;Je++){var Ze=We[Je],un=hn.cells[Ze.index];if(un){Array.isArray(un.text)||(un.text=[un.text]);var yn=new Me.Cell(un.raw,un.styles,un.section);yn=(0,Ve.assign)(yn,un),yn.text=[];var _n=an(un,pn,fn);un.text.length>_n&&(yn.text=un.text.splice(_n,un.text.length));var wn=fn.scaleFactor(),kn=fn.getLineHeightFactor();un.contentHeight=un.getContentHeight(wn,kn),un.contentHeight>=pn&&(un.contentHeight=pn,yn.styles.minCellHeight-=pn),un.contentHeight>hn.height&&(hn.height=un.contentHeight),yn.contentHeight=yn.getContentHeight(wn,kn),yn.contentHeight>xn&&(xn=yn.contentHeight),An[Ze.index]=yn}}var $n=new Me.Row(hn.raw,-1,hn.section,An,!0);$n.height=xn;for(var Ln=0,Gn=bn.columns;Ln<Gn.length;Ln++){var Ze=Gn[Ln],yn=$n.cells[Ze.index];yn&&(yn.height=$n.height);var un=hn.cells[Ze.index];un&&(un.height=hn.height)}return $n}function Ke(hn,pn,bn,fn){var An=hn.pageSize().height,xn=fn.settings.margin,Je=xn.top+xn.bottom,We=An-Je;pn.section==="body"&&(We-=fn.getHeadHeight(fn.columns)+fn.getFootHeight(fn.columns));var Ze=pn.getMinimumRowHeight(fn.columns,hn),un=Ze<bn;if(Ze>We)return console.error("Will not be able to print row ".concat(pn.index," correctly since it's minimum height is larger than page height")),!0;if(!un)return!1;var yn=pn.hasRowSpan(fn.columns),_n=pn.getMaxCellHeight(fn.columns)>We;return _n?(yn&&console.error("The content of row ".concat(pn.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(yn||fn.settings.rowPageBreak==="avoid")}function sn(hn,pn,bn,fn,An,xn,Je){var We=cn(hn,pn,fn,xn);if(bn.canEntireRowFit(We,Je))gn(hn,pn,bn,xn,Je);else if(Ke(hn,bn,We,pn)){var Ze=qe(bn,We,pn,hn);gn(hn,pn,bn,xn,Je),Sn(hn,pn,An,xn,Je),sn(hn,pn,Ze,fn,An,xn,Je)}else Sn(hn,pn,An,xn,Je),sn(hn,pn,bn,fn,An,xn,Je)}function gn(hn,pn,bn,fn,An){fn.x=pn.settings.margin.left;for(var xn=0,Je=An;xn<Je.length;xn++){var We=Je[xn],Ze=bn.cells[We.index];if(!Ze){fn.x+=We.width;continue}hn.applyStyles(Ze.styles),Ze.x=fn.x,Ze.y=fn.y;var un=pn.callCellHooks(hn,pn.hooks.willDrawCell,Ze,bn,We,fn);if(un===!1){fn.x+=We.width;continue}He(hn,Ze,fn);var yn=Ze.getTextPos();(0,Oe.default)(Ze.text,yn.x,yn.y,{halign:Ze.styles.halign,valign:Ze.styles.valign,maxWidth:Math.ceil(Ze.width-Ze.padding("left")-Ze.padding("right"))},hn.getDocument()),pn.callCellHooks(hn,pn.hooks.didDrawCell,Ze,bn,We,fn),fn.x+=We.width}fn.y+=bn.height}function He(hn,pn,bn){var fn=pn.styles;if(hn.getDocument().setFillColor(hn.getDocument().getFillColor()),typeof fn.lineWidth=="number"){var An=(0,ke.getFillStyle)(fn.lineWidth,fn.fillColor);An&&hn.rect(pn.x,bn.y,pn.width,pn.height,An)}else typeof fn.lineWidth=="object"&&(fn.fillColor&&hn.rect(pn.x,bn.y,pn.width,pn.height,"F"),en(hn,pn,bn,fn.lineWidth))}function en(hn,pn,bn,fn){var An,xn,Je,We;fn.top&&(An=bn.x,xn=bn.y,Je=bn.x+pn.width,We=bn.y,fn.right&&(Je+=.5*fn.right),fn.left&&(An-=.5*fn.left),Ze(fn.top,An,xn,Je,We)),fn.bottom&&(An=bn.x,xn=bn.y+pn.height,Je=bn.x+pn.width,We=bn.y+pn.height,fn.right&&(Je+=.5*fn.right),fn.left&&(An-=.5*fn.left),Ze(fn.bottom,An,xn,Je,We)),fn.left&&(An=bn.x,xn=bn.y,Je=bn.x,We=bn.y+pn.height,fn.top&&(xn-=.5*fn.top),fn.bottom&&(We+=.5*fn.bottom),Ze(fn.left,An,xn,Je,We)),fn.right&&(An=bn.x+pn.width,xn=bn.y,Je=bn.x+pn.width,We=bn.y+pn.height,fn.top&&(xn-=.5*fn.top),fn.bottom&&(We+=.5*fn.bottom),Ze(fn.right,An,xn,Je,We));function Ze(un,yn,_n,wn,kn){hn.getDocument().setLineWidth(un),hn.getDocument().line(yn,_n,wn,kn,"S")}}function cn(hn,pn,bn,fn){var An=pn.settings.margin.bottom,xn=pn.settings.showFoot;return(xn==="everyPage"||xn==="lastPage"&&bn)&&(An+=pn.getFootHeight(pn.columns)),hn.pageSize().height-fn.y-An}function Sn(hn,pn,bn,fn,An,xn){An===void 0&&(An=[]),xn===void 0&&(xn=!1),hn.applyStyles(hn.userStyles),pn.settings.showFoot==="everyPage"&&!xn&&pn.foot.forEach(function(We){return gn(hn,pn,We,fn,An)}),pn.callEndPageHooks(hn,fn);var Je=pn.settings.margin;(0,ke.addTableBorder)(hn,pn,bn,fn),Tn(hn),pn.pageNumber++,pn.pageCount++,fn.x=Je.left,fn.y=Je.top,bn.y=Je.top,pn.callWillDrawPageHooks(hn,fn),pn.settings.showHead==="everyPage"&&(pn.head.forEach(function(We){return gn(hn,pn,We,fn,An)}),hn.applyStyles(hn.userStyles))}Ce.addPage=Sn;function Tn(hn){var pn=hn.pageNumber();hn.setPage(pn+1);var bn=hn.pageNumber();return bn===pn?(hn.addPage(),!0):!1}}),435:(function(Re,Ce,Be){Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.calculateAllColumnsCanFitInPage=void 0;var ke=Be(200);function Me(Ve,Oe,$e){var Ge;$e===void 0&&($e={});var Ue=(0,ke.getPageAvailableWidth)(Ve,Oe),Ye=new Map,Qe=[],rn=[],tn=[];Oe.settings.horizontalPageBreakRepeat,Array.isArray(Oe.settings.horizontalPageBreakRepeat)?tn=Oe.settings.horizontalPageBreakRepeat:(typeof Oe.settings.horizontalPageBreakRepeat=="string"||typeof Oe.settings.horizontalPageBreakRepeat=="number")&&(tn=[Oe.settings.horizontalPageBreakRepeat]),tn.forEach(function(sn){var gn=Oe.columns.find(function(He){return He.dataKey===sn||He.index===sn});gn&&!Ye.has(gn.index)&&(Ye.set(gn.index,!0),Qe.push(gn.index),rn.push(Oe.columns[gn.index]),Ue-=gn.wrappedWidth)});for(var an=!0,qe=(Ge=$e==null?void 0:$e.start)!==null&&Ge!==void 0?Ge:0;qe<Oe.columns.length;){if(Ye.has(qe)){qe++;continue}var Ke=Oe.columns[qe].wrappedWidth;if(an||Ue>=Ke)an=!1,Qe.push(qe),rn.push(Oe.columns[qe]),Ue-=Ke;else break;qe++}return{colIndexes:Qe,columns:rn,lastIndex:qe-1}}function Fe(Ve,Oe){for(var $e=[],Ge=0;Ge<Oe.columns.length;Ge++){var Ue=Me(Ve,Oe,{start:Ge});Ue.columns.length&&($e.push(Ue),Ge=Ue.lastIndex)}return $e}Ce.calculateAllColumnsCanFitInPage=Fe}),189:(function(Re,Ce,Be){Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.ellipsize=Ce.resizeColumns=Ce.calculateWidths=void 0;var ke=Be(200);function Me(Qe,rn){Fe(Qe,rn);var tn=[],an=0;rn.columns.forEach(function(Ke){var sn=Ke.getMaxCustomCellWidth(rn);sn?Ke.width=sn:(Ke.width=Ke.wrappedWidth,tn.push(Ke)),an+=Ke.width});var qe=rn.getWidth(Qe.pageSize().width)-an;qe&&(qe=Ve(tn,qe,function(Ke){return Math.max(Ke.minReadableWidth,Ke.minWidth)})),qe&&(qe=Ve(tn,qe,function(Ke){return Ke.minWidth})),qe=Math.abs(qe),!rn.settings.horizontalPageBreak&&qe>.1/Qe.scaleFactor()&&(qe=qe<1?qe:Math.round(qe),console.warn("Of the table content, ".concat(qe," units width could not fit page"))),$e(rn),Ge(rn,Qe),Oe(rn)}Ce.calculateWidths=Me;function Fe(Qe,rn){var tn=Qe.scaleFactor(),an=rn.settings.horizontalPageBreak,qe=(0,ke.getPageAvailableWidth)(Qe,rn);rn.allRows().forEach(function(Ke){for(var sn=0,gn=rn.columns;sn<gn.length;sn++){var He=gn[sn],en=Ke.cells[He.index];if(en){var cn=rn.hooks.didParseCell;rn.callCellHooks(Qe,cn,en,Ke,He,null);var Sn=en.padding("horizontal");en.contentWidth=(0,ke.getStringWidth)(en.text,en.styles,Qe)+Sn;var Tn=(0,ke.getStringWidth)(en.text.join(" ").split(/\s+/),en.styles,Qe);if(en.minReadableWidth=Tn+en.padding("horizontal"),typeof en.styles.cellWidth=="number")en.minWidth=en.styles.cellWidth,en.wrappedWidth=en.styles.cellWidth;else if(en.styles.cellWidth==="wrap"||an===!0)en.contentWidth>qe?(en.minWidth=qe,en.wrappedWidth=qe):(en.minWidth=en.contentWidth,en.wrappedWidth=en.contentWidth);else{var hn=10/tn;en.minWidth=en.styles.minCellWidth||hn,en.wrappedWidth=en.contentWidth,en.minWidth>en.wrappedWidth&&(en.wrappedWidth=en.minWidth)}}}}),rn.allRows().forEach(function(Ke){for(var sn=0,gn=rn.columns;sn<gn.length;sn++){var He=gn[sn],en=Ke.cells[He.index];if(en&&en.colSpan===1)He.wrappedWidth=Math.max(He.wrappedWidth,en.wrappedWidth),He.minWidth=Math.max(He.minWidth,en.minWidth),He.minReadableWidth=Math.max(He.minReadableWidth,en.minReadableWidth);else{var cn=rn.styles.columnStyles[He.dataKey]||rn.styles.columnStyles[He.index]||{},Sn=cn.cellWidth||cn.minCellWidth;Sn&&typeof Sn=="number"&&(He.minWidth=Sn,He.wrappedWidth=Sn)}en&&(en.colSpan>1&&!He.minWidth&&(He.minWidth=en.minWidth),en.colSpan>1&&!He.wrappedWidth&&(He.wrappedWidth=en.minWidth))}})}function Ve(Qe,rn,tn){for(var an=rn,qe=Qe.reduce(function(hn,pn){return hn+pn.wrappedWidth},0),Ke=0;Ke<Qe.length;Ke++){var sn=Qe[Ke],gn=sn.wrappedWidth/qe,He=an*gn,en=sn.width+He,cn=tn(sn),Sn=en<cn?cn:en;rn-=Sn-sn.width,sn.width=Sn}if(rn=Math.round(rn*1e10)/1e10,rn){var Tn=Qe.filter(function(hn){return rn<0?hn.width>tn(hn):!0});Tn.length&&(rn=Ve(Tn,rn,tn))}return rn}Ce.resizeColumns=Ve;function Oe(Qe){for(var rn={},tn=1,an=Qe.allRows(),qe=0;qe<an.length;qe++)for(var Ke=an[qe],sn=0,gn=Qe.columns;sn<gn.length;sn++){var He=gn[sn],en=rn[He.index];if(tn>1)tn--,delete Ke.cells[He.index];else if(en)en.cell.height+=Ke.height,tn=en.cell.colSpan,delete Ke.cells[He.index],en.left--,en.left<=1&&delete rn[He.index];else{var cn=Ke.cells[He.index];if(!cn)continue;if(cn.height=Ke.height,cn.rowSpan>1){var Sn=an.length-qe,Tn=cn.rowSpan>Sn?Sn:cn.rowSpan;rn[He.index]={cell:cn,left:Tn,row:Ke}}}}}function $e(Qe){for(var rn=Qe.allRows(),tn=0;tn<rn.length;tn++)for(var an=rn[tn],qe=null,Ke=0,sn=0,gn=0;gn<Qe.columns.length;gn++){var He=Qe.columns[gn];if(sn-=1,sn>1&&Qe.columns[gn+1])Ke+=He.width,delete an.cells[He.index];else if(qe){var en=qe;delete an.cells[He.index],qe=null,en.width=He.width+Ke}else{var en=an.cells[He.index];if(!en)continue;if(sn=en.colSpan,Ke=0,en.colSpan>1){qe=en,Ke+=He.width;continue}en.width=He.width+Ke}}}function Ge(Qe,rn){for(var tn={count:0,height:0},an=0,qe=Qe.allRows();an<qe.length;an++){for(var Ke=qe[an],sn=0,gn=Qe.columns;sn<gn.length;sn++){var He=gn[sn],en=Ke.cells[He.index];if(en){rn.applyStyles(en.styles,!0);var cn=en.width-en.padding("horizontal");if(en.styles.overflow==="linebreak")en.text=rn.splitTextToSize(en.text,cn+1/rn.scaleFactor(),{fontSize:en.styles.fontSize});else if(en.styles.overflow==="ellipsize")en.text=Ue(en.text,cn,en.styles,rn,"...");else if(en.styles.overflow==="hidden")en.text=Ue(en.text,cn,en.styles,rn,"");else if(typeof en.styles.overflow=="function"){var Sn=en.styles.overflow(en.text,cn);typeof Sn=="string"?en.text=[Sn]:en.text=Sn}en.contentHeight=en.getContentHeight(rn.scaleFactor(),rn.getLineHeightFactor());var Tn=en.contentHeight/en.rowSpan;en.rowSpan>1&&tn.count*tn.height<Tn*en.rowSpan?tn={height:Tn,count:en.rowSpan}:tn&&tn.count>0&&tn.height>Tn&&(Tn=tn.height),Tn>Ke.height&&(Ke.height=Tn)}}tn.count--}}function Ue(Qe,rn,tn,an,qe){return Qe.map(function(Ke){return Ye(Ke,rn,tn,an,qe)})}Ce.ellipsize=Ue;function Ye(Qe,rn,tn,an,qe){var Ke=1e4*an.scaleFactor();if(rn=Math.ceil(rn*Ke)/Ke,rn>=(0,ke.getStringWidth)(Qe,tn,an))return Qe;for(;rn<(0,ke.getStringWidth)(Qe+qe,tn,an)&&!(Qe.length<=1);)Qe=Qe.substring(0,Qe.length-1);return Qe.trim()+qe}}),84:(function(Re){if(typeof r>"u"){var Ce=new Error("Cannot find module 'undefined'");throw Ce.code="MODULE_NOT_FOUND",Ce}Re.exports=r})},Ee={};function Ae(Re){var Ce=Ee[Re];if(Ce!==void 0)return Ce.exports;var Be=Ee[Re]={exports:{}};return xe[Re].call(Be.exports,Be,Be.exports,Ae),Be.exports}var Pe={};return(function(){var Re=Pe;Object.defineProperty(Re,"__esModule",{value:!0}),Re.Cell=Re.Column=Re.Row=Re.Table=Re.CellHookData=Re.__drawTable=Re.__createTable=Re.applyPlugin=void 0;var Ce=Ae(790),Be=Ae(587),ke=Ae(49),Me=Ae(858),Fe=Ae(287);Object.defineProperty(Re,"Table",{enumerable:!0,get:function(){return Fe.Table}});var Ve=Ae(662);Object.defineProperty(Re,"CellHookData",{enumerable:!0,get:function(){return Ve.CellHookData}});var Oe=Ae(287);Object.defineProperty(Re,"Cell",{enumerable:!0,get:function(){return Oe.Cell}}),Object.defineProperty(Re,"Column",{enumerable:!0,get:function(){return Oe.Column}}),Object.defineProperty(Re,"Row",{enumerable:!0,get:function(){return Oe.Row}});function $e(rn){(0,Ce.default)(rn)}Re.applyPlugin=$e;function Ge(rn,tn){var an=(0,Be.parseInput)(rn,tn),qe=(0,Me.createTable)(rn,an);(0,ke.drawTable)(rn,qe)}function Ue(rn,tn){var an=(0,Be.parseInput)(rn,tn);return(0,Me.createTable)(rn,an)}Re.__createTable=Ue;function Ye(rn,tn){(0,ke.drawTable)(rn,tn)}Re.__drawTable=Ye;try{var Qe=Ae(84);Qe.jsPDF&&(Qe=Qe.jsPDF),$e(Qe)}catch{}Re.default=Ge})(),Pe})()})})(jspdf_plugin_autotable$1)),jspdf_plugin_autotable$1.exports}var jspdf_plugin_autotableExports=requireJspdf_plugin_autotable();const autoTable=getDefaultExportFromCjs(jspdf_plugin_autotableExports),EPS_WARNING=.05,EPS_BLOCKER=.5,isPresent$1=t=>t==null?!1:typeof t=="string"?t.trim().length>0:typeof t=="number"?Number.isFinite(t):!0,getRequiredFields=t=>{var r;const e=((r=t==null?void 0:t.ocrConfig)==null?void 0:r.required_fields)||[];return e.length>0?e:["belegDatum","bruttoBetrag","lieferantName"]},safeDocLabel=t=>({docId:t.id,fileName:t.fileName||t.id}),runExportPreflight=(t,e)=>{const r=[],xe=[],Ee=getRequiredFields(e),Ae=Pe=>{(Pe.level==="blocker"?r:xe).push(Pe)};for(const Pe of t){const{docId:Re,fileName:Ce}=safeDocLabel(Pe);if(Pe.status===DocumentStatus.PROCESSING){Ae({level:"blocker",docId:Re,fileName:Ce,message:"Status ist PROCESSING (noch nicht fertig verarbeitet)."});continue}Pe.status===DocumentStatus.DUPLICATE&&Ae({level:"blocker",docId:Re,fileName:Ce,message:"Status ist DUPLICATE (Duplikat noch nicht bereinigt)."}),Pe.status===DocumentStatus.ERROR&&Ae({level:"blocker",docId:Re,fileName:Ce,message:"Status ist ERROR (OCR fehlgeschlagen oder Daten unvollstndig)."}),Pe.status===DocumentStatus.REVIEW_NEEDED&&Ae({level:"blocker",docId:Re,fileName:Ce,message:"Status ist REVIEW_NEEDED (Beleg muss geprft/korrigiert werden)."});const Be=Pe.data;if(!Be){Ae({level:"blocker",docId:Re,fileName:Ce,message:"Keine extrahierten Daten vorhanden."});continue}for(const $e of Ee)isPresent$1(Be[$e])||Ae({level:"blocker",docId:Re,fileName:Ce,message:`Pflichtfeld fehlt/leer: ${String($e)}`});isPresent$1(Be.belegDatum)&&!/^\d{4}-\d{2}-\d{2}$/.test(String(Be.belegDatum))&&Ae({level:"blocker",docId:Re,fileName:Ce,message:"belegDatum ist nicht im Format YYYY-MM-DD (ISO)."});const ke=Number(Be.bruttoBetrag),Me=Number(Be.nettoBetrag),Fe=Number(Be.mwstBetrag0||0),Ve=Number(Be.mwstBetrag7||0),Oe=Number(Be.mwstBetrag19||0);if(Number.isFinite(ke)&&Number.isFinite(Me)){const $e=Me+Fe+Ve+Oe,Ge=Math.abs($e-ke);Ge>EPS_BLOCKER?Ae({level:"blocker",docId:Re,fileName:Ce,message:`Summenprfung: Netto+MwSt=${$e.toFixed(2)} weicht von Brutto=${ke.toFixed(2)} ab (=${Ge.toFixed(2)}).`}):Ge>EPS_WARNING&&Ae({level:"warning",docId:Re,fileName:Ce,message:`Summenprfung: kleine Abweichung (=${Ge.toFixed(2)}).`})}}return{blockers:r,warnings:xe,totalDocs:t.length}},formatPreflightForDialog=t=>{const r=t.blockers.slice(0,5).map(Re=>`- ${Re.fileName}: ${Re.message}`),xe=t.warnings.slice(0,5).map(Re=>`- ${Re.fileName}: ${Re.message}`),Ee=t.blockers.length>5?`
 und ${t.blockers.length-5} weitere.`:"",Ae=t.warnings.length>5?`
 und ${t.warnings.length-5} weitere.`:"",Pe=[];return Pe.push(`Belege geprft: ${t.totalDocs}`),t.blockers.length>0&&(Pe.push(`
BLOCKER (${t.blockers.length})`),Pe.push(...r),Pe.push(Ee)),t.warnings.length>0&&(Pe.push(`
WARNUNGEN (${t.warnings.length})`),Pe.push(...xe),Pe.push(Ae)),{title:t.blockers.length>0?"Export blockiert (Preflight)":t.warnings.length>0?"Export mit Warnungen (Preflight)":"Export OK (Preflight)",body:Pe.filter(Boolean).join(`
`)}},EXTF_HEADER1_TEMPLATE_FIELDS=["EXTF","700","21","Buchungsstapel","13","20180306102500000","","XY","Chief Accounting Officer","","1001","456","20180101","4","20180201","20180228","Beispiel-Buchungen","","1","","0","EUR","","","","","","","","",""],EXTF_COLUMN_HEADERS=["Umsatz (ohne Soll/Haben-Kz)","Soll/Haben-Kennzeichen","WKZ Umsatz","Kurs","Basisumsatz","WKZ Basisumsatz","Konto","Gegenkonto (ohne BU-Schlssel)","BU-Schlssel","Belegdatum","Belegfeld 1","Belegfeld 2","Skonto","Buchungstext","Postensperre","Diverse Adressnummer","Geschftspartnerbank","Sachverhalt","Zinssperre","Beleglink","Beleginfo - Art 1","Beleginfo - Inhalt 1","Beleginfo - Art 2","Beleginfo - Inhalt 2","Beleginfo - Art 3","Beleginfo - Inhalt 3","Beleginfo - Art 4","Beleginfo - Inhalt 4","Beleginfo - Art 5","Beleginfo - Inhalt 5","Beleginfo - Art 6","Beleginfo - Inhalt 6","Beleginfo - Art 7","Beleginfo - Inhalt 7","Beleginfo - Art 8","Beleginfo - Inhalt 8","KOST1 - Kostenstelle","KOST2 - Kostenstelle","Kost Menge","EU-Land u. USt-IdNr.","EU-Steuersatz","Abw. Versteuerungsart","Sachverhalt L+L","Funktionsergnzung L+L","BU 49 Hauptfunktionstyp","BU 49 Hauptfunktionsnummer","BU 49 Funktionsergnzung","Zusatzinformation - Art 1","Zusatzinformation - Inhalt 1","Zusatzinformation - Art 2","Zusatzinformation - Inhalt 2","Zusatzinformation - Art 3","Zusatzinformation - Inhalt 3","Zusatzinformation - Art 4","Zusatzinformation - Inhalt 4","Zusatzinformation - Art 5","Zusatzinformation - Inhalt 5","Zusatzinformation - Art 6","Zusatzinformation - Inhalt 6","Zusatzinformation - Art 7","Zusatzinformation - Inhalt 7","Zusatzinformation - Art 8","Zusatzinformation - Inhalt 8","Zusatzinformation - Art 9","Zusatzinformation - Inhalt 9","Zusatzinformation - Art 10","Zusatzinformation - Inhalt 10","Zusatzinformation - Art 11","Zusatzinformation - Inhalt 11","Zusatzinformation - Art 12","Zusatzinformation - Inhalt 12","Zusatzinformation - Art 13","Zusatzinformation - Inhalt 13","Zusatzinformation - Art 14","Zusatzinformation - Inhalt 14","Zusatzinformation - Art 15","Zusatzinformation - Inhalt 15","Zusatzinformation - Art 16","Zusatzinformation - Inhalt 16","Zusatzinformation - Art 17","Zusatzinformation - Inhalt 17","Zusatzinformation - Art 18","Zusatzinformation - Inhalt 18","Zusatzinformation - Art 19","Zusatzinformation - Inhalt 19","Zusatzinformation - Art 20","Zusatzinformation - Inhalt 20","Stck","Gewicht","Zahlweise","Forderungsart","Veranlagungsjahr","Zugeordnete Flligkeit","Skontotyp","Auftragsnummer","Buchungstyp","USt-Schlssel (Anzahlungen)","EU-Mitgliedstaat (Anzahlungen)","Sachverhalt L+L (Anzahlungen)","EU-Steuersatz (Anzahlungen)","Erlskonto (Anzahlungen)","Herkunft-Kz","Leerfeld","KOST-Datum","SEPA-Mandatsreferenz","Skontosperre","Gesellschaftername","Beteiligtennummer","Identifikationsnummer","Zeichnernummer","Postensperre bis","Bezeichnung","Kennzeichen","Festschreibung","Leistungsdatum","Datum Zuord.","Flligkeit","Generalumkehr","Steuersatz","Land","Abrechnungsreferent","BVV-Position","EU-Mitgliedstaat u. UStID (Ursprung)","EU-Steuersatz (Ursprung)","Abw. Skontokonto"],isIsoDate$1=t=>typeof t=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(t),toYyyymmdd=t=>t.replace(/-/g,""),toDdmm=t=>{const e=t.match(/^(\d{4})-(\d{2})-(\d{2})$/);return e?`${e[3]}${e[2]}`:""},nowDatevTimestamp=()=>{const t=new Date,e=(r,xe)=>String(r).padStart(xe,"0");return`${t.getFullYear()}${e(t.getMonth()+1,2)}${e(t.getDate(),2)}${e(t.getHours(),2)}${e(t.getMinutes(),2)}${e(t.getSeconds(),2)}00000`},quoteIfNeeded=t=>{if(t==null)return"";const e=String(t);return e===""?"":/^-?\d+(,\d{1,2})?$/.test(e)?e:`"${e.replace(/"/g,'""')}"`},formatAmount=t=>{const e=typeof t=="number"?t:Number(t);return Number.isFinite(e)?e.toFixed(2).replace(".",","):""},sumToBrutto=(t,e,r,xe)=>{const Ee=typeof t=="number"?t:Number(t);if(!Number.isFinite(Ee))return;const Ae=Number(e||0),Pe=Number(r||0),Re=Number(xe||0);if([Ae,Pe,Re].every(Number.isFinite))return Ee+Ae+Pe+Re},DATEV_BANK_KONTO="1200",isBankAccount=t=>t===DATEV_BANK_KONTO,getDatevConfig=t=>t==null?void 0:t.datevConfig;function runDatevExportPreflight(t,e){var Ce,Be,ke,Me,Fe;const r=runExportPreflight(t,e),xe=[...r.blockers],Ee=[...r.warnings],Ae=(Ve,Oe)=>{(Ve==="blocker"?xe:Ee).push({level:Ve,message:Oe})},Pe=getDatevConfig(e);if(!Pe)return Ae("blocker","DATEV-Konfiguration fehlt (Einstellungen  DATEV Export)."),{blockers:xe,warnings:Ee,totalDocs:t.length};(Ce=Pe.beraterNr)!=null&&Ce.trim()||Ae("blocker","DATEV: Berater-Nr. ist leer."),(Be=Pe.mandantNr)!=null&&Be.trim()||Ae("blocker","DATEV: Mandant-Nr. ist leer."),(ke=Pe.wirtschaftsjahrBeginn)!=null&&ke.trim()||Ae("blocker","DATEV: Wirtschaftsjahr-Beginn ist leer (YYYYMMDD)."),Pe.beraterNr&&!/^\d+$/.test(Pe.beraterNr.trim())&&Ae("blocker","DATEV: Berater-Nr. muss numerisch sein."),Pe.mandantNr&&!/^\d+$/.test(Pe.mandantNr.trim())&&Ae("blocker","DATEV: Mandant-Nr. muss numerisch sein."),Pe.wirtschaftsjahrBeginn&&!/^\d{8}$/.test(Pe.wirtschaftsjahrBeginn.trim())&&Ae("blocker","DATEV: Wirtschaftsjahr-Beginn muss das Format YYYYMMDD haben.");const Re=new Set;for(const Ve of t){if(Ve.status===DocumentStatus.DUPLICATE)continue;const Oe=(Me=Ve.data)==null?void 0:Me.steuerkategorie;Oe&&Re.add(Oe)}for(const Ve of Re){const Oe=(Pe.taxCategoryToBuKey||{})[Ve];(!Oe||!Oe.trim())&&Ae("blocker",`DATEV: BU-Schlssel Mapping fehlt fr Steuerkategorie ${Ve}.`)}(Fe=Pe.waehrung)!=null&&Fe.trim()||Ae("warning","DATEV: Whrung ist leer (Standard: EUR).");for(const Ve of t){if(Ve.status===DocumentStatus.DUPLICATE)continue;const Oe=Ve.data;if(!Oe)continue;const $e=Oe.sollKonto||"",Ge=Oe.habenKonto||"",Ue=Pe.sachkontenlaenge;if(Ue&&/^\d+$/.test($e)&&$e.length!==Ue){Ae("warning",`DATEV: Soll-Konto ${$e} passt nicht zur Sachkontenlnge ${Ue}.`);break}if(Ue&&/^\d+$/.test(Ge)&&Ge.length!==Ue){Ae("warning",`DATEV: Haben-Konto ${Ge} passt nicht zur Sachkontenlnge ${Ue}.`);break}}return{blockers:xe,warnings:Ee,totalDocs:t.length}}function generateDatevExtfBuchungsstapelCsv(t,e,r){const xe=getDatevConfig(e);if(!xe)throw new Error("DATEV-Konfiguration fehlt.");const Ee=t.filter(sn=>sn.status!==DocumentStatus.DUPLICATE),Ae=Ee.map(sn=>{var gn;return(gn=sn.data)==null?void 0:gn.belegDatum}).filter(isIsoDate$1),Pe=Ae.length?Ae.reduce((sn,gn)=>sn<gn?sn:gn):new Date().toISOString().slice(0,10),Re=Ae.length?Ae.reduce((sn,gn)=>sn>gn?sn:gn):new Date().toISOString().slice(0,10),Ce=[...EXTF_HEADER1_TEMPLATE_FIELDS];Ce[5]=nowDatevTimestamp(),Ce[7]="ZOE",Ce[8]="ZOE Solar Accounting OCR",Ce[10]=xe.beraterNr.trim(),Ce[11]=xe.mandantNr.trim(),Ce[12]=xe.wirtschaftsjahrBeginn.trim(),Ce[14]=toYyyymmdd(Pe),Ce[15]=toYyyymmdd(Re),Ce[16]=xe.stapelBezeichnung||"Buchungsstapel",Ce[21]=xe.waehrung||"EUR";const Be=new Map;EXTF_COLUMN_HEADERS.forEach((sn,gn)=>Be.set(sn.trim(),gn));const ke=sn=>{const gn=Be.get(sn);if(gn===void 0)throw new Error(`DATEV-Spalte nicht gefunden: ${sn}`);return gn},Me=ke("Umsatz (ohne Soll/Haben-Kz)"),Fe=ke("Soll/Haben-Kennzeichen"),Ve=ke("WKZ Umsatz"),Oe=ke("Konto"),$e=ke("Gegenkonto (ohne BU-Schlssel)"),Ge=ke("BU-Schlssel"),Ue=ke("Belegdatum"),Ye=ke("Belegfeld 1"),Qe=ke("Belegfeld 2"),rn=ke("Buchungstext"),tn=ke("Herkunft-Kz"),an=[];an.push(Ce.map(quoteIfNeeded).join(";")),an.push(EXTF_COLUMN_HEADERS.join(";"));for(const sn of Ee){const gn=sn.data;if(!gn)continue;const He=new Array(EXTF_COLUMN_HEADERS.length).fill(""),en=gn.steuerkategorie||"",cn=en&&(xe.taxCategoryToBuKey||{})[en]||"",Sn=gn.sollKonto||"",Tn=gn.habenKonto||"",hn=isBankAccount(Sn),pn=isBankAccount(Tn);let bn=Tn,fn=Sn,An="H";hn&&!pn?(bn=Sn,fn=Tn,An="S"):pn&&!hn&&(bn=Tn,fn=Sn,An="H");const xn=Number(gn.bruttoBetrag),Je=Number.isFinite(xn)?xn:sumToBrutto(gn.nettoBetrag,gn.mwstBetrag0,gn.mwstBetrag7,gn.mwstBetrag19)??NaN;He[Me]=formatAmount(Je),He[Fe]=An,He[Ve]=xe.waehrung||"EUR",He[Oe]=bn,He[$e]=fn,He[Ge]=cn,isIsoDate$1(gn.belegDatum)&&(He[Ue]=toDdmm(gn.belegDatum)),He[Ye]=gn.belegNummerLieferant||gn.eigeneBelegNummer||"",He[Qe]=gn.eigeneBelegNummer||"";const We=[gn.lieferantName,gn.beschreibung].filter(Boolean);He[rn]=We.join(" - ").slice(0,60),He[tn]=xe.herkunftKz||"RE",an.push(He.map(quoteIfNeeded).join(";"))}const Ke=`zoe_datev_extf_buchungsstapel_${new Date().toISOString().replace(/[:.]/g,"-")}.csv`;return{csv:an.join(`\r
`)+`\r
`,filename:Ke}}const generateElsterXml=t=>{const{stammdaten:e,ustvaData:r}=t,xe=parsePeriod(r.period);return`<?xml version="1.0" encoding="UTF-8"?>
<Elster xmlns="http://www.elster.de/2002/XMLSchema" xmlns:elster="http://www.elster.de/2002/XMLSchema">
  <TransferHeader version="8">
    <Verfahren>ElsterAnmeldung</Verfahren>
    <DatenArt>UStVA</DatenArt>
    <Vorgang>send-NoSig</Vorgang>
    <Testmerker>000000000</Testmerker>
    <DatenLieferant>
      <Name>${escapeXml(e.unternehmensName)}</Name>
      <Strasse>${escapeXml(e.strasse)} ${escapeXml(e.hausnummer)}</Strasse>
      <PLZ>${escapeXml(e.plz)}</PLZ>
      <Ort>${escapeXml(e.ort)}</Ort>
      <Land>${escapeXml(e.land)}</Land>
      ${e.kontaktEmail?`<Email>${escapeXml(e.kontaktEmail)}</Email>`:""}
      ${e.iban?`<IBAN>${escapeXml(e.iban)}</IBAN>`:""}
    </DatenLieferant>
    <Datei>
      <Verschluesselung>CMSEncryptedData</Verschluesselung>
    </Datei>
  </TransferHeader>
  <DatenTeil>
    <Nutzdatenblock>
      <Nutzdatenheader version="10">
        <NutzdatenTicket>001</NutzdatenTicket>
        <Empfaenger id="F">${e.finanzamtNr||"0000"}</Empfaenger>
        <Hersteller>
          <ProduktName>ZOE Solar Accounting OCR</ProduktName>
          <ProduktVersion>1.0</ProduktVersion>
        </Hersteller>
        <DatenLieferant ds:DSSignatur="true">
          <Name>${escapeXml(e.unternehmensName)}</Name>
          <Strasse>${escapeXml(e.strasse)} ${escapeXml(e.hausnummer)}</Strasse>
          <PLZ>${escapeXml(e.plz)}</PLZ>
          <Ort>${escapeXml(e.ort)}</Ort>
          <Land>${escapeXml(e.land)}</Land>
          ${e.kontaktEmail?`<Email>${escapeXml(e.kontaktEmail)}</Email>`:""}
          ${e.iban?`<IBAN>${escapeXml(e.iban)}</IBAN>`:""}
        </DatenLieferant>
      </Nutzdatenheader>
      <Nutzdaten>
        <Umsatzsteuervoranmeldung>
          <Jahr>${xe.year}</Jahr>
          <Zeitraum>${xe.zeitraum}</Zeitraum>
          <Steuernummer>${escapeXml(e.eigeneSteuernummer)}</Steuernummer>
          ${e.eigeneUstIdNr?`<UstId>${escapeXml(e.eigeneUstIdNr)}</UstId>`:""}
          <Kz21>${formatCurrency(r.base0)}</Kz21>
          <Kz35>${formatCurrency(r.reverseChargeBase)}</Kz35>
          <Kz81>${formatCurrency(r.base7)}</Kz81>
          <Kz83>${formatCurrency(r.tax7)}</Kz83>
          <Kz86>${formatCurrency(r.base19)}</Kz86>
          <Kz89>${formatCurrency(r.tax19)}</Kz89>
          <Kz93>${formatCurrency(r.tax7+r.tax19)}</Kz93>
        </Umsatzsteuervoranmeldung>
      </Nutzdaten>
    </Nutzdatenblock>
  </DatenTeil>
</Elster>`},downloadElsterXml=(t,e)=>{const r=new Blob([t],{type:"application/xml"}),xe=URL.createObjectURL(r),Ee=document.createElement("a");Ee.href=xe,Ee.download=e,document.body.appendChild(Ee),Ee.click(),document.body.removeChild(Ee),URL.revokeObjectURL(xe)},parsePeriod=t=>{if(t.includes("Q")){const[e,r]=t.split("Q"),xe=40+parseInt(r);return{year:e,zeitraum:xe.toString()}}else{const e=t.substring(0,4),r=t.substring(4,6);return{year:e,zeitraum:r}}},formatCurrency=t=>t.toFixed(2).replace(".",","),escapeXml=t=>t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),DatabaseGrid=({documents:t,onSelectDocument:e,onExportSQL:r,onMerge:xe,settings:Ee,availableYears:Ae,filterYear:Pe,onFilterYearChange:Re,filterQuarter:Ce,onFilterQuarterChange:Be,filterMonth:ke,onFilterMonthChange:Me})=>{const[Fe,Ve]=reactExports.useState("list"),[Oe,$e]=reactExports.useState(null),[Ge,Ue]=reactExports.useState(new Set),[Ye,Qe]=reactExports.useState("uploadDate"),[rn,tn]=reactExports.useState("desc"),[an,qe]=reactExports.useState(null),[Ke,sn]=reactExports.useState(""),[gn,He]=reactExports.useState(!1),[en,cn]=reactExports.useState(""),Sn=Ye.startsWith("data.")?Ye.split(".")[1]:null,Tn=reactExports.useMemo(()=>[...t].sort((Ln,Gn)=>{let Yn,ii;return Sn?(Yn=Ln.data?Ln.data[Sn]:"",ii=Gn.data?Gn.data[Sn]:""):(Yn=Ln[Ye],ii=Gn[Ye]),Yn||(Yn=""),ii||(ii=""),Yn<ii?rn==="asc"?-1:1:Yn>ii?rn==="asc"?1:-1:0}),[t,Ye,rn,Sn]),hn=reactExports.useMemo(()=>Tn.reduce((Ln,Gn)=>{var Yn,ii,Wn,Pn;return Gn.status===DocumentStatus.DUPLICATE?Ln:{netto:Ln.netto+(((Yn=Gn.data)==null?void 0:Yn.nettoBetrag)||0),mwst:Ln.mwst+(((ii=Gn.data)==null?void 0:ii.mwstBetrag19)||0)+(((Wn=Gn.data)==null?void 0:Wn.mwstBetrag7)||0),brutto:Ln.brutto+(((Pn=Gn.data)==null?void 0:Pn.bruttoBetrag)||0)}},{netto:0,mwst:0,brutto:0}),[Tn]),pn=reactExports.useMemo(()=>{const Ln={};return Tn.forEach(Gn=>{if(Gn.status===DocumentStatus.DUPLICATE)return;const Yn=Gn.data;if(!Yn)return;const ii=Yn.kontierungskonto||Yn.sollKonto||"sonstiges",Wn=Yn.kontogruppe||(Yn.kontierungskonto?Yn.kontierungskonto.toUpperCase():"Sonstiges"),Pn=Yn.nettoBetrag||0;Ln[ii]||(Ln[ii]={id:ii,label:Wn,amount:0,count:0}),Ln[ii].amount+=Pn,Ln[ii].count+=1}),Object.values(Ln).sort((Gn,Yn)=>Yn.amount-Gn.amount)},[Tn]),bn=reactExports.useMemo(()=>{let Ln=0,Gn=0,Yn=0,ii=0,Wn=0,Pn=0;return Tn.forEach(Zn=>{if(Zn.status===DocumentStatus.DUPLICATE)return;const mn=Zn.data;if(!mn)return;Gn+=mn.mwstBetrag19||0,ii+=mn.mwstBetrag7||0,(mn.mwstBetrag19||0)>0&&(Ln+=(mn.mwstBetrag19||0)/.19),(mn.mwstBetrag7||0)>0&&(Yn+=(mn.mwstBetrag7||0)/.07);const Cn=(mn.mwstBetrag19||0)/.19,jn=(mn.mwstBetrag7||0)/.07,Rn=Cn+jn;let Dn=(mn.nettoBetrag||0)-Rn;Dn<.05&&Dn>-.05&&(Dn=0),Dn>0&&(mn.reverseCharge?Pn+=Dn:Wn+=Dn)}),{base19:Ln,tax19:Gn,base7:Yn,tax7:ii,base0:Wn,reverseChargeBase:Pn}},[Tn]),fn=Ln=>{Ye===Ln?tn(rn==="asc"?"desc":"asc"):(Qe(Ln),tn("asc"))},An=(Ln,Gn)=>{Ln.stopPropagation(),Ue(Yn=>{const ii=new Set(Yn);return ii.has(Gn)?ii.delete(Gn):ii.add(Gn),ii})},xn=()=>{let Ln=0,Gn=0,Yn=0,ii=0,Wn=0,Pn=0;return Tn.forEach(Zn=>{if(Zn.status===DocumentStatus.DUPLICATE)return;const mn=Zn.data;if(!mn)return;Gn+=mn.mwstBetrag19||0,ii+=mn.mwstBetrag7||0,(mn.mwstBetrag19||0)>0&&(Ln+=(mn.mwstBetrag19||0)/.19),(mn.mwstBetrag7||0)>0&&(Yn+=(mn.mwstBetrag7||0)/.07);const Cn=(mn.mwstBetrag19||0)/.19,jn=(mn.mwstBetrag7||0)/.07,Rn=Cn+jn;let Dn=(mn.nettoBetrag||0)-Rn;Dn<.05&&Dn>-.05&&(Dn=0),Dn>0&&(mn.reverseCharge?Pn+=Dn:Wn+=Dn)}),{base0:Wn,reverseChargeBase:Pn,base7:Yn,tax7:ii,base19:Ln,tax19:Gn}},Je=()=>{if(!(Ee!=null&&Ee.elsterStammdaten)){alert("ELSTER XML Export: Stammdaten fehlen. Bitte konfigurieren Sie Ihre ELSTER-Stammdaten in den Einstellungen.");return}const Ln=Ce!=="all"?`${Pe}Q${Ce}`:ke!=="all"?`${Pe}${ke.padStart(2,"0")}`:`${Pe}`,Gn=xn(),Yn={stammdaten:Ee.elsterStammdaten,ustvaData:{period:Ln,base0:Gn.base0,reverseChargeBase:Gn.reverseChargeBase,base7:Gn.base7,tax7:Gn.tax7,base19:Gn.base19,tax19:Gn.tax19}},ii=generateElsterXml(Yn),Wn=`elster_ustva_${Ln}.xml`;downloadElsterXml(ii,Wn),alert(`ELSTER XML-Datei "${Wn}" wurde heruntergeladen.

Bitte laden Sie diese Datei manuell im ELSTER Online Portal hoch:
https://www.elster.de/eportal/`)},We=()=>{const Ln=runExportPreflight(Tn,Ee),Gn=formatPreflightForDialog(Ln);if(Ln.blockers.length>0){alert(`${Gn.title}

${Gn.body}`);return}if(Ln.warnings.length>0&&!confirm(`${Gn.title}

${Gn.body}

Trotzdem exportieren?`))return;const Yn=new E("l","mm","a4"),ii=Fe==="euer"?"Einnahmenberschussrechnung (ER)":Fe==="ustva"?"Umsatzsteuervoranmeldung":"Belegliste (Detailliert)",Wn=new Date().toISOString(),Pn=Wn.replace(/[:.]/g,"-"),jn=`${Pe==="all"?"all":Pe}_${Ce==="all"?"all":Ce}_${ke==="all"?"all":ke}`;Yn.setFontSize(18),Yn.text(`ZOE Solar - ${ii}`,14,20),Yn.setFontSize(10),Yn.text(`Filter: ${Pe}/${Ce}/${ke}`,14,28),Yn.text(`Export: ${Wn}`,14,34);const Rn=Ee==null?void 0:Ee.elsterStammdaten,Dn=qn=>(qn==null?"":String(qn)).trim(),Jn=[];if(Rn){const qn=Dn(Rn.unternehmensName),yi=[Dn(Rn.strasse),Dn(Rn.hausnummer),Dn(Rn.plz),Dn(Rn.ort)].filter(Boolean).join(" "),di=Dn(Rn.eigeneSteuernummer),zi=Dn(Rn.eigeneUstIdNr),Ni=Dn(Rn.finanzamtName);qn&&Jn.push(`Mandant: ${qn}`),yi&&Jn.push(`Anschrift: ${yi}${Dn(Rn.land)?` (${Dn(Rn.land)})`:""}`),di&&Jn.push(`Eigene Steuernummer: ${di}`),zi&&Jn.push(`Eigene USt-IdNr: ${zi}`),Ni&&Jn.push(`Finanzamt: ${Ni}`)}let Qn=40;if(Jn.length>0){Yn.setFontSize(9);const qn=40;Jn.forEach((yi,di)=>{Yn.text(yi,14,qn+di*5)}),Qn=qn+Jn.length*5+4}if(Fe==="list"){const qn=Tn.map(yi=>{const di=yi.data||{},zi=Gi=>{const ui=typeof Gi=="number"?Gi:Number(Gi);return Number.isFinite(ui)?ui.toLocaleString("de-DE",{minimumFractionDigits:2}):""},Ni=Gi=>Gi===!0?"":"";return[di.belegDatum||"",di.eigeneBelegNummer||"",di.lieferantName||"",di.belegNummerLieferant||"",di.zahlungsStatus||"",di.zahlungsDatum||"",di.zahlungsmethode||"",zi(di.nettoBetrag),zi(di.mwstBetrag19),zi(di.mwstBetrag7),zi(di.bruttoBetrag),di.steuerkategorie||"",di.sollKonto||"",di.habenKonto||"",di.kontierungskonto||"",Ni(di.reverseCharge),Ni(di.vorsteuerabzug),Ni(di.kleinbetrag),Ni(di.privatanteil),String(di.ocr_score??""),yi.status]});autoTable(Yn,{startY:Qn,head:[["Datum","ZOE-Nr.","Lieferant","Re-Nr.","Zahl-Status","Zahl-Datum","Zahlart","Netto","MwSt 19","MwSt 7","Brutto","Steuerkat.","Soll","Haben","Konto","RC","VSt","KB","Priv","OCR","Status"]],body:qn,styles:{fontSize:6,cellPadding:1},headStyles:{fillColor:[245,245,245],textColor:80},margin:{left:10,right:10},horizontalPageBreak:!0})}else if(Fe==="euer"){const qn=pn.map(yi=>[yi.id,yi.label,yi.count,yi.amount.toLocaleString("de-DE",{minimumFractionDigits:2})+" "]);qn.push(["","SUMME AUSGABEN","",hn.netto.toLocaleString("de-DE",{minimumFractionDigits:2})+" "]),autoTable(Yn,{startY:Qn,head:[["Konto","Bezeichnung","Anzahl","Netto Summe"]],body:qn})}else if(Fe==="ustva"){const qn=[["Steuerfreie Umstze / PV",bn.base0.toLocaleString("de-DE",{minimumFractionDigits:2}),"0,00"],["IGL / Reverse Charge",bn.reverseChargeBase.toLocaleString("de-DE",{minimumFractionDigits:2}),"0,00"],["Vorsteuer 7%",bn.base7.toLocaleString("de-DE",{minimumFractionDigits:2}),bn.tax7.toLocaleString("de-DE",{minimumFractionDigits:2})],["Vorsteuer 19%",bn.base19.toLocaleString("de-DE",{minimumFractionDigits:2}),bn.tax19.toLocaleString("de-DE",{minimumFractionDigits:2})],["SUMME VORSTEUER","",(bn.tax7+bn.tax19).toLocaleString("de-DE",{minimumFractionDigits:2})]];autoTable(Yn,{startY:Qn,head:[["Position","Bemessungsgrundlage","Steuer"]],body:qn})}Yn.save(`zoe_${Fe}_${jn}_${Pn}.pdf`)},Ze=()=>{const Ln=runExportPreflight(Tn,Ee),Gn=formatPreflightForDialog(Ln);if(Ln.blockers.length>0){alert(`${Gn.title}

${Gn.body}`);return}if(Ln.warnings.length>0&&!confirm(`${Gn.title}

${Gn.body}

Trotzdem exportieren?`))return;const ii=new Date().toISOString().replace(/[:.]/g,"-"),mn=`${Pe==="all"?"all":Pe}_${Ce==="all"?"all":Ce}_${ke==="all"?"all":ke}`,Cn=["datum","lieferant","adresse","steuernummer","belegnummer_lieferant","interne_nummer","zahlungsmethode","zahlungsdatum","zahlungsstatus","rechnungs_empfaenger","aufbewahrungsort","netto","mwst_satz_0","mwst_0","mwst_satz_7","mwst_7","mwst_satz_19","mwst_19","brutto","steuerkategorie","kontierungskonto","soll_konto","haben_konto","reverse_charge","vorsteuerabzug","kleinbetrag","privatanteil","ocr_score","ocr_rationale","beschreibung","text_content","status"],jn=ei=>`"${(ei==null?"":String(ei)).replace(/"/g,'""')}"`,Rn=ei=>{const si=typeof ei=="number"?ei:Number(ei);return Number.isFinite(si)?si.toFixed(2):""},Dn=ei=>ei===!0?"true":ei===!1?"false":ei===1?"true":ei===0?"false":"",Jn=ei=>{const si=ei==null?"":String(ei);return/^\d{4}-\d{2}-\d{2}$/.test(si)?si:""},Qn=Tn.map(ei=>{const si=ei.data||{};return[Jn(si.belegDatum),si.lieferantName||"",si.lieferantAdresse||"",si.steuernummer||"",si.belegNummerLieferant||"",si.eigeneBelegNummer||"",si.zahlungsmethode||"",Jn(si.zahlungsDatum),si.zahlungsStatus||"",si.rechnungsEmpfaenger||"",si.aufbewahrungsOrt||"",Rn(si.nettoBetrag),Rn(si.mwstSatz0),Rn(si.mwstBetrag0),Rn(si.mwstSatz7),Rn(si.mwstBetrag7),Rn(si.mwstSatz19),Rn(si.mwstBetrag19),Rn(si.bruttoBetrag),si.steuerkategorie||"",si.kontierungskonto||"",si.sollKonto||"",si.habenKonto||"",Dn(si.reverseCharge),Dn(si.vorsteuerabzug),Dn(si.kleinbetrag),Dn(si.privatanteil),si.ocr_score??"",si.ocr_rationale||"",si.beschreibung||"",si.textContent||"",ei.status||""]}),qn=";",yi=Cn.map(jn).join(qn),di=Qn.map(ei=>ei.map(jn).join(qn)).join(`\r
`),zi=`${yi}\r
${di}\r
`,Ni=["doc_id","line_index","description","amount"],Gi=[];Tn.forEach(ei=>{var Ri;(((Ri=ei.data)==null?void 0:Ri.lineItems)||[]).forEach((Bi,er)=>{Gi.push([ei.id,String(er),(Bi==null?void 0:Bi.description)||"",Rn(Bi==null?void 0:Bi.amount)])})});const ui=Ni.map(jn).join(qn),Vi=Gi.map(ei=>ei.map(jn).join(qn)).join(`\r
`),Di=`${ui}\r
${Vi}\r
`,Xi=new Blob([zi],{type:"text/csv;charset=utf-8"}),fi=URL.createObjectURL(Xi),ni=document.createElement("a");ni.href=fi,ni.download=`zoe_belege_${mn}_${ii}.csv`,ni.click(),URL.revokeObjectURL(fi);const pi=new Blob([Di],{type:"text/csv;charset=utf-8"}),ji=URL.createObjectURL(pi),hr=document.createElement("a");hr.href=ji,hr.download=`zoe_positionen_${mn}_${ii}.csv`,hr.click(),URL.revokeObjectURL(ji);const ar=["unternehmens_name","land","plz","ort","strasse","hausnummer","eigene_steuernummer","eigene_steuernummer_digits","eigene_ust_idnr","finanzamt_name","finanzamt_nr","rechtsform","besteuerung_ust","kleinunternehmer","iban","kontakt_email"],Fn=Ee==null?void 0:Ee.elsterStammdaten,Si=((Fn==null?void 0:Fn.eigeneSteuernummer)||"").replace(/\D/g,""),Mi=[(Fn==null?void 0:Fn.unternehmensName)||"",(Fn==null?void 0:Fn.land)||"DE",(Fn==null?void 0:Fn.plz)||"",(Fn==null?void 0:Fn.ort)||"",(Fn==null?void 0:Fn.strasse)||"",(Fn==null?void 0:Fn.hausnummer)||"",(Fn==null?void 0:Fn.eigeneSteuernummer)||"",Si,(Fn==null?void 0:Fn.eigeneUstIdNr)||"",(Fn==null?void 0:Fn.finanzamtName)||"",(Fn==null?void 0:Fn.finanzamtNr)||"",(Fn==null?void 0:Fn.rechtsform)||"",(Fn==null?void 0:Fn.besteuerungUst)||"",(Fn==null?void 0:Fn.kleinunternehmer)===!0?"true":(Fn==null?void 0:Fn.kleinunternehmer)===!1?"false":"",(Fn==null?void 0:Fn.iban)||"",(Fn==null?void 0:Fn.kontaktEmail)||""],ki=ar.map(jn).join(qn),$i=Mi.map(jn).join(qn),tr=`${ki}\r
${$i}\r
`,Hn=new Blob([tr],{type:"text/csv;charset=utf-8"}),Un=URL.createObjectURL(Hn),ti=document.createElement("a");ti.href=Un,ti.download=`zoe_elster_stammdaten_${mn}_${ii}.csv`,ti.click(),URL.revokeObjectURL(Un)},un=()=>{if(!Ee){alert("DATEV Export: Einstellungen fehlen.");return}const Ln=runDatevExportPreflight(Tn,Ee),Gn=formatPreflightForDialog(Ln);if(Ln.blockers.length>0){alert(`${Gn.title}

${Gn.body}`);return}if(Ln.warnings.length>0&&!confirm(`${Gn.title}

${Gn.body}

Trotzdem exportieren?`))return;const{csv:Yn,filename:ii}=generateDatevExtfBuchungsstapelCsv(Tn,Ee),Wn=new Blob([Yn],{type:"text/csv;charset=utf-8"}),Pn=URL.createObjectURL(Wn),Zn=document.createElement("a");Zn.href=Pn,Zn.download=ii,Zn.click(),URL.revokeObjectURL(Pn)},yn=({field:Ln})=>Ye!==Ln?jsxRuntimeExports.jsx("span",{className:"text-gray-300 ml-1 text-[10px]",children:""}):jsxRuntimeExports.jsx("span",{className:"text-gray-800 ml-1 text-[10px]",children:rn==="asc"?"":""}),_n=({label:Ln,field:Gn,className:Yn="",style:ii={}})=>jsxRuntimeExports.jsx("th",{className:`px-4 py-3 border-b border-gray-200 bg-gray-50 text-left text-[11px] font-semibold text-gray-600 cursor-pointer hover:bg-gray-100 transition-colors select-none whitespace-nowrap ${Yn}`,style:ii,onClick:()=>fn(Gn),children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[Ln," ",jsxRuntimeExports.jsx(yn,{field:Gn})]})}),wn=()=>jsxRuntimeExports.jsx("div",{className:"relative w-full h-full overflow-auto",children:jsxRuntimeExports.jsxs("table",{className:"min-w-max text-left text-sm border-collapse",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-50 z-20",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-2 py-3 border-b border-gray-200 bg-gray-50 w-8 sticky left-0 z-30"}),jsxRuntimeExports.jsx(_n,{label:"Datum",field:"data.belegDatum",className:"sticky left-8 bg-gray-50 z-20 shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)]"}),jsxRuntimeExports.jsx(_n,{label:"ZOE-Nr.",field:"data.eigeneBelegNummer",className:"sticky left-[132px] bg-gray-50 z-20 shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)]"}),jsxRuntimeExports.jsx(_n,{label:"Lieferant",field:"data.lieferantName",className:"sticky left-[232px] bg-gray-50 z-20 shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)] border-r border-gray-200"}),jsxRuntimeExports.jsx(_n,{label:"Original-Nr.",field:"data.belegNummerLieferant"}),jsxRuntimeExports.jsx(_n,{label:"Netto",field:"data.nettoBetrag",className:"text-right"}),jsxRuntimeExports.jsx(_n,{label:"Brutto",field:"data.bruttoBetrag",className:"text-right"}),jsxRuntimeExports.jsx(_n,{label:"Soll (SKR03)",field:"data.sollKonto"}),jsxRuntimeExports.jsx(_n,{label:"Haben",field:"data.habenKonto"}),jsxRuntimeExports.jsx(_n,{label:"Konto",field:"data.kontierungskonto"}),jsxRuntimeExports.jsx(_n,{label:"Kategorie",field:"data.steuerkategorie"}),jsxRuntimeExports.jsx(_n,{label:"Zahlart",field:"data.zahlungsmethode"}),jsxRuntimeExports.jsx(_n,{label:"Zahl-Datum",field:"data.zahlungsDatum"}),jsxRuntimeExports.jsx(_n,{label:"Zahl-Status",field:"data.zahlungsStatus"}),jsxRuntimeExports.jsx(_n,{label:"Steuernr.",field:"data.steuernummer"}),jsxRuntimeExports.jsx(_n,{label:"Adresse",field:"data.lieferantAdresse"}),jsxRuntimeExports.jsx(_n,{label:"Empfnger",field:"data.rechnungsEmpfaenger"}),jsxRuntimeExports.jsx(_n,{label:"Ablage",field:"data.aufbewahrungsOrt"}),jsxRuntimeExports.jsx(_n,{label:"RC",field:"data.reverseCharge"}),jsxRuntimeExports.jsx(_n,{label:"VSt",field:"data.vorsteuerabzug"}),jsxRuntimeExports.jsx(_n,{label:"KB",field:"data.kleinbetrag"}),jsxRuntimeExports.jsx(_n,{label:"Priv",field:"data.privatanteil"}),jsxRuntimeExports.jsx(_n,{label:"OCR",field:"data.ocr_score"}),jsxRuntimeExports.jsx(_n,{label:"Beschreibung",field:"data.beschreibung"}),jsxRuntimeExports.jsx(_n,{label:"Text",field:"data.textContent"}),jsxRuntimeExports.jsx(_n,{label:"Status",field:"status"})]})}),jsxRuntimeExports.jsx("tbody",{className:"divide-y divide-gray-100 text-[13px]",children:Tn.map(Ln=>{var mn,Cn,jn,Rn,Dn,Jn,Qn,qn,yi,di,zi,Ni,Gi,ui,Vi,Di,Xi,fi,ni,pi,ji,hr,ar,Fn,Si,Mi;const Gn=Ln.status===DocumentStatus.DUPLICATE,Yn=Ln.status===DocumentStatus.ERROR,ii=Ln.status===DocumentStatus.REVIEW_NEEDED,Wn=Gn||Yn||ii,Pn=Oe===Ln.id,Zn=Ge.has(Ln.id);return jsxRuntimeExports.jsxs(React.Fragment,{children:[jsxRuntimeExports.jsxs("tr",{draggable:!Wn,onDragStart:ki=>{if(Wn){ki.preventDefault();return}ki.dataTransfer.setData("text/plain",Ln.id),ki.dataTransfer.effectAllowed="move"},onDragOver:ki=>{Wn||(ki.preventDefault(),$e(Ln.id))},onDragLeave:()=>$e(null),onDrop:ki=>{if(ki.preventDefault(),Wn){$e(null);return}const $i=ki.dataTransfer.getData("text/plain");$i&&$i!==Ln.id&&xe($i,Ln.id),$e(null)},onClick:()=>e(Ln),className:`cursor-pointer transition-colors border-l-2 ${Pn?"bg-blue-50 ring-2 ring-inset ring-blue-500 z-20 relative":Gn?"bg-red-50/30 hover:bg-red-50 border-red-400":Yn?"bg-rose-50/40 hover:bg-rose-50 border-rose-400":ii?"bg-amber-50/40 hover:bg-amber-50 border-amber-300":"hover:bg-gray-50 border-transparent"}`,children:[jsxRuntimeExports.jsx("td",{className:"px-2 py-2.5 bg-white border-r border-gray-100 sticky left-0 z-20 text-center",onClick:ki=>An(ki,Ln.id),children:jsxRuntimeExports.jsx("div",{className:`p-1 rounded hover:bg-gray-100 transition-transform ${Zn?"rotate-90":""}`,children:jsxRuntimeExports.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:jsxRuntimeExports.jsx("polyline",{points:"9 18 15 12 9 6"})})})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2.5 text-gray-600 whitespace-nowrap font-mono text-xs sticky left-8 bg-white border-r border-gray-100 shadow-[2px_0_5px_-2px_rgba(0,0,0,0.05)] group-hover:bg-gray-50",children:(mn=Ln.data)==null?void 0:mn.belegDatum}),jsxRuntimeExports.jsxs("td",{className:"px-4 py-2.5 sticky left-[132px] bg-white border-r border-gray-100 shadow-[2px_0_5px_-2px_rgba(0,0,0,0.05)] group-hover:bg-gray-50",children:[jsxRuntimeExports.jsx("span",{className:"font-mono text-xs font-medium text-blue-600",children:(Cn=Ln.data)==null?void 0:Cn.eigeneBelegNummer}),(Yn||ii)&&jsxRuntimeExports.jsx("span",{className:`ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-bold uppercase tracking-wide ${Yn?"bg-rose-100 text-rose-700":"bg-amber-100 text-amber-700"}`,children:Yn?"Fehler":"Prfen"})]}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2.5 text-gray-900 font-medium sticky left-[232px] bg-white border-r border-gray-200 shadow-[2px_0_5px_-2px_rgba(0,0,0,0.05)] group-hover:bg-gray-50 max-w-[200px] truncate",children:((jn=Ln.data)==null?void 0:jn.lieferantName)||Ln.fileName}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2.5 font-mono text-xs text-gray-500 whitespace-nowrap",children:((Rn=Ln.data)==null?void 0:Rn.belegNummerLieferant)||"-"}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2.5 text-right font-mono text-gray-500",children:(((Dn=Ln.data)==null?void 0:Dn.nettoBetrag)||0).toLocaleString("de-DE",{minimumFractionDigits:2})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2.5 text-right font-mono text-gray-900 font-medium",children:(((Jn=Ln.data)==null?void 0:Jn.bruttoBetrag)||0).toLocaleString("de-DE",{minimumFractionDigits:2})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2.5 text-xs text-gray-700 font-bold font-mono",children:(Qn=Ln.data)==null?void 0:Qn.sollKonto}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2.5 text-xs text-gray-700 font-bold font-mono",children:(qn=Ln.data)==null?void 0:qn.habenKonto}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2.5 text-xs text-gray-600",children:jsxRuntimeExports.jsx("span",{className:"bg-gray-100 px-2 py-0.5 rounded-full border border-gray-200 whitespace-nowrap",children:(yi=Ln.data)==null?void 0:yi.kontierungskonto})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2.5 text-[10px] text-gray-500 whitespace-nowrap",children:(di=Ln.data)==null?void 0:di.steuerkategorie}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2.5 text-xs text-gray-600 whitespace-nowrap",children:((zi=Ln.data)==null?void 0:zi.zahlungsmethode)||""}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2.5 text-xs text-gray-600 whitespace-nowrap font-mono",children:((Ni=Ln.data)==null?void 0:Ni.zahlungsDatum)||""}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2.5 text-xs text-gray-600 whitespace-nowrap",children:((Gi=Ln.data)==null?void 0:Gi.zahlungsStatus)||""}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2.5 text-xs text-gray-600 whitespace-nowrap font-mono",children:((ui=Ln.data)==null?void 0:ui.steuernummer)||""}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2.5 text-xs text-gray-600 max-w-[240px] truncate",children:((Vi=Ln.data)==null?void 0:Vi.lieferantAdresse)||""}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2.5 text-xs text-gray-600 max-w-[200px] truncate",children:((Di=Ln.data)==null?void 0:Di.rechnungsEmpfaenger)||""}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2.5 text-xs text-gray-600 max-w-[200px] truncate",children:((Xi=Ln.data)==null?void 0:Xi.aufbewahrungsOrt)||""}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2.5 text-xs text-gray-600 text-center",children:(fi=Ln.data)!=null&&fi.reverseCharge?"":""}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2.5 text-xs text-gray-600 text-center",children:(ni=Ln.data)!=null&&ni.vorsteuerabzug?"":""}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2.5 text-xs text-gray-600 text-center",children:(pi=Ln.data)!=null&&pi.kleinbetrag?"":""}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2.5 text-xs text-gray-600 text-center",children:(ji=Ln.data)!=null&&ji.privatanteil?"":""}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2.5 text-xs text-gray-600 whitespace-nowrap font-mono",children:((hr=Ln.data)==null?void 0:hr.ocr_score)??""}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2.5 text-xs text-gray-600 max-w-[260px] truncate",children:((ar=Ln.data)==null?void 0:ar.beschreibung)||""}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2.5 text-xs text-gray-600 max-w-[260px] truncate",children:((Fn=Ln.data)==null?void 0:Fn.textContent)||""}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2.5 text-xs text-gray-600 whitespace-nowrap",children:Ln.status})]}),Zn&&jsxRuntimeExports.jsxs("tr",{className:"bg-gray-50/50 shadow-inner",children:[jsxRuntimeExports.jsx("td",{colSpan:2,className:"sticky left-0 bg-gray-50 border-r border-gray-200"}),jsxRuntimeExports.jsx("td",{colSpan:24,className:"p-4",children:jsxRuntimeExports.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden max-w-2xl",children:jsxRuntimeExports.jsxs("table",{className:"w-full text-xs",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-100 text-gray-500 font-semibold border-b border-gray-200",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-3 py-2 text-left",children:"Beschreibung"}),jsxRuntimeExports.jsx("th",{className:"px-3 py-2 text-right w-24",children:"Betrag"})]})}),jsxRuntimeExports.jsxs("tbody",{className:"divide-y divide-gray-100",children:[(((Si=Ln.data)==null?void 0:Si.lineItems)||[]).map((ki,$i)=>{var tr;return jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"px-3 py-1.5 text-gray-700",children:ki.description}),jsxRuntimeExports.jsx("td",{className:"px-3 py-1.5 text-right font-mono",children:(tr=ki.amount)==null?void 0:tr.toFixed(2)})]},$i)}),(!((Mi=Ln.data)!=null&&Mi.lineItems)||Ln.data.lineItems.length===0)&&jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("td",{colSpan:2,className:"px-3 py-2 text-center text-gray-400 italic",children:"Keine Positionen"})})]})]})})})]})]},Ln.id)})}),jsxRuntimeExports.jsx("tfoot",{className:"bg-gray-50 border-t border-gray-200 z-20",children:jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsxs("td",{colSpan:26,className:"px-4 py-3 text-right text-xs font-bold uppercase tracking-wider text-gray-500",children:["Gesamt Brutto: ",jsxRuntimeExports.jsxs("span",{className:"font-mono text-gray-900",children:[hn.brutto.toLocaleString("de-DE",{minimumFractionDigits:2})," "]})]})})})]})}),kn=()=>jsxRuntimeExports.jsx("div",{className:"max-w-5xl mx-auto p-8",children:jsxRuntimeExports.jsxs("div",{className:"bg-white border border-gray-200 rounded-md shadow-sm overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900",children:"Einnahmenberschussrechnung (Ausgaben)"}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-500",children:["Gesamt Netto: ",jsxRuntimeExports.jsxs("span",{className:"font-mono font-bold text-gray-900 ml-2",children:[hn.netto.toLocaleString("de-DE",{minimumFractionDigits:2})," "]})]})]}),jsxRuntimeExports.jsxs("table",{className:"w-full text-left text-sm",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-50 text-gray-600 font-semibold border-b border-gray-200 text-[13px]",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-6 py-3",children:"Kategorie / Konto"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-center",children:"Anzahl"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-right",children:"Netto Summe"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 w-40",children:"Anteil (Volumen)"})]})}),jsxRuntimeExports.jsxs("tbody",{className:"divide-y divide-gray-100 text-[13px]",children:[pn.map(Ln=>{const Gn=hn.netto>0?Ln.amount/hn.netto*100:0;return jsxRuntimeExports.jsxs("tr",{className:"hover:bg-gray-50",children:[jsxRuntimeExports.jsxs("td",{className:"px-6 py-3",children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-gray-800",children:Ln.label}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-400 font-mono mt-0.5",children:Ln.id})]}),jsxRuntimeExports.jsx("td",{className:"px-6 py-3 text-center text-gray-600 font-mono",children:Ln.count}),jsxRuntimeExports.jsxs("td",{className:"px-6 py-3 text-right font-mono text-gray-900 font-medium",children:[Ln.amount.toLocaleString("de-DE",{minimumFractionDigits:2})," "]}),jsxRuntimeExports.jsx("td",{className:"px-6 py-3 align-middle",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"flex-1 h-1.5 bg-gray-100 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:`${Math.min(Gn,100)}%`}})}),jsxRuntimeExports.jsxs("span",{className:"text-[10px] text-gray-400 w-8 text-right font-mono",children:[Gn.toFixed(1),"%"]})]})})]},Ln.id)}),pn.length===0&&jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("td",{colSpan:4,className:"px-6 py-8 text-center text-gray-400",children:"Keine Daten fr den gewhlten Zeitraum."})})]}),jsxRuntimeExports.jsx("tfoot",{className:"bg-gray-50 border-t border-gray-200",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"px-6 py-3 font-semibold text-gray-700",children:"Gesamtsumme"}),jsxRuntimeExports.jsx("td",{className:"px-6 py-3 text-center font-bold text-gray-700 font-mono",children:pn.reduce((Ln,Gn)=>Ln+Gn.count,0)}),jsxRuntimeExports.jsxs("td",{className:"px-6 py-3 text-right font-bold font-mono text-gray-900",children:[hn.netto.toLocaleString("de-DE",{minimumFractionDigits:2})," "]}),jsxRuntimeExports.jsx("td",{})]})})]})]})}),$n=()=>jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto p-8 space-y-8",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white border border-gray-200 rounded-md shadow-sm overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200",children:jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900",children:"Umsatzsteuervoranmeldung (Vorbereitung)"})}),jsxRuntimeExports.jsxs("table",{className:"w-full text-left text-sm",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-50 text-gray-600 font-semibold border-b border-gray-200 text-[13px]",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-6 py-3 w-1/2",children:"Position"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-right",children:"Bemessungsgrundlage"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-right",children:"Steuer"})]})}),jsxRuntimeExports.jsxs("tbody",{className:"divide-y divide-gray-100 text-[13px]",children:[jsxRuntimeExports.jsxs("tr",{className:"hover:bg-gray-50",children:[jsxRuntimeExports.jsx("td",{className:"px-6 py-3 text-gray-800",children:"Steuerfreie Umstze / PV (0%)"}),jsxRuntimeExports.jsxs("td",{className:"px-6 py-3 text-right font-mono",children:[bn.base0.toLocaleString("de-DE",{minimumFractionDigits:2})," "]}),jsxRuntimeExports.jsx("td",{className:"px-6 py-3 text-right font-mono text-gray-400",children:"0,00 "})]}),jsxRuntimeExports.jsxs("tr",{className:"hover:bg-gray-50",children:[jsxRuntimeExports.jsx("td",{className:"px-6 py-3 text-gray-800",children:"IGL / Reverse Charge (13b)"}),jsxRuntimeExports.jsxs("td",{className:"px-6 py-3 text-right font-mono",children:[bn.reverseChargeBase.toLocaleString("de-DE",{minimumFractionDigits:2})," "]}),jsxRuntimeExports.jsx("td",{className:"px-6 py-3 text-right font-mono text-gray-400",children:"0,00 "})]}),jsxRuntimeExports.jsxs("tr",{className:"hover:bg-gray-50",children:[jsxRuntimeExports.jsx("td",{className:"px-6 py-3 text-gray-800",children:"Vorsteuer 7%"}),jsxRuntimeExports.jsxs("td",{className:"px-6 py-3 text-right font-mono",children:[bn.base7.toLocaleString("de-DE",{minimumFractionDigits:2})," "]}),jsxRuntimeExports.jsxs("td",{className:"px-6 py-3 text-right font-mono text-gray-700",children:[bn.tax7.toLocaleString("de-DE",{minimumFractionDigits:2})," "]})]}),jsxRuntimeExports.jsxs("tr",{className:"hover:bg-gray-50",children:[jsxRuntimeExports.jsx("td",{className:"px-6 py-3 text-gray-800",children:"Vorsteuer 19%"}),jsxRuntimeExports.jsxs("td",{className:"px-6 py-3 text-right font-mono",children:[bn.base19.toLocaleString("de-DE",{minimumFractionDigits:2})," "]}),jsxRuntimeExports.jsxs("td",{className:"px-6 py-3 text-right font-mono text-gray-700",children:[bn.tax19.toLocaleString("de-DE",{minimumFractionDigits:2})," "]})]})]}),jsxRuntimeExports.jsx("tfoot",{className:"bg-gray-50 border-t border-gray-200",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"px-6 py-3 font-semibold text-gray-700",children:"SUMME VORSTEUER (Abziehbar)"}),jsxRuntimeExports.jsx("td",{className:"px-6 py-3"}),jsxRuntimeExports.jsxs("td",{className:"px-6 py-3 text-right font-bold font-mono text-gray-900",children:[(bn.tax7+bn.tax19).toLocaleString("de-DE",{minimumFractionDigits:2})," "]})]})})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white border border-gray-200 rounded-md shadow-sm overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900",children:"ELSTER XML Export fr manuelle bermittlung"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Export der UStVA-Daten als XML-Datei fr Upload im ELSTER Online Portal."})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"flex gap-3",children:jsxRuntimeExports.jsx("button",{onClick:Je,className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded hover:bg-blue-700",children:"XML Export"})}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[jsxRuntimeExports.jsx("p",{children:jsxRuntimeExports.jsx("strong",{children:"Anleitung:"})}),jsxRuntimeExports.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[jsxRuntimeExports.jsx("li",{children:'Klicken Sie auf "XML Export" um die XML-Datei herunterzuladen'}),jsxRuntimeExports.jsxs("li",{children:["ffnen Sie das ",jsxRuntimeExports.jsx("a",{href:"https://www.elster.de/portal",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"ELSTER Online Portal"})]}),jsxRuntimeExports.jsx("li",{children:"Melden Sie sich mit Ihren ELSTER-Zugangsdaten an"}),jsxRuntimeExports.jsx("li",{children:'Whlen Sie "Umsatzsteuer"  "Umsatzsteuervoranmeldung"'}),jsxRuntimeExports.jsx("li",{children:"Laden Sie die XML-Datei hoch und bermitteln Sie die Voranmeldung"})]})]}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-amber-600 bg-amber-50 p-3 rounded",children:[jsxRuntimeExports.jsx("strong",{children:"Hinweis:"})," Die XML-Datei enthlt keine Signatur. ELSTER Online Portal signiert die Daten automatisch bei der bermittlung."]})]})]})]});return jsxRuntimeExports.jsxs("div",{className:"h-full flex flex-col bg-white",children:[jsxRuntimeExports.jsxs("div",{className:"px-6 py-3 border-b border-gray-200 bg-white flex justify-between items-center gap-4",children:[jsxRuntimeExports.jsx("div",{className:"flex bg-gray-100 p-0.5 rounded-md",children:["list","euer","ustva"].map(Ln=>jsxRuntimeExports.jsx("button",{onClick:()=>Ve(Ln),className:`px-3 py-1.5 text-xs font-semibold rounded-md transition-all ${Fe===Ln?"bg-white text-gray-900 shadow-sm ring-1 ring-gray-200":"text-gray-600 hover:text-gray-900"}`,children:Ln==="list"?"Liste":Ln.toUpperCase()},Ln))}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center",children:[jsxRuntimeExports.jsxs("select",{value:Pe,onChange:Ln=>Re(Ln.target.value),className:"bg-white border border-gray-300 rounded-md text-xs font-medium text-gray-700 px-2 py-1.5 outline-none focus:border-blue-500 hover:border-gray-400 transition-colors",children:[jsxRuntimeExports.jsx("option",{value:"all",children:"Jahr"}),Ae.map(Ln=>jsxRuntimeExports.jsx("option",{value:Ln,children:Ln},Ln))]}),jsxRuntimeExports.jsxs("select",{value:Ce,onChange:Ln=>Be(Ln.target.value),className:"bg-white border border-gray-300 rounded-md text-xs font-medium text-gray-700 px-2 py-1.5 outline-none focus:border-blue-500 hover:border-gray-400 transition-colors",children:[jsxRuntimeExports.jsx("option",{value:"all",children:"Q"}),jsxRuntimeExports.jsx("option",{value:"Q1",children:"Q1"}),jsxRuntimeExports.jsx("option",{value:"Q2",children:"Q2"}),jsxRuntimeExports.jsx("option",{value:"Q3",children:"Q3"}),jsxRuntimeExports.jsx("option",{value:"Q4",children:"Q4"})]}),jsxRuntimeExports.jsxs("select",{value:ke,onChange:Ln=>Me(Ln.target.value),className:"bg-white border border-gray-300 rounded-md text-xs font-medium text-gray-700 px-2 py-1.5 outline-none focus:border-blue-500 hover:border-gray-400 transition-colors",children:[jsxRuntimeExports.jsx("option",{value:"all",children:"M"}),Array.from({length:12},(Ln,Gn)=>Gn+1).map(Ln=>jsxRuntimeExports.jsx("option",{value:Ln.toString().padStart(2,"0"),children:Ln},Ln))]}),jsxRuntimeExports.jsx("div",{className:"h-4 w-px bg-gray-200 mx-1"}),jsxRuntimeExports.jsx("button",{onClick:We,className:"p-1.5 text-gray-500 hover:text-gray-900 border border-gray-200 rounded hover:bg-gray-50 transition-all shadow-sm",children:jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),jsxRuntimeExports.jsx("polyline",{points:"14 2 14 8 20 8"}),jsxRuntimeExports.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),jsxRuntimeExports.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),jsxRuntimeExports.jsx("polyline",{points:"10 9 9 9 8 9"})]})}),jsxRuntimeExports.jsx("button",{onClick:Ze,className:"p-1.5 text-gray-500 hover:text-gray-900 border border-gray-200 rounded hover:bg-gray-50 transition-all shadow-sm",title:"CSV Export",children:jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),jsxRuntimeExports.jsx("polyline",{points:"14 2 14 8 20 8"}),jsxRuntimeExports.jsx("path",{d:"M8 13h8"}),jsxRuntimeExports.jsx("path",{d:"M8 17h8"})]})}),jsxRuntimeExports.jsx("button",{onClick:un,className:"px-2 py-1.5 text-xs font-semibold text-gray-600 hover:text-gray-900 border border-gray-200 rounded hover:bg-gray-50 transition-all shadow-sm",title:"DATEV Export (EXTF Buchungsstapel)",children:"DATEV"}),Fe==="ustva"&&jsxRuntimeExports.jsx("button",{onClick:Je,className:"px-2 py-1.5 text-xs font-semibold text-blue-600 hover:text-blue-900 border border-blue-200 rounded hover:bg-blue-50 transition-all shadow-sm",title:"ELSTER XML Export",children:"XML"}),jsxRuntimeExports.jsx("button",{onClick:r,className:"p-1.5 text-gray-500 hover:text-gray-900 border border-gray-200 rounded hover:bg-gray-50 transition-all shadow-sm",children:jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),jsxRuntimeExports.jsx("polyline",{points:"7 10 12 15 17 10"}),jsxRuntimeExports.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]})})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-auto bg-white",children:[Fe==="list"&&wn(),Fe==="euer"&&kn(),Fe==="ustva"&&$n()]})]})};function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$3={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,(function(module,exports$1){(function(e,r){module.exports=e.pdfjsLib=r()})(globalThis,()=>(()=>{var __webpack_modules__=[,((t,e)=>{var Xi;Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationReplyType=e.AnnotationPrefix=e.AnnotationMode=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=fn,e.bytesToString=Ln,e.createValidAbsoluteUrl=xn,e.getModificationDate=di,e.getUuid=Vi,e.getVerbosityLevel=Tn,e.info=hn,e.isArrayBuffer=qn,e.isArrayEqual=yi,e.isNodeJS=void 0,e.normalizeUnicode=ui,e.objectFromMap=Wn,e.objectSize=ii,e.setVerbosityLevel=Sn,e.shadow=Je,e.string32=Yn,e.stringToBytes=Gn,e.stringToPDFString=Dn,e.stringToUTF8String=Jn,e.unreachable=bn,e.utf8StringToString=Qn,e.warn=pn;const r=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=r;const xe=[1,0,0,1,0,0];e.IDENTITY_MATRIX=xe;const Ee=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=Ee;const Ae=1e7;e.MAX_IMAGE_SIZE_TO_CACHE=Ae;const Pe=1.35;e.LINE_FACTOR=Pe;const Re=.35;e.LINE_DESCENT_FACTOR=Re;const Ce=Re/Pe;e.BASELINE_FACTOR=Ce;const Be={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=Be;const ke={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=ke;const Me="pdfjs_internal_editor_";e.AnnotationEditorPrefix=Me;const Fe={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};e.AnnotationEditorType=Fe;const Ve={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};e.AnnotationEditorParamsType=Ve;const Oe={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=Oe;const $e={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=$e;const Ge={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=Ge;const Ue={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=Ue;const Ye={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=Ye;const Qe={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=Qe;const rn={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=rn;const tn={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=tn;const an={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=an;const qe={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=qe;const Ke={O:"PageOpen",C:"PageClose"};e.PageActionEventType=Ke;const sn={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=sn;const gn={NONE:0,BINARY:1};e.CMapCompressionType=gn;const He={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=He;const en={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=en;let cn=sn.WARNINGS;function Sn(fi){Number.isInteger(fi)&&(cn=fi)}function Tn(){return cn}function hn(fi){cn>=sn.INFOS&&console.log(`Info: ${fi}`)}function pn(fi){cn>=sn.WARNINGS&&console.log(`Warning: ${fi}`)}function bn(fi){throw new Error(fi)}function fn(fi,ni){fi||bn(ni)}function An(fi){switch(fi==null?void 0:fi.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function xn(fi,ni=null,pi=null){if(!fi)return null;try{if(pi&&typeof fi=="string"){if(pi.addDefaultProtocol&&fi.startsWith("www.")){const hr=fi.match(/\./g);(hr==null?void 0:hr.length)>=2&&(fi=`http://${fi}`)}if(pi.tryConvertEncoding)try{fi=Jn(fi)}catch{}}const ji=ni?new URL(fi,ni):new URL(fi);if(An(ji))return ji}catch{}return null}function Je(fi,ni,pi,ji=!1){return Object.defineProperty(fi,ni,{value:pi,enumerable:!ji,configurable:!0,writable:!1}),pi}const We=(function(){function ni(pi,ji){this.constructor===ni&&bn("Cannot initialize BaseException."),this.message=pi,this.name=ji}return ni.prototype=new Error,ni.constructor=ni,ni})();e.BaseException=We;class Ze extends We{constructor(ni,pi){super(ni,"PasswordException"),this.code=pi}}e.PasswordException=Ze;class un extends We{constructor(ni,pi){super(ni,"UnknownErrorException"),this.details=pi}}e.UnknownErrorException=un;class yn extends We{constructor(ni){super(ni,"InvalidPDFException")}}e.InvalidPDFException=yn;class _n extends We{constructor(ni){super(ni,"MissingPDFException")}}e.MissingPDFException=_n;class wn extends We{constructor(ni,pi){super(ni,"UnexpectedResponseException"),this.status=pi}}e.UnexpectedResponseException=wn;class kn extends We{constructor(ni){super(ni,"FormatError")}}e.FormatError=kn;class $n extends We{constructor(ni){super(ni,"AbortException")}}e.AbortException=$n;function Ln(fi){(typeof fi!="object"||(fi==null?void 0:fi.length)===void 0)&&bn("Invalid argument for bytesToString");const ni=fi.length,pi=8192;if(ni<pi)return String.fromCharCode.apply(null,fi);const ji=[];for(let hr=0;hr<ni;hr+=pi){const ar=Math.min(hr+pi,ni),Fn=fi.subarray(hr,ar);ji.push(String.fromCharCode.apply(null,Fn))}return ji.join("")}function Gn(fi){typeof fi!="string"&&bn("Invalid argument for stringToBytes");const ni=fi.length,pi=new Uint8Array(ni);for(let ji=0;ji<ni;++ji)pi[ji]=fi.charCodeAt(ji)&255;return pi}function Yn(fi){return String.fromCharCode(fi>>24&255,fi>>16&255,fi>>8&255,fi&255)}function ii(fi){return Object.keys(fi).length}function Wn(fi){const ni=Object.create(null);for(const[pi,ji]of fi)ni[pi]=ji;return ni}function Pn(){const fi=new Uint8Array(4);return fi[0]=1,new Uint32Array(fi.buffer,0,1)[0]===1}function Zn(){try{return new Function(""),!0}catch{return!1}}class mn{static get isLittleEndian(){return Je(this,"isLittleEndian",Pn())}static get isEvalSupported(){return Je(this,"isEvalSupported",Zn())}static get isOffscreenCanvasSupported(){return Je(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?Je(this,"platform",{isWin:!1,isMac:!1}):Je(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var ni,pi;return Je(this,"isCSSRoundSupported",(pi=(ni=globalThis.CSS)==null?void 0:ni.supports)==null?void 0:pi.call(ni,"width: round(1.5px, 1px)"))}}e.FeatureTest=mn;const Cn=[...Array(256).keys()].map(fi=>fi.toString(16).padStart(2,"0"));class jn{static makeHexColor(ni,pi,ji){return`#${Cn[ni]}${Cn[pi]}${Cn[ji]}`}static scaleMinMax(ni,pi){let ji;ni[0]?(ni[0]<0&&(ji=pi[0],pi[0]=pi[1],pi[1]=ji),pi[0]*=ni[0],pi[1]*=ni[0],ni[3]<0&&(ji=pi[2],pi[2]=pi[3],pi[3]=ji),pi[2]*=ni[3],pi[3]*=ni[3]):(ji=pi[0],pi[0]=pi[2],pi[2]=ji,ji=pi[1],pi[1]=pi[3],pi[3]=ji,ni[1]<0&&(ji=pi[2],pi[2]=pi[3],pi[3]=ji),pi[2]*=ni[1],pi[3]*=ni[1],ni[2]<0&&(ji=pi[0],pi[0]=pi[1],pi[1]=ji),pi[0]*=ni[2],pi[1]*=ni[2]),pi[0]+=ni[4],pi[1]+=ni[4],pi[2]+=ni[5],pi[3]+=ni[5]}static transform(ni,pi){return[ni[0]*pi[0]+ni[2]*pi[1],ni[1]*pi[0]+ni[3]*pi[1],ni[0]*pi[2]+ni[2]*pi[3],ni[1]*pi[2]+ni[3]*pi[3],ni[0]*pi[4]+ni[2]*pi[5]+ni[4],ni[1]*pi[4]+ni[3]*pi[5]+ni[5]]}static applyTransform(ni,pi){const ji=ni[0]*pi[0]+ni[1]*pi[2]+pi[4],hr=ni[0]*pi[1]+ni[1]*pi[3]+pi[5];return[ji,hr]}static applyInverseTransform(ni,pi){const ji=pi[0]*pi[3]-pi[1]*pi[2],hr=(ni[0]*pi[3]-ni[1]*pi[2]+pi[2]*pi[5]-pi[4]*pi[3])/ji,ar=(-ni[0]*pi[1]+ni[1]*pi[0]+pi[4]*pi[1]-pi[5]*pi[0])/ji;return[hr,ar]}static getAxialAlignedBoundingBox(ni,pi){const ji=this.applyTransform(ni,pi),hr=this.applyTransform(ni.slice(2,4),pi),ar=this.applyTransform([ni[0],ni[3]],pi),Fn=this.applyTransform([ni[2],ni[1]],pi);return[Math.min(ji[0],hr[0],ar[0],Fn[0]),Math.min(ji[1],hr[1],ar[1],Fn[1]),Math.max(ji[0],hr[0],ar[0],Fn[0]),Math.max(ji[1],hr[1],ar[1],Fn[1])]}static inverseTransform(ni){const pi=ni[0]*ni[3]-ni[1]*ni[2];return[ni[3]/pi,-ni[1]/pi,-ni[2]/pi,ni[0]/pi,(ni[2]*ni[5]-ni[4]*ni[3])/pi,(ni[4]*ni[1]-ni[5]*ni[0])/pi]}static singularValueDecompose2dScale(ni){const pi=[ni[0],ni[2],ni[1],ni[3]],ji=ni[0]*pi[0]+ni[1]*pi[2],hr=ni[0]*pi[1]+ni[1]*pi[3],ar=ni[2]*pi[0]+ni[3]*pi[2],Fn=ni[2]*pi[1]+ni[3]*pi[3],Si=(ji+Fn)/2,Mi=Math.sqrt((ji+Fn)**2-4*(ji*Fn-ar*hr))/2,ki=Si+Mi||1,$i=Si-Mi||1;return[Math.sqrt(ki),Math.sqrt($i)]}static normalizeRect(ni){const pi=ni.slice(0);return ni[0]>ni[2]&&(pi[0]=ni[2],pi[2]=ni[0]),ni[1]>ni[3]&&(pi[1]=ni[3],pi[3]=ni[1]),pi}static intersect(ni,pi){const ji=Math.max(Math.min(ni[0],ni[2]),Math.min(pi[0],pi[2])),hr=Math.min(Math.max(ni[0],ni[2]),Math.max(pi[0],pi[2]));if(ji>hr)return null;const ar=Math.max(Math.min(ni[1],ni[3]),Math.min(pi[1],pi[3])),Fn=Math.min(Math.max(ni[1],ni[3]),Math.max(pi[1],pi[3]));return ar>Fn?null:[ji,ar,hr,Fn]}static bezierBoundingBox(ni,pi,ji,hr,ar,Fn,Si,Mi){const ki=[],$i=[[],[]];let tr,Hn,Un,ti,ei,si,Ri,Bi;for(let fr=0;fr<2;++fr){if(fr===0?(Hn=6*ni-12*ji+6*ar,tr=-3*ni+9*ji-9*ar+3*Si,Un=3*ji-3*ni):(Hn=6*pi-12*hr+6*Fn,tr=-3*pi+9*hr-9*Fn+3*Mi,Un=3*hr-3*pi),Math.abs(tr)<1e-12){if(Math.abs(Hn)<1e-12)continue;ti=-Un/Hn,0<ti&&ti<1&&ki.push(ti);continue}Ri=Hn*Hn-4*Un*tr,Bi=Math.sqrt(Ri),!(Ri<0)&&(ei=(-Hn+Bi)/(2*tr),0<ei&&ei<1&&ki.push(ei),si=(-Hn-Bi)/(2*tr),0<si&&si<1&&ki.push(si))}let er=ki.length,Zi;const Yi=er;for(;er--;)ti=ki[er],Zi=1-ti,$i[0][er]=Zi*Zi*Zi*ni+3*Zi*Zi*ti*ji+3*Zi*ti*ti*ar+ti*ti*ti*Si,$i[1][er]=Zi*Zi*Zi*pi+3*Zi*Zi*ti*hr+3*Zi*ti*ti*Fn+ti*ti*ti*Mi;return $i[0][Yi]=ni,$i[1][Yi]=pi,$i[0][Yi+1]=Si,$i[1][Yi+1]=Mi,$i[0].length=$i[1].length=Yi+2,[Math.min(...$i[0]),Math.min(...$i[1]),Math.max(...$i[0]),Math.max(...$i[1])]}}e.Util=jn;const Rn=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Dn(fi){if(fi[0]>=""){let pi;if(fi[0]===""&&fi[1]===""?pi="utf-16be":fi[0]===""&&fi[1]===""?pi="utf-16le":fi[0]===""&&fi[1]===""&&fi[2]===""&&(pi="utf-8"),pi)try{const ji=new TextDecoder(pi,{fatal:!0}),hr=Gn(fi);return ji.decode(hr)}catch(ji){pn(`stringToPDFString: "${ji}".`)}}const ni=[];for(let pi=0,ji=fi.length;pi<ji;pi++){const hr=Rn[fi.charCodeAt(pi)];ni.push(hr?String.fromCharCode(hr):fi.charAt(pi))}return ni.join("")}function Jn(fi){return decodeURIComponent(escape(fi))}function Qn(fi){return unescape(encodeURIComponent(fi))}function qn(fi){return typeof fi=="object"&&(fi==null?void 0:fi.byteLength)!==void 0}function yi(fi,ni){if(fi.length!==ni.length)return!1;for(let pi=0,ji=fi.length;pi<ji;pi++)if(fi[pi]!==ni[pi])return!1;return!0}function di(fi=new Date){return[fi.getUTCFullYear().toString(),(fi.getUTCMonth()+1).toString().padStart(2,"0"),fi.getUTCDate().toString().padStart(2,"0"),fi.getUTCHours().toString().padStart(2,"0"),fi.getUTCMinutes().toString().padStart(2,"0"),fi.getUTCSeconds().toString().padStart(2,"0")].join("")}class zi{constructor(){bi(this,Xi,!1);this.promise=new Promise((ni,pi)=>{this.resolve=ji=>{xi(this,Xi,!0),ni(ji)},this.reject=ji=>{xi(this,Xi,!0),pi(ji)}})}get settled(){return dn(this,Xi)}}Xi=new WeakMap,e.PromiseCapability=zi;let Ni=null,Gi=null;function ui(fi){return Ni||(Ni=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Gi=new Map([["","t"]])),fi.replaceAll(Ni,(ni,pi,ji)=>pi?pi.normalize("NFKC"):Gi.get(ji))}function Vi(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const fi=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(fi);else for(let ni=0;ni<32;ni++)fi[ni]=Math.floor(Math.random()*255);return Ln(fi)}const Di="pdfjs_internal_id_";e.AnnotationPrefix=Di}),((__unused_webpack_module,exports$1,__w_pdfjs_require__)=>{var t,r,xe,Ee,Xc,Dd,Re,Ce,Be,ke,Me,Fe,Ve,Oe,$e,Fd,Ue,Ye,cp,rn,tn;Object.defineProperty(exports$1,"__esModule",{value:!0}),exports$1.RenderTask=exports$1.PDFWorkerUtil=exports$1.PDFWorker=exports$1.PDFPageProxy=exports$1.PDFDocumentProxy=exports$1.PDFDocumentLoadingTask=exports$1.PDFDataRangeTransport=exports$1.LoopbackPort=exports$1.DefaultStandardFontDataFactory=exports$1.DefaultFilterFactory=exports$1.DefaultCanvasFactory=exports$1.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports$1,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports$1.build=void 0,exports$1.getDocument=getDocument,exports$1.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports$1.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports$1.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports$1.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports$1.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(qe){if(typeof qe=="string"||qe instanceof URL?qe={url:qe}:(0,_util.isArrayBuffer)(qe)&&(qe={data:qe}),typeof qe!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!qe.url&&!qe.data&&!qe.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const Ke=new PDFDocumentLoadingTask,{docId:sn}=Ke,gn=qe.url?getUrlProp(qe.url):null,He=qe.data?getDataProp(qe.data):null,en=qe.httpHeaders||null,cn=qe.withCredentials===!0,Sn=qe.password??null,Tn=qe.range instanceof PDFDataRangeTransport?qe.range:null,hn=Number.isInteger(qe.rangeChunkSize)&&qe.rangeChunkSize>0?qe.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let pn=qe.worker instanceof PDFWorker?qe.worker:null;const bn=qe.verbosity,fn=typeof qe.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(qe.docBaseUrl)?qe.docBaseUrl:null,An=typeof qe.cMapUrl=="string"?qe.cMapUrl:null,xn=qe.cMapPacked!==!1,Je=qe.CMapReaderFactory||DefaultCMapReaderFactory,We=typeof qe.standardFontDataUrl=="string"?qe.standardFontDataUrl:null,Ze=qe.StandardFontDataFactory||DefaultStandardFontDataFactory,un=qe.stopAtErrors!==!0,yn=Number.isInteger(qe.maxImageSize)&&qe.maxImageSize>-1?qe.maxImageSize:-1,_n=qe.isEvalSupported!==!1,wn=typeof qe.isOffscreenCanvasSupported=="boolean"?qe.isOffscreenCanvasSupported:!_util.isNodeJS,kn=Number.isInteger(qe.canvasMaxAreaInBytes)?qe.canvasMaxAreaInBytes:-1,$n=typeof qe.disableFontFace=="boolean"?qe.disableFontFace:_util.isNodeJS,Ln=qe.fontExtraProperties===!0,Gn=qe.enableXfa===!0,Yn=qe.ownerDocument||globalThis.document,ii=qe.disableRange===!0,Wn=qe.disableStream===!0,Pn=qe.disableAutoFetch===!0,Zn=qe.pdfBug===!0,mn=Tn?Tn.length:qe.length??NaN,Cn=typeof qe.useSystemFonts=="boolean"?qe.useSystemFonts:!_util.isNodeJS&&!$n,jn=typeof qe.useWorkerFetch=="boolean"?qe.useWorkerFetch:Je===_display_utils.DOMCMapReaderFactory&&Ze===_display_utils.DOMStandardFontDataFactory&&An&&We&&(0,_display_utils.isValidFetchUrl)(An,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(We,document.baseURI),Rn=qe.canvasFactory||new DefaultCanvasFactory({ownerDocument:Yn}),Dn=qe.filterFactory||new DefaultFilterFactory({docId:sn,ownerDocument:Yn}),Jn=null;(0,_util.setVerbosityLevel)(bn);const Qn={canvasFactory:Rn,filterFactory:Dn};if(jn||(Qn.cMapReaderFactory=new Je({baseUrl:An,isCompressed:xn}),Qn.standardFontDataFactory=new Ze({baseUrl:We})),!pn){const di={verbosity:bn,port:_worker_options.GlobalWorkerOptions.workerPort};pn=di.port?PDFWorker.fromPort(di):new PDFWorker(di),Ke._worker=pn}const qn={docId:sn,apiVersion:"3.11.174",data:He,password:Sn,disableAutoFetch:Pn,rangeChunkSize:hn,length:mn,docBaseUrl:fn,enableXfa:Gn,evaluatorOptions:{maxImageSize:yn,disableFontFace:$n,ignoreErrors:un,isEvalSupported:_n,isOffscreenCanvasSupported:wn,canvasMaxAreaInBytes:kn,fontExtraProperties:Ln,useSystemFonts:Cn,cMapUrl:jn?An:null,standardFontDataUrl:jn?We:null}},yi={ignoreErrors:un,isEvalSupported:_n,disableFontFace:$n,fontExtraProperties:Ln,enableXfa:Gn,ownerDocument:Yn,disableAutoFetch:Pn,pdfBug:Zn,styleElement:Jn};return pn.promise.then(function(){if(Ke.destroyed)throw new Error("Loading aborted");const di=_fetchDocument(pn,qn),zi=new Promise(function(Ni){let Gi;Tn?Gi=new _transport_stream.PDFDataTransportStream({length:mn,initialData:Tn.initialData,progressiveDone:Tn.progressiveDone,contentDispositionFilename:Tn.contentDispositionFilename,disableRange:ii,disableStream:Wn},Tn):He||(Gi=(Vi=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Vi):(0,_display_utils.isValidFetchUrl)(Vi.url)?new _displayFetch_stream.PDFFetchStream(Vi):new _displayNetwork.PDFNetworkStream(Vi))({url:gn,length:mn,httpHeaders:en,withCredentials:cn,rangeChunkSize:hn,disableRange:ii,disableStream:Wn})),Ni(Gi)});return Promise.all([di,zi]).then(function([Ni,Gi]){if(Ke.destroyed)throw new Error("Loading aborted");const ui=new _message_handler.MessageHandler(sn,Ni,pn.port),Vi=new WorkerTransport(ui,Ke,Gi,yi,Qn);Ke._transport=Vi,ui.send("Ready",null)})}).catch(Ke._capability.reject),Ke}async function _fetchDocument(qe,Ke){if(qe.destroyed)throw new Error("Worker was destroyed");const sn=await qe.messageHandler.sendWithPromise("GetDocRequest",Ke,Ke.data?[Ke.data.buffer]:null);if(qe.destroyed)throw new Error("Worker was destroyed");return sn}function getUrlProp(qe){if(qe instanceof URL)return qe.href;try{return new URL(qe,window.location).href}catch{if(_util.isNodeJS&&typeof qe=="string")return qe}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(qe){if(_util.isNodeJS&&typeof Buffer<"u"&&qe instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(qe instanceof Uint8Array&&qe.byteLength===qe.buffer.byteLength)return qe;if(typeof qe=="string")return(0,_util.stringToBytes)(qe);if(typeof qe=="object"&&!isNaN(qe==null?void 0:qe.length)||(0,_util.isArrayBuffer)(qe))return new Uint8Array(qe);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const e=class e{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${Oh(e,t)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var Ke,sn,gn;this.destroyed=!0;try{(Ke=this._worker)!=null&&Ke.port&&(this._worker._pendingDestroy=!0),await((sn=this._transport)==null?void 0:sn.destroy())}catch(He){throw(gn=this._worker)!=null&&gn.port&&delete this._worker._pendingDestroy,He}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};t=new WeakMap,bi(e,t,0);let PDFDocumentLoadingTask=e;exports$1.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(Ke,sn,gn=!1,He=null){this.length=Ke,this.initialData=sn,this.progressiveDone=gn,this.contentDispositionFilename=He,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(Ke){this._rangeListeners.push(Ke)}addProgressListener(Ke){this._progressListeners.push(Ke)}addProgressiveReadListener(Ke){this._progressiveReadListeners.push(Ke)}addProgressiveDoneListener(Ke){this._progressiveDoneListeners.push(Ke)}onDataRange(Ke,sn){for(const gn of this._rangeListeners)gn(Ke,sn)}onDataProgress(Ke,sn){this._readyCapability.promise.then(()=>{for(const gn of this._progressListeners)gn(Ke,sn)})}onDataProgressiveRead(Ke){this._readyCapability.promise.then(()=>{for(const sn of this._progressiveReadListeners)sn(Ke)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const Ke of this._progressiveDoneListeners)Ke()})}transportReady(){this._readyCapability.resolve()}requestDataRange(Ke,sn){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports$1.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(Ke,sn){this._pdfInfo=Ke,this._transport=sn,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(gn=>{if(!gn)return gn;const He=[];for(const en in gn)He.push(...gn[en]);return He}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(Ke){return this._transport.getPage(Ke)}getPageIndex(Ke){return this._transport.getPageIndex(Ke)}getDestinations(){return this._transport.getDestinations()}getDestination(Ke){return this._transport.getDestination(Ke)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(Ke=!1){return this._transport.startCleanup(Ke||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports$1.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(Ke,sn,gn,He=!1){bi(this,Ee);bi(this,r,null);bi(this,xe,!1);this._pageIndex=Ke,this._pageInfo=sn,this._transport=gn,this._stats=He?new _display_utils.StatTimer:null,this._pdfBug=He,this.commonObjs=gn.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:Ke,rotation:sn=this.rotate,offsetX:gn=0,offsetY:He=0,dontFlip:en=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:Ke,rotation:sn,offsetX:gn,offsetY:He,dontFlip:en})}getAnnotations({intent:Ke="display"}={}){const sn=this._transport.getRenderingIntent(Ke);return this._transport.getAnnotations(this._pageIndex,sn.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var Ke;return((Ke=this._transport._htmlForXfa)==null?void 0:Ke.children[this._pageIndex])||null}render({canvasContext:Ke,viewport:sn,intent:gn="display",annotationMode:He=_util.AnnotationMode.ENABLE,transform:en=null,background:cn=null,optionalContentConfigPromise:Sn=null,annotationCanvasMap:Tn=null,pageColors:hn=null,printAnnotationStorage:pn=null}){var Ze,un;(Ze=this._stats)==null||Ze.time("Overall");const bn=this._transport.getRenderingIntent(gn,He,pn);xi(this,xe,!1),oi(this,Ee,Dd).call(this),Sn||(Sn=this._transport.getOptionalContentConfig());let fn=this._intentStates.get(bn.cacheKey);fn||(fn=Object.create(null),this._intentStates.set(bn.cacheKey,fn)),fn.streamReaderCancelTimeout&&(clearTimeout(fn.streamReaderCancelTimeout),fn.streamReaderCancelTimeout=null);const An=!!(bn.renderingIntent&_util.RenderingIntentFlag.PRINT);fn.displayReadyCapability||(fn.displayReadyCapability=new _util.PromiseCapability,fn.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(un=this._stats)==null||un.time("Page Request"),this._pumpOperatorList(bn));const xn=yn=>{var _n,wn;fn.renderTasks.delete(Je),(this._maybeCleanupAfterRender||An)&&xi(this,xe,!0),oi(this,Ee,Xc).call(this,!An),yn?(Je.capability.reject(yn),this._abortOperatorList({intentState:fn,reason:yn instanceof Error?yn:new Error(yn)})):Je.capability.resolve(),(_n=this._stats)==null||_n.timeEnd("Rendering"),(wn=this._stats)==null||wn.timeEnd("Overall")},Je=new InternalRenderTask({callback:xn,params:{canvasContext:Ke,viewport:sn,transform:en,background:cn},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Tn,operatorList:fn.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!An,pdfBug:this._pdfBug,pageColors:hn});(fn.renderTasks||(fn.renderTasks=new Set)).add(Je);const We=Je.task;return Promise.all([fn.displayReadyCapability.promise,Sn]).then(([yn,_n])=>{var wn;if(this.destroyed){xn();return}(wn=this._stats)==null||wn.time("Rendering"),Je.initializeGraphics({transparency:yn,optionalContentConfig:_n}),Je.operatorListChanged()}).catch(xn),We}getOperatorList({intent:Ke="display",annotationMode:sn=_util.AnnotationMode.ENABLE,printAnnotationStorage:gn=null}={}){var Tn;function He(){cn.operatorList.lastChunk&&(cn.opListReadCapability.resolve(cn.operatorList),cn.renderTasks.delete(Sn))}const en=this._transport.getRenderingIntent(Ke,sn,gn,!0);let cn=this._intentStates.get(en.cacheKey);cn||(cn=Object.create(null),this._intentStates.set(en.cacheKey,cn));let Sn;return cn.opListReadCapability||(Sn=Object.create(null),Sn.operatorListChanged=He,cn.opListReadCapability=new _util.PromiseCapability,(cn.renderTasks||(cn.renderTasks=new Set)).add(Sn),cn.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Tn=this._stats)==null||Tn.time("Page Request"),this._pumpOperatorList(en)),cn.opListReadCapability.promise}streamTextContent({includeMarkedContent:Ke=!1,disableNormalization:sn=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:Ke===!0,disableNormalization:sn===!0},{highWaterMark:100,size(He){return He.items.length}})}getTextContent(Ke={}){if(this._transport._htmlForXfa)return this.getXfa().then(gn=>_xfa_text.XfaText.textContent(gn));const sn=this.streamTextContent(Ke);return new Promise(function(gn,He){function en(){cn.read().then(function({value:Tn,done:hn}){if(hn){gn(Sn);return}Object.assign(Sn.styles,Tn.styles),Sn.items.push(...Tn.items),en()},He)}const cn=sn.getReader(),Sn={items:[],styles:Object.create(null)};en()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const Ke=[];for(const sn of this._intentStates.values())if(this._abortOperatorList({intentState:sn,reason:new Error("Page was destroyed."),force:!0}),!sn.opListReadCapability)for(const gn of sn.renderTasks)Ke.push(gn.completed),gn.cancel();return this.objs.clear(),xi(this,xe,!1),oi(this,Ee,Dd).call(this),Promise.all(Ke)}cleanup(Ke=!1){xi(this,xe,!0);const sn=oi(this,Ee,Xc).call(this,!1);return Ke&&sn&&this._stats&&(this._stats=new _display_utils.StatTimer),sn}_startRenderPage(Ke,sn){var He,en;const gn=this._intentStates.get(sn);gn&&((He=this._stats)==null||He.timeEnd("Page Request"),(en=gn.displayReadyCapability)==null||en.resolve(Ke))}_renderPageChunk(Ke,sn){for(let gn=0,He=Ke.length;gn<He;gn++)sn.operatorList.fnArray.push(Ke.fnArray[gn]),sn.operatorList.argsArray.push(Ke.argsArray[gn]);sn.operatorList.lastChunk=Ke.lastChunk,sn.operatorList.separateAnnots=Ke.separateAnnots;for(const gn of sn.renderTasks)gn.operatorListChanged();Ke.lastChunk&&oi(this,Ee,Xc).call(this,!0)}_pumpOperatorList({renderingIntent:Ke,cacheKey:sn,annotationStorageSerializable:gn}){const{map:He,transfers:en}=gn,Sn=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:Ke,cacheKey:sn,annotationStorage:He},en).getReader(),Tn=this._intentStates.get(sn);Tn.streamReader=Sn;const hn=()=>{Sn.read().then(({value:pn,done:bn})=>{if(bn){Tn.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(pn,Tn),hn())},pn=>{if(Tn.streamReader=null,!this._transport.destroyed){if(Tn.operatorList){Tn.operatorList.lastChunk=!0;for(const bn of Tn.renderTasks)bn.operatorListChanged();oi(this,Ee,Xc).call(this,!0)}if(Tn.displayReadyCapability)Tn.displayReadyCapability.reject(pn);else if(Tn.opListReadCapability)Tn.opListReadCapability.reject(pn);else throw pn}})};hn()}_abortOperatorList({intentState:Ke,reason:sn,force:gn=!1}){if(Ke.streamReader){if(Ke.streamReaderCancelTimeout&&(clearTimeout(Ke.streamReaderCancelTimeout),Ke.streamReaderCancelTimeout=null),!gn){if(Ke.renderTasks.size>0)return;if(sn instanceof _display_utils.RenderingCancelledException){let He=RENDERING_CANCELLED_TIMEOUT;sn.extraDelay>0&&sn.extraDelay<1e3&&(He+=sn.extraDelay),Ke.streamReaderCancelTimeout=setTimeout(()=>{Ke.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:Ke,reason:sn,force:!0})},He);return}}if(Ke.streamReader.cancel(new _util.AbortException(sn.message)).catch(()=>{}),Ke.streamReader=null,!this._transport.destroyed){for(const[He,en]of this._intentStates)if(en===Ke){this._intentStates.delete(He);break}this.cleanup()}}}get stats(){return this._stats}}r=new WeakMap,xe=new WeakMap,Ee=new WeakSet,Xc=function(Ke=!1){if(oi(this,Ee,Dd).call(this),!dn(this,xe)||this.destroyed)return!1;if(Ke)return xi(this,r,setTimeout(()=>{xi(this,r,null),oi(this,Ee,Xc).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:sn,operatorList:gn}of this._intentStates.values())if(sn.size>0||!gn.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),xi(this,xe,!1),!0},Dd=function(){dn(this,r)&&(clearTimeout(dn(this,r)),xi(this,r,null))},exports$1.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){bi(this,Re,new Set);bi(this,Ce,Promise.resolve())}postMessage(Ke,sn){const gn={data:structuredClone(Ke,sn?{transfer:sn}:null)};dn(this,Ce).then(()=>{for(const He of dn(this,Re))He.call(this,gn)})}addEventListener(Ke,sn){dn(this,Re).add(sn)}removeEventListener(Ke,sn){dn(this,Re).delete(sn)}terminate(){dn(this,Re).clear()}}Re=new WeakMap,Ce=new WeakMap,exports$1.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports$1.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const qe=(Be=document==null?void 0:document.currentScript)==null?void 0:Be.src;qe&&(PDFWorkerUtil.fallbackWorkerSrc=qe.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(qe,Ke){let sn;try{if(sn=new URL(qe),!sn.origin||sn.origin==="null")return!1}catch{return!1}const gn=new URL(Ke,sn);return sn.origin===gn.origin},PDFWorkerUtil.createCDNWrapper=function(qe){const Ke=`importScripts("${qe}");`;return URL.createObjectURL(new Blob([Ke]))}}const _PDFWorker=class _PDFWorker{constructor({name:qe=null,port:Ke=null,verbosity:sn=(0,_util.getVerbosityLevel)()}={}){var gn;if(this.name=qe,this.destroyed=!1,this.verbosity=sn,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,Ke){if((gn=dn(_PDFWorker,ke))!=null&&gn.has(Ke))throw new Error("Cannot use more than one PDFWorker per port.");(dn(_PDFWorker,ke)||xi(_PDFWorker,ke,new WeakMap)).set(Ke,this),this._initializeFromPort(Ke);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(qe){this._port=qe,this._messageHandler=new _message_handler.MessageHandler("main","worker",qe),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:qe}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,qe)||(qe=PDFWorkerUtil.createCDNWrapper(new URL(qe,window.location).href));const Ke=new Worker(qe),sn=new _message_handler.MessageHandler("main","worker",Ke),gn=()=>{Ke.removeEventListener("error",He),sn.destroy(),Ke.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},He=()=>{this._webWorker||gn()};Ke.addEventListener("error",He),sn.on("test",cn=>{if(Ke.removeEventListener("error",He),this.destroyed){gn();return}cn?(this._messageHandler=sn,this._port=Ke,this._webWorker=Ke,this._readyCapability.resolve(),sn.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),sn.destroy(),Ke.terminate())}),sn.on("ready",cn=>{if(Ke.removeEventListener("error",He),this.destroyed){gn();return}try{en()}catch{this._setupFakeWorker()}});const en=()=>{const cn=new Uint8Array;sn.send("test",cn,[cn.buffer])};en();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(qe=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const Ke=new LoopbackPort;this._port=Ke;const sn=`fake${PDFWorkerUtil.fakeWorkerId++}`,gn=new _message_handler.MessageHandler(sn+"_worker",sn,Ke);qe.setup(gn,Ke);const He=new _message_handler.MessageHandler(sn,sn+"_worker",Ke);this._messageHandler=He,this._readyCapability.resolve(),He.send("configure",{verbosity:this.verbosity})}).catch(qe=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${qe.message}".`))})}destroy(){var qe;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(qe=dn(_PDFWorker,ke))==null||qe.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(qe){var sn;if(!(qe!=null&&qe.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const Ke=(sn=dn(this,ke))==null?void 0:sn.get(qe.port);if(Ke){if(Ke._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return Ke}return new _PDFWorker(qe)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var qe;try{return((qe=globalThis.pdfjsWorker)==null?void 0:qe.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};ke=new WeakMap,bi(_PDFWorker,ke);let PDFWorker=_PDFWorker;exports$1.PDFWorker=PDFWorker;class WorkerTransport{constructor(Ke,sn,gn,He,en){bi(this,$e);bi(this,Me,new Map);bi(this,Fe,new Map);bi(this,Ve,new Map);bi(this,Oe,null);this.messageHandler=Ke,this.loadingTask=sn,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:He.ownerDocument,styleElement:He.styleElement}),this._params=He,this.canvasFactory=en.canvasFactory,this.filterFactory=en.filterFactory,this.cMapReaderFactory=en.cMapReaderFactory,this.standardFontDataFactory=en.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=gn,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(Ke,sn=_util.AnnotationMode.ENABLE,gn=null,He=!1){let en=_util.RenderingIntentFlag.DISPLAY,cn=_annotation_storage.SerializableEmpty;switch(Ke){case"any":en=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":en=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${Ke}`)}switch(sn){case _util.AnnotationMode.DISABLE:en+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:en+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:en+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,cn=(en&_util.RenderingIntentFlag.PRINT&&gn instanceof _annotation_storage.PrintAnnotationStorage?gn:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${sn}`)}return He&&(en+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:en,cacheKey:`${en}_${cn.hash}`,annotationStorageSerializable:cn}}destroy(){var gn;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(gn=dn(this,Oe))==null||gn.reject(new Error("Worker was destroyed during onPassword callback"));const Ke=[];for(const He of dn(this,Fe).values())Ke.push(He._destroy());dn(this,Fe).clear(),dn(this,Ve).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const sn=this.messageHandler.sendWithPromise("Terminate",null);return Ke.push(sn),Promise.all(Ke).then(()=>{var He;this.commonObjs.clear(),this.fontLoader.clear(),dn(this,Me).clear(),this.filterFactory.destroy(),(He=this._networkStream)==null||He.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:Ke,loadingTask:sn}=this;Ke.on("GetReader",(gn,He)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=en=>{this._lastProgress={loaded:en.loaded,total:en.total}},He.onPull=()=>{this._fullReader.read().then(function({value:en,done:cn}){if(cn){He.close();return}(0,_util.assert)(en instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),He.enqueue(new Uint8Array(en),1,[en])}).catch(en=>{He.error(en)})},He.onCancel=en=>{this._fullReader.cancel(en),He.ready.catch(cn=>{if(!this.destroyed)throw cn})}}),Ke.on("ReaderHeadersReady",gn=>{const He=new _util.PromiseCapability,en=this._fullReader;return en.headersReady.then(()=>{var cn;(!en.isStreamingSupported||!en.isRangeSupported)&&(this._lastProgress&&((cn=sn.onProgress)==null||cn.call(sn,this._lastProgress)),en.onProgress=Sn=>{var Tn;(Tn=sn.onProgress)==null||Tn.call(sn,{loaded:Sn.loaded,total:Sn.total})}),He.resolve({isStreamingSupported:en.isStreamingSupported,isRangeSupported:en.isRangeSupported,contentLength:en.contentLength})},He.reject),He.promise}),Ke.on("GetRangeReader",(gn,He)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const en=this._networkStream.getRangeReader(gn.begin,gn.end);if(!en){He.close();return}He.onPull=()=>{en.read().then(function({value:cn,done:Sn}){if(Sn){He.close();return}(0,_util.assert)(cn instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),He.enqueue(new Uint8Array(cn),1,[cn])}).catch(cn=>{He.error(cn)})},He.onCancel=cn=>{en.cancel(cn),He.ready.catch(Sn=>{if(!this.destroyed)throw Sn})}}),Ke.on("GetDoc",({pdfInfo:gn})=>{this._numPages=gn.numPages,this._htmlForXfa=gn.htmlForXfa,delete gn.htmlForXfa,sn._capability.resolve(new PDFDocumentProxy(gn,this))}),Ke.on("DocException",function(gn){let He;switch(gn.name){case"PasswordException":He=new _util.PasswordException(gn.message,gn.code);break;case"InvalidPDFException":He=new _util.InvalidPDFException(gn.message);break;case"MissingPDFException":He=new _util.MissingPDFException(gn.message);break;case"UnexpectedResponseException":He=new _util.UnexpectedResponseException(gn.message,gn.status);break;case"UnknownErrorException":He=new _util.UnknownErrorException(gn.message,gn.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}sn._capability.reject(He)}),Ke.on("PasswordRequest",gn=>{if(xi(this,Oe,new _util.PromiseCapability),sn.onPassword){const He=en=>{en instanceof Error?dn(this,Oe).reject(en):dn(this,Oe).resolve({password:en})};try{sn.onPassword(He,gn.code)}catch(en){dn(this,Oe).reject(en)}}else dn(this,Oe).reject(new _util.PasswordException(gn.message,gn.code));return dn(this,Oe).promise}),Ke.on("DataLoaded",gn=>{var He;(He=sn.onProgress)==null||He.call(sn,{loaded:gn.length,total:gn.length}),this.downloadInfoCapability.resolve(gn)}),Ke.on("StartRenderPage",gn=>{if(this.destroyed)return;dn(this,Fe).get(gn.pageIndex)._startRenderPage(gn.transparency,gn.cacheKey)}),Ke.on("commonobj",([gn,He,en])=>{var cn;if(!this.destroyed&&!this.commonObjs.has(gn))switch(He){case"Font":const Sn=this._params;if("error"in en){const pn=en.error;(0,_util.warn)(`Error during font loading: ${pn}`),this.commonObjs.resolve(gn,pn);break}const Tn=Sn.pdfBug&&((cn=globalThis.FontInspector)!=null&&cn.enabled)?(pn,bn)=>globalThis.FontInspector.fontAdded(pn,bn):null,hn=new _font_loader.FontFaceObject(en,{isEvalSupported:Sn.isEvalSupported,disableFontFace:Sn.disableFontFace,ignoreErrors:Sn.ignoreErrors,inspectFont:Tn});this.fontLoader.bind(hn).catch(pn=>Ke.sendWithPromise("FontFallback",{id:gn})).finally(()=>{!Sn.fontExtraProperties&&hn.data&&(hn.data=null),this.commonObjs.resolve(gn,hn)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(gn,en);break;default:throw new Error(`Got unknown common object type ${He}`)}}),Ke.on("obj",([gn,He,en,cn])=>{var Tn;if(this.destroyed)return;const Sn=dn(this,Fe).get(He);if(!Sn.objs.has(gn))switch(en){case"Image":if(Sn.objs.resolve(gn,cn),cn){let hn;if(cn.bitmap){const{width:pn,height:bn}=cn;hn=pn*bn*4}else hn=((Tn=cn.data)==null?void 0:Tn.length)||0;hn>_util.MAX_IMAGE_SIZE_TO_CACHE&&(Sn._maybeCleanupAfterRender=!0)}break;case"Pattern":Sn.objs.resolve(gn,cn);break;default:throw new Error(`Got unknown object type ${en}`)}}),Ke.on("DocProgress",gn=>{var He;this.destroyed||(He=sn.onProgress)==null||He.call(sn,{loaded:gn.loaded,total:gn.total})}),Ke.on("FetchBuiltInCMap",gn=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(gn):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),Ke.on("FetchStandardFontData",gn=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(gn):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var gn;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:Ke,transfers:sn}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:Ke,filename:((gn=this._fullReader)==null?void 0:gn.filename)??null},sn).finally(()=>{this.annotationStorage.resetModified()})}getPage(Ke){if(!Number.isInteger(Ke)||Ke<=0||Ke>this._numPages)return Promise.reject(new Error("Invalid page request."));const sn=Ke-1,gn=dn(this,Ve).get(sn);if(gn)return gn;const He=this.messageHandler.sendWithPromise("GetPage",{pageIndex:sn}).then(en=>{if(this.destroyed)throw new Error("Transport destroyed");const cn=new PDFPageProxy(sn,en,this,this._params.pdfBug);return dn(this,Fe).set(sn,cn),cn});return dn(this,Ve).set(sn,He),He}getPageIndex(Ke){return typeof Ke!="object"||Ke===null||!Number.isInteger(Ke.num)||Ke.num<0||!Number.isInteger(Ke.gen)||Ke.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:Ke.num,gen:Ke.gen})}getAnnotations(Ke,sn){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:Ke,intent:sn})}getFieldObjects(){return oi(this,$e,Fd).call(this,"GetFieldObjects")}hasJSActions(){return oi(this,$e,Fd).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(Ke){return typeof Ke!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:Ke})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return oi(this,$e,Fd).call(this,"GetDocJSActions")}getPageJSActions(Ke){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:Ke})}getStructTree(Ke){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:Ke})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(Ke=>new _optional_content_config.OptionalContentConfig(Ke))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const Ke="GetMetadata",sn=dn(this,Me).get(Ke);if(sn)return sn;const gn=this.messageHandler.sendWithPromise(Ke,null).then(He=>{var en,cn;return{info:He[0],metadata:He[1]?new _metadata.Metadata(He[1]):null,contentDispositionFilename:((en=this._fullReader)==null?void 0:en.filename)??null,contentLength:((cn=this._fullReader)==null?void 0:cn.contentLength)??null}});return dn(this,Me).set(Ke,gn),gn}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(Ke=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const sn of dn(this,Fe).values())if(!sn.cleanup())throw new Error(`startCleanup: Page ${sn.pageNumber} is currently rendering.`);this.commonObjs.clear(),Ke||this.fontLoader.clear(),dn(this,Me).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:Ke,enableXfa:sn}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:Ke,enableXfa:sn})}}Me=new WeakMap,Fe=new WeakMap,Ve=new WeakMap,Oe=new WeakMap,$e=new WeakSet,Fd=function(Ke,sn=null){const gn=dn(this,Me).get(Ke);if(gn)return gn;const He=this.messageHandler.sendWithPromise(Ke,sn);return dn(this,Me).set(Ke,He),He};class PDFObjects{constructor(){bi(this,Ye);bi(this,Ue,Object.create(null))}get(Ke,sn=null){if(sn){const He=oi(this,Ye,cp).call(this,Ke);return He.capability.promise.then(()=>sn(He.data)),null}const gn=dn(this,Ue)[Ke];if(!(gn!=null&&gn.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${Ke}.`);return gn.data}has(Ke){const sn=dn(this,Ue)[Ke];return(sn==null?void 0:sn.capability.settled)||!1}resolve(Ke,sn=null){const gn=oi(this,Ye,cp).call(this,Ke);gn.data=sn,gn.capability.resolve()}clear(){var Ke;for(const sn in dn(this,Ue)){const{data:gn}=dn(this,Ue)[sn];(Ke=gn==null?void 0:gn.bitmap)==null||Ke.close()}xi(this,Ue,Object.create(null))}}Ue=new WeakMap,Ye=new WeakSet,cp=function(Ke){var sn;return(sn=dn(this,Ue))[Ke]||(sn[Ke]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(Ke){bi(this,rn,null);xi(this,rn,Ke),this.onContinue=null}get promise(){return dn(this,rn).capability.promise}cancel(Ke=0){dn(this,rn).cancel(null,Ke)}get separateAnnots(){const{separateAnnots:Ke}=dn(this,rn).operatorList;if(!Ke)return!1;const{annotationCanvasMap:sn}=dn(this,rn);return Ke.form||Ke.canvas&&(sn==null?void 0:sn.size)>0}}rn=new WeakMap,exports$1.RenderTask=RenderTask;const an=class an{constructor({callback:Ke,params:sn,objs:gn,commonObjs:He,annotationCanvasMap:en,operatorList:cn,pageIndex:Sn,canvasFactory:Tn,filterFactory:hn,useRequestAnimationFrame:pn=!1,pdfBug:bn=!1,pageColors:fn=null}){this.callback=Ke,this.params=sn,this.objs=gn,this.commonObjs=He,this.annotationCanvasMap=en,this.operatorListIdx=null,this.operatorList=cn,this._pageIndex=Sn,this.canvasFactory=Tn,this.filterFactory=hn,this._pdfBug=bn,this.pageColors=fn,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=pn===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=sn.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:Ke=!1,optionalContentConfig:sn}){var Sn,Tn;if(this.cancelled)return;if(this._canvas){if(dn(an,tn).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");dn(an,tn).add(this._canvas)}this._pdfBug&&((Sn=globalThis.StepperManager)!=null&&Sn.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:gn,viewport:He,transform:en,background:cn}=this.params;this.gfx=new _canvas.CanvasGraphics(gn,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:sn},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:en,viewport:He,transparency:Ke,background:cn}),this.operatorListIdx=0,this.graphicsReady=!0,(Tn=this.graphicsReadyCallback)==null||Tn.call(this)}cancel(Ke=null,sn=0){var gn;this.running=!1,this.cancelled=!0,(gn=this.gfx)==null||gn.endDrawing(),dn(an,tn).delete(this._canvas),this.callback(Ke||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,sn))}operatorListChanged(){var Ke;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(Ke=this.stepper)==null||Ke.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),dn(an,tn).delete(this._canvas),this.callback())))}};tn=new WeakMap,bi(an,tn,new WeakSet);let InternalRenderTask=an;const version="3.11.174";exports$1.version=version;const build="ce8716743";exports$1.build=build}),((t,e,r)=>{var Be,ke,Me,a0,Ve;Object.defineProperty(e,"__esModule",{value:!0}),e.SerializableEmpty=e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var xe=r(1),Ee=r(4),Ae=r(8);const Pe=Object.freeze({map:null,hash:"",transfers:void 0});e.SerializableEmpty=Pe;class Re{constructor(){bi(this,Me);bi(this,Be,!1);bi(this,ke,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue($e,Ge){const Ue=dn(this,ke).get($e);return Ue===void 0?Ge:Object.assign(Ge,Ue)}getRawValue($e){return dn(this,ke).get($e)}remove($e){if(dn(this,ke).delete($e),dn(this,ke).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const Ge of dn(this,ke).values())if(Ge instanceof Ee.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue($e,Ge){const Ue=dn(this,ke).get($e);let Ye=!1;if(Ue!==void 0)for(const[Qe,rn]of Object.entries(Ge))Ue[Qe]!==rn&&(Ye=!0,Ue[Qe]=rn);else Ye=!0,dn(this,ke).set($e,Ge);Ye&&oi(this,Me,a0).call(this),Ge instanceof Ee.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(Ge.constructor._type)}has($e){return dn(this,ke).has($e)}getAll(){return dn(this,ke).size>0?(0,xe.objectFromMap)(dn(this,ke)):null}setAll($e){for(const[Ge,Ue]of Object.entries($e))this.setValue(Ge,Ue)}get size(){return dn(this,ke).size}resetModified(){dn(this,Be)&&(xi(this,Be,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Ce(this)}get serializable(){if(dn(this,ke).size===0)return Pe;const $e=new Map,Ge=new Ae.MurmurHash3_64,Ue=[],Ye=Object.create(null);let Qe=!1;for(const[rn,tn]of dn(this,ke)){const an=tn instanceof Ee.AnnotationEditor?tn.serialize(!1,Ye):tn;an&&($e.set(rn,an),Ge.update(`${rn}:${JSON.stringify(an)}`),Qe||(Qe=!!an.bitmap))}if(Qe)for(const rn of $e.values())rn.bitmap&&Ue.push(rn.bitmap);return $e.size>0?{map:$e,hash:Ge.hexdigest(),transfers:Ue}:Pe}}Be=new WeakMap,ke=new WeakMap,Me=new WeakSet,a0=function(){dn(this,Be)||(xi(this,Be,!0),typeof this.onSetModified=="function"&&this.onSetModified())},e.AnnotationStorage=Re;class Ce extends Re{constructor(Ge){super();bi(this,Ve);const{map:Ue,hash:Ye,transfers:Qe}=Ge.serializable,rn=structuredClone(Ue,Qe?{transfer:Qe}:null);xi(this,Ve,{map:rn,hash:Ye,transfers:Qe})}get print(){(0,xe.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return dn(this,Ve)}}Ve=new WeakMap,e.PrintAnnotationStorage=Ce}),((t,e,r)=>{var Ce,Be,ke,Me,Fe,Ve,Oe,$e,Ge,Ue,Ye,Qe,rn,tn,an,hp,dp,sn,fp,pp,o0,l0,u0,gp,c0;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var xe=r(5),Ee=r(1),Ae=r(6);const pn=class pn{constructor(fn){bi(this,an);bi(this,Ce,"");bi(this,Be,!1);bi(this,ke,null);bi(this,Me,null);bi(this,Fe,null);bi(this,Ve,!1);bi(this,Oe,null);bi(this,$e,this.focusin.bind(this));bi(this,Ge,this.focusout.bind(this));bi(this,Ue,!1);bi(this,Ye,!1);bi(this,Qe,!1);Yr(this,"_initialOptions",Object.create(null));Yr(this,"_uiManager",null);Yr(this,"_focusEventsAllowed",!0);Yr(this,"_l10nPromise",null);bi(this,rn,!1);bi(this,tn,pn._zIndex++);this.constructor===pn&&(0,Ee.unreachable)("Cannot initialize AnnotationEditor."),this.parent=fn.parent,this.id=fn.id,this.width=this.height=null,this.pageIndex=fn.parent.pageIndex,this.name=fn.name,this.div=null,this._uiManager=fn.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=fn.isCentered,this._structTreeParentId=null;const{rotation:An,rawDims:{pageWidth:xn,pageHeight:Je,pageX:We,pageY:Ze}}=this.parent.viewport;this.rotation=An,this.pageRotation=(360+An-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[xn,Je],this.pageTranslation=[We,Ze];const[un,yn]=this.parentDimensions;this.x=fn.x/un,this.y=fn.y/yn,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,Ee.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(fn){const An=new Re({id:fn.parent.getNextId(),parent:fn.parent,uiManager:fn._uiManager});An.annotationElementId=fn.annotationElementId,An.deleted=!0,An._uiManager.addToAnnotationStorage(An)}static initialize(fn,An=null){if(pn._l10nPromise||(pn._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(Je=>[Je,fn.get(Je)]))),An!=null&&An.strings)for(const Je of An.strings)pn._l10nPromise.set(Je,fn.get(Je));if(pn._borderLineWidth!==-1)return;const xn=getComputedStyle(document.documentElement);pn._borderLineWidth=parseFloat(xn.getPropertyValue("--outline-width"))||0}static updateDefaultParams(fn,An){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(fn){return!1}static paste(fn,An){(0,Ee.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return dn(this,rn)}set _isDraggable(fn){var An;xi(this,rn,fn),(An=this.div)==null||An.classList.toggle("draggable",fn)}center(){const[fn,An]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*An/(fn*2),this.y+=this.width*fn/(An*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*An/(fn*2),this.y-=this.width*fn/(An*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(fn){this._uiManager.addCommands(fn)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=dn(this,tn)}setParent(fn){fn!==null&&(this.pageIndex=fn.pageIndex,this.pageDimensions=fn.pageDimensions),this.parent=fn}focusin(fn){this._focusEventsAllowed&&(dn(this,Ue)?xi(this,Ue,!1):this.parent.setSelected(this))}focusout(fn){var xn;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const An=fn.relatedTarget;An!=null&&An.closest(`#${this.id}`)||(fn.preventDefault(),(xn=this.parent)!=null&&xn.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(fn,An,xn,Je){const[We,Ze]=this.parentDimensions;[xn,Je]=this.screenToPageTranslation(xn,Je),this.x=(fn+xn)/We,this.y=(An+Je)/Ze,this.fixAndSetPosition()}translate(fn,An){oi(this,an,hp).call(this,this.parentDimensions,fn,An)}translateInPage(fn,An){oi(this,an,hp).call(this,this.pageDimensions,fn,An),this.div.scrollIntoView({block:"nearest"})}drag(fn,An){const[xn,Je]=this.parentDimensions;if(this.x+=fn/xn,this.y+=An/Je,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:_n,y:wn}=this.div.getBoundingClientRect();this.parent.findNewParent(this,_n,wn)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:We,y:Ze}=this;const[un,yn]=oi(this,an,dp).call(this);We+=un,Ze+=yn,this.div.style.left=`${(100*We).toFixed(2)}%`,this.div.style.top=`${(100*Ze).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[fn,An]=this.pageDimensions;let{x:xn,y:Je,width:We,height:Ze}=this;switch(We*=fn,Ze*=An,xn*=fn,Je*=An,this.rotation){case 0:xn=Math.max(0,Math.min(fn-We,xn)),Je=Math.max(0,Math.min(An-Ze,Je));break;case 90:xn=Math.max(0,Math.min(fn-Ze,xn)),Je=Math.min(An,Math.max(We,Je));break;case 180:xn=Math.min(fn,Math.max(We,xn)),Je=Math.min(An,Math.max(Ze,Je));break;case 270:xn=Math.min(fn,Math.max(Ze,xn)),Je=Math.max(0,Math.min(An-We,Je));break}this.x=xn/=fn,this.y=Je/=An;const[un,yn]=oi(this,an,dp).call(this);xn+=un,Je+=yn;const{style:_n}=this.div;_n.left=`${(100*xn).toFixed(2)}%`,_n.top=`${(100*Je).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(fn,An){var xn;return oi(xn=pn,sn,fp).call(xn,fn,An,this.parentRotation)}pageTranslationToScreen(fn,An){var xn;return oi(xn=pn,sn,fp).call(xn,fn,An,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:fn,pageDimensions:[An,xn]}=this,Je=An*fn,We=xn*fn;return Ee.FeatureTest.isCSSRoundSupported?[Math.round(Je),Math.round(We)]:[Je,We]}setDims(fn,An){var We;const[xn,Je]=this.parentDimensions;this.div.style.width=`${(100*fn/xn).toFixed(2)}%`,dn(this,Ve)||(this.div.style.height=`${(100*An/Je).toFixed(2)}%`),(We=dn(this,ke))==null||We.classList.toggle("small",fn<pn.SMALL_EDITOR_SIZE||An<pn.SMALL_EDITOR_SIZE)}fixDims(){const{style:fn}=this.div,{height:An,width:xn}=fn,Je=xn.endsWith("%"),We=!dn(this,Ve)&&An.endsWith("%");if(Je&&We)return;const[Ze,un]=this.parentDimensions;Je||(fn.width=`${(100*parseFloat(xn)/Ze).toFixed(2)}%`),!dn(this,Ve)&&!We&&(fn.height=`${(100*parseFloat(An)/un).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(dn(this,ke))return;const fn=xi(this,ke,document.createElement("button"));fn.className="altText";const An=await pn._l10nPromise.get("editor_alt_text_button_label");fn.textContent=An,fn.setAttribute("aria-label",An),fn.tabIndex="0",fn.addEventListener("contextmenu",Ae.noContextMenu),fn.addEventListener("pointerdown",xn=>xn.stopPropagation()),fn.addEventListener("click",xn=>{xn.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),fn.addEventListener("keydown",xn=>{xn.target===fn&&xn.key==="Enter"&&(xn.preventDefault(),this._uiManager.editAltText(this))}),oi(this,an,gp).call(this),this.div.append(fn),pn.SMALL_EDITOR_SIZE||(pn.SMALL_EDITOR_SIZE=Math.min(128,Math.round(fn.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:dn(this,Ce),decorative:dn(this,Be)}}set altTextData({altText:fn,decorative:An}){dn(this,Ce)===fn&&dn(this,Be)===An||(xi(this,Ce,fn),xi(this,Be,An),oi(this,an,gp).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",dn(this,$e)),this.div.addEventListener("focusout",dn(this,Ge));const[fn,An]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*An/fn).toFixed(2)}%`,this.div.style.maxHeight=`${(100*fn/An).toFixed(2)}%`);const[xn,Je]=this.getInitialTranslation();return this.translate(xn,Je),(0,xe.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(fn){const{isMac:An}=Ee.FeatureTest.platform;if(fn.button!==0||fn.ctrlKey&&An){fn.preventDefault();return}xi(this,Ue,!0),oi(this,an,c0).call(this,fn)}moveInDOM(){var fn;(fn=this.parent)==null||fn.moveEditorInDOM(this)}_setParentAndPosition(fn,An,xn){fn.changeParent(this),this.x=An,this.y=xn,this.fixAndSetPosition()}getRect(fn,An){const xn=this.parentScale,[Je,We]=this.pageDimensions,[Ze,un]=this.pageTranslation,yn=fn/xn,_n=An/xn,wn=this.x*Je,kn=this.y*We,$n=this.width*Je,Ln=this.height*We;switch(this.rotation){case 0:return[wn+yn+Ze,We-kn-_n-Ln+un,wn+yn+$n+Ze,We-kn-_n+un];case 90:return[wn+_n+Ze,We-kn+yn+un,wn+_n+Ln+Ze,We-kn+yn+$n+un];case 180:return[wn-yn-$n+Ze,We-kn+_n+un,wn-yn+Ze,We-kn+_n+Ln+un];case 270:return[wn-_n-Ln+Ze,We-kn-yn-$n+un,wn-_n+Ze,We-kn-yn+un];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(fn,An){const[xn,Je,We,Ze]=fn,un=We-xn,yn=Ze-Je;switch(this.rotation){case 0:return[xn,An-Ze,un,yn];case 90:return[xn,An-Je,yn,un];case 180:return[We,An-Je,un,yn];case 270:return[We,An-Ze,yn,un];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){xi(this,Qe,!0)}disableEditMode(){xi(this,Qe,!1)}isInEditMode(){return dn(this,Qe)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var fn,An;(fn=this.div)==null||fn.addEventListener("focusin",dn(this,$e)),(An=this.div)==null||An.addEventListener("focusout",dn(this,Ge))}serialize(fn=!1,An=null){(0,Ee.unreachable)("An editor must be serializable")}static deserialize(fn,An,xn){const Je=new this.prototype.constructor({parent:An,id:An.getNextId(),uiManager:xn});Je.rotation=fn.rotation;const[We,Ze]=Je.pageDimensions,[un,yn,_n,wn]=Je.getRectInCurrentCoords(fn.rect,Ze);return Je.x=un/We,Je.y=yn/Ze,Je.width=_n/We,Je.height=wn/Ze,Je}remove(){var fn;this.div.removeEventListener("focusin",dn(this,$e)),this.div.removeEventListener("focusout",dn(this,Ge)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(fn=dn(this,ke))==null||fn.remove(),xi(this,ke,null),xi(this,Me,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(oi(this,an,o0).call(this),dn(this,Oe).classList.remove("hidden"))}select(){var fn;this.makeResizable(),(fn=this.div)==null||fn.classList.add("selectedEditor")}unselect(){var fn,An,xn;(fn=dn(this,Oe))==null||fn.classList.add("hidden"),(An=this.div)==null||An.classList.remove("selectedEditor"),(xn=this.div)!=null&&xn.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(fn,An){}disableEditing(){dn(this,ke)&&(dn(this,ke).hidden=!0)}enableEditing(){dn(this,ke)&&(dn(this,ke).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return dn(this,Ye)}set isEditing(fn){xi(this,Ye,fn),this.parent&&(fn?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(fn,An){xi(this,Ve,!0);const xn=fn/An,{style:Je}=this.div;Je.aspectRatio=xn,Je.height="auto"}static get MIN_SIZE(){return 16}};Ce=new WeakMap,Be=new WeakMap,ke=new WeakMap,Me=new WeakMap,Fe=new WeakMap,Ve=new WeakMap,Oe=new WeakMap,$e=new WeakMap,Ge=new WeakMap,Ue=new WeakMap,Ye=new WeakMap,Qe=new WeakMap,rn=new WeakMap,tn=new WeakMap,an=new WeakSet,hp=function([fn,An],xn,Je){[xn,Je]=this.screenToPageTranslation(xn,Je),this.x+=xn/fn,this.y+=Je/An,this.fixAndSetPosition()},dp=function(){const[fn,An]=this.parentDimensions,{_borderLineWidth:xn}=pn,Je=xn/fn,We=xn/An;switch(this.rotation){case 90:return[-Je,We];case 180:return[Je,We];case 270:return[Je,-We];default:return[-Je,-We]}},sn=new WeakSet,fp=function(fn,An,xn){switch(xn){case 90:return[An,-fn];case 180:return[-fn,-An];case 270:return[-An,fn];default:return[fn,An]}},pp=function(fn){switch(fn){case 90:{const[An,xn]=this.pageDimensions;return[0,-An/xn,xn/An,0]}case 180:return[-1,0,0,-1];case 270:{const[An,xn]=this.pageDimensions;return[0,An/xn,-xn/An,0]}default:return[1,0,0,1]}},o0=function(){if(dn(this,Oe))return;xi(this,Oe,document.createElement("div")),dn(this,Oe).classList.add("resizers");const fn=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||fn.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const An of fn){const xn=document.createElement("div");dn(this,Oe).append(xn),xn.classList.add("resizer",An),xn.addEventListener("pointerdown",oi(this,an,l0).bind(this,An)),xn.addEventListener("contextmenu",Ae.noContextMenu)}this.div.prepend(dn(this,Oe))},l0=function(fn,An){An.preventDefault();const{isMac:xn}=Ee.FeatureTest.platform;if(An.button!==0||An.ctrlKey&&xn)return;const Je=oi(this,an,u0).bind(this,fn),We=this._isDraggable;this._isDraggable=!1;const Ze={passive:!0,capture:!0};window.addEventListener("pointermove",Je,Ze);const un=this.x,yn=this.y,_n=this.width,wn=this.height,kn=this.parent.div.style.cursor,$n=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(An.target).cursor;const Ln=()=>{this._isDraggable=We,window.removeEventListener("pointerup",Ln),window.removeEventListener("blur",Ln),window.removeEventListener("pointermove",Je,Ze),this.parent.div.style.cursor=kn,this.div.style.cursor=$n;const Gn=this.x,Yn=this.y,ii=this.width,Wn=this.height;Gn===un&&Yn===yn&&ii===_n&&Wn===wn||this.addCommands({cmd:()=>{this.width=ii,this.height=Wn,this.x=Gn,this.y=Yn;const[Pn,Zn]=this.parentDimensions;this.setDims(Pn*ii,Zn*Wn),this.fixAndSetPosition()},undo:()=>{this.width=_n,this.height=wn,this.x=un,this.y=yn;const[Pn,Zn]=this.parentDimensions;this.setDims(Pn*_n,Zn*wn),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",Ln),window.addEventListener("blur",Ln)},u0=function(fn,An){const[xn,Je]=this.parentDimensions,We=this.x,Ze=this.y,un=this.width,yn=this.height,_n=pn.MIN_SIZE/xn,wn=pn.MIN_SIZE/Je,kn=ui=>Math.round(ui*1e4)/1e4,$n=oi(this,an,pp).call(this,this.rotation),Ln=(ui,Vi)=>[$n[0]*ui+$n[2]*Vi,$n[1]*ui+$n[3]*Vi],Gn=oi(this,an,pp).call(this,360-this.rotation),Yn=(ui,Vi)=>[Gn[0]*ui+Gn[2]*Vi,Gn[1]*ui+Gn[3]*Vi];let ii,Wn,Pn=!1,Zn=!1;switch(fn){case"topLeft":Pn=!0,ii=(ui,Vi)=>[0,0],Wn=(ui,Vi)=>[ui,Vi];break;case"topMiddle":ii=(ui,Vi)=>[ui/2,0],Wn=(ui,Vi)=>[ui/2,Vi];break;case"topRight":Pn=!0,ii=(ui,Vi)=>[ui,0],Wn=(ui,Vi)=>[0,Vi];break;case"middleRight":Zn=!0,ii=(ui,Vi)=>[ui,Vi/2],Wn=(ui,Vi)=>[0,Vi/2];break;case"bottomRight":Pn=!0,ii=(ui,Vi)=>[ui,Vi],Wn=(ui,Vi)=>[0,0];break;case"bottomMiddle":ii=(ui,Vi)=>[ui/2,Vi],Wn=(ui,Vi)=>[ui/2,0];break;case"bottomLeft":Pn=!0,ii=(ui,Vi)=>[0,Vi],Wn=(ui,Vi)=>[ui,0];break;case"middleLeft":Zn=!0,ii=(ui,Vi)=>[0,Vi/2],Wn=(ui,Vi)=>[ui,Vi/2];break}const mn=ii(un,yn),Cn=Wn(un,yn);let jn=Ln(...Cn);const Rn=kn(We+jn[0]),Dn=kn(Ze+jn[1]);let Jn=1,Qn=1,[qn,yi]=this.screenToPageTranslation(An.movementX,An.movementY);if([qn,yi]=Yn(qn/xn,yi/Je),Pn){const ui=Math.hypot(un,yn);Jn=Qn=Math.max(Math.min(Math.hypot(Cn[0]-mn[0]-qn,Cn[1]-mn[1]-yi)/ui,1/un,1/yn),_n/un,wn/yn)}else Zn?Jn=Math.max(_n,Math.min(1,Math.abs(Cn[0]-mn[0]-qn)))/un:Qn=Math.max(wn,Math.min(1,Math.abs(Cn[1]-mn[1]-yi)))/yn;const di=kn(un*Jn),zi=kn(yn*Qn);jn=Ln(...Wn(di,zi));const Ni=Rn-jn[0],Gi=Dn-jn[1];this.width=di,this.height=zi,this.x=Ni,this.y=Gi,this.setDims(xn*di,Je*zi),this.fixAndSetPosition()},gp=async function(){var xn;const fn=dn(this,ke);if(!fn)return;if(!dn(this,Ce)&&!dn(this,Be)){fn.classList.remove("done"),(xn=dn(this,Me))==null||xn.remove();return}pn._l10nPromise.get("editor_alt_text_edit_button_label").then(Je=>{fn.setAttribute("aria-label",Je)});let An=dn(this,Me);if(!An){xi(this,Me,An=document.createElement("span")),An.className="tooltip",An.setAttribute("role","tooltip");const Je=An.id=`alt-text-tooltip-${this.id}`;fn.setAttribute("aria-describedby",Je);const We=100;fn.addEventListener("mouseenter",()=>{xi(this,Fe,setTimeout(()=>{xi(this,Fe,null),dn(this,Me).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},We))}),fn.addEventListener("mouseleave",()=>{var Ze;clearTimeout(dn(this,Fe)),xi(this,Fe,null),(Ze=dn(this,Me))==null||Ze.classList.remove("show")})}fn.classList.add("done"),An.innerText=dn(this,Be)?await pn._l10nPromise.get("editor_alt_text_decorative_tooltip"):dn(this,Ce),An.parentNode||fn.append(An)},c0=function(fn){if(!this._isDraggable)return;const An=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let xn,Je;An&&(xn={passive:!0,capture:!0},Je=Ze=>{const[un,yn]=this.screenToPageTranslation(Ze.movementX,Ze.movementY);this._uiManager.dragSelectedEditors(un,yn)},window.addEventListener("pointermove",Je,xn));const We=()=>{if(window.removeEventListener("pointerup",We),window.removeEventListener("blur",We),An&&window.removeEventListener("pointermove",Je,xn),xi(this,Ue,!1),!this._uiManager.endDragSession()){const{isMac:Ze}=Ee.FeatureTest.platform;fn.ctrlKey&&!Ze||fn.shiftKey||fn.metaKey&&Ze?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",We),window.addEventListener("blur",We)},bi(pn,sn),Yr(pn,"_borderLineWidth",-1),Yr(pn,"_colorManager",new xe.ColorManager),Yr(pn,"_zIndex",1),Yr(pn,"SMALL_EDITOR_SIZE",0);let Pe=pn;e.AnnotationEditor=Pe;class Re extends Pe{constructor(fn){super(fn),this.annotationElementId=fn.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}}),((t,e,r)=>{var Ve,Oe,$e,Ge,Ue,mp,rn,tn,an,qe,Ke,h0,He,en,cn,Sn,Tn,hn,pn,bn,fn,An,xn,Je,We,Ze,un,yn,_n,wn,kn,$n,Ln,Gn,Yn,ii,Wn,Pn,Zn,mn,Cn,jn,Rn,Dn,Jn,Qn,qn,d0,yp,vp,Od,bp,xp,mo,jh,f0,p0,_p,Uh,Ep;Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=Ae,e.opacityToHex=Pe;var xe=r(1),Ee=r(6);function Ae(ar,Fn,Si){for(const Mi of Si)Fn.addEventListener(Mi,ar[Mi].bind(ar))}function Pe(ar){return Math.round(Math.min(255,Math.max(1,255*ar))).toString(16).padStart(2,"0")}class Re{constructor(){bi(this,Ve,0)}getId(){return`${xe.AnnotationEditorPrefix}${Oh(this,Ve)._++}`}}Ve=new WeakMap;const Qe=class Qe{constructor(){bi(this,Ue);bi(this,Oe,(0,xe.getUuid)());bi(this,$e,0);bi(this,Ge,null)}static get _isSVGFittingCanvas(){const Fn='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',Mi=new OffscreenCanvas(1,3).getContext("2d"),ki=new Image;ki.src=Fn;const $i=ki.decode().then(()=>(Mi.drawImage(ki,0,0,1,1,0,0,1,3),new Uint32Array(Mi.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,xe.shadow)(this,"_isSVGFittingCanvas",$i)}async getFromFile(Fn){const{lastModified:Si,name:Mi,size:ki,type:$i}=Fn;return oi(this,Ue,mp).call(this,`${Si}_${Mi}_${ki}_${$i}`,Fn)}async getFromUrl(Fn){return oi(this,Ue,mp).call(this,Fn,Fn)}async getFromId(Fn){dn(this,Ge)||xi(this,Ge,new Map);const Si=dn(this,Ge).get(Fn);return Si?Si.bitmap?(Si.refCounter+=1,Si):Si.file?this.getFromFile(Si.file):this.getFromUrl(Si.url):null}getSvgUrl(Fn){const Si=dn(this,Ge).get(Fn);return Si!=null&&Si.isSvg?Si.svgUrl:null}deleteId(Fn){dn(this,Ge)||xi(this,Ge,new Map);const Si=dn(this,Ge).get(Fn);Si&&(Si.refCounter-=1,Si.refCounter===0&&(Si.bitmap=null))}isValidId(Fn){return Fn.startsWith(`image_${dn(this,Oe)}_`)}};Oe=new WeakMap,$e=new WeakMap,Ge=new WeakMap,Ue=new WeakSet,mp=async function(Fn,Si){dn(this,Ge)||xi(this,Ge,new Map);let Mi=dn(this,Ge).get(Fn);if(Mi===null)return null;if(Mi!=null&&Mi.bitmap)return Mi.refCounter+=1,Mi;try{Mi||(Mi={bitmap:null,id:`image_${dn(this,Oe)}_${Oh(this,$e)._++}`,refCounter:0,isSvg:!1});let ki;if(typeof Si=="string"){Mi.url=Si;const $i=await fetch(Si);if(!$i.ok)throw new Error($i.statusText);ki=await $i.blob()}else ki=Mi.file=Si;if(ki.type==="image/svg+xml"){const $i=Qe._isSVGFittingCanvas,tr=new FileReader,Hn=new Image,Un=new Promise((ti,ei)=>{Hn.onload=()=>{Mi.bitmap=Hn,Mi.isSvg=!0,ti()},tr.onload=async()=>{const si=Mi.svgUrl=tr.result;Hn.src=await $i?`${si}#svgView(preserveAspectRatio(none))`:si},Hn.onerror=tr.onerror=ei});tr.readAsDataURL(ki),await Un}else Mi.bitmap=await createImageBitmap(ki);Mi.refCounter=1}catch(ki){console.error(ki),Mi=null}return dn(this,Ge).set(Fn,Mi),Mi&&dn(this,Ge).set(Mi.id,Mi),Mi};let Ce=Qe;class Be{constructor(Fn=128){bi(this,rn,[]);bi(this,tn,!1);bi(this,an);bi(this,qe,-1);xi(this,an,Fn)}add({cmd:Fn,undo:Si,mustExec:Mi,type:ki=NaN,overwriteIfSameType:$i=!1,keepUndo:tr=!1}){if(Mi&&Fn(),dn(this,tn))return;const Hn={cmd:Fn,undo:Si,type:ki};if(dn(this,qe)===-1){dn(this,rn).length>0&&(dn(this,rn).length=0),xi(this,qe,0),dn(this,rn).push(Hn);return}if($i&&dn(this,rn)[dn(this,qe)].type===ki){tr&&(Hn.undo=dn(this,rn)[dn(this,qe)].undo),dn(this,rn)[dn(this,qe)]=Hn;return}const Un=dn(this,qe)+1;Un===dn(this,an)?dn(this,rn).splice(0,1):(xi(this,qe,Un),Un<dn(this,rn).length&&dn(this,rn).splice(Un)),dn(this,rn).push(Hn)}undo(){dn(this,qe)!==-1&&(xi(this,tn,!0),dn(this,rn)[dn(this,qe)].undo(),xi(this,tn,!1),xi(this,qe,dn(this,qe)-1))}redo(){dn(this,qe)<dn(this,rn).length-1&&(xi(this,qe,dn(this,qe)+1),xi(this,tn,!0),dn(this,rn)[dn(this,qe)].cmd(),xi(this,tn,!1))}hasSomethingToUndo(){return dn(this,qe)!==-1}hasSomethingToRedo(){return dn(this,qe)<dn(this,rn).length-1}destroy(){xi(this,rn,null)}}rn=new WeakMap,tn=new WeakMap,an=new WeakMap,qe=new WeakMap,e.CommandManager=Be;class ke{constructor(Fn){bi(this,Ke);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:Si}=xe.FeatureTest.platform;for(const[Mi,ki,$i={}]of Fn)for(const tr of Mi){const Hn=tr.startsWith("mac+");Si&&Hn?(this.callbacks.set(tr.slice(4),{callback:ki,options:$i}),this.allKeys.add(tr.split("+").at(-1))):!Si&&!Hn&&(this.callbacks.set(tr,{callback:ki,options:$i}),this.allKeys.add(tr.split("+").at(-1)))}}exec(Fn,Si){if(!this.allKeys.has(Si.key))return;const Mi=this.callbacks.get(oi(this,Ke,h0).call(this,Si));if(!Mi)return;const{callback:ki,options:{bubbles:$i=!1,args:tr=[],checker:Hn=null}}=Mi;Hn&&!Hn(Fn,Si)||(ki.bind(Fn,...tr)(),$i||(Si.stopPropagation(),Si.preventDefault()))}}Ke=new WeakSet,h0=function(Fn){Fn.altKey&&this.buffer.push("alt"),Fn.ctrlKey&&this.buffer.push("ctrl"),Fn.metaKey&&this.buffer.push("meta"),Fn.shiftKey&&this.buffer.push("shift"),this.buffer.push(Fn.key);const Si=this.buffer.join("+");return this.buffer.length=0,Si},e.KeyboardManager=ke;const gn=class gn{get _colors(){const Fn=new Map([["CanvasText",null],["Canvas",null]]);return(0,Ee.getColorValues)(Fn),(0,xe.shadow)(this,"_colors",Fn)}convert(Fn){const Si=(0,Ee.getRGB)(Fn);if(!window.matchMedia("(forced-colors: active)").matches)return Si;for(const[Mi,ki]of this._colors)if(ki.every(($i,tr)=>$i===Si[tr]))return gn._colorsMapping.get(Mi);return Si}getHexCode(Fn){const Si=this._colors.get(Fn);return Si?xe.Util.makeHexColor(...Si):Fn}};Yr(gn,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Me=gn;e.ColorManager=Me;const hr=class hr{constructor(Fn,Si,Mi,ki,$i,tr){bi(this,qn);bi(this,He,null);bi(this,en,new Map);bi(this,cn,new Map);bi(this,Sn,null);bi(this,Tn,null);bi(this,hn,new Be);bi(this,pn,0);bi(this,bn,new Set);bi(this,fn,null);bi(this,An,null);bi(this,xn,new Set);bi(this,Je,null);bi(this,We,new Re);bi(this,Ze,!1);bi(this,un,!1);bi(this,yn,null);bi(this,_n,xe.AnnotationEditorType.NONE);bi(this,wn,new Set);bi(this,kn,null);bi(this,$n,this.blur.bind(this));bi(this,Ln,this.focus.bind(this));bi(this,Gn,this.copy.bind(this));bi(this,Yn,this.cut.bind(this));bi(this,ii,this.paste.bind(this));bi(this,Wn,this.keydown.bind(this));bi(this,Pn,this.onEditingAction.bind(this));bi(this,Zn,this.onPageChanging.bind(this));bi(this,mn,this.onScaleChanging.bind(this));bi(this,Cn,this.onRotationChanging.bind(this));bi(this,jn,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});bi(this,Rn,[0,0]);bi(this,Dn,null);bi(this,Jn,null);bi(this,Qn,null);xi(this,Jn,Fn),xi(this,Qn,Si),xi(this,Sn,Mi),this._eventBus=ki,this._eventBus._on("editingaction",dn(this,Pn)),this._eventBus._on("pagechanging",dn(this,Zn)),this._eventBus._on("scalechanging",dn(this,mn)),this._eventBus._on("rotationchanging",dn(this,Cn)),xi(this,Tn,$i.annotationStorage),xi(this,Je,$i.filterFactory),xi(this,kn,tr),this.viewParameters={realScale:Ee.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const Fn=hr.prototype,Si=$i=>{const{activeElement:tr}=document;return tr&&dn($i,Jn).contains(tr)&&$i.hasSomethingToControl()},Mi=this.TRANSLATE_SMALL,ki=this.TRANSLATE_BIG;return(0,xe.shadow)(this,"_keyboardManager",new ke([[["ctrl+a","mac+meta+a"],Fn.selectAll],[["ctrl+z","mac+meta+z"],Fn.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],Fn.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],Fn.delete],[["Escape","mac+Escape"],Fn.unselectAll],[["ArrowLeft","mac+ArrowLeft"],Fn.translateSelectedEditors,{args:[-Mi,0],checker:Si}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Fn.translateSelectedEditors,{args:[-ki,0],checker:Si}],[["ArrowRight","mac+ArrowRight"],Fn.translateSelectedEditors,{args:[Mi,0],checker:Si}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Fn.translateSelectedEditors,{args:[ki,0],checker:Si}],[["ArrowUp","mac+ArrowUp"],Fn.translateSelectedEditors,{args:[0,-Mi],checker:Si}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Fn.translateSelectedEditors,{args:[0,-ki],checker:Si}],[["ArrowDown","mac+ArrowDown"],Fn.translateSelectedEditors,{args:[0,Mi],checker:Si}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Fn.translateSelectedEditors,{args:[0,ki],checker:Si}]]))}destroy(){oi(this,qn,Od).call(this),oi(this,qn,yp).call(this),this._eventBus._off("editingaction",dn(this,Pn)),this._eventBus._off("pagechanging",dn(this,Zn)),this._eventBus._off("scalechanging",dn(this,mn)),this._eventBus._off("rotationchanging",dn(this,Cn));for(const Fn of dn(this,cn).values())Fn.destroy();dn(this,cn).clear(),dn(this,en).clear(),dn(this,xn).clear(),xi(this,He,null),dn(this,wn).clear(),dn(this,hn).destroy(),dn(this,Sn).destroy()}get hcmFilter(){return(0,xe.shadow)(this,"hcmFilter",dn(this,kn)?dn(this,Je).addHCMFilter(dn(this,kn).foreground,dn(this,kn).background):"none")}get direction(){return(0,xe.shadow)(this,"direction",getComputedStyle(dn(this,Jn)).direction)}editAltText(Fn){var Si;(Si=dn(this,Sn))==null||Si.editAltText(this,Fn)}onPageChanging({pageNumber:Fn}){xi(this,pn,Fn-1)}focusMainContainer(){dn(this,Jn).focus()}findParent(Fn,Si){for(const Mi of dn(this,cn).values()){const{x:ki,y:$i,width:tr,height:Hn}=Mi.div.getBoundingClientRect();if(Fn>=ki&&Fn<=ki+tr&&Si>=$i&&Si<=$i+Hn)return Mi}return null}disableUserSelect(Fn=!1){dn(this,Qn).classList.toggle("noUserSelect",Fn)}addShouldRescale(Fn){dn(this,xn).add(Fn)}removeShouldRescale(Fn){dn(this,xn).delete(Fn)}onScaleChanging({scale:Fn}){this.commitOrRemove(),this.viewParameters.realScale=Fn*Ee.PixelsPerInch.PDF_TO_CSS_UNITS;for(const Si of dn(this,xn))Si.onScaleChanging()}onRotationChanging({pagesRotation:Fn}){this.commitOrRemove(),this.viewParameters.rotation=Fn}addToAnnotationStorage(Fn){!Fn.isEmpty()&&dn(this,Tn)&&!dn(this,Tn).has(Fn.id)&&dn(this,Tn).setValue(Fn.id,Fn)}blur(){if(!this.hasSelection)return;const{activeElement:Fn}=document;for(const Si of dn(this,wn))if(Si.div.contains(Fn)){xi(this,yn,[Si,Fn]),Si._focusEventsAllowed=!1;break}}focus(){if(!dn(this,yn))return;const[Fn,Si]=dn(this,yn);xi(this,yn,null),Si.addEventListener("focusin",()=>{Fn._focusEventsAllowed=!0},{once:!0}),Si.focus()}addEditListeners(){oi(this,qn,vp).call(this),oi(this,qn,bp).call(this)}removeEditListeners(){oi(this,qn,Od).call(this),oi(this,qn,xp).call(this)}copy(Fn){var Mi;if(Fn.preventDefault(),(Mi=dn(this,He))==null||Mi.commitOrRemove(),!this.hasSelection)return;const Si=[];for(const ki of dn(this,wn)){const $i=ki.serialize(!0);$i&&Si.push($i)}Si.length!==0&&Fn.clipboardData.setData("application/pdfjs",JSON.stringify(Si))}cut(Fn){this.copy(Fn),this.delete()}paste(Fn){Fn.preventDefault();const{clipboardData:Si}=Fn;for(const $i of Si.items)for(const tr of dn(this,An))if(tr.isHandlingMimeForPasting($i.type)){tr.paste($i,this.currentLayer);return}let Mi=Si.getData("application/pdfjs");if(!Mi)return;try{Mi=JSON.parse(Mi)}catch($i){(0,xe.warn)(`paste: "${$i.message}".`);return}if(!Array.isArray(Mi))return;this.unselectAll();const ki=this.currentLayer;try{const $i=[];for(const Un of Mi){const ti=ki.deserialize(Un);if(!ti)return;$i.push(ti)}const tr=()=>{for(const Un of $i)oi(this,qn,_p).call(this,Un);oi(this,qn,Ep).call(this,$i)},Hn=()=>{for(const Un of $i)Un.remove()};this.addCommands({cmd:tr,undo:Hn,mustExec:!0})}catch($i){(0,xe.warn)(`paste: "${$i.message}".`)}}keydown(Fn){var Si;(Si=this.getActive())!=null&&Si.shouldGetKeyboardEvents()||hr._keyboardManager.exec(this,Fn)}onEditingAction(Fn){["undo","redo","delete","selectAll"].includes(Fn.name)&&this[Fn.name]()}setEditingState(Fn){Fn?(oi(this,qn,d0).call(this),oi(this,qn,vp).call(this),oi(this,qn,bp).call(this),oi(this,qn,mo).call(this,{isEditing:dn(this,_n)!==xe.AnnotationEditorType.NONE,isEmpty:oi(this,qn,Uh).call(this),hasSomethingToUndo:dn(this,hn).hasSomethingToUndo(),hasSomethingToRedo:dn(this,hn).hasSomethingToRedo(),hasSelectedEditor:!1})):(oi(this,qn,yp).call(this),oi(this,qn,Od).call(this),oi(this,qn,xp).call(this),oi(this,qn,mo).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(Fn){if(!dn(this,An)){xi(this,An,Fn);for(const Si of dn(this,An))oi(this,qn,jh).call(this,Si.defaultPropertiesToUpdate)}}getId(){return dn(this,We).getId()}get currentLayer(){return dn(this,cn).get(dn(this,pn))}getLayer(Fn){return dn(this,cn).get(Fn)}get currentPageIndex(){return dn(this,pn)}addLayer(Fn){dn(this,cn).set(Fn.pageIndex,Fn),dn(this,Ze)?Fn.enable():Fn.disable()}removeLayer(Fn){dn(this,cn).delete(Fn.pageIndex)}updateMode(Fn,Si=null){if(dn(this,_n)!==Fn){if(xi(this,_n,Fn),Fn===xe.AnnotationEditorType.NONE){this.setEditingState(!1),oi(this,qn,p0).call(this);return}this.setEditingState(!0),oi(this,qn,f0).call(this),this.unselectAll();for(const Mi of dn(this,cn).values())Mi.updateMode(Fn);if(Si){for(const Mi of dn(this,en).values())if(Mi.annotationElementId===Si){this.setSelected(Mi),Mi.enterInEditMode();break}}}}updateToolbar(Fn){Fn!==dn(this,_n)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:Fn})}updateParams(Fn,Si){if(dn(this,An)){if(Fn===xe.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(Fn);return}for(const Mi of dn(this,wn))Mi.updateParams(Fn,Si);for(const Mi of dn(this,An))Mi.updateDefaultParams(Fn,Si)}}enableWaiting(Fn=!1){if(dn(this,un)!==Fn){xi(this,un,Fn);for(const Si of dn(this,cn).values())Fn?Si.disableClick():Si.enableClick(),Si.div.classList.toggle("waiting",Fn)}}getEditors(Fn){const Si=[];for(const Mi of dn(this,en).values())Mi.pageIndex===Fn&&Si.push(Mi);return Si}getEditor(Fn){return dn(this,en).get(Fn)}addEditor(Fn){dn(this,en).set(Fn.id,Fn)}removeEditor(Fn){var Si;dn(this,en).delete(Fn.id),this.unselect(Fn),(!Fn.annotationElementId||!dn(this,bn).has(Fn.annotationElementId))&&((Si=dn(this,Tn))==null||Si.remove(Fn.id))}addDeletedAnnotationElement(Fn){dn(this,bn).add(Fn.annotationElementId),Fn.deleted=!0}isDeletedAnnotationElement(Fn){return dn(this,bn).has(Fn)}removeDeletedAnnotationElement(Fn){dn(this,bn).delete(Fn.annotationElementId),Fn.deleted=!1}setActiveEditor(Fn){dn(this,He)!==Fn&&(xi(this,He,Fn),Fn&&oi(this,qn,jh).call(this,Fn.propertiesToUpdate))}toggleSelected(Fn){if(dn(this,wn).has(Fn)){dn(this,wn).delete(Fn),Fn.unselect(),oi(this,qn,mo).call(this,{hasSelectedEditor:this.hasSelection});return}dn(this,wn).add(Fn),Fn.select(),oi(this,qn,jh).call(this,Fn.propertiesToUpdate),oi(this,qn,mo).call(this,{hasSelectedEditor:!0})}setSelected(Fn){for(const Si of dn(this,wn))Si!==Fn&&Si.unselect();dn(this,wn).clear(),dn(this,wn).add(Fn),Fn.select(),oi(this,qn,jh).call(this,Fn.propertiesToUpdate),oi(this,qn,mo).call(this,{hasSelectedEditor:!0})}isSelected(Fn){return dn(this,wn).has(Fn)}unselect(Fn){Fn.unselect(),dn(this,wn).delete(Fn),oi(this,qn,mo).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return dn(this,wn).size!==0}undo(){dn(this,hn).undo(),oi(this,qn,mo).call(this,{hasSomethingToUndo:dn(this,hn).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:oi(this,qn,Uh).call(this)})}redo(){dn(this,hn).redo(),oi(this,qn,mo).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:dn(this,hn).hasSomethingToRedo(),isEmpty:oi(this,qn,Uh).call(this)})}addCommands(Fn){dn(this,hn).add(Fn),oi(this,qn,mo).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:oi(this,qn,Uh).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const Fn=[...dn(this,wn)],Si=()=>{for(const ki of Fn)ki.remove()},Mi=()=>{for(const ki of Fn)oi(this,qn,_p).call(this,ki)};this.addCommands({cmd:Si,undo:Mi,mustExec:!0})}commitOrRemove(){var Fn;(Fn=dn(this,He))==null||Fn.commitOrRemove()}hasSomethingToControl(){return dn(this,He)||this.hasSelection}selectAll(){for(const Fn of dn(this,wn))Fn.commit();oi(this,qn,Ep).call(this,dn(this,en).values())}unselectAll(){if(dn(this,He)){dn(this,He).commitOrRemove();return}if(this.hasSelection){for(const Fn of dn(this,wn))Fn.unselect();dn(this,wn).clear(),oi(this,qn,mo).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(Fn,Si,Mi=!1){if(Mi||this.commitOrRemove(),!this.hasSelection)return;dn(this,Rn)[0]+=Fn,dn(this,Rn)[1]+=Si;const[ki,$i]=dn(this,Rn),tr=[...dn(this,wn)],Hn=1e3;dn(this,Dn)&&clearTimeout(dn(this,Dn)),xi(this,Dn,setTimeout(()=>{xi(this,Dn,null),dn(this,Rn)[0]=dn(this,Rn)[1]=0,this.addCommands({cmd:()=>{for(const Un of tr)dn(this,en).has(Un.id)&&Un.translateInPage(ki,$i)},undo:()=>{for(const Un of tr)dn(this,en).has(Un.id)&&Un.translateInPage(-ki,-$i)},mustExec:!1})},Hn));for(const Un of tr)Un.translateInPage(Fn,Si)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),xi(this,fn,new Map);for(const Fn of dn(this,wn))dn(this,fn).set(Fn,{savedX:Fn.x,savedY:Fn.y,savedPageIndex:Fn.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!dn(this,fn))return!1;this.disableUserSelect(!1);const Fn=dn(this,fn);xi(this,fn,null);let Si=!1;for(const[{x:ki,y:$i,pageIndex:tr},Hn]of Fn)Hn.newX=ki,Hn.newY=$i,Hn.newPageIndex=tr,Si||(Si=ki!==Hn.savedX||$i!==Hn.savedY||tr!==Hn.savedPageIndex);if(!Si)return!1;const Mi=(ki,$i,tr,Hn)=>{if(dn(this,en).has(ki.id)){const Un=dn(this,cn).get(Hn);Un?ki._setParentAndPosition(Un,$i,tr):(ki.pageIndex=Hn,ki.x=$i,ki.y=tr)}};return this.addCommands({cmd:()=>{for(const[ki,{newX:$i,newY:tr,newPageIndex:Hn}]of Fn)Mi(ki,$i,tr,Hn)},undo:()=>{for(const[ki,{savedX:$i,savedY:tr,savedPageIndex:Hn}]of Fn)Mi(ki,$i,tr,Hn)},mustExec:!0}),!0}dragSelectedEditors(Fn,Si){if(dn(this,fn))for(const Mi of dn(this,fn).keys())Mi.drag(Fn,Si)}rebuild(Fn){if(Fn.parent===null){const Si=this.getLayer(Fn.pageIndex);Si?(Si.changeParent(Fn),Si.addOrRebuild(Fn)):(this.addEditor(Fn),this.addToAnnotationStorage(Fn),Fn.rebuild())}else Fn.parent.addOrRebuild(Fn)}isActive(Fn){return dn(this,He)===Fn}getActive(){return dn(this,He)}getMode(){return dn(this,_n)}get imageManager(){return(0,xe.shadow)(this,"imageManager",new Ce)}};He=new WeakMap,en=new WeakMap,cn=new WeakMap,Sn=new WeakMap,Tn=new WeakMap,hn=new WeakMap,pn=new WeakMap,bn=new WeakMap,fn=new WeakMap,An=new WeakMap,xn=new WeakMap,Je=new WeakMap,We=new WeakMap,Ze=new WeakMap,un=new WeakMap,yn=new WeakMap,_n=new WeakMap,wn=new WeakMap,kn=new WeakMap,$n=new WeakMap,Ln=new WeakMap,Gn=new WeakMap,Yn=new WeakMap,ii=new WeakMap,Wn=new WeakMap,Pn=new WeakMap,Zn=new WeakMap,mn=new WeakMap,Cn=new WeakMap,jn=new WeakMap,Rn=new WeakMap,Dn=new WeakMap,Jn=new WeakMap,Qn=new WeakMap,qn=new WeakSet,d0=function(){window.addEventListener("focus",dn(this,Ln)),window.addEventListener("blur",dn(this,$n))},yp=function(){window.removeEventListener("focus",dn(this,Ln)),window.removeEventListener("blur",dn(this,$n))},vp=function(){window.addEventListener("keydown",dn(this,Wn),{capture:!0})},Od=function(){window.removeEventListener("keydown",dn(this,Wn),{capture:!0})},bp=function(){document.addEventListener("copy",dn(this,Gn)),document.addEventListener("cut",dn(this,Yn)),document.addEventListener("paste",dn(this,ii))},xp=function(){document.removeEventListener("copy",dn(this,Gn)),document.removeEventListener("cut",dn(this,Yn)),document.removeEventListener("paste",dn(this,ii))},mo=function(Fn){Object.entries(Fn).some(([Mi,ki])=>dn(this,jn)[Mi]!==ki)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(dn(this,jn),Fn)})},jh=function(Fn){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:Fn})},f0=function(){if(!dn(this,Ze)){xi(this,Ze,!0);for(const Fn of dn(this,cn).values())Fn.enable()}},p0=function(){if(this.unselectAll(),dn(this,Ze)){xi(this,Ze,!1);for(const Fn of dn(this,cn).values())Fn.disable()}},_p=function(Fn){const Si=dn(this,cn).get(Fn.pageIndex);Si?Si.addOrRebuild(Fn):this.addEditor(Fn)},Uh=function(){if(dn(this,en).size===0)return!0;if(dn(this,en).size===1)for(const Fn of dn(this,en).values())return Fn.isEmpty();return!1},Ep=function(Fn){dn(this,wn).clear();for(const Si of Fn)Si.isEmpty()||(dn(this,wn).add(Si),Si.select());oi(this,qn,mo).call(this,{hasSelectedEditor:!0})},Yr(hr,"TRANSLATE_SMALL",1),Yr(hr,"TRANSLATE_BIG",10);let Fe=hr;e.AnnotationEditorUIManager=Fe}),((t,e,r)=>{var pn,bn,fn,An,xn,Je,We,Ze,un,yn,_n,wn,Zc,Qc,Sp,jd,Ud,zh,qh;Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=qe,e.getColorValues=en,e.getCurrentTransform=cn,e.getCurrentTransformInverse=Sn,e.getFilenameFromUrl=Ue,e.getPdfFilenameFromUrl=Ye,e.getRGB=He,e.getXfaPageViewport=gn,e.isDataScheme=$e,e.isPdfFile=Ge,e.isValidFetchUrl=rn,e.loadScript=an,e.noContextMenu=tn,e.setLayerDimensions=Tn;var xe=r(7),Ee=r(1);const Ae="http://www.w3.org/2000/svg",hn=class hn{};Yr(hn,"CSS",96),Yr(hn,"PDF",72),Yr(hn,"PDF_TO_CSS_UNITS",hn.CSS/hn.PDF);let Pe=hn;e.PixelsPerInch=Pe;class Re extends xe.BaseFilterFactory{constructor({docId:mn,ownerDocument:Cn=globalThis.document}={}){super();bi(this,wn);bi(this,pn);bi(this,bn);bi(this,fn);bi(this,An);bi(this,xn);bi(this,Je);bi(this,We);bi(this,Ze);bi(this,un);bi(this,yn);bi(this,_n,0);xi(this,fn,mn),xi(this,An,Cn)}addFilter(mn){if(!mn)return"none";let Cn=dn(this,wn,Zc).get(mn);if(Cn)return Cn;let jn,Rn,Dn,Jn;if(mn.length===1){const di=mn[0],zi=new Array(256);for(let Ni=0;Ni<256;Ni++)zi[Ni]=di[Ni]/255;Jn=jn=Rn=Dn=zi.join(",")}else{const[di,zi,Ni]=mn,Gi=new Array(256),ui=new Array(256),Vi=new Array(256);for(let Di=0;Di<256;Di++)Gi[Di]=di[Di]/255,ui[Di]=zi[Di]/255,Vi[Di]=Ni[Di]/255;jn=Gi.join(","),Rn=ui.join(","),Dn=Vi.join(","),Jn=`${jn}${Rn}${Dn}`}if(Cn=dn(this,wn,Zc).get(Jn),Cn)return dn(this,wn,Zc).set(mn,Cn),Cn;const Qn=`g_${dn(this,fn)}_transfer_map_${Oh(this,_n)._++}`,qn=`url(#${Qn})`;dn(this,wn,Zc).set(mn,qn),dn(this,wn,Zc).set(Jn,qn);const yi=oi(this,wn,jd).call(this,Qn);return oi(this,wn,zh).call(this,jn,Rn,Dn,yi),qn}addHCMFilter(mn,Cn){var zi;const jn=`${mn}-${Cn}`;if(dn(this,Je)===jn)return dn(this,We);if(xi(this,Je,jn),xi(this,We,"none"),(zi=dn(this,xn))==null||zi.remove(),!mn||!Cn)return dn(this,We);const Rn=oi(this,wn,qh).call(this,mn);mn=Ee.Util.makeHexColor(...Rn);const Dn=oi(this,wn,qh).call(this,Cn);if(Cn=Ee.Util.makeHexColor(...Dn),dn(this,wn,Qc).style.color="",mn==="#000000"&&Cn==="#ffffff"||mn===Cn)return dn(this,We);const Jn=new Array(256);for(let Ni=0;Ni<=255;Ni++){const Gi=Ni/255;Jn[Ni]=Gi<=.03928?Gi/12.92:((Gi+.055)/1.055)**2.4}const Qn=Jn.join(","),qn=`g_${dn(this,fn)}_hcm_filter`,yi=xi(this,Ze,oi(this,wn,jd).call(this,qn));oi(this,wn,zh).call(this,Qn,Qn,Qn,yi),oi(this,wn,Sp).call(this,yi);const di=(Ni,Gi)=>{const ui=Rn[Ni]/255,Vi=Dn[Ni]/255,Di=new Array(Gi+1);for(let Xi=0;Xi<=Gi;Xi++)Di[Xi]=ui+Xi/Gi*(Vi-ui);return Di.join(",")};return oi(this,wn,zh).call(this,di(0,5),di(1,5),di(2,5),yi),xi(this,We,`url(#${qn})`),dn(this,We)}addHighlightHCMFilter(mn,Cn,jn,Rn){var Vi;const Dn=`${mn}-${Cn}-${jn}-${Rn}`;if(dn(this,un)===Dn)return dn(this,yn);if(xi(this,un,Dn),xi(this,yn,"none"),(Vi=dn(this,Ze))==null||Vi.remove(),!mn||!Cn)return dn(this,yn);const[Jn,Qn]=[mn,Cn].map(oi(this,wn,qh).bind(this));let qn=Math.round(.2126*Jn[0]+.7152*Jn[1]+.0722*Jn[2]),yi=Math.round(.2126*Qn[0]+.7152*Qn[1]+.0722*Qn[2]),[di,zi]=[jn,Rn].map(oi(this,wn,qh).bind(this));yi<qn&&([qn,yi,di,zi]=[yi,qn,zi,di]),dn(this,wn,Qc).style.color="";const Ni=(Di,Xi,fi)=>{const ni=new Array(256),pi=(yi-qn)/fi,ji=Di/255,hr=(Xi-Di)/(255*fi);let ar=0;for(let Fn=0;Fn<=fi;Fn++){const Si=Math.round(qn+Fn*pi),Mi=ji+Fn*hr;for(let ki=ar;ki<=Si;ki++)ni[ki]=Mi;ar=Si+1}for(let Fn=ar;Fn<256;Fn++)ni[Fn]=ni[ar-1];return ni.join(",")},Gi=`g_${dn(this,fn)}_hcm_highlight_filter`,ui=xi(this,Ze,oi(this,wn,jd).call(this,Gi));return oi(this,wn,Sp).call(this,ui),oi(this,wn,zh).call(this,Ni(di[0],zi[0],5),Ni(di[1],zi[1],5),Ni(di[2],zi[2],5),ui),xi(this,yn,`url(#${Gi})`),dn(this,yn)}destroy(mn=!1){mn&&(dn(this,We)||dn(this,yn))||(dn(this,bn)&&(dn(this,bn).parentNode.parentNode.remove(),xi(this,bn,null)),dn(this,pn)&&(dn(this,pn).clear(),xi(this,pn,null)),xi(this,_n,0))}}pn=new WeakMap,bn=new WeakMap,fn=new WeakMap,An=new WeakMap,xn=new WeakMap,Je=new WeakMap,We=new WeakMap,Ze=new WeakMap,un=new WeakMap,yn=new WeakMap,_n=new WeakMap,wn=new WeakSet,Zc=function(){return dn(this,pn)||xi(this,pn,new Map)},Qc=function(){if(!dn(this,bn)){const mn=dn(this,An).createElement("div"),{style:Cn}=mn;Cn.visibility="hidden",Cn.contain="strict",Cn.width=Cn.height=0,Cn.position="absolute",Cn.top=Cn.left=0,Cn.zIndex=-1;const jn=dn(this,An).createElementNS(Ae,"svg");jn.setAttribute("width",0),jn.setAttribute("height",0),xi(this,bn,dn(this,An).createElementNS(Ae,"defs")),mn.append(jn),jn.append(dn(this,bn)),dn(this,An).body.append(mn)}return dn(this,bn)},Sp=function(mn){const Cn=dn(this,An).createElementNS(Ae,"feColorMatrix");Cn.setAttribute("type","matrix"),Cn.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),mn.append(Cn)},jd=function(mn){const Cn=dn(this,An).createElementNS(Ae,"filter");return Cn.setAttribute("color-interpolation-filters","sRGB"),Cn.setAttribute("id",mn),dn(this,wn,Qc).append(Cn),Cn},Ud=function(mn,Cn,jn){const Rn=dn(this,An).createElementNS(Ae,Cn);Rn.setAttribute("type","discrete"),Rn.setAttribute("tableValues",jn),mn.append(Rn)},zh=function(mn,Cn,jn,Rn){const Dn=dn(this,An).createElementNS(Ae,"feComponentTransfer");Rn.append(Dn),oi(this,wn,Ud).call(this,Dn,"feFuncR",mn),oi(this,wn,Ud).call(this,Dn,"feFuncG",Cn),oi(this,wn,Ud).call(this,Dn,"feFuncB",jn)},qh=function(mn){return dn(this,wn,Qc).style.color=mn,He(getComputedStyle(dn(this,wn,Qc)).getPropertyValue("color"))},e.DOMFilterFactory=Re;class Ce extends xe.BaseCanvasFactory{constructor({ownerDocument:Zn=globalThis.document}={}){super(),this._document=Zn}_createCanvas(Zn,mn){const Cn=this._document.createElement("canvas");return Cn.width=Zn,Cn.height=mn,Cn}}e.DOMCanvasFactory=Ce;async function Be(Pn,Zn=!1){if(rn(Pn,document.baseURI)){const mn=await fetch(Pn);if(!mn.ok)throw new Error(mn.statusText);return Zn?new Uint8Array(await mn.arrayBuffer()):(0,Ee.stringToBytes)(await mn.text())}return new Promise((mn,Cn)=>{const jn=new XMLHttpRequest;jn.open("GET",Pn,!0),Zn&&(jn.responseType="arraybuffer"),jn.onreadystatechange=()=>{if(jn.readyState===XMLHttpRequest.DONE){if(jn.status===200||jn.status===0){let Rn;if(Zn&&jn.response?Rn=new Uint8Array(jn.response):!Zn&&jn.responseText&&(Rn=(0,Ee.stringToBytes)(jn.responseText)),Rn){mn(Rn);return}}Cn(new Error(jn.statusText))}},jn.send(null)})}class ke extends xe.BaseCMapReaderFactory{_fetchData(Zn,mn){return Be(Zn,this.isCompressed).then(Cn=>({cMapData:Cn,compressionType:mn}))}}e.DOMCMapReaderFactory=ke;class Me extends xe.BaseStandardFontDataFactory{_fetchData(Zn){return Be(Zn,!0)}}e.DOMStandardFontDataFactory=Me;class Fe extends xe.BaseSVGFactory{_createSVG(Zn){return document.createElementNS(Ae,Zn)}}e.DOMSVGFactory=Fe;class Ve{constructor({viewBox:Zn,scale:mn,rotation:Cn,offsetX:jn=0,offsetY:Rn=0,dontFlip:Dn=!1}){this.viewBox=Zn,this.scale=mn,this.rotation=Cn,this.offsetX=jn,this.offsetY=Rn;const Jn=(Zn[2]+Zn[0])/2,Qn=(Zn[3]+Zn[1])/2;let qn,yi,di,zi;switch(Cn%=360,Cn<0&&(Cn+=360),Cn){case 180:qn=-1,yi=0,di=0,zi=1;break;case 90:qn=0,yi=1,di=1,zi=0;break;case 270:qn=0,yi=-1,di=-1,zi=0;break;case 0:qn=1,yi=0,di=0,zi=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Dn&&(di=-di,zi=-zi);let Ni,Gi,ui,Vi;qn===0?(Ni=Math.abs(Qn-Zn[1])*mn+jn,Gi=Math.abs(Jn-Zn[0])*mn+Rn,ui=(Zn[3]-Zn[1])*mn,Vi=(Zn[2]-Zn[0])*mn):(Ni=Math.abs(Jn-Zn[0])*mn+jn,Gi=Math.abs(Qn-Zn[1])*mn+Rn,ui=(Zn[2]-Zn[0])*mn,Vi=(Zn[3]-Zn[1])*mn),this.transform=[qn*mn,yi*mn,di*mn,zi*mn,Ni-qn*mn*Jn-di*mn*Qn,Gi-yi*mn*Jn-zi*mn*Qn],this.width=ui,this.height=Vi}get rawDims(){const{viewBox:Zn}=this;return(0,Ee.shadow)(this,"rawDims",{pageWidth:Zn[2]-Zn[0],pageHeight:Zn[3]-Zn[1],pageX:Zn[0],pageY:Zn[1]})}clone({scale:Zn=this.scale,rotation:mn=this.rotation,offsetX:Cn=this.offsetX,offsetY:jn=this.offsetY,dontFlip:Rn=!1}={}){return new Ve({viewBox:this.viewBox.slice(),scale:Zn,rotation:mn,offsetX:Cn,offsetY:jn,dontFlip:Rn})}convertToViewportPoint(Zn,mn){return Ee.Util.applyTransform([Zn,mn],this.transform)}convertToViewportRectangle(Zn){const mn=Ee.Util.applyTransform([Zn[0],Zn[1]],this.transform),Cn=Ee.Util.applyTransform([Zn[2],Zn[3]],this.transform);return[mn[0],mn[1],Cn[0],Cn[1]]}convertToPdfPoint(Zn,mn){return Ee.Util.applyInverseTransform([Zn,mn],this.transform)}}e.PageViewport=Ve;class Oe extends Ee.BaseException{constructor(Zn,mn=0){super(Zn,"RenderingCancelledException"),this.extraDelay=mn}}e.RenderingCancelledException=Oe;function $e(Pn){const Zn=Pn.length;let mn=0;for(;mn<Zn&&Pn[mn].trim()==="";)mn++;return Pn.substring(mn,mn+5).toLowerCase()==="data:"}function Ge(Pn){return typeof Pn=="string"&&/\.pdf$/i.test(Pn)}function Ue(Pn,Zn=!1){return Zn||([Pn]=Pn.split(/[#?]/,1)),Pn.substring(Pn.lastIndexOf("/")+1)}function Ye(Pn,Zn="document.pdf"){if(typeof Pn!="string")return Zn;if($e(Pn))return(0,Ee.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),Zn;const mn=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,Cn=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,jn=mn.exec(Pn);let Rn=Cn.exec(jn[1])||Cn.exec(jn[2])||Cn.exec(jn[3]);if(Rn&&(Rn=Rn[0],Rn.includes("%")))try{Rn=Cn.exec(decodeURIComponent(Rn))[0]}catch{}return Rn||Zn}class Qe{constructor(){Yr(this,"started",Object.create(null));Yr(this,"times",[])}time(Zn){Zn in this.started&&(0,Ee.warn)(`Timer is already running for ${Zn}`),this.started[Zn]=Date.now()}timeEnd(Zn){Zn in this.started||(0,Ee.warn)(`Timer has not been started for ${Zn}`),this.times.push({name:Zn,start:this.started[Zn],end:Date.now()}),delete this.started[Zn]}toString(){const Zn=[];let mn=0;for(const{name:Cn}of this.times)mn=Math.max(Cn.length,mn);for(const{name:Cn,start:jn,end:Rn}of this.times)Zn.push(`${Cn.padEnd(mn)} ${Rn-jn}ms
`);return Zn.join("")}}e.StatTimer=Qe;function rn(Pn,Zn){try{const{protocol:mn}=Zn?new URL(Pn,Zn):new URL(Pn);return mn==="http:"||mn==="https:"}catch{return!1}}function tn(Pn){Pn.preventDefault()}function an(Pn,Zn=!1){return new Promise((mn,Cn)=>{const jn=document.createElement("script");jn.src=Pn,jn.onload=function(Rn){Zn&&jn.remove(),mn(Rn)},jn.onerror=function(){Cn(new Error(`Cannot load script at: ${jn.src}`))},(document.head||document.documentElement).append(jn)})}function qe(Pn){console.log("Deprecated API usage: "+Pn)}let Ke;class sn{static toDateObject(Zn){if(!Zn||typeof Zn!="string")return null;Ke||(Ke=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const mn=Ke.exec(Zn);if(!mn)return null;const Cn=parseInt(mn[1],10);let jn=parseInt(mn[2],10);jn=jn>=1&&jn<=12?jn-1:0;let Rn=parseInt(mn[3],10);Rn=Rn>=1&&Rn<=31?Rn:1;let Dn=parseInt(mn[4],10);Dn=Dn>=0&&Dn<=23?Dn:0;let Jn=parseInt(mn[5],10);Jn=Jn>=0&&Jn<=59?Jn:0;let Qn=parseInt(mn[6],10);Qn=Qn>=0&&Qn<=59?Qn:0;const qn=mn[7]||"Z";let yi=parseInt(mn[8],10);yi=yi>=0&&yi<=23?yi:0;let di=parseInt(mn[9],10)||0;return di=di>=0&&di<=59?di:0,qn==="-"?(Dn+=yi,Jn+=di):qn==="+"&&(Dn-=yi,Jn-=di),new Date(Date.UTC(Cn,jn,Rn,Dn,Jn,Qn))}}e.PDFDateString=sn;function gn(Pn,{scale:Zn=1,rotation:mn=0}){const{width:Cn,height:jn}=Pn.attributes.style,Rn=[0,0,parseInt(Cn),parseInt(jn)];return new Ve({viewBox:Rn,scale:Zn,rotation:mn})}function He(Pn){if(Pn.startsWith("#")){const Zn=parseInt(Pn.slice(1),16);return[(Zn&16711680)>>16,(Zn&65280)>>8,Zn&255]}return Pn.startsWith("rgb(")?Pn.slice(4,-1).split(",").map(Zn=>parseInt(Zn)):Pn.startsWith("rgba(")?Pn.slice(5,-1).split(",").map(Zn=>parseInt(Zn)).slice(0,3):((0,Ee.warn)(`Not a valid color format: "${Pn}"`),[0,0,0])}function en(Pn){const Zn=document.createElement("span");Zn.style.visibility="hidden",document.body.append(Zn);for(const mn of Pn.keys()){Zn.style.color=mn;const Cn=window.getComputedStyle(Zn).color;Pn.set(mn,He(Cn))}Zn.remove()}function cn(Pn){const{a:Zn,b:mn,c:Cn,d:jn,e:Rn,f:Dn}=Pn.getTransform();return[Zn,mn,Cn,jn,Rn,Dn]}function Sn(Pn){const{a:Zn,b:mn,c:Cn,d:jn,e:Rn,f:Dn}=Pn.getTransform().invertSelf();return[Zn,mn,Cn,jn,Rn,Dn]}function Tn(Pn,Zn,mn=!1,Cn=!0){if(Zn instanceof Ve){const{pageWidth:jn,pageHeight:Rn}=Zn.rawDims,{style:Dn}=Pn,Jn=Ee.FeatureTest.isCSSRoundSupported,Qn=`var(--scale-factor) * ${jn}px`,qn=`var(--scale-factor) * ${Rn}px`,yi=Jn?`round(${Qn}, 1px)`:`calc(${Qn})`,di=Jn?`round(${qn}, 1px)`:`calc(${qn})`;!mn||Zn.rotation%180===0?(Dn.width=yi,Dn.height=di):(Dn.width=di,Dn.height=yi)}Cn&&Pn.setAttribute("data-main-rotation",Zn.rotation)}}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var xe=r(1);class Ee{constructor(){this.constructor===Ee&&(0,xe.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(ke){return"none"}addHCMFilter(ke,Me){return"none"}addHighlightHCMFilter(ke,Me,Fe,Ve){return"none"}destroy(ke=!1){}}e.BaseFilterFactory=Ee;class Ae{constructor(){this.constructor===Ae&&(0,xe.unreachable)("Cannot initialize BaseCanvasFactory.")}create(ke,Me){if(ke<=0||Me<=0)throw new Error("Invalid canvas size");const Fe=this._createCanvas(ke,Me);return{canvas:Fe,context:Fe.getContext("2d")}}reset(ke,Me,Fe){if(!ke.canvas)throw new Error("Canvas is not specified");if(Me<=0||Fe<=0)throw new Error("Invalid canvas size");ke.canvas.width=Me,ke.canvas.height=Fe}destroy(ke){if(!ke.canvas)throw new Error("Canvas is not specified");ke.canvas.width=0,ke.canvas.height=0,ke.canvas=null,ke.context=null}_createCanvas(ke,Me){(0,xe.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=Ae;class Pe{constructor({baseUrl:ke=null,isCompressed:Me=!0}){this.constructor===Pe&&(0,xe.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=ke,this.isCompressed=Me}async fetch({name:ke}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!ke)throw new Error("CMap name must be specified.");const Me=this.baseUrl+ke+(this.isCompressed?".bcmap":""),Fe=this.isCompressed?xe.CMapCompressionType.BINARY:xe.CMapCompressionType.NONE;return this._fetchData(Me,Fe).catch(Ve=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${Me}`)})}_fetchData(ke,Me){(0,xe.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=Pe;class Re{constructor({baseUrl:ke=null}){this.constructor===Re&&(0,xe.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=ke}async fetch({filename:ke}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!ke)throw new Error("Font filename must be specified.");const Me=`${this.baseUrl}${ke}`;return this._fetchData(Me).catch(Fe=>{throw new Error(`Unable to load font data at: ${Me}`)})}_fetchData(ke){(0,xe.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=Re;class Ce{constructor(){this.constructor===Ce&&(0,xe.unreachable)("Cannot initialize BaseSVGFactory.")}create(ke,Me,Fe=!1){if(ke<=0||Me<=0)throw new Error("Invalid SVG dimensions");const Ve=this._createSVG("svg:svg");return Ve.setAttribute("version","1.1"),Fe||(Ve.setAttribute("width",`${ke}px`),Ve.setAttribute("height",`${Me}px`)),Ve.setAttribute("preserveAspectRatio","none"),Ve.setAttribute("viewBox",`0 0 ${ke} ${Me}`),Ve}createElement(ke){if(typeof ke!="string")throw new Error("Invalid SVG element type");return this._createSVG(ke)}_createSVG(ke){(0,xe.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=Ce}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var xe=r(1);const Ee=3285377520,Ae=4294901760,Pe=65535;class Re{constructor(Be){this.h1=Be?Be&4294967295:Ee,this.h2=Be?Be&4294967295:Ee}update(Be){let ke,Me;if(typeof Be=="string"){ke=new Uint8Array(Be.length*2),Me=0;for(let qe=0,Ke=Be.length;qe<Ke;qe++){const sn=Be.charCodeAt(qe);sn<=255?ke[Me++]=sn:(ke[Me++]=sn>>>8,ke[Me++]=sn&255)}}else if((0,xe.isArrayBuffer)(Be))ke=Be.slice(),Me=ke.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const Fe=Me>>2,Ve=Me-Fe*4,Oe=new Uint32Array(ke.buffer,0,Fe);let $e=0,Ge=0,Ue=this.h1,Ye=this.h2;const Qe=3432918353,rn=461845907,tn=Qe&Pe,an=rn&Pe;for(let qe=0;qe<Fe;qe++)qe&1?($e=Oe[qe],$e=$e*Qe&Ae|$e*tn&Pe,$e=$e<<15|$e>>>17,$e=$e*rn&Ae|$e*an&Pe,Ue^=$e,Ue=Ue<<13|Ue>>>19,Ue=Ue*5+3864292196):(Ge=Oe[qe],Ge=Ge*Qe&Ae|Ge*tn&Pe,Ge=Ge<<15|Ge>>>17,Ge=Ge*rn&Ae|Ge*an&Pe,Ye^=Ge,Ye=Ye<<13|Ye>>>19,Ye=Ye*5+3864292196);switch($e=0,Ve){case 3:$e^=ke[Fe*4+2]<<16;case 2:$e^=ke[Fe*4+1]<<8;case 1:$e^=ke[Fe*4],$e=$e*Qe&Ae|$e*tn&Pe,$e=$e<<15|$e>>>17,$e=$e*rn&Ae|$e*an&Pe,Fe&1?Ue^=$e:Ye^=$e}this.h1=Ue,this.h2=Ye}hexdigest(){let Be=this.h1,ke=this.h2;return Be^=ke>>>1,Be=Be*3981806797&Ae|Be*36045&Pe,ke=ke*4283543511&Ae|((ke<<16|Be>>>16)*2950163797&Ae)>>>16,Be^=ke>>>1,Be=Be*444984403&Ae|Be*60499&Pe,ke=ke*3301882366&Ae|((ke<<16|Be>>>16)*3120437893&Ae)>>>16,Be^=ke>>>1,(Be>>>0).toString(16).padStart(8,"0")+(ke>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=Re}),((t,e,r)=>{var Pe;Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var xe=r(1);class Ee{constructor({ownerDocument:Ce=globalThis.document,styleElement:Be=null}){bi(this,Pe,new Set);this._document=Ce,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(Ce){this.nativeFontFaces.add(Ce),this._document.fonts.add(Ce)}removeNativeFontFace(Ce){this.nativeFontFaces.delete(Ce),this._document.fonts.delete(Ce)}insertRule(Ce){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const Be=this.styleElement.sheet;Be.insertRule(Ce,Be.cssRules.length)}clear(){for(const Ce of this.nativeFontFaces)this._document.fonts.delete(Ce);this.nativeFontFaces.clear(),dn(this,Pe).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(Ce){if(!(!Ce||dn(this,Pe).has(Ce.loadedName))){if((0,xe.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:Be,src:ke,style:Me}=Ce,Fe=new FontFace(Be,ke,Me);this.addNativeFontFace(Fe);try{await Fe.load(),dn(this,Pe).add(Be)}catch{(0,xe.warn)(`Cannot load system font: ${Ce.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(Fe)}return}(0,xe.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(Ce){if(Ce.attached||Ce.missingFile&&!Ce.systemFontInfo)return;if(Ce.attached=!0,Ce.systemFontInfo){await this.loadSystemFont(Ce.systemFontInfo);return}if(this.isFontLoadingAPISupported){const ke=Ce.createNativeFontFace();if(ke){this.addNativeFontFace(ke);try{await ke.loaded}catch(Me){throw(0,xe.warn)(`Failed to load font '${ke.family}': '${Me}'.`),Ce.disableFontFace=!0,Me}}return}const Be=Ce.createFontFaceRule();if(Be){if(this.insertRule(Be),this.isSyncFontLoadingSupported)return;await new Promise(ke=>{const Me=this._queueLoadingCallback(ke);this._prepareFontLoadEvent(Ce,Me)})}}get isFontLoadingAPISupported(){var Be;const Ce=!!((Be=this._document)!=null&&Be.fonts);return(0,xe.shadow)(this,"isFontLoadingAPISupported",Ce)}get isSyncFontLoadingSupported(){let Ce=!1;return(xe.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(Ce=!0),(0,xe.shadow)(this,"isSyncFontLoadingSupported",Ce)}_queueLoadingCallback(Ce){function Be(){for((0,xe.assert)(!Me.done,"completeRequest() cannot be called twice."),Me.done=!0;ke.length>0&&ke[0].done;){const Fe=ke.shift();setTimeout(Fe.callback,0)}}const{loadingRequests:ke}=this,Me={done:!1,complete:Be,callback:Ce};return ke.push(Me),Me}get _loadTestFont(){const Ce=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,xe.shadow)(this,"_loadTestFont",Ce)}_prepareFontLoadEvent(Ce,Be){function ke(He,en){return He.charCodeAt(en)<<24|He.charCodeAt(en+1)<<16|He.charCodeAt(en+2)<<8|He.charCodeAt(en+3)&255}function Me(He,en,cn,Sn){const Tn=He.substring(0,en),hn=He.substring(en+cn);return Tn+Sn+hn}let Fe,Ve;const Oe=this._document.createElement("canvas");Oe.width=1,Oe.height=1;const $e=Oe.getContext("2d");let Ge=0;function Ue(He,en){if(++Ge>30){(0,xe.warn)("Load test font never loaded."),en();return}if($e.font="30px "+He,$e.fillText(".",0,20),$e.getImageData(0,0,1,1).data[3]>0){en();return}setTimeout(Ue.bind(null,He,en))}const Ye=`lt${Date.now()}${this.loadTestFontId++}`;let Qe=this._loadTestFont;Qe=Me(Qe,976,Ye.length,Ye);const tn=16,an=1482184792;let qe=ke(Qe,tn);for(Fe=0,Ve=Ye.length-3;Fe<Ve;Fe+=4)qe=qe-an+ke(Ye,Fe)|0;Fe<Ye.length&&(qe=qe-an+ke(Ye+"XXX",Fe)|0),Qe=Me(Qe,tn,4,(0,xe.string32)(qe));const Ke=`url(data:font/opentype;base64,${btoa(Qe)});`,sn=`@font-face {font-family:"${Ye}";src:${Ke}}`;this.insertRule(sn);const gn=this._document.createElement("div");gn.style.visibility="hidden",gn.style.width=gn.style.height="10px",gn.style.position="absolute",gn.style.top=gn.style.left="0px";for(const He of[Ce.loadedName,Ye]){const en=this._document.createElement("span");en.textContent="Hi",en.style.fontFamily=He,gn.append(en)}this._document.body.append(gn),Ue(Ye,()=>{gn.remove(),Be.complete()})}}Pe=new WeakMap,e.FontLoader=Ee;class Ae{constructor(Ce,{isEvalSupported:Be=!0,disableFontFace:ke=!1,ignoreErrors:Me=!1,inspectFont:Fe=null}){this.compiledGlyphs=Object.create(null);for(const Ve in Ce)this[Ve]=Ce[Ve];this.isEvalSupported=Be!==!1,this.disableFontFace=ke===!0,this.ignoreErrors=Me===!0,this._inspectFont=Fe}createNativeFontFace(){var Be;if(!this.data||this.disableFontFace)return null;let Ce;if(!this.cssFontInfo)Ce=new FontFace(this.loadedName,this.data,{});else{const ke={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(ke.style=`oblique ${this.cssFontInfo.italicAngle}deg`),Ce=new FontFace(this.cssFontInfo.fontFamily,this.data,ke)}return(Be=this._inspectFont)==null||Be.call(this,this),Ce}createFontFaceRule(){var Me;if(!this.data||this.disableFontFace)return null;const Ce=(0,xe.bytesToString)(this.data),Be=`url(data:${this.mimetype};base64,${btoa(Ce)});`;let ke;if(!this.cssFontInfo)ke=`@font-face {font-family:"${this.loadedName}";src:${Be}}`;else{let Fe=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(Fe+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),ke=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${Fe}src:${Be}}`}return(Me=this._inspectFont)==null||Me.call(this,this,Be),ke}getPathGenerator(Ce,Be){if(this.compiledGlyphs[Be]!==void 0)return this.compiledGlyphs[Be];let ke;try{ke=Ce.get(this.loadedName+"_path_"+Be)}catch(Me){if(!this.ignoreErrors)throw Me;return(0,xe.warn)(`getPathGenerator - ignoring character: "${Me}".`),this.compiledGlyphs[Be]=function(Fe,Ve){}}if(this.isEvalSupported&&xe.FeatureTest.isEvalSupported){const Me=[];for(const Fe of ke){const Ve=Fe.args!==void 0?Fe.args.join(","):"";Me.push("c.",Fe.cmd,"(",Ve,`);
`)}return this.compiledGlyphs[Be]=new Function("c","size",Me.join(""))}return this.compiledGlyphs[Be]=function(Me,Fe){for(const Ve of ke)Ve.cmd==="scale"&&(Ve.args=[Fe,-Fe]),Me[Ve.cmd].apply(Me,Ve.args)}}}e.FontFaceObject=Ae}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var xe=r(7);r(1);const Ee=function(Be){return new Promise((ke,Me)=>{require$$5.readFile(Be,(Ve,Oe)=>{if(Ve||!Oe){Me(new Error(Ve));return}ke(new Uint8Array(Oe))})})};class Ae extends xe.BaseFilterFactory{}e.NodeFilterFactory=Ae;class Pe extends xe.BaseCanvasFactory{_createCanvas(ke,Me){return require$$5.createCanvas(ke,Me)}}e.NodeCanvasFactory=Pe;class Re extends xe.BaseCMapReaderFactory{_fetchData(ke,Me){return Ee(ke).then(Fe=>({cMapData:Fe,compressionType:Me}))}}e.NodeCMapReaderFactory=Re;class Ce extends xe.BaseStandardFontDataFactory{_fetchData(ke){return Ee(ke)}}e.NodeStandardFontDataFactory=Ce}),((t,e,r)=>{var bn,wp,Ap;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var xe=r(1),Ee=r(6),Ae=r(12),Pe=r(13);const Re=16,Ce=100,Be=4096,ke=15,Me=10,Fe=1e3,Ve=16;function Oe(Je,We){if(Je._removeMirroring)throw new Error("Context is already forwarding operations.");Je.__originalSave=Je.save,Je.__originalRestore=Je.restore,Je.__originalRotate=Je.rotate,Je.__originalScale=Je.scale,Je.__originalTranslate=Je.translate,Je.__originalTransform=Je.transform,Je.__originalSetTransform=Je.setTransform,Je.__originalResetTransform=Je.resetTransform,Je.__originalClip=Je.clip,Je.__originalMoveTo=Je.moveTo,Je.__originalLineTo=Je.lineTo,Je.__originalBezierCurveTo=Je.bezierCurveTo,Je.__originalRect=Je.rect,Je.__originalClosePath=Je.closePath,Je.__originalBeginPath=Je.beginPath,Je._removeMirroring=()=>{Je.save=Je.__originalSave,Je.restore=Je.__originalRestore,Je.rotate=Je.__originalRotate,Je.scale=Je.__originalScale,Je.translate=Je.__originalTranslate,Je.transform=Je.__originalTransform,Je.setTransform=Je.__originalSetTransform,Je.resetTransform=Je.__originalResetTransform,Je.clip=Je.__originalClip,Je.moveTo=Je.__originalMoveTo,Je.lineTo=Je.__originalLineTo,Je.bezierCurveTo=Je.__originalBezierCurveTo,Je.rect=Je.__originalRect,Je.closePath=Je.__originalClosePath,Je.beginPath=Je.__originalBeginPath,delete Je._removeMirroring},Je.save=function(){We.save(),this.__originalSave()},Je.restore=function(){We.restore(),this.__originalRestore()},Je.translate=function(un,yn){We.translate(un,yn),this.__originalTranslate(un,yn)},Je.scale=function(un,yn){We.scale(un,yn),this.__originalScale(un,yn)},Je.transform=function(un,yn,_n,wn,kn,$n){We.transform(un,yn,_n,wn,kn,$n),this.__originalTransform(un,yn,_n,wn,kn,$n)},Je.setTransform=function(un,yn,_n,wn,kn,$n){We.setTransform(un,yn,_n,wn,kn,$n),this.__originalSetTransform(un,yn,_n,wn,kn,$n)},Je.resetTransform=function(){We.resetTransform(),this.__originalResetTransform()},Je.rotate=function(un){We.rotate(un),this.__originalRotate(un)},Je.clip=function(un){We.clip(un),this.__originalClip(un)},Je.moveTo=function(Ze,un){We.moveTo(Ze,un),this.__originalMoveTo(Ze,un)},Je.lineTo=function(Ze,un){We.lineTo(Ze,un),this.__originalLineTo(Ze,un)},Je.bezierCurveTo=function(Ze,un,yn,_n,wn,kn){We.bezierCurveTo(Ze,un,yn,_n,wn,kn),this.__originalBezierCurveTo(Ze,un,yn,_n,wn,kn)},Je.rect=function(Ze,un,yn,_n){We.rect(Ze,un,yn,_n),this.__originalRect(Ze,un,yn,_n)},Je.closePath=function(){We.closePath(),this.__originalClosePath()},Je.beginPath=function(){We.beginPath(),this.__originalBeginPath()}}class $e{constructor(We){this.canvasFactory=We,this.cache=Object.create(null)}getCanvas(We,Ze,un){let yn;return this.cache[We]!==void 0?(yn=this.cache[We],this.canvasFactory.reset(yn,Ze,un)):(yn=this.canvasFactory.create(Ze,un),this.cache[We]=yn),yn}delete(We){delete this.cache[We]}clear(){for(const We in this.cache){const Ze=this.cache[We];this.canvasFactory.destroy(Ze),delete this.cache[We]}}}function Ge(Je,We,Ze,un,yn,_n,wn,kn,$n,Ln){const[Gn,Yn,ii,Wn,Pn,Zn]=(0,Ee.getCurrentTransform)(Je);if(Yn===0&&ii===0){const jn=wn*Gn+Pn,Rn=Math.round(jn),Dn=kn*Wn+Zn,Jn=Math.round(Dn),Qn=(wn+$n)*Gn+Pn,qn=Math.abs(Math.round(Qn)-Rn)||1,yi=(kn+Ln)*Wn+Zn,di=Math.abs(Math.round(yi)-Jn)||1;return Je.setTransform(Math.sign(Gn),0,0,Math.sign(Wn),Rn,Jn),Je.drawImage(We,Ze,un,yn,_n,0,0,qn,di),Je.setTransform(Gn,Yn,ii,Wn,Pn,Zn),[qn,di]}if(Gn===0&&Wn===0){const jn=kn*ii+Pn,Rn=Math.round(jn),Dn=wn*Yn+Zn,Jn=Math.round(Dn),Qn=(kn+Ln)*ii+Pn,qn=Math.abs(Math.round(Qn)-Rn)||1,yi=(wn+$n)*Yn+Zn,di=Math.abs(Math.round(yi)-Jn)||1;return Je.setTransform(0,Math.sign(Yn),Math.sign(ii),0,Rn,Jn),Je.drawImage(We,Ze,un,yn,_n,0,0,di,qn),Je.setTransform(Gn,Yn,ii,Wn,Pn,Zn),[di,qn]}Je.drawImage(We,Ze,un,yn,_n,wn,kn,$n,Ln);const mn=Math.hypot(Gn,Yn),Cn=Math.hypot(ii,Wn);return[mn*$n,Cn*Ln]}function Ue(Je){const{width:We,height:Ze}=Je;if(We>Fe||Ze>Fe)return null;const un=1e3,yn=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),_n=We+1;let wn=new Uint8Array(_n*(Ze+1)),kn,$n,Ln;const Gn=We+7&-8;let Yn=new Uint8Array(Gn*Ze),ii=0;for(const Cn of Je.data){let jn=128;for(;jn>0;)Yn[ii++]=Cn&jn?0:255,jn>>=1}let Wn=0;for(ii=0,Yn[ii]!==0&&(wn[0]=1,++Wn),$n=1;$n<We;$n++)Yn[ii]!==Yn[ii+1]&&(wn[$n]=Yn[ii]?2:1,++Wn),ii++;for(Yn[ii]!==0&&(wn[$n]=2,++Wn),kn=1;kn<Ze;kn++){ii=kn*Gn,Ln=kn*_n,Yn[ii-Gn]!==Yn[ii]&&(wn[Ln]=Yn[ii]?1:8,++Wn);let Cn=(Yn[ii]?4:0)+(Yn[ii-Gn]?8:0);for($n=1;$n<We;$n++)Cn=(Cn>>2)+(Yn[ii+1]?4:0)+(Yn[ii-Gn+1]?8:0),yn[Cn]&&(wn[Ln+$n]=yn[Cn],++Wn),ii++;if(Yn[ii-Gn]!==Yn[ii]&&(wn[Ln+$n]=Yn[ii]?2:4,++Wn),Wn>un)return null}for(ii=Gn*(Ze-1),Ln=kn*_n,Yn[ii]!==0&&(wn[Ln]=8,++Wn),$n=1;$n<We;$n++)Yn[ii]!==Yn[ii+1]&&(wn[Ln+$n]=Yn[ii]?4:8,++Wn),ii++;if(Yn[ii]!==0&&(wn[Ln+$n]=4,++Wn),Wn>un)return null;const Pn=new Int32Array([0,_n,-1,0,-_n,0,0,0,1]),Zn=new Path2D;for(kn=0;Wn&&kn<=Ze;kn++){let Cn=kn*_n;const jn=Cn+We;for(;Cn<jn&&!wn[Cn];)Cn++;if(Cn===jn)continue;Zn.moveTo(Cn%_n,kn);const Rn=Cn;let Dn=wn[Cn];do{const Jn=Pn[Dn];do Cn+=Jn;while(!wn[Cn]);const Qn=wn[Cn];Qn!==5&&Qn!==10?(Dn=Qn,wn[Cn]=0):(Dn=Qn&51*Dn>>4,wn[Cn]&=Dn>>2|Dn<<2),Zn.lineTo(Cn%_n,Cn/_n|0),wn[Cn]||--Wn}while(Rn!==Cn);--kn}return Yn=null,wn=null,function(Cn){Cn.save(),Cn.scale(1/We,-1/Ze),Cn.translate(0,-Ze),Cn.fill(Zn),Cn.beginPath(),Cn.restore()}}class Ye{constructor(We,Ze){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=xe.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=xe.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=xe.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,We,Ze])}clone(){const We=Object.create(this);return We.clipBox=this.clipBox.slice(),We}setCurrentPoint(We,Ze){this.x=We,this.y=Ze}updatePathMinMax(We,Ze,un){[Ze,un]=xe.Util.applyTransform([Ze,un],We),this.minX=Math.min(this.minX,Ze),this.minY=Math.min(this.minY,un),this.maxX=Math.max(this.maxX,Ze),this.maxY=Math.max(this.maxY,un)}updateRectMinMax(We,Ze){const un=xe.Util.applyTransform(Ze,We),yn=xe.Util.applyTransform(Ze.slice(2),We);this.minX=Math.min(this.minX,un[0],yn[0]),this.minY=Math.min(this.minY,un[1],yn[1]),this.maxX=Math.max(this.maxX,un[0],yn[0]),this.maxY=Math.max(this.maxY,un[1],yn[1])}updateScalingPathMinMax(We,Ze){xe.Util.scaleMinMax(We,Ze),this.minX=Math.min(this.minX,Ze[0]),this.maxX=Math.max(this.maxX,Ze[1]),this.minY=Math.min(this.minY,Ze[2]),this.maxY=Math.max(this.maxY,Ze[3])}updateCurvePathMinMax(We,Ze,un,yn,_n,wn,kn,$n,Ln,Gn){const Yn=xe.Util.bezierBoundingBox(Ze,un,yn,_n,wn,kn,$n,Ln);if(Gn){Gn[0]=Math.min(Gn[0],Yn[0],Yn[2]),Gn[1]=Math.max(Gn[1],Yn[0],Yn[2]),Gn[2]=Math.min(Gn[2],Yn[1],Yn[3]),Gn[3]=Math.max(Gn[3],Yn[1],Yn[3]);return}this.updateRectMinMax(We,Yn)}getPathBoundingBox(We=Ae.PathType.FILL,Ze=null){const un=[this.minX,this.minY,this.maxX,this.maxY];if(We===Ae.PathType.STROKE){Ze||(0,xe.unreachable)("Stroke bounding box must include transform.");const yn=xe.Util.singularValueDecompose2dScale(Ze),_n=yn[0]*this.lineWidth/2,wn=yn[1]*this.lineWidth/2;un[0]-=_n,un[1]-=wn,un[2]+=_n,un[3]+=wn}return un}updateClipFromPath(){const We=xe.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(We||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(We){this.clipBox=We,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(We=Ae.PathType.FILL,Ze=null){return xe.Util.intersect(this.clipBox,this.getPathBoundingBox(We,Ze))}}function Qe(Je,We){if(typeof ImageData<"u"&&We instanceof ImageData){Je.putImageData(We,0,0);return}const Ze=We.height,un=We.width,yn=Ze%Ve,_n=(Ze-yn)/Ve,wn=yn===0?_n:_n+1,kn=Je.createImageData(un,Ve);let $n=0,Ln;const Gn=We.data,Yn=kn.data;let ii,Wn,Pn,Zn;if(We.kind===xe.ImageKind.GRAYSCALE_1BPP){const mn=Gn.byteLength,Cn=new Uint32Array(Yn.buffer,0,Yn.byteLength>>2),jn=Cn.length,Rn=un+7>>3,Dn=4294967295,Jn=xe.FeatureTest.isLittleEndian?4278190080:255;for(ii=0;ii<wn;ii++){for(Pn=ii<_n?Ve:yn,Ln=0,Wn=0;Wn<Pn;Wn++){const Qn=mn-$n;let qn=0;const yi=Qn>Rn?un:Qn*8-7,di=yi&-8;let zi=0,Ni=0;for(;qn<di;qn+=8)Ni=Gn[$n++],Cn[Ln++]=Ni&128?Dn:Jn,Cn[Ln++]=Ni&64?Dn:Jn,Cn[Ln++]=Ni&32?Dn:Jn,Cn[Ln++]=Ni&16?Dn:Jn,Cn[Ln++]=Ni&8?Dn:Jn,Cn[Ln++]=Ni&4?Dn:Jn,Cn[Ln++]=Ni&2?Dn:Jn,Cn[Ln++]=Ni&1?Dn:Jn;for(;qn<yi;qn++)zi===0&&(Ni=Gn[$n++],zi=128),Cn[Ln++]=Ni&zi?Dn:Jn,zi>>=1}for(;Ln<jn;)Cn[Ln++]=0;Je.putImageData(kn,0,ii*Ve)}}else if(We.kind===xe.ImageKind.RGBA_32BPP){for(Wn=0,Zn=un*Ve*4,ii=0;ii<_n;ii++)Yn.set(Gn.subarray($n,$n+Zn)),$n+=Zn,Je.putImageData(kn,0,Wn),Wn+=Ve;ii<wn&&(Zn=un*yn*4,Yn.set(Gn.subarray($n,$n+Zn)),Je.putImageData(kn,0,Wn))}else if(We.kind===xe.ImageKind.RGB_24BPP)for(Pn=Ve,Zn=un*Pn,ii=0;ii<wn;ii++){for(ii>=_n&&(Pn=yn,Zn=un*Pn),Ln=0,Wn=Zn;Wn--;)Yn[Ln++]=Gn[$n++],Yn[Ln++]=Gn[$n++],Yn[Ln++]=Gn[$n++],Yn[Ln++]=255;Je.putImageData(kn,0,ii*Ve)}else throw new Error(`bad image kind: ${We.kind}`)}function rn(Je,We){if(We.bitmap){Je.drawImage(We.bitmap,0,0);return}const Ze=We.height,un=We.width,yn=Ze%Ve,_n=(Ze-yn)/Ve,wn=yn===0?_n:_n+1,kn=Je.createImageData(un,Ve);let $n=0;const Ln=We.data,Gn=kn.data;for(let Yn=0;Yn<wn;Yn++){const ii=Yn<_n?Ve:yn;({srcPos:$n}=(0,Pe.convertBlackAndWhiteToRGBA)({src:Ln,srcPos:$n,dest:Gn,width:un,height:ii,nonBlackColor:0})),Je.putImageData(kn,0,Yn*Ve)}}function tn(Je,We){const Ze=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const un of Ze)Je[un]!==void 0&&(We[un]=Je[un]);Je.setLineDash!==void 0&&(We.setLineDash(Je.getLineDash()),We.lineDashOffset=Je.lineDashOffset)}function an(Je){if(Je.strokeStyle=Je.fillStyle="#000000",Je.fillRule="nonzero",Je.globalAlpha=1,Je.lineWidth=1,Je.lineCap="butt",Je.lineJoin="miter",Je.miterLimit=10,Je.globalCompositeOperation="source-over",Je.font="10px sans-serif",Je.setLineDash!==void 0&&(Je.setLineDash([]),Je.lineDashOffset=0),!xe.isNodeJS){const{filter:We}=Je;We!=="none"&&We!==""&&(Je.filter="none")}}function qe(Je,We,Ze,un){const yn=Je.length;for(let _n=3;_n<yn;_n+=4){const wn=Je[_n];if(wn===0)Je[_n-3]=We,Je[_n-2]=Ze,Je[_n-1]=un;else if(wn<255){const kn=255-wn;Je[_n-3]=Je[_n-3]*wn+We*kn>>8,Je[_n-2]=Je[_n-2]*wn+Ze*kn>>8,Je[_n-1]=Je[_n-1]*wn+un*kn>>8}}}function Ke(Je,We,Ze){const un=Je.length,yn=1/255;for(let _n=3;_n<un;_n+=4){const wn=Ze?Ze[Je[_n]]:Je[_n];We[_n]=We[_n]*wn*yn|0}}function sn(Je,We,Ze){const un=Je.length;for(let yn=3;yn<un;yn+=4){const _n=Je[yn-3]*77+Je[yn-2]*152+Je[yn-1]*28;We[yn]=Ze?We[yn]*Ze[_n>>8]>>8:We[yn]*_n>>16}}function gn(Je,We,Ze,un,yn,_n,wn,kn,$n,Ln,Gn){const Yn=!!_n,ii=Yn?_n[0]:0,Wn=Yn?_n[1]:0,Pn=Yn?_n[2]:0,Zn=yn==="Luminosity"?sn:Ke,Cn=Math.min(un,Math.ceil(1048576/Ze));for(let jn=0;jn<un;jn+=Cn){const Rn=Math.min(Cn,un-jn),Dn=Je.getImageData(kn-Ln,jn+($n-Gn),Ze,Rn),Jn=We.getImageData(kn,jn+$n,Ze,Rn);Yn&&qe(Dn.data,ii,Wn,Pn),Zn(Dn.data,Jn.data,wn),We.putImageData(Jn,kn,jn+$n)}}function He(Je,We,Ze,un){const yn=un[0],_n=un[1],wn=un[2]-yn,kn=un[3]-_n;wn===0||kn===0||(gn(We.context,Ze,wn,kn,We.subtype,We.backdrop,We.transferMap,yn,_n,We.offsetX,We.offsetY),Je.save(),Je.globalAlpha=1,Je.globalCompositeOperation="source-over",Je.setTransform(1,0,0,1,0,0),Je.drawImage(Ze.canvas,0,0),Je.restore())}function en(Je,We){const Ze=xe.Util.singularValueDecompose2dScale(Je);Ze[0]=Math.fround(Ze[0]),Ze[1]=Math.fround(Ze[1]);const un=Math.fround((globalThis.devicePixelRatio||1)*Ee.PixelsPerInch.PDF_TO_CSS_UNITS);return We!==void 0?We:Ze[0]<=un||Ze[1]<=un}const cn=["butt","round","square"],Sn=["miter","round","bevel"],Tn={},hn={},xn=class xn{constructor(We,Ze,un,yn,_n,{optionalContentConfig:wn,markedContentStack:kn=null},$n,Ln){bi(this,bn);this.ctx=We,this.current=new Ye(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=Ze,this.objs=un,this.canvasFactory=yn,this.filterFactory=_n,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=kn||[],this.optionalContentConfig=wn,this.cachedCanvases=new $e(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=$n,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=Ln,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(We,Ze=null){return typeof We=="string"?We.startsWith("g_")?this.commonObjs.get(We):this.objs.get(We):Ze}beginDrawing({transform:We,viewport:Ze,transparency:un=!1,background:yn=null}){const _n=this.ctx.canvas.width,wn=this.ctx.canvas.height,kn=this.ctx.fillStyle;if(this.ctx.fillStyle=yn||"#ffffff",this.ctx.fillRect(0,0,_n,wn),this.ctx.fillStyle=kn,un){const $n=this.cachedCanvases.getCanvas("transparent",_n,wn);this.compositeCtx=this.ctx,this.transparentCanvas=$n.canvas,this.ctx=$n.context,this.ctx.save(),this.ctx.transform(...(0,Ee.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),an(this.ctx),We&&(this.ctx.transform(...We),this.outputScaleX=We[0],this.outputScaleY=We[0]),this.ctx.transform(...Ze.transform),this.viewportScale=Ze.scale,this.baseTransform=(0,Ee.getCurrentTransform)(this.ctx)}executeOperatorList(We,Ze,un,yn){const _n=We.argsArray,wn=We.fnArray;let kn=Ze||0;const $n=_n.length;if($n===kn)return kn;const Ln=$n-kn>Me&&typeof un=="function",Gn=Ln?Date.now()+ke:0;let Yn=0;const ii=this.commonObjs,Wn=this.objs;let Pn;for(;;){if(yn!==void 0&&kn===yn.nextBreakPoint)return yn.breakIt(kn,un),kn;if(Pn=wn[kn],Pn!==xe.OPS.dependency)this[Pn].apply(this,_n[kn]);else for(const Zn of _n[kn]){const mn=Zn.startsWith("g_")?ii:Wn;if(!mn.has(Zn))return mn.get(Zn,un),kn}if(kn++,kn===$n)return kn;if(Ln&&++Yn>Me){if(Date.now()>Gn)return un(),kn;Yn=0}}}endDrawing(){oi(this,bn,wp).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const We of this._cachedBitmapsMap.values()){for(const Ze of We.values())typeof HTMLCanvasElement<"u"&&Ze instanceof HTMLCanvasElement&&(Ze.width=Ze.height=0);We.clear()}this._cachedBitmapsMap.clear(),oi(this,bn,Ap).call(this)}_scaleImage(We,Ze){const un=We.width,yn=We.height;let _n=Math.max(Math.hypot(Ze[0],Ze[1]),1),wn=Math.max(Math.hypot(Ze[2],Ze[3]),1),kn=un,$n=yn,Ln="prescale1",Gn,Yn;for(;_n>2&&kn>1||wn>2&&$n>1;){let ii=kn,Wn=$n;_n>2&&kn>1&&(ii=kn>=16384?Math.floor(kn/2)-1||1:Math.ceil(kn/2),_n/=kn/ii),wn>2&&$n>1&&(Wn=$n>=16384?Math.floor($n/2)-1||1:Math.ceil($n)/2,wn/=$n/Wn),Gn=this.cachedCanvases.getCanvas(Ln,ii,Wn),Yn=Gn.context,Yn.clearRect(0,0,ii,Wn),Yn.drawImage(We,0,0,kn,$n,0,0,ii,Wn),We=Gn.canvas,kn=ii,$n=Wn,Ln=Ln==="prescale1"?"prescale2":"prescale1"}return{img:We,paintWidth:kn,paintHeight:$n}}_createMaskCanvas(We){const Ze=this.ctx,{width:un,height:yn}=We,_n=this.current.fillColor,wn=this.current.patternFill,kn=(0,Ee.getCurrentTransform)(Ze);let $n,Ln,Gn,Yn;if((We.bitmap||We.data)&&We.count>1){const qn=We.bitmap||We.data.buffer;Ln=JSON.stringify(wn?kn:[kn.slice(0,4),_n]),$n=this._cachedBitmapsMap.get(qn),$n||($n=new Map,this._cachedBitmapsMap.set(qn,$n));const yi=$n.get(Ln);if(yi&&!wn){const di=Math.round(Math.min(kn[0],kn[2])+kn[4]),zi=Math.round(Math.min(kn[1],kn[3])+kn[5]);return{canvas:yi,offsetX:di,offsetY:zi}}Gn=yi}Gn||(Yn=this.cachedCanvases.getCanvas("maskCanvas",un,yn),rn(Yn.context,We));let ii=xe.Util.transform(kn,[1/un,0,0,-1/yn,0,0]);ii=xe.Util.transform(ii,[1,0,0,1,0,-yn]);const Wn=xe.Util.applyTransform([0,0],ii),Pn=xe.Util.applyTransform([un,yn],ii),Zn=xe.Util.normalizeRect([Wn[0],Wn[1],Pn[0],Pn[1]]),mn=Math.round(Zn[2]-Zn[0])||1,Cn=Math.round(Zn[3]-Zn[1])||1,jn=this.cachedCanvases.getCanvas("fillCanvas",mn,Cn),Rn=jn.context,Dn=Math.min(Wn[0],Pn[0]),Jn=Math.min(Wn[1],Pn[1]);Rn.translate(-Dn,-Jn),Rn.transform(...ii),Gn||(Gn=this._scaleImage(Yn.canvas,(0,Ee.getCurrentTransformInverse)(Rn)),Gn=Gn.img,$n&&wn&&$n.set(Ln,Gn)),Rn.imageSmoothingEnabled=en((0,Ee.getCurrentTransform)(Rn),We.interpolate),Ge(Rn,Gn,0,0,Gn.width,Gn.height,0,0,un,yn),Rn.globalCompositeOperation="source-in";const Qn=xe.Util.transform((0,Ee.getCurrentTransformInverse)(Rn),[1,0,0,1,-Dn,-Jn]);return Rn.fillStyle=wn?_n.getPattern(Ze,this,Qn,Ae.PathType.FILL):_n,Rn.fillRect(0,0,un,yn),$n&&!wn&&(this.cachedCanvases.delete("fillCanvas"),$n.set(Ln,jn.canvas)),{canvas:jn.canvas,offsetX:Math.round(Dn),offsetY:Math.round(Jn)}}setLineWidth(We){We!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=We,this.ctx.lineWidth=We}setLineCap(We){this.ctx.lineCap=cn[We]}setLineJoin(We){this.ctx.lineJoin=Sn[We]}setMiterLimit(We){this.ctx.miterLimit=We}setDash(We,Ze){const un=this.ctx;un.setLineDash!==void 0&&(un.setLineDash(We),un.lineDashOffset=Ze)}setRenderingIntent(We){}setFlatness(We){}setGState(We){for(const[Ze,un]of We)switch(Ze){case"LW":this.setLineWidth(un);break;case"LC":this.setLineCap(un);break;case"LJ":this.setLineJoin(un);break;case"ML":this.setMiterLimit(un);break;case"D":this.setDash(un[0],un[1]);break;case"RI":this.setRenderingIntent(un);break;case"FL":this.setFlatness(un);break;case"Font":this.setFont(un[0],un[1]);break;case"CA":this.current.strokeAlpha=un;break;case"ca":this.current.fillAlpha=un,this.ctx.globalAlpha=un;break;case"BM":this.ctx.globalCompositeOperation=un;break;case"SMask":this.current.activeSMask=un?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(un);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const We=this.inSMaskMode;this.current.activeSMask&&!We?this.beginSMaskMode():!this.current.activeSMask&&We&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const We=this.ctx.canvas.width,Ze=this.ctx.canvas.height,un="smaskGroupAt"+this.groupLevel,yn=this.cachedCanvases.getCanvas(un,We,Ze);this.suspendedCtx=this.ctx,this.ctx=yn.context;const _n=this.ctx;_n.setTransform(...(0,Ee.getCurrentTransform)(this.suspendedCtx)),tn(this.suspendedCtx,_n),Oe(_n,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),tn(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(We){if(!this.current.activeSMask)return;We?(We[0]=Math.floor(We[0]),We[1]=Math.floor(We[1]),We[2]=Math.ceil(We[2]),We[3]=Math.ceil(We[3])):We=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const Ze=this.current.activeSMask,un=this.suspendedCtx;He(un,Ze,this.ctx,We),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(tn(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const We=this.current;this.stateStack.push(We),this.current=We.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),tn(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(We,Ze,un,yn,_n,wn){this.ctx.transform(We,Ze,un,yn,_n,wn),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(We,Ze,un){const yn=this.ctx,_n=this.current;let wn=_n.x,kn=_n.y,$n,Ln;const Gn=(0,Ee.getCurrentTransform)(yn),Yn=Gn[0]===0&&Gn[3]===0||Gn[1]===0&&Gn[2]===0,ii=Yn?un.slice(0):null;for(let Wn=0,Pn=0,Zn=We.length;Wn<Zn;Wn++)switch(We[Wn]|0){case xe.OPS.rectangle:wn=Ze[Pn++],kn=Ze[Pn++];const mn=Ze[Pn++],Cn=Ze[Pn++],jn=wn+mn,Rn=kn+Cn;yn.moveTo(wn,kn),mn===0||Cn===0?yn.lineTo(jn,Rn):(yn.lineTo(jn,kn),yn.lineTo(jn,Rn),yn.lineTo(wn,Rn)),Yn||_n.updateRectMinMax(Gn,[wn,kn,jn,Rn]),yn.closePath();break;case xe.OPS.moveTo:wn=Ze[Pn++],kn=Ze[Pn++],yn.moveTo(wn,kn),Yn||_n.updatePathMinMax(Gn,wn,kn);break;case xe.OPS.lineTo:wn=Ze[Pn++],kn=Ze[Pn++],yn.lineTo(wn,kn),Yn||_n.updatePathMinMax(Gn,wn,kn);break;case xe.OPS.curveTo:$n=wn,Ln=kn,wn=Ze[Pn+4],kn=Ze[Pn+5],yn.bezierCurveTo(Ze[Pn],Ze[Pn+1],Ze[Pn+2],Ze[Pn+3],wn,kn),_n.updateCurvePathMinMax(Gn,$n,Ln,Ze[Pn],Ze[Pn+1],Ze[Pn+2],Ze[Pn+3],wn,kn,ii),Pn+=6;break;case xe.OPS.curveTo2:$n=wn,Ln=kn,yn.bezierCurveTo(wn,kn,Ze[Pn],Ze[Pn+1],Ze[Pn+2],Ze[Pn+3]),_n.updateCurvePathMinMax(Gn,$n,Ln,wn,kn,Ze[Pn],Ze[Pn+1],Ze[Pn+2],Ze[Pn+3],ii),wn=Ze[Pn+2],kn=Ze[Pn+3],Pn+=4;break;case xe.OPS.curveTo3:$n=wn,Ln=kn,wn=Ze[Pn+2],kn=Ze[Pn+3],yn.bezierCurveTo(Ze[Pn],Ze[Pn+1],wn,kn,wn,kn),_n.updateCurvePathMinMax(Gn,$n,Ln,Ze[Pn],Ze[Pn+1],wn,kn,wn,kn,ii),Pn+=4;break;case xe.OPS.closePath:yn.closePath();break}Yn&&_n.updateScalingPathMinMax(Gn,ii),_n.setCurrentPoint(wn,kn)}closePath(){this.ctx.closePath()}stroke(We=!0){const Ze=this.ctx,un=this.current.strokeColor;Ze.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof un=="object"&&(un!=null&&un.getPattern)?(Ze.save(),Ze.strokeStyle=un.getPattern(Ze,this,(0,Ee.getCurrentTransformInverse)(Ze),Ae.PathType.STROKE),this.rescaleAndStroke(!1),Ze.restore()):this.rescaleAndStroke(!0)),We&&this.consumePath(this.current.getClippedPathBoundingBox()),Ze.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(We=!0){const Ze=this.ctx,un=this.current.fillColor,yn=this.current.patternFill;let _n=!1;yn&&(Ze.save(),Ze.fillStyle=un.getPattern(Ze,this,(0,Ee.getCurrentTransformInverse)(Ze),Ae.PathType.FILL),_n=!0);const wn=this.current.getClippedPathBoundingBox();this.contentVisible&&wn!==null&&(this.pendingEOFill?(Ze.fill("evenodd"),this.pendingEOFill=!1):Ze.fill()),_n&&Ze.restore(),We&&this.consumePath(wn)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Tn}eoClip(){this.pendingClip=hn}beginText(){this.current.textMatrix=xe.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const We=this.pendingTextPaths,Ze=this.ctx;if(We===void 0){Ze.beginPath();return}Ze.save(),Ze.beginPath();for(const un of We)Ze.setTransform(...un.transform),Ze.translate(un.x,un.y),un.addToPath(Ze,un.fontSize);Ze.restore(),Ze.clip(),Ze.beginPath(),delete this.pendingTextPaths}setCharSpacing(We){this.current.charSpacing=We}setWordSpacing(We){this.current.wordSpacing=We}setHScale(We){this.current.textHScale=We/100}setLeading(We){this.current.leading=-We}setFont(We,Ze){var Gn;const un=this.commonObjs.get(We),yn=this.current;if(!un)throw new Error(`Can't find font for ${We}`);if(yn.fontMatrix=un.fontMatrix||xe.FONT_IDENTITY_MATRIX,(yn.fontMatrix[0]===0||yn.fontMatrix[3]===0)&&(0,xe.warn)("Invalid font matrix for font "+We),Ze<0?(Ze=-Ze,yn.fontDirection=-1):yn.fontDirection=1,this.current.font=un,this.current.fontSize=Ze,un.isType3Font)return;const _n=un.loadedName||"sans-serif",wn=((Gn=un.systemFontInfo)==null?void 0:Gn.css)||`"${_n}", ${un.fallbackName}`;let kn="normal";un.black?kn="900":un.bold&&(kn="bold");const $n=un.italic?"italic":"normal";let Ln=Ze;Ze<Re?Ln=Re:Ze>Ce&&(Ln=Ce),this.current.fontSizeScale=Ze/Ln,this.ctx.font=`${$n} ${kn} ${Ln}px ${wn}`}setTextRenderingMode(We){this.current.textRenderingMode=We}setTextRise(We){this.current.textRise=We}moveText(We,Ze){this.current.x=this.current.lineX+=We,this.current.y=this.current.lineY+=Ze}setLeadingMoveText(We,Ze){this.setLeading(-Ze),this.moveText(We,Ze)}setTextMatrix(We,Ze,un,yn,_n,wn){this.current.textMatrix=[We,Ze,un,yn,_n,wn],this.current.textMatrixScale=Math.hypot(We,Ze),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(We,Ze,un,yn){const _n=this.ctx,wn=this.current,kn=wn.font,$n=wn.textRenderingMode,Ln=wn.fontSize/wn.fontSizeScale,Gn=$n&xe.TextRenderingMode.FILL_STROKE_MASK,Yn=!!($n&xe.TextRenderingMode.ADD_TO_PATH_FLAG),ii=wn.patternFill&&!kn.missingFile;let Wn;(kn.disableFontFace||Yn||ii)&&(Wn=kn.getPathGenerator(this.commonObjs,We)),kn.disableFontFace||ii?(_n.save(),_n.translate(Ze,un),_n.beginPath(),Wn(_n,Ln),yn&&_n.setTransform(...yn),(Gn===xe.TextRenderingMode.FILL||Gn===xe.TextRenderingMode.FILL_STROKE)&&_n.fill(),(Gn===xe.TextRenderingMode.STROKE||Gn===xe.TextRenderingMode.FILL_STROKE)&&_n.stroke(),_n.restore()):((Gn===xe.TextRenderingMode.FILL||Gn===xe.TextRenderingMode.FILL_STROKE)&&_n.fillText(We,Ze,un),(Gn===xe.TextRenderingMode.STROKE||Gn===xe.TextRenderingMode.FILL_STROKE)&&_n.strokeText(We,Ze,un)),Yn&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,Ee.getCurrentTransform)(_n),x:Ze,y:un,fontSize:Ln,addToPath:Wn})}get isFontSubpixelAAEnabled(){const{context:We}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);We.scale(1.5,1),We.fillText("I",0,10);const Ze=We.getImageData(0,0,10,10).data;let un=!1;for(let yn=3;yn<Ze.length;yn+=4)if(Ze[yn]>0&&Ze[yn]<255){un=!0;break}return(0,xe.shadow)(this,"isFontSubpixelAAEnabled",un)}showText(We){const Ze=this.current,un=Ze.font;if(un.isType3Font)return this.showType3Text(We);const yn=Ze.fontSize;if(yn===0)return;const _n=this.ctx,wn=Ze.fontSizeScale,kn=Ze.charSpacing,$n=Ze.wordSpacing,Ln=Ze.fontDirection,Gn=Ze.textHScale*Ln,Yn=We.length,ii=un.vertical,Wn=ii?1:-1,Pn=un.defaultVMetrics,Zn=yn*Ze.fontMatrix[0],mn=Ze.textRenderingMode===xe.TextRenderingMode.FILL&&!un.disableFontFace&&!Ze.patternFill;_n.save(),_n.transform(...Ze.textMatrix),_n.translate(Ze.x,Ze.y+Ze.textRise),Ln>0?_n.scale(Gn,-1):_n.scale(Gn,1);let Cn;if(Ze.patternFill){_n.save();const Qn=Ze.fillColor.getPattern(_n,this,(0,Ee.getCurrentTransformInverse)(_n),Ae.PathType.FILL);Cn=(0,Ee.getCurrentTransform)(_n),_n.restore(),_n.fillStyle=Qn}let jn=Ze.lineWidth;const Rn=Ze.textMatrixScale;if(Rn===0||jn===0){const Qn=Ze.textRenderingMode&xe.TextRenderingMode.FILL_STROKE_MASK;(Qn===xe.TextRenderingMode.STROKE||Qn===xe.TextRenderingMode.FILL_STROKE)&&(jn=this.getSinglePixelWidth())}else jn/=Rn;if(wn!==1&&(_n.scale(wn,wn),jn/=wn),_n.lineWidth=jn,un.isInvalidPDFjsFont){const Qn=[];let qn=0;for(const yi of We)Qn.push(yi.unicode),qn+=yi.width;_n.fillText(Qn.join(""),0,0),Ze.x+=qn*Zn*Gn,_n.restore(),this.compose();return}let Dn=0,Jn;for(Jn=0;Jn<Yn;++Jn){const Qn=We[Jn];if(typeof Qn=="number"){Dn+=Wn*Qn*yn/1e3;continue}let qn=!1;const yi=(Qn.isSpace?$n:0)+kn,di=Qn.fontChar,zi=Qn.accent;let Ni,Gi,ui=Qn.width;if(ii){const Di=Qn.vmetric||Pn,Xi=-(Qn.vmetric?Di[1]:ui*.5)*Zn,fi=Di[2]*Zn;ui=Di?-Di[0]:ui,Ni=Xi/wn,Gi=(Dn+fi)/wn}else Ni=Dn/wn,Gi=0;if(un.remeasure&&ui>0){const Di=_n.measureText(di).width*1e3/yn*wn;if(ui<Di&&this.isFontSubpixelAAEnabled){const Xi=ui/Di;qn=!0,_n.save(),_n.scale(Xi,1),Ni/=Xi}else ui!==Di&&(Ni+=(ui-Di)/2e3*yn/wn)}if(this.contentVisible&&(Qn.isInFont||un.missingFile)){if(mn&&!zi)_n.fillText(di,Ni,Gi);else if(this.paintChar(di,Ni,Gi,Cn),zi){const Di=Ni+yn*zi.offset.x/wn,Xi=Gi-yn*zi.offset.y/wn;this.paintChar(zi.fontChar,Di,Xi,Cn)}}const Vi=ii?ui*Zn-yi*Ln:ui*Zn+yi*Ln;Dn+=Vi,qn&&_n.restore()}ii?Ze.y-=Dn:Ze.x+=Dn*Gn,_n.restore(),this.compose()}showType3Text(We){const Ze=this.ctx,un=this.current,yn=un.font,_n=un.fontSize,wn=un.fontDirection,kn=yn.vertical?1:-1,$n=un.charSpacing,Ln=un.wordSpacing,Gn=un.textHScale*wn,Yn=un.fontMatrix||xe.FONT_IDENTITY_MATRIX,ii=We.length,Wn=un.textRenderingMode===xe.TextRenderingMode.INVISIBLE;let Pn,Zn,mn,Cn;if(!(Wn||_n===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,Ze.save(),Ze.transform(...un.textMatrix),Ze.translate(un.x,un.y),Ze.scale(Gn,wn),Pn=0;Pn<ii;++Pn){if(Zn=We[Pn],typeof Zn=="number"){Cn=kn*Zn*_n/1e3,this.ctx.translate(Cn,0),un.x+=Cn*Gn;continue}const jn=(Zn.isSpace?Ln:0)+$n,Rn=yn.charProcOperatorList[Zn.operatorListId];if(!Rn){(0,xe.warn)(`Type3 character "${Zn.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Zn,this.save(),Ze.scale(_n,_n),Ze.transform(...Yn),this.executeOperatorList(Rn),this.restore()),mn=xe.Util.applyTransform([Zn.width,0],Yn)[0]*_n+jn,Ze.translate(mn,0),un.x+=mn*Gn}Ze.restore(),this.processingType3=null}}setCharWidth(We,Ze){}setCharWidthAndBounds(We,Ze,un,yn,_n,wn){this.ctx.rect(un,yn,_n-un,wn-yn),this.ctx.clip(),this.endPath()}getColorN_Pattern(We){let Ze;if(We[0]==="TilingPattern"){const un=We[1],yn=this.baseTransform||(0,Ee.getCurrentTransform)(this.ctx),_n={createCanvasGraphics:wn=>new xn(wn,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};Ze=new Ae.TilingPattern(We,un,this.ctx,_n,yn)}else Ze=this._getPattern(We[1],We[2]);return Ze}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(We,Ze,un){const yn=xe.Util.makeHexColor(We,Ze,un);this.ctx.strokeStyle=yn,this.current.strokeColor=yn}setFillRGBColor(We,Ze,un){const yn=xe.Util.makeHexColor(We,Ze,un);this.ctx.fillStyle=yn,this.current.fillColor=yn,this.current.patternFill=!1}_getPattern(We,Ze=null){let un;return this.cachedPatterns.has(We)?un=this.cachedPatterns.get(We):(un=(0,Ae.getShadingPattern)(this.getObject(We)),this.cachedPatterns.set(We,un)),Ze&&(un.matrix=Ze),un}shadingFill(We){if(!this.contentVisible)return;const Ze=this.ctx;this.save();const un=this._getPattern(We);Ze.fillStyle=un.getPattern(Ze,this,(0,Ee.getCurrentTransformInverse)(Ze),Ae.PathType.SHADING);const yn=(0,Ee.getCurrentTransformInverse)(Ze);if(yn){const{width:_n,height:wn}=Ze.canvas,[kn,$n,Ln,Gn]=xe.Util.getAxialAlignedBoundingBox([0,0,_n,wn],yn);this.ctx.fillRect(kn,$n,Ln-kn,Gn-$n)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,xe.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,xe.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(We,Ze){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(We)&&We.length===6&&this.transform(...We),this.baseTransform=(0,Ee.getCurrentTransform)(this.ctx),Ze)){const un=Ze[2]-Ze[0],yn=Ze[3]-Ze[1];this.ctx.rect(Ze[0],Ze[1],un,yn),this.current.updateRectMinMax((0,Ee.getCurrentTransform)(this.ctx),Ze),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(We){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const Ze=this.ctx;We.isolated||(0,xe.info)("TODO: Support non-isolated groups."),We.knockout&&(0,xe.warn)("Knockout groups not supported.");const un=(0,Ee.getCurrentTransform)(Ze);if(We.matrix&&Ze.transform(...We.matrix),!We.bbox)throw new Error("Bounding box is required.");let yn=xe.Util.getAxialAlignedBoundingBox(We.bbox,(0,Ee.getCurrentTransform)(Ze));const _n=[0,0,Ze.canvas.width,Ze.canvas.height];yn=xe.Util.intersect(yn,_n)||[0,0,0,0];const wn=Math.floor(yn[0]),kn=Math.floor(yn[1]);let $n=Math.max(Math.ceil(yn[2])-wn,1),Ln=Math.max(Math.ceil(yn[3])-kn,1),Gn=1,Yn=1;$n>Be&&(Gn=$n/Be,$n=Be),Ln>Be&&(Yn=Ln/Be,Ln=Be),this.current.startNewPathAndClipBox([0,0,$n,Ln]);let ii="groupAt"+this.groupLevel;We.smask&&(ii+="_smask_"+this.smaskCounter++%2);const Wn=this.cachedCanvases.getCanvas(ii,$n,Ln),Pn=Wn.context;Pn.scale(1/Gn,1/Yn),Pn.translate(-wn,-kn),Pn.transform(...un),We.smask?this.smaskStack.push({canvas:Wn.canvas,context:Pn,offsetX:wn,offsetY:kn,scaleX:Gn,scaleY:Yn,subtype:We.smask.subtype,backdrop:We.smask.backdrop,transferMap:We.smask.transferMap||null,startTransformInverse:null}):(Ze.setTransform(1,0,0,1,0,0),Ze.translate(wn,kn),Ze.scale(Gn,Yn),Ze.save()),tn(Ze,Pn),this.ctx=Pn,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(Ze),this.groupLevel++}endGroup(We){if(!this.contentVisible)return;this.groupLevel--;const Ze=this.ctx,un=this.groupStack.pop();if(this.ctx=un,this.ctx.imageSmoothingEnabled=!1,We.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const yn=(0,Ee.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...yn);const _n=xe.Util.getAxialAlignedBoundingBox([0,0,Ze.canvas.width,Ze.canvas.height],yn);this.ctx.drawImage(Ze.canvas,0,0),this.ctx.restore(),this.compose(_n)}}beginAnnotation(We,Ze,un,yn,_n){if(oi(this,bn,wp).call(this),an(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(Ze)&&Ze.length===4){const wn=Ze[2]-Ze[0],kn=Ze[3]-Ze[1];if(_n&&this.annotationCanvasMap){un=un.slice(),un[4]-=Ze[0],un[5]-=Ze[1],Ze=Ze.slice(),Ze[0]=Ze[1]=0,Ze[2]=wn,Ze[3]=kn;const[$n,Ln]=xe.Util.singularValueDecompose2dScale((0,Ee.getCurrentTransform)(this.ctx)),{viewportScale:Gn}=this,Yn=Math.ceil(wn*this.outputScaleX*Gn),ii=Math.ceil(kn*this.outputScaleY*Gn);this.annotationCanvas=this.canvasFactory.create(Yn,ii);const{canvas:Wn,context:Pn}=this.annotationCanvas;this.annotationCanvasMap.set(We,Wn),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Pn,this.ctx.save(),this.ctx.setTransform($n,0,0,-Ln,0,kn*Ln),an(this.ctx)}else an(this.ctx),this.ctx.rect(Ze[0],Ze[1],wn,kn),this.ctx.clip(),this.endPath()}this.current=new Ye(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...un),this.transform(...yn)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),oi(this,bn,Ap).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(We){if(!this.contentVisible)return;const Ze=We.count;We=this.getObject(We.data,We),We.count=Ze;const un=this.ctx,yn=this.processingType3;if(yn&&(yn.compiled===void 0&&(yn.compiled=Ue(We)),yn.compiled)){yn.compiled(un);return}const _n=this._createMaskCanvas(We),wn=_n.canvas;un.save(),un.setTransform(1,0,0,1,0,0),un.drawImage(wn,_n.offsetX,_n.offsetY),un.restore(),this.compose()}paintImageMaskXObjectRepeat(We,Ze,un=0,yn=0,_n,wn){if(!this.contentVisible)return;We=this.getObject(We.data,We);const kn=this.ctx;kn.save();const $n=(0,Ee.getCurrentTransform)(kn);kn.transform(Ze,un,yn,_n,0,0);const Ln=this._createMaskCanvas(We);kn.setTransform(1,0,0,1,Ln.offsetX-$n[4],Ln.offsetY-$n[5]);for(let Gn=0,Yn=wn.length;Gn<Yn;Gn+=2){const ii=xe.Util.transform($n,[Ze,un,yn,_n,wn[Gn],wn[Gn+1]]),[Wn,Pn]=xe.Util.applyTransform([0,0],ii);kn.drawImage(Ln.canvas,Wn,Pn)}kn.restore(),this.compose()}paintImageMaskXObjectGroup(We){if(!this.contentVisible)return;const Ze=this.ctx,un=this.current.fillColor,yn=this.current.patternFill;for(const _n of We){const{data:wn,width:kn,height:$n,transform:Ln}=_n,Gn=this.cachedCanvases.getCanvas("maskCanvas",kn,$n),Yn=Gn.context;Yn.save();const ii=this.getObject(wn,_n);rn(Yn,ii),Yn.globalCompositeOperation="source-in",Yn.fillStyle=yn?un.getPattern(Yn,this,(0,Ee.getCurrentTransformInverse)(Ze),Ae.PathType.FILL):un,Yn.fillRect(0,0,kn,$n),Yn.restore(),Ze.save(),Ze.transform(...Ln),Ze.scale(1,-1),Ge(Ze,Gn.canvas,0,0,kn,$n,0,-1,1,1),Ze.restore()}this.compose()}paintImageXObject(We){if(!this.contentVisible)return;const Ze=this.getObject(We);if(!Ze){(0,xe.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(Ze)}paintImageXObjectRepeat(We,Ze,un,yn){if(!this.contentVisible)return;const _n=this.getObject(We);if(!_n){(0,xe.warn)("Dependent image isn't ready yet");return}const wn=_n.width,kn=_n.height,$n=[];for(let Ln=0,Gn=yn.length;Ln<Gn;Ln+=2)$n.push({transform:[Ze,0,0,un,yn[Ln],yn[Ln+1]],x:0,y:0,w:wn,h:kn});this.paintInlineImageXObjectGroup(_n,$n)}applyTransferMapsToCanvas(We){return this.current.transferMaps!=="none"&&(We.filter=this.current.transferMaps,We.drawImage(We.canvas,0,0),We.filter="none"),We.canvas}applyTransferMapsToBitmap(We){if(this.current.transferMaps==="none")return We.bitmap;const{bitmap:Ze,width:un,height:yn}=We,_n=this.cachedCanvases.getCanvas("inlineImage",un,yn),wn=_n.context;return wn.filter=this.current.transferMaps,wn.drawImage(Ze,0,0),wn.filter="none",_n.canvas}paintInlineImageXObject(We){if(!this.contentVisible)return;const Ze=We.width,un=We.height,yn=this.ctx;if(this.save(),!xe.isNodeJS){const{filter:kn}=yn;kn!=="none"&&kn!==""&&(yn.filter="none")}yn.scale(1/Ze,-1/un);let _n;if(We.bitmap)_n=this.applyTransferMapsToBitmap(We);else if(typeof HTMLElement=="function"&&We instanceof HTMLElement||!We.data)_n=We;else{const $n=this.cachedCanvases.getCanvas("inlineImage",Ze,un).context;Qe($n,We),_n=this.applyTransferMapsToCanvas($n)}const wn=this._scaleImage(_n,(0,Ee.getCurrentTransformInverse)(yn));yn.imageSmoothingEnabled=en((0,Ee.getCurrentTransform)(yn),We.interpolate),Ge(yn,wn.img,0,0,wn.paintWidth,wn.paintHeight,0,-un,Ze,un),this.compose(),this.restore()}paintInlineImageXObjectGroup(We,Ze){if(!this.contentVisible)return;const un=this.ctx;let yn;if(We.bitmap)yn=We.bitmap;else{const _n=We.width,wn=We.height,$n=this.cachedCanvases.getCanvas("inlineImage",_n,wn).context;Qe($n,We),yn=this.applyTransferMapsToCanvas($n)}for(const _n of Ze)un.save(),un.transform(..._n.transform),un.scale(1,-1),Ge(un,yn,_n.x,_n.y,_n.w,_n.h,0,-1,1,1),un.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(We){}markPointProps(We,Ze){}beginMarkedContent(We){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(We,Ze){We==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(Ze)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(We){const Ze=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(We);const un=this.ctx;this.pendingClip&&(Ze||(this.pendingClip===hn?un.clip("evenodd"):un.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),un.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const We=(0,Ee.getCurrentTransform)(this.ctx);if(We[1]===0&&We[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(We[0]),Math.abs(We[3]));else{const Ze=Math.abs(We[0]*We[3]-We[2]*We[1]),un=Math.hypot(We[0],We[2]),yn=Math.hypot(We[1],We[3]);this._cachedGetSinglePixelWidth=Math.max(un,yn)/Ze}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:We}=this.current,{a:Ze,b:un,c:yn,d:_n}=this.ctx.getTransform();let wn,kn;if(un===0&&yn===0){const $n=Math.abs(Ze),Ln=Math.abs(_n);if($n===Ln)if(We===0)wn=kn=1/$n;else{const Gn=$n*We;wn=kn=Gn<1?1/Gn:1}else if(We===0)wn=1/$n,kn=1/Ln;else{const Gn=$n*We,Yn=Ln*We;wn=Gn<1?1/Gn:1,kn=Yn<1?1/Yn:1}}else{const $n=Math.abs(Ze*_n-un*yn),Ln=Math.hypot(Ze,un),Gn=Math.hypot(yn,_n);if(We===0)wn=Gn/$n,kn=Ln/$n;else{const Yn=We*$n;wn=Gn>Yn?Gn/Yn:1,kn=Ln>Yn?Ln/Yn:1}}this._cachedScaleForStroking[0]=wn,this._cachedScaleForStroking[1]=kn}return this._cachedScaleForStroking}rescaleAndStroke(We){const{ctx:Ze}=this,{lineWidth:un}=this.current,[yn,_n]=this.getScaleForStroking();if(Ze.lineWidth=un||1,yn===1&&_n===1){Ze.stroke();return}const wn=Ze.getLineDash();if(We&&Ze.save(),Ze.scale(yn,_n),wn.length>0){const kn=Math.max(yn,_n);Ze.setLineDash(wn.map($n=>$n/kn)),Ze.lineDashOffset/=kn}Ze.stroke(),We&&Ze.restore()}isContentVisible(){for(let We=this.markedContentStack.length-1;We>=0;We--)if(!this.markedContentStack[We].visible)return!1;return!0}};bn=new WeakSet,wp=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Ap=function(){if(this.pageColors){const We=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(We!=="none"){const Ze=this.ctx.filter;this.ctx.filter=We,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=Ze}}};let pn=xn;e.CanvasGraphics=pn;for(const Je in xe.OPS)pn.prototype[Je]!==void 0&&(pn.prototype[xe.OPS[Je]]=pn.prototype[Je])}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=Ve;var xe=r(1),Ee=r(6);const Ae={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=Ae;function Pe(Ue,Ye){if(!Ye)return;const Qe=Ye[2]-Ye[0],rn=Ye[3]-Ye[1],tn=new Path2D;tn.rect(Ye[0],Ye[1],Qe,rn),Ue.clip(tn)}class Re{constructor(){this.constructor===Re&&(0,xe.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,xe.unreachable)("Abstract method `getPattern` called.")}}class Ce extends Re{constructor(Ye){super(),this._type=Ye[1],this._bbox=Ye[2],this._colorStops=Ye[3],this._p0=Ye[4],this._p1=Ye[5],this._r0=Ye[6],this._r1=Ye[7],this.matrix=null}_createGradient(Ye){let Qe;this._type==="axial"?Qe=Ye.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(Qe=Ye.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const rn of this._colorStops)Qe.addColorStop(rn[0],rn[1]);return Qe}getPattern(Ye,Qe,rn,tn){let an;if(tn===Ae.STROKE||tn===Ae.FILL){const qe=Qe.current.getClippedPathBoundingBox(tn,(0,Ee.getCurrentTransform)(Ye))||[0,0,0,0],Ke=Math.ceil(qe[2]-qe[0])||1,sn=Math.ceil(qe[3]-qe[1])||1,gn=Qe.cachedCanvases.getCanvas("pattern",Ke,sn,!0),He=gn.context;He.clearRect(0,0,He.canvas.width,He.canvas.height),He.beginPath(),He.rect(0,0,He.canvas.width,He.canvas.height),He.translate(-qe[0],-qe[1]),rn=xe.Util.transform(rn,[1,0,0,1,qe[0],qe[1]]),He.transform(...Qe.baseTransform),this.matrix&&He.transform(...this.matrix),Pe(He,this._bbox),He.fillStyle=this._createGradient(He),He.fill(),an=Ye.createPattern(gn.canvas,"no-repeat");const en=new DOMMatrix(rn);an.setTransform(en)}else Pe(Ye,this._bbox),an=this._createGradient(Ye);return an}}function Be(Ue,Ye,Qe,rn,tn,an,qe,Ke){const sn=Ye.coords,gn=Ye.colors,He=Ue.data,en=Ue.width*4;let cn;sn[Qe+1]>sn[rn+1]&&(cn=Qe,Qe=rn,rn=cn,cn=an,an=qe,qe=cn),sn[rn+1]>sn[tn+1]&&(cn=rn,rn=tn,tn=cn,cn=qe,qe=Ke,Ke=cn),sn[Qe+1]>sn[rn+1]&&(cn=Qe,Qe=rn,rn=cn,cn=an,an=qe,qe=cn);const Sn=(sn[Qe]+Ye.offsetX)*Ye.scaleX,Tn=(sn[Qe+1]+Ye.offsetY)*Ye.scaleY,hn=(sn[rn]+Ye.offsetX)*Ye.scaleX,pn=(sn[rn+1]+Ye.offsetY)*Ye.scaleY,bn=(sn[tn]+Ye.offsetX)*Ye.scaleX,fn=(sn[tn+1]+Ye.offsetY)*Ye.scaleY;if(Tn>=fn)return;const An=gn[an],xn=gn[an+1],Je=gn[an+2],We=gn[qe],Ze=gn[qe+1],un=gn[qe+2],yn=gn[Ke],_n=gn[Ke+1],wn=gn[Ke+2],kn=Math.round(Tn),$n=Math.round(fn);let Ln,Gn,Yn,ii,Wn,Pn,Zn,mn;for(let Cn=kn;Cn<=$n;Cn++){if(Cn<pn){const Qn=Cn<Tn?0:(Tn-Cn)/(Tn-pn);Ln=Sn-(Sn-hn)*Qn,Gn=An-(An-We)*Qn,Yn=xn-(xn-Ze)*Qn,ii=Je-(Je-un)*Qn}else{let Qn;Cn>fn?Qn=1:pn===fn?Qn=0:Qn=(pn-Cn)/(pn-fn),Ln=hn-(hn-bn)*Qn,Gn=We-(We-yn)*Qn,Yn=Ze-(Ze-_n)*Qn,ii=un-(un-wn)*Qn}let jn;Cn<Tn?jn=0:Cn>fn?jn=1:jn=(Tn-Cn)/(Tn-fn),Wn=Sn-(Sn-bn)*jn,Pn=An-(An-yn)*jn,Zn=xn-(xn-_n)*jn,mn=Je-(Je-wn)*jn;const Rn=Math.round(Math.min(Ln,Wn)),Dn=Math.round(Math.max(Ln,Wn));let Jn=en*Cn+Rn*4;for(let Qn=Rn;Qn<=Dn;Qn++)jn=(Ln-Qn)/(Ln-Wn),jn<0?jn=0:jn>1&&(jn=1),He[Jn++]=Gn-(Gn-Pn)*jn|0,He[Jn++]=Yn-(Yn-Zn)*jn|0,He[Jn++]=ii-(ii-mn)*jn|0,He[Jn++]=255}}function ke(Ue,Ye,Qe){const rn=Ye.coords,tn=Ye.colors;let an,qe;switch(Ye.type){case"lattice":const Ke=Ye.verticesPerRow,sn=Math.floor(rn.length/Ke)-1,gn=Ke-1;for(an=0;an<sn;an++){let He=an*Ke;for(let en=0;en<gn;en++,He++)Be(Ue,Qe,rn[He],rn[He+1],rn[He+Ke],tn[He],tn[He+1],tn[He+Ke]),Be(Ue,Qe,rn[He+Ke+1],rn[He+1],rn[He+Ke],tn[He+Ke+1],tn[He+1],tn[He+Ke])}break;case"triangles":for(an=0,qe=rn.length;an<qe;an+=3)Be(Ue,Qe,rn[an],rn[an+1],rn[an+2],tn[an],tn[an+1],tn[an+2]);break;default:throw new Error("illegal figure")}}class Me extends Re{constructor(Ye){super(),this._coords=Ye[2],this._colors=Ye[3],this._figures=Ye[4],this._bounds=Ye[5],this._bbox=Ye[7],this._background=Ye[8],this.matrix=null}_createMeshCanvas(Ye,Qe,rn){const Ke=Math.floor(this._bounds[0]),sn=Math.floor(this._bounds[1]),gn=Math.ceil(this._bounds[2])-Ke,He=Math.ceil(this._bounds[3])-sn,en=Math.min(Math.ceil(Math.abs(gn*Ye[0]*1.1)),3e3),cn=Math.min(Math.ceil(Math.abs(He*Ye[1]*1.1)),3e3),Sn=gn/en,Tn=He/cn,hn={coords:this._coords,colors:this._colors,offsetX:-Ke,offsetY:-sn,scaleX:1/Sn,scaleY:1/Tn},pn=en+4,bn=cn+4,fn=rn.getCanvas("mesh",pn,bn,!1),An=fn.context,xn=An.createImageData(en,cn);if(Qe){const We=xn.data;for(let Ze=0,un=We.length;Ze<un;Ze+=4)We[Ze]=Qe[0],We[Ze+1]=Qe[1],We[Ze+2]=Qe[2],We[Ze+3]=255}for(const We of this._figures)ke(xn,We,hn);return An.putImageData(xn,2,2),{canvas:fn.canvas,offsetX:Ke-2*Sn,offsetY:sn-2*Tn,scaleX:Sn,scaleY:Tn}}getPattern(Ye,Qe,rn,tn){Pe(Ye,this._bbox);let an;if(tn===Ae.SHADING)an=xe.Util.singularValueDecompose2dScale((0,Ee.getCurrentTransform)(Ye));else if(an=xe.Util.singularValueDecompose2dScale(Qe.baseTransform),this.matrix){const Ke=xe.Util.singularValueDecompose2dScale(this.matrix);an=[an[0]*Ke[0],an[1]*Ke[1]]}const qe=this._createMeshCanvas(an,tn===Ae.SHADING?null:this._background,Qe.cachedCanvases);return tn!==Ae.SHADING&&(Ye.setTransform(...Qe.baseTransform),this.matrix&&Ye.transform(...this.matrix)),Ye.translate(qe.offsetX,qe.offsetY),Ye.scale(qe.scaleX,qe.scaleY),Ye.createPattern(qe.canvas,"no-repeat")}}class Fe extends Re{getPattern(){return"hotpink"}}function Ve(Ue){switch(Ue[0]){case"RadialAxial":return new Ce(Ue);case"Mesh":return new Me(Ue);case"Dummy":return new Fe}throw new Error(`Unknown IR type: ${Ue[0]}`)}const Oe={COLORED:1,UNCOLORED:2},Ge=class Ge{constructor(Ye,Qe,rn,tn,an){this.operatorList=Ye[2],this.matrix=Ye[3]||[1,0,0,1,0,0],this.bbox=Ye[4],this.xstep=Ye[5],this.ystep=Ye[6],this.paintType=Ye[7],this.tilingType=Ye[8],this.color=Qe,this.ctx=rn,this.canvasGraphicsFactory=tn,this.baseTransform=an}createPatternCanvas(Ye){const Qe=this.operatorList,rn=this.bbox,tn=this.xstep,an=this.ystep,qe=this.paintType,Ke=this.tilingType,sn=this.color,gn=this.canvasGraphicsFactory;(0,xe.info)("TilingType: "+Ke);const He=rn[0],en=rn[1],cn=rn[2],Sn=rn[3],Tn=xe.Util.singularValueDecompose2dScale(this.matrix),hn=xe.Util.singularValueDecompose2dScale(this.baseTransform),pn=[Tn[0]*hn[0],Tn[1]*hn[1]],bn=this.getSizeAndScale(tn,this.ctx.canvas.width,pn[0]),fn=this.getSizeAndScale(an,this.ctx.canvas.height,pn[1]),An=Ye.cachedCanvases.getCanvas("pattern",bn.size,fn.size,!0),xn=An.context,Je=gn.createCanvasGraphics(xn);Je.groupLevel=Ye.groupLevel,this.setFillAndStrokeStyleToContext(Je,qe,sn);let We=He,Ze=en,un=cn,yn=Sn;return He<0&&(We=0,un+=Math.abs(He)),en<0&&(Ze=0,yn+=Math.abs(en)),xn.translate(-(bn.scale*We),-(fn.scale*Ze)),Je.transform(bn.scale,0,0,fn.scale,0,0),xn.save(),this.clipBbox(Je,We,Ze,un,yn),Je.baseTransform=(0,Ee.getCurrentTransform)(Je.ctx),Je.executeOperatorList(Qe),Je.endDrawing(),{canvas:An.canvas,scaleX:bn.scale,scaleY:fn.scale,offsetX:We,offsetY:Ze}}getSizeAndScale(Ye,Qe,rn){Ye=Math.abs(Ye);const tn=Math.max(Ge.MAX_PATTERN_SIZE,Qe);let an=Math.ceil(Ye*rn);return an>=tn?an=tn:rn=an/Ye,{scale:rn,size:an}}clipBbox(Ye,Qe,rn,tn,an){const qe=tn-Qe,Ke=an-rn;Ye.ctx.rect(Qe,rn,qe,Ke),Ye.current.updateRectMinMax((0,Ee.getCurrentTransform)(Ye.ctx),[Qe,rn,tn,an]),Ye.clip(),Ye.endPath()}setFillAndStrokeStyleToContext(Ye,Qe,rn){const tn=Ye.ctx,an=Ye.current;switch(Qe){case Oe.COLORED:const qe=this.ctx;tn.fillStyle=qe.fillStyle,tn.strokeStyle=qe.strokeStyle,an.fillColor=qe.fillStyle,an.strokeColor=qe.strokeStyle;break;case Oe.UNCOLORED:const Ke=xe.Util.makeHexColor(rn[0],rn[1],rn[2]);tn.fillStyle=Ke,tn.strokeStyle=Ke,an.fillColor=Ke,an.strokeColor=Ke;break;default:throw new xe.FormatError(`Unsupported paint type: ${Qe}`)}}getPattern(Ye,Qe,rn,tn){let an=rn;tn!==Ae.SHADING&&(an=xe.Util.transform(an,Qe.baseTransform),this.matrix&&(an=xe.Util.transform(an,this.matrix)));const qe=this.createPatternCanvas(Qe);let Ke=new DOMMatrix(an);Ke=Ke.translate(qe.offsetX,qe.offsetY),Ke=Ke.scale(1/qe.scaleX,1/qe.scaleY);const sn=Ye.createPattern(qe.canvas,"repeat");return sn.setTransform(Ke),sn}};Yr(Ge,"MAX_PATTERN_SIZE",3e3);let $e=Ge;e.TilingPattern=$e}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=Ae,e.convertToRGBA=Ee,e.grayToRGBA=Re;var xe=r(1);function Ee(Ce){switch(Ce.kind){case xe.ImageKind.GRAYSCALE_1BPP:return Ae(Ce);case xe.ImageKind.RGB_24BPP:return Pe(Ce)}return null}function Ae({src:Ce,srcPos:Be=0,dest:ke,width:Me,height:Fe,nonBlackColor:Ve=4294967295,inverseDecode:Oe=!1}){const $e=xe.FeatureTest.isLittleEndian?4278190080:255,[Ge,Ue]=Oe?[Ve,$e]:[$e,Ve],Ye=Me>>3,Qe=Me&7,rn=Ce.length;ke=new Uint32Array(ke.buffer);let tn=0;for(let an=0;an<Fe;an++){for(const Ke=Be+Ye;Be<Ke;Be++){const sn=Be<rn?Ce[Be]:255;ke[tn++]=sn&128?Ue:Ge,ke[tn++]=sn&64?Ue:Ge,ke[tn++]=sn&32?Ue:Ge,ke[tn++]=sn&16?Ue:Ge,ke[tn++]=sn&8?Ue:Ge,ke[tn++]=sn&4?Ue:Ge,ke[tn++]=sn&2?Ue:Ge,ke[tn++]=sn&1?Ue:Ge}if(Qe===0)continue;const qe=Be<rn?Ce[Be++]:255;for(let Ke=0;Ke<Qe;Ke++)ke[tn++]=qe&1<<7-Ke?Ue:Ge}return{srcPos:Be,destPos:tn}}function Pe({src:Ce,srcPos:Be=0,dest:ke,destPos:Me=0,width:Fe,height:Ve}){let Oe=0;const $e=Ce.length>>2,Ge=new Uint32Array(Ce.buffer,Be,$e);if(xe.FeatureTest.isLittleEndian){for(;Oe<$e-2;Oe+=3,Me+=4){const Ue=Ge[Oe],Ye=Ge[Oe+1],Qe=Ge[Oe+2];ke[Me]=Ue|4278190080,ke[Me+1]=Ue>>>24|Ye<<8|4278190080,ke[Me+2]=Ye>>>16|Qe<<16|4278190080,ke[Me+3]=Qe>>>8|4278190080}for(let Ue=Oe*4,Ye=Ce.length;Ue<Ye;Ue+=3)ke[Me++]=Ce[Ue]|Ce[Ue+1]<<8|Ce[Ue+2]<<16|4278190080}else{for(;Oe<$e-2;Oe+=3,Me+=4){const Ue=Ge[Oe],Ye=Ge[Oe+1],Qe=Ge[Oe+2];ke[Me]=Ue|255,ke[Me+1]=Ue<<24|Ye>>>8|255,ke[Me+2]=Ye<<16|Qe>>>16|255,ke[Me+3]=Qe<<8|255}for(let Ue=Oe*4,Ye=Ce.length;Ue<Ye;Ue+=3)ke[Me++]=Ce[Ue]<<24|Ce[Ue+1]<<16|Ce[Ue+2]<<8|255}return{srcPos:Be,destPos:Me}}function Re(Ce,Be){if(xe.FeatureTest.isLittleEndian)for(let ke=0,Me=Ce.length;ke<Me;ke++)Be[ke]=Ce[ke]*65793|4278190080;else for(let ke=0,Me=Ce.length;ke<Me;ke++)Be[ke]=Ce[ke]*16843008|255}}),((t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const r=Object.create(null);e.GlobalWorkerOptions=r,r.workerPort=null,r.workerSrc=""}),((t,e,r)=>{var Ce,g0,m0,zd;Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var xe=r(1);const Ee={DATA:1,ERROR:2},Ae={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Pe(Fe){switch(Fe instanceof Error||typeof Fe=="object"&&Fe!==null||(0,xe.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),Fe.name){case"AbortException":return new xe.AbortException(Fe.message);case"MissingPDFException":return new xe.MissingPDFException(Fe.message);case"PasswordException":return new xe.PasswordException(Fe.message,Fe.code);case"UnexpectedResponseException":return new xe.UnexpectedResponseException(Fe.message,Fe.status);case"UnknownErrorException":return new xe.UnknownErrorException(Fe.message,Fe.details);default:return new xe.UnknownErrorException(Fe.message,Fe.toString())}}class Re{constructor(Ve,Oe,$e){bi(this,Ce);this.sourceName=Ve,this.targetName=Oe,this.comObj=$e,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=Ge=>{const Ue=Ge.data;if(Ue.targetName!==this.sourceName)return;if(Ue.stream){oi(this,Ce,m0).call(this,Ue);return}if(Ue.callback){const Qe=Ue.callbackId,rn=this.callbackCapabilities[Qe];if(!rn)throw new Error(`Cannot resolve callback ${Qe}`);if(delete this.callbackCapabilities[Qe],Ue.callback===Ee.DATA)rn.resolve(Ue.data);else if(Ue.callback===Ee.ERROR)rn.reject(Pe(Ue.reason));else throw new Error("Unexpected callback case");return}const Ye=this.actionHandler[Ue.action];if(!Ye)throw new Error(`Unknown action from worker: ${Ue.action}`);if(Ue.callbackId){const Qe=this.sourceName,rn=Ue.sourceName;new Promise(function(tn){tn(Ye(Ue.data))}).then(function(tn){$e.postMessage({sourceName:Qe,targetName:rn,callback:Ee.DATA,callbackId:Ue.callbackId,data:tn})},function(tn){$e.postMessage({sourceName:Qe,targetName:rn,callback:Ee.ERROR,callbackId:Ue.callbackId,reason:Pe(tn)})});return}if(Ue.streamId){oi(this,Ce,g0).call(this,Ue);return}Ye(Ue.data)},$e.addEventListener("message",this._onComObjOnMessage)}on(Ve,Oe){const $e=this.actionHandler;if($e[Ve])throw new Error(`There is already an actionName called "${Ve}"`);$e[Ve]=Oe}send(Ve,Oe,$e){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:Ve,data:Oe},$e)}sendWithPromise(Ve,Oe,$e){const Ge=this.callbackId++,Ue=new xe.PromiseCapability;this.callbackCapabilities[Ge]=Ue;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:Ve,callbackId:Ge,data:Oe},$e)}catch(Ye){Ue.reject(Ye)}return Ue.promise}sendWithStream(Ve,Oe,$e,Ge){const Ue=this.streamId++,Ye=this.sourceName,Qe=this.targetName,rn=this.comObj;return new ReadableStream({start:tn=>{const an=new xe.PromiseCapability;return this.streamControllers[Ue]={controller:tn,startCall:an,pullCall:null,cancelCall:null,isClosed:!1},rn.postMessage({sourceName:Ye,targetName:Qe,action:Ve,streamId:Ue,data:Oe,desiredSize:tn.desiredSize},Ge),an.promise},pull:tn=>{const an=new xe.PromiseCapability;return this.streamControllers[Ue].pullCall=an,rn.postMessage({sourceName:Ye,targetName:Qe,stream:Ae.PULL,streamId:Ue,desiredSize:tn.desiredSize}),an.promise},cancel:tn=>{(0,xe.assert)(tn instanceof Error,"cancel must have a valid reason");const an=new xe.PromiseCapability;return this.streamControllers[Ue].cancelCall=an,this.streamControllers[Ue].isClosed=!0,rn.postMessage({sourceName:Ye,targetName:Qe,stream:Ae.CANCEL,streamId:Ue,reason:Pe(tn)}),an.promise}},$e)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}Ce=new WeakSet,g0=function(Ve){const Oe=Ve.streamId,$e=this.sourceName,Ge=Ve.sourceName,Ue=this.comObj,Ye=this,Qe=this.actionHandler[Ve.action],rn={enqueue(tn,an=1,qe){if(this.isCancelled)return;const Ke=this.desiredSize;this.desiredSize-=an,Ke>0&&this.desiredSize<=0&&(this.sinkCapability=new xe.PromiseCapability,this.ready=this.sinkCapability.promise),Ue.postMessage({sourceName:$e,targetName:Ge,stream:Ae.ENQUEUE,streamId:Oe,chunk:tn},qe)},close(){this.isCancelled||(this.isCancelled=!0,Ue.postMessage({sourceName:$e,targetName:Ge,stream:Ae.CLOSE,streamId:Oe}),delete Ye.streamSinks[Oe])},error(tn){(0,xe.assert)(tn instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,Ue.postMessage({sourceName:$e,targetName:Ge,stream:Ae.ERROR,streamId:Oe,reason:Pe(tn)}))},sinkCapability:new xe.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:Ve.desiredSize,ready:null};rn.sinkCapability.resolve(),rn.ready=rn.sinkCapability.promise,this.streamSinks[Oe]=rn,new Promise(function(tn){tn(Qe(Ve.data,rn))}).then(function(){Ue.postMessage({sourceName:$e,targetName:Ge,stream:Ae.START_COMPLETE,streamId:Oe,success:!0})},function(tn){Ue.postMessage({sourceName:$e,targetName:Ge,stream:Ae.START_COMPLETE,streamId:Oe,reason:Pe(tn)})})},m0=function(Ve){const Oe=Ve.streamId,$e=this.sourceName,Ge=Ve.sourceName,Ue=this.comObj,Ye=this.streamControllers[Oe],Qe=this.streamSinks[Oe];switch(Ve.stream){case Ae.START_COMPLETE:Ve.success?Ye.startCall.resolve():Ye.startCall.reject(Pe(Ve.reason));break;case Ae.PULL_COMPLETE:Ve.success?Ye.pullCall.resolve():Ye.pullCall.reject(Pe(Ve.reason));break;case Ae.PULL:if(!Qe){Ue.postMessage({sourceName:$e,targetName:Ge,stream:Ae.PULL_COMPLETE,streamId:Oe,success:!0});break}Qe.desiredSize<=0&&Ve.desiredSize>0&&Qe.sinkCapability.resolve(),Qe.desiredSize=Ve.desiredSize,new Promise(function(rn){var tn;rn((tn=Qe.onPull)==null?void 0:tn.call(Qe))}).then(function(){Ue.postMessage({sourceName:$e,targetName:Ge,stream:Ae.PULL_COMPLETE,streamId:Oe,success:!0})},function(rn){Ue.postMessage({sourceName:$e,targetName:Ge,stream:Ae.PULL_COMPLETE,streamId:Oe,reason:Pe(rn)})});break;case Ae.ENQUEUE:if((0,xe.assert)(Ye,"enqueue should have stream controller"),Ye.isClosed)break;Ye.controller.enqueue(Ve.chunk);break;case Ae.CLOSE:if((0,xe.assert)(Ye,"close should have stream controller"),Ye.isClosed)break;Ye.isClosed=!0,Ye.controller.close(),oi(this,Ce,zd).call(this,Ye,Oe);break;case Ae.ERROR:(0,xe.assert)(Ye,"error should have stream controller"),Ye.controller.error(Pe(Ve.reason)),oi(this,Ce,zd).call(this,Ye,Oe);break;case Ae.CANCEL_COMPLETE:Ve.success?Ye.cancelCall.resolve():Ye.cancelCall.reject(Pe(Ve.reason)),oi(this,Ce,zd).call(this,Ye,Oe);break;case Ae.CANCEL:if(!Qe)break;new Promise(function(rn){var tn;rn((tn=Qe.onCancel)==null?void 0:tn.call(Qe,Pe(Ve.reason)))}).then(function(){Ue.postMessage({sourceName:$e,targetName:Ge,stream:Ae.CANCEL_COMPLETE,streamId:Oe,success:!0})},function(rn){Ue.postMessage({sourceName:$e,targetName:Ge,stream:Ae.CANCEL_COMPLETE,streamId:Oe,reason:Pe(rn)})}),Qe.sinkCapability.reject(Pe(Ve.reason)),Qe.isCancelled=!0,delete this.streamSinks[Oe];break;default:throw new Error("Unexpected stream case")}},zd=async function(Ve,Oe){var $e,Ge,Ue;await Promise.allSettled([($e=Ve.startCall)==null?void 0:$e.promise,(Ge=Ve.pullCall)==null?void 0:Ge.promise,(Ue=Ve.cancelCall)==null?void 0:Ue.promise]),delete this.streamControllers[Oe]},e.MessageHandler=Re}),((t,e,r)=>{var Ae,Pe;Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var xe=r(1);class Ee{constructor({parsedData:Ce,rawData:Be}){bi(this,Ae);bi(this,Pe);xi(this,Ae,Ce),xi(this,Pe,Be)}getRaw(){return dn(this,Pe)}get(Ce){return dn(this,Ae).get(Ce)??null}getAll(){return(0,xe.objectFromMap)(dn(this,Ae))}has(Ce){return dn(this,Ae).has(Ce)}}Ae=new WeakMap,Pe=new WeakMap,e.Metadata=Ee}),((t,e,r)=>{var Ce,Be,ke,Me,Fe,Ve,Pp;Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var xe=r(1),Ee=r(8);const Ae=Symbol("INTERNAL");class Pe{constructor(Ge,Ue){bi(this,Ce,!0);this.name=Ge,this.intent=Ue}get visible(){return dn(this,Ce)}_setVisible(Ge,Ue){Ge!==Ae&&(0,xe.unreachable)("Internal method `_setVisible` called."),xi(this,Ce,Ue)}}Ce=new WeakMap;class Re{constructor(Ge){bi(this,Ve);bi(this,Be,null);bi(this,ke,new Map);bi(this,Me,null);bi(this,Fe,null);if(this.name=null,this.creator=null,Ge!==null){this.name=Ge.name,this.creator=Ge.creator,xi(this,Fe,Ge.order);for(const Ue of Ge.groups)dn(this,ke).set(Ue.id,new Pe(Ue.name,Ue.intent));if(Ge.baseState==="OFF")for(const Ue of dn(this,ke).values())Ue._setVisible(Ae,!1);for(const Ue of Ge.on)dn(this,ke).get(Ue)._setVisible(Ae,!0);for(const Ue of Ge.off)dn(this,ke).get(Ue)._setVisible(Ae,!1);xi(this,Me,this.getHash())}}isVisible(Ge){if(dn(this,ke).size===0)return!0;if(!Ge)return(0,xe.warn)("Optional content group not defined."),!0;if(Ge.type==="OCG")return dn(this,ke).has(Ge.id)?dn(this,ke).get(Ge.id).visible:((0,xe.warn)(`Optional content group not found: ${Ge.id}`),!0);if(Ge.type==="OCMD"){if(Ge.expression)return oi(this,Ve,Pp).call(this,Ge.expression);if(!Ge.policy||Ge.policy==="AnyOn"){for(const Ue of Ge.ids){if(!dn(this,ke).has(Ue))return(0,xe.warn)(`Optional content group not found: ${Ue}`),!0;if(dn(this,ke).get(Ue).visible)return!0}return!1}else if(Ge.policy==="AllOn"){for(const Ue of Ge.ids){if(!dn(this,ke).has(Ue))return(0,xe.warn)(`Optional content group not found: ${Ue}`),!0;if(!dn(this,ke).get(Ue).visible)return!1}return!0}else if(Ge.policy==="AnyOff"){for(const Ue of Ge.ids){if(!dn(this,ke).has(Ue))return(0,xe.warn)(`Optional content group not found: ${Ue}`),!0;if(!dn(this,ke).get(Ue).visible)return!0}return!1}else if(Ge.policy==="AllOff"){for(const Ue of Ge.ids){if(!dn(this,ke).has(Ue))return(0,xe.warn)(`Optional content group not found: ${Ue}`),!0;if(dn(this,ke).get(Ue).visible)return!1}return!0}return(0,xe.warn)(`Unknown optional content policy ${Ge.policy}.`),!0}return(0,xe.warn)(`Unknown group type ${Ge.type}.`),!0}setVisibility(Ge,Ue=!0){if(!dn(this,ke).has(Ge)){(0,xe.warn)(`Optional content group not found: ${Ge}`);return}dn(this,ke).get(Ge)._setVisible(Ae,!!Ue),xi(this,Be,null)}get hasInitialVisibility(){return dn(this,Me)===null||this.getHash()===dn(this,Me)}getOrder(){return dn(this,ke).size?dn(this,Fe)?dn(this,Fe).slice():[...dn(this,ke).keys()]:null}getGroups(){return dn(this,ke).size>0?(0,xe.objectFromMap)(dn(this,ke)):null}getGroup(Ge){return dn(this,ke).get(Ge)||null}getHash(){if(dn(this,Be)!==null)return dn(this,Be);const Ge=new Ee.MurmurHash3_64;for(const[Ue,Ye]of dn(this,ke))Ge.update(`${Ue}:${Ye.visible}`);return xi(this,Be,Ge.hexdigest())}}Be=new WeakMap,ke=new WeakMap,Me=new WeakMap,Fe=new WeakMap,Ve=new WeakSet,Pp=function(Ge){const Ue=Ge.length;if(Ue<2)return!0;const Ye=Ge[0];for(let Qe=1;Qe<Ue;Qe++){const rn=Ge[Qe];let tn;if(Array.isArray(rn))tn=oi(this,Ve,Pp).call(this,rn);else if(dn(this,ke).has(rn))tn=dn(this,ke).get(rn).visible;else return(0,xe.warn)(`Optional content group not found: ${rn}`),!0;switch(Ye){case"And":if(!tn)return!1;break;case"Or":if(tn)return!0;break;case"Not":return!tn;default:return!0}}return Ye==="And"},e.OptionalContentConfig=Re}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var xe=r(1),Ee=r(6);class Ae{constructor({length:Be,initialData:ke,progressiveDone:Me=!1,contentDispositionFilename:Fe=null,disableRange:Ve=!1,disableStream:Oe=!1},$e){if((0,xe.assert)($e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=Me,this._contentDispositionFilename=Fe,(ke==null?void 0:ke.length)>0){const Ge=ke instanceof Uint8Array&&ke.byteLength===ke.buffer.byteLength?ke.buffer:new Uint8Array(ke).buffer;this._queuedChunks.push(Ge)}this._pdfDataRangeTransport=$e,this._isStreamingSupported=!Oe,this._isRangeSupported=!Ve,this._contentLength=Be,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((Ge,Ue)=>{this._onReceiveData({begin:Ge,chunk:Ue})}),this._pdfDataRangeTransport.addProgressListener((Ge,Ue)=>{this._onProgress({loaded:Ge,total:Ue})}),this._pdfDataRangeTransport.addProgressiveReadListener(Ge=>{this._onReceiveData({chunk:Ge})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:Be,chunk:ke}){const Me=ke instanceof Uint8Array&&ke.byteLength===ke.buffer.byteLength?ke.buffer:new Uint8Array(ke).buffer;if(Be===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(Me):this._queuedChunks.push(Me);else{const Fe=this._rangeReaders.some(function(Ve){return Ve._begin!==Be?!1:(Ve._enqueue(Me),!0)});(0,xe.assert)(Fe,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var Be;return((Be=this._fullRequestReader)==null?void 0:Be._loaded)??0}_onProgress(Be){var ke,Me,Fe,Ve;Be.total===void 0?(Me=(ke=this._rangeReaders[0])==null?void 0:ke.onProgress)==null||Me.call(ke,{loaded:Be.loaded}):(Ve=(Fe=this._fullRequestReader)==null?void 0:Fe.onProgress)==null||Ve.call(Fe,{loaded:Be.loaded,total:Be.total})}_onProgressiveDone(){var Be;(Be=this._fullRequestReader)==null||Be.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(Be){const ke=this._rangeReaders.indexOf(Be);ke>=0&&this._rangeReaders.splice(ke,1)}getFullReader(){(0,xe.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const Be=this._queuedChunks;return this._queuedChunks=null,new Pe(this,Be,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(Be,ke){if(ke<=this._progressiveDataLength)return null;const Me=new Re(this,Be,ke);return this._pdfDataRangeTransport.requestDataRange(Be,ke),this._rangeReaders.push(Me),Me}cancelAllRequests(Be){var ke;(ke=this._fullRequestReader)==null||ke.cancel(Be);for(const Me of this._rangeReaders.slice(0))Me.cancel(Be);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=Ae;class Pe{constructor(Be,ke,Me=!1,Fe=null){this._stream=Be,this._done=Me||!1,this._filename=(0,Ee.isPdfFile)(Fe)?Fe:null,this._queuedChunks=ke||[],this._loaded=0;for(const Ve of this._queuedChunks)this._loaded+=Ve.byteLength;this._requests=[],this._headersReady=Promise.resolve(),Be._fullRequestReader=this,this.onProgress=null}_enqueue(Be){this._done||(this._requests.length>0?this._requests.shift().resolve({value:Be,done:!1}):this._queuedChunks.push(Be),this._loaded+=Be.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const Be=new xe.PromiseCapability;return this._requests.push(Be),Be.promise}cancel(Be){this._done=!0;for(const ke of this._requests)ke.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Re{constructor(Be,ke,Me){this._stream=Be,this._begin=ke,this._end=Me,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(Be){if(!this._done){if(this._requests.length===0)this._queuedChunk=Be;else{this._requests.shift().resolve({value:Be,done:!1});for(const Me of this._requests)Me.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const ke=this._queuedChunk;return this._queuedChunk=null,{value:ke,done:!1}}if(this._done)return{value:void 0,done:!0};const Be=new xe.PromiseCapability;return this._requests.push(Be),Be.promise}cancel(Be){this._done=!0;for(const ke of this._requests)ke.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var xe=r(1),Ee=r(20);function Ae(Me,Fe,Ve){return{method:"GET",headers:Me,signal:Ve.signal,mode:"cors",credentials:Fe?"include":"same-origin",redirect:"follow"}}function Pe(Me){const Fe=new Headers;for(const Ve in Me){const Oe=Me[Ve];Oe!==void 0&&Fe.append(Ve,Oe)}return Fe}function Re(Me){return Me instanceof Uint8Array?Me.buffer:Me instanceof ArrayBuffer?Me:((0,xe.warn)(`getArrayBuffer - unexpected data format: ${Me}`),new Uint8Array(Me).buffer)}class Ce{constructor(Fe){this.source=Fe,this.isHttp=/^https?:/i.test(Fe.url),this.httpHeaders=this.isHttp&&Fe.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var Fe;return((Fe=this._fullRequestReader)==null?void 0:Fe._loaded)??0}getFullReader(){return(0,xe.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Be(this),this._fullRequestReader}getRangeReader(Fe,Ve){if(Ve<=this._progressiveDataLength)return null;const Oe=new ke(this,Fe,Ve);return this._rangeRequestReaders.push(Oe),Oe}cancelAllRequests(Fe){var Ve;(Ve=this._fullRequestReader)==null||Ve.cancel(Fe);for(const Oe of this._rangeRequestReaders.slice(0))Oe.cancel(Fe)}}e.PDFFetchStream=Ce;class Be{constructor(Fe){this._stream=Fe,this._reader=null,this._loaded=0,this._filename=null;const Ve=Fe.source;this._withCredentials=Ve.withCredentials||!1,this._contentLength=Ve.length,this._headersCapability=new xe.PromiseCapability,this._disableRange=Ve.disableRange||!1,this._rangeChunkSize=Ve.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!Ve.disableStream,this._isRangeSupported=!Ve.disableRange,this._headers=Pe(this._stream.httpHeaders);const Oe=Ve.url;fetch(Oe,Ae(this._headers,this._withCredentials,this._abortController)).then($e=>{if(!(0,Ee.validateResponseStatus)($e.status))throw(0,Ee.createResponseStatusError)($e.status,Oe);this._reader=$e.body.getReader(),this._headersCapability.resolve();const Ge=Qe=>$e.headers.get(Qe),{allowRangeRequests:Ue,suggestedLength:Ye}=(0,Ee.validateRangeRequestCapabilities)({getResponseHeader:Ge,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=Ue,this._contentLength=Ye||this._contentLength,this._filename=(0,Ee.extractFilenameFromHeader)(Ge),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new xe.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Oe;await this._headersCapability.promise;const{value:Fe,done:Ve}=await this._reader.read();return Ve?{value:Fe,done:Ve}:(this._loaded+=Fe.byteLength,(Oe=this.onProgress)==null||Oe.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Re(Fe),done:!1})}cancel(Fe){var Ve;(Ve=this._reader)==null||Ve.cancel(Fe),this._abortController.abort()}}class ke{constructor(Fe,Ve,Oe){this._stream=Fe,this._reader=null,this._loaded=0;const $e=Fe.source;this._withCredentials=$e.withCredentials||!1,this._readCapability=new xe.PromiseCapability,this._isStreamingSupported=!$e.disableStream,this._abortController=new AbortController,this._headers=Pe(this._stream.httpHeaders),this._headers.append("Range",`bytes=${Ve}-${Oe-1}`);const Ge=$e.url;fetch(Ge,Ae(this._headers,this._withCredentials,this._abortController)).then(Ue=>{if(!(0,Ee.validateResponseStatus)(Ue.status))throw(0,Ee.createResponseStatusError)(Ue.status,Ge);this._readCapability.resolve(),this._reader=Ue.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Oe;await this._readCapability.promise;const{value:Fe,done:Ve}=await this._reader.read();return Ve?{value:Fe,done:Ve}:(this._loaded+=Fe.byteLength,(Oe=this.onProgress)==null||Oe.call(this,{loaded:this._loaded}),{value:Re(Fe),done:!1})}cancel(Fe){var Ve;(Ve=this._reader)==null||Ve.cancel(Fe),this._abortController.abort()}}}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=Ce,e.extractFilenameFromHeader=Re,e.validateRangeRequestCapabilities=Pe,e.validateResponseStatus=Be;var xe=r(1),Ee=r(21),Ae=r(6);function Pe({getResponseHeader:ke,isHttp:Me,rangeChunkSize:Fe,disableRange:Ve}){const Oe={allowRangeRequests:!1,suggestedLength:void 0},$e=parseInt(ke("Content-Length"),10);return!Number.isInteger($e)||(Oe.suggestedLength=$e,$e<=2*Fe)||Ve||!Me||ke("Accept-Ranges")!=="bytes"||(ke("Content-Encoding")||"identity")!=="identity"||(Oe.allowRangeRequests=!0),Oe}function Re(ke){const Me=ke("Content-Disposition");if(Me){let Fe=(0,Ee.getFilenameFromContentDispositionHeader)(Me);if(Fe.includes("%"))try{Fe=decodeURIComponent(Fe)}catch{}if((0,Ae.isPdfFile)(Fe))return Fe}return null}function Ce(ke,Me){return ke===404||ke===0&&Me.startsWith("file:")?new xe.MissingPDFException('Missing PDF "'+Me+'".'):new xe.UnexpectedResponseException(`Unexpected server response (${ke}) while retrieving PDF "${Me}".`,ke)}function Be(ke){return ke===200||ke===206}}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=Ee;var xe=r(1);function Ee(Ae){let Pe=!0,Re=Ce("filename\\*","i").exec(Ae);if(Re){Re=Re[1];let $e=Fe(Re);return $e=unescape($e),$e=Ve($e),$e=Oe($e),ke($e)}if(Re=Me(Ae),Re){const $e=Oe(Re);return ke($e)}if(Re=Ce("filename","i").exec(Ae),Re){Re=Re[1];let $e=Fe(Re);return $e=Oe($e),ke($e)}function Ce($e,Ge){return new RegExp("(?:^|;)\\s*"+$e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',Ge)}function Be($e,Ge){if($e){if(!/^[\x00-\xFF]+$/.test(Ge))return Ge;try{const Ue=new TextDecoder($e,{fatal:!0}),Ye=(0,xe.stringToBytes)(Ge);Ge=Ue.decode(Ye),Pe=!1}catch{}}return Ge}function ke($e){return Pe&&/[\x80-\xff]/.test($e)&&($e=Be("utf-8",$e),Pe&&($e=Be("iso-8859-1",$e))),$e}function Me($e){const Ge=[];let Ue;const Ye=Ce("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(Ue=Ye.exec($e))!==null;){let[,rn,tn,an]=Ue;if(rn=parseInt(rn,10),rn in Ge){if(rn===0)break;continue}Ge[rn]=[tn,an]}const Qe=[];for(let rn=0;rn<Ge.length&&rn in Ge;++rn){let[tn,an]=Ge[rn];an=Fe(an),tn&&(an=unescape(an),rn===0&&(an=Ve(an))),Qe.push(an)}return Qe.join("")}function Fe($e){if($e.startsWith('"')){const Ge=$e.slice(1).split('\\"');for(let Ue=0;Ue<Ge.length;++Ue){const Ye=Ge[Ue].indexOf('"');Ye!==-1&&(Ge[Ue]=Ge[Ue].slice(0,Ye),Ge.length=Ue+1),Ge[Ue]=Ge[Ue].replaceAll(/\\(.)/g,"$1")}$e=Ge.join('"')}return $e}function Ve($e){const Ge=$e.indexOf("'");if(Ge===-1)return $e;const Ue=$e.slice(0,Ge),Qe=$e.slice(Ge+1).replace(/^[^']*'/,"");return Be(Ue,Qe)}function Oe($e){return!$e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test($e)?$e:$e.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(Ge,Ue,Ye,Qe){if(Ye==="q"||Ye==="Q")return Qe=Qe.replaceAll("_"," "),Qe=Qe.replaceAll(/=([0-9a-fA-F]{2})/g,function(rn,tn){return String.fromCharCode(parseInt(tn,16))}),Be(Ue,Qe);try{Qe=atob(Qe)}catch{}return Be(Ue,Qe)})}return""}}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var xe=r(1),Ee=r(20);const Ae=200,Pe=206;function Re(Fe){const Ve=Fe.response;return typeof Ve!="string"?Ve:(0,xe.stringToBytes)(Ve).buffer}class Ce{constructor(Ve,Oe={}){this.url=Ve,this.isHttp=/^https?:/i.test(Ve),this.httpHeaders=this.isHttp&&Oe.httpHeaders||Object.create(null),this.withCredentials=Oe.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(Ve,Oe,$e){const Ge={begin:Ve,end:Oe};for(const Ue in $e)Ge[Ue]=$e[Ue];return this.request(Ge)}requestFull(Ve){return this.request(Ve)}request(Ve){const Oe=new XMLHttpRequest,$e=this.currXhrId++,Ge=this.pendingRequests[$e]={xhr:Oe};Oe.open("GET",this.url),Oe.withCredentials=this.withCredentials;for(const Ue in this.httpHeaders){const Ye=this.httpHeaders[Ue];Ye!==void 0&&Oe.setRequestHeader(Ue,Ye)}return this.isHttp&&"begin"in Ve&&"end"in Ve?(Oe.setRequestHeader("Range",`bytes=${Ve.begin}-${Ve.end-1}`),Ge.expectedStatus=Pe):Ge.expectedStatus=Ae,Oe.responseType="arraybuffer",Ve.onError&&(Oe.onerror=function(Ue){Ve.onError(Oe.status)}),Oe.onreadystatechange=this.onStateChange.bind(this,$e),Oe.onprogress=this.onProgress.bind(this,$e),Ge.onHeadersReceived=Ve.onHeadersReceived,Ge.onDone=Ve.onDone,Ge.onError=Ve.onError,Ge.onProgress=Ve.onProgress,Oe.send(null),$e}onProgress(Ve,Oe){var Ge;const $e=this.pendingRequests[Ve];$e&&((Ge=$e.onProgress)==null||Ge.call($e,Oe))}onStateChange(Ve,Oe){var rn,tn,an;const $e=this.pendingRequests[Ve];if(!$e)return;const Ge=$e.xhr;if(Ge.readyState>=2&&$e.onHeadersReceived&&($e.onHeadersReceived(),delete $e.onHeadersReceived),Ge.readyState!==4||!(Ve in this.pendingRequests))return;if(delete this.pendingRequests[Ve],Ge.status===0&&this.isHttp){(rn=$e.onError)==null||rn.call($e,Ge.status);return}const Ue=Ge.status||Ae;if(!(Ue===Ae&&$e.expectedStatus===Pe)&&Ue!==$e.expectedStatus){(tn=$e.onError)==null||tn.call($e,Ge.status);return}const Qe=Re(Ge);if(Ue===Pe){const qe=Ge.getResponseHeader("Content-Range"),Ke=/bytes (\d+)-(\d+)\/(\d+)/.exec(qe);$e.onDone({begin:parseInt(Ke[1],10),chunk:Qe})}else Qe?$e.onDone({begin:0,chunk:Qe}):(an=$e.onError)==null||an.call($e,Ge.status)}getRequestXhr(Ve){return this.pendingRequests[Ve].xhr}isPendingRequest(Ve){return Ve in this.pendingRequests}abortRequest(Ve){const Oe=this.pendingRequests[Ve].xhr;delete this.pendingRequests[Ve],Oe.abort()}}class Be{constructor(Ve){this._source=Ve,this._manager=new Ce(Ve.url,{httpHeaders:Ve.httpHeaders,withCredentials:Ve.withCredentials}),this._rangeChunkSize=Ve.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(Ve){const Oe=this._rangeRequestReaders.indexOf(Ve);Oe>=0&&this._rangeRequestReaders.splice(Oe,1)}getFullReader(){return(0,xe.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new ke(this._manager,this._source),this._fullRequestReader}getRangeReader(Ve,Oe){const $e=new Me(this._manager,Ve,Oe);return $e.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push($e),$e}cancelAllRequests(Ve){var Oe;(Oe=this._fullRequestReader)==null||Oe.cancel(Ve);for(const $e of this._rangeRequestReaders.slice(0))$e.cancel(Ve)}}e.PDFNetworkStream=Be;class ke{constructor(Ve,Oe){this._manager=Ve;const $e={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=Oe.url,this._fullRequestId=Ve.requestFull($e),this._headersReceivedCapability=new xe.PromiseCapability,this._disableRange=Oe.disableRange||!1,this._contentLength=Oe.length,this._rangeChunkSize=Oe.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const Ve=this._fullRequestId,Oe=this._manager.getRequestXhr(Ve),$e=Ye=>Oe.getResponseHeader(Ye),{allowRangeRequests:Ge,suggestedLength:Ue}=(0,Ee.validateRangeRequestCapabilities)({getResponseHeader:$e,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});Ge&&(this._isRangeSupported=!0),this._contentLength=Ue||this._contentLength,this._filename=(0,Ee.extractFilenameFromHeader)($e),this._isRangeSupported&&this._manager.abortRequest(Ve),this._headersReceivedCapability.resolve()}_onDone(Ve){if(Ve&&(this._requests.length>0?this._requests.shift().resolve({value:Ve.chunk,done:!1}):this._cachedChunks.push(Ve.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const Oe of this._requests)Oe.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(Ve){this._storedError=(0,Ee.createResponseStatusError)(Ve,this._url),this._headersReceivedCapability.reject(this._storedError);for(const Oe of this._requests)Oe.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(Ve){var Oe;(Oe=this.onProgress)==null||Oe.call(this,{loaded:Ve.loaded,total:Ve.lengthComputable?Ve.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const Ve=new xe.PromiseCapability;return this._requests.push(Ve),Ve.promise}cancel(Ve){this._done=!0,this._headersReceivedCapability.reject(Ve);for(const Oe of this._requests)Oe.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Me{constructor(Ve,Oe,$e){this._manager=Ve;const Ge={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=Ve.url,this._requestId=Ve.requestRange(Oe,$e,Ge),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var Ve;(Ve=this.onClosed)==null||Ve.call(this,this)}_onDone(Ve){const Oe=Ve.chunk;this._requests.length>0?this._requests.shift().resolve({value:Oe,done:!1}):this._queuedChunk=Oe,this._done=!0;for(const $e of this._requests)$e.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(Ve){this._storedError=(0,Ee.createResponseStatusError)(Ve,this._url);for(const Oe of this._requests)Oe.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(Ve){var Oe;this.isStreamingSupported||(Oe=this.onProgress)==null||Oe.call(this,{loaded:Ve.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const Oe=this._queuedChunk;return this._queuedChunk=null,{value:Oe,done:!1}}if(this._done)return{value:void 0,done:!0};const Ve=new xe.PromiseCapability;return this._requests.push(Ve),Ve.promise}cancel(Ve){this._done=!0;for(const Oe of this._requests)Oe.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var xe=r(1),Ee=r(20);const Ae=/^file:\/\/\/[a-zA-Z]:\//;function Pe($e){const Ge=require$$5,Ue=Ge.parse($e);return Ue.protocol==="file:"||Ue.host?Ue:/^[a-z]:[/\\]/i.test($e)?Ge.parse(`file:///${$e}`):(Ue.host||(Ue.protocol="file:"),Ue)}class Re{constructor(Ge){this.source=Ge,this.url=Pe(Ge.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&Ge.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var Ge;return((Ge=this._fullRequestReader)==null?void 0:Ge._loaded)??0}getFullReader(){return(0,xe.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new Ve(this):new Me(this),this._fullRequestReader}getRangeReader(Ge,Ue){if(Ue<=this._progressiveDataLength)return null;const Ye=this.isFsUrl?new Oe(this,Ge,Ue):new Fe(this,Ge,Ue);return this._rangeRequestReaders.push(Ye),Ye}cancelAllRequests(Ge){var Ue;(Ue=this._fullRequestReader)==null||Ue.cancel(Ge);for(const Ye of this._rangeRequestReaders.slice(0))Ye.cancel(Ge)}}e.PDFNodeStream=Re;class Ce{constructor(Ge){this._url=Ge.url,this._done=!1,this._storedError=null,this.onProgress=null;const Ue=Ge.source;this._contentLength=Ue.length,this._loaded=0,this._filename=null,this._disableRange=Ue.disableRange||!1,this._rangeChunkSize=Ue.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!Ue.disableStream,this._isRangeSupported=!Ue.disableRange,this._readableStream=null,this._readCapability=new xe.PromiseCapability,this._headersCapability=new xe.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Ye;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const Ge=this._readableStream.read();return Ge===null?(this._readCapability=new xe.PromiseCapability,this.read()):(this._loaded+=Ge.length,(Ye=this.onProgress)==null||Ye.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(Ge).buffer,done:!1})}cancel(Ge){if(!this._readableStream){this._error(Ge);return}this._readableStream.destroy(Ge)}_error(Ge){this._storedError=Ge,this._readCapability.resolve()}_setReadableStream(Ge){this._readableStream=Ge,Ge.on("readable",()=>{this._readCapability.resolve()}),Ge.on("end",()=>{Ge.destroy(),this._done=!0,this._readCapability.resolve()}),Ge.on("error",Ue=>{this._error(Ue)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new xe.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Be{constructor(Ge){this._url=Ge.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new xe.PromiseCapability;const Ue=Ge.source;this._isStreamingSupported=!Ue.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Ye;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const Ge=this._readableStream.read();return Ge===null?(this._readCapability=new xe.PromiseCapability,this.read()):(this._loaded+=Ge.length,(Ye=this.onProgress)==null||Ye.call(this,{loaded:this._loaded}),{value:new Uint8Array(Ge).buffer,done:!1})}cancel(Ge){if(!this._readableStream){this._error(Ge);return}this._readableStream.destroy(Ge)}_error(Ge){this._storedError=Ge,this._readCapability.resolve()}_setReadableStream(Ge){this._readableStream=Ge,Ge.on("readable",()=>{this._readCapability.resolve()}),Ge.on("end",()=>{Ge.destroy(),this._done=!0,this._readCapability.resolve()}),Ge.on("error",Ue=>{this._error(Ue)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function ke($e,Ge){return{protocol:$e.protocol,auth:$e.auth,host:$e.hostname,port:$e.port,path:$e.path,method:"GET",headers:Ge}}class Me extends Ce{constructor(Ge){super(Ge);const Ue=Ye=>{if(Ye.statusCode===404){const an=new xe.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=an,this._headersCapability.reject(an);return}this._headersCapability.resolve(),this._setReadableStream(Ye);const Qe=an=>this._readableStream.headers[an.toLowerCase()],{allowRangeRequests:rn,suggestedLength:tn}=(0,Ee.validateRangeRequestCapabilities)({getResponseHeader:Qe,isHttp:Ge.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=rn,this._contentLength=tn||this._contentLength,this._filename=(0,Ee.extractFilenameFromHeader)(Qe)};if(this._request=null,this._url.protocol==="http:"){const Ye=require$$5;this._request=Ye.request(ke(this._url,Ge.httpHeaders),Ue)}else{const Ye=require$$5;this._request=Ye.request(ke(this._url,Ge.httpHeaders),Ue)}this._request.on("error",Ye=>{this._storedError=Ye,this._headersCapability.reject(Ye)}),this._request.end()}}class Fe extends Be{constructor(Ge,Ue,Ye){super(Ge),this._httpHeaders={};for(const rn in Ge.httpHeaders){const tn=Ge.httpHeaders[rn];tn!==void 0&&(this._httpHeaders[rn]=tn)}this._httpHeaders.Range=`bytes=${Ue}-${Ye-1}`;const Qe=rn=>{if(rn.statusCode===404){const tn=new xe.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=tn;return}this._setReadableStream(rn)};if(this._request=null,this._url.protocol==="http:"){const rn=require$$5;this._request=rn.request(ke(this._url,this._httpHeaders),Qe)}else{const rn=require$$5;this._request=rn.request(ke(this._url,this._httpHeaders),Qe)}this._request.on("error",rn=>{this._storedError=rn}),this._request.end()}}class Ve extends Ce{constructor(Ge){super(Ge);let Ue=decodeURIComponent(this._url.path);Ae.test(this._url.href)&&(Ue=Ue.replace(/^\//,""));const Ye=require$$5;Ye.lstat(Ue,(Qe,rn)=>{if(Qe){Qe.code==="ENOENT"&&(Qe=new xe.MissingPDFException(`Missing PDF "${Ue}".`)),this._storedError=Qe,this._headersCapability.reject(Qe);return}this._contentLength=rn.size,this._setReadableStream(Ye.createReadStream(Ue)),this._headersCapability.resolve()})}}class Oe extends Be{constructor(Ge,Ue,Ye){super(Ge);let Qe=decodeURIComponent(this._url.path);Ae.test(this._url.href)&&(Qe=Qe.replace(/^\//,""));const rn=require$$5;this._setReadableStream(rn.createReadStream(Qe,{start:Ue,end:Ye-1}))}}}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var xe=r(6),Ee=r(1);const Ae={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},Pe="http://www.w3.org/XML/1998/namespace",Re="http://www.w3.org/1999/xlink",Ce=["butt","round","square"],Be=["miter","round","bevel"],ke=function(rn,tn="",an=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!an)return URL.createObjectURL(new Blob([rn],{type:tn}));const qe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let Ke=`data:${tn};base64,`;for(let sn=0,gn=rn.length;sn<gn;sn+=3){const He=rn[sn]&255,en=rn[sn+1]&255,cn=rn[sn+2]&255,Sn=He>>2,Tn=(He&3)<<4|en>>4,hn=sn+1<gn?(en&15)<<2|cn>>6:64,pn=sn+2<gn?cn&63:64;Ke+=qe[Sn]+qe[Tn]+qe[hn]+qe[pn]}return Ke},Me=(function(){const rn=new Uint8Array([137,80,78,71,13,10,26,10]),tn=12,an=new Int32Array(256);for(let cn=0;cn<256;cn++){let Sn=cn;for(let Tn=0;Tn<8;Tn++)Sn=Sn&1?3988292384^Sn>>1&2147483647:Sn>>1&2147483647;an[cn]=Sn}function qe(cn,Sn,Tn){let hn=-1;for(let pn=Sn;pn<Tn;pn++){const bn=(hn^cn[pn])&255,fn=an[bn];hn=hn>>>8^fn}return hn^-1}function Ke(cn,Sn,Tn,hn){let pn=hn;const bn=Sn.length;Tn[pn]=bn>>24&255,Tn[pn+1]=bn>>16&255,Tn[pn+2]=bn>>8&255,Tn[pn+3]=bn&255,pn+=4,Tn[pn]=cn.charCodeAt(0)&255,Tn[pn+1]=cn.charCodeAt(1)&255,Tn[pn+2]=cn.charCodeAt(2)&255,Tn[pn+3]=cn.charCodeAt(3)&255,pn+=4,Tn.set(Sn,pn),pn+=Sn.length;const fn=qe(Tn,hn+4,pn);Tn[pn]=fn>>24&255,Tn[pn+1]=fn>>16&255,Tn[pn+2]=fn>>8&255,Tn[pn+3]=fn&255}function sn(cn,Sn,Tn){let hn=1,pn=0;for(let bn=Sn;bn<Tn;++bn)hn=(hn+(cn[bn]&255))%65521,pn=(pn+hn)%65521;return pn<<16|hn}function gn(cn){if(!Ee.isNodeJS)return He(cn);try{const Sn=parseInt(process.versions.node)>=8?cn:Buffer.from(cn),Tn=require$$5.deflateSync(Sn,{level:9});return Tn instanceof Uint8Array?Tn:new Uint8Array(Tn)}catch(Sn){(0,Ee.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Sn)}return He(cn)}function He(cn){let Sn=cn.length;const Tn=65535,hn=Math.ceil(Sn/Tn),pn=new Uint8Array(2+Sn+hn*5+4);let bn=0;pn[bn++]=120,pn[bn++]=156;let fn=0;for(;Sn>Tn;)pn[bn++]=0,pn[bn++]=255,pn[bn++]=255,pn[bn++]=0,pn[bn++]=0,pn.set(cn.subarray(fn,fn+Tn),bn),bn+=Tn,fn+=Tn,Sn-=Tn;pn[bn++]=1,pn[bn++]=Sn&255,pn[bn++]=Sn>>8&255,pn[bn++]=~Sn&65535&255,pn[bn++]=(~Sn&65535)>>8&255,pn.set(cn.subarray(fn),bn),bn+=cn.length-fn;const An=sn(cn,0,cn.length);return pn[bn++]=An>>24&255,pn[bn++]=An>>16&255,pn[bn++]=An>>8&255,pn[bn++]=An&255,pn}function en(cn,Sn,Tn,hn){const pn=cn.width,bn=cn.height;let fn,An,xn;const Je=cn.data;switch(Sn){case Ee.ImageKind.GRAYSCALE_1BPP:An=0,fn=1,xn=pn+7>>3;break;case Ee.ImageKind.RGB_24BPP:An=2,fn=8,xn=pn*3;break;case Ee.ImageKind.RGBA_32BPP:An=6,fn=8,xn=pn*4;break;default:throw new Error("invalid format")}const We=new Uint8Array((1+xn)*bn);let Ze=0,un=0;for(let Ln=0;Ln<bn;++Ln)We[Ze++]=0,We.set(Je.subarray(un,un+xn),Ze),un+=xn,Ze+=xn;if(Sn===Ee.ImageKind.GRAYSCALE_1BPP&&hn){Ze=0;for(let Ln=0;Ln<bn;Ln++){Ze++;for(let Gn=0;Gn<xn;Gn++)We[Ze++]^=255}}const yn=new Uint8Array([pn>>24&255,pn>>16&255,pn>>8&255,pn&255,bn>>24&255,bn>>16&255,bn>>8&255,bn&255,fn,An,0,0,0]),_n=gn(We),wn=rn.length+tn*3+yn.length+_n.length,kn=new Uint8Array(wn);let $n=0;return kn.set(rn,$n),$n+=rn.length,Ke("IHDR",yn,kn,$n),$n+=tn+yn.length,Ke("IDATA",_n,kn,$n),$n+=tn+_n.length,Ke("IEND",new Uint8Array(0),kn,$n),ke(kn,"image/png",Tn)}return function(Sn,Tn,hn){const pn=Sn.kind===void 0?Ee.ImageKind.GRAYSCALE_1BPP:Sn.kind;return en(Sn,pn,Tn,hn)}})();class Fe{constructor(){this.fontSizeScale=1,this.fontWeight=Ae.fontWeight,this.fontSize=0,this.textMatrix=Ee.IDENTITY_MATRIX,this.fontMatrix=Ee.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=Ee.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=Ae.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(tn,an){this.x=tn,this.y=an}}function Ve(rn){let tn=[];const an=[];for(const qe of rn){if(qe.fn==="save"){tn.push({fnId:92,fn:"group",items:[]}),an.push(tn),tn=tn.at(-1).items;continue}qe.fn==="restore"?tn=an.pop():tn.push(qe)}return tn}function Oe(rn){if(Number.isInteger(rn))return rn.toString();const tn=rn.toFixed(10);let an=tn.length-1;if(tn[an]!=="0")return tn;do an--;while(tn[an]==="0");return tn.substring(0,tn[an]==="."?an:an+1)}function $e(rn){if(rn[4]===0&&rn[5]===0){if(rn[1]===0&&rn[2]===0)return rn[0]===1&&rn[3]===1?"":`scale(${Oe(rn[0])} ${Oe(rn[3])})`;if(rn[0]===rn[3]&&rn[1]===-rn[2]){const tn=Math.acos(rn[0])*180/Math.PI;return`rotate(${Oe(tn)})`}}else if(rn[0]===1&&rn[1]===0&&rn[2]===0&&rn[3]===1)return`translate(${Oe(rn[4])} ${Oe(rn[5])})`;return`matrix(${Oe(rn[0])} ${Oe(rn[1])} ${Oe(rn[2])} ${Oe(rn[3])} ${Oe(rn[4])} ${Oe(rn[5])})`}let Ge=0,Ue=0,Ye=0;class Qe{constructor(tn,an,qe=!1){(0,xe.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new xe.DOMSVGFactory,this.current=new Fe,this.transformMatrix=Ee.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=tn,this.objs=an,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!qe,this._operatorIdMapping=[];for(const Ke in Ee.OPS)this._operatorIdMapping[Ee.OPS[Ke]]=Ke}getObject(tn,an=null){return typeof tn=="string"?tn.startsWith("g_")?this.commonObjs.get(tn):this.objs.get(tn):an}save(){this.transformStack.push(this.transformMatrix);const tn=this.current;this.extraStack.push(tn),this.current=tn.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(tn){this.save(),this.executeOpTree(tn),this.restore()}loadDependencies(tn){const an=tn.fnArray,qe=tn.argsArray;for(let Ke=0,sn=an.length;Ke<sn;Ke++)if(an[Ke]===Ee.OPS.dependency)for(const gn of qe[Ke]){const He=gn.startsWith("g_")?this.commonObjs:this.objs,en=new Promise(cn=>{He.get(gn,cn)});this.current.dependencies.push(en)}return Promise.all(this.current.dependencies)}transform(tn,an,qe,Ke,sn,gn){const He=[tn,an,qe,Ke,sn,gn];this.transformMatrix=Ee.Util.transform(this.transformMatrix,He),this.tgrp=null}getSVG(tn,an){this.viewport=an;const qe=this._initialize(an);return this.loadDependencies(tn).then(()=>(this.transformMatrix=Ee.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(tn)),qe))}convertOpList(tn){const an=this._operatorIdMapping,qe=tn.argsArray,Ke=tn.fnArray,sn=[];for(let gn=0,He=Ke.length;gn<He;gn++){const en=Ke[gn];sn.push({fnId:en,fn:an[en],args:qe[gn]})}return Ve(sn)}executeOpTree(tn){for(const an of tn){const qe=an.fn,Ke=an.fnId,sn=an.args;switch(Ke|0){case Ee.OPS.beginText:this.beginText();break;case Ee.OPS.dependency:break;case Ee.OPS.setLeading:this.setLeading(sn);break;case Ee.OPS.setLeadingMoveText:this.setLeadingMoveText(sn[0],sn[1]);break;case Ee.OPS.setFont:this.setFont(sn);break;case Ee.OPS.showText:this.showText(sn[0]);break;case Ee.OPS.showSpacedText:this.showText(sn[0]);break;case Ee.OPS.endText:this.endText();break;case Ee.OPS.moveText:this.moveText(sn[0],sn[1]);break;case Ee.OPS.setCharSpacing:this.setCharSpacing(sn[0]);break;case Ee.OPS.setWordSpacing:this.setWordSpacing(sn[0]);break;case Ee.OPS.setHScale:this.setHScale(sn[0]);break;case Ee.OPS.setTextMatrix:this.setTextMatrix(sn[0],sn[1],sn[2],sn[3],sn[4],sn[5]);break;case Ee.OPS.setTextRise:this.setTextRise(sn[0]);break;case Ee.OPS.setTextRenderingMode:this.setTextRenderingMode(sn[0]);break;case Ee.OPS.setLineWidth:this.setLineWidth(sn[0]);break;case Ee.OPS.setLineJoin:this.setLineJoin(sn[0]);break;case Ee.OPS.setLineCap:this.setLineCap(sn[0]);break;case Ee.OPS.setMiterLimit:this.setMiterLimit(sn[0]);break;case Ee.OPS.setFillRGBColor:this.setFillRGBColor(sn[0],sn[1],sn[2]);break;case Ee.OPS.setStrokeRGBColor:this.setStrokeRGBColor(sn[0],sn[1],sn[2]);break;case Ee.OPS.setStrokeColorN:this.setStrokeColorN(sn);break;case Ee.OPS.setFillColorN:this.setFillColorN(sn);break;case Ee.OPS.shadingFill:this.shadingFill(sn[0]);break;case Ee.OPS.setDash:this.setDash(sn[0],sn[1]);break;case Ee.OPS.setRenderingIntent:this.setRenderingIntent(sn[0]);break;case Ee.OPS.setFlatness:this.setFlatness(sn[0]);break;case Ee.OPS.setGState:this.setGState(sn[0]);break;case Ee.OPS.fill:this.fill();break;case Ee.OPS.eoFill:this.eoFill();break;case Ee.OPS.stroke:this.stroke();break;case Ee.OPS.fillStroke:this.fillStroke();break;case Ee.OPS.eoFillStroke:this.eoFillStroke();break;case Ee.OPS.clip:this.clip("nonzero");break;case Ee.OPS.eoClip:this.clip("evenodd");break;case Ee.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case Ee.OPS.paintImageXObject:this.paintImageXObject(sn[0]);break;case Ee.OPS.paintInlineImageXObject:this.paintInlineImageXObject(sn[0]);break;case Ee.OPS.paintImageMaskXObject:this.paintImageMaskXObject(sn[0]);break;case Ee.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(sn[0],sn[1]);break;case Ee.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case Ee.OPS.closePath:this.closePath();break;case Ee.OPS.closeStroke:this.closeStroke();break;case Ee.OPS.closeFillStroke:this.closeFillStroke();break;case Ee.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case Ee.OPS.nextLine:this.nextLine();break;case Ee.OPS.transform:this.transform(sn[0],sn[1],sn[2],sn[3],sn[4],sn[5]);break;case Ee.OPS.constructPath:this.constructPath(sn[0],sn[1]);break;case Ee.OPS.endPath:this.endPath();break;case 92:this.group(an.items);break;default:(0,Ee.warn)(`Unimplemented operator ${qe}`);break}}}setWordSpacing(tn){this.current.wordSpacing=tn}setCharSpacing(tn){this.current.charSpacing=tn}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(tn,an,qe,Ke,sn,gn){const He=this.current;He.textMatrix=He.lineMatrix=[tn,an,qe,Ke,sn,gn],He.textMatrixScale=Math.hypot(tn,an),He.x=He.lineX=0,He.y=He.lineY=0,He.xcoords=[],He.ycoords=[],He.tspan=this.svgFactory.createElement("svg:tspan"),He.tspan.setAttributeNS(null,"font-family",He.fontFamily),He.tspan.setAttributeNS(null,"font-size",`${Oe(He.fontSize)}px`),He.tspan.setAttributeNS(null,"y",Oe(-He.y)),He.txtElement=this.svgFactory.createElement("svg:text"),He.txtElement.append(He.tspan)}beginText(){const tn=this.current;tn.x=tn.lineX=0,tn.y=tn.lineY=0,tn.textMatrix=Ee.IDENTITY_MATRIX,tn.lineMatrix=Ee.IDENTITY_MATRIX,tn.textMatrixScale=1,tn.tspan=this.svgFactory.createElement("svg:tspan"),tn.txtElement=this.svgFactory.createElement("svg:text"),tn.txtgrp=this.svgFactory.createElement("svg:g"),tn.xcoords=[],tn.ycoords=[]}moveText(tn,an){const qe=this.current;qe.x=qe.lineX+=tn,qe.y=qe.lineY+=an,qe.xcoords=[],qe.ycoords=[],qe.tspan=this.svgFactory.createElement("svg:tspan"),qe.tspan.setAttributeNS(null,"font-family",qe.fontFamily),qe.tspan.setAttributeNS(null,"font-size",`${Oe(qe.fontSize)}px`),qe.tspan.setAttributeNS(null,"y",Oe(-qe.y))}showText(tn){const an=this.current,qe=an.font,Ke=an.fontSize;if(Ke===0)return;const sn=an.fontSizeScale,gn=an.charSpacing,He=an.wordSpacing,en=an.fontDirection,cn=an.textHScale*en,Sn=qe.vertical,Tn=Sn?1:-1,hn=qe.defaultVMetrics,pn=Ke*an.fontMatrix[0];let bn=0;for(const xn of tn){if(xn===null){bn+=en*He;continue}else if(typeof xn=="number"){bn+=Tn*xn*Ke/1e3;continue}const Je=(xn.isSpace?He:0)+gn,We=xn.fontChar;let Ze,un,yn=xn.width;if(Sn){let wn;const kn=xn.vmetric||hn;wn=xn.vmetric?kn[1]:yn*.5,wn=-wn*pn;const $n=kn[2]*pn;yn=kn?-kn[0]:yn,Ze=wn/sn,un=(bn+$n)/sn}else Ze=bn/sn,un=0;(xn.isInFont||qe.missingFile)&&(an.xcoords.push(an.x+Ze),Sn&&an.ycoords.push(-an.y+un),an.tspan.textContent+=We);const _n=Sn?yn*pn-Je*en:yn*pn+Je*en;bn+=_n}an.tspan.setAttributeNS(null,"x",an.xcoords.map(Oe).join(" ")),Sn?an.tspan.setAttributeNS(null,"y",an.ycoords.map(Oe).join(" ")):an.tspan.setAttributeNS(null,"y",Oe(-an.y)),Sn?an.y-=bn:an.x+=bn*cn,an.tspan.setAttributeNS(null,"font-family",an.fontFamily),an.tspan.setAttributeNS(null,"font-size",`${Oe(an.fontSize)}px`),an.fontStyle!==Ae.fontStyle&&an.tspan.setAttributeNS(null,"font-style",an.fontStyle),an.fontWeight!==Ae.fontWeight&&an.tspan.setAttributeNS(null,"font-weight",an.fontWeight);const fn=an.textRenderingMode&Ee.TextRenderingMode.FILL_STROKE_MASK;if(fn===Ee.TextRenderingMode.FILL||fn===Ee.TextRenderingMode.FILL_STROKE?(an.fillColor!==Ae.fillColor&&an.tspan.setAttributeNS(null,"fill",an.fillColor),an.fillAlpha<1&&an.tspan.setAttributeNS(null,"fill-opacity",an.fillAlpha)):an.textRenderingMode===Ee.TextRenderingMode.ADD_TO_PATH?an.tspan.setAttributeNS(null,"fill","transparent"):an.tspan.setAttributeNS(null,"fill","none"),fn===Ee.TextRenderingMode.STROKE||fn===Ee.TextRenderingMode.FILL_STROKE){const xn=1/(an.textMatrixScale||1);this._setStrokeAttributes(an.tspan,xn)}let An=an.textMatrix;an.textRise!==0&&(An=An.slice(),An[5]+=an.textRise),an.txtElement.setAttributeNS(null,"transform",`${$e(An)} scale(${Oe(cn)}, -1)`),an.txtElement.setAttributeNS(Pe,"xml:space","preserve"),an.txtElement.append(an.tspan),an.txtgrp.append(an.txtElement),this._ensureTransformGroup().append(an.txtElement)}setLeadingMoveText(tn,an){this.setLeading(-an),this.moveText(tn,an)}addFontStyle(tn){if(!tn.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const an=ke(tn.data,tn.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${tn.loadedName}"; src: url(${an}); }
`}setFont(tn){const an=this.current,qe=this.commonObjs.get(tn[0]);let Ke=tn[1];an.font=qe,this.embedFonts&&!qe.missingFile&&!this.embeddedFonts[qe.loadedName]&&(this.addFontStyle(qe),this.embeddedFonts[qe.loadedName]=qe),an.fontMatrix=qe.fontMatrix||Ee.FONT_IDENTITY_MATRIX;let sn="normal";qe.black?sn="900":qe.bold&&(sn="bold");const gn=qe.italic?"italic":"normal";Ke<0?(Ke=-Ke,an.fontDirection=-1):an.fontDirection=1,an.fontSize=Ke,an.fontFamily=qe.loadedName,an.fontWeight=sn,an.fontStyle=gn,an.tspan=this.svgFactory.createElement("svg:tspan"),an.tspan.setAttributeNS(null,"y",Oe(-an.y)),an.xcoords=[],an.ycoords=[]}endText(){var an;const tn=this.current;tn.textRenderingMode&Ee.TextRenderingMode.ADD_TO_PATH_FLAG&&((an=tn.txtElement)!=null&&an.hasChildNodes())&&(tn.element=tn.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(tn){tn>0&&(this.current.lineWidth=tn)}setLineCap(tn){this.current.lineCap=Ce[tn]}setLineJoin(tn){this.current.lineJoin=Be[tn]}setMiterLimit(tn){this.current.miterLimit=tn}setStrokeAlpha(tn){this.current.strokeAlpha=tn}setStrokeRGBColor(tn,an,qe){this.current.strokeColor=Ee.Util.makeHexColor(tn,an,qe)}setFillAlpha(tn){this.current.fillAlpha=tn}setFillRGBColor(tn,an,qe){this.current.fillColor=Ee.Util.makeHexColor(tn,an,qe),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(tn){this.current.strokeColor=this._makeColorN_Pattern(tn)}setFillColorN(tn){this.current.fillColor=this._makeColorN_Pattern(tn)}shadingFill(tn){const{width:an,height:qe}=this.viewport,Ke=Ee.Util.inverseTransform(this.transformMatrix),[sn,gn,He,en]=Ee.Util.getAxialAlignedBoundingBox([0,0,an,qe],Ke),cn=this.svgFactory.createElement("svg:rect");cn.setAttributeNS(null,"x",sn),cn.setAttributeNS(null,"y",gn),cn.setAttributeNS(null,"width",He-sn),cn.setAttributeNS(null,"height",en-gn),cn.setAttributeNS(null,"fill",this._makeShadingPattern(tn)),this.current.fillAlpha<1&&cn.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(cn)}_makeColorN_Pattern(tn){return tn[0]==="TilingPattern"?this._makeTilingPattern(tn):this._makeShadingPattern(tn)}_makeTilingPattern(tn){const an=tn[1],qe=tn[2],Ke=tn[3]||Ee.IDENTITY_MATRIX,[sn,gn,He,en]=tn[4],cn=tn[5],Sn=tn[6],Tn=tn[7],hn=`shading${Ye++}`,[pn,bn,fn,An]=Ee.Util.normalizeRect([...Ee.Util.applyTransform([sn,gn],Ke),...Ee.Util.applyTransform([He,en],Ke)]),[xn,Je]=Ee.Util.singularValueDecompose2dScale(Ke),We=cn*xn,Ze=Sn*Je,un=this.svgFactory.createElement("svg:pattern");un.setAttributeNS(null,"id",hn),un.setAttributeNS(null,"patternUnits","userSpaceOnUse"),un.setAttributeNS(null,"width",We),un.setAttributeNS(null,"height",Ze),un.setAttributeNS(null,"x",`${pn}`),un.setAttributeNS(null,"y",`${bn}`);const yn=this.svg,_n=this.transformMatrix,wn=this.current.fillColor,kn=this.current.strokeColor,$n=this.svgFactory.create(fn-pn,An-bn);if(this.svg=$n,this.transformMatrix=Ke,Tn===2){const Ln=Ee.Util.makeHexColor(...an);this.current.fillColor=Ln,this.current.strokeColor=Ln}return this.executeOpTree(this.convertOpList(qe)),this.svg=yn,this.transformMatrix=_n,this.current.fillColor=wn,this.current.strokeColor=kn,un.append($n.childNodes[0]),this.defs.append(un),`url(#${hn})`}_makeShadingPattern(tn){switch(typeof tn=="string"&&(tn=this.objs.get(tn)),tn[0]){case"RadialAxial":const an=`shading${Ye++}`,qe=tn[3];let Ke;switch(tn[1]){case"axial":const sn=tn[4],gn=tn[5];Ke=this.svgFactory.createElement("svg:linearGradient"),Ke.setAttributeNS(null,"id",an),Ke.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),Ke.setAttributeNS(null,"x1",sn[0]),Ke.setAttributeNS(null,"y1",sn[1]),Ke.setAttributeNS(null,"x2",gn[0]),Ke.setAttributeNS(null,"y2",gn[1]);break;case"radial":const He=tn[4],en=tn[5],cn=tn[6],Sn=tn[7];Ke=this.svgFactory.createElement("svg:radialGradient"),Ke.setAttributeNS(null,"id",an),Ke.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),Ke.setAttributeNS(null,"cx",en[0]),Ke.setAttributeNS(null,"cy",en[1]),Ke.setAttributeNS(null,"r",Sn),Ke.setAttributeNS(null,"fx",He[0]),Ke.setAttributeNS(null,"fy",He[1]),Ke.setAttributeNS(null,"fr",cn);break;default:throw new Error(`Unknown RadialAxial type: ${tn[1]}`)}for(const sn of qe){const gn=this.svgFactory.createElement("svg:stop");gn.setAttributeNS(null,"offset",sn[0]),gn.setAttributeNS(null,"stop-color",sn[1]),Ke.append(gn)}return this.defs.append(Ke),`url(#${an})`;case"Mesh":return(0,Ee.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${tn[0]}`)}}setDash(tn,an){this.current.dashArray=tn,this.current.dashPhase=an}constructPath(tn,an){const qe=this.current;let Ke=qe.x,sn=qe.y,gn=[],He=0;for(const en of tn)switch(en|0){case Ee.OPS.rectangle:Ke=an[He++],sn=an[He++];const cn=an[He++],Sn=an[He++],Tn=Ke+cn,hn=sn+Sn;gn.push("M",Oe(Ke),Oe(sn),"L",Oe(Tn),Oe(sn),"L",Oe(Tn),Oe(hn),"L",Oe(Ke),Oe(hn),"Z");break;case Ee.OPS.moveTo:Ke=an[He++],sn=an[He++],gn.push("M",Oe(Ke),Oe(sn));break;case Ee.OPS.lineTo:Ke=an[He++],sn=an[He++],gn.push("L",Oe(Ke),Oe(sn));break;case Ee.OPS.curveTo:Ke=an[He+4],sn=an[He+5],gn.push("C",Oe(an[He]),Oe(an[He+1]),Oe(an[He+2]),Oe(an[He+3]),Oe(Ke),Oe(sn)),He+=6;break;case Ee.OPS.curveTo2:gn.push("C",Oe(Ke),Oe(sn),Oe(an[He]),Oe(an[He+1]),Oe(an[He+2]),Oe(an[He+3])),Ke=an[He+2],sn=an[He+3],He+=4;break;case Ee.OPS.curveTo3:Ke=an[He+2],sn=an[He+3],gn.push("C",Oe(an[He]),Oe(an[He+1]),Oe(Ke),Oe(sn),Oe(Ke),Oe(sn)),He+=4;break;case Ee.OPS.closePath:gn.push("Z");break}gn=gn.join(" "),qe.path&&tn.length>0&&tn[0]!==Ee.OPS.rectangle&&tn[0]!==Ee.OPS.moveTo?gn=qe.path.getAttributeNS(null,"d")+gn:(qe.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(qe.path)),qe.path.setAttributeNS(null,"d",gn),qe.path.setAttributeNS(null,"fill","none"),qe.element=qe.path,qe.setCurrentPoint(Ke,sn)}endPath(){const tn=this.current;if(tn.path=null,!this.pendingClip)return;if(!tn.element){this.pendingClip=null;return}const an=`clippath${Ge++}`,qe=this.svgFactory.createElement("svg:clipPath");qe.setAttributeNS(null,"id",an),qe.setAttributeNS(null,"transform",$e(this.transformMatrix));const Ke=tn.element.cloneNode(!0);if(this.pendingClip==="evenodd"?Ke.setAttributeNS(null,"clip-rule","evenodd"):Ke.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,qe.append(Ke),this.defs.append(qe),tn.activeClipUrl){tn.clipGroup=null;for(const sn of this.extraStack)sn.clipGroup=null;qe.setAttributeNS(null,"clip-path",tn.activeClipUrl)}tn.activeClipUrl=`url(#${an})`,this.tgrp=null}clip(tn){this.pendingClip=tn}closePath(){const tn=this.current;if(tn.path){const an=`${tn.path.getAttributeNS(null,"d")}Z`;tn.path.setAttributeNS(null,"d",an)}}setLeading(tn){this.current.leading=-tn}setTextRise(tn){this.current.textRise=tn}setTextRenderingMode(tn){this.current.textRenderingMode=tn}setHScale(tn){this.current.textHScale=tn/100}setRenderingIntent(tn){}setFlatness(tn){}setGState(tn){for(const[an,qe]of tn)switch(an){case"LW":this.setLineWidth(qe);break;case"LC":this.setLineCap(qe);break;case"LJ":this.setLineJoin(qe);break;case"ML":this.setMiterLimit(qe);break;case"D":this.setDash(qe[0],qe[1]);break;case"RI":this.setRenderingIntent(qe);break;case"FL":this.setFlatness(qe);break;case"Font":this.setFont(qe);break;case"CA":this.setStrokeAlpha(qe);break;case"ca":this.setFillAlpha(qe);break;default:(0,Ee.warn)(`Unimplemented graphic state operator ${an}`);break}}fill(){const tn=this.current;tn.element&&(tn.element.setAttributeNS(null,"fill",tn.fillColor),tn.element.setAttributeNS(null,"fill-opacity",tn.fillAlpha),this.endPath())}stroke(){const tn=this.current;tn.element&&(this._setStrokeAttributes(tn.element),tn.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(tn,an=1){const qe=this.current;let Ke=qe.dashArray;an!==1&&Ke.length>0&&(Ke=Ke.map(function(sn){return an*sn})),tn.setAttributeNS(null,"stroke",qe.strokeColor),tn.setAttributeNS(null,"stroke-opacity",qe.strokeAlpha),tn.setAttributeNS(null,"stroke-miterlimit",Oe(qe.miterLimit)),tn.setAttributeNS(null,"stroke-linecap",qe.lineCap),tn.setAttributeNS(null,"stroke-linejoin",qe.lineJoin),tn.setAttributeNS(null,"stroke-width",Oe(an*qe.lineWidth)+"px"),tn.setAttributeNS(null,"stroke-dasharray",Ke.map(Oe).join(" ")),tn.setAttributeNS(null,"stroke-dashoffset",Oe(an*qe.dashPhase)+"px")}eoFill(){var tn;(tn=this.current.element)==null||tn.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var tn;(tn=this.current.element)==null||tn.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const tn=this.svgFactory.createElement("svg:rect");tn.setAttributeNS(null,"x","0"),tn.setAttributeNS(null,"y","0"),tn.setAttributeNS(null,"width","1px"),tn.setAttributeNS(null,"height","1px"),tn.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(tn)}paintImageXObject(tn){const an=this.getObject(tn);if(!an){(0,Ee.warn)(`Dependent image with object ID ${tn} is not ready yet`);return}this.paintInlineImageXObject(an)}paintInlineImageXObject(tn,an){const qe=tn.width,Ke=tn.height,sn=Me(tn,this.forceDataSchema,!!an),gn=this.svgFactory.createElement("svg:rect");gn.setAttributeNS(null,"x","0"),gn.setAttributeNS(null,"y","0"),gn.setAttributeNS(null,"width",Oe(qe)),gn.setAttributeNS(null,"height",Oe(Ke)),this.current.element=gn,this.clip("nonzero");const He=this.svgFactory.createElement("svg:image");He.setAttributeNS(Re,"xlink:href",sn),He.setAttributeNS(null,"x","0"),He.setAttributeNS(null,"y",Oe(-Ke)),He.setAttributeNS(null,"width",Oe(qe)+"px"),He.setAttributeNS(null,"height",Oe(Ke)+"px"),He.setAttributeNS(null,"transform",`scale(${Oe(1/qe)} ${Oe(-1/Ke)})`),an?an.append(He):this._ensureTransformGroup().append(He)}paintImageMaskXObject(tn){const an=this.getObject(tn.data,tn);if(an.bitmap){(0,Ee.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const qe=this.current,Ke=an.width,sn=an.height,gn=qe.fillColor;qe.maskId=`mask${Ue++}`;const He=this.svgFactory.createElement("svg:mask");He.setAttributeNS(null,"id",qe.maskId);const en=this.svgFactory.createElement("svg:rect");en.setAttributeNS(null,"x","0"),en.setAttributeNS(null,"y","0"),en.setAttributeNS(null,"width",Oe(Ke)),en.setAttributeNS(null,"height",Oe(sn)),en.setAttributeNS(null,"fill",gn),en.setAttributeNS(null,"mask",`url(#${qe.maskId})`),this.defs.append(He),this._ensureTransformGroup().append(en),this.paintInlineImageXObject(an,He)}paintFormXObjectBegin(tn,an){if(Array.isArray(tn)&&tn.length===6&&this.transform(tn[0],tn[1],tn[2],tn[3],tn[4],tn[5]),an){const qe=an[2]-an[0],Ke=an[3]-an[1],sn=this.svgFactory.createElement("svg:rect");sn.setAttributeNS(null,"x",an[0]),sn.setAttributeNS(null,"y",an[1]),sn.setAttributeNS(null,"width",Oe(qe)),sn.setAttributeNS(null,"height",Oe(Ke)),this.current.element=sn,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(tn){const an=this.svgFactory.create(tn.width,tn.height),qe=this.svgFactory.createElement("svg:defs");an.append(qe),this.defs=qe;const Ke=this.svgFactory.createElement("svg:g");return Ke.setAttributeNS(null,"transform",$e(tn.transform)),an.append(Ke),this.svg=Ke,an}_ensureClipGroup(){if(!this.current.clipGroup){const tn=this.svgFactory.createElement("svg:g");tn.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(tn),this.current.clipGroup=tn}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",$e(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}e.SVGGraphics=Qe}),((t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class r{static textContent(Ee){const Ae=[],Pe={items:Ae,styles:Object.create(null)};function Re(Ce){var Me;if(!Ce)return;let Be=null;const ke=Ce.name;if(ke==="#text")Be=Ce.value;else if(r.shouldBuildText(ke))(Me=Ce==null?void 0:Ce.attributes)!=null&&Me.textContent?Be=Ce.attributes.textContent:Ce.value&&(Be=Ce.value);else return;if(Be!==null&&Ae.push({str:Be}),!!Ce.children)for(const Fe of Ce.children)Re(Fe)}return Re(Ee),Pe}static shouldBuildText(Ee){return!(Ee==="textarea"||Ee==="input"||Ee==="option"||Ee==="select")}}e.XfaText=r}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=$e,e.updateTextLayer=Ge;var xe=r(1),Ee=r(6);const Ae=1e5,Pe=30,Re=.8,Ce=new Map;function Be(Ue,Ye){let Qe;if(Ye&&xe.FeatureTest.isOffscreenCanvasSupported)Qe=new OffscreenCanvas(Ue,Ue).getContext("2d",{alpha:!1});else{const rn=document.createElement("canvas");rn.width=rn.height=Ue,Qe=rn.getContext("2d",{alpha:!1})}return Qe}function ke(Ue,Ye){const Qe=Ce.get(Ue);if(Qe)return Qe;const rn=Be(Pe,Ye);rn.font=`${Pe}px ${Ue}`;const tn=rn.measureText("");let an=tn.fontBoundingBoxAscent,qe=Math.abs(tn.fontBoundingBoxDescent);if(an){const sn=an/(an+qe);return Ce.set(Ue,sn),rn.canvas.width=rn.canvas.height=0,sn}rn.strokeStyle="red",rn.clearRect(0,0,Pe,Pe),rn.strokeText("g",0,0);let Ke=rn.getImageData(0,0,Pe,Pe).data;qe=0;for(let sn=Ke.length-1-3;sn>=0;sn-=4)if(Ke[sn]>0){qe=Math.ceil(sn/4/Pe);break}rn.clearRect(0,0,Pe,Pe),rn.strokeText("A",0,Pe),Ke=rn.getImageData(0,0,Pe,Pe).data,an=0;for(let sn=0,gn=Ke.length;sn<gn;sn+=4)if(Ke[sn]>0){an=Pe-Math.floor(sn/4/Pe);break}if(rn.canvas.width=rn.canvas.height=0,an){const sn=an/(an+qe);return Ce.set(Ue,sn),sn}return Ce.set(Ue,Re),Re}function Me(Ue,Ye,Qe){const rn=document.createElement("span"),tn={angle:0,canvasWidth:0,hasText:Ye.str!=="",hasEOL:Ye.hasEOL,fontSize:0};Ue._textDivs.push(rn);const an=xe.Util.transform(Ue._transform,Ye.transform);let qe=Math.atan2(an[1],an[0]);const Ke=Qe[Ye.fontName];Ke.vertical&&(qe+=Math.PI/2);const sn=Math.hypot(an[2],an[3]),gn=sn*ke(Ke.fontFamily,Ue._isOffscreenCanvasSupported);let He,en;qe===0?(He=an[4],en=an[5]-gn):(He=an[4]+gn*Math.sin(qe),en=an[5]-gn*Math.cos(qe));const cn="calc(var(--scale-factor)*",Sn=rn.style;Ue._container===Ue._rootContainer?(Sn.left=`${(100*He/Ue._pageWidth).toFixed(2)}%`,Sn.top=`${(100*en/Ue._pageHeight).toFixed(2)}%`):(Sn.left=`${cn}${He.toFixed(2)}px)`,Sn.top=`${cn}${en.toFixed(2)}px)`),Sn.fontSize=`${cn}${sn.toFixed(2)}px)`,Sn.fontFamily=Ke.fontFamily,tn.fontSize=sn,rn.setAttribute("role","presentation"),rn.textContent=Ye.str,rn.dir=Ye.dir,Ue._fontInspectorEnabled&&(rn.dataset.fontName=Ye.fontName),qe!==0&&(tn.angle=qe*(180/Math.PI));let Tn=!1;if(Ye.str.length>1)Tn=!0;else if(Ye.str!==" "&&Ye.transform[0]!==Ye.transform[3]){const hn=Math.abs(Ye.transform[0]),pn=Math.abs(Ye.transform[3]);hn!==pn&&Math.max(hn,pn)/Math.min(hn,pn)>1.5&&(Tn=!0)}Tn&&(tn.canvasWidth=Ke.vertical?Ye.height:Ye.width),Ue._textDivProperties.set(rn,tn),Ue._isReadableStream&&Ue._layoutText(rn)}function Fe(Ue){const{div:Ye,scale:Qe,properties:rn,ctx:tn,prevFontSize:an,prevFontFamily:qe}=Ue,{style:Ke}=Ye;let sn="";if(rn.canvasWidth!==0&&rn.hasText){const{fontFamily:gn}=Ke,{canvasWidth:He,fontSize:en}=rn;(an!==en||qe!==gn)&&(tn.font=`${en*Qe}px ${gn}`,Ue.prevFontSize=en,Ue.prevFontFamily=gn);const{width:cn}=tn.measureText(Ye.textContent);cn>0&&(sn=`scaleX(${He*Qe/cn})`)}rn.angle!==0&&(sn=`rotate(${rn.angle}deg) ${sn}`),sn.length>0&&(Ke.transform=sn)}function Ve(Ue){if(Ue._canceled)return;const Ye=Ue._textDivs,Qe=Ue._capability;if(Ye.length>Ae){Qe.resolve();return}if(!Ue._isReadableStream)for(const tn of Ye)Ue._layoutText(tn);Qe.resolve()}class Oe{constructor({textContentSource:Ye,container:Qe,viewport:rn,textDivs:tn,textDivProperties:an,textContentItemsStr:qe,isOffscreenCanvasSupported:Ke}){var cn;this._textContentSource=Ye,this._isReadableStream=Ye instanceof ReadableStream,this._container=this._rootContainer=Qe,this._textDivs=tn||[],this._textContentItemsStr=qe||[],this._isOffscreenCanvasSupported=Ke,this._fontInspectorEnabled=!!((cn=globalThis.FontInspector)!=null&&cn.enabled),this._reader=null,this._textDivProperties=an||new WeakMap,this._canceled=!1,this._capability=new xe.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:rn.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:Be(0,Ke)};const{pageWidth:sn,pageHeight:gn,pageX:He,pageY:en}=rn.rawDims;this._transform=[1,0,0,-1,-He,en+gn],this._pageWidth=sn,this._pageHeight=gn,(0,Ee.setLayerDimensions)(Qe,rn),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new xe.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new xe.AbortException("TextLayer task cancelled."))}_processItems(Ye,Qe){for(const rn of Ye){if(rn.str===void 0){if(rn.type==="beginMarkedContentProps"||rn.type==="beginMarkedContent"){const tn=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),rn.id!==null&&this._container.setAttribute("id",`${rn.id}`),tn.append(this._container)}else rn.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(rn.str),Me(this,rn,Qe)}}_layoutText(Ye){const Qe=this._layoutTextParams.properties=this._textDivProperties.get(Ye);if(this._layoutTextParams.div=Ye,Fe(this._layoutTextParams),Qe.hasText&&this._container.append(Ye),Qe.hasEOL){const rn=document.createElement("br");rn.setAttribute("role","presentation"),this._container.append(rn)}}_render(){const Ye=new xe.PromiseCapability;let Qe=Object.create(null);if(this._isReadableStream){const rn=()=>{this._reader.read().then(({value:tn,done:an})=>{if(an){Ye.resolve();return}Object.assign(Qe,tn.styles),this._processItems(tn.items,Qe),rn()},Ye.reject)};this._reader=this._textContentSource.getReader(),rn()}else if(this._textContentSource){const{items:rn,styles:tn}=this._textContentSource;this._processItems(rn,tn),Ye.resolve()}else throw new Error('No "textContentSource" parameter specified.');Ye.promise.then(()=>{Qe=null,Ve(this)},this._capability.reject)}}e.TextLayerRenderTask=Oe;function $e(Ue){!Ue.textContentSource&&(Ue.textContent||Ue.textContentStream)&&((0,Ee.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),Ue.textContentSource=Ue.textContent||Ue.textContentStream);const{container:Ye,viewport:Qe}=Ue,rn=getComputedStyle(Ye),tn=rn.getPropertyValue("visibility"),an=parseFloat(rn.getPropertyValue("--scale-factor"));tn==="visible"&&(!an||Math.abs(an-Qe.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const qe=new Oe(Ue);return qe._render(),qe}function Ge({container:Ue,viewport:Ye,textDivs:Qe,textDivProperties:rn,isOffscreenCanvasSupported:tn,mustRotate:an=!0,mustRescale:qe=!0}){if(an&&(0,Ee.setLayerDimensions)(Ue,{rotation:Ye.rotation}),qe){const Ke=Be(0,tn),gn={prevFontSize:null,prevFontFamily:null,div:null,scale:Ye.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:Ke};for(const He of Qe)gn.properties=rn.get(He),gn.div=He,Fe(gn)}}}),((t,e,r)=>{var ke,Me,Fe,Ve,Oe,$e,Ge,Ue,Ye,Qe,rn,Tp,qd,Cp,Rp;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var xe=r(1),Ee=r(4),Ae=r(28),Pe=r(33),Re=r(6),Ce=r(34);const sn=class sn{constructor({uiManager:He,pageIndex:en,div:cn,accessibilityManager:Sn,annotationLayer:Tn,viewport:hn,l10n:pn}){bi(this,rn);bi(this,ke);bi(this,Me,!1);bi(this,Fe,null);bi(this,Ve,this.pointerup.bind(this));bi(this,Oe,this.pointerdown.bind(this));bi(this,$e,new Map);bi(this,Ge,!1);bi(this,Ue,!1);bi(this,Ye,!1);bi(this,Qe);const bn=[Ae.FreeTextEditor,Pe.InkEditor,Ce.StampEditor];if(!sn._initialized){sn._initialized=!0;for(const fn of bn)fn.initialize(pn)}He.registerEditorTypes(bn),xi(this,Qe,He),this.pageIndex=en,this.div=cn,xi(this,ke,Sn),xi(this,Fe,Tn),this.viewport=hn,dn(this,Qe).addLayer(this)}get isEmpty(){return dn(this,$e).size===0}updateToolbar(He){dn(this,Qe).updateToolbar(He)}updateMode(He=dn(this,Qe).getMode()){oi(this,rn,Rp).call(this),He===xe.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),He!==xe.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",He===xe.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",He===xe.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",He===xe.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(He){if(!He&&dn(this,Qe).getMode()!==xe.AnnotationEditorType.INK)return;if(!He){for(const cn of dn(this,$e).values())if(cn.isEmpty()){cn.setInBackground();return}}oi(this,rn,qd).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(He){dn(this,Qe).setEditingState(He)}addCommands(He){dn(this,Qe).addCommands(He)}enable(){this.div.style.pointerEvents="auto";const He=new Set;for(const cn of dn(this,$e).values())cn.enableEditing(),cn.annotationElementId&&He.add(cn.annotationElementId);if(!dn(this,Fe))return;const en=dn(this,Fe).getEditableAnnotations();for(const cn of en){if(cn.hide(),dn(this,Qe).isDeletedAnnotationElement(cn.data.id)||He.has(cn.data.id))continue;const Sn=this.deserialize(cn);Sn&&(this.addOrRebuild(Sn),Sn.enableEditing())}}disable(){var en;xi(this,Ye,!0),this.div.style.pointerEvents="none";const He=new Set;for(const cn of dn(this,$e).values()){if(cn.disableEditing(),!cn.annotationElementId||cn.serialize()!==null){He.add(cn.annotationElementId);continue}(en=this.getEditableAnnotation(cn.annotationElementId))==null||en.show(),cn.remove()}if(dn(this,Fe)){const cn=dn(this,Fe).getEditableAnnotations();for(const Sn of cn){const{id:Tn}=Sn.data;He.has(Tn)||dn(this,Qe).isDeletedAnnotationElement(Tn)||Sn.show()}}oi(this,rn,Rp).call(this),this.isEmpty&&(this.div.hidden=!0),xi(this,Ye,!1)}getEditableAnnotation(He){var en;return((en=dn(this,Fe))==null?void 0:en.getEditableAnnotation(He))||null}setActiveEditor(He){dn(this,Qe).getActive()!==He&&dn(this,Qe).setActiveEditor(He)}enableClick(){this.div.addEventListener("pointerdown",dn(this,Oe)),this.div.addEventListener("pointerup",dn(this,Ve))}disableClick(){this.div.removeEventListener("pointerdown",dn(this,Oe)),this.div.removeEventListener("pointerup",dn(this,Ve))}attach(He){dn(this,$e).set(He.id,He);const{annotationElementId:en}=He;en&&dn(this,Qe).isDeletedAnnotationElement(en)&&dn(this,Qe).removeDeletedAnnotationElement(He)}detach(He){var en;dn(this,$e).delete(He.id),(en=dn(this,ke))==null||en.removePointerInTextLayer(He.contentDiv),!dn(this,Ye)&&He.annotationElementId&&dn(this,Qe).addDeletedAnnotationElement(He)}remove(He){this.detach(He),dn(this,Qe).removeEditor(He),He.div.contains(document.activeElement)&&setTimeout(()=>{dn(this,Qe).focusMainContainer()},0),He.div.remove(),He.isAttachedToDOM=!1,dn(this,Ue)||this.addInkEditorIfNeeded(!1)}changeParent(He){var en;He.parent!==this&&(He.annotationElementId&&(dn(this,Qe).addDeletedAnnotationElement(He.annotationElementId),Ee.AnnotationEditor.deleteAnnotationElement(He),He.annotationElementId=null),this.attach(He),(en=He.parent)==null||en.detach(He),He.setParent(this),He.div&&He.isAttachedToDOM&&(He.div.remove(),this.div.append(He.div)))}add(He){if(this.changeParent(He),dn(this,Qe).addEditor(He),this.attach(He),!He.isAttachedToDOM){const en=He.render();this.div.append(en),He.isAttachedToDOM=!0}He.fixAndSetPosition(),He.onceAdded(),dn(this,Qe).addToAnnotationStorage(He)}moveEditorInDOM(He){var cn;if(!He.isAttachedToDOM)return;const{activeElement:en}=document;He.div.contains(en)&&(He._focusEventsAllowed=!1,setTimeout(()=>{He.div.contains(document.activeElement)?He._focusEventsAllowed=!0:(He.div.addEventListener("focusin",()=>{He._focusEventsAllowed=!0},{once:!0}),en.focus())},0)),He._structTreeParentId=(cn=dn(this,ke))==null?void 0:cn.moveElementInDOM(this.div,He.div,He.contentDiv,!0)}addOrRebuild(He){He.needsToBeRebuilt()?He.rebuild():this.add(He)}addUndoableEditor(He){const en=()=>He._uiManager.rebuild(He),cn=()=>{He.remove()};this.addCommands({cmd:en,undo:cn,mustExec:!1})}getNextId(){return dn(this,Qe).getId()}pasteEditor(He,en){dn(this,Qe).updateToolbar(He),dn(this,Qe).updateMode(He);const{offsetX:cn,offsetY:Sn}=oi(this,rn,Cp).call(this),Tn=this.getNextId(),hn=oi(this,rn,Tp).call(this,{parent:this,id:Tn,x:cn,y:Sn,uiManager:dn(this,Qe),isCentered:!0,...en});hn&&this.add(hn)}deserialize(He){switch(He.annotationType??He.annotationEditorType){case xe.AnnotationEditorType.FREETEXT:return Ae.FreeTextEditor.deserialize(He,this,dn(this,Qe));case xe.AnnotationEditorType.INK:return Pe.InkEditor.deserialize(He,this,dn(this,Qe));case xe.AnnotationEditorType.STAMP:return Ce.StampEditor.deserialize(He,this,dn(this,Qe))}return null}addNewEditor(){oi(this,rn,qd).call(this,oi(this,rn,Cp).call(this),!0)}setSelected(He){dn(this,Qe).setSelected(He)}toggleSelected(He){dn(this,Qe).toggleSelected(He)}isSelected(He){return dn(this,Qe).isSelected(He)}unselect(He){dn(this,Qe).unselect(He)}pointerup(He){const{isMac:en}=xe.FeatureTest.platform;if(!(He.button!==0||He.ctrlKey&&en)&&He.target===this.div&&dn(this,Ge)){if(xi(this,Ge,!1),!dn(this,Me)){xi(this,Me,!0);return}if(dn(this,Qe).getMode()===xe.AnnotationEditorType.STAMP){dn(this,Qe).unselectAll();return}oi(this,rn,qd).call(this,He,!1)}}pointerdown(He){if(dn(this,Ge)){xi(this,Ge,!1);return}const{isMac:en}=xe.FeatureTest.platform;if(He.button!==0||He.ctrlKey&&en||He.target!==this.div)return;xi(this,Ge,!0);const cn=dn(this,Qe).getActive();xi(this,Me,!cn||cn.isEmpty())}findNewParent(He,en,cn){const Sn=dn(this,Qe).findParent(en,cn);return Sn===null||Sn===this?!1:(Sn.changeParent(He),!0)}destroy(){var He,en;((He=dn(this,Qe).getActive())==null?void 0:He.parent)===this&&(dn(this,Qe).commitOrRemove(),dn(this,Qe).setActiveEditor(null));for(const cn of dn(this,$e).values())(en=dn(this,ke))==null||en.removePointerInTextLayer(cn.contentDiv),cn.setParent(null),cn.isAttachedToDOM=!1,cn.div.remove();this.div=null,dn(this,$e).clear(),dn(this,Qe).removeLayer(this)}render({viewport:He}){this.viewport=He,(0,Re.setLayerDimensions)(this.div,He);for(const en of dn(this,Qe).getEditors(this.pageIndex))this.add(en);this.updateMode()}update({viewport:He}){dn(this,Qe).commitOrRemove(),this.viewport=He,(0,Re.setLayerDimensions)(this.div,{rotation:He.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:He,pageHeight:en}=this.viewport.rawDims;return[He,en]}};ke=new WeakMap,Me=new WeakMap,Fe=new WeakMap,Ve=new WeakMap,Oe=new WeakMap,$e=new WeakMap,Ge=new WeakMap,Ue=new WeakMap,Ye=new WeakMap,Qe=new WeakMap,rn=new WeakSet,Tp=function(He){switch(dn(this,Qe).getMode()){case xe.AnnotationEditorType.FREETEXT:return new Ae.FreeTextEditor(He);case xe.AnnotationEditorType.INK:return new Pe.InkEditor(He);case xe.AnnotationEditorType.STAMP:return new Ce.StampEditor(He)}return null},qd=function(He,en){const cn=this.getNextId(),Sn=oi(this,rn,Tp).call(this,{parent:this,id:cn,x:He.offsetX,y:He.offsetY,uiManager:dn(this,Qe),isCentered:en});return Sn&&this.add(Sn),Sn},Cp=function(){const{x:He,y:en,width:cn,height:Sn}=this.div.getBoundingClientRect(),Tn=Math.max(0,He),hn=Math.max(0,en),pn=Math.min(window.innerWidth,He+cn),bn=Math.min(window.innerHeight,en+Sn),fn=(Tn+pn)/2-He,An=(hn+bn)/2-en,[xn,Je]=this.viewport.rotation%180===0?[fn,An]:[An,fn];return{offsetX:xn,offsetY:Je}},Rp=function(){xi(this,Ue,!0);for(const He of dn(this,$e).values())He.isEmpty()&&He.remove();xi(this,Ue,!1)},Yr(sn,"_initialized",!1);let Be=sn;e.AnnotationEditorLayer=Be}),((t,e,r)=>{var Ce,Be,ke,Me,Fe,Ve,Oe,$e,Ge,Ue,y0,v0,b0,Hh,Bp,x0,Np;Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var xe=r(1),Ee=r(5),Ae=r(4),Pe=r(29);const sn=class sn extends Ae.AnnotationEditor{constructor(en){super({...en,name:"freeTextEditor"});bi(this,Ue);bi(this,Ce,this.editorDivBlur.bind(this));bi(this,Be,this.editorDivFocus.bind(this));bi(this,ke,this.editorDivInput.bind(this));bi(this,Me,this.editorDivKeydown.bind(this));bi(this,Fe);bi(this,Ve,"");bi(this,Oe,`${this.id}-editor`);bi(this,$e);bi(this,Ge,null);xi(this,Fe,en.color||sn._defaultColor||Ae.AnnotationEditor._defaultLineColor),xi(this,$e,en.fontSize||sn._defaultFontSize)}static get _keyboardManager(){const en=sn.prototype,cn=hn=>hn.isEmpty(),Sn=Ee.AnnotationEditorUIManager.TRANSLATE_SMALL,Tn=Ee.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,xe.shadow)(this,"_keyboardManager",new Ee.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],en.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],en.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],en._translateEmpty,{args:[-Sn,0],checker:cn}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],en._translateEmpty,{args:[-Tn,0],checker:cn}],[["ArrowRight","mac+ArrowRight"],en._translateEmpty,{args:[Sn,0],checker:cn}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],en._translateEmpty,{args:[Tn,0],checker:cn}],[["ArrowUp","mac+ArrowUp"],en._translateEmpty,{args:[0,-Sn],checker:cn}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],en._translateEmpty,{args:[0,-Tn],checker:cn}],[["ArrowDown","mac+ArrowDown"],en._translateEmpty,{args:[0,Sn],checker:cn}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],en._translateEmpty,{args:[0,Tn],checker:cn}]]))}static initialize(en){Ae.AnnotationEditor.initialize(en,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const cn=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(cn.getPropertyValue("--freetext-padding"))}static updateDefaultParams(en,cn){switch(en){case xe.AnnotationEditorParamsType.FREETEXT_SIZE:sn._defaultFontSize=cn;break;case xe.AnnotationEditorParamsType.FREETEXT_COLOR:sn._defaultColor=cn;break}}updateParams(en,cn){switch(en){case xe.AnnotationEditorParamsType.FREETEXT_SIZE:oi(this,Ue,y0).call(this,cn);break;case xe.AnnotationEditorParamsType.FREETEXT_COLOR:oi(this,Ue,v0).call(this,cn);break}}static get defaultPropertiesToUpdate(){return[[xe.AnnotationEditorParamsType.FREETEXT_SIZE,sn._defaultFontSize],[xe.AnnotationEditorParamsType.FREETEXT_COLOR,sn._defaultColor||Ae.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[xe.AnnotationEditorParamsType.FREETEXT_SIZE,dn(this,$e)],[xe.AnnotationEditorParamsType.FREETEXT_COLOR,dn(this,Fe)]]}_translateEmpty(en,cn){this._uiManager.translateSelectedEditors(en,cn,!0)}getInitialTranslation(){const en=this.parentScale;return[-sn._internalPadding*en,-(sn._internalPadding+dn(this,$e))*en]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(xe.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",dn(this,Me)),this.editorDiv.addEventListener("focus",dn(this,Be)),this.editorDiv.addEventListener("blur",dn(this,Ce)),this.editorDiv.addEventListener("input",dn(this,ke)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",dn(this,Oe)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",dn(this,Me)),this.editorDiv.removeEventListener("focus",dn(this,Be)),this.editorDiv.removeEventListener("blur",dn(this,Ce)),this.editorDiv.removeEventListener("input",dn(this,ke)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(en){this._focusEventsAllowed&&(super.focusin(en),en.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var en;if(this.width){oi(this,Ue,Np).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(en=this._initialOptions)!=null&&en.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const en=dn(this,Ve),cn=xi(this,Ve,oi(this,Ue,b0).call(this).trimEnd());if(en===cn)return;const Sn=Tn=>{if(xi(this,Ve,Tn),!Tn){this.remove();return}oi(this,Ue,Bp).call(this),this._uiManager.rebuild(this),oi(this,Ue,Hh).call(this)};this.addCommands({cmd:()=>{Sn(cn)},undo:()=>{Sn(en)},mustExec:!1}),oi(this,Ue,Hh).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(en){this.enterInEditMode()}keydown(en){en.target===this.div&&en.key==="Enter"&&(this.enterInEditMode(),en.preventDefault())}editorDivKeydown(en){sn._keyboardManager.exec(this,en)}editorDivFocus(en){this.isEditing=!0}editorDivBlur(en){this.isEditing=!1}editorDivInput(en){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let en,cn;this.width&&(en=this.x,cn=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",dn(this,Oe)),this.enableEditing(),Ae.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(Tn=>{var hn;return(hn=this.editorDiv)==null?void 0:hn.setAttribute("aria-label",Tn)}),Ae.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(Tn=>{var hn;return(hn=this.editorDiv)==null?void 0:hn.setAttribute("default-content",Tn)}),this.editorDiv.contentEditable=!0;const{style:Sn}=this.editorDiv;if(Sn.fontSize=`calc(${dn(this,$e)}px * var(--scale-factor))`,Sn.color=dn(this,Fe),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,Ee.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Tn,hn]=this.parentDimensions;if(this.annotationElementId){const{position:pn}=dn(this,Ge);let[bn,fn]=this.getInitialTranslation();[bn,fn]=this.pageTranslationToScreen(bn,fn);const[An,xn]=this.pageDimensions,[Je,We]=this.pageTranslation;let Ze,un;switch(this.rotation){case 0:Ze=en+(pn[0]-Je)/An,un=cn+this.height-(pn[1]-We)/xn;break;case 90:Ze=en+(pn[0]-Je)/An,un=cn-(pn[1]-We)/xn,[bn,fn]=[fn,-bn];break;case 180:Ze=en-this.width+(pn[0]-Je)/An,un=cn-(pn[1]-We)/xn,[bn,fn]=[-bn,-fn];break;case 270:Ze=en+(pn[0]-Je-this.height*xn)/An,un=cn+(pn[1]-We-this.width*An)/xn,[bn,fn]=[-fn,bn];break}this.setAt(Ze*Tn,un*hn,bn,fn)}else this.setAt(en*Tn,cn*hn,this.width*Tn,this.height*hn);oi(this,Ue,Bp).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(en,cn,Sn){let Tn=null;if(en instanceof Pe.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:pn,fontColor:bn},rect:fn,rotation:An,id:xn},textContent:Je,textPosition:We,parent:{page:{pageNumber:Ze}}}=en;if(!Je||Je.length===0)return null;Tn=en={annotationType:xe.AnnotationEditorType.FREETEXT,color:Array.from(bn),fontSize:pn,value:Je.join(`
`),position:We,pageIndex:Ze-1,rect:fn,rotation:An,id:xn,deleted:!1}}const hn=super.deserialize(en,cn,Sn);return xi(hn,$e,en.fontSize),xi(hn,Fe,xe.Util.makeHexColor(...en.color)),xi(hn,Ve,en.value),hn.annotationElementId=en.id||null,xi(hn,Ge,Tn),hn}serialize(en=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const cn=sn._internalPadding*this.parentScale,Sn=this.getRect(cn,cn),Tn=Ae.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:dn(this,Fe)),hn={annotationType:xe.AnnotationEditorType.FREETEXT,color:Tn,fontSize:dn(this,$e),value:dn(this,Ve),pageIndex:this.pageIndex,rect:Sn,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return en?hn:this.annotationElementId&&!oi(this,Ue,x0).call(this,hn)?null:(hn.id=this.annotationElementId,hn)}};Ce=new WeakMap,Be=new WeakMap,ke=new WeakMap,Me=new WeakMap,Fe=new WeakMap,Ve=new WeakMap,Oe=new WeakMap,$e=new WeakMap,Ge=new WeakMap,Ue=new WeakSet,y0=function(en){const cn=Tn=>{this.editorDiv.style.fontSize=`calc(${Tn}px * var(--scale-factor))`,this.translate(0,-(Tn-dn(this,$e))*this.parentScale),xi(this,$e,Tn),oi(this,Ue,Hh).call(this)},Sn=dn(this,$e);this.addCommands({cmd:()=>{cn(en)},undo:()=>{cn(Sn)},mustExec:!0,type:xe.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},v0=function(en){const cn=dn(this,Fe);this.addCommands({cmd:()=>{xi(this,Fe,this.editorDiv.style.color=en)},undo:()=>{xi(this,Fe,this.editorDiv.style.color=cn)},mustExec:!0,type:xe.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},b0=function(){const en=this.editorDiv.getElementsByTagName("div");if(en.length===0)return this.editorDiv.innerText;const cn=[];for(const Sn of en)cn.push(Sn.innerText.replace(/\r\n?|\n/,""));return cn.join(`
`)},Hh=function(){const[en,cn]=this.parentDimensions;let Sn;if(this.isAttachedToDOM)Sn=this.div.getBoundingClientRect();else{const{currentLayer:Tn,div:hn}=this,pn=hn.style.display;hn.style.display="hidden",Tn.div.append(this.div),Sn=hn.getBoundingClientRect(),hn.remove(),hn.style.display=pn}this.rotation%180===this.parentRotation%180?(this.width=Sn.width/en,this.height=Sn.height/cn):(this.width=Sn.height/en,this.height=Sn.width/cn),this.fixAndSetPosition()},Bp=function(){if(this.editorDiv.replaceChildren(),!!dn(this,Ve))for(const en of dn(this,Ve).split(`
`)){const cn=document.createElement("div");cn.append(en?document.createTextNode(en):document.createElement("br")),this.editorDiv.append(cn)}},x0=function(en){const{value:cn,fontSize:Sn,color:Tn,rect:hn,pageIndex:pn}=dn(this,Ge);return en.value!==cn||en.fontSize!==Sn||en.rect.some((bn,fn)=>Math.abs(bn-hn[fn])>=1)||en.color.some((bn,fn)=>bn!==Tn[fn])||en.pageIndex!==pn},Np=function(en=!1){if(!this.annotationElementId)return;if(oi(this,Ue,Hh).call(this),!en&&(this.width===0||this.height===0)){setTimeout(()=>oi(this,Ue,Np).call(this,!0),0);return}const cn=sn._internalPadding*this.parentScale;dn(this,Ge).rect=this.getRect(cn,cn)},Yr(sn,"_freeTextDefaultContent",""),Yr(sn,"_internalPadding",0),Yr(sn,"_defaultColor",null),Yr(sn,"_defaultFontSize",10),Yr(sn,"_type","freetext");let Re=sn;e.FreeTextEditor=Re}),((t,e,r)=>{var un,_n,rc,_0,$n,Ln,Gn,Yn,ii,Wn,Pn,Zn,mn,Cn,jn,Rn,Dn,Jn,Qn,qn,yi,di,E0,Hd,kp,Ip,Vi,Di,Xi,fi,ni,pi,ji,Mp,ar,Fn,Si,Mi,S0,Lp;Object.defineProperty(e,"__esModule",{value:!0}),e.StampAnnotationElement=e.InkAnnotationElement=e.FreeTextAnnotationElement=e.AnnotationLayer=void 0;var xe=r(1),Ee=r(6),Ae=r(3),Pe=r(30),Re=r(31),Ce=r(32);const Be=1e3,ke=9,Me=new WeakSet;function Fe(tr){return{width:tr[2]-tr[0],height:tr[3]-tr[1]}}class Ve{static create(Hn){switch(Hn.data.annotationType){case xe.AnnotationType.LINK:return new $e(Hn);case xe.AnnotationType.TEXT:return new Ge(Hn);case xe.AnnotationType.WIDGET:switch(Hn.data.fieldType){case"Tx":return new Ye(Hn);case"Btn":return Hn.data.radioButton?new tn(Hn):Hn.data.checkBox?new rn(Hn):new an(Hn);case"Ch":return new qe(Hn);case"Sig":return new Qe(Hn)}return new Ue(Hn);case xe.AnnotationType.POPUP:return new Ke(Hn);case xe.AnnotationType.FREETEXT:return new gn(Hn);case xe.AnnotationType.LINE:return new He(Hn);case xe.AnnotationType.SQUARE:return new en(Hn);case xe.AnnotationType.CIRCLE:return new cn(Hn);case xe.AnnotationType.POLYLINE:return new Sn(Hn);case xe.AnnotationType.CARET:return new hn(Hn);case xe.AnnotationType.INK:return new pn(Hn);case xe.AnnotationType.POLYGON:return new Tn(Hn);case xe.AnnotationType.HIGHLIGHT:return new bn(Hn);case xe.AnnotationType.UNDERLINE:return new fn(Hn);case xe.AnnotationType.SQUIGGLY:return new An(Hn);case xe.AnnotationType.STRIKEOUT:return new xn(Hn);case xe.AnnotationType.STAMP:return new Je(Hn);case xe.AnnotationType.FILEATTACHMENT:return new We(Hn);default:return new Oe(Hn)}}}const yn=class yn{constructor(Hn,{isRenderable:Un=!1,ignoreBorder:ti=!1,createQuadrilaterals:ei=!1}={}){bi(this,un,!1);this.isRenderable=Un,this.data=Hn.data,this.layer=Hn.layer,this.linkService=Hn.linkService,this.downloadManager=Hn.downloadManager,this.imageResourcesPath=Hn.imageResourcesPath,this.renderForms=Hn.renderForms,this.svgFactory=Hn.svgFactory,this.annotationStorage=Hn.annotationStorage,this.enableScripting=Hn.enableScripting,this.hasJSActions=Hn.hasJSActions,this._fieldObjects=Hn.fieldObjects,this.parent=Hn.parent,Un&&(this.container=this._createContainer(ti)),ei&&this._createQuadrilaterals()}static _hasPopupData({titleObj:Hn,contentsObj:Un,richText:ti}){return!!(Hn!=null&&Hn.str||Un!=null&&Un.str||ti!=null&&ti.str)}get hasPopupData(){return yn._hasPopupData(this.data)}_createContainer(Hn){const{data:Un,parent:{page:ti,viewport:ei}}=this,si=document.createElement("section");si.setAttribute("data-annotation-id",Un.id),this instanceof Ue||(si.tabIndex=Be),si.style.zIndex=this.parent.zIndex++,this.data.popupRef&&si.setAttribute("aria-haspopup","dialog"),Un.noRotate&&si.classList.add("norotate");const{pageWidth:Ri,pageHeight:Bi,pageX:er,pageY:Zi}=ei.rawDims;if(!Un.rect||this instanceof Ke){const{rotation:rr}=Un;return!Un.hasOwnCanvas&&rr!==0&&this.setRotation(rr,si),si}const{width:Yi,height:fr}=Fe(Un.rect),ir=xe.Util.normalizeRect([Un.rect[0],ti.view[3]-Un.rect[1]+ti.view[1],Un.rect[2],ti.view[3]-Un.rect[3]+ti.view[1]]);if(!Hn&&Un.borderStyle.width>0){si.style.borderWidth=`${Un.borderStyle.width}px`;const rr=Un.borderStyle.horizontalCornerRadius,cr=Un.borderStyle.verticalCornerRadius;if(rr>0||cr>0){const wr=`calc(${rr}px * var(--scale-factor)) / calc(${cr}px * var(--scale-factor))`;si.style.borderRadius=wr}else if(this instanceof tn){const wr=`calc(${Yi}px * var(--scale-factor)) / calc(${fr}px * var(--scale-factor))`;si.style.borderRadius=wr}switch(Un.borderStyle.style){case xe.AnnotationBorderStyleType.SOLID:si.style.borderStyle="solid";break;case xe.AnnotationBorderStyleType.DASHED:si.style.borderStyle="dashed";break;case xe.AnnotationBorderStyleType.BEVELED:(0,xe.warn)("Unimplemented border style: beveled");break;case xe.AnnotationBorderStyleType.INSET:(0,xe.warn)("Unimplemented border style: inset");break;case xe.AnnotationBorderStyleType.UNDERLINE:si.style.borderBottomStyle="solid";break}const vr=Un.borderColor||null;vr?(xi(this,un,!0),si.style.borderColor=xe.Util.makeHexColor(vr[0]|0,vr[1]|0,vr[2]|0)):si.style.borderWidth=0}si.style.left=`${100*(ir[0]-er)/Ri}%`,si.style.top=`${100*(ir[1]-Zi)/Bi}%`;const{rotation:Qi}=Un;return Un.hasOwnCanvas||Qi===0?(si.style.width=`${100*Yi/Ri}%`,si.style.height=`${100*fr/Bi}%`):this.setRotation(Qi,si),si}setRotation(Hn,Un=this.container){if(!this.data.rect)return;const{pageWidth:ti,pageHeight:ei}=this.parent.viewport.rawDims,{width:si,height:Ri}=Fe(this.data.rect);let Bi,er;Hn%180===0?(Bi=100*si/ti,er=100*Ri/ei):(Bi=100*Ri/ti,er=100*si/ei),Un.style.width=`${Bi}%`,Un.style.height=`${er}%`,Un.setAttribute("data-main-rotation",(360-Hn)%360)}get _commonActions(){const Hn=(Un,ti,ei)=>{const si=ei.detail[Un],Ri=si[0],Bi=si.slice(1);ei.target.style[ti]=Pe.ColorConverters[`${Ri}_HTML`](Bi),this.annotationStorage.setValue(this.data.id,{[ti]:Pe.ColorConverters[`${Ri}_rgb`](Bi)})};return(0,xe.shadow)(this,"_commonActions",{display:Un=>{const{display:ti}=Un.detail,ei=ti%2===1;this.container.style.visibility=ei?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:ei,noPrint:ti===1||ti===2})},print:Un=>{this.annotationStorage.setValue(this.data.id,{noPrint:!Un.detail.print})},hidden:Un=>{const{hidden:ti}=Un.detail;this.container.style.visibility=ti?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:ti,noView:ti})},focus:Un=>{setTimeout(()=>Un.target.focus({preventScroll:!1}),0)},userName:Un=>{Un.target.title=Un.detail.userName},readonly:Un=>{Un.target.disabled=Un.detail.readonly},required:Un=>{this._setRequired(Un.target,Un.detail.required)},bgColor:Un=>{Hn("bgColor","backgroundColor",Un)},fillColor:Un=>{Hn("fillColor","backgroundColor",Un)},fgColor:Un=>{Hn("fgColor","color",Un)},textColor:Un=>{Hn("textColor","color",Un)},borderColor:Un=>{Hn("borderColor","borderColor",Un)},strokeColor:Un=>{Hn("strokeColor","borderColor",Un)},rotation:Un=>{const ti=Un.detail.rotation;this.setRotation(ti),this.annotationStorage.setValue(this.data.id,{rotation:ti})}})}_dispatchEventFromSandbox(Hn,Un){const ti=this._commonActions;for(const ei of Object.keys(Un.detail)){const si=Hn[ei]||ti[ei];si==null||si(Un)}}_setDefaultPropertiesFromJS(Hn){if(!this.enableScripting)return;const Un=this.annotationStorage.getRawValue(this.data.id);if(!Un)return;const ti=this._commonActions;for(const[ei,si]of Object.entries(Un)){const Ri=ti[ei];if(Ri){const Bi={detail:{[ei]:si},target:Hn};Ri(Bi),delete Un[ei]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:Hn}=this.data;if(!Hn)return;const[Un,ti,ei,si]=this.data.rect;if(Hn.length===1){const[,{x:cr,y:vr},{x:wr,y:qr}]=Hn[0];if(ei===cr&&si===vr&&Un===wr&&ti===qr)return}const{style:Ri}=this.container;let Bi;if(dn(this,un)){const{borderColor:cr,borderWidth:vr}=Ri;Ri.borderWidth=0,Bi=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${cr}" stroke-width="${vr}">`],this.container.classList.add("hasBorder")}const er=ei-Un,Zi=si-ti,{svgFactory:Yi}=this,fr=Yi.createElement("svg");fr.classList.add("quadrilateralsContainer"),fr.setAttribute("width",0),fr.setAttribute("height",0);const ir=Yi.createElement("defs");fr.append(ir);const Qi=Yi.createElement("clipPath"),rr=`clippath_${this.data.id}`;Qi.setAttribute("id",rr),Qi.setAttribute("clipPathUnits","objectBoundingBox"),ir.append(Qi);for(const[,{x:cr,y:vr},{x:wr,y:qr}]of Hn){const Fr=Yi.createElement("rect"),xs=(wr-Un)/er,Ls=(si-vr)/Zi,_s=(cr-wr)/er,sa=(vr-qr)/Zi;Fr.setAttribute("x",xs),Fr.setAttribute("y",Ls),Fr.setAttribute("width",_s),Fr.setAttribute("height",sa),Qi.append(Fr),Bi==null||Bi.push(`<rect vector-effect="non-scaling-stroke" x="${xs}" y="${Ls}" width="${_s}" height="${sa}"/>`)}dn(this,un)&&(Bi.push("</g></svg>')"),Ri.backgroundImage=Bi.join("")),this.container.append(fr),this.container.style.clipPath=`url(#${rr})`}_createPopup(){const{container:Hn,data:Un}=this;Hn.setAttribute("aria-haspopup","dialog");const ti=new Ke({data:{color:Un.color,titleObj:Un.titleObj,modificationDate:Un.modificationDate,contentsObj:Un.contentsObj,richText:Un.richText,parentRect:Un.rect,borderStyle:0,id:`popup_${Un.id}`,rotation:Un.rotation},parent:this.parent,elements:[this]});this.parent.div.append(ti.render())}render(){(0,xe.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(Hn,Un=null){const ti=[];if(this._fieldObjects){const ei=this._fieldObjects[Hn];if(ei)for(const{page:si,id:Ri,exportValues:Bi}of ei){if(si===-1||Ri===Un)continue;const er=typeof Bi=="string"?Bi:null,Zi=document.querySelector(`[data-element-id="${Ri}"]`);if(Zi&&!Me.has(Zi)){(0,xe.warn)(`_getElementsByName - element not allowed: ${Ri}`);continue}ti.push({id:Ri,exportValue:er,domElement:Zi})}return ti}for(const ei of document.getElementsByName(Hn)){const{exportValue:si}=ei,Ri=ei.getAttribute("data-element-id");Ri!==Un&&Me.has(ei)&&ti.push({id:Ri,exportValue:si,domElement:ei})}return ti}show(){var Hn;this.container&&(this.container.hidden=!1),(Hn=this.popup)==null||Hn.maybeShow()}hide(){var Hn;this.container&&(this.container.hidden=!0),(Hn=this.popup)==null||Hn.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const Hn=this.getElementsToTriggerPopup();if(Array.isArray(Hn))for(const Un of Hn)Un.classList.add("highlightArea");else Hn.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:Hn,data:{id:Un}}=this;this.container.addEventListener("dblclick",()=>{var ti;(ti=this.linkService.eventBus)==null||ti.dispatch("switchannotationeditormode",{source:this,mode:Hn,editId:Un})})}};un=new WeakMap;let Oe=yn;class $e extends Oe{constructor(Un,ti=null){super(Un,{isRenderable:!0,ignoreBorder:!!(ti!=null&&ti.ignoreBorder),createQuadrilaterals:!0});bi(this,_n);this.isTooltipOnly=Un.data.isTooltipOnly}render(){const{data:Un,linkService:ti}=this,ei=document.createElement("a");ei.setAttribute("data-element-id",Un.id);let si=!1;return Un.url?(ti.addLinkAttributes(ei,Un.url,Un.newWindow),si=!0):Un.action?(this._bindNamedAction(ei,Un.action),si=!0):Un.attachment?(this._bindAttachment(ei,Un.attachment),si=!0):Un.setOCGState?(oi(this,_n,_0).call(this,ei,Un.setOCGState),si=!0):Un.dest?(this._bindLink(ei,Un.dest),si=!0):(Un.actions&&(Un.actions.Action||Un.actions["Mouse Up"]||Un.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(ei,Un),si=!0),Un.resetForm?(this._bindResetFormAction(ei,Un.resetForm),si=!0):this.isTooltipOnly&&!si&&(this._bindLink(ei,""),si=!0)),this.container.classList.add("linkAnnotation"),si&&this.container.append(ei),this.container}_bindLink(Un,ti){Un.href=this.linkService.getDestinationHash(ti),Un.onclick=()=>(ti&&this.linkService.goToDestination(ti),!1),(ti||ti==="")&&oi(this,_n,rc).call(this)}_bindNamedAction(Un,ti){Un.href=this.linkService.getAnchorUrl(""),Un.onclick=()=>(this.linkService.executeNamedAction(ti),!1),oi(this,_n,rc).call(this)}_bindAttachment(Un,ti){Un.href=this.linkService.getAnchorUrl(""),Un.onclick=()=>{var ei;return(ei=this.downloadManager)==null||ei.openOrDownloadData(this.container,ti.content,ti.filename),!1},oi(this,_n,rc).call(this)}_bindJSAction(Un,ti){Un.href=this.linkService.getAnchorUrl("");const ei=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const si of Object.keys(ti.actions)){const Ri=ei.get(si);Ri&&(Un[Ri]=()=>{var Bi;return(Bi=this.linkService.eventBus)==null||Bi.dispatch("dispatcheventinsandbox",{source:this,detail:{id:ti.id,name:si}}),!1})}Un.onclick||(Un.onclick=()=>!1),oi(this,_n,rc).call(this)}_bindResetFormAction(Un,ti){const ei=Un.onclick;if(ei||(Un.href=this.linkService.getAnchorUrl("")),oi(this,_n,rc).call(this),!this._fieldObjects){(0,xe.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),ei||(Un.onclick=()=>!1);return}Un.onclick=()=>{var fr;ei==null||ei();const{fields:si,refs:Ri,include:Bi}=ti,er=[];if(si.length!==0||Ri.length!==0){const ir=new Set(Ri);for(const Qi of si){const rr=this._fieldObjects[Qi]||[];for(const{id:cr}of rr)ir.add(cr)}for(const Qi of Object.values(this._fieldObjects))for(const rr of Qi)ir.has(rr.id)===Bi&&er.push(rr)}else for(const ir of Object.values(this._fieldObjects))er.push(...ir);const Zi=this.annotationStorage,Yi=[];for(const ir of er){const{id:Qi}=ir;switch(Yi.push(Qi),ir.type){case"text":{const cr=ir.defaultValue||"";Zi.setValue(Qi,{value:cr});break}case"checkbox":case"radiobutton":{const cr=ir.defaultValue===ir.exportValues;Zi.setValue(Qi,{value:cr});break}case"combobox":case"listbox":{const cr=ir.defaultValue||"";Zi.setValue(Qi,{value:cr});break}default:continue}const rr=document.querySelector(`[data-element-id="${Qi}"]`);if(rr){if(!Me.has(rr)){(0,xe.warn)(`_bindResetFormAction - element not allowed: ${Qi}`);continue}}else continue;rr.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((fr=this.linkService.eventBus)==null||fr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Yi,name:"ResetForm"}})),!1}}}_n=new WeakSet,rc=function(){this.container.setAttribute("data-internal-link","")},_0=function(Un,ti){Un.href=this.linkService.getAnchorUrl(""),Un.onclick=()=>(this.linkService.executeSetOCGState(ti),!1),oi(this,_n,rc).call(this)};class Ge extends Oe{constructor(Hn){super(Hn,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const Hn=document.createElement("img");return Hn.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",Hn.alt="[{{type}} Annotation]",Hn.dataset.l10nId="text_annotation_type",Hn.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(Hn),this.container}}class Ue extends Oe{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(Hn){var Un;this.data.hasOwnCanvas&&(((Un=Hn.previousSibling)==null?void 0:Un.nodeName)==="CANVAS"&&(Hn.previousSibling.hidden=!0),Hn.hidden=!1)}_getKeyModifier(Hn){const{isWin:Un,isMac:ti}=xe.FeatureTest.platform;return Un&&Hn.ctrlKey||ti&&Hn.metaKey}_setEventListener(Hn,Un,ti,ei,si){ti.includes("mouse")?Hn.addEventListener(ti,Ri=>{var Bi;(Bi=this.linkService.eventBus)==null||Bi.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ei,value:si(Ri),shift:Ri.shiftKey,modifier:this._getKeyModifier(Ri)}})}):Hn.addEventListener(ti,Ri=>{var Bi;if(ti==="blur"){if(!Un.focused||!Ri.relatedTarget)return;Un.focused=!1}else if(ti==="focus"){if(Un.focused)return;Un.focused=!0}si&&((Bi=this.linkService.eventBus)==null||Bi.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ei,value:si(Ri)}}))})}_setEventListeners(Hn,Un,ti,ei){var si,Ri,Bi;for(const[er,Zi]of ti)(Zi==="Action"||(si=this.data.actions)!=null&&si[Zi])&&((Zi==="Focus"||Zi==="Blur")&&(Un||(Un={focused:!1})),this._setEventListener(Hn,Un,er,Zi,ei),Zi==="Focus"&&!((Ri=this.data.actions)!=null&&Ri.Blur)?this._setEventListener(Hn,Un,"blur","Blur",null):Zi==="Blur"&&!((Bi=this.data.actions)!=null&&Bi.Focus)&&this._setEventListener(Hn,Un,"focus","Focus",null))}_setBackgroundColor(Hn){const Un=this.data.backgroundColor||null;Hn.style.backgroundColor=Un===null?"transparent":xe.Util.makeHexColor(Un[0],Un[1],Un[2])}_setTextStyle(Hn){const Un=["left","center","right"],{fontColor:ti}=this.data.defaultAppearanceData,ei=this.data.defaultAppearanceData.fontSize||ke,si=Hn.style;let Ri;const Bi=2,er=Zi=>Math.round(10*Zi)/10;if(this.data.multiLine){const Zi=Math.abs(this.data.rect[3]-this.data.rect[1]-Bi),Yi=Math.round(Zi/(xe.LINE_FACTOR*ei))||1,fr=Zi/Yi;Ri=Math.min(ei,er(fr/xe.LINE_FACTOR))}else{const Zi=Math.abs(this.data.rect[3]-this.data.rect[1]-Bi);Ri=Math.min(ei,er(Zi/xe.LINE_FACTOR))}si.fontSize=`calc(${Ri}px * var(--scale-factor))`,si.color=xe.Util.makeHexColor(ti[0],ti[1],ti[2]),this.data.textAlignment!==null&&(si.textAlign=Un[this.data.textAlignment])}_setRequired(Hn,Un){Un?Hn.setAttribute("required",!0):Hn.removeAttribute("required"),Hn.setAttribute("aria-required",Un)}}class Ye extends Ue{constructor(Hn){const Un=Hn.renderForms||!Hn.data.hasAppearance&&!!Hn.data.fieldValue;super(Hn,{isRenderable:Un})}setPropertyOnSiblings(Hn,Un,ti,ei){const si=this.annotationStorage;for(const Ri of this._getElementsByName(Hn.name,Hn.id))Ri.domElement&&(Ri.domElement[Un]=ti),si.setValue(Ri.id,{[ei]:ti})}render(){var ei,si;const Hn=this.annotationStorage,Un=this.data.id;this.container.classList.add("textWidgetAnnotation");let ti=null;if(this.renderForms){const Ri=Hn.getValue(Un,{value:this.data.fieldValue});let Bi=Ri.value||"";const er=Hn.getValue(Un,{charLimit:this.data.maxLen}).charLimit;er&&Bi.length>er&&(Bi=Bi.slice(0,er));let Zi=Ri.formattedValue||((ei=this.data.textContent)==null?void 0:ei.join(`
`))||null;Zi&&this.data.comb&&(Zi=Zi.replaceAll(/\s+/g,""));const Yi={userValue:Bi,formattedValue:Zi,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(ti=document.createElement("textarea"),ti.textContent=Zi??Bi,this.data.doNotScroll&&(ti.style.overflowY="hidden")):(ti=document.createElement("input"),ti.type="text",ti.setAttribute("value",Zi??Bi),this.data.doNotScroll&&(ti.style.overflowX="hidden")),this.data.hasOwnCanvas&&(ti.hidden=!0),Me.add(ti),ti.setAttribute("data-element-id",Un),ti.disabled=this.data.readOnly,ti.name=this.data.fieldName,ti.tabIndex=Be,this._setRequired(ti,this.data.required),er&&(ti.maxLength=er),ti.addEventListener("input",ir=>{Hn.setValue(Un,{value:ir.target.value}),this.setPropertyOnSiblings(ti,"value",ir.target.value,"value"),Yi.formattedValue=null}),ti.addEventListener("resetform",ir=>{const Qi=this.data.defaultFieldValue??"";ti.value=Yi.userValue=Qi,Yi.formattedValue=null});let fr=ir=>{const{formattedValue:Qi}=Yi;Qi!=null&&(ir.target.value=Qi),ir.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){ti.addEventListener("focus",Qi=>{if(Yi.focused)return;const{target:rr}=Qi;Yi.userValue&&(rr.value=Yi.userValue),Yi.lastCommittedValue=rr.value,Yi.commitKey=1,Yi.focused=!0}),ti.addEventListener("updatefromsandbox",Qi=>{this.showElementAndHideCanvas(Qi.target);const rr={value(cr){Yi.userValue=cr.detail.value??"",Hn.setValue(Un,{value:Yi.userValue.toString()}),cr.target.value=Yi.userValue},formattedValue(cr){const{formattedValue:vr}=cr.detail;Yi.formattedValue=vr,vr!=null&&cr.target!==document.activeElement&&(cr.target.value=vr),Hn.setValue(Un,{formattedValue:vr})},selRange(cr){cr.target.setSelectionRange(...cr.detail.selRange)},charLimit:cr=>{var Fr;const{charLimit:vr}=cr.detail,{target:wr}=cr;if(vr===0){wr.removeAttribute("maxLength");return}wr.setAttribute("maxLength",vr);let qr=Yi.userValue;!qr||qr.length<=vr||(qr=qr.slice(0,vr),wr.value=Yi.userValue=qr,Hn.setValue(Un,{value:qr}),(Fr=this.linkService.eventBus)==null||Fr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Un,name:"Keystroke",value:qr,willCommit:!0,commitKey:1,selStart:wr.selectionStart,selEnd:wr.selectionEnd}}))}};this._dispatchEventFromSandbox(rr,Qi)}),ti.addEventListener("keydown",Qi=>{var vr;Yi.commitKey=1;let rr=-1;if(Qi.key==="Escape"?rr=0:Qi.key==="Enter"&&!this.data.multiLine?rr=2:Qi.key==="Tab"&&(Yi.commitKey=3),rr===-1)return;const{value:cr}=Qi.target;Yi.lastCommittedValue!==cr&&(Yi.lastCommittedValue=cr,Yi.userValue=cr,(vr=this.linkService.eventBus)==null||vr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Un,name:"Keystroke",value:cr,willCommit:!0,commitKey:rr,selStart:Qi.target.selectionStart,selEnd:Qi.target.selectionEnd}}))});const ir=fr;fr=null,ti.addEventListener("blur",Qi=>{var cr;if(!Yi.focused||!Qi.relatedTarget)return;Yi.focused=!1;const{value:rr}=Qi.target;Yi.userValue=rr,Yi.lastCommittedValue!==rr&&((cr=this.linkService.eventBus)==null||cr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Un,name:"Keystroke",value:rr,willCommit:!0,commitKey:Yi.commitKey,selStart:Qi.target.selectionStart,selEnd:Qi.target.selectionEnd}})),ir(Qi)}),(si=this.data.actions)!=null&&si.Keystroke&&ti.addEventListener("beforeinput",Qi=>{var Ls;Yi.lastCommittedValue=null;const{data:rr,target:cr}=Qi,{value:vr,selectionStart:wr,selectionEnd:qr}=cr;let Fr=wr,xs=qr;switch(Qi.inputType){case"deleteWordBackward":{const _s=vr.substring(0,wr).match(/\w*[^\w]*$/);_s&&(Fr-=_s[0].length);break}case"deleteWordForward":{const _s=vr.substring(wr).match(/^[^\w]*\w*/);_s&&(xs+=_s[0].length);break}case"deleteContentBackward":wr===qr&&(Fr-=1);break;case"deleteContentForward":wr===qr&&(xs+=1);break}Qi.preventDefault(),(Ls=this.linkService.eventBus)==null||Ls.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Un,name:"Keystroke",value:vr,change:rr||"",willCommit:!1,selStart:Fr,selEnd:xs}})}),this._setEventListeners(ti,Yi,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Qi=>Qi.target.value)}if(fr&&ti.addEventListener("blur",fr),this.data.comb){const Qi=(this.data.rect[2]-this.data.rect[0])/er;ti.classList.add("comb"),ti.style.letterSpacing=`calc(${Qi}px * var(--scale-factor) - 1ch)`}}else ti=document.createElement("div"),ti.textContent=this.data.fieldValue,ti.style.verticalAlign="middle",ti.style.display="table-cell";return this._setTextStyle(ti),this._setBackgroundColor(ti),this._setDefaultPropertiesFromJS(ti),this.container.append(ti),this.container}}class Qe extends Ue{constructor(Hn){super(Hn,{isRenderable:!!Hn.data.hasOwnCanvas})}}class rn extends Ue{constructor(Hn){super(Hn,{isRenderable:Hn.renderForms})}render(){const Hn=this.annotationStorage,Un=this.data,ti=Un.id;let ei=Hn.getValue(ti,{value:Un.exportValue===Un.fieldValue}).value;typeof ei=="string"&&(ei=ei!=="Off",Hn.setValue(ti,{value:ei})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const si=document.createElement("input");return Me.add(si),si.setAttribute("data-element-id",ti),si.disabled=Un.readOnly,this._setRequired(si,this.data.required),si.type="checkbox",si.name=Un.fieldName,ei&&si.setAttribute("checked",!0),si.setAttribute("exportValue",Un.exportValue),si.tabIndex=Be,si.addEventListener("change",Ri=>{const{name:Bi,checked:er}=Ri.target;for(const Zi of this._getElementsByName(Bi,ti)){const Yi=er&&Zi.exportValue===Un.exportValue;Zi.domElement&&(Zi.domElement.checked=Yi),Hn.setValue(Zi.id,{value:Yi})}Hn.setValue(ti,{value:er})}),si.addEventListener("resetform",Ri=>{const Bi=Un.defaultFieldValue||"Off";Ri.target.checked=Bi===Un.exportValue}),this.enableScripting&&this.hasJSActions&&(si.addEventListener("updatefromsandbox",Ri=>{const Bi={value(er){er.target.checked=er.detail.value!=="Off",Hn.setValue(ti,{value:er.target.checked})}};this._dispatchEventFromSandbox(Bi,Ri)}),this._setEventListeners(si,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ri=>Ri.target.checked)),this._setBackgroundColor(si),this._setDefaultPropertiesFromJS(si),this.container.append(si),this.container}}class tn extends Ue{constructor(Hn){super(Hn,{isRenderable:Hn.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const Hn=this.annotationStorage,Un=this.data,ti=Un.id;let ei=Hn.getValue(ti,{value:Un.fieldValue===Un.buttonValue}).value;typeof ei=="string"&&(ei=ei!==Un.buttonValue,Hn.setValue(ti,{value:ei}));const si=document.createElement("input");if(Me.add(si),si.setAttribute("data-element-id",ti),si.disabled=Un.readOnly,this._setRequired(si,this.data.required),si.type="radio",si.name=Un.fieldName,ei&&si.setAttribute("checked",!0),si.tabIndex=Be,si.addEventListener("change",Ri=>{const{name:Bi,checked:er}=Ri.target;for(const Zi of this._getElementsByName(Bi,ti))Hn.setValue(Zi.id,{value:!1});Hn.setValue(ti,{value:er})}),si.addEventListener("resetform",Ri=>{const Bi=Un.defaultFieldValue;Ri.target.checked=Bi!=null&&Bi===Un.buttonValue}),this.enableScripting&&this.hasJSActions){const Ri=Un.buttonValue;si.addEventListener("updatefromsandbox",Bi=>{const er={value:Zi=>{const Yi=Ri===Zi.detail.value;for(const fr of this._getElementsByName(Zi.target.name)){const ir=Yi&&fr.id===ti;fr.domElement&&(fr.domElement.checked=ir),Hn.setValue(fr.id,{value:ir})}}};this._dispatchEventFromSandbox(er,Bi)}),this._setEventListeners(si,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Bi=>Bi.target.checked)}return this._setBackgroundColor(si),this._setDefaultPropertiesFromJS(si),this.container.append(si),this.container}}class an extends $e{constructor(Hn){super(Hn,{ignoreBorder:Hn.data.hasAppearance})}render(){const Hn=super.render();Hn.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(Hn.title=this.data.alternativeText);const Un=Hn.lastChild;return this.enableScripting&&this.hasJSActions&&Un&&(this._setDefaultPropertiesFromJS(Un),Un.addEventListener("updatefromsandbox",ti=>{this._dispatchEventFromSandbox({},ti)})),Hn}}class qe extends Ue{constructor(Hn){super(Hn,{isRenderable:Hn.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const Hn=this.annotationStorage,Un=this.data.id,ti=Hn.getValue(Un,{value:this.data.fieldValue}),ei=document.createElement("select");Me.add(ei),ei.setAttribute("data-element-id",Un),ei.disabled=this.data.readOnly,this._setRequired(ei,this.data.required),ei.name=this.data.fieldName,ei.tabIndex=Be;let si=this.data.combo&&this.data.options.length>0;this.data.combo||(ei.size=this.data.options.length,this.data.multiSelect&&(ei.multiple=!0)),ei.addEventListener("resetform",Yi=>{const fr=this.data.defaultFieldValue;for(const ir of ei.options)ir.selected=ir.value===fr});for(const Yi of this.data.options){const fr=document.createElement("option");fr.textContent=Yi.displayValue,fr.value=Yi.exportValue,ti.value.includes(Yi.exportValue)&&(fr.setAttribute("selected",!0),si=!1),ei.append(fr)}let Ri=null;if(si){const Yi=document.createElement("option");Yi.value=" ",Yi.setAttribute("hidden",!0),Yi.setAttribute("selected",!0),ei.prepend(Yi),Ri=()=>{Yi.remove(),ei.removeEventListener("input",Ri),Ri=null},ei.addEventListener("input",Ri)}const Bi=Yi=>{const fr=Yi?"value":"textContent",{options:ir,multiple:Qi}=ei;return Qi?Array.prototype.filter.call(ir,rr=>rr.selected).map(rr=>rr[fr]):ir.selectedIndex===-1?null:ir[ir.selectedIndex][fr]};let er=Bi(!1);const Zi=Yi=>{const fr=Yi.target.options;return Array.prototype.map.call(fr,ir=>({displayValue:ir.textContent,exportValue:ir.value}))};return this.enableScripting&&this.hasJSActions?(ei.addEventListener("updatefromsandbox",Yi=>{const fr={value(ir){Ri==null||Ri();const Qi=ir.detail.value,rr=new Set(Array.isArray(Qi)?Qi:[Qi]);for(const cr of ei.options)cr.selected=rr.has(cr.value);Hn.setValue(Un,{value:Bi(!0)}),er=Bi(!1)},multipleSelection(ir){ei.multiple=!0},remove(ir){const Qi=ei.options,rr=ir.detail.remove;Qi[rr].selected=!1,ei.remove(rr),Qi.length>0&&Array.prototype.findIndex.call(Qi,vr=>vr.selected)===-1&&(Qi[0].selected=!0),Hn.setValue(Un,{value:Bi(!0),items:Zi(ir)}),er=Bi(!1)},clear(ir){for(;ei.length!==0;)ei.remove(0);Hn.setValue(Un,{value:null,items:[]}),er=Bi(!1)},insert(ir){const{index:Qi,displayValue:rr,exportValue:cr}=ir.detail.insert,vr=ei.children[Qi],wr=document.createElement("option");wr.textContent=rr,wr.value=cr,vr?vr.before(wr):ei.append(wr),Hn.setValue(Un,{value:Bi(!0),items:Zi(ir)}),er=Bi(!1)},items(ir){const{items:Qi}=ir.detail;for(;ei.length!==0;)ei.remove(0);for(const rr of Qi){const{displayValue:cr,exportValue:vr}=rr,wr=document.createElement("option");wr.textContent=cr,wr.value=vr,ei.append(wr)}ei.options.length>0&&(ei.options[0].selected=!0),Hn.setValue(Un,{value:Bi(!0),items:Zi(ir)}),er=Bi(!1)},indices(ir){const Qi=new Set(ir.detail.indices);for(const rr of ir.target.options)rr.selected=Qi.has(rr.index);Hn.setValue(Un,{value:Bi(!0)}),er=Bi(!1)},editable(ir){ir.target.disabled=!ir.detail.editable}};this._dispatchEventFromSandbox(fr,Yi)}),ei.addEventListener("input",Yi=>{var ir;const fr=Bi(!0);Hn.setValue(Un,{value:fr}),Yi.preventDefault(),(ir=this.linkService.eventBus)==null||ir.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Un,name:"Keystroke",value:er,changeEx:fr,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(ei,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Yi=>Yi.target.value)):ei.addEventListener("input",function(Yi){Hn.setValue(Un,{value:Bi(!0)})}),this.data.combo&&this._setTextStyle(ei),this._setBackgroundColor(ei),this._setDefaultPropertiesFromJS(ei),this.container.append(ei),this.container}}class Ke extends Oe{constructor(Hn){const{data:Un,elements:ti}=Hn;super(Hn,{isRenderable:Oe._hasPopupData(Un)}),this.elements=ti}render(){this.container.classList.add("popupAnnotation");const Hn=new sn({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),Un=[];for(const ti of this.elements)ti.popup=Hn,Un.push(ti.data.id),ti.addHighlightArea();return this.container.setAttribute("aria-controls",Un.map(ti=>`${xe.AnnotationPrefix}${ti}`).join(",")),this.container}}class sn{constructor({container:Hn,color:Un,elements:ti,titleObj:ei,modificationDate:si,contentsObj:Ri,richText:Bi,parent:er,rect:Zi,parentRect:Yi,open:fr}){bi(this,di);bi(this,$n,null);bi(this,Ln,oi(this,di,E0).bind(this));bi(this,Gn,oi(this,di,Ip).bind(this));bi(this,Yn,oi(this,di,kp).bind(this));bi(this,ii,oi(this,di,Hd).bind(this));bi(this,Wn,null);bi(this,Pn,null);bi(this,Zn,null);bi(this,mn,null);bi(this,Cn,null);bi(this,jn,null);bi(this,Rn,!1);bi(this,Dn,null);bi(this,Jn,null);bi(this,Qn,null);bi(this,qn,null);bi(this,yi,!1);var Qi;xi(this,Pn,Hn),xi(this,qn,ei),xi(this,Zn,Ri),xi(this,Qn,Bi),xi(this,Cn,er),xi(this,Wn,Un),xi(this,Jn,Zi),xi(this,jn,Yi),xi(this,mn,ti);const ir=Ee.PDFDateString.toDateObject(si);ir&&xi(this,$n,er.l10n.get("annotation_date_string",{date:ir.toLocaleDateString(),time:ir.toLocaleTimeString()})),this.trigger=ti.flatMap(rr=>rr.getElementsToTriggerPopup());for(const rr of this.trigger)rr.addEventListener("click",dn(this,ii)),rr.addEventListener("mouseenter",dn(this,Yn)),rr.addEventListener("mouseleave",dn(this,Gn)),rr.classList.add("popupTriggerArea");for(const rr of ti)(Qi=rr.container)==null||Qi.addEventListener("keydown",dn(this,Ln));dn(this,Pn).hidden=!0,fr&&oi(this,di,Hd).call(this)}render(){if(dn(this,Dn))return;const{page:{view:Hn},viewport:{rawDims:{pageWidth:Un,pageHeight:ti,pageX:ei,pageY:si}}}=dn(this,Cn),Ri=xi(this,Dn,document.createElement("div"));if(Ri.className="popup",dn(this,Wn)){const Fr=Ri.style.outlineColor=xe.Util.makeHexColor(...dn(this,Wn));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?Ri.style.backgroundColor=`color-mix(in srgb, ${Fr} 30%, white)`:Ri.style.backgroundColor=xe.Util.makeHexColor(...dn(this,Wn).map(Ls=>Math.floor(.7*(255-Ls)+Ls)))}const Bi=document.createElement("span");Bi.className="header";const er=document.createElement("h1");if(Bi.append(er),{dir:er.dir,str:er.textContent}=dn(this,qn),Ri.append(Bi),dn(this,$n)){const Fr=document.createElement("span");Fr.classList.add("popupDate"),dn(this,$n).then(xs=>{Fr.textContent=xs}),Bi.append(Fr)}const Zi=dn(this,Zn),Yi=dn(this,Qn);if(Yi!=null&&Yi.str&&(!(Zi!=null&&Zi.str)||Zi.str===Yi.str))Ce.XfaLayer.render({xfaHtml:Yi.html,intent:"richText",div:Ri}),Ri.lastChild.classList.add("richText","popupContent");else{const Fr=this._formatContents(Zi);Ri.append(Fr)}let fr=!!dn(this,jn),ir=fr?dn(this,jn):dn(this,Jn);for(const Fr of dn(this,mn))if(!ir||xe.Util.intersect(Fr.data.rect,ir)!==null){ir=Fr.data.rect,fr=!0;break}const Qi=xe.Util.normalizeRect([ir[0],Hn[3]-ir[1]+Hn[1],ir[2],Hn[3]-ir[3]+Hn[1]]),cr=fr?ir[2]-ir[0]+5:0,vr=Qi[0]+cr,wr=Qi[1],{style:qr}=dn(this,Pn);qr.left=`${100*(vr-ei)/Un}%`,qr.top=`${100*(wr-si)/ti}%`,dn(this,Pn).append(Ri)}_formatContents({str:Hn,dir:Un}){const ti=document.createElement("p");ti.classList.add("popupContent"),ti.dir=Un;const ei=Hn.split(/(?:\r\n?|\n)/);for(let si=0,Ri=ei.length;si<Ri;++si){const Bi=ei[si];ti.append(document.createTextNode(Bi)),si<Ri-1&&ti.append(document.createElement("br"))}return ti}forceHide(){xi(this,yi,this.isVisible),dn(this,yi)&&(dn(this,Pn).hidden=!0)}maybeShow(){dn(this,yi)&&(xi(this,yi,!1),dn(this,Pn).hidden=!1)}get isVisible(){return dn(this,Pn).hidden===!1}}$n=new WeakMap,Ln=new WeakMap,Gn=new WeakMap,Yn=new WeakMap,ii=new WeakMap,Wn=new WeakMap,Pn=new WeakMap,Zn=new WeakMap,mn=new WeakMap,Cn=new WeakMap,jn=new WeakMap,Rn=new WeakMap,Dn=new WeakMap,Jn=new WeakMap,Qn=new WeakMap,qn=new WeakMap,yi=new WeakMap,di=new WeakSet,E0=function(Hn){Hn.altKey||Hn.shiftKey||Hn.ctrlKey||Hn.metaKey||(Hn.key==="Enter"||Hn.key==="Escape"&&dn(this,Rn))&&oi(this,di,Hd).call(this)},Hd=function(){xi(this,Rn,!dn(this,Rn)),dn(this,Rn)?(oi(this,di,kp).call(this),dn(this,Pn).addEventListener("click",dn(this,ii)),dn(this,Pn).addEventListener("keydown",dn(this,Ln))):(oi(this,di,Ip).call(this),dn(this,Pn).removeEventListener("click",dn(this,ii)),dn(this,Pn).removeEventListener("keydown",dn(this,Ln)))},kp=function(){dn(this,Dn)||this.render(),this.isVisible?dn(this,Rn)&&dn(this,Pn).classList.add("focused"):(dn(this,Pn).hidden=!1,dn(this,Pn).style.zIndex=parseInt(dn(this,Pn).style.zIndex)+1e3)},Ip=function(){dn(this,Pn).classList.remove("focused"),!(dn(this,Rn)||!this.isVisible)&&(dn(this,Pn).hidden=!0,dn(this,Pn).style.zIndex=parseInt(dn(this,Pn).style.zIndex)-1e3)};class gn extends Oe{constructor(Hn){super(Hn,{isRenderable:!0,ignoreBorder:!0}),this.textContent=Hn.data.textContent,this.textPosition=Hn.data.textPosition,this.annotationEditorType=xe.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const Hn=document.createElement("div");Hn.classList.add("annotationTextContent"),Hn.setAttribute("role","comment");for(const Un of this.textContent){const ti=document.createElement("span");ti.textContent=Un,Hn.append(ti)}this.container.append(Hn)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}e.FreeTextAnnotationElement=gn;class He extends Oe{constructor(Un){super(Un,{isRenderable:!0,ignoreBorder:!0});bi(this,Vi,null)}render(){this.container.classList.add("lineAnnotation");const Un=this.data,{width:ti,height:ei}=Fe(Un.rect),si=this.svgFactory.create(ti,ei,!0),Ri=xi(this,Vi,this.svgFactory.createElement("svg:line"));return Ri.setAttribute("x1",Un.rect[2]-Un.lineCoordinates[0]),Ri.setAttribute("y1",Un.rect[3]-Un.lineCoordinates[1]),Ri.setAttribute("x2",Un.rect[2]-Un.lineCoordinates[2]),Ri.setAttribute("y2",Un.rect[3]-Un.lineCoordinates[3]),Ri.setAttribute("stroke-width",Un.borderStyle.width||1),Ri.setAttribute("stroke","transparent"),Ri.setAttribute("fill","transparent"),si.append(Ri),this.container.append(si),!Un.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return dn(this,Vi)}addHighlightArea(){this.container.classList.add("highlightArea")}}Vi=new WeakMap;class en extends Oe{constructor(Un){super(Un,{isRenderable:!0,ignoreBorder:!0});bi(this,Di,null)}render(){this.container.classList.add("squareAnnotation");const Un=this.data,{width:ti,height:ei}=Fe(Un.rect),si=this.svgFactory.create(ti,ei,!0),Ri=Un.borderStyle.width,Bi=xi(this,Di,this.svgFactory.createElement("svg:rect"));return Bi.setAttribute("x",Ri/2),Bi.setAttribute("y",Ri/2),Bi.setAttribute("width",ti-Ri),Bi.setAttribute("height",ei-Ri),Bi.setAttribute("stroke-width",Ri||1),Bi.setAttribute("stroke","transparent"),Bi.setAttribute("fill","transparent"),si.append(Bi),this.container.append(si),!Un.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return dn(this,Di)}addHighlightArea(){this.container.classList.add("highlightArea")}}Di=new WeakMap;class cn extends Oe{constructor(Un){super(Un,{isRenderable:!0,ignoreBorder:!0});bi(this,Xi,null)}render(){this.container.classList.add("circleAnnotation");const Un=this.data,{width:ti,height:ei}=Fe(Un.rect),si=this.svgFactory.create(ti,ei,!0),Ri=Un.borderStyle.width,Bi=xi(this,Xi,this.svgFactory.createElement("svg:ellipse"));return Bi.setAttribute("cx",ti/2),Bi.setAttribute("cy",ei/2),Bi.setAttribute("rx",ti/2-Ri/2),Bi.setAttribute("ry",ei/2-Ri/2),Bi.setAttribute("stroke-width",Ri||1),Bi.setAttribute("stroke","transparent"),Bi.setAttribute("fill","transparent"),si.append(Bi),this.container.append(si),!Un.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return dn(this,Xi)}addHighlightArea(){this.container.classList.add("highlightArea")}}Xi=new WeakMap;class Sn extends Oe{constructor(Un){super(Un,{isRenderable:!0,ignoreBorder:!0});bi(this,fi,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const Un=this.data,{width:ti,height:ei}=Fe(Un.rect),si=this.svgFactory.create(ti,ei,!0);let Ri=[];for(const er of Un.vertices){const Zi=er.x-Un.rect[0],Yi=Un.rect[3]-er.y;Ri.push(Zi+","+Yi)}Ri=Ri.join(" ");const Bi=xi(this,fi,this.svgFactory.createElement(this.svgElementName));return Bi.setAttribute("points",Ri),Bi.setAttribute("stroke-width",Un.borderStyle.width||1),Bi.setAttribute("stroke","transparent"),Bi.setAttribute("fill","transparent"),si.append(Bi),this.container.append(si),!Un.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return dn(this,fi)}addHighlightArea(){this.container.classList.add("highlightArea")}}fi=new WeakMap;class Tn extends Sn{constructor(Hn){super(Hn),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class hn extends Oe{constructor(Hn){super(Hn,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class pn extends Oe{constructor(Un){super(Un,{isRenderable:!0,ignoreBorder:!0});bi(this,ni,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=xe.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const Un=this.data,{width:ti,height:ei}=Fe(Un.rect),si=this.svgFactory.create(ti,ei,!0);for(const Ri of Un.inkLists){let Bi=[];for(const Zi of Ri){const Yi=Zi.x-Un.rect[0],fr=Un.rect[3]-Zi.y;Bi.push(`${Yi},${fr}`)}Bi=Bi.join(" ");const er=this.svgFactory.createElement(this.svgElementName);dn(this,ni).push(er),er.setAttribute("points",Bi),er.setAttribute("stroke-width",Un.borderStyle.width||1),er.setAttribute("stroke","transparent"),er.setAttribute("fill","transparent"),!Un.popupRef&&this.hasPopupData&&this._createPopup(),si.append(er)}return this.container.append(si),this.container}getElementsToTriggerPopup(){return dn(this,ni)}addHighlightArea(){this.container.classList.add("highlightArea")}}ni=new WeakMap,e.InkAnnotationElement=pn;class bn extends Oe{constructor(Hn){super(Hn,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class fn extends Oe{constructor(Hn){super(Hn,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class An extends Oe{constructor(Hn){super(Hn,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class xn extends Oe{constructor(Hn){super(Hn,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Je extends Oe{constructor(Hn){super(Hn,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}e.StampAnnotationElement=Je;class We extends Oe{constructor(Un){var si;super(Un,{isRenderable:!0});bi(this,ji);bi(this,pi,null);const{filename:ti,content:ei}=this.data.file;this.filename=(0,Ee.getFilenameFromUrl)(ti,!0),this.content=ei,(si=this.linkService.eventBus)==null||si.dispatch("fileattachmentannotation",{source:this,filename:ti,content:ei})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:Un,data:ti}=this;let ei;ti.hasAppearance||ti.fillAlpha===0?ei=document.createElement("div"):(ei=document.createElement("img"),ei.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(ti.name)?"paperclip":"pushpin"}.svg`,ti.fillAlpha&&ti.fillAlpha<1&&(ei.style=`filter: opacity(${Math.round(ti.fillAlpha*100)}%);`)),ei.addEventListener("dblclick",oi(this,ji,Mp).bind(this)),xi(this,pi,ei);const{isMac:si}=xe.FeatureTest.platform;return Un.addEventListener("keydown",Ri=>{Ri.key==="Enter"&&(si?Ri.metaKey:Ri.ctrlKey)&&oi(this,ji,Mp).call(this)}),!ti.popupRef&&this.hasPopupData?this._createPopup():ei.classList.add("popupTriggerArea"),Un.append(ei),Un}getElementsToTriggerPopup(){return dn(this,pi)}addHighlightArea(){this.container.classList.add("highlightArea")}}pi=new WeakMap,ji=new WeakSet,Mp=function(){var Un;(Un=this.downloadManager)==null||Un.openOrDownloadData(this.container,this.content,this.filename)};class Ze{constructor({div:Hn,accessibilityManager:Un,annotationCanvasMap:ti,l10n:ei,page:si,viewport:Ri}){bi(this,Mi);bi(this,ar,null);bi(this,Fn,null);bi(this,Si,new Map);this.div=Hn,xi(this,ar,Un),xi(this,Fn,ti),this.l10n=ei,this.page=si,this.viewport=Ri,this.zIndex=0,this.l10n||(this.l10n=Re.NullL10n)}async render(Hn){const{annotations:Un}=Hn,ti=this.div;(0,Ee.setLayerDimensions)(ti,this.viewport);const ei=new Map,si={data:null,layer:ti,linkService:Hn.linkService,downloadManager:Hn.downloadManager,imageResourcesPath:Hn.imageResourcesPath||"",renderForms:Hn.renderForms!==!1,svgFactory:new Ee.DOMSVGFactory,annotationStorage:Hn.annotationStorage||new Ae.AnnotationStorage,enableScripting:Hn.enableScripting===!0,hasJSActions:Hn.hasJSActions,fieldObjects:Hn.fieldObjects,parent:this,elements:null};for(const Ri of Un){if(Ri.noHTML)continue;const Bi=Ri.annotationType===xe.AnnotationType.POPUP;if(Bi){const Yi=ei.get(Ri.id);if(!Yi)continue;si.elements=Yi}else{const{width:Yi,height:fr}=Fe(Ri.rect);if(Yi<=0||fr<=0)continue}si.data=Ri;const er=Ve.create(si);if(!er.isRenderable)continue;if(!Bi&&Ri.popupRef){const Yi=ei.get(Ri.popupRef);Yi?Yi.push(er):ei.set(Ri.popupRef,[er])}er.annotationEditorType>0&&dn(this,Si).set(er.data.id,er);const Zi=er.render();Ri.hidden&&(Zi.style.visibility="hidden"),oi(this,Mi,S0).call(this,Zi,Ri.id)}oi(this,Mi,Lp).call(this),await this.l10n.translate(ti)}update({viewport:Hn}){const Un=this.div;this.viewport=Hn,(0,Ee.setLayerDimensions)(Un,{rotation:Hn.rotation}),oi(this,Mi,Lp).call(this),Un.hidden=!1}getEditableAnnotations(){return Array.from(dn(this,Si).values())}getEditableAnnotation(Hn){return dn(this,Si).get(Hn)}}ar=new WeakMap,Fn=new WeakMap,Si=new WeakMap,Mi=new WeakSet,S0=function(Hn,Un){var ei;const ti=Hn.firstChild||Hn;ti.id=`${xe.AnnotationPrefix}${Un}`,this.div.append(Hn),(ei=dn(this,ar))==null||ei.moveElementInDOM(this.div,Hn,ti,!1)},Lp=function(){if(!dn(this,Fn))return;const Hn=this.div;for(const[Un,ti]of dn(this,Fn)){const ei=Hn.querySelector(`[data-annotation-id="${Un}"]`);if(!ei)continue;const{firstChild:si}=ei;si?si.nodeName==="CANVAS"?si.replaceWith(ti):si.before(ti):ei.append(ti)}dn(this,Fn).clear()},e.AnnotationLayer=Ze}),((t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function r(Ae){return Math.floor(Math.max(0,Math.min(1,Ae))*255).toString(16).padStart(2,"0")}function xe(Ae){return Math.max(0,Math.min(255,255*Ae))}class Ee{static CMYK_G([Pe,Re,Ce,Be]){return["G",1-Math.min(1,.3*Pe+.59*Ce+.11*Re+Be)]}static G_CMYK([Pe]){return["CMYK",0,0,0,1-Pe]}static G_RGB([Pe]){return["RGB",Pe,Pe,Pe]}static G_rgb([Pe]){return Pe=xe(Pe),[Pe,Pe,Pe]}static G_HTML([Pe]){const Re=r(Pe);return`#${Re}${Re}${Re}`}static RGB_G([Pe,Re,Ce]){return["G",.3*Pe+.59*Re+.11*Ce]}static RGB_rgb(Pe){return Pe.map(xe)}static RGB_HTML(Pe){return`#${Pe.map(r).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([Pe,Re,Ce,Be]){return["RGB",1-Math.min(1,Pe+Be),1-Math.min(1,Ce+Be),1-Math.min(1,Re+Be)]}static CMYK_rgb([Pe,Re,Ce,Be]){return[xe(1-Math.min(1,Pe+Be)),xe(1-Math.min(1,Ce+Be)),xe(1-Math.min(1,Re+Be))]}static CMYK_HTML(Pe){const Re=this.CMYK_RGB(Pe).slice(1);return this.RGB_HTML(Re)}static RGB_CMYK([Pe,Re,Ce]){const Be=1-Pe,ke=1-Re,Me=1-Ce,Fe=Math.min(Be,ke,Me);return["CMYK",Be,ke,Me,Fe]}}e.ColorConverters=Ee}),((t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.getL10nFallback=xe;const r={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};r.print_progress_percent="{{progress}}%";function xe(Pe,Re){switch(Pe){case"find_match_count":Pe=`find_match_count[${Re.total===1?"one":"other"}]`;break;case"find_match_count_limit":Pe=`find_match_count_limit[${Re.limit===1?"one":"other"}]`;break}return r[Pe]||""}function Ee(Pe,Re){return Re?Pe.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(Ce,Be)=>Be in Re?Re[Be]:"{{"+Be+"}}"):Pe}const Ae={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(Pe,Re=null,Ce=xe(Pe,Re)){return Ee(Ce,Re)},async translate(Pe){}};e.NullL10n=Ae}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var xe=r(25);class Ee{static setupStorage(Pe,Re,Ce,Be,ke){const Me=Be.getValue(Re,{value:null});switch(Ce.name){case"textarea":if(Me.value!==null&&(Pe.textContent=Me.value),ke==="print")break;Pe.addEventListener("input",Fe=>{Be.setValue(Re,{value:Fe.target.value})});break;case"input":if(Ce.attributes.type==="radio"||Ce.attributes.type==="checkbox"){if(Me.value===Ce.attributes.xfaOn?Pe.setAttribute("checked",!0):Me.value===Ce.attributes.xfaOff&&Pe.removeAttribute("checked"),ke==="print")break;Pe.addEventListener("change",Fe=>{Be.setValue(Re,{value:Fe.target.checked?Fe.target.getAttribute("xfaOn"):Fe.target.getAttribute("xfaOff")})})}else{if(Me.value!==null&&Pe.setAttribute("value",Me.value),ke==="print")break;Pe.addEventListener("input",Fe=>{Be.setValue(Re,{value:Fe.target.value})})}break;case"select":if(Me.value!==null){Pe.setAttribute("value",Me.value);for(const Fe of Ce.children)Fe.attributes.value===Me.value?Fe.attributes.selected=!0:Fe.attributes.hasOwnProperty("selected")&&delete Fe.attributes.selected}Pe.addEventListener("input",Fe=>{const Ve=Fe.target.options,Oe=Ve.selectedIndex===-1?"":Ve[Ve.selectedIndex].value;Be.setValue(Re,{value:Oe})});break}}static setAttributes({html:Pe,element:Re,storage:Ce=null,intent:Be,linkService:ke}){const{attributes:Me}=Re,Fe=Pe instanceof HTMLAnchorElement;Me.type==="radio"&&(Me.name=`${Me.name}-${Be}`);for(const[Ve,Oe]of Object.entries(Me))if(Oe!=null)switch(Ve){case"class":Oe.length&&Pe.setAttribute(Ve,Oe.join(" "));break;case"dataId":break;case"id":Pe.setAttribute("data-element-id",Oe);break;case"style":Object.assign(Pe.style,Oe);break;case"textContent":Pe.textContent=Oe;break;default:(!Fe||Ve!=="href"&&Ve!=="newWindow")&&Pe.setAttribute(Ve,Oe)}Fe&&ke.addLinkAttributes(Pe,Me.href,Me.newWindow),Ce&&Me.dataId&&this.setupStorage(Pe,Me.dataId,Re,Ce)}static render(Pe){var $e;const Re=Pe.annotationStorage,Ce=Pe.linkService,Be=Pe.xfaHtml,ke=Pe.intent||"display",Me=document.createElement(Be.name);Be.attributes&&this.setAttributes({html:Me,element:Be,intent:ke,linkService:Ce});const Fe=[[Be,-1,Me]],Ve=Pe.div;if(Ve.append(Me),Pe.viewport){const Ge=`matrix(${Pe.viewport.transform.join(",")})`;Ve.style.transform=Ge}ke!=="richText"&&Ve.setAttribute("class","xfaLayer xfaFont");const Oe=[];for(;Fe.length>0;){const[Ge,Ue,Ye]=Fe.at(-1);if(Ue+1===Ge.children.length){Fe.pop();continue}const Qe=Ge.children[++Fe.at(-1)[1]];if(Qe===null)continue;const{name:rn}=Qe;if(rn==="#text"){const an=document.createTextNode(Qe.value);Oe.push(an),Ye.append(an);continue}const tn=($e=Qe==null?void 0:Qe.attributes)!=null&&$e.xmlns?document.createElementNS(Qe.attributes.xmlns,rn):document.createElement(rn);if(Ye.append(tn),Qe.attributes&&this.setAttributes({html:tn,element:Qe,storage:Re,intent:ke,linkService:Ce}),Qe.children&&Qe.children.length>0)Fe.push([Qe,-1,tn]);else if(Qe.value){const an=document.createTextNode(Qe.value);xe.XfaText.shouldBuildText(rn)&&Oe.push(an),tn.append(an)}}for(const Ge of Ve.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))Ge.setAttribute("readOnly",!0);return{textDivs:Oe}}static update(Pe){const Re=`matrix(${Pe.viewport.transform.join(",")})`;Pe.div.style.transform=Re,Pe.div.hidden=!1}}e.XfaLayer=Ee}),((t,e,r)=>{var Be,ke,Me,Fe,Ve,Oe,$e,Ge,Ue,Ye,Qe,rn,tn,an,qe,w0,A0,P0,T0,Vp,C0,Dp,R0,B0,N0,k0,I0,Fl,Fp,Gd,$d,eh,Op,Wd,_n,M0,jp,L0,V0,Up,Kd,th;Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0;var xe=r(1),Ee=r(4),Ae=r(29),Pe=r(6),Re=r(5);const Wn=class Wn extends Ee.AnnotationEditor{constructor(mn){super({...mn,name:"inkEditor"});bi(this,qe);bi(this,Be,0);bi(this,ke,0);bi(this,Me,this.canvasPointermove.bind(this));bi(this,Fe,this.canvasPointerleave.bind(this));bi(this,Ve,this.canvasPointerup.bind(this));bi(this,Oe,this.canvasPointerdown.bind(this));bi(this,$e,new Path2D);bi(this,Ge,!1);bi(this,Ue,!1);bi(this,Ye,!1);bi(this,Qe,null);bi(this,rn,0);bi(this,tn,0);bi(this,an,null);this.color=mn.color||null,this.thickness=mn.thickness||null,this.opacity=mn.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(mn){Ee.AnnotationEditor.initialize(mn,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(mn,Cn){switch(mn){case xe.AnnotationEditorParamsType.INK_THICKNESS:Wn._defaultThickness=Cn;break;case xe.AnnotationEditorParamsType.INK_COLOR:Wn._defaultColor=Cn;break;case xe.AnnotationEditorParamsType.INK_OPACITY:Wn._defaultOpacity=Cn/100;break}}updateParams(mn,Cn){switch(mn){case xe.AnnotationEditorParamsType.INK_THICKNESS:oi(this,qe,w0).call(this,Cn);break;case xe.AnnotationEditorParamsType.INK_COLOR:oi(this,qe,A0).call(this,Cn);break;case xe.AnnotationEditorParamsType.INK_OPACITY:oi(this,qe,P0).call(this,Cn);break}}static get defaultPropertiesToUpdate(){return[[xe.AnnotationEditorParamsType.INK_THICKNESS,Wn._defaultThickness],[xe.AnnotationEditorParamsType.INK_COLOR,Wn._defaultColor||Ee.AnnotationEditor._defaultLineColor],[xe.AnnotationEditorParamsType.INK_OPACITY,Math.round(Wn._defaultOpacity*100)]]}get propertiesToUpdate(){return[[xe.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Wn._defaultThickness],[xe.AnnotationEditorParamsType.INK_COLOR,this.color||Wn._defaultColor||Ee.AnnotationEditor._defaultLineColor],[xe.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Wn._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(oi(this,qe,Gd).call(this),oi(this,qe,$d).call(this)),this.isAttachedToDOM||(this.parent.add(this),oi(this,qe,eh).call(this)),oi(this,qe,th).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,dn(this,Qe).disconnect(),xi(this,Qe,null),super.remove())}setParent(mn){!this.parent&&mn?this._uiManager.removeShouldRescale(this):this.parent&&mn===null&&this._uiManager.addShouldRescale(this),super.setParent(mn)}onScaleChanging(){const[mn,Cn]=this.parentDimensions,jn=this.width*mn,Rn=this.height*Cn;this.setDimensions(jn,Rn)}enableEditMode(){dn(this,Ge)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",dn(this,Oe)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",dn(this,Oe)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){dn(this,Ge)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),xi(this,Ge,!0),this.div.classList.add("disabled"),oi(this,qe,th).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(mn){this._focusEventsAllowed&&(super.focusin(mn),this.enableEditMode())}canvasPointerdown(mn){mn.button!==0||!this.isInEditMode()||dn(this,Ge)||(this.setInForeground(),mn.preventDefault(),mn.type!=="mouse"&&this.div.focus(),oi(this,qe,C0).call(this,mn.offsetX,mn.offsetY))}canvasPointermove(mn){mn.preventDefault(),oi(this,qe,Dp).call(this,mn.offsetX,mn.offsetY)}canvasPointerup(mn){mn.preventDefault(),oi(this,qe,Fp).call(this,mn)}canvasPointerleave(mn){oi(this,qe,Fp).call(this,mn)}get isResizable(){return!this.isEmpty()&&dn(this,Ge)}render(){if(this.div)return this.div;let mn,Cn;this.width&&(mn=this.x,Cn=this.y),super.render(),Ee.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Qn=>{var qn;return(qn=this.div)==null?void 0:qn.setAttribute("aria-label",Qn)});const[jn,Rn,Dn,Jn]=oi(this,qe,T0).call(this);if(this.setAt(jn,Rn,0,0),this.setDims(Dn,Jn),oi(this,qe,Gd).call(this),this.width){const[Qn,qn]=this.parentDimensions;this.setAspectRatio(this.width*Qn,this.height*qn),this.setAt(mn*Qn,Cn*qn,this.width*Qn,this.height*qn),xi(this,Ye,!0),oi(this,qe,eh).call(this),this.setDims(this.width*Qn,this.height*qn),oi(this,qe,Fl).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return oi(this,qe,$d).call(this),this.div}setDimensions(mn,Cn){const jn=Math.round(mn),Rn=Math.round(Cn);if(dn(this,rn)===jn&&dn(this,tn)===Rn)return;xi(this,rn,jn),xi(this,tn,Rn),this.canvas.style.visibility="hidden";const[Dn,Jn]=this.parentDimensions;this.width=mn/Dn,this.height=Cn/Jn,this.fixAndSetPosition(),dn(this,Ge)&&oi(this,qe,Op).call(this,mn,Cn),oi(this,qe,eh).call(this),oi(this,qe,Fl).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(mn,Cn,jn){var Vi,Di,Xi;if(mn instanceof Ae.InkAnnotationElement)return null;const Rn=super.deserialize(mn,Cn,jn);Rn.thickness=mn.thickness,Rn.color=xe.Util.makeHexColor(...mn.color),Rn.opacity=mn.opacity;const[Dn,Jn]=Rn.pageDimensions,Qn=Rn.width*Dn,qn=Rn.height*Jn,yi=Rn.parentScale,di=mn.thickness/2;xi(Rn,Ge,!0),xi(Rn,rn,Math.round(Qn)),xi(Rn,tn,Math.round(qn));const{paths:zi,rect:Ni,rotation:Gi}=mn;for(let{bezier:fi}of zi){fi=oi(Vi=Wn,_n,L0).call(Vi,fi,Ni,Gi);const ni=[];Rn.paths.push(ni);let pi=yi*(fi[0]-di),ji=yi*(fi[1]-di);for(let ar=2,Fn=fi.length;ar<Fn;ar+=6){const Si=yi*(fi[ar]-di),Mi=yi*(fi[ar+1]-di),ki=yi*(fi[ar+2]-di),$i=yi*(fi[ar+3]-di),tr=yi*(fi[ar+4]-di),Hn=yi*(fi[ar+5]-di);ni.push([[pi,ji],[Si,Mi],[ki,$i],[tr,Hn]]),pi=tr,ji=Hn}const hr=oi(this,_n,M0).call(this,ni);Rn.bezierPath2D.push(hr)}const ui=oi(Di=Rn,qe,Up).call(Di);return xi(Rn,ke,Math.max(Ee.AnnotationEditor.MIN_SIZE,ui[2]-ui[0])),xi(Rn,Be,Math.max(Ee.AnnotationEditor.MIN_SIZE,ui[3]-ui[1])),oi(Xi=Rn,qe,Op).call(Xi,Qn,qn),Rn}serialize(){if(this.isEmpty())return null;const mn=this.getRect(0,0),Cn=Ee.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:xe.AnnotationEditorType.INK,color:Cn,thickness:this.thickness,opacity:this.opacity,paths:oi(this,qe,V0).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,mn),pageIndex:this.pageIndex,rect:mn,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};Be=new WeakMap,ke=new WeakMap,Me=new WeakMap,Fe=new WeakMap,Ve=new WeakMap,Oe=new WeakMap,$e=new WeakMap,Ge=new WeakMap,Ue=new WeakMap,Ye=new WeakMap,Qe=new WeakMap,rn=new WeakMap,tn=new WeakMap,an=new WeakMap,qe=new WeakSet,w0=function(mn){const Cn=this.thickness;this.addCommands({cmd:()=>{this.thickness=mn,oi(this,qe,th).call(this)},undo:()=>{this.thickness=Cn,oi(this,qe,th).call(this)},mustExec:!0,type:xe.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},A0=function(mn){const Cn=this.color;this.addCommands({cmd:()=>{this.color=mn,oi(this,qe,Fl).call(this)},undo:()=>{this.color=Cn,oi(this,qe,Fl).call(this)},mustExec:!0,type:xe.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},P0=function(mn){mn/=100;const Cn=this.opacity;this.addCommands({cmd:()=>{this.opacity=mn,oi(this,qe,Fl).call(this)},undo:()=>{this.opacity=Cn,oi(this,qe,Fl).call(this)},mustExec:!0,type:xe.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},T0=function(){const{parentRotation:mn,parentDimensions:[Cn,jn]}=this;switch(mn){case 90:return[0,jn,jn,Cn];case 180:return[Cn,jn,Cn,jn];case 270:return[Cn,0,jn,Cn];default:return[0,0,Cn,jn]}},Vp=function(){const{ctx:mn,color:Cn,opacity:jn,thickness:Rn,parentScale:Dn,scaleFactor:Jn}=this;mn.lineWidth=Rn*Dn/Jn,mn.lineCap="round",mn.lineJoin="round",mn.miterLimit=10,mn.strokeStyle=`${Cn}${(0,Re.opacityToHex)(jn)}`},C0=function(mn,Cn){this.canvas.addEventListener("contextmenu",Pe.noContextMenu),this.canvas.addEventListener("pointerleave",dn(this,Fe)),this.canvas.addEventListener("pointermove",dn(this,Me)),this.canvas.addEventListener("pointerup",dn(this,Ve)),this.canvas.removeEventListener("pointerdown",dn(this,Oe)),this.isEditing=!0,dn(this,Ye)||(xi(this,Ye,!0),oi(this,qe,eh).call(this),this.thickness||(this.thickness=Wn._defaultThickness),this.color||(this.color=Wn._defaultColor||Ee.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Wn._defaultOpacity)),this.currentPath.push([mn,Cn]),xi(this,Ue,!1),oi(this,qe,Vp).call(this),xi(this,an,()=>{oi(this,qe,N0).call(this),dn(this,an)&&window.requestAnimationFrame(dn(this,an))}),window.requestAnimationFrame(dn(this,an))},Dp=function(mn,Cn){const[jn,Rn]=this.currentPath.at(-1);if(this.currentPath.length>1&&mn===jn&&Cn===Rn)return;const Dn=this.currentPath;let Jn=dn(this,$e);if(Dn.push([mn,Cn]),xi(this,Ue,!0),Dn.length<=2){Jn.moveTo(...Dn[0]),Jn.lineTo(mn,Cn);return}Dn.length===3&&(xi(this,$e,Jn=new Path2D),Jn.moveTo(...Dn[0])),oi(this,qe,k0).call(this,Jn,...Dn.at(-3),...Dn.at(-2),mn,Cn)},R0=function(){if(this.currentPath.length===0)return;const mn=this.currentPath.at(-1);dn(this,$e).lineTo(...mn)},B0=function(mn,Cn){xi(this,an,null),mn=Math.min(Math.max(mn,0),this.canvas.width),Cn=Math.min(Math.max(Cn,0),this.canvas.height),oi(this,qe,Dp).call(this,mn,Cn),oi(this,qe,R0).call(this);let jn;if(this.currentPath.length!==1)jn=oi(this,qe,I0).call(this);else{const qn=[mn,Cn];jn=[[qn,qn.slice(),qn.slice(),qn]]}const Rn=dn(this,$e),Dn=this.currentPath;this.currentPath=[],xi(this,$e,new Path2D);const Jn=()=>{this.allRawPaths.push(Dn),this.paths.push(jn),this.bezierPath2D.push(Rn),this.rebuild()},Qn=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(oi(this,qe,Gd).call(this),oi(this,qe,$d).call(this)),oi(this,qe,th).call(this))};this.addCommands({cmd:Jn,undo:Qn,mustExec:!0})},N0=function(){if(!dn(this,Ue))return;xi(this,Ue,!1);const mn=Math.ceil(this.thickness*this.parentScale),Cn=this.currentPath.slice(-3),jn=Cn.map(Jn=>Jn[0]),Rn=Cn.map(Jn=>Jn[1]);Math.min(...jn)-mn,Math.max(...jn)+mn,Math.min(...Rn)-mn,Math.max(...Rn)+mn;const{ctx:Dn}=this;Dn.save(),Dn.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Jn of this.bezierPath2D)Dn.stroke(Jn);Dn.stroke(dn(this,$e)),Dn.restore()},k0=function(mn,Cn,jn,Rn,Dn,Jn,Qn){const qn=(Cn+Rn)/2,yi=(jn+Dn)/2,di=(Rn+Jn)/2,zi=(Dn+Qn)/2;mn.bezierCurveTo(qn+2*(Rn-qn)/3,yi+2*(Dn-yi)/3,di+2*(Rn-di)/3,zi+2*(Dn-zi)/3,di,zi)},I0=function(){const mn=this.currentPath;if(mn.length<=2)return[[mn[0],mn[0],mn.at(-1),mn.at(-1)]];const Cn=[];let jn,[Rn,Dn]=mn[0];for(jn=1;jn<mn.length-2;jn++){const[Ni,Gi]=mn[jn],[ui,Vi]=mn[jn+1],Di=(Ni+ui)/2,Xi=(Gi+Vi)/2,fi=[Rn+2*(Ni-Rn)/3,Dn+2*(Gi-Dn)/3],ni=[Di+2*(Ni-Di)/3,Xi+2*(Gi-Xi)/3];Cn.push([[Rn,Dn],fi,ni,[Di,Xi]]),[Rn,Dn]=[Di,Xi]}const[Jn,Qn]=mn[jn],[qn,yi]=mn[jn+1],di=[Rn+2*(Jn-Rn)/3,Dn+2*(Qn-Dn)/3],zi=[qn+2*(Jn-qn)/3,yi+2*(Qn-yi)/3];return Cn.push([[Rn,Dn],di,zi,[qn,yi]]),Cn},Fl=function(){if(this.isEmpty()){oi(this,qe,Wd).call(this);return}oi(this,qe,Vp).call(this);const{canvas:mn,ctx:Cn}=this;Cn.setTransform(1,0,0,1,0,0),Cn.clearRect(0,0,mn.width,mn.height),oi(this,qe,Wd).call(this);for(const jn of this.bezierPath2D)Cn.stroke(jn)},Fp=function(mn){this.canvas.removeEventListener("pointerleave",dn(this,Fe)),this.canvas.removeEventListener("pointermove",dn(this,Me)),this.canvas.removeEventListener("pointerup",dn(this,Ve)),this.canvas.addEventListener("pointerdown",dn(this,Oe)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",Pe.noContextMenu)},10),oi(this,qe,B0).call(this,mn.offsetX,mn.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Gd=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",Ee.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(mn=>{var Cn;return(Cn=this.canvas)==null?void 0:Cn.setAttribute("aria-label",mn)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},$d=function(){xi(this,Qe,new ResizeObserver(mn=>{const Cn=mn[0].contentRect;Cn.width&&Cn.height&&this.setDimensions(Cn.width,Cn.height)})),dn(this,Qe).observe(this.div)},eh=function(){if(!dn(this,Ye))return;const[mn,Cn]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*mn),this.canvas.height=Math.ceil(this.height*Cn),oi(this,qe,Wd).call(this)},Op=function(mn,Cn){const jn=oi(this,qe,Kd).call(this),Rn=(mn-jn)/dn(this,ke),Dn=(Cn-jn)/dn(this,Be);this.scaleFactor=Math.min(Rn,Dn)},Wd=function(){const mn=oi(this,qe,Kd).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+mn,this.translationY*this.scaleFactor+mn)},_n=new WeakSet,M0=function(mn){const Cn=new Path2D;for(let jn=0,Rn=mn.length;jn<Rn;jn++){const[Dn,Jn,Qn,qn]=mn[jn];jn===0&&Cn.moveTo(...Dn),Cn.bezierCurveTo(Jn[0],Jn[1],Qn[0],Qn[1],qn[0],qn[1])}return Cn},jp=function(mn,Cn,jn){const[Rn,Dn,Jn,Qn]=Cn;switch(jn){case 0:for(let qn=0,yi=mn.length;qn<yi;qn+=2)mn[qn]+=Rn,mn[qn+1]=Qn-mn[qn+1];break;case 90:for(let qn=0,yi=mn.length;qn<yi;qn+=2){const di=mn[qn];mn[qn]=mn[qn+1]+Rn,mn[qn+1]=di+Dn}break;case 180:for(let qn=0,yi=mn.length;qn<yi;qn+=2)mn[qn]=Jn-mn[qn],mn[qn+1]+=Dn;break;case 270:for(let qn=0,yi=mn.length;qn<yi;qn+=2){const di=mn[qn];mn[qn]=Jn-mn[qn+1],mn[qn+1]=Qn-di}break;default:throw new Error("Invalid rotation")}return mn},L0=function(mn,Cn,jn){const[Rn,Dn,Jn,Qn]=Cn;switch(jn){case 0:for(let qn=0,yi=mn.length;qn<yi;qn+=2)mn[qn]-=Rn,mn[qn+1]=Qn-mn[qn+1];break;case 90:for(let qn=0,yi=mn.length;qn<yi;qn+=2){const di=mn[qn];mn[qn]=mn[qn+1]-Dn,mn[qn+1]=di-Rn}break;case 180:for(let qn=0,yi=mn.length;qn<yi;qn+=2)mn[qn]=Jn-mn[qn],mn[qn+1]-=Dn;break;case 270:for(let qn=0,yi=mn.length;qn<yi;qn+=2){const di=mn[qn];mn[qn]=Qn-mn[qn+1],mn[qn+1]=Jn-di}break;default:throw new Error("Invalid rotation")}return mn},V0=function(mn,Cn,jn,Rn){var yi,di;const Dn=[],Jn=this.thickness/2,Qn=mn*Cn+Jn,qn=mn*jn+Jn;for(const zi of this.paths){const Ni=[],Gi=[];for(let ui=0,Vi=zi.length;ui<Vi;ui++){const[Di,Xi,fi,ni]=zi[ui],pi=mn*Di[0]+Qn,ji=mn*Di[1]+qn,hr=mn*Xi[0]+Qn,ar=mn*Xi[1]+qn,Fn=mn*fi[0]+Qn,Si=mn*fi[1]+qn,Mi=mn*ni[0]+Qn,ki=mn*ni[1]+qn;ui===0&&(Ni.push(pi,ji),Gi.push(pi,ji)),Ni.push(hr,ar,Fn,Si,Mi,ki),Gi.push(hr,ar),ui===Vi-1&&Gi.push(Mi,ki)}Dn.push({bezier:oi(yi=Wn,_n,jp).call(yi,Ni,Rn,this.rotation),points:oi(di=Wn,_n,jp).call(di,Gi,Rn,this.rotation)})}return Dn},Up=function(){let mn=1/0,Cn=-1/0,jn=1/0,Rn=-1/0;for(const Dn of this.paths)for(const[Jn,Qn,qn,yi]of Dn){const di=xe.Util.bezierBoundingBox(...Jn,...Qn,...qn,...yi);mn=Math.min(mn,di[0]),jn=Math.min(jn,di[1]),Cn=Math.max(Cn,di[2]),Rn=Math.max(Rn,di[3])}return[mn,jn,Cn,Rn]},Kd=function(){return dn(this,Ge)?Math.ceil(this.thickness*this.parentScale):0},th=function(mn=!1){if(this.isEmpty())return;if(!dn(this,Ge)){oi(this,qe,Fl).call(this);return}const Cn=oi(this,qe,Up).call(this),jn=oi(this,qe,Kd).call(this);xi(this,ke,Math.max(Ee.AnnotationEditor.MIN_SIZE,Cn[2]-Cn[0])),xi(this,Be,Math.max(Ee.AnnotationEditor.MIN_SIZE,Cn[3]-Cn[1]));const Rn=Math.ceil(jn+dn(this,ke)*this.scaleFactor),Dn=Math.ceil(jn+dn(this,Be)*this.scaleFactor),[Jn,Qn]=this.parentDimensions;this.width=Rn/Jn,this.height=Dn/Qn,this.setAspectRatio(Rn,Dn);const qn=this.translationX,yi=this.translationY;this.translationX=-Cn[0],this.translationY=-Cn[1],oi(this,qe,eh).call(this),oi(this,qe,Fl).call(this),xi(this,rn,Rn),xi(this,tn,Dn),this.setDims(Rn,Dn);const di=mn?jn/this.scaleFactor/2:0;this.translate(qn-this.translationX-di,yi-this.translationY-di)},bi(Wn,_n),Yr(Wn,"_defaultColor",null),Yr(Wn,"_defaultOpacity",1),Yr(Wn,"_defaultThickness",1),Yr(Wn,"_type","ink");let Ce=Wn;e.InkEditor=Ce}),((t,e,r)=>{var Ce,Be,ke,Me,Fe,Ve,Oe,$e,Ge,Ue,Ye,Gh,$h,Yd,zp,D0,F0,qp,Jd,O0;Object.defineProperty(e,"__esModule",{value:!0}),e.StampEditor=void 0;var xe=r(1),Ee=r(4),Ae=r(6),Pe=r(29);const en=class en extends Ee.AnnotationEditor{constructor(Tn){super({...Tn,name:"stampEditor"});bi(this,Ye);bi(this,Ce,null);bi(this,Be,null);bi(this,ke,null);bi(this,Me,null);bi(this,Fe,null);bi(this,Ve,null);bi(this,Oe,null);bi(this,$e,null);bi(this,Ge,!1);bi(this,Ue,!1);xi(this,Me,Tn.bitmapUrl),xi(this,Fe,Tn.bitmapFile)}static initialize(Tn){Ee.AnnotationEditor.initialize(Tn)}static get supportedTypes(){const Tn=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,xe.shadow)(this,"supportedTypes",Tn.map(hn=>`image/${hn}`))}static get supportedTypesStr(){return(0,xe.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(Tn){return this.supportedTypes.includes(Tn)}static paste(Tn,hn){hn.pasteEditor(xe.AnnotationEditorType.STAMP,{bitmapFile:Tn.getAsFile()})}remove(){var Tn,hn;dn(this,Be)&&(xi(this,Ce,null),this._uiManager.imageManager.deleteId(dn(this,Be)),(Tn=dn(this,Ve))==null||Tn.remove(),xi(this,Ve,null),(hn=dn(this,Oe))==null||hn.disconnect(),xi(this,Oe,null)),super.remove()}rebuild(){if(!this.parent){dn(this,Be)&&oi(this,Ye,Yd).call(this);return}super.rebuild(),this.div!==null&&(dn(this,Be)&&oi(this,Ye,Yd).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(dn(this,ke)||dn(this,Ce)||dn(this,Me)||dn(this,Fe))}get isResizable(){return!0}render(){if(this.div)return this.div;let Tn,hn;if(this.width&&(Tn=this.x,hn=this.y),super.render(),this.div.hidden=!0,dn(this,Ce)?oi(this,Ye,zp).call(this):oi(this,Ye,Yd).call(this),this.width){const[pn,bn]=this.parentDimensions;this.setAt(Tn*pn,hn*bn,this.width*pn,this.height*bn)}return this.div}static deserialize(Tn,hn,pn){if(Tn instanceof Pe.StampAnnotationElement)return null;const bn=super.deserialize(Tn,hn,pn),{rect:fn,bitmapUrl:An,bitmapId:xn,isSvg:Je,accessibilityData:We}=Tn;xn&&pn.imageManager.isValidId(xn)?xi(bn,Be,xn):xi(bn,Me,An),xi(bn,Ge,Je);const[Ze,un]=bn.pageDimensions;return bn.width=(fn[2]-fn[0])/Ze,bn.height=(fn[3]-fn[1])/un,We&&(bn.altTextData=We),bn}serialize(Tn=!1,hn=null){if(this.isEmpty())return null;const pn={annotationType:xe.AnnotationEditorType.STAMP,bitmapId:dn(this,Be),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:dn(this,Ge),structTreeParentId:this._structTreeParentId};if(Tn)return pn.bitmapUrl=oi(this,Ye,Jd).call(this,!0),pn.accessibilityData=this.altTextData,pn;const{decorative:bn,altText:fn}=this.altTextData;if(!bn&&fn&&(pn.accessibilityData={type:"Figure",alt:fn}),hn===null)return pn;hn.stamps||(hn.stamps=new Map);const An=dn(this,Ge)?(pn.rect[2]-pn.rect[0])*(pn.rect[3]-pn.rect[1]):null;if(!hn.stamps.has(dn(this,Be)))hn.stamps.set(dn(this,Be),{area:An,serialized:pn}),pn.bitmap=oi(this,Ye,Jd).call(this,!1);else if(dn(this,Ge)){const xn=hn.stamps.get(dn(this,Be));An>xn.area&&(xn.area=An,xn.serialized.bitmap.close(),xn.serialized.bitmap=oi(this,Ye,Jd).call(this,!1))}return pn}};Ce=new WeakMap,Be=new WeakMap,ke=new WeakMap,Me=new WeakMap,Fe=new WeakMap,Ve=new WeakMap,Oe=new WeakMap,$e=new WeakMap,Ge=new WeakMap,Ue=new WeakMap,Ye=new WeakSet,Gh=function(Tn,hn=!1){if(!Tn){this.remove();return}xi(this,Ce,Tn.bitmap),hn||(xi(this,Be,Tn.id),xi(this,Ge,Tn.isSvg)),oi(this,Ye,zp).call(this)},$h=function(){xi(this,ke,null),this._uiManager.enableWaiting(!1),dn(this,Ve)&&this.div.focus()},Yd=function(){if(dn(this,Be)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(dn(this,Be)).then(hn=>oi(this,Ye,Gh).call(this,hn,!0)).finally(()=>oi(this,Ye,$h).call(this));return}if(dn(this,Me)){const hn=dn(this,Me);xi(this,Me,null),this._uiManager.enableWaiting(!0),xi(this,ke,this._uiManager.imageManager.getFromUrl(hn).then(pn=>oi(this,Ye,Gh).call(this,pn)).finally(()=>oi(this,Ye,$h).call(this)));return}if(dn(this,Fe)){const hn=dn(this,Fe);xi(this,Fe,null),this._uiManager.enableWaiting(!0),xi(this,ke,this._uiManager.imageManager.getFromFile(hn).then(pn=>oi(this,Ye,Gh).call(this,pn)).finally(()=>oi(this,Ye,$h).call(this)));return}const Tn=document.createElement("input");Tn.type="file",Tn.accept=en.supportedTypesStr,xi(this,ke,new Promise(hn=>{Tn.addEventListener("change",async()=>{if(!Tn.files||Tn.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const pn=await this._uiManager.imageManager.getFromFile(Tn.files[0]);oi(this,Ye,Gh).call(this,pn)}hn()}),Tn.addEventListener("cancel",()=>{this.remove(),hn()})}).finally(()=>oi(this,Ye,$h).call(this))),Tn.click()},zp=function(){const{div:Tn}=this;let{width:hn,height:pn}=dn(this,Ce);const[bn,fn]=this.pageDimensions,An=.75;if(this.width)hn=this.width*bn,pn=this.height*fn;else if(hn>An*bn||pn>An*fn){const Ze=Math.min(An*bn/hn,An*fn/pn);hn*=Ze,pn*=Ze}const[xn,Je]=this.parentDimensions;this.setDims(hn*xn/bn,pn*Je/fn),this._uiManager.enableWaiting(!1);const We=xi(this,Ve,document.createElement("canvas"));Tn.append(We),Tn.hidden=!1,oi(this,Ye,qp).call(this,hn,pn),oi(this,Ye,O0).call(this),dn(this,Ue)||(this.parent.addUndoableEditor(this),xi(this,Ue,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},D0=function(Tn,hn){var An;const[pn,bn]=this.parentDimensions;this.width=Tn/pn,this.height=hn/bn,this.setDims(Tn,hn),(An=this._initialOptions)!=null&&An.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,dn(this,$e)!==null&&clearTimeout(dn(this,$e)),xi(this,$e,setTimeout(()=>{xi(this,$e,null),oi(this,Ye,qp).call(this,Tn,hn)},200))},F0=function(Tn,hn){const{width:pn,height:bn}=dn(this,Ce);let fn=pn,An=bn,xn=dn(this,Ce);for(;fn>2*Tn||An>2*hn;){const Je=fn,We=An;fn>2*Tn&&(fn=fn>=16384?Math.floor(fn/2)-1:Math.ceil(fn/2)),An>2*hn&&(An=An>=16384?Math.floor(An/2)-1:Math.ceil(An/2));const Ze=new OffscreenCanvas(fn,An);Ze.getContext("2d").drawImage(xn,0,0,Je,We,0,0,fn,An),xn=Ze.transferToImageBitmap()}return xn},qp=function(Tn,hn){Tn=Math.ceil(Tn),hn=Math.ceil(hn);const pn=dn(this,Ve);if(!pn||pn.width===Tn&&pn.height===hn)return;pn.width=Tn,pn.height=hn;const bn=dn(this,Ge)?dn(this,Ce):oi(this,Ye,F0).call(this,Tn,hn),fn=pn.getContext("2d");fn.filter=this._uiManager.hcmFilter,fn.drawImage(bn,0,0,bn.width,bn.height,0,0,Tn,hn)},Jd=function(Tn){if(Tn){if(dn(this,Ge)){const bn=this._uiManager.imageManager.getSvgUrl(dn(this,Be));if(bn)return bn}const hn=document.createElement("canvas");return{width:hn.width,height:hn.height}=dn(this,Ce),hn.getContext("2d").drawImage(dn(this,Ce),0,0),hn.toDataURL()}if(dn(this,Ge)){const[hn,pn]=this.pageDimensions,bn=Math.round(this.width*hn*Ae.PixelsPerInch.PDF_TO_CSS_UNITS),fn=Math.round(this.height*pn*Ae.PixelsPerInch.PDF_TO_CSS_UNITS),An=new OffscreenCanvas(bn,fn);return An.getContext("2d").drawImage(dn(this,Ce),0,0,dn(this,Ce).width,dn(this,Ce).height,0,0,bn,fn),An.transferToImageBitmap()}return structuredClone(dn(this,Ce))},O0=function(){xi(this,Oe,new ResizeObserver(Tn=>{const hn=Tn[0].contentRect;hn.width&&hn.height&&oi(this,Ye,D0).call(this,hn.width,hn.height)})),dn(this,Oe).observe(this.div)},Yr(en,"_type","stamp");let Re=en;e.StampEditor=Re})],__webpack_module_cache__={};function __w_pdfjs_require__(t){var e=__webpack_module_cache__[t];if(e!==void 0)return e.exports;var r=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](r,r.exports,__w_pdfjs_require__),r.exports}var __webpack_exports__={};return(()=>{var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:!0,get:function(){return Ae.AnnotationEditorLayer}}),Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(t,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return Pe.AnnotationEditorUIManager}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return Re.AnnotationLayer}}),Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(t,"DOMSVGFactory",{enumerable:!0,get:function(){return xe.DOMSVGFactory}}),Object.defineProperty(t,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return Ce.GlobalWorkerOptions}}),Object.defineProperty(t,"ImageKind",{enumerable:!0,get:function(){return e.ImageKind}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return r.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return xe.PDFDateString}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return r.PDFWorker}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function(){return xe.PixelsPerInch}}),Object.defineProperty(t,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return xe.RenderingCancelledException}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return r.SVGGraphics}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return Be.XfaLayer}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return r.build}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return r.getDocument}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return xe.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return xe.getPdfFilenameFromUrl}}),Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return xe.getXfaPageViewport}}),Object.defineProperty(t,"isDataScheme",{enumerable:!0,get:function(){return xe.isDataScheme}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return xe.isPdfFile}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return xe.loadScript}}),Object.defineProperty(t,"noContextMenu",{enumerable:!0,get:function(){return xe.noContextMenu}}),Object.defineProperty(t,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return Ee.renderTextLayer}}),Object.defineProperty(t,"setLayerDimensions",{enumerable:!0,get:function(){return xe.setLayerDimensions}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(t,"updateTextLayer",{enumerable:!0,get:function(){return Ee.updateTextLayer}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return r.version}});var e=__w_pdfjs_require__(1),r=__w_pdfjs_require__(2),xe=__w_pdfjs_require__(6),Ee=__w_pdfjs_require__(26),Ae=__w_pdfjs_require__(27),Pe=__w_pdfjs_require__(5),Re=__w_pdfjs_require__(29),Ce=__w_pdfjs_require__(14),Be=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf$3)),pdf$3.exports}var pdfExports=requirePdf();const pdf$2=getDefaultExportFromCjs(pdfExports),pdfjsLib=_mergeNamespaces({__proto__:null,default:pdf$2},[pdfExports]),getPdfLib=()=>{const t=pdfjsLib;return t.default&&t.default.GlobalWorkerOptions?t.default:t},pdf$1=getPdfLib();if(pdf$1&&pdf$1.GlobalWorkerOptions)try{pdf$1.GlobalWorkerOptions.workerSrc="https://esm.sh/pdfjs-dist@3.11.174/build/pdf.worker.min.js"}catch(t){console.warn("PDF Worker setup warning:",t)}const PdfViewer=({url:t,type:e,onAddPage:r})=>{const[xe,Ee]=reactExports.useState(1),[Ae,Pe]=reactExports.useState({x:0,y:0}),[Re,Ce]=reactExports.useState(!1),[Be,ke]=reactExports.useState({x:0,y:0}),[Me,Fe]=reactExports.useState(null),[Ve,Oe]=reactExports.useState(1),[$e,Ge]=reactExports.useState(0),[Ue,Ye]=reactExports.useState(!1),[Qe,rn]=reactExports.useState(null),tn=reactExports.useRef(null),an=reactExports.useRef(null),qe=(e==null?void 0:e.startsWith("image/"))||t.match(/^data:image/)||t.match(/\.(jpeg|jpg|png|webp|heic)$/i);reactExports.useEffect(()=>{if(Ee(1),Pe({x:0,y:0}),rn(null),Oe(1),!qe&&t){if(Ye(!0),!pdf$1||!pdf$1.getDocument){rn("PDF Library Error");return}pdf$1.getDocument(t).promise.then(fn=>{Fe(fn),Ge(fn.numPages),Ye(!1)}).catch(fn=>{console.error("PDF Load Error",fn),rn("PDF konnte nicht geladen werden."),Ye(!1)})}},[t,qe]),reactExports.useEffect(()=>{!qe&&Me&&tn.current&&Me.getPage(Ve).then(bn=>{const fn=tn.current,An=fn.getContext("2d");if(!An)return;const xn=bn.getViewport({scale:2});fn.width=xn.width,fn.height=xn.height,An.clearRect(0,0,fn.width,fn.height);const Je={canvasContext:An,viewport:xn};bn.render(Je)})},[Me,qe,Ve]),reactExports.useEffect(()=>{const bn=an.current;if(!bn)return;const fn=An=>{if(An.preventDefault(),An.ctrlKey){const Je=-An.deltaY*.01;Ee(We=>{const Ze=We+Je;return Math.min(Math.max(Ze,.5),5)})}else Pe(xn=>({x:xn.x-An.deltaX,y:xn.y-An.deltaY}))};return bn.addEventListener("wheel",fn,{passive:!1}),()=>{bn.removeEventListener("wheel",fn)}},[]);const Ke=()=>Ee(bn=>Math.min(bn+.25,5)),sn=()=>Ee(bn=>Math.max(bn-.25,.5)),gn=bn=>Ee(Math.min(Math.max(bn,.5),5)),He=()=>{Ee(1),Pe({x:0,y:0})},en=bn=>{bn.stopPropagation(),Oe(fn=>Math.max(1,fn-1))},cn=bn=>{bn.stopPropagation(),Oe(fn=>Math.min($e,fn+1))},Sn=bn=>{const fn=parseInt(bn.target.value,10);fn>=1&&fn<=$e&&Oe(fn)},Tn=bn=>{Ce(!0),ke({x:bn.clientX-Ae.x,y:bn.clientY-Ae.y})},hn=bn=>{Re&&Pe({x:bn.clientX-Be.x,y:bn.clientY-Be.y})},pn=()=>Ce(!1);return jsxRuntimeExports.jsxs("div",{className:"w-full h-full relative group bg-slate-900 overflow-hidden flex flex-col rounded-lg border border-slate-700",children:[jsxRuntimeExports.jsxs("div",{className:"absolute top-4 left-4 right-4 z-20 flex justify-between items-start pointer-events-none",children:[jsxRuntimeExports.jsxs("div",{className:"bg-black/70 backdrop-blur-md rounded-lg p-1.5 flex items-center gap-1 shadow-lg border border-white/10 pointer-events-auto",children:[jsxRuntimeExports.jsx("button",{onClick:sn,className:"p-2 text-white hover:bg-white/20 rounded transition-colors",title:"Zoom Out",children:jsxRuntimeExports.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("circle",{cx:"11",cy:"11",r:"8"}),jsxRuntimeExports.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}),jsxRuntimeExports.jsx("line",{x1:"8",y1:"11",x2:"14",y2:"11"})]})}),jsxRuntimeExports.jsxs("div",{className:"px-2 py-1 text-white text-xs font-mono font-bold min-w-[60px] text-center bg-white/10 rounded",children:[Math.round(xe*100),"%"]}),jsxRuntimeExports.jsx("button",{onClick:Ke,className:"p-2 text-white hover:bg-white/20 rounded transition-colors",title:"Zoom In",children:jsxRuntimeExports.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("circle",{cx:"11",cy:"11",r:"8"}),jsxRuntimeExports.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}),jsxRuntimeExports.jsx("line",{x1:"11",y1:"8",x2:"11",y2:"14"}),jsxRuntimeExports.jsx("line",{x1:"8",y1:"11",x2:"14",y2:"11"})]})}),jsxRuntimeExports.jsx("div",{className:"w-px h-6 bg-white/20 mx-1"}),jsxRuntimeExports.jsx("button",{onClick:()=>gn(.5),className:"p-1.5 text-white hover:bg-white/20 rounded text-xs transition-colors",title:"50%",children:"50%"}),jsxRuntimeExports.jsx("button",{onClick:()=>gn(1),className:"p-1.5 text-white hover:bg-white/20 rounded text-xs transition-colors",title:"100%",children:"100%"}),jsxRuntimeExports.jsx("button",{onClick:()=>gn(2),className:"p-1.5 text-white hover:bg-white/20 rounded text-xs transition-colors",title:"200%",children:"200%"}),jsxRuntimeExports.jsx("div",{className:"w-px h-6 bg-white/20 mx-1"}),jsxRuntimeExports.jsx("button",{onClick:He,className:"p-2 text-white hover:bg-white/20 rounded transition-colors",title:"Reset",children:jsxRuntimeExports.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),jsxRuntimeExports.jsx("path",{d:"M3 3v5h5"})]})})]}),r&&jsxRuntimeExports.jsx("button",{onClick:r,className:"bg-blue-600 hover:bg-blue-500 text-white p-2.5 rounded-lg shadow-lg flex items-center justify-center transition-colors pointer-events-auto",title:"Seite/Datei hinzufgen",children:jsxRuntimeExports.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),jsxRuntimeExports.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]}),!qe&&$e>1&&jsxRuntimeExports.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 z-20",children:jsxRuntimeExports.jsxs("div",{className:"bg-black/70 backdrop-blur-md rounded-full px-4 py-2 flex items-center gap-3 text-white shadow-xl border border-white/10",children:[jsxRuntimeExports.jsx("button",{onClick:en,disabled:Ve<=1,className:"p-1 hover:text-blue-400 disabled:opacity-30 disabled:hover:text-white transition-colors",children:jsxRuntimeExports.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:jsxRuntimeExports.jsx("polyline",{points:"15 18 9 12 15 6"})})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("input",{type:"number",value:Ve,onChange:Sn,className:"w-10 bg-transparent text-center text-sm font-mono font-bold outline-none border-b border-white/30 focus:border-blue-400",min:1,max:$e}),jsxRuntimeExports.jsxs("span",{className:"text-xs text-white/60",children:["/ ",$e]})]}),jsxRuntimeExports.jsx("button",{onClick:cn,disabled:Ve>=$e,className:"p-1 hover:text-blue-400 disabled:opacity-30 disabled:hover:text-white transition-colors",children:jsxRuntimeExports.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:jsxRuntimeExports.jsx("polyline",{points:"9 18 15 12 9 6"})})})]})}),jsxRuntimeExports.jsx("div",{ref:an,className:`w-full h-full flex items-center justify-center overflow-hidden bg-slate-800 ${Re?"cursor-grabbing":"cursor-grab"}`,onMouseDown:Tn,onMouseMove:hn,onMouseUp:pn,onMouseLeave:pn,children:qe?jsxRuntimeExports.jsx("img",{src:t,alt:"Beleg Vorschau",className:"max-w-full max-h-full object-contain transition-transform duration-75 origin-center will-change-transform",style:{transform:`translate(${Ae.x}px, ${Ae.y}px) scale(${xe})`},draggable:!1}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Ue&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-3 text-white",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:"Lade PDF..."})]}),Qe&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-2 text-red-400 px-4 text-center",children:[jsxRuntimeExports.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"10"}),jsxRuntimeExports.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),jsxRuntimeExports.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:Qe})]}),jsxRuntimeExports.jsx("canvas",{ref:tn,className:`max-w-full max-h-full object-contain transition-transform duration-75 origin-center will-change-transform ${Ue||Qe?"hidden":""}`,style:{transform:`translate(${Ae.x}px, ${Ae.y}px) scale(${xe})`}})]})}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-4 right-4 z-20",children:jsxRuntimeExports.jsxs("a",{href:t,target:"_blank",rel:"noreferrer",className:"bg-black/50 hover:bg-black/70 text-white px-3 py-1.5 rounded-full text-xs font-medium backdrop-blur-sm transition-colors flex items-center gap-2",children:[jsxRuntimeExports.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),jsxRuntimeExports.jsx("polyline",{points:"15 3 21 3 21 9"}),jsxRuntimeExports.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]}),"ffnen"]})})]})},instanceOfAny=(t,e)=>e.some(r=>t instanceof r);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const transactionDoneMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(t){const e=new Promise((r,xe)=>{const Ee=()=>{t.removeEventListener("success",Ae),t.removeEventListener("error",Pe)},Ae=()=>{r(wrap(t.result)),Ee()},Pe=()=>{xe(t.error),Ee()};t.addEventListener("success",Ae),t.addEventListener("error",Pe)});return reverseTransformCache.set(e,t),e}function cacheDonePromiseForTransaction(t){if(transactionDoneMap.has(t))return;const e=new Promise((r,xe)=>{const Ee=()=>{t.removeEventListener("complete",Ae),t.removeEventListener("error",Pe),t.removeEventListener("abort",Pe)},Ae=()=>{r(),Ee()},Pe=()=>{xe(t.error||new DOMException("AbortError","AbortError")),Ee()};t.addEventListener("complete",Ae),t.addEventListener("error",Pe),t.addEventListener("abort",Pe)});transactionDoneMap.set(t,e)}let idbProxyTraps={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return transactionDoneMap.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return wrap(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function replaceTraps(t){idbProxyTraps=t(idbProxyTraps)}function wrapFunction(t){return getCursorAdvanceMethods().includes(t)?function(...e){return t.apply(unwrap(this),e),wrap(this.request)}:function(...e){return wrap(t.apply(unwrap(this),e))}}function transformCachableValue(t){return typeof t=="function"?wrapFunction(t):(t instanceof IDBTransaction&&cacheDonePromiseForTransaction(t),instanceOfAny(t,getIdbProxyableTypes())?new Proxy(t,idbProxyTraps):t)}function wrap(t){if(t instanceof IDBRequest)return promisifyRequest(t);if(transformCache.has(t))return transformCache.get(t);const e=transformCachableValue(t);return e!==t&&(transformCache.set(t,e),reverseTransformCache.set(e,t)),e}const unwrap=t=>reverseTransformCache.get(t);function openDB(t,e,{blocked:r,upgrade:xe,blocking:Ee,terminated:Ae}={}){const Pe=indexedDB.open(t,e),Re=wrap(Pe);return xe&&Pe.addEventListener("upgradeneeded",Ce=>{xe(wrap(Pe.result),Ce.oldVersion,Ce.newVersion,wrap(Pe.transaction),Ce)}),r&&Pe.addEventListener("blocked",Ce=>r(Ce.oldVersion,Ce.newVersion,Ce)),Re.then(Ce=>{Ae&&Ce.addEventListener("close",()=>Ae()),Ee&&Ce.addEventListener("versionchange",Be=>Ee(Be.oldVersion,Be.newVersion,Be))}).catch(()=>{}),Re}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(cachedMethods.get(e))return cachedMethods.get(e);const r=e.replace(/FromIndex$/,""),xe=e!==r,Ee=writeMethods.includes(r);if(!(r in(xe?IDBIndex:IDBObjectStore).prototype)||!(Ee||readMethods.includes(r)))return;const Ae=async function(Pe,...Re){const Ce=this.transaction(Pe,Ee?"readwrite":"readonly");let Be=Ce.store;return xe&&(Be=Be.index(Re.shift())),(await Promise.all([Be[r](...Re),Ee&&Ce.done]))[0]};return cachedMethods.set(e,Ae),Ae}replaceTraps(t=>({...t,get:(e,r,xe)=>getMethod(e,r)||t.get(e,r,xe),has:(e,r)=>!!getMethod(e,r)||t.has(e,r)}));const advanceMethodProps=["continue","continuePrimaryKey","advance"],methodMap={},advanceResults=new WeakMap,ittrProxiedCursorToOriginalProxy=new WeakMap,cursorIteratorTraps={get(t,e){if(!advanceMethodProps.includes(e))return t[e];let r=methodMap[e];return r||(r=methodMap[e]=function(...xe){advanceResults.set(this,ittrProxiedCursorToOriginalProxy.get(this)[e](...xe))}),r}};async function*iterate(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;const r=new Proxy(e,cursorIteratorTraps);for(ittrProxiedCursorToOriginalProxy.set(r,e),reverseTransformCache.set(r,unwrap(e));e;)yield r,e=await(advanceResults.get(r)||e.continue()),advanceResults.delete(r)}function isIteratorProp(t,e){return e===Symbol.asyncIterator&&instanceOfAny(t,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&instanceOfAny(t,[IDBIndex,IDBObjectStore])}replaceTraps(t=>({...t,get(e,r,xe){return isIteratorProp(e,r)?iterate:t.get(e,r,xe)},has(e,r){return isIteratorProp(e,r)||t.has(e,r)}}));const DB_NAME="zoe-solar-storage",DB_VERSION=1;let dbPromise=null;function getDB(){return dbPromise||(dbPromise=openDB(DB_NAME,DB_VERSION,{upgrade(t){const e=t.createObjectStore("belege",{keyPath:"id"});e.createIndex("by-date","beleg_datum"),e.createIndex("by-status","status"),t.createObjectStore("einstellungen",{keyPath:"id"}),t.createObjectStore("lieferantenRegeln",{keyPath:"id"})}})),dbPromise}async function getAllDocuments$1(){return(await getDB()).getAll("belege")}async function saveDocument$1(t){await(await getDB()).put("belege",t)}async function deleteDocument$1(t){await(await getDB()).delete("belege",t)}async function getSettings$1(){const e=await(await getDB()).getAll("einstellungen"),r={};for(const xe of e)r[xe.schluessel]=xe.wert;return r}async function saveSettings$1(t){const r=(await getDB()).transaction("einstellungen","readwrite"),xe=r.objectStore("einstellungen");for(const[Ee,Ae]of Object.entries(t))await xe.put({id:Ee,schluessel:Ee,wert:Ae,typ:typeof Ae,created_at:new Date().toISOString(),updated_at:null});await r.done}async function getVendorRule(t){return(await(await getDB()).getAll("lieferantenRegeln")).find(xe=>xe.lieferant_name_pattern.toLowerCase()===t.toLowerCase()&&xe.aktiv)}async function saveVendorRule$1(t,e,r){const xe=await getDB(),Ae={id:`${t}-${Date.now()}`,lieferant_name_pattern:t,standard_konto:e,standard_steuerkategorie:r,prioritaet:1,aktiv:!0,created_at:new Date().toISOString()};return await xe.put("lieferantenRegeln",Ae),Ae}const isPresent=t=>t==null?!1:typeof t=="string"?t.trim().length>0:typeof t=="number"?Number.isFinite(t):!0,getErrorNextSteps=t=>{const e=(t||"").toLowerCase(),r=[];return r.push("Retry OCR (Button oben rechts)."),/gemini_api_key|gemini|api key|apikey|unauthorized|forbidden|\b401\b|\b403\b/.test(e)&&r.push("API-Keys prfen/setzen: GEMINI_API_KEY (Pflicht), SILICONFLOW_API_KEY (Fallback)."),/\b429\b|quota|rate limit|too many requests/.test(e)&&r.push("Quota/Rate-Limit: spter erneut versuchen oder Fallback nutzen."),/pdf|page|pages|size|zu gro[s]|too large|max/.test(e)&&r.push("PDF verkleinern/splitten (weniger Seiten/Dateigre) und erneut hochladen."),/failed to fetch|network|timeout|econn|offline/.test(e)&&r.push("Netzwerk/Firewall/Adblock prfen (Requests zu KI-Providern)."),r.push("Fehlende Felder manuell ergnzen (Datum/Lieferant/Betrge) und erneut exportieren."),r},INPUT_CLASS$1="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2 text-sm text-slate-900 shadow-sm focus:bg-white focus:border-blue-500 focus:ring-2 focus:ring-blue-100 outline-none placeholder-slate-400 transition-all",LABEL_CLASS$1="block text-xs font-semibold text-slate-500 mb-1.5 uppercase tracking-wide",DocumentDetail=({document:t,allDocuments:e,onSave:r,onDelete:xe,onRetryOCR:Ee,onSelectDocument:Ae,onClose:Pe,onMerge:Re})=>{var Pn,Zn;const[Ce,Be]=reactExports.useState(t.data||{}),[ke,Me]=reactExports.useState(null),[Fe,Ve]=reactExports.useState("data"),[Oe,$e]=reactExports.useState(0),[Ge,Ue]=reactExports.useState(null),[Ye,Qe]=reactExports.useState(""),[rn,tn]=reactExports.useState(!1),[an,qe]=reactExports.useState(""),Ke=reactExports.useRef(null),sn=reactExports.useRef(null),gn=reactExports.useRef(null),He=reactExports.useRef(null),en=reactExports.useRef(Ce);reactExports.useEffect(()=>{en.current=Ce},[Ce]),reactExports.useEffect(()=>{getSettings$1().then(Me)},[]),reactExports.useEffect(()=>{Be(t.data||{}),$e(0)},[t.id]),reactExports.useEffect(()=>{let mn=t.previewUrl||"",Cn=t.fileType;const jn=t.attachments||[];Oe>0&&jn[Oe-1]&&(mn=jn[Oe-1].url,Cn=jn[Oe-1].type);let Rn=!0,Dn=null;return mn.startsWith("data:")?fetch(mn).then(Jn=>Jn.blob()).then(Jn=>{Rn&&(Dn=URL.createObjectURL(Jn),Ue(Dn),Qe(Cn))}):(Ue(mn),Qe(Cn)),()=>{Rn=!1,Dn&&URL.revokeObjectURL(Dn)}},[t,Oe]);const cn=(mn,Cn)=>{Be(jn=>({...jn,[mn]:Cn}))},Sn=(mn,Cn)=>{Be(jn=>({...jn,[mn]:Cn}))},Tn=(mn,Cn,jn)=>{const Rn=[...Ce.lineItems||[]];Rn[mn]={...Rn[mn],[Cn]:jn},Be(Dn=>({...Dn,lineItems:Rn}))},hn=()=>{Be(mn=>({...mn,lineItems:[...mn.lineItems||[],{description:"",amount:0}]}))},pn=mn=>{const Cn=[...Ce.lineItems||[]];Cn.splice(mn,1),Be(jn=>({...jn,lineItems:Cn}))},bn=()=>{r({...t,data:Ce})},fn=()=>{r({...t,data:en.current})},An=mn=>{Re(mn.id,t.id),tn(!1),qe("")},xn=()=>{var mn;(mn=Ke.current)==null||mn.click()},Je=mn=>{if(mn.target.files&&mn.target.files[0]){const Cn=mn.target.files[0],jn=new FileReader;jn.onload=Rn=>{var qn;const Dn=(qn=Rn.target)==null?void 0:qn.result,Jn={id:crypto.randomUUID(),url:Dn,type:Cn.type,name:Cn.name},Qn={...t,attachments:[...t.attachments||[],Jn]};r(Qn)},jn.readAsDataURL(Cn)}},We=(ke==null?void 0:ke.accountDefinitions)||[],Ze=(ke==null?void 0:ke.taxDefinitions)||[],un=We.find(mn=>mn.id===Ce.kontierungskonto),yn=un?Ze.filter(mn=>un.steuerkategorien.includes(mn.value)):Ze,_n=e.filter(mn=>mn.id!==t.id).filter(mn=>mn.status!==DocumentStatus.DUPLICATE&&mn.status!==DocumentStatus.ERROR&&mn.status!==DocumentStatus.REVIEW_NEEDED).filter(mn=>{var jn,Rn,Dn,Jn;const Cn=an.toLowerCase();return mn.fileName.toLowerCase().includes(Cn)||((Rn=(jn=mn.data)==null?void 0:jn.lieferantName)==null?void 0:Rn.toLowerCase().includes(Cn))||((Jn=(Dn=mn.data)==null?void 0:Dn.bruttoBetrag)==null?void 0:Jn.toString().includes(Cn))||mn.uploadDate.includes(Cn)}).slice(0,5),wn=1+(((Pn=t.attachments)==null?void 0:Pn.length)||0),kn=t.status===DocumentStatus.DUPLICATE,$n=t.status===DocumentStatus.ERROR,Ln=t.status===DocumentStatus.REVIEW_NEEDED,Gn=(t.error||((Zn=t.data)==null?void 0:Zn.ocr_rationale)||"").trim(),Yn=t.duplicateOfId?e.find(mn=>mn.id===t.duplicateOfId):void 0,ii=reactExports.useMemo(()=>$n||Ln?"Shortcuts: Esc schlieen  Strg+S speichern  Alt+/ nchster/vorheriger Beleg":"",[$n,Ln]),Wn=reactExports.useMemo(()=>$n?getErrorNextSteps(Gn):[],[$n,Gn]);return reactExports.useEffect(()=>{var Rn;if(!ke||!(Ln||$n))return;const mn=((Rn=ke.ocrConfig)==null?void 0:Rn.required_fields)||[],Cn=mn.length>0?mn:["belegDatum","lieferantName","bruttoBetrag"],jn=Dn=>Dn==="belegDatum"&&!isPresent(Ce.belegDatum)?(Ve("data"),requestAnimationFrame(()=>{var Jn;return(Jn=sn.current)==null?void 0:Jn.focus()}),!0):Dn==="lieferantName"&&!isPresent(Ce.lieferantName)?(Ve("data"),requestAnimationFrame(()=>{var Jn;return(Jn=gn.current)==null?void 0:Jn.focus()}),!0):Dn==="bruttoBetrag"&&!isPresent(Ce.bruttoBetrag)?(Ve("data"),requestAnimationFrame(()=>{var Jn;return(Jn=He.current)==null?void 0:Jn.focus()}),!0):!1;for(const Dn of Cn)if(jn(Dn))return;Ve("data"),requestAnimationFrame(()=>{var Dn;return(Dn=gn.current)==null?void 0:Dn.focus()})},[t.id,ke,Ln,$n]),reactExports.useEffect(()=>{const mn=Cn=>{if(Cn.key==="Escape"){Cn.preventDefault(),Pe();return}const jn=Cn.key.toLowerCase();if((Cn.ctrlKey||Cn.metaKey)&&jn==="s"){Cn.preventDefault(),fn();return}if(Cn.altKey&&(Cn.key==="ArrowRight"||Cn.key==="ArrowLeft")){Cn.preventDefault();const Rn=e.findIndex(Qn=>Qn.id===t.id);if(Rn<0)return;const Dn=Cn.key==="ArrowRight"?Rn+1:Rn-1,Jn=e[Dn];Jn&&Ae(Jn);return}};return window.addEventListener("keydown",mn),()=>window.removeEventListener("keydown",mn)},[e,t.id,Pe,Ae]),jsxRuntimeExports.jsxs("div",{className:"h-full flex flex-col bg-white",children:[jsxRuntimeExports.jsxs("div",{className:"h-16 px-4 md:px-6 flex items-center justify-between flex-none relative z-30 border-b border-slate-100 bg-white/80 backdrop-blur-md",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("button",{onClick:Pe,className:"p-2 -ml-2 hover:bg-slate-100 rounded-full text-slate-500 transition-colors md:hidden",children:jsxRuntimeExports.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("path",{d:"M19 12H5"}),jsxRuntimeExports.jsx("path",{d:"M12 19l-7-7 7-7"})]})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:`font-bold text-base md:text-lg flex items-center gap-2 ${kn?"text-red-600":"text-slate-800"}`,children:[kn&&jsxRuntimeExports.jsx("span",{className:"inline-block w-2 h-2 rounded-full bg-red-500 animate-pulse"}),kn?"Duplikat":"Beleg Details"]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-slate-400 font-mono hidden md:block",children:t.id.substring(0,8)})]})]}),jsxRuntimeExports.jsx("div",{className:"hidden md:block relative",children:!kn&&(rn?jsxRuntimeExports.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[300px]",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{autoFocus:!0,value:an,onChange:mn=>qe(mn.target.value),onBlur:()=>setTimeout(()=>tn(!1),200),placeholder:"Beleg suchen...",className:"w-full bg-white border-2 border-blue-500 rounded-xl py-2 pl-9 pr-3 text-sm shadow-xl outline-none"}),jsxRuntimeExports.jsxs("svg",{className:"absolute left-3 top-3 text-blue-500 w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[jsxRuntimeExports.jsx("circle",{cx:"11",cy:"11",r:"8"}),jsxRuntimeExports.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),an.length>0&&jsxRuntimeExports.jsx("div",{className:"absolute top-full left-0 w-full bg-white border border-slate-100 shadow-2xl rounded-b-xl mt-1 overflow-hidden max-h-64 overflow-y-auto",children:_n.map(mn=>{var Cn,jn,Rn,Dn;return jsxRuntimeExports.jsxs("div",{onMouseDown:()=>An(mn),className:"px-4 py-3 hover:bg-blue-50 cursor-pointer border-b border-slate-50 last:border-0",children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-slate-800 text-sm truncate",children:((Cn=mn.data)==null?void 0:Cn.lieferantName)||mn.fileName}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mt-0.5",children:[jsxRuntimeExports.jsx("span",{children:(jn=mn.data)==null?void 0:jn.belegDatum}),jsxRuntimeExports.jsxs("span",{className:"font-mono",children:[(Dn=(Rn=mn.data)==null?void 0:Rn.bruttoBetrag)==null?void 0:Dn.toFixed(2),""]})]})]},mn.id)})})]})}):jsxRuntimeExports.jsxs("button",{onClick:()=>tn(!0),className:"flex items-center gap-2 text-xs font-medium text-slate-500 hover:text-blue-600 hover:bg-blue-50 px-4 py-2 rounded-full border border-slate-200 hover:border-blue-200 transition-all",children:[jsxRuntimeExports.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),jsxRuntimeExports.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),jsxRuntimeExports.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),jsxRuntimeExports.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),jsxRuntimeExports.jsx("span",{children:"Merge"})]}))}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Ee(t),disabled:kn,className:"hidden md:inline-flex px-3 py-1.5 bg-white border border-slate-200 rounded-lg text-xs font-semibold text-slate-600 hover:bg-slate-50 shadow-sm transition-colors disabled:opacity-40 disabled:cursor-not-allowed",title:kn?"Retry ist fr Duplikate deaktiviert":"",children:"Retry OCR"}),jsxRuntimeExports.jsxs("button",{onClick:()=>xe(t.id),className:"p-2 md:px-3 md:py-1.5 bg-white border border-red-100 text-red-600 rounded-lg text-xs font-semibold hover:bg-red-50 hover:border-red-200 shadow-sm transition-colors",children:[jsxRuntimeExports.jsx("span",{className:"hidden md:inline",children:"Lschen"}),jsxRuntimeExports.jsx("span",{className:"md:hidden",children:jsxRuntimeExports.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("polyline",{points:"3 6 5 6 21 6"}),jsxRuntimeExports.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})]})]}),jsxRuntimeExports.jsx("div",{className:"md:hidden px-4 py-2 bg-white border-b border-slate-100 sticky top-0 z-20",children:jsxRuntimeExports.jsxs("div",{className:"flex bg-slate-100/80 p-1 rounded-xl",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Ve("data"),className:`flex-1 py-2 rounded-lg text-sm font-semibold transition-all shadow-sm ${Fe==="data"?"bg-white text-slate-900":"text-slate-500 hover:text-slate-700 shadow-none"}`,children:"Daten"}),jsxRuntimeExports.jsx("button",{onClick:()=>Ve("preview"),className:`flex-1 py-2 rounded-lg text-sm font-semibold transition-all shadow-sm ${Fe==="preview"?"bg-white text-slate-900":"text-slate-500 hover:text-slate-700 shadow-none"}`,children:"Beleg"})]})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex overflow-hidden relative",children:[jsxRuntimeExports.jsxs("div",{className:`
            absolute inset-0 md:static md:w-1/2 bg-slate-100/50 md:border-r border-slate-200 p-0 md:p-6 flex flex-col items-center gap-4 transition-all z-10
            ${Fe==="preview"?"translate-x-0":"-translate-x-full md:translate-x-0"}
        `,children:[jsxRuntimeExports.jsxs("div",{className:"bg-white shadow-2xl md:shadow-sm border border-slate-200/60 rounded-none md:rounded-2xl overflow-hidden flex-1 w-full relative",children:[Ge?jsxRuntimeExports.jsx(PdfViewer,{url:Ge,type:Ye,onAddPage:xn}):jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-slate-400",children:"Lade Vorschau..."}),jsxRuntimeExports.jsx("input",{type:"file",ref:Ke,className:"hidden",accept:"image/*,application/pdf",onChange:Je})]}),wn>1&&jsxRuntimeExports.jsxs("div",{className:"absolute bottom-6 md:static bg-white/90 backdrop-blur border border-slate-200 rounded-full px-4 py-2 flex items-center gap-4 shadow-xl md:shadow-sm",children:[jsxRuntimeExports.jsx("button",{disabled:Oe===0,onClick:()=>$e(mn=>Math.max(0,mn-1)),className:"p-1 text-slate-500 hover:text-blue-600 disabled:opacity-30",children:jsxRuntimeExports.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:jsxRuntimeExports.jsx("polyline",{points:"15 18 9 12 15 6"})})}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-mono font-bold text-slate-700",children:[Oe+1," / ",wn]}),jsxRuntimeExports.jsx("button",{disabled:Oe===wn-1,onClick:()=>$e(mn=>Math.min(wn-1,mn+1)),className:"p-1 text-slate-500 hover:text-blue-600 disabled:opacity-30",children:jsxRuntimeExports.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:jsxRuntimeExports.jsx("polyline",{points:"9 18 15 12 9 6"})})})]})]}),jsxRuntimeExports.jsx("div",{className:`
            absolute inset-0 md:static md:w-1/2 bg-white overflow-y-auto transition-all z-0
            ${Fe==="data"?"translate-x-0":"translate-x-full md:translate-x-0"}
        `,children:jsxRuntimeExports.jsxs("div",{className:"p-5 md:p-8 max-w-lg mx-auto space-y-8 pb-32 md:pb-8",children:[kn&&jsxRuntimeExports.jsxs("div",{className:"bg-red-50 border border-red-100 rounded-xl p-4 text-sm text-red-700 flex gap-3 items-start",children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 flex-none mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{className:"block font-semibold",children:"Duplikat erkannt"}),jsxRuntimeExports.jsx("p",{className:"opacity-90 mt-1",children:t.duplicateReason}),jsxRuntimeExports.jsx("p",{className:"opacity-90 mt-2",children:"Nchste Schritte: Original prfen und dieses Duplikat lschen."}),Yn&&jsxRuntimeExports.jsx("button",{onClick:()=>Ae(Yn),className:"mt-3 inline-flex items-center gap-2 px-3 py-1.5 bg-white border border-red-200 rounded-lg text-xs font-semibold text-red-700 hover:bg-red-100/50 transition-colors",children:"Original ffnen"})]})]}),($n||Ln)&&jsxRuntimeExports.jsxs("div",{className:`${$n?"bg-rose-50 border-rose-100 text-rose-700":"bg-amber-50 border-amber-100 text-amber-800"} border rounded-xl p-4 text-sm flex gap-3 items-start`,title:Gn,children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 flex-none mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{className:"block font-semibold",children:$n?"OCR Fehler":"OCR prfen"}),jsxRuntimeExports.jsx("p",{className:"opacity-90 mt-1",children:Gn||"Analyse war nicht erfolgreich. Bitte Werte manuell prfen/ergnzen."}),$n?jsxRuntimeExports.jsxs("div",{className:"opacity-95 mt-2",children:[jsxRuntimeExports.jsx("div",{className:"font-semibold text-xs uppercase tracking-wide mb-1",children:"Nchste Schritte"}),jsxRuntimeExports.jsx("ul",{className:"list-disc pl-5 space-y-1",children:Wn.map((mn,Cn)=>jsxRuntimeExports.jsx("li",{children:mn},Cn))})]}):jsxRuntimeExports.jsx("p",{className:"opacity-90 mt-2",children:"Nchste Schritte: Werte prfen/ergnzen, dann erneut exportieren."}),ii&&jsxRuntimeExports.jsx("p",{className:"opacity-80 mt-3 text-xs",children:ii})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-white border border-slate-100 rounded-2xl p-5 shadow-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-3",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"KI Konfidenz"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:`h-2 w-2 rounded-full ${Ce.ocr_score&&Ce.ocr_score>8?"bg-green-500":"bg-yellow-500"}`}),jsxRuntimeExports.jsxs("span",{className:"text-xs font-bold text-slate-700",children:[Ce.ocr_score||0,"/10"]})]})]}),Ce.ruleApplied&&jsxRuntimeExports.jsxs("div",{className:"text-xs text-blue-600 font-medium flex items-center gap-1.5 mb-2 bg-blue-50 w-fit px-2 py-1 rounded-md",children:[jsxRuntimeExports.jsx("svg",{width:"12",height:"12",fill:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),"Regel angewendet"]}),Ce.ocr_rationale&&jsxRuntimeExports.jsx("div",{className:"text-xs text-slate-500 leading-relaxed",children:Ce.ocr_rationale})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("h4",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"w-1 h-6 bg-blue-600 rounded-full"}),"Buchung"]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS$1,children:"Konto"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs("select",{value:Ce.kontierungskonto||"",onChange:mn=>{const Cn=mn.target.value,jn=We.find(Dn=>Dn.id===Cn),Rn={kontierungskonto:Cn,ruleApplied:!1,kontierungBegruendung:jn?`Manuell gewhlt: "${jn.name}".`:"Manuell gewhlt."};jn&&jn.steuerkategorien.length>0&&(!Ce.steuerkategorie||!jn.steuerkategorien.includes(Ce.steuerkategorie))&&(Rn.steuerkategorie=jn.steuerkategorien[0]),jn&&jn.skr03&&(Rn.sollKonto=jn.skr03),Be(Dn=>({...Dn,...Rn}))},className:`${INPUT_CLASS$1} appearance-none font-medium`,children:[jsxRuntimeExports.jsx("option",{value:"",children:"Konto whlen..."}),We.map(mn=>jsxRuntimeExports.jsxs("option",{value:mn.id,children:[mn.name," (",mn.skr03,")"]},mn.id))]}),jsxRuntimeExports.jsx("svg",{className:"absolute right-3 top-3 w-4 h-4 text-slate-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),Ce.kontierungBegruendung&&jsxRuntimeExports.jsxs("div",{className:"mt-2 text-xs text-slate-500 leading-relaxed",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-slate-600",children:"Warum dieses Konto?"})," ",Ce.kontierungBegruendung]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS$1,children:"Soll (Aufwand)"}),jsxRuntimeExports.jsx("input",{value:Ce.sollKonto||"",onChange:mn=>cn("sollKonto",mn.target.value),onBlur:bn,className:`${INPUT_CLASS$1} font-mono text-slate-600 bg-slate-100`,placeholder:"0000"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS$1,children:"Haben (Kreditor)"}),jsxRuntimeExports.jsx("input",{value:Ce.habenKonto||"",onChange:mn=>cn("habenKonto",mn.target.value),onBlur:bn,className:`${INPUT_CLASS$1} font-mono text-slate-600 bg-slate-100`,placeholder:"70000"})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS$1,children:"Datum"}),jsxRuntimeExports.jsx("input",{type:"date",ref:sn,value:Ce.belegDatum||"",onChange:mn=>cn("belegDatum",mn.target.value),onBlur:bn,className:INPUT_CLASS$1})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS$1,children:"Interne Nr."}),jsxRuntimeExports.jsx("input",{value:Ce.eigeneBelegNummer||"",onChange:mn=>cn("eigeneBelegNummer",mn.target.value),onBlur:bn,className:`${INPUT_CLASS$1} font-mono text-blue-600 font-bold bg-blue-50/50 border-blue-100`})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("h4",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"w-1 h-6 bg-indigo-600 rounded-full"}),"Details"]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS$1,children:"Original Beleg-Nr."}),jsxRuntimeExports.jsx("input",{value:Ce.belegNummerLieferant||"",onChange:mn=>cn("belegNummerLieferant",mn.target.value),onBlur:bn,className:INPUT_CLASS$1,placeholder:"z.B. RE-2023-999"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-2",children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS$1,children:"Lieferant"}),jsxRuntimeExports.jsx("input",{ref:gn,value:Ce.lieferantName||"",onChange:mn=>cn("lieferantName",mn.target.value),onBlur:bn,className:`${INPUT_CLASS$1} font-bold text-slate-800`})]}),jsxRuntimeExports.jsxs("div",{className:"md:col-span-2",children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS$1,children:"Adresse"}),jsxRuntimeExports.jsx("input",{value:Ce.lieferantAdresse||"",onChange:mn=>cn("lieferantAdresse",mn.target.value),onBlur:bn,className:INPUT_CLASS$1,placeholder:"Strae, PLZ, Ort"})]}),jsxRuntimeExports.jsxs("div",{className:"md:col-span-2",children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS$1,children:"Steuernummer"}),jsxRuntimeExports.jsx("input",{value:Ce.steuernummer||"",onChange:mn=>cn("steuernummer",mn.target.value),onBlur:bn,className:`${INPUT_CLASS$1} font-mono`,placeholder:"z.B. DE123456789"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("h4",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"w-1 h-6 bg-cyan-600 rounded-full"}),"Zahlung"]}),jsxRuntimeExports.jsx("div",{className:"bg-slate-50 rounded-2xl p-4 border border-slate-200",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS$1,children:"Zahlungsmethode"}),jsxRuntimeExports.jsx("input",{value:Ce.zahlungsmethode||"",onChange:mn=>cn("zahlungsmethode",mn.target.value),onBlur:bn,className:INPUT_CLASS$1,placeholder:"z.B. berweisung, Karte, Lastschrift"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS$1,children:"Zahlungsdatum"}),jsxRuntimeExports.jsx("input",{type:"date",value:Ce.zahlungsDatum||"",onChange:mn=>cn("zahlungsDatum",mn.target.value),onBlur:bn,className:INPUT_CLASS$1})]}),jsxRuntimeExports.jsxs("div",{className:"md:col-span-2",children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS$1,children:"Zahlungsstatus"}),jsxRuntimeExports.jsxs("select",{value:Ce.zahlungsStatus||"",onChange:mn=>cn("zahlungsStatus",mn.target.value),onBlur:bn,className:`${INPUT_CLASS$1} appearance-none`,children:[jsxRuntimeExports.jsx("option",{value:"",children:"(leer)"}),jsxRuntimeExports.jsx("option",{value:"offen",children:"offen"}),jsxRuntimeExports.jsx("option",{value:"bezahlt",children:"bezahlt"}),jsxRuntimeExports.jsx("option",{value:"teilbezahlt",children:"teilbezahlt"}),jsxRuntimeExports.jsx("option",{value:"storniert",children:"storniert"})]})]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("h4",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"w-1 h-6 bg-slate-500 rounded-full"}),"Organisation"]}),jsxRuntimeExports.jsx("div",{className:"bg-slate-50 rounded-2xl p-4 border border-slate-200",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS$1,children:"Aufbewahrungsort"}),jsxRuntimeExports.jsx("input",{value:Ce.aufbewahrungsOrt||"",onChange:mn=>cn("aufbewahrungsOrt",mn.target.value),onBlur:bn,className:INPUT_CLASS$1,placeholder:"z.B. Drive/Ordner/Schrank"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS$1,children:"Rechnungsempfnger"}),jsxRuntimeExports.jsx("input",{value:Ce.rechnungsEmpfaenger||"",onChange:mn=>cn("rechnungsEmpfaenger",mn.target.value),onBlur:bn,className:INPUT_CLASS$1,placeholder:"z.B. ZOE Solar GmbH"})]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("h4",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"w-1 h-6 bg-amber-500 rounded-full"}),"Flags"]}),jsxRuntimeExports.jsx("div",{className:"bg-slate-50 rounded-2xl p-4 border border-slate-200",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-700",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:!!Ce.kleinbetrag,onChange:mn=>Sn("kleinbetrag",mn.target.checked),onBlur:bn,className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),"Kleinbetrag"]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-700",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:!!Ce.vorsteuerabzug,onChange:mn=>Sn("vorsteuerabzug",mn.target.checked),onBlur:bn,className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),"Vorsteuerabzug"]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-700",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:!!Ce.reverseCharge,onChange:mn=>Sn("reverseCharge",mn.target.checked),onBlur:bn,className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),"Reverse Charge"]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-700",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:!!Ce.privatanteil,onChange:mn=>Sn("privatanteil",mn.target.checked),onBlur:bn,className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),"Privatanteil"]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("h4",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"w-1 h-6 bg-purple-500 rounded-full"}),"Positionen"]}),jsxRuntimeExports.jsx("button",{onClick:hn,className:"text-xs font-bold text-blue-600 bg-blue-50 hover:bg-blue-100 px-3 py-1.5 rounded-lg transition-colors",children:"+ Hinzufgen"})]}),jsxRuntimeExports.jsx("div",{className:"border border-slate-200 rounded-xl overflow-hidden",children:jsxRuntimeExports.jsxs("table",{className:"w-full text-left text-sm",children:[jsxRuntimeExports.jsx("thead",{className:"bg-slate-50 text-slate-500 font-semibold border-b border-slate-200",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-4 py-2 w-3/4",children:"Beschreibung"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-2 w-1/4 text-right",children:"Betrag"}),jsxRuntimeExports.jsx("th",{className:"px-2 py-2 w-10"})]})}),jsxRuntimeExports.jsxs("tbody",{className:"divide-y divide-slate-100",children:[(Ce.lineItems||[]).map((mn,Cn)=>jsxRuntimeExports.jsxs("tr",{className:"group hover:bg-slate-50",children:[jsxRuntimeExports.jsx("td",{className:"p-2",children:jsxRuntimeExports.jsx("input",{value:mn.description||"",onChange:jn=>Tn(Cn,"description",jn.target.value),onBlur:bn,className:"w-full bg-transparent outline-none text-slate-700",placeholder:"Position..."})}),jsxRuntimeExports.jsx("td",{className:"p-2",children:jsxRuntimeExports.jsx("input",{type:"number",value:mn.amount||"",onChange:jn=>Tn(Cn,"amount",parseFloat(jn.target.value)),onBlur:bn,className:"w-full bg-transparent outline-none text-slate-900 text-right font-mono",placeholder:"0.00"})}),jsxRuntimeExports.jsx("td",{className:"p-2 text-center",children:jsxRuntimeExports.jsx("button",{onClick:()=>pn(Cn),className:"text-slate-300 hover:text-red-500 transition-colors p-1",children:jsxRuntimeExports.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),jsxRuntimeExports.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})})]},Cn)),(!Ce.lineItems||Ce.lineItems.length===0)&&jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("td",{colSpan:3,className:"px-4 py-4 text-center text-slate-400 text-xs italic",children:"Keine Positionen erkannt."})})]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("h4",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"w-1 h-6 bg-emerald-500 rounded-full"}),"Betrge"]}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-50 rounded-2xl p-4 border border-slate-200",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS$1,children:"Netto"}),jsxRuntimeExports.jsx("input",{type:"number",value:Ce.nettoBetrag??"",onChange:mn=>cn("nettoBetrag",mn.target.value===""?0:parseFloat(mn.target.value)),onBlur:bn,className:INPUT_CLASS$1})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS$1,children:"Steuerkat."}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs("select",{value:Ce.steuerkategorie||"",onChange:mn=>cn("steuerkategorie",mn.target.value),className:`${INPUT_CLASS$1} appearance-none pr-8 text-xs`,children:[jsxRuntimeExports.jsx("option",{value:"",children:"Whlen"}),yn.map(mn=>jsxRuntimeExports.jsx("option",{value:mn.value,children:mn.label},mn.value))]}),jsxRuntimeExports.jsx("svg",{className:"absolute right-2 top-2.5 w-4 h-4 text-slate-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS$1,children:"MwSt 19%"}),jsxRuntimeExports.jsx("input",{type:"number",value:Ce.mwstBetrag19||0,onChange:mn=>cn("mwstBetrag19",parseFloat(mn.target.value)),onBlur:bn,className:`${INPUT_CLASS$1} text-slate-500`})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS$1,children:"MwSt 7%"}),jsxRuntimeExports.jsx("input",{type:"number",value:Ce.mwstBetrag7||0,onChange:mn=>cn("mwstBetrag7",parseFloat(mn.target.value)),onBlur:bn,className:`${INPUT_CLASS$1} text-slate-500`})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS$1,children:"MwSt Satz 0"}),jsxRuntimeExports.jsx("input",{type:"number",value:Ce.mwstSatz0??"",onChange:mn=>cn("mwstSatz0",mn.target.value===""?0:parseFloat(mn.target.value)),onBlur:bn,className:`${INPUT_CLASS$1} text-slate-600`})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS$1,children:"MwSt Satz 7"}),jsxRuntimeExports.jsx("input",{type:"number",value:Ce.mwstSatz7??"",onChange:mn=>cn("mwstSatz7",mn.target.value===""?0:parseFloat(mn.target.value)),onBlur:bn,className:`${INPUT_CLASS$1} text-slate-600`})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS$1,children:"MwSt Satz 19"}),jsxRuntimeExports.jsx("input",{type:"number",value:Ce.mwstSatz19??"",onChange:mn=>cn("mwstSatz19",mn.target.value===""?0:parseFloat(mn.target.value)),onBlur:bn,className:`${INPUT_CLASS$1} text-slate-600`})]})]}),jsxRuntimeExports.jsxs("div",{className:"pt-4 border-t border-slate-200",children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-2",children:"Gesamtbetrag (Brutto)"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:"number",ref:He,value:Ce.bruttoBetrag??"",onChange:mn=>cn("bruttoBetrag",mn.target.value===""?0:parseFloat(mn.target.value)),onBlur:bn,className:"w-full bg-white border-none rounded-xl py-3 pl-8 text-3xl font-bold text-slate-900 outline-none shadow-inner ring-1 ring-slate-200 focus:ring-blue-500 transition-all"}),jsxRuntimeExports.jsx("span",{className:"absolute left-3 top-4 text-xl text-slate-400",children:""})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS$1,children:"Bemerkung"}),jsxRuntimeExports.jsx("textarea",{value:Ce.beschreibung||"",onChange:mn=>cn("beschreibung",mn.target.value),onBlur:bn,className:`${INPUT_CLASS$1} min-h-[100px] resize-none leading-relaxed`,placeholder:"Zustzliche Infos..."})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("h4",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"w-1 h-6 bg-slate-300 rounded-full"}),"OCR / Text"]}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-50 rounded-2xl p-4 border border-slate-200 space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS$1,children:"OCR Score"}),jsxRuntimeExports.jsx("input",{value:String(Ce.ocr_score??""),readOnly:!0,className:`${INPUT_CLASS$1} font-mono bg-slate-100 text-slate-600`})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS$1,children:"Dokumenttyp"}),jsxRuntimeExports.jsx("input",{value:Ce.documentType||"",onChange:mn=>cn("documentType",mn.target.value),onBlur:bn,className:INPUT_CLASS$1,placeholder:"z.B. Rechnung, Quittung"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS$1,children:"OCR Rationale"}),jsxRuntimeExports.jsx("textarea",{value:Ce.ocr_rationale||"",onChange:mn=>cn("ocr_rationale",mn.target.value),onBlur:bn,className:`${INPUT_CLASS$1} min-h-[80px] resize-none`,placeholder:"(optional)"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS$1,children:"Text Content"}),jsxRuntimeExports.jsx("textarea",{value:Ce.textContent||"",onChange:mn=>cn("textContent",mn.target.value),onBlur:bn,className:`${INPUT_CLASS$1} min-h-[80px] resize-none`,placeholder:"(optional)"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("h4",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"w-1 h-6 bg-slate-200 rounded-full"}),"Legacy / Technik"]}),jsxRuntimeExports.jsx("div",{className:"bg-slate-50 rounded-2xl p-4 border border-slate-200",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS$1,children:"Kontogruppe"}),jsxRuntimeExports.jsx("input",{value:Ce.kontogruppe||"",onChange:mn=>cn("kontogruppe",mn.target.value),onBlur:bn,className:`${INPUT_CLASS$1} font-mono`})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS$1,children:"Konto SKR03 (legacy)"}),jsxRuntimeExports.jsx("input",{value:Ce.konto_skr03||"",onChange:mn=>cn("konto_skr03",mn.target.value),onBlur:bn,className:`${INPUT_CLASS$1} font-mono`})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS$1,children:"USt Typ (legacy)"}),jsxRuntimeExports.jsx("input",{value:Ce.ust_typ||"",onChange:mn=>cn("ust_typ",mn.target.value),onBlur:bn,className:INPUT_CLASS$1})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS$1,children:"SteuerKategorie (legacy)"}),jsxRuntimeExports.jsx("input",{value:Ce.steuerKategorie||"",onChange:mn=>cn("steuerKategorie",mn.target.value),onBlur:bn,className:INPUT_CLASS$1})]})]})})]})]})})]})]})},INPUT_CLASS="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2 text-sm text-slate-900 shadow-sm focus:bg-white focus:border-blue-500 focus:ring-2 focus:ring-blue-100 outline-none placeholder-slate-400 transition-all",LABEL_CLASS="block text-xs font-semibold text-slate-500 mb-1.5 uppercase tracking-wide",DuplicateCompareModal=({original:t,duplicate:e,allDocuments:r,onClose:xe,onDelete:Ee,onSave:Ae,onMerge:Pe,onSelectDocument:Re,onIgnoreDuplicate:Ce})=>{const[Be,ke]=reactExports.useState(t.data||{}),[Me,Fe]=reactExports.useState(e.data||{}),[Ve,Oe]=reactExports.useState("duplicate"),[$e,Ge]=reactExports.useState(!1),Ue=He=>He.previewUrl||"",Ye=He=>He.fileType||"",Qe=(He,en)=>{ke(cn=>({...cn,[He]:en}))},rn=(He,en)=>{Fe(cn=>({...cn,[He]:en}))},tn=async()=>{Ge(!0),await Ae({...t,data:Be}),Ge(!1)},an=async()=>{Ge(!0),await Ae({...e,data:Me}),Ge(!1)},qe=async()=>{const He={...e,status:DocumentStatus.REVIEW_NEEDED,duplicateOfId:void 0,duplicateConfidence:void 0,duplicateReason:void 0};await Ae(He),xe()},Ke=async()=>{confirm("Mchten Sie dieses Duplikat wirklich lschen?")&&(await Ee(e.id),xe())},sn=async()=>{const He={...e,status:DocumentStatus.REVIEW_NEEDED,duplicateOfId:void 0,duplicateConfidence:void 0,duplicateReason:void 0};await Ae(He),xe()};reactExports.useEffect(()=>{const He=en=>{en.key==="Escape"&&(en.preventDefault(),xe())};return window.addEventListener("keydown",He),()=>window.removeEventListener("keydown",He)},[xe]);const gn=r.filter(He=>He.duplicateOfId===t.id&&He.id!==e.id);return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:jsxRuntimeExports.jsxs("div",{className:"bg-white w-[95vw] h-[90vh] rounded-2xl shadow-2xl flex flex-col overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"h-16 px-6 flex items-center justify-between flex-none bg-slate-50 border-b border-slate-200",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),jsxRuntimeExports.jsx("h2",{className:"font-bold text-slate-800 text-lg",children:"Duplikat-Vergleich"})]}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-slate-500",children:["hnlichkeit: ",jsxRuntimeExports.jsxs("span",{className:"font-bold text-red-600",children:[(e.duplicateConfidence||0).toFixed(0),"%"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[gn.length>0&&jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-slate-100 rounded-lg text-sm",children:jsxRuntimeExports.jsxs("span",{className:"text-slate-600",children:[gn.indexOf(e)+1," von ",gn.length+1," Duplikaten"]})}),jsxRuntimeExports.jsx("button",{onClick:xe,className:"p-2 hover:bg-slate-200 rounded-lg transition-colors",children:jsxRuntimeExports.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),jsxRuntimeExports.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]}),jsxRuntimeExports.jsxs("div",{className:"px-6 py-3 bg-white border-b border-slate-100 flex items-center justify-between",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2",children:jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Aktionen:"})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:sn,className:"px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg text-sm font-semibold transition-colors",children:"Beide behalten"}),jsxRuntimeExports.jsx("button",{onClick:qe,className:"px-4 py-2 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded-lg text-sm font-semibold transition-colors",children:"Als Original markieren"}),jsxRuntimeExports.jsx("button",{onClick:()=>Pe(e.id,t.id),className:"px-4 py-2 bg-amber-100 hover:bg-amber-200 text-amber-700 rounded-lg text-sm font-semibold transition-colors",children:"Zusammenfhren"}),jsxRuntimeExports.jsx("button",{onClick:Ke,className:"px-4 py-2 bg-red-100 hover:bg-red-200 text-red-700 rounded-lg text-sm font-semibold transition-colors",children:"Duplikat lschen"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col border-r border-slate-200 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"px-4 py-2 bg-green-50 border-b border-green-100 flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-green-700 text-sm",children:"Original"}),jsxRuntimeExports.jsx("button",{onClick:()=>Re(t),className:"text-xs text-green-600 hover:text-green-800 underline",children:"Im Detail ffnen"})]}),jsxRuntimeExports.jsx("div",{className:"h-1/2 bg-slate-100 relative",children:Ue(t)&&jsxRuntimeExports.jsx(PdfViewer,{url:Ue(t),type:Ye(t)})}),jsxRuntimeExports.jsxs("div",{className:"h-1/2 overflow-y-auto p-4 bg-white",children:[jsxRuntimeExports.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[jsxRuntimeExports.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),jsxRuntimeExports.jsx("polyline",{points:"14 2 14 8 20 8"})]}),"Buchungsdaten"]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS,children:"Datum"}),jsxRuntimeExports.jsx("input",{type:"date",value:Be.belegDatum||"",onChange:He=>Qe("belegDatum",He.target.value),onBlur:tn,className:INPUT_CLASS})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS,children:"Beleg-Nr."}),jsxRuntimeExports.jsx("input",{value:Be.belegNummerLieferant||"",onChange:He=>Qe("belegNummerLieferant",He.target.value),onBlur:tn,className:INPUT_CLASS})]}),jsxRuntimeExports.jsxs("div",{className:"col-span-2",children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS,children:"Lieferant"}),jsxRuntimeExports.jsx("input",{value:Be.lieferantName||"",onChange:He=>Qe("lieferantName",He.target.value),onBlur:tn,className:`${INPUT_CLASS} font-bold`})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS,children:"Netto"}),jsxRuntimeExports.jsx("input",{type:"number",value:Be.nettoBetrag||"",onChange:He=>Qe("nettoBetrag",parseFloat(He.target.value)),onBlur:tn,className:INPUT_CLASS})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS,children:"Brutto"}),jsxRuntimeExports.jsx("input",{type:"number",value:Be.bruttoBetrag||"",onChange:He=>Qe("bruttoBetrag",parseFloat(He.target.value)),onBlur:tn,className:`${INPUT_CLASS} font-bold`})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS,children:"Konto"}),jsxRuntimeExports.jsx("input",{value:Be.kontierungskonto||"",onChange:He=>Qe("kontierungskonto",He.target.value),onBlur:tn,className:INPUT_CLASS})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS,children:"Steuerkategorie"}),jsxRuntimeExports.jsx("input",{value:Be.steuerkategorie||"",onChange:He=>Qe("steuerkategorie",He.target.value),onBlur:tn,className:INPUT_CLASS})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100",children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS,children:"Bemerkung"}),jsxRuntimeExports.jsx("textarea",{value:Be.beschreibung||"",onChange:He=>Qe("beschreibung",He.target.value),onBlur:tn,className:`${INPUT_CLASS} min-h-[60px] resize-none`})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"px-4 py-2 bg-red-50 border-b border-red-100 flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-red-700 text-sm",children:"Duplikat"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-red-500",children:e.duplicateReason})]}),jsxRuntimeExports.jsx("div",{className:"h-1/2 bg-slate-100 relative",children:Ue(e)&&jsxRuntimeExports.jsx(PdfViewer,{url:Ue(e),type:Ye(e)})}),jsxRuntimeExports.jsxs("div",{className:"h-1/2 overflow-y-auto p-4 bg-white",children:[jsxRuntimeExports.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[jsxRuntimeExports.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),jsxRuntimeExports.jsx("polyline",{points:"14 2 14 8 20 8"})]}),"Buchungsdaten"]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS,children:"Datum"}),jsxRuntimeExports.jsx("input",{type:"date",value:Me.belegDatum||"",onChange:He=>rn("belegDatum",He.target.value),onBlur:an,className:INPUT_CLASS})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS,children:"Beleg-Nr."}),jsxRuntimeExports.jsx("input",{value:Me.belegNummerLieferant||"",onChange:He=>rn("belegNummerLieferant",He.target.value),onBlur:an,className:INPUT_CLASS})]}),jsxRuntimeExports.jsxs("div",{className:"col-span-2",children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS,children:"Lieferant"}),jsxRuntimeExports.jsx("input",{value:Me.lieferantName||"",onChange:He=>rn("lieferantName",He.target.value),onBlur:an,className:`${INPUT_CLASS} font-bold`})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS,children:"Netto"}),jsxRuntimeExports.jsx("input",{type:"number",value:Me.nettoBetrag||"",onChange:He=>rn("nettoBetrag",parseFloat(He.target.value)),onBlur:an,className:INPUT_CLASS})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS,children:"Brutto"}),jsxRuntimeExports.jsx("input",{type:"number",value:Me.bruttoBetrag||"",onChange:He=>rn("bruttoBetrag",parseFloat(He.target.value)),onBlur:an,className:`${INPUT_CLASS} font-bold`})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS,children:"Konto"}),jsxRuntimeExports.jsx("input",{value:Me.kontierungskonto||"",onChange:He=>rn("kontierungskonto",He.target.value),onBlur:an,className:INPUT_CLASS})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS,children:"Steuerkategorie"}),jsxRuntimeExports.jsx("input",{value:Me.steuerkategorie||"",onChange:He=>rn("steuerkategorie",He.target.value),onBlur:an,className:INPUT_CLASS})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100",children:[jsxRuntimeExports.jsx("label",{className:LABEL_CLASS,children:"Bemerkung"}),jsxRuntimeExports.jsx("textarea",{value:Me.beschreibung||"",onChange:He=>rn("beschreibung",He.target.value),onBlur:an,className:`${INPUT_CLASS} min-h-[60px] resize-none`})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"px-6 py-3 bg-slate-50 border-t border-slate-200 flex items-center justify-between text-xs text-slate-500",children:[jsxRuntimeExports.jsx("div",{children:"nderungen werden automatisch gespeichert (auf Blur)"}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-4",children:jsxRuntimeExports.jsx("span",{children:"Esc: Schlieen"})})]})]})})},SettingsView=({settings:t,onSave:e,onClose:r})=>{const xe=t.taxDefinitions||[],[Ee,Ae]=reactExports.useState(t.accountDefinitions||[]),[Pe,Re]=reactExports.useState(""),[Ce,Be]=reactExports.useState("system"),ke=reactExports.useMemo(()=>({unternehmensName:"",land:"DE",plz:"",ort:"",strasse:"",hausnummer:"",eigeneSteuernummer:"",eigeneUstIdNr:"",finanzamtName:"",finanzamtNr:"",rechtsform:void 0,besteuerungUst:"unbekannt",kleinunternehmer:!1,iban:"",kontaktEmail:""}),[]),[Me,Fe]=reactExports.useState(()=>({...ke,...t.elsterStammdaten||{}})),Ve=reactExports.useMemo(()=>({uploadErsterBeleg:!1,datevKonfiguriert:!1,elsterStammdatenKonfiguriert:!1}),[]),[Oe,$e]=reactExports.useState(()=>({...Ve,...t.startupChecklist||{}})),[Ge,Ue]=reactExports.useState(()=>{const Ke={beraterNr:"",mandantNr:"",wirtschaftsjahrBeginn:`${new Date().getFullYear()}0101`,sachkontenlaenge:4,waehrung:"EUR",herkunftKz:"RE",diktatkuerzel:"",stapelBezeichnung:"Buchungsstapel",taxCategoryToBuKey:{}},sn=t.datevConfig;return{...Ke,...sn,taxCategoryToBuKey:{...Ke.taxCategoryToBuKey,...(sn==null?void 0:sn.taxCategoryToBuKey)||{}}}}),Ye=qe=>({...t,accountDefinitions:Ee,datevConfig:Ge,elsterStammdaten:Me,startupChecklist:Oe,...qe||{}}),Qe=qe=>{if(confirm("Konto wirklich lschen?")){const Ke=Ee.filter(sn=>sn.id!==qe);Ae(Ke),e(Ye({accountDefinitions:Ke}))}},rn=()=>{if(!Pe.trim())return;const Ke={id:Pe.toLowerCase().replace(/[^a-z0-9]/g,""),name:Pe,skr03:"0000",steuerkategorien:["19_pv","7_pv"]},sn=[...Ee,Ke];Ae(sn),Re(""),e(Ye({accountDefinitions:sn}))},tn=(qe,Ke)=>{Ae(sn=>sn.map(gn=>{if(gn.id!==qe)return gn;const en=gn.steuerkategorien.includes(Ke)?gn.steuerkategorien.filter(cn=>cn!==Ke):[...gn.steuerkategorien,Ke];return{...gn,steuerkategorien:en}}))},an=()=>{e(Ye()),alert("Einstellungen gespeichert!")};return jsxRuntimeExports.jsxs("div",{className:"h-full flex flex-col bg-slate-50",children:[jsxRuntimeExports.jsxs("div",{className:"h-14 border-b border-slate-200 bg-white px-6 flex items-center justify-between flex-none",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("h2",{className:"font-bold text-slate-800",children:"Einstellungen"}),jsxRuntimeExports.jsx("div",{className:"flex bg-slate-100 p-0.5 rounded-md",children:[{id:"system",label:"System"},{id:"elster",label:"ELSTER"},{id:"startup",label:"Startup"}].map(qe=>jsxRuntimeExports.jsx("button",{onClick:()=>Be(qe.id),className:`px-3 py-1.5 text-xs font-semibold rounded-md transition-all ${Ce===qe.id?"bg-white text-slate-900 shadow-sm ring-1 ring-slate-200":"text-slate-600 hover:text-slate-900"}`,children:qe.label},qe.id))})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:an,className:"bg-blue-600 text-white px-4 py-1.5 rounded text-sm hover:bg-blue-700",children:"Speichern"}),jsxRuntimeExports.jsx("button",{onClick:r,className:"text-slate-500 hover:text-slate-800",children:"Schlieen"})]})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto p-8",children:jsxRuntimeExports.jsxs("div",{className:"max-w-5xl mx-auto space-y-8",children:[Ce==="system"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"p-4 bg-slate-50 border-b border-slate-200",children:jsxRuntimeExports.jsx("h3",{className:"font-bold text-slate-800",children:" Steuerkategorien (System-Vorgabe)"})}),jsxRuntimeExports.jsxs("table",{className:"w-full text-left text-sm",children:[jsxRuntimeExports.jsx("thead",{className:"bg-slate-100 text-slate-500 font-semibold",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-4 py-2",children:"ID"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-2",children:"Bezeichnung"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-2",children:"MwSt"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-2 text-center",children:"Vorsteuer"})]})}),jsxRuntimeExports.jsx("tbody",{className:"divide-y divide-slate-100",children:xe.map(qe=>jsxRuntimeExports.jsxs("tr",{className:"hover:bg-slate-50",children:[jsxRuntimeExports.jsx("td",{className:"px-4 py-2 font-mono text-xs text-slate-500",children:qe.value}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2 font-medium",children:qe.label}),jsxRuntimeExports.jsxs("td",{className:"px-4 py-2",children:[qe.ust_satz*100,"%"]}),jsxRuntimeExports.jsx("td",{className:"px-4 py-2 text-center",children:qe.vorsteuer?"":""})]},qe.value))})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 bg-slate-50 border-b border-slate-200 flex justify-between items-center",children:[jsxRuntimeExports.jsx("h3",{className:"font-bold text-slate-800",children:" Kontierungskonten (SKR03)"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("input",{value:Pe,onChange:qe=>Re(qe.target.value),placeholder:"Neues Konto...",className:"border border-slate-300 rounded px-2 py-1 text-sm outline-none focus:border-blue-500"}),jsxRuntimeExports.jsx("button",{onClick:rn,className:"text-blue-600 hover:bg-blue-50 px-3 py-1 rounded text-sm border border-blue-200 font-medium",children:"+ Add"})]})]}),jsxRuntimeExports.jsx("div",{className:"p-0 overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"w-full text-left text-sm",children:[jsxRuntimeExports.jsx("thead",{className:"bg-slate-100 text-slate-500 font-semibold",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-4 py-2 w-16",children:"SKR03"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-2 w-1/4",children:"Konto Name"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-2",children:"Erlaubte Steuerkategorien"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-2 w-16"})]})}),jsxRuntimeExports.jsx("tbody",{className:"divide-y divide-slate-100",children:Ee.map((qe,Ke)=>jsxRuntimeExports.jsxs("tr",{className:"hover:bg-slate-50 group",children:[jsxRuntimeExports.jsx("td",{className:"px-4 py-3 align-top",children:jsxRuntimeExports.jsx("input",{value:qe.skr03||"",onChange:sn=>{const gn=sn.target.value;Ae(He=>He.map(en=>en.id===qe.id?{...en,skr03:gn}:en))},placeholder:"0000",className:"w-full bg-transparent border-b border-transparent focus:border-blue-400 outline-none font-mono text-slate-700 font-bold"})}),jsxRuntimeExports.jsxs("td",{className:"px-4 py-3 font-medium text-slate-800 align-top",children:[jsxRuntimeExports.jsx("input",{value:qe.name,onChange:sn=>{const gn=sn.target.value;Ae(He=>He.map(en=>en.id===qe.id?{...en,name:gn}:en))},className:"w-full bg-transparent border-b border-transparent focus:border-blue-400 outline-none"}),jsxRuntimeExports.jsx("div",{className:"text-[10px] text-slate-400 font-mono mt-1",children:qe.id})]}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-1",children:xe.map(sn=>{const gn=qe.steuerkategorien.includes(sn.value);return jsxRuntimeExports.jsx("button",{onClick:()=>tn(qe.id,sn.value),className:`text-[10px] px-2 py-1 rounded border transition-colors ${gn?"bg-blue-100 text-blue-700 border-blue-200 hover:bg-blue-200":"bg-slate-50 text-slate-400 border-slate-200 hover:border-slate-300"}`,children:sn.value},sn.value)})})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3 text-right",children:jsxRuntimeExports.jsx("button",{onClick:()=>Qe(qe.id),className:"text-slate-300 hover:text-red-500",children:jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("polyline",{points:"3 6 5 6 21 6"}),jsxRuntimeExports.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2-2v2"})]})})})]},qe.id+Ke))})]})})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 bg-slate-50 border-b border-slate-200",children:[jsxRuntimeExports.jsx("h3",{className:"font-bold text-slate-800",children:" DATEV Export (Buchungsstapel)"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Fr den Import in DATEV wird in der Regel ein Buchungsstapel im EXTF/DTVF-CSV-Format bentigt."})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Berater-Nr."}),jsxRuntimeExports.jsx("input",{value:Ge.beraterNr,onChange:qe=>Ue(Ke=>({...Ke,beraterNr:qe.target.value})),placeholder:"z.B. 123456",className:"w-full border border-slate-300 rounded px-2 py-1.5 text-sm outline-none focus:border-blue-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Mandant-Nr."}),jsxRuntimeExports.jsx("input",{value:Ge.mandantNr,onChange:qe=>Ue(Ke=>({...Ke,mandantNr:qe.target.value})),placeholder:"z.B. 98765",className:"w-full border border-slate-300 rounded px-2 py-1.5 text-sm outline-none focus:border-blue-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Wirtschaftsjahr Beginn (YYYYMMDD)"}),jsxRuntimeExports.jsx("input",{value:Ge.wirtschaftsjahrBeginn,onChange:qe=>Ue(Ke=>({...Ke,wirtschaftsjahrBeginn:qe.target.value})),placeholder:"20250101",className:"w-full border border-slate-300 rounded px-2 py-1.5 text-sm outline-none focus:border-blue-500 font-mono"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Sachkontenlnge"}),jsxRuntimeExports.jsx("input",{value:String(Ge.sachkontenlaenge??""),onChange:qe=>Ue(Ke=>({...Ke,sachkontenlaenge:Number(qe.target.value)})),placeholder:"4",inputMode:"numeric",className:"w-full border border-slate-300 rounded px-2 py-1.5 text-sm outline-none focus:border-blue-500 font-mono"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Herkunft-Kz"}),jsxRuntimeExports.jsx("input",{value:Ge.herkunftKz,onChange:qe=>Ue(Ke=>({...Ke,herkunftKz:qe.target.value})),placeholder:"RE",className:"w-full border border-slate-300 rounded px-2 py-1.5 text-sm outline-none focus:border-blue-500 font-mono"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Diktatkrzel (optional)"}),jsxRuntimeExports.jsx("input",{value:Ge.diktatkuerzel||"",onChange:qe=>Ue(Ke=>({...Ke,diktatkuerzel:qe.target.value})),placeholder:"",className:"w-full border border-slate-300 rounded px-2 py-1.5 text-sm outline-none focus:border-blue-500"})]}),jsxRuntimeExports.jsxs("div",{className:"md:col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Stapel-Bezeichnung (optional)"}),jsxRuntimeExports.jsx("input",{value:Ge.stapelBezeichnung||"",onChange:qe=>Ue(Ke=>({...Ke,stapelBezeichnung:qe.target.value})),placeholder:"Buchungsstapel",className:"w-full border border-slate-300 rounded px-2 py-1.5 text-sm outline-none focus:border-blue-500"})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 border-t border-slate-200",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-semibold text-slate-800 mb-2",children:"BU-Schlssel Mapping (Steuerkategorie  DATEV)"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-slate-500 mb-3",children:"Bitte mit der Steuerkanzlei abstimmen. Leere Werte blockieren den DATEV-Export, sobald die Steuerkategorie verwendet wird."}),jsxRuntimeExports.jsx("div",{className:"overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"w-full text-left text-sm",children:[jsxRuntimeExports.jsx("thead",{className:"bg-slate-100 text-slate-500 font-semibold",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-3 py-2 w-32",children:"Steuerkategorie"}),jsxRuntimeExports.jsx("th",{className:"px-3 py-2",children:"Bezeichnung"}),jsxRuntimeExports.jsx("th",{className:"px-3 py-2 w-32",children:"BU-Schlssel"})]})}),jsxRuntimeExports.jsx("tbody",{className:"divide-y divide-slate-100",children:xe.map(qe=>{var Ke;return jsxRuntimeExports.jsxs("tr",{className:"hover:bg-slate-50",children:[jsxRuntimeExports.jsx("td",{className:"px-3 py-2 font-mono text-xs text-slate-600",children:qe.value}),jsxRuntimeExports.jsx("td",{className:"px-3 py-2 text-slate-800",children:qe.label}),jsxRuntimeExports.jsx("td",{className:"px-3 py-2",children:jsxRuntimeExports.jsx("input",{value:((Ke=Ge.taxCategoryToBuKey)==null?void 0:Ke[qe.value])??"",onChange:sn=>{const gn=sn.target.value;Ue(He=>({...He,taxCategoryToBuKey:{...He.taxCategoryToBuKey||{},[qe.value]:gn}}))},placeholder:"z.B. 9",className:"w-full border border-slate-300 rounded px-2 py-1 text-sm outline-none focus:border-blue-500 font-mono"})})]},qe.value)})})]})})]})]})]}),Ce==="elster"&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 bg-slate-50 border-b border-slate-200",children:[jsxRuntimeExports.jsx("h3",{className:"font-bold text-slate-800",children:" ELSTER Stammdaten (Mandant)"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Diese Daten beziehen sich auf die eigene Steuernummer/UStIdNr (nicht auf die LieferantenSteuernummer im Beleg)."})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Unternehmensname *"}),jsxRuntimeExports.jsx("input",{value:Me.unternehmensName,onChange:qe=>Fe(Ke=>({...Ke,unternehmensName:qe.target.value})),className:"w-full border border-slate-300 rounded px-2 py-1.5 text-sm outline-none focus:border-blue-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Land (ISO) *"}),jsxRuntimeExports.jsx("input",{value:Me.land,onChange:qe=>Fe(Ke=>({...Ke,land:qe.target.value.toUpperCase()})),placeholder:"DE",className:"w-full border border-slate-300 rounded px-2 py-1.5 text-sm outline-none focus:border-blue-500 font-mono"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"PLZ *"}),jsxRuntimeExports.jsx("input",{value:Me.plz,onChange:qe=>Fe(Ke=>({...Ke,plz:qe.target.value})),placeholder:"12345",inputMode:"numeric",className:"w-full border border-slate-300 rounded px-2 py-1.5 text-sm outline-none focus:border-blue-500 font-mono"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Ort *"}),jsxRuntimeExports.jsx("input",{value:Me.ort,onChange:qe=>Fe(Ke=>({...Ke,ort:qe.target.value})),className:"w-full border border-slate-300 rounded px-2 py-1.5 text-sm outline-none focus:border-blue-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Strae *"}),jsxRuntimeExports.jsx("input",{value:Me.strasse,onChange:qe=>Fe(Ke=>({...Ke,strasse:qe.target.value})),className:"w-full border border-slate-300 rounded px-2 py-1.5 text-sm outline-none focus:border-blue-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Hausnummer *"}),jsxRuntimeExports.jsx("input",{value:Me.hausnummer,onChange:qe=>Fe(Ke=>({...Ke,hausnummer:qe.target.value})),className:"w-full border border-slate-300 rounded px-2 py-1.5 text-sm outline-none focus:border-blue-500"})]}),jsxRuntimeExports.jsxs("div",{className:"md:col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Eigene Steuernummer *"}),jsxRuntimeExports.jsx("input",{value:Me.eigeneSteuernummer,onChange:qe=>Fe(Ke=>({...Ke,eigeneSteuernummer:qe.target.value})),placeholder:"z.B. 12/345/67890",className:"w-full border border-slate-300 rounded px-2 py-1.5 text-sm outline-none focus:border-blue-500 font-mono"}),jsxRuntimeExports.jsx("div",{className:"text-[11px] text-slate-500 mt-1",children:"Hinweis: Format wird bewusst tolerant akzeptiert (Ziffern + Trennzeichen)."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Eigene UStIdNr (optional)"}),jsxRuntimeExports.jsx("input",{value:Me.eigeneUstIdNr||"",onChange:qe=>Fe(Ke=>({...Ke,eigeneUstIdNr:qe.target.value.toUpperCase()})),placeholder:"DE123456789",className:"w-full border border-slate-300 rounded px-2 py-1.5 text-sm outline-none focus:border-blue-500 font-mono"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Finanzamt (optional)"}),jsxRuntimeExports.jsx("input",{value:Me.finanzamtName||"",onChange:qe=>Fe(Ke=>({...Ke,finanzamtName:qe.target.value})),className:"w-full border border-slate-300 rounded px-2 py-1.5 text-sm outline-none focus:border-blue-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"FinanzamtNr (optional)"}),jsxRuntimeExports.jsx("input",{value:Me.finanzamtNr||"",onChange:qe=>Fe(Ke=>({...Ke,finanzamtNr:qe.target.value})),placeholder:"0000",inputMode:"numeric",className:"w-full border border-slate-300 rounded px-2 py-1.5 text-sm outline-none focus:border-blue-500 font-mono"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Rechtsform (optional)"}),jsxRuntimeExports.jsxs("select",{value:Me.rechtsform||"",onChange:qe=>Fe(Ke=>({...Ke,rechtsform:qe.target.value||void 0})),className:"w-full border border-slate-300 rounded px-2 py-1.5 text-sm outline-none focus:border-blue-500",children:[jsxRuntimeExports.jsx("option",{value:"",children:"(nicht gesetzt)"}),["einzelunternehmen","gmbh","ug","gbr","ohg","kg","ev","sonstiges"].map(qe=>jsxRuntimeExports.jsx("option",{value:qe,children:qe},qe))]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"UStBesteuerung (optional)"}),jsxRuntimeExports.jsx("select",{value:Me.besteuerungUst||"unbekannt",onChange:qe=>Fe(Ke=>({...Ke,besteuerungUst:qe.target.value||"unbekannt"})),className:"w-full border border-slate-300 rounded px-2 py-1.5 text-sm outline-none focus:border-blue-500",children:["unbekannt","ist","soll"].map(qe=>jsxRuntimeExports.jsx("option",{value:qe,children:qe},qe))})]}),jsxRuntimeExports.jsxs("div",{className:"md:col-span-2 flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:Me.kleinunternehmer===!0,onChange:qe=>Fe(Ke=>({...Ke,kleinunternehmer:qe.target.checked}))}),jsxRuntimeExports.jsx("div",{className:"text-sm text-slate-700",children:"Kleinunternehmer (19) (optional)"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"IBAN (optional)"}),jsxRuntimeExports.jsx("input",{value:Me.iban||"",onChange:qe=>Fe(Ke=>({...Ke,iban:qe.target.value.toUpperCase()})),className:"w-full border border-slate-300 rounded px-2 py-1.5 text-sm outline-none focus:border-blue-500 font-mono"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Kontakt EMail (optional)"}),jsxRuntimeExports.jsx("input",{value:Me.kontaktEmail||"",onChange:qe=>Fe(Ke=>({...Ke,kontaktEmail:qe.target.value})),className:"w-full border border-slate-300 rounded px-2 py-1.5 text-sm outline-none focus:border-blue-500"})]})]})]})}),Ce==="startup"&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 bg-slate-50 border-b border-slate-200",children:[jsxRuntimeExports.jsx("h3",{className:"font-bold text-slate-800",children:" Startup (Onboarding)"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Einfacher FortschrittTracker  wird lokal gespeichert."})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 space-y-3",children:[jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-3 text-sm text-slate-700",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:Oe.uploadErsterBeleg,onChange:qe=>$e(Ke=>({...Ke,uploadErsterBeleg:qe.target.checked}))}),"Ersten Beleg hochladen"]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-3 text-sm text-slate-700",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:Oe.datevKonfiguriert,onChange:qe=>$e(Ke=>({...Ke,datevKonfiguriert:qe.target.checked}))}),"DATEVKonfiguration prfen"]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-3 text-sm text-slate-700",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:Oe.elsterStammdatenKonfiguriert,onChange:qe=>$e(Ke=>({...Ke,elsterStammdatenKonfiguriert:qe.target.checked}))}),"ELSTERStammdaten ausfllen"]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-slate-500 pt-2",children:"Tipp: Speichern nicht vergessen (oben rechts)."})]})]})})]})})]})};var define_globalThis_process_env_default={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let _defaultBaseGeminiUrl,_defaultBaseVertexUrl;function getDefaultBaseUrls(){return{geminiUrl:_defaultBaseGeminiUrl,vertexUrl:_defaultBaseVertexUrl}}function getBaseUrl(t,e,r,xe){var Ee,Ae;if(!(t!=null&&t.baseUrl)){const Pe=getDefaultBaseUrls();return e?(Ee=Pe.vertexUrl)!==null&&Ee!==void 0?Ee:r:(Ae=Pe.geminiUrl)!==null&&Ae!==void 0?Ae:xe}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BaseModule{}function formatMap(t,e){const r=/\{([^}]+)\}/g;return t.replace(r,(xe,Ee)=>{if(Object.prototype.hasOwnProperty.call(e,Ee)){const Ae=e[Ee];return Ae!=null?String(Ae):""}else throw new Error(`Key '${Ee}' not found in valueMap.`)})}function setValueByPath(t,e,r){for(let Ae=0;Ae<e.length-1;Ae++){const Pe=e[Ae];if(Pe.endsWith("[]")){const Re=Pe.slice(0,-2);if(!(Re in t))if(Array.isArray(r))t[Re]=Array.from({length:r.length},()=>({}));else throw new Error(`Value must be a list given an array path ${Pe}`);if(Array.isArray(t[Re])){const Ce=t[Re];if(Array.isArray(r))for(let Be=0;Be<Ce.length;Be++){const ke=Ce[Be];setValueByPath(ke,e.slice(Ae+1),r[Be])}else for(const Be of Ce)setValueByPath(Be,e.slice(Ae+1),r)}return}else if(Pe.endsWith("[0]")){const Re=Pe.slice(0,-3);Re in t||(t[Re]=[{}]);const Ce=t[Re];setValueByPath(Ce[0],e.slice(Ae+1),r);return}(!t[Pe]||typeof t[Pe]!="object")&&(t[Pe]={}),t=t[Pe]}const xe=e[e.length-1],Ee=t[xe];if(Ee!==void 0){if(!r||typeof r=="object"&&Object.keys(r).length===0||r===Ee)return;if(typeof Ee=="object"&&typeof r=="object"&&Ee!==null&&r!==null)Object.assign(Ee,r);else throw new Error(`Cannot set value for an existing key. Key: ${xe}`)}else xe==="_self"&&typeof r=="object"&&r!==null&&!Array.isArray(r)?Object.assign(t,r):t[xe]=r}function getValueByPath(t,e,r=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let xe=0;xe<e.length;xe++){if(typeof t!="object"||t===null)return r;const Ee=e[xe];if(Ee.endsWith("[]")){const Ae=Ee.slice(0,-2);if(Ae in t){const Pe=t[Ae];return Array.isArray(Pe)?Pe.map(Re=>getValueByPath(Re,e.slice(xe+1),r)):r}else return r}else t=t[Ee]}return t}catch(xe){if(xe instanceof TypeError)return r;throw xe}}function moveValueByPath(t,e){for(const[r,xe]of Object.entries(e)){const Ee=r.split("."),Ae=xe.split("."),Pe=new Set;let Re=-1;for(let Ce=0;Ce<Ee.length;Ce++)if(Ee[Ce]==="*"){Re=Ce;break}if(Re!==-1&&Ae.length>Re)for(let Ce=Re;Ce<Ae.length;Ce++){const Be=Ae[Ce];Be!=="*"&&!Be.endsWith("[]")&&!Be.endsWith("[0]")&&Pe.add(Be)}_moveValueRecursive(t,Ee,Ae,0,Pe)}}function _moveValueRecursive(t,e,r,xe,Ee){if(xe>=e.length||typeof t!="object"||t===null)return;const Ae=e[xe];if(Ae.endsWith("[]")){const Pe=Ae.slice(0,-2),Re=t;if(Pe in Re&&Array.isArray(Re[Pe]))for(const Ce of Re[Pe])_moveValueRecursive(Ce,e,r,xe+1,Ee)}else if(Ae==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const Pe=t,Re=Object.keys(Pe).filter(Be=>!Be.startsWith("_")&&!Ee.has(Be)),Ce={};for(const Be of Re)Ce[Be]=Pe[Be];for(const[Be,ke]of Object.entries(Ce)){const Me=[];for(const Fe of r.slice(xe))Fe==="*"?Me.push(Be):Me.push(Fe);setValueByPath(Pe,Me,ke)}for(const Be of Re)delete Pe[Be]}}else{const Pe=t;Ae in Pe&&_moveValueRecursive(Pe[Ae],e,r,xe+1,Ee)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tBytes$1(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fetchPredictOperationParametersToVertex(t){const e={},r=getValueByPath(t,["operationName"]);r!=null&&setValueByPath(e,["operationName"],r);const xe=getValueByPath(t,["resourceName"]);return xe!=null&&setValueByPath(e,["_url","resourceName"],xe),e}function generateVideosOperationFromMldev$1(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const xe=getValueByPath(t,["metadata"]);xe!=null&&setValueByPath(e,["metadata"],xe);const Ee=getValueByPath(t,["done"]);Ee!=null&&setValueByPath(e,["done"],Ee);const Ae=getValueByPath(t,["error"]);Ae!=null&&setValueByPath(e,["error"],Ae);const Pe=getValueByPath(t,["response","generateVideoResponse"]);return Pe!=null&&setValueByPath(e,["response"],generateVideosResponseFromMldev$1(Pe)),e}function generateVideosOperationFromVertex$1(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const xe=getValueByPath(t,["metadata"]);xe!=null&&setValueByPath(e,["metadata"],xe);const Ee=getValueByPath(t,["done"]);Ee!=null&&setValueByPath(e,["done"],Ee);const Ae=getValueByPath(t,["error"]);Ae!=null&&setValueByPath(e,["error"],Ae);const Pe=getValueByPath(t,["response"]);return Pe!=null&&setValueByPath(e,["response"],generateVideosResponseFromVertex$1(Pe)),e}function generateVideosResponseFromMldev$1(t){const e={},r=getValueByPath(t,["generatedSamples"]);if(r!=null){let Ae=r;Array.isArray(Ae)&&(Ae=Ae.map(Pe=>generatedVideoFromMldev$1(Pe))),setValueByPath(e,["generatedVideos"],Ae)}const xe=getValueByPath(t,["raiMediaFilteredCount"]);xe!=null&&setValueByPath(e,["raiMediaFilteredCount"],xe);const Ee=getValueByPath(t,["raiMediaFilteredReasons"]);return Ee!=null&&setValueByPath(e,["raiMediaFilteredReasons"],Ee),e}function generateVideosResponseFromVertex$1(t){const e={},r=getValueByPath(t,["videos"]);if(r!=null){let Ae=r;Array.isArray(Ae)&&(Ae=Ae.map(Pe=>generatedVideoFromVertex$1(Pe))),setValueByPath(e,["generatedVideos"],Ae)}const xe=getValueByPath(t,["raiMediaFilteredCount"]);xe!=null&&setValueByPath(e,["raiMediaFilteredCount"],xe);const Ee=getValueByPath(t,["raiMediaFilteredReasons"]);return Ee!=null&&setValueByPath(e,["raiMediaFilteredReasons"],Ee),e}function generatedVideoFromMldev$1(t){const e={},r=getValueByPath(t,["video"]);return r!=null&&setValueByPath(e,["video"],videoFromMldev$1(r)),e}function generatedVideoFromVertex$1(t){const e={},r=getValueByPath(t,["_self"]);return r!=null&&setValueByPath(e,["video"],videoFromVertex$1(r)),e}function getOperationParametersToMldev(t){const e={},r=getValueByPath(t,["operationName"]);return r!=null&&setValueByPath(e,["_url","operationName"],r),e}function getOperationParametersToVertex(t){const e={},r=getValueByPath(t,["operationName"]);return r!=null&&setValueByPath(e,["_url","operationName"],r),e}function importFileOperationFromMldev$1(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const xe=getValueByPath(t,["metadata"]);xe!=null&&setValueByPath(e,["metadata"],xe);const Ee=getValueByPath(t,["done"]);Ee!=null&&setValueByPath(e,["done"],Ee);const Ae=getValueByPath(t,["error"]);Ae!=null&&setValueByPath(e,["error"],Ae);const Pe=getValueByPath(t,["response"]);return Pe!=null&&setValueByPath(e,["response"],importFileResponseFromMldev$1(Pe)),e}function importFileResponseFromMldev$1(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["parent"]);xe!=null&&setValueByPath(e,["parent"],xe);const Ee=getValueByPath(t,["documentName"]);return Ee!=null&&setValueByPath(e,["documentName"],Ee),e}function uploadToFileSearchStoreOperationFromMldev(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const xe=getValueByPath(t,["metadata"]);xe!=null&&setValueByPath(e,["metadata"],xe);const Ee=getValueByPath(t,["done"]);Ee!=null&&setValueByPath(e,["done"],Ee);const Ae=getValueByPath(t,["error"]);Ae!=null&&setValueByPath(e,["error"],Ae);const Pe=getValueByPath(t,["response"]);return Pe!=null&&setValueByPath(e,["response"],uploadToFileSearchStoreResponseFromMldev(Pe)),e}function uploadToFileSearchStoreResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["parent"]);xe!=null&&setValueByPath(e,["parent"],xe);const Ee=getValueByPath(t,["documentName"]);return Ee!=null&&setValueByPath(e,["documentName"],Ee),e}function videoFromMldev$1(t){const e={},r=getValueByPath(t,["uri"]);r!=null&&setValueByPath(e,["uri"],r);const xe=getValueByPath(t,["encodedVideo"]);xe!=null&&setValueByPath(e,["videoBytes"],tBytes$1(xe));const Ee=getValueByPath(t,["encoding"]);return Ee!=null&&setValueByPath(e,["mimeType"],Ee),e}function videoFromVertex$1(t){const e={},r=getValueByPath(t,["gcsUri"]);r!=null&&setValueByPath(e,["uri"],r);const xe=getValueByPath(t,["bytesBase64Encoded"]);xe!=null&&setValueByPath(e,["videoBytes"],tBytes$1(xe));const Ee=getValueByPath(t,["mimeType"]);return Ee!=null&&setValueByPath(e,["mimeType"],Ee),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Outcome;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Outcome||(Outcome={}));var Language;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Language||(Language={}));var FunctionResponseScheduling;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(FunctionResponseScheduling||(FunctionResponseScheduling={}));var Type;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Type||(Type={}));var Mode;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Mode||(Mode={}));var ApiSpec;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(ApiSpec||(ApiSpec={}));var AuthType;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(AuthType||(AuthType={}));var HttpElementLocation;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(HttpElementLocation||(HttpElementLocation={}));var PhishBlockThreshold;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(PhishBlockThreshold||(PhishBlockThreshold={}));var ThinkingLevel;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(ThinkingLevel||(ThinkingLevel={}));var HarmCategory;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(HarmCategory||(HarmCategory={}));var HarmBlockMethod;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(HarmBlockMethod||(HarmBlockMethod={}));var HarmBlockThreshold;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(HarmBlockThreshold||(HarmBlockThreshold={}));var FinishReason;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(FinishReason||(FinishReason={}));var HarmProbability;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(HarmProbability||(HarmProbability={}));var HarmSeverity;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(HarmSeverity||(HarmSeverity={}));var UrlRetrievalStatus;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(UrlRetrievalStatus||(UrlRetrievalStatus={}));var BlockedReason;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(BlockedReason||(BlockedReason={}));var TrafficType;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(TrafficType||(TrafficType={}));var Modality;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Modality||(Modality={}));var MediaResolution;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(MediaResolution||(MediaResolution={}));var TuningMode;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(TuningMode||(TuningMode={}));var AdapterSize;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(AdapterSize||(AdapterSize={}));var JobState;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(JobState||(JobState={}));var TuningTask;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(TuningTask||(TuningTask={}));var PartMediaResolutionLevel;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(PartMediaResolutionLevel||(PartMediaResolutionLevel={}));var FeatureSelectionPreference;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(FeatureSelectionPreference||(FeatureSelectionPreference={}));var Behavior;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Behavior||(Behavior={}));var DynamicRetrievalConfigMode;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(DynamicRetrievalConfigMode||(DynamicRetrievalConfigMode={}));var Environment;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Environment||(Environment={}));var FunctionCallingConfigMode;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(FunctionCallingConfigMode||(FunctionCallingConfigMode={}));var SafetyFilterLevel;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(SafetyFilterLevel||(SafetyFilterLevel={}));var PersonGeneration;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(PersonGeneration||(PersonGeneration={}));var ImagePromptLanguage;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(ImagePromptLanguage||(ImagePromptLanguage={}));var MaskReferenceMode;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(MaskReferenceMode||(MaskReferenceMode={}));var ControlReferenceType;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(ControlReferenceType||(ControlReferenceType={}));var SubjectReferenceType;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(SubjectReferenceType||(SubjectReferenceType={}));var EditMode;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(EditMode||(EditMode={}));var SegmentMode;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(SegmentMode||(SegmentMode={}));var VideoGenerationReferenceType;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(VideoGenerationReferenceType||(VideoGenerationReferenceType={}));var VideoGenerationMaskMode;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(VideoGenerationMaskMode||(VideoGenerationMaskMode={}));var VideoCompressionQuality;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(VideoCompressionQuality||(VideoCompressionQuality={}));var TuningMethod;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(TuningMethod||(TuningMethod={}));var DocumentState;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(DocumentState||(DocumentState={}));var FileState;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(FileState||(FileState={}));var FileSource;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(FileSource||(FileSource={}));var TurnCompleteReason;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(TurnCompleteReason||(TurnCompleteReason={}));var MediaModality;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(MediaModality||(MediaModality={}));var VadSignalType;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(VadSignalType||(VadSignalType={}));var StartSensitivity;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(StartSensitivity||(StartSensitivity={}));var EndSensitivity;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(EndSensitivity||(EndSensitivity={}));var ActivityHandling;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(ActivityHandling||(ActivityHandling={}));var TurnCoverage;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(TurnCoverage||(TurnCoverage={}));var Scale;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Scale||(Scale={}));var MusicGenerationMode;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(MusicGenerationMode||(MusicGenerationMode={}));var LiveMusicPlaybackControl;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(LiveMusicPlaybackControl||(LiveMusicPlaybackControl={}));class HttpResponse{constructor(e){const r={};for(const xe of e.headers.entries())r[xe[0]]=xe[1];this.headers=r,this.responseInternal=e}json(){return this.responseInternal.json()}}class GenerateContentResponse{get text(){var e,r,xe,Ee,Ae,Pe,Re,Ce;if(((Ee=(xe=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||xe===void 0?void 0:xe.parts)===null||Ee===void 0?void 0:Ee.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let Be="",ke=!1;const Me=[];for(const Fe of(Ce=(Re=(Pe=(Ae=this.candidates)===null||Ae===void 0?void 0:Ae[0])===null||Pe===void 0?void 0:Pe.content)===null||Re===void 0?void 0:Re.parts)!==null&&Ce!==void 0?Ce:[]){for(const[Ve,Oe]of Object.entries(Fe))Ve!=="text"&&Ve!=="thought"&&Ve!=="thoughtSignature"&&(Oe!==null||Oe!==void 0)&&Me.push(Ve);if(typeof Fe.text=="string"){if(typeof Fe.thought=="boolean"&&Fe.thought)continue;ke=!0,Be+=Fe.text}}return Me.length>0&&console.warn(`there are non-text parts ${Me} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),ke?Be:void 0}get data(){var e,r,xe,Ee,Ae,Pe,Re,Ce;if(((Ee=(xe=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||xe===void 0?void 0:xe.parts)===null||Ee===void 0?void 0:Ee.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let Be="";const ke=[];for(const Me of(Ce=(Re=(Pe=(Ae=this.candidates)===null||Ae===void 0?void 0:Ae[0])===null||Pe===void 0?void 0:Pe.content)===null||Re===void 0?void 0:Re.parts)!==null&&Ce!==void 0?Ce:[]){for(const[Fe,Ve]of Object.entries(Me))Fe!=="inlineData"&&(Ve!==null||Ve!==void 0)&&ke.push(Fe);Me.inlineData&&typeof Me.inlineData.data=="string"&&(Be+=atob(Me.inlineData.data))}return ke.length>0&&console.warn(`there are non-data parts ${ke} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),Be.length>0?btoa(Be):void 0}get functionCalls(){var e,r,xe,Ee,Ae,Pe,Re,Ce;if(((Ee=(xe=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||xe===void 0?void 0:xe.parts)===null||Ee===void 0?void 0:Ee.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const Be=(Ce=(Re=(Pe=(Ae=this.candidates)===null||Ae===void 0?void 0:Ae[0])===null||Pe===void 0?void 0:Pe.content)===null||Re===void 0?void 0:Re.parts)===null||Ce===void 0?void 0:Ce.filter(ke=>ke.functionCall).map(ke=>ke.functionCall).filter(ke=>ke!==void 0);if((Be==null?void 0:Be.length)!==0)return Be}get executableCode(){var e,r,xe,Ee,Ae,Pe,Re,Ce,Be;if(((Ee=(xe=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||xe===void 0?void 0:xe.parts)===null||Ee===void 0?void 0:Ee.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const ke=(Ce=(Re=(Pe=(Ae=this.candidates)===null||Ae===void 0?void 0:Ae[0])===null||Pe===void 0?void 0:Pe.content)===null||Re===void 0?void 0:Re.parts)===null||Ce===void 0?void 0:Ce.filter(Me=>Me.executableCode).map(Me=>Me.executableCode).filter(Me=>Me!==void 0);if((ke==null?void 0:ke.length)!==0)return(Be=ke==null?void 0:ke[0])===null||Be===void 0?void 0:Be.code}get codeExecutionResult(){var e,r,xe,Ee,Ae,Pe,Re,Ce,Be;if(((Ee=(xe=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||xe===void 0?void 0:xe.parts)===null||Ee===void 0?void 0:Ee.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const ke=(Ce=(Re=(Pe=(Ae=this.candidates)===null||Ae===void 0?void 0:Ae[0])===null||Pe===void 0?void 0:Pe.content)===null||Re===void 0?void 0:Re.parts)===null||Ce===void 0?void 0:Ce.filter(Me=>Me.codeExecutionResult).map(Me=>Me.codeExecutionResult).filter(Me=>Me!==void 0);if((ke==null?void 0:ke.length)!==0)return(Be=ke==null?void 0:ke[0])===null||Be===void 0?void 0:Be.output}}class EmbedContentResponse{}class GenerateImagesResponse{}class EditImageResponse{}class UpscaleImageResponse{}class RecontextImageResponse{}class SegmentImageResponse{}class ListModelsResponse{}class DeleteModelResponse{}class CountTokensResponse{}class ComputeTokensResponse{}class GenerateVideosOperation{_fromAPIResponse({apiResponse:e,_isVertexAI:r}){const xe=new GenerateVideosOperation;let Ee;const Ae=e;return r?Ee=generateVideosOperationFromVertex$1(Ae):Ee=generateVideosOperationFromMldev$1(Ae),Object.assign(xe,Ee),xe}}class ListTuningJobsResponse{}class CancelTuningJobResponse{}class DeleteCachedContentResponse{}class ListCachedContentsResponse{}class ListDocumentsResponse{}class ListFileSearchStoresResponse{}class UploadToFileSearchStoreResumableResponse{}class ImportFileOperation{_fromAPIResponse({apiResponse:e,_isVertexAI:r}){const xe=new ImportFileOperation,Ae=importFileOperationFromMldev$1(e);return Object.assign(xe,Ae),xe}}class ListFilesResponse{}class CreateFileResponse{}class DeleteFileResponse{}class ListBatchJobsResponse{}class LiveServerMessage{get text(){var e,r,xe;let Ee="",Ae=!1;const Pe=[];for(const Re of(xe=(r=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||r===void 0?void 0:r.parts)!==null&&xe!==void 0?xe:[]){for(const[Ce,Be]of Object.entries(Re))Ce!=="text"&&Ce!=="thought"&&Be!==null&&Pe.push(Ce);if(typeof Re.text=="string"){if(typeof Re.thought=="boolean"&&Re.thought)continue;Ae=!0,Ee+=Re.text}}return Pe.length>0&&console.warn(`there are non-text parts ${Pe} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),Ae?Ee:void 0}get data(){var e,r,xe;let Ee="";const Ae=[];for(const Pe of(xe=(r=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||r===void 0?void 0:r.parts)!==null&&xe!==void 0?xe:[]){for(const[Re,Ce]of Object.entries(Pe))Re!=="inlineData"&&Ce!==null&&Ae.push(Re);Pe.inlineData&&typeof Pe.inlineData.data=="string"&&(Ee+=atob(Pe.inlineData.data))}return Ae.length>0&&console.warn(`there are non-data parts ${Ae} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),Ee.length>0?btoa(Ee):void 0}}class LiveMusicServerMessage{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class UploadToFileSearchStoreOperation{_fromAPIResponse({apiResponse:e,_isVertexAI:r}){const xe=new UploadToFileSearchStoreOperation,Ae=uploadToFileSearchStoreOperationFromMldev(e);return Object.assign(xe,Ae),xe}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tModel(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const r=e.split("/",2);return`publishers/${r[0]}/models/${r[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function tCachesModel(t,e){const r=tModel(t,e);return r?r.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${r}`:r.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${r}`:r:""}function tBlobs(t){return Array.isArray(t)?t.map(e=>tBlob(e)):[tBlob(t)]}function tBlob(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function tImageBlob(t){const e=tBlob(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function tAudioBlob(t){const e=tBlob(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function tPart(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function tParts(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>tPart(e)):[tPart(t)]}function _isContent(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function _isFunctionCallPart(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function _isFunctionResponsePart(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function tContent(t){if(t==null)throw new Error("ContentUnion is required");return _isContent(t)?t:{role:"user",parts:tParts(t)}}function tContentsForEmbed(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(r=>{const xe=tContent(r);return xe.parts&&xe.parts.length>0&&xe.parts[0].text!==void 0?[xe.parts[0].text]:[]});if(t.isVertexAI()){const r=tContent(e);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]}return Array.isArray(e)?e.map(r=>tContent(r)):[tContent(e)]}function tContents(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(_isFunctionCallPart(t)||_isFunctionResponsePart(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[tContent(t)]}const e=[],r=[],xe=_isContent(t[0]);for(const Ee of t){const Ae=_isContent(Ee);if(Ae!=xe)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(Ae)e.push(Ee);else{if(_isFunctionCallPart(Ee)||_isFunctionResponsePart(Ee))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");r.push(Ee)}}return xe||e.push({role:"user",parts:tParts(r)}),e}function flattenTypeArrayToAnyOf(t,e){t.includes("null")&&(e.nullable=!0);const r=t.filter(xe=>xe!=="null");if(r.length===1)e.type=Object.values(Type).includes(r[0].toUpperCase())?r[0].toUpperCase():Type.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const xe of r)e.anyOf.push({type:Object.values(Type).includes(xe.toUpperCase())?xe.toUpperCase():Type.TYPE_UNSPECIFIED})}}function processJsonSchema(t){const e={},r=["items"],xe=["anyOf"],Ee=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const Ae=t.anyOf;Ae!=null&&Ae.length==2&&(Ae[0].type==="null"?(e.nullable=!0,t=Ae[1]):Ae[1].type==="null"&&(e.nullable=!0,t=Ae[0])),t.type instanceof Array&&flattenTypeArrayToAnyOf(t.type,e);for(const[Pe,Re]of Object.entries(t))if(Re!=null)if(Pe=="type"){if(Re==="null")throw new Error("type: null can not be the only possible type for the field.");if(Re instanceof Array)continue;e.type=Object.values(Type).includes(Re.toUpperCase())?Re.toUpperCase():Type.TYPE_UNSPECIFIED}else if(r.includes(Pe))e[Pe]=processJsonSchema(Re);else if(xe.includes(Pe)){const Ce=[];for(const Be of Re){if(Be.type=="null"){e.nullable=!0;continue}Ce.push(processJsonSchema(Be))}e[Pe]=Ce}else if(Ee.includes(Pe)){const Ce={};for(const[Be,ke]of Object.entries(Re))Ce[Be]=processJsonSchema(ke);e[Pe]=Ce}else{if(Pe==="additionalProperties")continue;e[Pe]=Re}return e}function tSchema(t){return processJsonSchema(t)}function tSpeechConfig(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function tLiveSpeechConfig(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function tTool(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=processJsonSchema(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=processJsonSchema(e.response));return t}function tTools(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const r of t)e.push(r);return e}function resourceName(t,e,r,xe=1){const Ee=!e.startsWith(`${r}/`)&&e.split("/").length===xe;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${r}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:Ee?`projects/${t.getProject()}/locations/${t.getLocation()}/${r}/${e}`:e:Ee?`${r}/${e}`:e}function tCachedContentName(t,e){if(typeof e!="string")throw new Error("name must be a string");return resourceName(t,e,"cachedContents")}function tTuningJobStatus(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function tBytes(t){return tBytes$1(t)}function _isFile(t){return t!=null&&typeof t=="object"&&"name"in t}function isGeneratedVideo(t){return t!=null&&typeof t=="object"&&"video"in t}function isVideo(t){return t!=null&&typeof t=="object"&&"uri"in t}function tFileName(t){var e;let r;if(_isFile(t)&&(r=t.name),!(isVideo(t)&&(r=t.uri,r===void 0))&&!(isGeneratedVideo(t)&&(r=(e=t.video)===null||e===void 0?void 0:e.uri,r===void 0))){if(typeof t=="string"&&(r=t),r===void 0)throw new Error("Could not extract file name from the provided input.");if(r.startsWith("https://")){const Ee=r.split("files/")[1].match(/[a-z0-9]+/);if(Ee===null)throw new Error(`Could not extract file name from URI ${r}`);r=Ee[0]}else r.startsWith("files/")&&(r=r.split("files/")[1]);return r}}function tModelsUrl(t,e){let r;return t.isVertexAI()?r=e?"publishers/google/models":"models":r=e?"models":"tunedModels",r}function tExtractModels(t){for(const e of["models","tunedModels","publisherModels"])if(hasField(t,e))return t[e];return[]}function hasField(t,e){return t!==null&&typeof t=="object"&&e in t}function mcpToGeminiTool(t,e={}){const r=t,xe={name:r.name,description:r.description,parametersJsonSchema:r.inputSchema};return r.outputSchema&&(xe.responseJsonSchema=r.outputSchema),e.behavior&&(xe.behavior=e.behavior),{functionDeclarations:[xe]}}function mcpToolsToGeminiTool(t,e={}){const r=[],xe=new Set;for(const Ee of t){const Ae=Ee.name;if(xe.has(Ae))throw new Error(`Duplicate function name ${Ae} found in MCP tools. Please ensure function names are unique.`);xe.add(Ae);const Pe=mcpToGeminiTool(Ee,e);Pe.functionDeclarations&&r.push(...Pe.functionDeclarations)}return{functionDeclarations:r}}function tBatchJobSource(t,e){let r;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))r={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))r={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))r={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");r={inlinedRequests:e}}else r=e;const xe=[r.gcsUri,r.bigqueryUri].filter(Boolean).length,Ee=[r.inlinedRequests,r.fileName].filter(Boolean).length;if(t.isVertexAI()){if(Ee>0||xe!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(xe>0||Ee!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return r}function tBatchJobDestination(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function tRecvBatchJobDestination(t){if(typeof t!="object"||t===null)return{};const e=t,r=e.inlinedResponses;if(typeof r!="object"||r===null)return t;const Ee=r.inlinedResponses;if(!Array.isArray(Ee)||Ee.length===0)return t;let Ae=!1;for(const Pe of Ee){if(typeof Pe!="object"||Pe===null)continue;const Ce=Pe.response;if(typeof Ce!="object"||Ce===null)continue;if(Ce.embedding!==void 0){Ae=!0;break}}return Ae&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function tBatchJobName(t,e){const r=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(r))return r.split("/").pop();throw new Error(`Invalid batch job name: ${r}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(r))return r.split("/").pop();if(/^\d+$/.test(r))return r;throw new Error(`Invalid batch job name: ${r}.`)}function tJobState(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function batchJobDestinationFromMldev(t){const e={},r=getValueByPath(t,["responsesFile"]);r!=null&&setValueByPath(e,["fileName"],r);const xe=getValueByPath(t,["inlinedResponses","inlinedResponses"]);if(xe!=null){let Ae=xe;Array.isArray(Ae)&&(Ae=Ae.map(Pe=>inlinedResponseFromMldev(Pe))),setValueByPath(e,["inlinedResponses"],Ae)}const Ee=getValueByPath(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(Ee!=null){let Ae=Ee;Array.isArray(Ae)&&(Ae=Ae.map(Pe=>Pe)),setValueByPath(e,["inlinedEmbedContentResponses"],Ae)}return e}function batchJobDestinationFromVertex(t){const e={},r=getValueByPath(t,["predictionsFormat"]);r!=null&&setValueByPath(e,["format"],r);const xe=getValueByPath(t,["gcsDestination","outputUriPrefix"]);xe!=null&&setValueByPath(e,["gcsUri"],xe);const Ee=getValueByPath(t,["bigqueryDestination","outputUri"]);return Ee!=null&&setValueByPath(e,["bigqueryUri"],Ee),e}function batchJobDestinationToVertex(t){const e={},r=getValueByPath(t,["format"]);r!=null&&setValueByPath(e,["predictionsFormat"],r);const xe=getValueByPath(t,["gcsUri"]);xe!=null&&setValueByPath(e,["gcsDestination","outputUriPrefix"],xe);const Ee=getValueByPath(t,["bigqueryUri"]);if(Ee!=null&&setValueByPath(e,["bigqueryDestination","outputUri"],Ee),getValueByPath(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(getValueByPath(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(getValueByPath(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function batchJobFromMldev(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const xe=getValueByPath(t,["metadata","displayName"]);xe!=null&&setValueByPath(e,["displayName"],xe);const Ee=getValueByPath(t,["metadata","state"]);Ee!=null&&setValueByPath(e,["state"],tJobState(Ee));const Ae=getValueByPath(t,["metadata","createTime"]);Ae!=null&&setValueByPath(e,["createTime"],Ae);const Pe=getValueByPath(t,["metadata","endTime"]);Pe!=null&&setValueByPath(e,["endTime"],Pe);const Re=getValueByPath(t,["metadata","updateTime"]);Re!=null&&setValueByPath(e,["updateTime"],Re);const Ce=getValueByPath(t,["metadata","model"]);Ce!=null&&setValueByPath(e,["model"],Ce);const Be=getValueByPath(t,["metadata","output"]);return Be!=null&&setValueByPath(e,["dest"],batchJobDestinationFromMldev(tRecvBatchJobDestination(Be))),e}function batchJobFromVertex(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const xe=getValueByPath(t,["displayName"]);xe!=null&&setValueByPath(e,["displayName"],xe);const Ee=getValueByPath(t,["state"]);Ee!=null&&setValueByPath(e,["state"],tJobState(Ee));const Ae=getValueByPath(t,["error"]);Ae!=null&&setValueByPath(e,["error"],Ae);const Pe=getValueByPath(t,["createTime"]);Pe!=null&&setValueByPath(e,["createTime"],Pe);const Re=getValueByPath(t,["startTime"]);Re!=null&&setValueByPath(e,["startTime"],Re);const Ce=getValueByPath(t,["endTime"]);Ce!=null&&setValueByPath(e,["endTime"],Ce);const Be=getValueByPath(t,["updateTime"]);Be!=null&&setValueByPath(e,["updateTime"],Be);const ke=getValueByPath(t,["model"]);ke!=null&&setValueByPath(e,["model"],ke);const Me=getValueByPath(t,["inputConfig"]);Me!=null&&setValueByPath(e,["src"],batchJobSourceFromVertex(Me));const Fe=getValueByPath(t,["outputConfig"]);Fe!=null&&setValueByPath(e,["dest"],batchJobDestinationFromVertex(tRecvBatchJobDestination(Fe)));const Ve=getValueByPath(t,["completionStats"]);return Ve!=null&&setValueByPath(e,["completionStats"],Ve),e}function batchJobSourceFromVertex(t){const e={},r=getValueByPath(t,["instancesFormat"]);r!=null&&setValueByPath(e,["format"],r);const xe=getValueByPath(t,["gcsSource","uris"]);xe!=null&&setValueByPath(e,["gcsUri"],xe);const Ee=getValueByPath(t,["bigquerySource","inputUri"]);return Ee!=null&&setValueByPath(e,["bigqueryUri"],Ee),e}function batchJobSourceToMldev(t,e){const r={};if(getValueByPath(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(getValueByPath(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(getValueByPath(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const xe=getValueByPath(e,["fileName"]);xe!=null&&setValueByPath(r,["fileName"],xe);const Ee=getValueByPath(e,["inlinedRequests"]);if(Ee!=null){let Ae=Ee;Array.isArray(Ae)&&(Ae=Ae.map(Pe=>inlinedRequestToMldev(t,Pe))),setValueByPath(r,["requests","requests"],Ae)}return r}function batchJobSourceToVertex(t){const e={},r=getValueByPath(t,["format"]);r!=null&&setValueByPath(e,["instancesFormat"],r);const xe=getValueByPath(t,["gcsUri"]);xe!=null&&setValueByPath(e,["gcsSource","uris"],xe);const Ee=getValueByPath(t,["bigqueryUri"]);if(Ee!=null&&setValueByPath(e,["bigquerySource","inputUri"],Ee),getValueByPath(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(getValueByPath(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function blobToMldev$4(t){const e={},r=getValueByPath(t,["data"]);if(r!=null&&setValueByPath(e,["data"],r),getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const xe=getValueByPath(t,["mimeType"]);return xe!=null&&setValueByPath(e,["mimeType"],xe),e}function cancelBatchJobParametersToMldev(t,e){const r={},xe=getValueByPath(e,["name"]);return xe!=null&&setValueByPath(r,["_url","name"],tBatchJobName(t,xe)),r}function cancelBatchJobParametersToVertex(t,e){const r={},xe=getValueByPath(e,["name"]);return xe!=null&&setValueByPath(r,["_url","name"],tBatchJobName(t,xe)),r}function candidateFromMldev$1(t){const e={},r=getValueByPath(t,["content"]);r!=null&&setValueByPath(e,["content"],r);const xe=getValueByPath(t,["citationMetadata"]);xe!=null&&setValueByPath(e,["citationMetadata"],citationMetadataFromMldev$1(xe));const Ee=getValueByPath(t,["tokenCount"]);Ee!=null&&setValueByPath(e,["tokenCount"],Ee);const Ae=getValueByPath(t,["finishReason"]);Ae!=null&&setValueByPath(e,["finishReason"],Ae);const Pe=getValueByPath(t,["avgLogprobs"]);Pe!=null&&setValueByPath(e,["avgLogprobs"],Pe);const Re=getValueByPath(t,["groundingMetadata"]);Re!=null&&setValueByPath(e,["groundingMetadata"],Re);const Ce=getValueByPath(t,["index"]);Ce!=null&&setValueByPath(e,["index"],Ce);const Be=getValueByPath(t,["logprobsResult"]);Be!=null&&setValueByPath(e,["logprobsResult"],Be);const ke=getValueByPath(t,["safetyRatings"]);if(ke!=null){let Fe=ke;Array.isArray(Fe)&&(Fe=Fe.map(Ve=>Ve)),setValueByPath(e,["safetyRatings"],Fe)}const Me=getValueByPath(t,["urlContextMetadata"]);return Me!=null&&setValueByPath(e,["urlContextMetadata"],Me),e}function citationMetadataFromMldev$1(t){const e={},r=getValueByPath(t,["citationSources"]);if(r!=null){let xe=r;Array.isArray(xe)&&(xe=xe.map(Ee=>Ee)),setValueByPath(e,["citations"],xe)}return e}function contentToMldev$4(t){const e={},r=getValueByPath(t,["parts"]);if(r!=null){let Ee=r;Array.isArray(Ee)&&(Ee=Ee.map(Ae=>partToMldev$4(Ae))),setValueByPath(e,["parts"],Ee)}const xe=getValueByPath(t,["role"]);return xe!=null&&setValueByPath(e,["role"],xe),e}function createBatchJobConfigToMldev(t,e){const r={},xe=getValueByPath(t,["displayName"]);if(e!==void 0&&xe!=null&&setValueByPath(e,["batch","displayName"],xe),getValueByPath(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return r}function createBatchJobConfigToVertex(t,e){const r={},xe=getValueByPath(t,["displayName"]);e!==void 0&&xe!=null&&setValueByPath(e,["displayName"],xe);const Ee=getValueByPath(t,["dest"]);return e!==void 0&&Ee!=null&&setValueByPath(e,["outputConfig"],batchJobDestinationToVertex(tBatchJobDestination(Ee))),r}function createBatchJobParametersToMldev(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","model"],tModel(t,xe));const Ee=getValueByPath(e,["src"]);Ee!=null&&setValueByPath(r,["batch","inputConfig"],batchJobSourceToMldev(t,tBatchJobSource(t,Ee)));const Ae=getValueByPath(e,["config"]);return Ae!=null&&createBatchJobConfigToMldev(Ae,r),r}function createBatchJobParametersToVertex(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["model"],tModel(t,xe));const Ee=getValueByPath(e,["src"]);Ee!=null&&setValueByPath(r,["inputConfig"],batchJobSourceToVertex(tBatchJobSource(t,Ee)));const Ae=getValueByPath(e,["config"]);return Ae!=null&&createBatchJobConfigToVertex(Ae,r),r}function createEmbeddingsBatchJobConfigToMldev(t,e){const r={},xe=getValueByPath(t,["displayName"]);return e!==void 0&&xe!=null&&setValueByPath(e,["batch","displayName"],xe),r}function createEmbeddingsBatchJobParametersToMldev(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","model"],tModel(t,xe));const Ee=getValueByPath(e,["src"]);Ee!=null&&setValueByPath(r,["batch","inputConfig"],embeddingsBatchJobSourceToMldev(t,Ee));const Ae=getValueByPath(e,["config"]);return Ae!=null&&createEmbeddingsBatchJobConfigToMldev(Ae,r),r}function deleteBatchJobParametersToMldev(t,e){const r={},xe=getValueByPath(e,["name"]);return xe!=null&&setValueByPath(r,["_url","name"],tBatchJobName(t,xe)),r}function deleteBatchJobParametersToVertex(t,e){const r={},xe=getValueByPath(e,["name"]);return xe!=null&&setValueByPath(r,["_url","name"],tBatchJobName(t,xe)),r}function deleteResourceJobFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["name"]);xe!=null&&setValueByPath(e,["name"],xe);const Ee=getValueByPath(t,["done"]);Ee!=null&&setValueByPath(e,["done"],Ee);const Ae=getValueByPath(t,["error"]);return Ae!=null&&setValueByPath(e,["error"],Ae),e}function deleteResourceJobFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["name"]);xe!=null&&setValueByPath(e,["name"],xe);const Ee=getValueByPath(t,["done"]);Ee!=null&&setValueByPath(e,["done"],Ee);const Ae=getValueByPath(t,["error"]);return Ae!=null&&setValueByPath(e,["error"],Ae),e}function embedContentBatchToMldev(t,e){const r={},xe=getValueByPath(e,["contents"]);if(xe!=null){let Ae=tContentsForEmbed(t,xe);Array.isArray(Ae)&&(Ae=Ae.map(Pe=>Pe)),setValueByPath(r,["requests[]","request","content"],Ae)}const Ee=getValueByPath(e,["config"]);return Ee!=null&&(setValueByPath(r,["_self"],embedContentConfigToMldev$1(Ee,r)),moveValueByPath(r,{"requests[].*":"requests[].request.*"})),r}function embedContentConfigToMldev$1(t,e){const r={},xe=getValueByPath(t,["taskType"]);e!==void 0&&xe!=null&&setValueByPath(e,["requests[]","taskType"],xe);const Ee=getValueByPath(t,["title"]);e!==void 0&&Ee!=null&&setValueByPath(e,["requests[]","title"],Ee);const Ae=getValueByPath(t,["outputDimensionality"]);if(e!==void 0&&Ae!=null&&setValueByPath(e,["requests[]","outputDimensionality"],Ae),getValueByPath(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(getValueByPath(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function embeddingsBatchJobSourceToMldev(t,e){const r={},xe=getValueByPath(e,["fileName"]);xe!=null&&setValueByPath(r,["file_name"],xe);const Ee=getValueByPath(e,["inlinedRequests"]);return Ee!=null&&setValueByPath(r,["requests"],embedContentBatchToMldev(t,Ee)),r}function fileDataToMldev$4(t){const e={};if(getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=getValueByPath(t,["fileUri"]);r!=null&&setValueByPath(e,["fileUri"],r);const xe=getValueByPath(t,["mimeType"]);return xe!=null&&setValueByPath(e,["mimeType"],xe),e}function functionCallToMldev$4(t){const e={},r=getValueByPath(t,["id"]);r!=null&&setValueByPath(e,["id"],r);const xe=getValueByPath(t,["args"]);xe!=null&&setValueByPath(e,["args"],xe);const Ee=getValueByPath(t,["name"]);if(Ee!=null&&setValueByPath(e,["name"],Ee),getValueByPath(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(getValueByPath(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function functionCallingConfigToMldev$2(t){const e={},r=getValueByPath(t,["mode"]);r!=null&&setValueByPath(e,["mode"],r);const xe=getValueByPath(t,["allowedFunctionNames"]);if(xe!=null&&setValueByPath(e,["allowedFunctionNames"],xe),getValueByPath(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function generateContentConfigToMldev$1(t,e,r){const xe={},Ee=getValueByPath(e,["systemInstruction"]);r!==void 0&&Ee!=null&&setValueByPath(r,["systemInstruction"],contentToMldev$4(tContent(Ee)));const Ae=getValueByPath(e,["temperature"]);Ae!=null&&setValueByPath(xe,["temperature"],Ae);const Pe=getValueByPath(e,["topP"]);Pe!=null&&setValueByPath(xe,["topP"],Pe);const Re=getValueByPath(e,["topK"]);Re!=null&&setValueByPath(xe,["topK"],Re);const Ce=getValueByPath(e,["candidateCount"]);Ce!=null&&setValueByPath(xe,["candidateCount"],Ce);const Be=getValueByPath(e,["maxOutputTokens"]);Be!=null&&setValueByPath(xe,["maxOutputTokens"],Be);const ke=getValueByPath(e,["stopSequences"]);ke!=null&&setValueByPath(xe,["stopSequences"],ke);const Me=getValueByPath(e,["responseLogprobs"]);Me!=null&&setValueByPath(xe,["responseLogprobs"],Me);const Fe=getValueByPath(e,["logprobs"]);Fe!=null&&setValueByPath(xe,["logprobs"],Fe);const Ve=getValueByPath(e,["presencePenalty"]);Ve!=null&&setValueByPath(xe,["presencePenalty"],Ve);const Oe=getValueByPath(e,["frequencyPenalty"]);Oe!=null&&setValueByPath(xe,["frequencyPenalty"],Oe);const $e=getValueByPath(e,["seed"]);$e!=null&&setValueByPath(xe,["seed"],$e);const Ge=getValueByPath(e,["responseMimeType"]);Ge!=null&&setValueByPath(xe,["responseMimeType"],Ge);const Ue=getValueByPath(e,["responseSchema"]);Ue!=null&&setValueByPath(xe,["responseSchema"],tSchema(Ue));const Ye=getValueByPath(e,["responseJsonSchema"]);if(Ye!=null&&setValueByPath(xe,["responseJsonSchema"],Ye),getValueByPath(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(getValueByPath(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Qe=getValueByPath(e,["safetySettings"]);if(r!==void 0&&Qe!=null){let cn=Qe;Array.isArray(cn)&&(cn=cn.map(Sn=>safetySettingToMldev$1(Sn))),setValueByPath(r,["safetySettings"],cn)}const rn=getValueByPath(e,["tools"]);if(r!==void 0&&rn!=null){let cn=tTools(rn);Array.isArray(cn)&&(cn=cn.map(Sn=>toolToMldev$4(tTool(Sn)))),setValueByPath(r,["tools"],cn)}const tn=getValueByPath(e,["toolConfig"]);if(r!==void 0&&tn!=null&&setValueByPath(r,["toolConfig"],toolConfigToMldev$2(tn)),getValueByPath(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const an=getValueByPath(e,["cachedContent"]);r!==void 0&&an!=null&&setValueByPath(r,["cachedContent"],tCachedContentName(t,an));const qe=getValueByPath(e,["responseModalities"]);qe!=null&&setValueByPath(xe,["responseModalities"],qe);const Ke=getValueByPath(e,["mediaResolution"]);Ke!=null&&setValueByPath(xe,["mediaResolution"],Ke);const sn=getValueByPath(e,["speechConfig"]);if(sn!=null&&setValueByPath(xe,["speechConfig"],tSpeechConfig(sn)),getValueByPath(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const gn=getValueByPath(e,["thinkingConfig"]);gn!=null&&setValueByPath(xe,["thinkingConfig"],gn);const He=getValueByPath(e,["imageConfig"]);He!=null&&setValueByPath(xe,["imageConfig"],imageConfigToMldev$1(He));const en=getValueByPath(e,["enableEnhancedCivicAnswers"]);return en!=null&&setValueByPath(xe,["enableEnhancedCivicAnswers"],en),xe}function generateContentResponseFromMldev$1(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["candidates"]);if(xe!=null){let Ce=xe;Array.isArray(Ce)&&(Ce=Ce.map(Be=>candidateFromMldev$1(Be))),setValueByPath(e,["candidates"],Ce)}const Ee=getValueByPath(t,["modelVersion"]);Ee!=null&&setValueByPath(e,["modelVersion"],Ee);const Ae=getValueByPath(t,["promptFeedback"]);Ae!=null&&setValueByPath(e,["promptFeedback"],Ae);const Pe=getValueByPath(t,["responseId"]);Pe!=null&&setValueByPath(e,["responseId"],Pe);const Re=getValueByPath(t,["usageMetadata"]);return Re!=null&&setValueByPath(e,["usageMetadata"],Re),e}function getBatchJobParametersToMldev(t,e){const r={},xe=getValueByPath(e,["name"]);return xe!=null&&setValueByPath(r,["_url","name"],tBatchJobName(t,xe)),r}function getBatchJobParametersToVertex(t,e){const r={},xe=getValueByPath(e,["name"]);return xe!=null&&setValueByPath(r,["_url","name"],tBatchJobName(t,xe)),r}function googleMapsToMldev$4(t){const e={};if(getValueByPath(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=getValueByPath(t,["enableWidget"]);return r!=null&&setValueByPath(e,["enableWidget"],r),e}function googleSearchToMldev$4(t){const e={};if(getValueByPath(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(getValueByPath(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=getValueByPath(t,["timeRangeFilter"]);return r!=null&&setValueByPath(e,["timeRangeFilter"],r),e}function imageConfigToMldev$1(t){const e={},r=getValueByPath(t,["aspectRatio"]);r!=null&&setValueByPath(e,["aspectRatio"],r);const xe=getValueByPath(t,["imageSize"]);if(xe!=null&&setValueByPath(e,["imageSize"],xe),getValueByPath(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(getValueByPath(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function inlinedRequestToMldev(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["request","model"],tModel(t,xe));const Ee=getValueByPath(e,["contents"]);if(Ee!=null){let Re=tContents(Ee);Array.isArray(Re)&&(Re=Re.map(Ce=>contentToMldev$4(Ce))),setValueByPath(r,["request","contents"],Re)}const Ae=getValueByPath(e,["metadata"]);Ae!=null&&setValueByPath(r,["metadata"],Ae);const Pe=getValueByPath(e,["config"]);return Pe!=null&&setValueByPath(r,["request","generationConfig"],generateContentConfigToMldev$1(t,Pe,getValueByPath(r,["request"],{}))),r}function inlinedResponseFromMldev(t){const e={},r=getValueByPath(t,["response"]);r!=null&&setValueByPath(e,["response"],generateContentResponseFromMldev$1(r));const xe=getValueByPath(t,["error"]);return xe!=null&&setValueByPath(e,["error"],xe),e}function listBatchJobsConfigToMldev(t,e){const r={},xe=getValueByPath(t,["pageSize"]);e!==void 0&&xe!=null&&setValueByPath(e,["_query","pageSize"],xe);const Ee=getValueByPath(t,["pageToken"]);if(e!==void 0&&Ee!=null&&setValueByPath(e,["_query","pageToken"],Ee),getValueByPath(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return r}function listBatchJobsConfigToVertex(t,e){const r={},xe=getValueByPath(t,["pageSize"]);e!==void 0&&xe!=null&&setValueByPath(e,["_query","pageSize"],xe);const Ee=getValueByPath(t,["pageToken"]);e!==void 0&&Ee!=null&&setValueByPath(e,["_query","pageToken"],Ee);const Ae=getValueByPath(t,["filter"]);return e!==void 0&&Ae!=null&&setValueByPath(e,["_query","filter"],Ae),r}function listBatchJobsParametersToMldev(t){const e={},r=getValueByPath(t,["config"]);return r!=null&&listBatchJobsConfigToMldev(r,e),e}function listBatchJobsParametersToVertex(t){const e={},r=getValueByPath(t,["config"]);return r!=null&&listBatchJobsConfigToVertex(r,e),e}function listBatchJobsResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["nextPageToken"]);xe!=null&&setValueByPath(e,["nextPageToken"],xe);const Ee=getValueByPath(t,["operations"]);if(Ee!=null){let Ae=Ee;Array.isArray(Ae)&&(Ae=Ae.map(Pe=>batchJobFromMldev(Pe))),setValueByPath(e,["batchJobs"],Ae)}return e}function listBatchJobsResponseFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["nextPageToken"]);xe!=null&&setValueByPath(e,["nextPageToken"],xe);const Ee=getValueByPath(t,["batchPredictionJobs"]);if(Ee!=null){let Ae=Ee;Array.isArray(Ae)&&(Ae=Ae.map(Pe=>batchJobFromVertex(Pe))),setValueByPath(e,["batchJobs"],Ae)}return e}function partToMldev$4(t){const e={},r=getValueByPath(t,["mediaResolution"]);r!=null&&setValueByPath(e,["mediaResolution"],r);const xe=getValueByPath(t,["codeExecutionResult"]);xe!=null&&setValueByPath(e,["codeExecutionResult"],xe);const Ee=getValueByPath(t,["executableCode"]);Ee!=null&&setValueByPath(e,["executableCode"],Ee);const Ae=getValueByPath(t,["fileData"]);Ae!=null&&setValueByPath(e,["fileData"],fileDataToMldev$4(Ae));const Pe=getValueByPath(t,["functionCall"]);Pe!=null&&setValueByPath(e,["functionCall"],functionCallToMldev$4(Pe));const Re=getValueByPath(t,["functionResponse"]);Re!=null&&setValueByPath(e,["functionResponse"],Re);const Ce=getValueByPath(t,["inlineData"]);Ce!=null&&setValueByPath(e,["inlineData"],blobToMldev$4(Ce));const Be=getValueByPath(t,["text"]);Be!=null&&setValueByPath(e,["text"],Be);const ke=getValueByPath(t,["thought"]);ke!=null&&setValueByPath(e,["thought"],ke);const Me=getValueByPath(t,["thoughtSignature"]);Me!=null&&setValueByPath(e,["thoughtSignature"],Me);const Fe=getValueByPath(t,["videoMetadata"]);return Fe!=null&&setValueByPath(e,["videoMetadata"],Fe),e}function safetySettingToMldev$1(t){const e={},r=getValueByPath(t,["category"]);if(r!=null&&setValueByPath(e,["category"],r),getValueByPath(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const xe=getValueByPath(t,["threshold"]);return xe!=null&&setValueByPath(e,["threshold"],xe),e}function toolConfigToMldev$2(t){const e={},r=getValueByPath(t,["functionCallingConfig"]);r!=null&&setValueByPath(e,["functionCallingConfig"],functionCallingConfigToMldev$2(r));const xe=getValueByPath(t,["retrievalConfig"]);return xe!=null&&setValueByPath(e,["retrievalConfig"],xe),e}function toolToMldev$4(t){const e={},r=getValueByPath(t,["functionDeclarations"]);if(r!=null){let ke=r;Array.isArray(ke)&&(ke=ke.map(Me=>Me)),setValueByPath(e,["functionDeclarations"],ke)}if(getValueByPath(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const xe=getValueByPath(t,["googleSearchRetrieval"]);xe!=null&&setValueByPath(e,["googleSearchRetrieval"],xe);const Ee=getValueByPath(t,["computerUse"]);Ee!=null&&setValueByPath(e,["computerUse"],Ee);const Ae=getValueByPath(t,["fileSearch"]);Ae!=null&&setValueByPath(e,["fileSearch"],Ae);const Pe=getValueByPath(t,["codeExecution"]);if(Pe!=null&&setValueByPath(e,["codeExecution"],Pe),getValueByPath(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const Re=getValueByPath(t,["googleMaps"]);Re!=null&&setValueByPath(e,["googleMaps"],googleMapsToMldev$4(Re));const Ce=getValueByPath(t,["googleSearch"]);Ce!=null&&setValueByPath(e,["googleSearch"],googleSearchToMldev$4(Ce));const Be=getValueByPath(t,["urlContext"]);return Be!=null&&setValueByPath(e,["urlContext"],Be),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var PagedItem;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(PagedItem||(PagedItem={}));class Pager{constructor(e,r,xe,Ee){this.pageInternal=[],this.paramsInternal={},this.requestInternal=r,this.init(e,xe,Ee)}init(e,r,xe){var Ee,Ae;this.nameInternal=e,this.pageInternal=r[this.nameInternal]||[],this.sdkHttpResponseInternal=r==null?void 0:r.sdkHttpResponse,this.idxInternal=0;let Pe={config:{}};!xe||Object.keys(xe).length===0?Pe={config:{}}:typeof xe=="object"?Pe=Object.assign({},xe):Pe=xe,Pe.config&&(Pe.config.pageToken=r.nextPageToken),this.paramsInternal=Pe,this.pageInternalSize=(Ae=(Ee=Pe.config)===null||Ee===void 0?void 0:Ee.pageSize)!==null&&Ae!==void 0?Ae:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Batches extends BaseModule{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new Pager(PagedItem.PAGED_ITEM_BATCH_JOBS,xe=>this.listInternal(xe),await this.listInternal(r),r),this.create=async r=>(this.apiClient.isVertexAI()&&(r.config=this.formatDestination(r.src,r.config)),this.createInternal(r)),this.createEmbeddings=async r=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(r)}}createInlinedGenerateContentRequest(e){const r=createBatchJobParametersToMldev(this.apiClient,e),xe=r._url,Ee=formatMap("{model}:batchGenerateContent",xe),Re=r.batch.inputConfig.requests,Ce=Re.requests,Be=[];for(const ke of Ce){const Me=Object.assign({},ke);if(Me.systemInstruction){const Fe=Me.systemInstruction;delete Me.systemInstruction;const Ve=Me.request;Ve.systemInstruction=Fe,Me.request=Ve}Be.push(Me)}return Re.requests=Be,delete r.config,delete r._url,delete r._query,{path:Ee,body:r}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,r){const xe=r?Object.assign({},r):{},Ee=Date.now().toString();if(xe.displayName||(xe.displayName=`genaiBatchJob_${Ee}`),xe.dest===void 0){const Ae=this.getGcsUri(e),Pe=this.getBigqueryUri(e);if(Ae)Ae.endsWith(".jsonl")?xe.dest=`${Ae.slice(0,-6)}/dest`:xe.dest=`${Ae}_dest_${Ee}`;else if(Pe)xe.dest=`${Pe}_dest_${Ee}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return xe}async createInternal(e){var r,xe,Ee,Ae;let Pe,Re="",Ce={};if(this.apiClient.isVertexAI()){const Be=createBatchJobParametersToVertex(this.apiClient,e);return Re=formatMap("batchPredictionJobs",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(ke=>ke.json()),Pe.then(ke=>batchJobFromVertex(ke))}else{const Be=createBatchJobParametersToMldev(this.apiClient,e);return Re=formatMap("{model}:batchGenerateContent",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"POST",httpOptions:(Ee=e.config)===null||Ee===void 0?void 0:Ee.httpOptions,abortSignal:(Ae=e.config)===null||Ae===void 0?void 0:Ae.abortSignal}).then(ke=>ke.json()),Pe.then(ke=>batchJobFromMldev(ke))}}async createEmbeddingsInternal(e){var r,xe;let Ee,Ae="",Pe={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const Re=createEmbeddingsBatchJobParametersToMldev(this.apiClient,e);return Ae=formatMap("{model}:asyncBatchEmbedContent",Re._url),Pe=Re._query,delete Re._url,delete Re._query,Ee=this.apiClient.request({path:Ae,queryParams:Pe,body:JSON.stringify(Re),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Ce=>Ce.json()),Ee.then(Ce=>batchJobFromMldev(Ce))}}async get(e){var r,xe,Ee,Ae;let Pe,Re="",Ce={};if(this.apiClient.isVertexAI()){const Be=getBatchJobParametersToVertex(this.apiClient,e);return Re=formatMap("batchPredictionJobs/{name}",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(ke=>ke.json()),Pe.then(ke=>batchJobFromVertex(ke))}else{const Be=getBatchJobParametersToMldev(this.apiClient,e);return Re=formatMap("batches/{name}",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"GET",httpOptions:(Ee=e.config)===null||Ee===void 0?void 0:Ee.httpOptions,abortSignal:(Ae=e.config)===null||Ae===void 0?void 0:Ae.abortSignal}).then(ke=>ke.json()),Pe.then(ke=>batchJobFromMldev(ke))}}async cancel(e){var r,xe,Ee,Ae;let Pe="",Re={};if(this.apiClient.isVertexAI()){const Ce=cancelBatchJobParametersToVertex(this.apiClient,e);Pe=formatMap("batchPredictionJobs/{name}:cancel",Ce._url),Re=Ce._query,delete Ce._url,delete Ce._query,await this.apiClient.request({path:Pe,queryParams:Re,body:JSON.stringify(Ce),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal})}else{const Ce=cancelBatchJobParametersToMldev(this.apiClient,e);Pe=formatMap("batches/{name}:cancel",Ce._url),Re=Ce._query,delete Ce._url,delete Ce._query,await this.apiClient.request({path:Pe,queryParams:Re,body:JSON.stringify(Ce),httpMethod:"POST",httpOptions:(Ee=e.config)===null||Ee===void 0?void 0:Ee.httpOptions,abortSignal:(Ae=e.config)===null||Ae===void 0?void 0:Ae.abortSignal})}}async listInternal(e){var r,xe,Ee,Ae;let Pe,Re="",Ce={};if(this.apiClient.isVertexAI()){const Be=listBatchJobsParametersToVertex(e);return Re=formatMap("batchPredictionJobs",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(ke=>ke.json().then(Me=>{const Fe=Me;return Fe.sdkHttpResponse={headers:ke.headers},Fe})),Pe.then(ke=>{const Me=listBatchJobsResponseFromVertex(ke),Fe=new ListBatchJobsResponse;return Object.assign(Fe,Me),Fe})}else{const Be=listBatchJobsParametersToMldev(e);return Re=formatMap("batches",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"GET",httpOptions:(Ee=e.config)===null||Ee===void 0?void 0:Ee.httpOptions,abortSignal:(Ae=e.config)===null||Ae===void 0?void 0:Ae.abortSignal}).then(ke=>ke.json().then(Me=>{const Fe=Me;return Fe.sdkHttpResponse={headers:ke.headers},Fe})),Pe.then(ke=>{const Me=listBatchJobsResponseFromMldev(ke),Fe=new ListBatchJobsResponse;return Object.assign(Fe,Me),Fe})}}async delete(e){var r,xe,Ee,Ae;let Pe,Re="",Ce={};if(this.apiClient.isVertexAI()){const Be=deleteBatchJobParametersToVertex(this.apiClient,e);return Re=formatMap("batchPredictionJobs/{name}",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(ke=>ke.json().then(Me=>{const Fe=Me;return Fe.sdkHttpResponse={headers:ke.headers},Fe})),Pe.then(ke=>deleteResourceJobFromVertex(ke))}else{const Be=deleteBatchJobParametersToMldev(this.apiClient,e);return Re=formatMap("batches/{name}",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"DELETE",httpOptions:(Ee=e.config)===null||Ee===void 0?void 0:Ee.httpOptions,abortSignal:(Ae=e.config)===null||Ae===void 0?void 0:Ae.abortSignal}).then(ke=>ke.json().then(Me=>{const Fe=Me;return Fe.sdkHttpResponse={headers:ke.headers},Fe})),Pe.then(ke=>deleteResourceJobFromMldev(ke))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function blobToMldev$3(t){const e={},r=getValueByPath(t,["data"]);if(r!=null&&setValueByPath(e,["data"],r),getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const xe=getValueByPath(t,["mimeType"]);return xe!=null&&setValueByPath(e,["mimeType"],xe),e}function contentToMldev$3(t){const e={},r=getValueByPath(t,["parts"]);if(r!=null){let Ee=r;Array.isArray(Ee)&&(Ee=Ee.map(Ae=>partToMldev$3(Ae))),setValueByPath(e,["parts"],Ee)}const xe=getValueByPath(t,["role"]);return xe!=null&&setValueByPath(e,["role"],xe),e}function createCachedContentConfigToMldev(t,e){const r={},xe=getValueByPath(t,["ttl"]);e!==void 0&&xe!=null&&setValueByPath(e,["ttl"],xe);const Ee=getValueByPath(t,["expireTime"]);e!==void 0&&Ee!=null&&setValueByPath(e,["expireTime"],Ee);const Ae=getValueByPath(t,["displayName"]);e!==void 0&&Ae!=null&&setValueByPath(e,["displayName"],Ae);const Pe=getValueByPath(t,["contents"]);if(e!==void 0&&Pe!=null){let ke=tContents(Pe);Array.isArray(ke)&&(ke=ke.map(Me=>contentToMldev$3(Me))),setValueByPath(e,["contents"],ke)}const Re=getValueByPath(t,["systemInstruction"]);e!==void 0&&Re!=null&&setValueByPath(e,["systemInstruction"],contentToMldev$3(tContent(Re)));const Ce=getValueByPath(t,["tools"]);if(e!==void 0&&Ce!=null){let ke=Ce;Array.isArray(ke)&&(ke=ke.map(Me=>toolToMldev$3(Me))),setValueByPath(e,["tools"],ke)}const Be=getValueByPath(t,["toolConfig"]);if(e!==void 0&&Be!=null&&setValueByPath(e,["toolConfig"],toolConfigToMldev$1(Be)),getValueByPath(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return r}function createCachedContentConfigToVertex(t,e){const r={},xe=getValueByPath(t,["ttl"]);e!==void 0&&xe!=null&&setValueByPath(e,["ttl"],xe);const Ee=getValueByPath(t,["expireTime"]);e!==void 0&&Ee!=null&&setValueByPath(e,["expireTime"],Ee);const Ae=getValueByPath(t,["displayName"]);e!==void 0&&Ae!=null&&setValueByPath(e,["displayName"],Ae);const Pe=getValueByPath(t,["contents"]);if(e!==void 0&&Pe!=null){let Me=tContents(Pe);Array.isArray(Me)&&(Me=Me.map(Fe=>Fe)),setValueByPath(e,["contents"],Me)}const Re=getValueByPath(t,["systemInstruction"]);e!==void 0&&Re!=null&&setValueByPath(e,["systemInstruction"],tContent(Re));const Ce=getValueByPath(t,["tools"]);if(e!==void 0&&Ce!=null){let Me=Ce;Array.isArray(Me)&&(Me=Me.map(Fe=>toolToVertex$2(Fe))),setValueByPath(e,["tools"],Me)}const Be=getValueByPath(t,["toolConfig"]);e!==void 0&&Be!=null&&setValueByPath(e,["toolConfig"],Be);const ke=getValueByPath(t,["kmsKeyName"]);return e!==void 0&&ke!=null&&setValueByPath(e,["encryption_spec","kmsKeyName"],ke),r}function createCachedContentParametersToMldev(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["model"],tCachesModel(t,xe));const Ee=getValueByPath(e,["config"]);return Ee!=null&&createCachedContentConfigToMldev(Ee,r),r}function createCachedContentParametersToVertex(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["model"],tCachesModel(t,xe));const Ee=getValueByPath(e,["config"]);return Ee!=null&&createCachedContentConfigToVertex(Ee,r),r}function deleteCachedContentParametersToMldev(t,e){const r={},xe=getValueByPath(e,["name"]);return xe!=null&&setValueByPath(r,["_url","name"],tCachedContentName(t,xe)),r}function deleteCachedContentParametersToVertex(t,e){const r={},xe=getValueByPath(e,["name"]);return xe!=null&&setValueByPath(r,["_url","name"],tCachedContentName(t,xe)),r}function deleteCachedContentResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);return r!=null&&setValueByPath(e,["sdkHttpResponse"],r),e}function deleteCachedContentResponseFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);return r!=null&&setValueByPath(e,["sdkHttpResponse"],r),e}function fileDataToMldev$3(t){const e={};if(getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=getValueByPath(t,["fileUri"]);r!=null&&setValueByPath(e,["fileUri"],r);const xe=getValueByPath(t,["mimeType"]);return xe!=null&&setValueByPath(e,["mimeType"],xe),e}function functionCallToMldev$3(t){const e={},r=getValueByPath(t,["id"]);r!=null&&setValueByPath(e,["id"],r);const xe=getValueByPath(t,["args"]);xe!=null&&setValueByPath(e,["args"],xe);const Ee=getValueByPath(t,["name"]);if(Ee!=null&&setValueByPath(e,["name"],Ee),getValueByPath(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(getValueByPath(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function functionCallingConfigToMldev$1(t){const e={},r=getValueByPath(t,["mode"]);r!=null&&setValueByPath(e,["mode"],r);const xe=getValueByPath(t,["allowedFunctionNames"]);if(xe!=null&&setValueByPath(e,["allowedFunctionNames"],xe),getValueByPath(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function functionDeclarationToVertex$2(t){const e={};if(getValueByPath(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=getValueByPath(t,["description"]);r!=null&&setValueByPath(e,["description"],r);const xe=getValueByPath(t,["name"]);xe!=null&&setValueByPath(e,["name"],xe);const Ee=getValueByPath(t,["parameters"]);Ee!=null&&setValueByPath(e,["parameters"],Ee);const Ae=getValueByPath(t,["parametersJsonSchema"]);Ae!=null&&setValueByPath(e,["parametersJsonSchema"],Ae);const Pe=getValueByPath(t,["response"]);Pe!=null&&setValueByPath(e,["response"],Pe);const Re=getValueByPath(t,["responseJsonSchema"]);return Re!=null&&setValueByPath(e,["responseJsonSchema"],Re),e}function getCachedContentParametersToMldev(t,e){const r={},xe=getValueByPath(e,["name"]);return xe!=null&&setValueByPath(r,["_url","name"],tCachedContentName(t,xe)),r}function getCachedContentParametersToVertex(t,e){const r={},xe=getValueByPath(e,["name"]);return xe!=null&&setValueByPath(r,["_url","name"],tCachedContentName(t,xe)),r}function googleMapsToMldev$3(t){const e={};if(getValueByPath(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=getValueByPath(t,["enableWidget"]);return r!=null&&setValueByPath(e,["enableWidget"],r),e}function googleSearchToMldev$3(t){const e={};if(getValueByPath(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(getValueByPath(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=getValueByPath(t,["timeRangeFilter"]);return r!=null&&setValueByPath(e,["timeRangeFilter"],r),e}function listCachedContentsConfigToMldev(t,e){const r={},xe=getValueByPath(t,["pageSize"]);e!==void 0&&xe!=null&&setValueByPath(e,["_query","pageSize"],xe);const Ee=getValueByPath(t,["pageToken"]);return e!==void 0&&Ee!=null&&setValueByPath(e,["_query","pageToken"],Ee),r}function listCachedContentsConfigToVertex(t,e){const r={},xe=getValueByPath(t,["pageSize"]);e!==void 0&&xe!=null&&setValueByPath(e,["_query","pageSize"],xe);const Ee=getValueByPath(t,["pageToken"]);return e!==void 0&&Ee!=null&&setValueByPath(e,["_query","pageToken"],Ee),r}function listCachedContentsParametersToMldev(t){const e={},r=getValueByPath(t,["config"]);return r!=null&&listCachedContentsConfigToMldev(r,e),e}function listCachedContentsParametersToVertex(t){const e={},r=getValueByPath(t,["config"]);return r!=null&&listCachedContentsConfigToVertex(r,e),e}function listCachedContentsResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["nextPageToken"]);xe!=null&&setValueByPath(e,["nextPageToken"],xe);const Ee=getValueByPath(t,["cachedContents"]);if(Ee!=null){let Ae=Ee;Array.isArray(Ae)&&(Ae=Ae.map(Pe=>Pe)),setValueByPath(e,["cachedContents"],Ae)}return e}function listCachedContentsResponseFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["nextPageToken"]);xe!=null&&setValueByPath(e,["nextPageToken"],xe);const Ee=getValueByPath(t,["cachedContents"]);if(Ee!=null){let Ae=Ee;Array.isArray(Ae)&&(Ae=Ae.map(Pe=>Pe)),setValueByPath(e,["cachedContents"],Ae)}return e}function partToMldev$3(t){const e={},r=getValueByPath(t,["mediaResolution"]);r!=null&&setValueByPath(e,["mediaResolution"],r);const xe=getValueByPath(t,["codeExecutionResult"]);xe!=null&&setValueByPath(e,["codeExecutionResult"],xe);const Ee=getValueByPath(t,["executableCode"]);Ee!=null&&setValueByPath(e,["executableCode"],Ee);const Ae=getValueByPath(t,["fileData"]);Ae!=null&&setValueByPath(e,["fileData"],fileDataToMldev$3(Ae));const Pe=getValueByPath(t,["functionCall"]);Pe!=null&&setValueByPath(e,["functionCall"],functionCallToMldev$3(Pe));const Re=getValueByPath(t,["functionResponse"]);Re!=null&&setValueByPath(e,["functionResponse"],Re);const Ce=getValueByPath(t,["inlineData"]);Ce!=null&&setValueByPath(e,["inlineData"],blobToMldev$3(Ce));const Be=getValueByPath(t,["text"]);Be!=null&&setValueByPath(e,["text"],Be);const ke=getValueByPath(t,["thought"]);ke!=null&&setValueByPath(e,["thought"],ke);const Me=getValueByPath(t,["thoughtSignature"]);Me!=null&&setValueByPath(e,["thoughtSignature"],Me);const Fe=getValueByPath(t,["videoMetadata"]);return Fe!=null&&setValueByPath(e,["videoMetadata"],Fe),e}function toolConfigToMldev$1(t){const e={},r=getValueByPath(t,["functionCallingConfig"]);r!=null&&setValueByPath(e,["functionCallingConfig"],functionCallingConfigToMldev$1(r));const xe=getValueByPath(t,["retrievalConfig"]);return xe!=null&&setValueByPath(e,["retrievalConfig"],xe),e}function toolToMldev$3(t){const e={},r=getValueByPath(t,["functionDeclarations"]);if(r!=null){let ke=r;Array.isArray(ke)&&(ke=ke.map(Me=>Me)),setValueByPath(e,["functionDeclarations"],ke)}if(getValueByPath(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const xe=getValueByPath(t,["googleSearchRetrieval"]);xe!=null&&setValueByPath(e,["googleSearchRetrieval"],xe);const Ee=getValueByPath(t,["computerUse"]);Ee!=null&&setValueByPath(e,["computerUse"],Ee);const Ae=getValueByPath(t,["fileSearch"]);Ae!=null&&setValueByPath(e,["fileSearch"],Ae);const Pe=getValueByPath(t,["codeExecution"]);if(Pe!=null&&setValueByPath(e,["codeExecution"],Pe),getValueByPath(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const Re=getValueByPath(t,["googleMaps"]);Re!=null&&setValueByPath(e,["googleMaps"],googleMapsToMldev$3(Re));const Ce=getValueByPath(t,["googleSearch"]);Ce!=null&&setValueByPath(e,["googleSearch"],googleSearchToMldev$3(Ce));const Be=getValueByPath(t,["urlContext"]);return Be!=null&&setValueByPath(e,["urlContext"],Be),e}function toolToVertex$2(t){const e={},r=getValueByPath(t,["functionDeclarations"]);if(r!=null){let Me=r;Array.isArray(Me)&&(Me=Me.map(Fe=>functionDeclarationToVertex$2(Fe))),setValueByPath(e,["functionDeclarations"],Me)}const xe=getValueByPath(t,["retrieval"]);xe!=null&&setValueByPath(e,["retrieval"],xe);const Ee=getValueByPath(t,["googleSearchRetrieval"]);Ee!=null&&setValueByPath(e,["googleSearchRetrieval"],Ee);const Ae=getValueByPath(t,["computerUse"]);if(Ae!=null&&setValueByPath(e,["computerUse"],Ae),getValueByPath(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const Pe=getValueByPath(t,["codeExecution"]);Pe!=null&&setValueByPath(e,["codeExecution"],Pe);const Re=getValueByPath(t,["enterpriseWebSearch"]);Re!=null&&setValueByPath(e,["enterpriseWebSearch"],Re);const Ce=getValueByPath(t,["googleMaps"]);Ce!=null&&setValueByPath(e,["googleMaps"],Ce);const Be=getValueByPath(t,["googleSearch"]);Be!=null&&setValueByPath(e,["googleSearch"],Be);const ke=getValueByPath(t,["urlContext"]);return ke!=null&&setValueByPath(e,["urlContext"],ke),e}function updateCachedContentConfigToMldev(t,e){const r={},xe=getValueByPath(t,["ttl"]);e!==void 0&&xe!=null&&setValueByPath(e,["ttl"],xe);const Ee=getValueByPath(t,["expireTime"]);return e!==void 0&&Ee!=null&&setValueByPath(e,["expireTime"],Ee),r}function updateCachedContentConfigToVertex(t,e){const r={},xe=getValueByPath(t,["ttl"]);e!==void 0&&xe!=null&&setValueByPath(e,["ttl"],xe);const Ee=getValueByPath(t,["expireTime"]);return e!==void 0&&Ee!=null&&setValueByPath(e,["expireTime"],Ee),r}function updateCachedContentParametersToMldev(t,e){const r={},xe=getValueByPath(e,["name"]);xe!=null&&setValueByPath(r,["_url","name"],tCachedContentName(t,xe));const Ee=getValueByPath(e,["config"]);return Ee!=null&&updateCachedContentConfigToMldev(Ee,r),r}function updateCachedContentParametersToVertex(t,e){const r={},xe=getValueByPath(e,["name"]);xe!=null&&setValueByPath(r,["_url","name"],tCachedContentName(t,xe));const Ee=getValueByPath(e,["config"]);return Ee!=null&&updateCachedContentConfigToVertex(Ee,r),r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Caches extends BaseModule{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new Pager(PagedItem.PAGED_ITEM_CACHED_CONTENTS,xe=>this.listInternal(xe),await this.listInternal(r),r)}async create(e){var r,xe,Ee,Ae;let Pe,Re="",Ce={};if(this.apiClient.isVertexAI()){const Be=createCachedContentParametersToVertex(this.apiClient,e);return Re=formatMap("cachedContents",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(ke=>ke.json()),Pe.then(ke=>ke)}else{const Be=createCachedContentParametersToMldev(this.apiClient,e);return Re=formatMap("cachedContents",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"POST",httpOptions:(Ee=e.config)===null||Ee===void 0?void 0:Ee.httpOptions,abortSignal:(Ae=e.config)===null||Ae===void 0?void 0:Ae.abortSignal}).then(ke=>ke.json()),Pe.then(ke=>ke)}}async get(e){var r,xe,Ee,Ae;let Pe,Re="",Ce={};if(this.apiClient.isVertexAI()){const Be=getCachedContentParametersToVertex(this.apiClient,e);return Re=formatMap("{name}",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(ke=>ke.json()),Pe.then(ke=>ke)}else{const Be=getCachedContentParametersToMldev(this.apiClient,e);return Re=formatMap("{name}",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"GET",httpOptions:(Ee=e.config)===null||Ee===void 0?void 0:Ee.httpOptions,abortSignal:(Ae=e.config)===null||Ae===void 0?void 0:Ae.abortSignal}).then(ke=>ke.json()),Pe.then(ke=>ke)}}async delete(e){var r,xe,Ee,Ae;let Pe,Re="",Ce={};if(this.apiClient.isVertexAI()){const Be=deleteCachedContentParametersToVertex(this.apiClient,e);return Re=formatMap("{name}",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(ke=>ke.json().then(Me=>{const Fe=Me;return Fe.sdkHttpResponse={headers:ke.headers},Fe})),Pe.then(ke=>{const Me=deleteCachedContentResponseFromVertex(ke),Fe=new DeleteCachedContentResponse;return Object.assign(Fe,Me),Fe})}else{const Be=deleteCachedContentParametersToMldev(this.apiClient,e);return Re=formatMap("{name}",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"DELETE",httpOptions:(Ee=e.config)===null||Ee===void 0?void 0:Ee.httpOptions,abortSignal:(Ae=e.config)===null||Ae===void 0?void 0:Ae.abortSignal}).then(ke=>ke.json().then(Me=>{const Fe=Me;return Fe.sdkHttpResponse={headers:ke.headers},Fe})),Pe.then(ke=>{const Me=deleteCachedContentResponseFromMldev(ke),Fe=new DeleteCachedContentResponse;return Object.assign(Fe,Me),Fe})}}async update(e){var r,xe,Ee,Ae;let Pe,Re="",Ce={};if(this.apiClient.isVertexAI()){const Be=updateCachedContentParametersToVertex(this.apiClient,e);return Re=formatMap("{name}",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(ke=>ke.json()),Pe.then(ke=>ke)}else{const Be=updateCachedContentParametersToMldev(this.apiClient,e);return Re=formatMap("{name}",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"PATCH",httpOptions:(Ee=e.config)===null||Ee===void 0?void 0:Ee.httpOptions,abortSignal:(Ae=e.config)===null||Ae===void 0?void 0:Ae.abortSignal}).then(ke=>ke.json()),Pe.then(ke=>ke)}}async listInternal(e){var r,xe,Ee,Ae;let Pe,Re="",Ce={};if(this.apiClient.isVertexAI()){const Be=listCachedContentsParametersToVertex(e);return Re=formatMap("cachedContents",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(ke=>ke.json().then(Me=>{const Fe=Me;return Fe.sdkHttpResponse={headers:ke.headers},Fe})),Pe.then(ke=>{const Me=listCachedContentsResponseFromVertex(ke),Fe=new ListCachedContentsResponse;return Object.assign(Fe,Me),Fe})}else{const Be=listCachedContentsParametersToMldev(e);return Re=formatMap("cachedContents",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"GET",httpOptions:(Ee=e.config)===null||Ee===void 0?void 0:Ee.httpOptions,abortSignal:(Ae=e.config)===null||Ae===void 0?void 0:Ae.abortSignal}).then(ke=>ke.json().then(Me=>{const Fe=Me;return Fe.sdkHttpResponse={headers:ke.headers},Fe})),Pe.then(ke=>{const Me=listCachedContentsResponseFromMldev(ke),Fe=new ListCachedContentsResponse;return Object.assign(Fe,Me),Fe})}}}function __rest$1(t,e){var r={};for(var xe in t)Object.prototype.hasOwnProperty.call(t,xe)&&e.indexOf(xe)<0&&(r[xe]=t[xe]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ee=0,xe=Object.getOwnPropertySymbols(t);Ee<xe.length;Ee++)e.indexOf(xe[Ee])<0&&Object.prototype.propertyIsEnumerable.call(t,xe[Ee])&&(r[xe[Ee]]=t[xe[Ee]]);return r}function __values(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],xe=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&xe>=t.length&&(t=void 0),{value:t&&t[xe++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function __await(t){return this instanceof __await?(this.v=t,this):new __await(t)}function __asyncGenerator(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var xe=r.apply(t,e||[]),Ee,Ae=[];return Ee=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),Re("next"),Re("throw"),Re("return",Pe),Ee[Symbol.asyncIterator]=function(){return this},Ee;function Pe(Ve){return function(Oe){return Promise.resolve(Oe).then(Ve,Me)}}function Re(Ve,Oe){xe[Ve]&&(Ee[Ve]=function($e){return new Promise(function(Ge,Ue){Ae.push([Ve,$e,Ge,Ue])>1||Ce(Ve,$e)})},Oe&&(Ee[Ve]=Oe(Ee[Ve])))}function Ce(Ve,Oe){try{Be(xe[Ve](Oe))}catch($e){Fe(Ae[0][3],$e)}}function Be(Ve){Ve.value instanceof __await?Promise.resolve(Ve.value.v).then(ke,Me):Fe(Ae[0][2],Ve)}function ke(Ve){Ce("next",Ve)}function Me(Ve){Ce("throw",Ve)}function Fe(Ve,Oe){Ve(Oe),Ae.shift(),Ae.length&&Ce(Ae[0][0],Ae[0][1])}}function __asyncValues(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},xe("next"),xe("throw"),xe("return"),r[Symbol.asyncIterator]=function(){return this},r);function xe(Ae){r[Ae]=t[Ae]&&function(Pe){return new Promise(function(Re,Ce){Pe=t[Ae](Pe),Ee(Re,Ce,Pe.done,Pe.value)})}}function Ee(Ae,Pe,Re,Ce){Promise.resolve(Ce).then(function(Be){Ae({value:Be,done:Re})},Pe)}}typeof SuppressedError=="function"&&SuppressedError;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function isValidResponse(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const r=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return r===void 0?!1:isValidContent(r)}function isValidContent(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function validateHistory(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function extractCuratedHistory(t){if(t===void 0||t.length===0)return[];const e=[],r=t.length;let xe=0;for(;xe<r;)if(t[xe].role==="user")e.push(t[xe]),xe++;else{const Ee=[];let Ae=!0;for(;xe<r&&t[xe].role==="model";)Ee.push(t[xe]),Ae&&!isValidContent(t[xe])&&(Ae=!1),xe++;Ae?e.push(...Ee):e.pop()}return e}class Chats{constructor(e,r){this.modelsModule=e,this.apiClient=r}create(e){return new Chat(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Chat{constructor(e,r,xe,Ee={},Ae=[]){this.apiClient=e,this.modelsModule=r,this.model=xe,this.config=Ee,this.history=Ae,this.sendPromise=Promise.resolve(),validateHistory(Ae)}async sendMessage(e){var r;await this.sendPromise;const xe=tContent(e.message),Ee=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(xe),config:(r=e.config)!==null&&r!==void 0?r:this.config});return this.sendPromise=(async()=>{var Ae,Pe,Re;const Ce=await Ee,Be=(Pe=(Ae=Ce.candidates)===null||Ae===void 0?void 0:Ae[0])===null||Pe===void 0?void 0:Pe.content,ke=Ce.automaticFunctionCallingHistory,Me=this.getHistory(!0).length;let Fe=[];ke!=null&&(Fe=(Re=ke.slice(Me))!==null&&Re!==void 0?Re:[]);const Ve=Be?[Be]:[];this.recordHistory(xe,Ve,Fe)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),Ee}async sendMessageStream(e){var r;await this.sendPromise;const xe=tContent(e.message),Ee=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(xe),config:(r=e.config)!==null&&r!==void 0?r:this.config});this.sendPromise=Ee.then(()=>{}).catch(()=>{});const Ae=await Ee;return this.processStreamResponse(Ae,xe)}getHistory(e=!1){const r=e?extractCuratedHistory(this.history):this.history;return structuredClone(r)}processStreamResponse(e,r){return __asyncGenerator(this,arguments,function*(){var Ee,Ae,Pe,Re,Ce,Be;const ke=[];try{for(var Me=!0,Fe=__asyncValues(e),Ve;Ve=yield __await(Fe.next()),Ee=Ve.done,!Ee;Me=!0){Re=Ve.value,Me=!1;const Oe=Re;if(isValidResponse(Oe)){const $e=(Be=(Ce=Oe.candidates)===null||Ce===void 0?void 0:Ce[0])===null||Be===void 0?void 0:Be.content;$e!==void 0&&ke.push($e)}yield yield __await(Oe)}}catch(Oe){Ae={error:Oe}}finally{try{!Me&&!Ee&&(Pe=Fe.return)&&(yield __await(Pe.call(Fe)))}finally{if(Ae)throw Ae.error}}this.recordHistory(r,ke)})}recordHistory(e,r,xe){let Ee=[];r.length>0&&r.every(Ae=>Ae.role!==void 0)?Ee=r:Ee.push({role:"model",parts:[]}),xe&&xe.length>0?this.history.push(...extractCuratedHistory(xe)):this.history.push(e),this.history.push(...Ee)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ApiError extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ApiError.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function createFileParametersToMldev(t){const e={},r=getValueByPath(t,["file"]);return r!=null&&setValueByPath(e,["file"],r),e}function createFileResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);return r!=null&&setValueByPath(e,["sdkHttpResponse"],r),e}function deleteFileParametersToMldev(t){const e={},r=getValueByPath(t,["name"]);return r!=null&&setValueByPath(e,["_url","file"],tFileName(r)),e}function deleteFileResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);return r!=null&&setValueByPath(e,["sdkHttpResponse"],r),e}function getFileParametersToMldev(t){const e={},r=getValueByPath(t,["name"]);return r!=null&&setValueByPath(e,["_url","file"],tFileName(r)),e}function listFilesConfigToMldev(t,e){const r={},xe=getValueByPath(t,["pageSize"]);e!==void 0&&xe!=null&&setValueByPath(e,["_query","pageSize"],xe);const Ee=getValueByPath(t,["pageToken"]);return e!==void 0&&Ee!=null&&setValueByPath(e,["_query","pageToken"],Ee),r}function listFilesParametersToMldev(t){const e={},r=getValueByPath(t,["config"]);return r!=null&&listFilesConfigToMldev(r,e),e}function listFilesResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["nextPageToken"]);xe!=null&&setValueByPath(e,["nextPageToken"],xe);const Ee=getValueByPath(t,["files"]);if(Ee!=null){let Ae=Ee;Array.isArray(Ae)&&(Ae=Ae.map(Pe=>Pe)),setValueByPath(e,["files"],Ae)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Files extends BaseModule{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new Pager(PagedItem.PAGED_ITEM_FILES,xe=>this.listInternal(xe),await this.listInternal(r),r)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(r=>r)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var r,xe;let Ee,Ae="",Pe={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const Re=listFilesParametersToMldev(e);return Ae=formatMap("files",Re._url),Pe=Re._query,delete Re._url,delete Re._query,Ee=this.apiClient.request({path:Ae,queryParams:Pe,body:JSON.stringify(Re),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Ce=>Ce.json().then(Be=>{const ke=Be;return ke.sdkHttpResponse={headers:Ce.headers},ke})),Ee.then(Ce=>{const Be=listFilesResponseFromMldev(Ce),ke=new ListFilesResponse;return Object.assign(ke,Be),ke})}}async createInternal(e){var r,xe;let Ee,Ae="",Pe={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const Re=createFileParametersToMldev(e);return Ae=formatMap("upload/v1beta/files",Re._url),Pe=Re._query,delete Re._url,delete Re._query,Ee=this.apiClient.request({path:Ae,queryParams:Pe,body:JSON.stringify(Re),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Ce=>Ce.json()),Ee.then(Ce=>{const Be=createFileResponseFromMldev(Ce),ke=new CreateFileResponse;return Object.assign(ke,Be),ke})}}async get(e){var r,xe;let Ee,Ae="",Pe={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const Re=getFileParametersToMldev(e);return Ae=formatMap("files/{file}",Re._url),Pe=Re._query,delete Re._url,delete Re._query,Ee=this.apiClient.request({path:Ae,queryParams:Pe,body:JSON.stringify(Re),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Ce=>Ce.json()),Ee.then(Ce=>Ce)}}async delete(e){var r,xe;let Ee,Ae="",Pe={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const Re=deleteFileParametersToMldev(e);return Ae=formatMap("files/{file}",Re._url),Pe=Re._query,delete Re._url,delete Re._query,Ee=this.apiClient.request({path:Ae,queryParams:Pe,body:JSON.stringify(Re),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Ce=>Ce.json().then(Be=>{const ke=Be;return ke.sdkHttpResponse={headers:Ce.headers},ke})),Ee.then(Ce=>{const Be=deleteFileResponseFromMldev(Ce),ke=new DeleteFileResponse;return Object.assign(ke,Be),ke})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function blobToMldev$2(t){const e={},r=getValueByPath(t,["data"]);if(r!=null&&setValueByPath(e,["data"],r),getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const xe=getValueByPath(t,["mimeType"]);return xe!=null&&setValueByPath(e,["mimeType"],xe),e}function contentToMldev$2(t){const e={},r=getValueByPath(t,["parts"]);if(r!=null){let Ee=r;Array.isArray(Ee)&&(Ee=Ee.map(Ae=>partToMldev$2(Ae))),setValueByPath(e,["parts"],Ee)}const xe=getValueByPath(t,["role"]);return xe!=null&&setValueByPath(e,["role"],xe),e}function fileDataToMldev$2(t){const e={};if(getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=getValueByPath(t,["fileUri"]);r!=null&&setValueByPath(e,["fileUri"],r);const xe=getValueByPath(t,["mimeType"]);return xe!=null&&setValueByPath(e,["mimeType"],xe),e}function functionCallToMldev$2(t){const e={},r=getValueByPath(t,["id"]);r!=null&&setValueByPath(e,["id"],r);const xe=getValueByPath(t,["args"]);xe!=null&&setValueByPath(e,["args"],xe);const Ee=getValueByPath(t,["name"]);if(Ee!=null&&setValueByPath(e,["name"],Ee),getValueByPath(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(getValueByPath(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function functionDeclarationToVertex$1(t){const e={};if(getValueByPath(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=getValueByPath(t,["description"]);r!=null&&setValueByPath(e,["description"],r);const xe=getValueByPath(t,["name"]);xe!=null&&setValueByPath(e,["name"],xe);const Ee=getValueByPath(t,["parameters"]);Ee!=null&&setValueByPath(e,["parameters"],Ee);const Ae=getValueByPath(t,["parametersJsonSchema"]);Ae!=null&&setValueByPath(e,["parametersJsonSchema"],Ae);const Pe=getValueByPath(t,["response"]);Pe!=null&&setValueByPath(e,["response"],Pe);const Re=getValueByPath(t,["responseJsonSchema"]);return Re!=null&&setValueByPath(e,["responseJsonSchema"],Re),e}function generationConfigToVertex$1(t){const e={},r=getValueByPath(t,["modelSelectionConfig"]);r!=null&&setValueByPath(e,["modelConfig"],r);const xe=getValueByPath(t,["responseJsonSchema"]);xe!=null&&setValueByPath(e,["responseJsonSchema"],xe);const Ee=getValueByPath(t,["audioTimestamp"]);Ee!=null&&setValueByPath(e,["audioTimestamp"],Ee);const Ae=getValueByPath(t,["candidateCount"]);Ae!=null&&setValueByPath(e,["candidateCount"],Ae);const Pe=getValueByPath(t,["enableAffectiveDialog"]);Pe!=null&&setValueByPath(e,["enableAffectiveDialog"],Pe);const Re=getValueByPath(t,["frequencyPenalty"]);Re!=null&&setValueByPath(e,["frequencyPenalty"],Re);const Ce=getValueByPath(t,["logprobs"]);Ce!=null&&setValueByPath(e,["logprobs"],Ce);const Be=getValueByPath(t,["maxOutputTokens"]);Be!=null&&setValueByPath(e,["maxOutputTokens"],Be);const ke=getValueByPath(t,["mediaResolution"]);ke!=null&&setValueByPath(e,["mediaResolution"],ke);const Me=getValueByPath(t,["presencePenalty"]);Me!=null&&setValueByPath(e,["presencePenalty"],Me);const Fe=getValueByPath(t,["responseLogprobs"]);Fe!=null&&setValueByPath(e,["responseLogprobs"],Fe);const Ve=getValueByPath(t,["responseMimeType"]);Ve!=null&&setValueByPath(e,["responseMimeType"],Ve);const Oe=getValueByPath(t,["responseModalities"]);Oe!=null&&setValueByPath(e,["responseModalities"],Oe);const $e=getValueByPath(t,["responseSchema"]);$e!=null&&setValueByPath(e,["responseSchema"],$e);const Ge=getValueByPath(t,["routingConfig"]);Ge!=null&&setValueByPath(e,["routingConfig"],Ge);const Ue=getValueByPath(t,["seed"]);Ue!=null&&setValueByPath(e,["seed"],Ue);const Ye=getValueByPath(t,["speechConfig"]);Ye!=null&&setValueByPath(e,["speechConfig"],speechConfigToVertex$1(Ye));const Qe=getValueByPath(t,["stopSequences"]);Qe!=null&&setValueByPath(e,["stopSequences"],Qe);const rn=getValueByPath(t,["temperature"]);rn!=null&&setValueByPath(e,["temperature"],rn);const tn=getValueByPath(t,["thinkingConfig"]);tn!=null&&setValueByPath(e,["thinkingConfig"],tn);const an=getValueByPath(t,["topK"]);an!=null&&setValueByPath(e,["topK"],an);const qe=getValueByPath(t,["topP"]);if(qe!=null&&setValueByPath(e,["topP"],qe),getValueByPath(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function googleMapsToMldev$2(t){const e={};if(getValueByPath(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=getValueByPath(t,["enableWidget"]);return r!=null&&setValueByPath(e,["enableWidget"],r),e}function googleSearchToMldev$2(t){const e={};if(getValueByPath(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(getValueByPath(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=getValueByPath(t,["timeRangeFilter"]);return r!=null&&setValueByPath(e,["timeRangeFilter"],r),e}function liveConnectConfigToMldev$1(t,e){const r={},xe=getValueByPath(t,["generationConfig"]);e!==void 0&&xe!=null&&setValueByPath(e,["setup","generationConfig"],xe);const Ee=getValueByPath(t,["responseModalities"]);e!==void 0&&Ee!=null&&setValueByPath(e,["setup","generationConfig","responseModalities"],Ee);const Ae=getValueByPath(t,["temperature"]);e!==void 0&&Ae!=null&&setValueByPath(e,["setup","generationConfig","temperature"],Ae);const Pe=getValueByPath(t,["topP"]);e!==void 0&&Pe!=null&&setValueByPath(e,["setup","generationConfig","topP"],Pe);const Re=getValueByPath(t,["topK"]);e!==void 0&&Re!=null&&setValueByPath(e,["setup","generationConfig","topK"],Re);const Ce=getValueByPath(t,["maxOutputTokens"]);e!==void 0&&Ce!=null&&setValueByPath(e,["setup","generationConfig","maxOutputTokens"],Ce);const Be=getValueByPath(t,["mediaResolution"]);e!==void 0&&Be!=null&&setValueByPath(e,["setup","generationConfig","mediaResolution"],Be);const ke=getValueByPath(t,["seed"]);e!==void 0&&ke!=null&&setValueByPath(e,["setup","generationConfig","seed"],ke);const Me=getValueByPath(t,["speechConfig"]);e!==void 0&&Me!=null&&setValueByPath(e,["setup","generationConfig","speechConfig"],tLiveSpeechConfig(Me));const Fe=getValueByPath(t,["thinkingConfig"]);e!==void 0&&Fe!=null&&setValueByPath(e,["setup","generationConfig","thinkingConfig"],Fe);const Ve=getValueByPath(t,["enableAffectiveDialog"]);e!==void 0&&Ve!=null&&setValueByPath(e,["setup","generationConfig","enableAffectiveDialog"],Ve);const Oe=getValueByPath(t,["systemInstruction"]);e!==void 0&&Oe!=null&&setValueByPath(e,["setup","systemInstruction"],contentToMldev$2(tContent(Oe)));const $e=getValueByPath(t,["tools"]);if(e!==void 0&&$e!=null){let an=tTools($e);Array.isArray(an)&&(an=an.map(qe=>toolToMldev$2(tTool(qe)))),setValueByPath(e,["setup","tools"],an)}const Ge=getValueByPath(t,["sessionResumption"]);e!==void 0&&Ge!=null&&setValueByPath(e,["setup","sessionResumption"],sessionResumptionConfigToMldev$1(Ge));const Ue=getValueByPath(t,["inputAudioTranscription"]);e!==void 0&&Ue!=null&&setValueByPath(e,["setup","inputAudioTranscription"],Ue);const Ye=getValueByPath(t,["outputAudioTranscription"]);e!==void 0&&Ye!=null&&setValueByPath(e,["setup","outputAudioTranscription"],Ye);const Qe=getValueByPath(t,["realtimeInputConfig"]);e!==void 0&&Qe!=null&&setValueByPath(e,["setup","realtimeInputConfig"],Qe);const rn=getValueByPath(t,["contextWindowCompression"]);e!==void 0&&rn!=null&&setValueByPath(e,["setup","contextWindowCompression"],rn);const tn=getValueByPath(t,["proactivity"]);if(e!==void 0&&tn!=null&&setValueByPath(e,["setup","proactivity"],tn),getValueByPath(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return r}function liveConnectConfigToVertex(t,e){const r={},xe=getValueByPath(t,["generationConfig"]);e!==void 0&&xe!=null&&setValueByPath(e,["setup","generationConfig"],generationConfigToVertex$1(xe));const Ee=getValueByPath(t,["responseModalities"]);e!==void 0&&Ee!=null&&setValueByPath(e,["setup","generationConfig","responseModalities"],Ee);const Ae=getValueByPath(t,["temperature"]);e!==void 0&&Ae!=null&&setValueByPath(e,["setup","generationConfig","temperature"],Ae);const Pe=getValueByPath(t,["topP"]);e!==void 0&&Pe!=null&&setValueByPath(e,["setup","generationConfig","topP"],Pe);const Re=getValueByPath(t,["topK"]);e!==void 0&&Re!=null&&setValueByPath(e,["setup","generationConfig","topK"],Re);const Ce=getValueByPath(t,["maxOutputTokens"]);e!==void 0&&Ce!=null&&setValueByPath(e,["setup","generationConfig","maxOutputTokens"],Ce);const Be=getValueByPath(t,["mediaResolution"]);e!==void 0&&Be!=null&&setValueByPath(e,["setup","generationConfig","mediaResolution"],Be);const ke=getValueByPath(t,["seed"]);e!==void 0&&ke!=null&&setValueByPath(e,["setup","generationConfig","seed"],ke);const Me=getValueByPath(t,["speechConfig"]);e!==void 0&&Me!=null&&setValueByPath(e,["setup","generationConfig","speechConfig"],speechConfigToVertex$1(tLiveSpeechConfig(Me)));const Fe=getValueByPath(t,["thinkingConfig"]);e!==void 0&&Fe!=null&&setValueByPath(e,["setup","generationConfig","thinkingConfig"],Fe);const Ve=getValueByPath(t,["enableAffectiveDialog"]);e!==void 0&&Ve!=null&&setValueByPath(e,["setup","generationConfig","enableAffectiveDialog"],Ve);const Oe=getValueByPath(t,["systemInstruction"]);e!==void 0&&Oe!=null&&setValueByPath(e,["setup","systemInstruction"],tContent(Oe));const $e=getValueByPath(t,["tools"]);if(e!==void 0&&$e!=null){let qe=tTools($e);Array.isArray(qe)&&(qe=qe.map(Ke=>toolToVertex$1(tTool(Ke)))),setValueByPath(e,["setup","tools"],qe)}const Ge=getValueByPath(t,["sessionResumption"]);e!==void 0&&Ge!=null&&setValueByPath(e,["setup","sessionResumption"],Ge);const Ue=getValueByPath(t,["inputAudioTranscription"]);e!==void 0&&Ue!=null&&setValueByPath(e,["setup","inputAudioTranscription"],Ue);const Ye=getValueByPath(t,["outputAudioTranscription"]);e!==void 0&&Ye!=null&&setValueByPath(e,["setup","outputAudioTranscription"],Ye);const Qe=getValueByPath(t,["realtimeInputConfig"]);e!==void 0&&Qe!=null&&setValueByPath(e,["setup","realtimeInputConfig"],Qe);const rn=getValueByPath(t,["contextWindowCompression"]);e!==void 0&&rn!=null&&setValueByPath(e,["setup","contextWindowCompression"],rn);const tn=getValueByPath(t,["proactivity"]);e!==void 0&&tn!=null&&setValueByPath(e,["setup","proactivity"],tn);const an=getValueByPath(t,["explicitVadSignal"]);return e!==void 0&&an!=null&&setValueByPath(e,["setup","explicitVadSignal"],an),r}function liveConnectParametersToMldev(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["setup","model"],tModel(t,xe));const Ee=getValueByPath(e,["config"]);return Ee!=null&&setValueByPath(r,["config"],liveConnectConfigToMldev$1(Ee,r)),r}function liveConnectParametersToVertex(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["setup","model"],tModel(t,xe));const Ee=getValueByPath(e,["config"]);return Ee!=null&&setValueByPath(r,["config"],liveConnectConfigToVertex(Ee,r)),r}function liveMusicSetConfigParametersToMldev(t){const e={},r=getValueByPath(t,["musicGenerationConfig"]);return r!=null&&setValueByPath(e,["musicGenerationConfig"],r),e}function liveMusicSetWeightedPromptsParametersToMldev(t){const e={},r=getValueByPath(t,["weightedPrompts"]);if(r!=null){let xe=r;Array.isArray(xe)&&(xe=xe.map(Ee=>Ee)),setValueByPath(e,["weightedPrompts"],xe)}return e}function liveSendRealtimeInputParametersToMldev(t){const e={},r=getValueByPath(t,["media"]);if(r!=null){let Be=tBlobs(r);Array.isArray(Be)&&(Be=Be.map(ke=>blobToMldev$2(ke))),setValueByPath(e,["mediaChunks"],Be)}const xe=getValueByPath(t,["audio"]);xe!=null&&setValueByPath(e,["audio"],blobToMldev$2(tAudioBlob(xe)));const Ee=getValueByPath(t,["audioStreamEnd"]);Ee!=null&&setValueByPath(e,["audioStreamEnd"],Ee);const Ae=getValueByPath(t,["video"]);Ae!=null&&setValueByPath(e,["video"],blobToMldev$2(tImageBlob(Ae)));const Pe=getValueByPath(t,["text"]);Pe!=null&&setValueByPath(e,["text"],Pe);const Re=getValueByPath(t,["activityStart"]);Re!=null&&setValueByPath(e,["activityStart"],Re);const Ce=getValueByPath(t,["activityEnd"]);return Ce!=null&&setValueByPath(e,["activityEnd"],Ce),e}function liveSendRealtimeInputParametersToVertex(t){const e={},r=getValueByPath(t,["media"]);if(r!=null){let Be=tBlobs(r);Array.isArray(Be)&&(Be=Be.map(ke=>ke)),setValueByPath(e,["mediaChunks"],Be)}const xe=getValueByPath(t,["audio"]);xe!=null&&setValueByPath(e,["audio"],tAudioBlob(xe));const Ee=getValueByPath(t,["audioStreamEnd"]);Ee!=null&&setValueByPath(e,["audioStreamEnd"],Ee);const Ae=getValueByPath(t,["video"]);Ae!=null&&setValueByPath(e,["video"],tImageBlob(Ae));const Pe=getValueByPath(t,["text"]);Pe!=null&&setValueByPath(e,["text"],Pe);const Re=getValueByPath(t,["activityStart"]);Re!=null&&setValueByPath(e,["activityStart"],Re);const Ce=getValueByPath(t,["activityEnd"]);return Ce!=null&&setValueByPath(e,["activityEnd"],Ce),e}function liveServerMessageFromVertex(t){const e={},r=getValueByPath(t,["setupComplete"]);r!=null&&setValueByPath(e,["setupComplete"],r);const xe=getValueByPath(t,["serverContent"]);xe!=null&&setValueByPath(e,["serverContent"],xe);const Ee=getValueByPath(t,["toolCall"]);Ee!=null&&setValueByPath(e,["toolCall"],Ee);const Ae=getValueByPath(t,["toolCallCancellation"]);Ae!=null&&setValueByPath(e,["toolCallCancellation"],Ae);const Pe=getValueByPath(t,["usageMetadata"]);Pe!=null&&setValueByPath(e,["usageMetadata"],usageMetadataFromVertex(Pe));const Re=getValueByPath(t,["goAway"]);Re!=null&&setValueByPath(e,["goAway"],Re);const Ce=getValueByPath(t,["sessionResumptionUpdate"]);Ce!=null&&setValueByPath(e,["sessionResumptionUpdate"],Ce);const Be=getValueByPath(t,["voiceActivityDetectionSignal"]);return Be!=null&&setValueByPath(e,["voiceActivityDetectionSignal"],Be),e}function partToMldev$2(t){const e={},r=getValueByPath(t,["mediaResolution"]);r!=null&&setValueByPath(e,["mediaResolution"],r);const xe=getValueByPath(t,["codeExecutionResult"]);xe!=null&&setValueByPath(e,["codeExecutionResult"],xe);const Ee=getValueByPath(t,["executableCode"]);Ee!=null&&setValueByPath(e,["executableCode"],Ee);const Ae=getValueByPath(t,["fileData"]);Ae!=null&&setValueByPath(e,["fileData"],fileDataToMldev$2(Ae));const Pe=getValueByPath(t,["functionCall"]);Pe!=null&&setValueByPath(e,["functionCall"],functionCallToMldev$2(Pe));const Re=getValueByPath(t,["functionResponse"]);Re!=null&&setValueByPath(e,["functionResponse"],Re);const Ce=getValueByPath(t,["inlineData"]);Ce!=null&&setValueByPath(e,["inlineData"],blobToMldev$2(Ce));const Be=getValueByPath(t,["text"]);Be!=null&&setValueByPath(e,["text"],Be);const ke=getValueByPath(t,["thought"]);ke!=null&&setValueByPath(e,["thought"],ke);const Me=getValueByPath(t,["thoughtSignature"]);Me!=null&&setValueByPath(e,["thoughtSignature"],Me);const Fe=getValueByPath(t,["videoMetadata"]);return Fe!=null&&setValueByPath(e,["videoMetadata"],Fe),e}function sessionResumptionConfigToMldev$1(t){const e={},r=getValueByPath(t,["handle"]);if(r!=null&&setValueByPath(e,["handle"],r),getValueByPath(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function speechConfigToVertex$1(t){const e={},r=getValueByPath(t,["voiceConfig"]);r!=null&&setValueByPath(e,["voiceConfig"],r);const xe=getValueByPath(t,["languageCode"]);if(xe!=null&&setValueByPath(e,["languageCode"],xe),getValueByPath(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function toolToMldev$2(t){const e={},r=getValueByPath(t,["functionDeclarations"]);if(r!=null){let ke=r;Array.isArray(ke)&&(ke=ke.map(Me=>Me)),setValueByPath(e,["functionDeclarations"],ke)}if(getValueByPath(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const xe=getValueByPath(t,["googleSearchRetrieval"]);xe!=null&&setValueByPath(e,["googleSearchRetrieval"],xe);const Ee=getValueByPath(t,["computerUse"]);Ee!=null&&setValueByPath(e,["computerUse"],Ee);const Ae=getValueByPath(t,["fileSearch"]);Ae!=null&&setValueByPath(e,["fileSearch"],Ae);const Pe=getValueByPath(t,["codeExecution"]);if(Pe!=null&&setValueByPath(e,["codeExecution"],Pe),getValueByPath(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const Re=getValueByPath(t,["googleMaps"]);Re!=null&&setValueByPath(e,["googleMaps"],googleMapsToMldev$2(Re));const Ce=getValueByPath(t,["googleSearch"]);Ce!=null&&setValueByPath(e,["googleSearch"],googleSearchToMldev$2(Ce));const Be=getValueByPath(t,["urlContext"]);return Be!=null&&setValueByPath(e,["urlContext"],Be),e}function toolToVertex$1(t){const e={},r=getValueByPath(t,["functionDeclarations"]);if(r!=null){let Me=r;Array.isArray(Me)&&(Me=Me.map(Fe=>functionDeclarationToVertex$1(Fe))),setValueByPath(e,["functionDeclarations"],Me)}const xe=getValueByPath(t,["retrieval"]);xe!=null&&setValueByPath(e,["retrieval"],xe);const Ee=getValueByPath(t,["googleSearchRetrieval"]);Ee!=null&&setValueByPath(e,["googleSearchRetrieval"],Ee);const Ae=getValueByPath(t,["computerUse"]);if(Ae!=null&&setValueByPath(e,["computerUse"],Ae),getValueByPath(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const Pe=getValueByPath(t,["codeExecution"]);Pe!=null&&setValueByPath(e,["codeExecution"],Pe);const Re=getValueByPath(t,["enterpriseWebSearch"]);Re!=null&&setValueByPath(e,["enterpriseWebSearch"],Re);const Ce=getValueByPath(t,["googleMaps"]);Ce!=null&&setValueByPath(e,["googleMaps"],Ce);const Be=getValueByPath(t,["googleSearch"]);Be!=null&&setValueByPath(e,["googleSearch"],Be);const ke=getValueByPath(t,["urlContext"]);return ke!=null&&setValueByPath(e,["urlContext"],ke),e}function usageMetadataFromVertex(t){const e={},r=getValueByPath(t,["promptTokenCount"]);r!=null&&setValueByPath(e,["promptTokenCount"],r);const xe=getValueByPath(t,["cachedContentTokenCount"]);xe!=null&&setValueByPath(e,["cachedContentTokenCount"],xe);const Ee=getValueByPath(t,["candidatesTokenCount"]);Ee!=null&&setValueByPath(e,["responseTokenCount"],Ee);const Ae=getValueByPath(t,["toolUsePromptTokenCount"]);Ae!=null&&setValueByPath(e,["toolUsePromptTokenCount"],Ae);const Pe=getValueByPath(t,["thoughtsTokenCount"]);Pe!=null&&setValueByPath(e,["thoughtsTokenCount"],Pe);const Re=getValueByPath(t,["totalTokenCount"]);Re!=null&&setValueByPath(e,["totalTokenCount"],Re);const Ce=getValueByPath(t,["promptTokensDetails"]);if(Ce!=null){let Ve=Ce;Array.isArray(Ve)&&(Ve=Ve.map(Oe=>Oe)),setValueByPath(e,["promptTokensDetails"],Ve)}const Be=getValueByPath(t,["cacheTokensDetails"]);if(Be!=null){let Ve=Be;Array.isArray(Ve)&&(Ve=Ve.map(Oe=>Oe)),setValueByPath(e,["cacheTokensDetails"],Ve)}const ke=getValueByPath(t,["candidatesTokensDetails"]);if(ke!=null){let Ve=ke;Array.isArray(Ve)&&(Ve=Ve.map(Oe=>Oe)),setValueByPath(e,["responseTokensDetails"],Ve)}const Me=getValueByPath(t,["toolUsePromptTokensDetails"]);if(Me!=null){let Ve=Me;Array.isArray(Ve)&&(Ve=Ve.map(Oe=>Oe)),setValueByPath(e,["toolUsePromptTokensDetails"],Ve)}const Fe=getValueByPath(t,["trafficType"]);return Fe!=null&&setValueByPath(e,["trafficType"],Fe),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function blobToMldev$1(t){const e={},r=getValueByPath(t,["data"]);if(r!=null&&setValueByPath(e,["data"],r),getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const xe=getValueByPath(t,["mimeType"]);return xe!=null&&setValueByPath(e,["mimeType"],xe),e}function candidateFromMldev(t){const e={},r=getValueByPath(t,["content"]);r!=null&&setValueByPath(e,["content"],r);const xe=getValueByPath(t,["citationMetadata"]);xe!=null&&setValueByPath(e,["citationMetadata"],citationMetadataFromMldev(xe));const Ee=getValueByPath(t,["tokenCount"]);Ee!=null&&setValueByPath(e,["tokenCount"],Ee);const Ae=getValueByPath(t,["finishReason"]);Ae!=null&&setValueByPath(e,["finishReason"],Ae);const Pe=getValueByPath(t,["avgLogprobs"]);Pe!=null&&setValueByPath(e,["avgLogprobs"],Pe);const Re=getValueByPath(t,["groundingMetadata"]);Re!=null&&setValueByPath(e,["groundingMetadata"],Re);const Ce=getValueByPath(t,["index"]);Ce!=null&&setValueByPath(e,["index"],Ce);const Be=getValueByPath(t,["logprobsResult"]);Be!=null&&setValueByPath(e,["logprobsResult"],Be);const ke=getValueByPath(t,["safetyRatings"]);if(ke!=null){let Fe=ke;Array.isArray(Fe)&&(Fe=Fe.map(Ve=>Ve)),setValueByPath(e,["safetyRatings"],Fe)}const Me=getValueByPath(t,["urlContextMetadata"]);return Me!=null&&setValueByPath(e,["urlContextMetadata"],Me),e}function citationMetadataFromMldev(t){const e={},r=getValueByPath(t,["citationSources"]);if(r!=null){let xe=r;Array.isArray(xe)&&(xe=xe.map(Ee=>Ee)),setValueByPath(e,["citations"],xe)}return e}function computeTokensParametersToVertex(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","model"],tModel(t,xe));const Ee=getValueByPath(e,["contents"]);if(Ee!=null){let Ae=tContents(Ee);Array.isArray(Ae)&&(Ae=Ae.map(Pe=>Pe)),setValueByPath(r,["contents"],Ae)}return r}function computeTokensResponseFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["tokensInfo"]);if(xe!=null){let Ee=xe;Array.isArray(Ee)&&(Ee=Ee.map(Ae=>Ae)),setValueByPath(e,["tokensInfo"],Ee)}return e}function contentEmbeddingFromVertex(t){const e={},r=getValueByPath(t,["values"]);r!=null&&setValueByPath(e,["values"],r);const xe=getValueByPath(t,["statistics"]);return xe!=null&&setValueByPath(e,["statistics"],contentEmbeddingStatisticsFromVertex(xe)),e}function contentEmbeddingStatisticsFromVertex(t){const e={},r=getValueByPath(t,["truncated"]);r!=null&&setValueByPath(e,["truncated"],r);const xe=getValueByPath(t,["token_count"]);return xe!=null&&setValueByPath(e,["tokenCount"],xe),e}function contentToMldev$1(t){const e={},r=getValueByPath(t,["parts"]);if(r!=null){let Ee=r;Array.isArray(Ee)&&(Ee=Ee.map(Ae=>partToMldev$1(Ae))),setValueByPath(e,["parts"],Ee)}const xe=getValueByPath(t,["role"]);return xe!=null&&setValueByPath(e,["role"],xe),e}function controlReferenceConfigToVertex(t){const e={},r=getValueByPath(t,["controlType"]);r!=null&&setValueByPath(e,["controlType"],r);const xe=getValueByPath(t,["enableControlImageComputation"]);return xe!=null&&setValueByPath(e,["computeControl"],xe),e}function countTokensConfigToMldev(t){const e={};if(getValueByPath(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(getValueByPath(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(getValueByPath(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function countTokensConfigToVertex(t,e){const r={},xe=getValueByPath(t,["systemInstruction"]);e!==void 0&&xe!=null&&setValueByPath(e,["systemInstruction"],tContent(xe));const Ee=getValueByPath(t,["tools"]);if(e!==void 0&&Ee!=null){let Pe=Ee;Array.isArray(Pe)&&(Pe=Pe.map(Re=>toolToVertex(Re))),setValueByPath(e,["tools"],Pe)}const Ae=getValueByPath(t,["generationConfig"]);return e!==void 0&&Ae!=null&&setValueByPath(e,["generationConfig"],generationConfigToVertex(Ae)),r}function countTokensParametersToMldev(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","model"],tModel(t,xe));const Ee=getValueByPath(e,["contents"]);if(Ee!=null){let Pe=tContents(Ee);Array.isArray(Pe)&&(Pe=Pe.map(Re=>contentToMldev$1(Re))),setValueByPath(r,["contents"],Pe)}const Ae=getValueByPath(e,["config"]);return Ae!=null&&countTokensConfigToMldev(Ae),r}function countTokensParametersToVertex(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","model"],tModel(t,xe));const Ee=getValueByPath(e,["contents"]);if(Ee!=null){let Pe=tContents(Ee);Array.isArray(Pe)&&(Pe=Pe.map(Re=>Re)),setValueByPath(r,["contents"],Pe)}const Ae=getValueByPath(e,["config"]);return Ae!=null&&countTokensConfigToVertex(Ae,r),r}function countTokensResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["totalTokens"]);xe!=null&&setValueByPath(e,["totalTokens"],xe);const Ee=getValueByPath(t,["cachedContentTokenCount"]);return Ee!=null&&setValueByPath(e,["cachedContentTokenCount"],Ee),e}function countTokensResponseFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["totalTokens"]);return xe!=null&&setValueByPath(e,["totalTokens"],xe),e}function deleteModelParametersToMldev(t,e){const r={},xe=getValueByPath(e,["model"]);return xe!=null&&setValueByPath(r,["_url","name"],tModel(t,xe)),r}function deleteModelParametersToVertex(t,e){const r={},xe=getValueByPath(e,["model"]);return xe!=null&&setValueByPath(r,["_url","name"],tModel(t,xe)),r}function deleteModelResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);return r!=null&&setValueByPath(e,["sdkHttpResponse"],r),e}function deleteModelResponseFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);return r!=null&&setValueByPath(e,["sdkHttpResponse"],r),e}function editImageConfigToVertex(t,e){const r={},xe=getValueByPath(t,["outputGcsUri"]);e!==void 0&&xe!=null&&setValueByPath(e,["parameters","storageUri"],xe);const Ee=getValueByPath(t,["negativePrompt"]);e!==void 0&&Ee!=null&&setValueByPath(e,["parameters","negativePrompt"],Ee);const Ae=getValueByPath(t,["numberOfImages"]);e!==void 0&&Ae!=null&&setValueByPath(e,["parameters","sampleCount"],Ae);const Pe=getValueByPath(t,["aspectRatio"]);e!==void 0&&Pe!=null&&setValueByPath(e,["parameters","aspectRatio"],Pe);const Re=getValueByPath(t,["guidanceScale"]);e!==void 0&&Re!=null&&setValueByPath(e,["parameters","guidanceScale"],Re);const Ce=getValueByPath(t,["seed"]);e!==void 0&&Ce!=null&&setValueByPath(e,["parameters","seed"],Ce);const Be=getValueByPath(t,["safetyFilterLevel"]);e!==void 0&&Be!=null&&setValueByPath(e,["parameters","safetySetting"],Be);const ke=getValueByPath(t,["personGeneration"]);e!==void 0&&ke!=null&&setValueByPath(e,["parameters","personGeneration"],ke);const Me=getValueByPath(t,["includeSafetyAttributes"]);e!==void 0&&Me!=null&&setValueByPath(e,["parameters","includeSafetyAttributes"],Me);const Fe=getValueByPath(t,["includeRaiReason"]);e!==void 0&&Fe!=null&&setValueByPath(e,["parameters","includeRaiReason"],Fe);const Ve=getValueByPath(t,["language"]);e!==void 0&&Ve!=null&&setValueByPath(e,["parameters","language"],Ve);const Oe=getValueByPath(t,["outputMimeType"]);e!==void 0&&Oe!=null&&setValueByPath(e,["parameters","outputOptions","mimeType"],Oe);const $e=getValueByPath(t,["outputCompressionQuality"]);e!==void 0&&$e!=null&&setValueByPath(e,["parameters","outputOptions","compressionQuality"],$e);const Ge=getValueByPath(t,["addWatermark"]);e!==void 0&&Ge!=null&&setValueByPath(e,["parameters","addWatermark"],Ge);const Ue=getValueByPath(t,["labels"]);e!==void 0&&Ue!=null&&setValueByPath(e,["labels"],Ue);const Ye=getValueByPath(t,["editMode"]);e!==void 0&&Ye!=null&&setValueByPath(e,["parameters","editMode"],Ye);const Qe=getValueByPath(t,["baseSteps"]);return e!==void 0&&Qe!=null&&setValueByPath(e,["parameters","editConfig","baseSteps"],Qe),r}function editImageParametersInternalToVertex(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","model"],tModel(t,xe));const Ee=getValueByPath(e,["prompt"]);Ee!=null&&setValueByPath(r,["instances[0]","prompt"],Ee);const Ae=getValueByPath(e,["referenceImages"]);if(Ae!=null){let Re=Ae;Array.isArray(Re)&&(Re=Re.map(Ce=>referenceImageAPIInternalToVertex(Ce))),setValueByPath(r,["instances[0]","referenceImages"],Re)}const Pe=getValueByPath(e,["config"]);return Pe!=null&&editImageConfigToVertex(Pe,r),r}function editImageResponseFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["predictions"]);if(xe!=null){let Ee=xe;Array.isArray(Ee)&&(Ee=Ee.map(Ae=>generatedImageFromVertex(Ae))),setValueByPath(e,["generatedImages"],Ee)}return e}function embedContentConfigToMldev(t,e){const r={},xe=getValueByPath(t,["taskType"]);e!==void 0&&xe!=null&&setValueByPath(e,["requests[]","taskType"],xe);const Ee=getValueByPath(t,["title"]);e!==void 0&&Ee!=null&&setValueByPath(e,["requests[]","title"],Ee);const Ae=getValueByPath(t,["outputDimensionality"]);if(e!==void 0&&Ae!=null&&setValueByPath(e,["requests[]","outputDimensionality"],Ae),getValueByPath(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(getValueByPath(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function embedContentConfigToVertex(t,e){const r={},xe=getValueByPath(t,["taskType"]);e!==void 0&&xe!=null&&setValueByPath(e,["instances[]","task_type"],xe);const Ee=getValueByPath(t,["title"]);e!==void 0&&Ee!=null&&setValueByPath(e,["instances[]","title"],Ee);const Ae=getValueByPath(t,["outputDimensionality"]);e!==void 0&&Ae!=null&&setValueByPath(e,["parameters","outputDimensionality"],Ae);const Pe=getValueByPath(t,["mimeType"]);e!==void 0&&Pe!=null&&setValueByPath(e,["instances[]","mimeType"],Pe);const Re=getValueByPath(t,["autoTruncate"]);return e!==void 0&&Re!=null&&setValueByPath(e,["parameters","autoTruncate"],Re),r}function embedContentParametersToMldev(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","model"],tModel(t,xe));const Ee=getValueByPath(e,["contents"]);if(Ee!=null){let Re=tContentsForEmbed(t,Ee);Array.isArray(Re)&&(Re=Re.map(Ce=>Ce)),setValueByPath(r,["requests[]","content"],Re)}const Ae=getValueByPath(e,["config"]);Ae!=null&&embedContentConfigToMldev(Ae,r);const Pe=getValueByPath(e,["model"]);return Pe!==void 0&&setValueByPath(r,["requests[]","model"],tModel(t,Pe)),r}function embedContentParametersToVertex(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","model"],tModel(t,xe));const Ee=getValueByPath(e,["contents"]);if(Ee!=null){let Pe=tContentsForEmbed(t,Ee);Array.isArray(Pe)&&(Pe=Pe.map(Re=>Re)),setValueByPath(r,["instances[]","content"],Pe)}const Ae=getValueByPath(e,["config"]);return Ae!=null&&embedContentConfigToVertex(Ae,r),r}function embedContentResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["embeddings"]);if(xe!=null){let Ae=xe;Array.isArray(Ae)&&(Ae=Ae.map(Pe=>Pe)),setValueByPath(e,["embeddings"],Ae)}const Ee=getValueByPath(t,["metadata"]);return Ee!=null&&setValueByPath(e,["metadata"],Ee),e}function embedContentResponseFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["predictions[]","embeddings"]);if(xe!=null){let Ae=xe;Array.isArray(Ae)&&(Ae=Ae.map(Pe=>contentEmbeddingFromVertex(Pe))),setValueByPath(e,["embeddings"],Ae)}const Ee=getValueByPath(t,["metadata"]);return Ee!=null&&setValueByPath(e,["metadata"],Ee),e}function endpointFromVertex(t){const e={},r=getValueByPath(t,["endpoint"]);r!=null&&setValueByPath(e,["name"],r);const xe=getValueByPath(t,["deployedModelId"]);return xe!=null&&setValueByPath(e,["deployedModelId"],xe),e}function fileDataToMldev$1(t){const e={};if(getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=getValueByPath(t,["fileUri"]);r!=null&&setValueByPath(e,["fileUri"],r);const xe=getValueByPath(t,["mimeType"]);return xe!=null&&setValueByPath(e,["mimeType"],xe),e}function functionCallToMldev$1(t){const e={},r=getValueByPath(t,["id"]);r!=null&&setValueByPath(e,["id"],r);const xe=getValueByPath(t,["args"]);xe!=null&&setValueByPath(e,["args"],xe);const Ee=getValueByPath(t,["name"]);if(Ee!=null&&setValueByPath(e,["name"],Ee),getValueByPath(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(getValueByPath(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function functionCallingConfigToMldev(t){const e={},r=getValueByPath(t,["mode"]);r!=null&&setValueByPath(e,["mode"],r);const xe=getValueByPath(t,["allowedFunctionNames"]);if(xe!=null&&setValueByPath(e,["allowedFunctionNames"],xe),getValueByPath(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function functionDeclarationToVertex(t){const e={};if(getValueByPath(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=getValueByPath(t,["description"]);r!=null&&setValueByPath(e,["description"],r);const xe=getValueByPath(t,["name"]);xe!=null&&setValueByPath(e,["name"],xe);const Ee=getValueByPath(t,["parameters"]);Ee!=null&&setValueByPath(e,["parameters"],Ee);const Ae=getValueByPath(t,["parametersJsonSchema"]);Ae!=null&&setValueByPath(e,["parametersJsonSchema"],Ae);const Pe=getValueByPath(t,["response"]);Pe!=null&&setValueByPath(e,["response"],Pe);const Re=getValueByPath(t,["responseJsonSchema"]);return Re!=null&&setValueByPath(e,["responseJsonSchema"],Re),e}function generateContentConfigToMldev(t,e,r){const xe={},Ee=getValueByPath(e,["systemInstruction"]);r!==void 0&&Ee!=null&&setValueByPath(r,["systemInstruction"],contentToMldev$1(tContent(Ee)));const Ae=getValueByPath(e,["temperature"]);Ae!=null&&setValueByPath(xe,["temperature"],Ae);const Pe=getValueByPath(e,["topP"]);Pe!=null&&setValueByPath(xe,["topP"],Pe);const Re=getValueByPath(e,["topK"]);Re!=null&&setValueByPath(xe,["topK"],Re);const Ce=getValueByPath(e,["candidateCount"]);Ce!=null&&setValueByPath(xe,["candidateCount"],Ce);const Be=getValueByPath(e,["maxOutputTokens"]);Be!=null&&setValueByPath(xe,["maxOutputTokens"],Be);const ke=getValueByPath(e,["stopSequences"]);ke!=null&&setValueByPath(xe,["stopSequences"],ke);const Me=getValueByPath(e,["responseLogprobs"]);Me!=null&&setValueByPath(xe,["responseLogprobs"],Me);const Fe=getValueByPath(e,["logprobs"]);Fe!=null&&setValueByPath(xe,["logprobs"],Fe);const Ve=getValueByPath(e,["presencePenalty"]);Ve!=null&&setValueByPath(xe,["presencePenalty"],Ve);const Oe=getValueByPath(e,["frequencyPenalty"]);Oe!=null&&setValueByPath(xe,["frequencyPenalty"],Oe);const $e=getValueByPath(e,["seed"]);$e!=null&&setValueByPath(xe,["seed"],$e);const Ge=getValueByPath(e,["responseMimeType"]);Ge!=null&&setValueByPath(xe,["responseMimeType"],Ge);const Ue=getValueByPath(e,["responseSchema"]);Ue!=null&&setValueByPath(xe,["responseSchema"],tSchema(Ue));const Ye=getValueByPath(e,["responseJsonSchema"]);if(Ye!=null&&setValueByPath(xe,["responseJsonSchema"],Ye),getValueByPath(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(getValueByPath(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Qe=getValueByPath(e,["safetySettings"]);if(r!==void 0&&Qe!=null){let cn=Qe;Array.isArray(cn)&&(cn=cn.map(Sn=>safetySettingToMldev(Sn))),setValueByPath(r,["safetySettings"],cn)}const rn=getValueByPath(e,["tools"]);if(r!==void 0&&rn!=null){let cn=tTools(rn);Array.isArray(cn)&&(cn=cn.map(Sn=>toolToMldev$1(tTool(Sn)))),setValueByPath(r,["tools"],cn)}const tn=getValueByPath(e,["toolConfig"]);if(r!==void 0&&tn!=null&&setValueByPath(r,["toolConfig"],toolConfigToMldev(tn)),getValueByPath(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const an=getValueByPath(e,["cachedContent"]);r!==void 0&&an!=null&&setValueByPath(r,["cachedContent"],tCachedContentName(t,an));const qe=getValueByPath(e,["responseModalities"]);qe!=null&&setValueByPath(xe,["responseModalities"],qe);const Ke=getValueByPath(e,["mediaResolution"]);Ke!=null&&setValueByPath(xe,["mediaResolution"],Ke);const sn=getValueByPath(e,["speechConfig"]);if(sn!=null&&setValueByPath(xe,["speechConfig"],tSpeechConfig(sn)),getValueByPath(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const gn=getValueByPath(e,["thinkingConfig"]);gn!=null&&setValueByPath(xe,["thinkingConfig"],gn);const He=getValueByPath(e,["imageConfig"]);He!=null&&setValueByPath(xe,["imageConfig"],imageConfigToMldev(He));const en=getValueByPath(e,["enableEnhancedCivicAnswers"]);return en!=null&&setValueByPath(xe,["enableEnhancedCivicAnswers"],en),xe}function generateContentConfigToVertex(t,e,r){const xe={},Ee=getValueByPath(e,["systemInstruction"]);r!==void 0&&Ee!=null&&setValueByPath(r,["systemInstruction"],tContent(Ee));const Ae=getValueByPath(e,["temperature"]);Ae!=null&&setValueByPath(xe,["temperature"],Ae);const Pe=getValueByPath(e,["topP"]);Pe!=null&&setValueByPath(xe,["topP"],Pe);const Re=getValueByPath(e,["topK"]);Re!=null&&setValueByPath(xe,["topK"],Re);const Ce=getValueByPath(e,["candidateCount"]);Ce!=null&&setValueByPath(xe,["candidateCount"],Ce);const Be=getValueByPath(e,["maxOutputTokens"]);Be!=null&&setValueByPath(xe,["maxOutputTokens"],Be);const ke=getValueByPath(e,["stopSequences"]);ke!=null&&setValueByPath(xe,["stopSequences"],ke);const Me=getValueByPath(e,["responseLogprobs"]);Me!=null&&setValueByPath(xe,["responseLogprobs"],Me);const Fe=getValueByPath(e,["logprobs"]);Fe!=null&&setValueByPath(xe,["logprobs"],Fe);const Ve=getValueByPath(e,["presencePenalty"]);Ve!=null&&setValueByPath(xe,["presencePenalty"],Ve);const Oe=getValueByPath(e,["frequencyPenalty"]);Oe!=null&&setValueByPath(xe,["frequencyPenalty"],Oe);const $e=getValueByPath(e,["seed"]);$e!=null&&setValueByPath(xe,["seed"],$e);const Ge=getValueByPath(e,["responseMimeType"]);Ge!=null&&setValueByPath(xe,["responseMimeType"],Ge);const Ue=getValueByPath(e,["responseSchema"]);Ue!=null&&setValueByPath(xe,["responseSchema"],tSchema(Ue));const Ye=getValueByPath(e,["responseJsonSchema"]);Ye!=null&&setValueByPath(xe,["responseJsonSchema"],Ye);const Qe=getValueByPath(e,["routingConfig"]);Qe!=null&&setValueByPath(xe,["routingConfig"],Qe);const rn=getValueByPath(e,["modelSelectionConfig"]);rn!=null&&setValueByPath(xe,["modelConfig"],rn);const tn=getValueByPath(e,["safetySettings"]);if(r!==void 0&&tn!=null){let hn=tn;Array.isArray(hn)&&(hn=hn.map(pn=>pn)),setValueByPath(r,["safetySettings"],hn)}const an=getValueByPath(e,["tools"]);if(r!==void 0&&an!=null){let hn=tTools(an);Array.isArray(hn)&&(hn=hn.map(pn=>toolToVertex(tTool(pn)))),setValueByPath(r,["tools"],hn)}const qe=getValueByPath(e,["toolConfig"]);r!==void 0&&qe!=null&&setValueByPath(r,["toolConfig"],qe);const Ke=getValueByPath(e,["labels"]);r!==void 0&&Ke!=null&&setValueByPath(r,["labels"],Ke);const sn=getValueByPath(e,["cachedContent"]);r!==void 0&&sn!=null&&setValueByPath(r,["cachedContent"],tCachedContentName(t,sn));const gn=getValueByPath(e,["responseModalities"]);gn!=null&&setValueByPath(xe,["responseModalities"],gn);const He=getValueByPath(e,["mediaResolution"]);He!=null&&setValueByPath(xe,["mediaResolution"],He);const en=getValueByPath(e,["speechConfig"]);en!=null&&setValueByPath(xe,["speechConfig"],speechConfigToVertex(tSpeechConfig(en)));const cn=getValueByPath(e,["audioTimestamp"]);cn!=null&&setValueByPath(xe,["audioTimestamp"],cn);const Sn=getValueByPath(e,["thinkingConfig"]);Sn!=null&&setValueByPath(xe,["thinkingConfig"],Sn);const Tn=getValueByPath(e,["imageConfig"]);if(Tn!=null&&setValueByPath(xe,["imageConfig"],imageConfigToVertex(Tn)),getValueByPath(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return xe}function generateContentParametersToMldev(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","model"],tModel(t,xe));const Ee=getValueByPath(e,["contents"]);if(Ee!=null){let Pe=tContents(Ee);Array.isArray(Pe)&&(Pe=Pe.map(Re=>contentToMldev$1(Re))),setValueByPath(r,["contents"],Pe)}const Ae=getValueByPath(e,["config"]);return Ae!=null&&setValueByPath(r,["generationConfig"],generateContentConfigToMldev(t,Ae,r)),r}function generateContentParametersToVertex(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","model"],tModel(t,xe));const Ee=getValueByPath(e,["contents"]);if(Ee!=null){let Pe=tContents(Ee);Array.isArray(Pe)&&(Pe=Pe.map(Re=>Re)),setValueByPath(r,["contents"],Pe)}const Ae=getValueByPath(e,["config"]);return Ae!=null&&setValueByPath(r,["generationConfig"],generateContentConfigToVertex(t,Ae,r)),r}function generateContentResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["candidates"]);if(xe!=null){let Ce=xe;Array.isArray(Ce)&&(Ce=Ce.map(Be=>candidateFromMldev(Be))),setValueByPath(e,["candidates"],Ce)}const Ee=getValueByPath(t,["modelVersion"]);Ee!=null&&setValueByPath(e,["modelVersion"],Ee);const Ae=getValueByPath(t,["promptFeedback"]);Ae!=null&&setValueByPath(e,["promptFeedback"],Ae);const Pe=getValueByPath(t,["responseId"]);Pe!=null&&setValueByPath(e,["responseId"],Pe);const Re=getValueByPath(t,["usageMetadata"]);return Re!=null&&setValueByPath(e,["usageMetadata"],Re),e}function generateContentResponseFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["candidates"]);if(xe!=null){let Be=xe;Array.isArray(Be)&&(Be=Be.map(ke=>ke)),setValueByPath(e,["candidates"],Be)}const Ee=getValueByPath(t,["createTime"]);Ee!=null&&setValueByPath(e,["createTime"],Ee);const Ae=getValueByPath(t,["modelVersion"]);Ae!=null&&setValueByPath(e,["modelVersion"],Ae);const Pe=getValueByPath(t,["promptFeedback"]);Pe!=null&&setValueByPath(e,["promptFeedback"],Pe);const Re=getValueByPath(t,["responseId"]);Re!=null&&setValueByPath(e,["responseId"],Re);const Ce=getValueByPath(t,["usageMetadata"]);return Ce!=null&&setValueByPath(e,["usageMetadata"],Ce),e}function generateImagesConfigToMldev(t,e){const r={};if(getValueByPath(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(getValueByPath(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const xe=getValueByPath(t,["numberOfImages"]);e!==void 0&&xe!=null&&setValueByPath(e,["parameters","sampleCount"],xe);const Ee=getValueByPath(t,["aspectRatio"]);e!==void 0&&Ee!=null&&setValueByPath(e,["parameters","aspectRatio"],Ee);const Ae=getValueByPath(t,["guidanceScale"]);if(e!==void 0&&Ae!=null&&setValueByPath(e,["parameters","guidanceScale"],Ae),getValueByPath(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const Pe=getValueByPath(t,["safetyFilterLevel"]);e!==void 0&&Pe!=null&&setValueByPath(e,["parameters","safetySetting"],Pe);const Re=getValueByPath(t,["personGeneration"]);e!==void 0&&Re!=null&&setValueByPath(e,["parameters","personGeneration"],Re);const Ce=getValueByPath(t,["includeSafetyAttributes"]);e!==void 0&&Ce!=null&&setValueByPath(e,["parameters","includeSafetyAttributes"],Ce);const Be=getValueByPath(t,["includeRaiReason"]);e!==void 0&&Be!=null&&setValueByPath(e,["parameters","includeRaiReason"],Be);const ke=getValueByPath(t,["language"]);e!==void 0&&ke!=null&&setValueByPath(e,["parameters","language"],ke);const Me=getValueByPath(t,["outputMimeType"]);e!==void 0&&Me!=null&&setValueByPath(e,["parameters","outputOptions","mimeType"],Me);const Fe=getValueByPath(t,["outputCompressionQuality"]);if(e!==void 0&&Fe!=null&&setValueByPath(e,["parameters","outputOptions","compressionQuality"],Fe),getValueByPath(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(getValueByPath(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Ve=getValueByPath(t,["imageSize"]);if(e!==void 0&&Ve!=null&&setValueByPath(e,["parameters","sampleImageSize"],Ve),getValueByPath(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function generateImagesConfigToVertex(t,e){const r={},xe=getValueByPath(t,["outputGcsUri"]);e!==void 0&&xe!=null&&setValueByPath(e,["parameters","storageUri"],xe);const Ee=getValueByPath(t,["negativePrompt"]);e!==void 0&&Ee!=null&&setValueByPath(e,["parameters","negativePrompt"],Ee);const Ae=getValueByPath(t,["numberOfImages"]);e!==void 0&&Ae!=null&&setValueByPath(e,["parameters","sampleCount"],Ae);const Pe=getValueByPath(t,["aspectRatio"]);e!==void 0&&Pe!=null&&setValueByPath(e,["parameters","aspectRatio"],Pe);const Re=getValueByPath(t,["guidanceScale"]);e!==void 0&&Re!=null&&setValueByPath(e,["parameters","guidanceScale"],Re);const Ce=getValueByPath(t,["seed"]);e!==void 0&&Ce!=null&&setValueByPath(e,["parameters","seed"],Ce);const Be=getValueByPath(t,["safetyFilterLevel"]);e!==void 0&&Be!=null&&setValueByPath(e,["parameters","safetySetting"],Be);const ke=getValueByPath(t,["personGeneration"]);e!==void 0&&ke!=null&&setValueByPath(e,["parameters","personGeneration"],ke);const Me=getValueByPath(t,["includeSafetyAttributes"]);e!==void 0&&Me!=null&&setValueByPath(e,["parameters","includeSafetyAttributes"],Me);const Fe=getValueByPath(t,["includeRaiReason"]);e!==void 0&&Fe!=null&&setValueByPath(e,["parameters","includeRaiReason"],Fe);const Ve=getValueByPath(t,["language"]);e!==void 0&&Ve!=null&&setValueByPath(e,["parameters","language"],Ve);const Oe=getValueByPath(t,["outputMimeType"]);e!==void 0&&Oe!=null&&setValueByPath(e,["parameters","outputOptions","mimeType"],Oe);const $e=getValueByPath(t,["outputCompressionQuality"]);e!==void 0&&$e!=null&&setValueByPath(e,["parameters","outputOptions","compressionQuality"],$e);const Ge=getValueByPath(t,["addWatermark"]);e!==void 0&&Ge!=null&&setValueByPath(e,["parameters","addWatermark"],Ge);const Ue=getValueByPath(t,["labels"]);e!==void 0&&Ue!=null&&setValueByPath(e,["labels"],Ue);const Ye=getValueByPath(t,["imageSize"]);e!==void 0&&Ye!=null&&setValueByPath(e,["parameters","sampleImageSize"],Ye);const Qe=getValueByPath(t,["enhancePrompt"]);return e!==void 0&&Qe!=null&&setValueByPath(e,["parameters","enhancePrompt"],Qe),r}function generateImagesParametersToMldev(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","model"],tModel(t,xe));const Ee=getValueByPath(e,["prompt"]);Ee!=null&&setValueByPath(r,["instances[0]","prompt"],Ee);const Ae=getValueByPath(e,["config"]);return Ae!=null&&generateImagesConfigToMldev(Ae,r),r}function generateImagesParametersToVertex(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","model"],tModel(t,xe));const Ee=getValueByPath(e,["prompt"]);Ee!=null&&setValueByPath(r,["instances[0]","prompt"],Ee);const Ae=getValueByPath(e,["config"]);return Ae!=null&&generateImagesConfigToVertex(Ae,r),r}function generateImagesResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["predictions"]);if(xe!=null){let Ae=xe;Array.isArray(Ae)&&(Ae=Ae.map(Pe=>generatedImageFromMldev(Pe))),setValueByPath(e,["generatedImages"],Ae)}const Ee=getValueByPath(t,["positivePromptSafetyAttributes"]);return Ee!=null&&setValueByPath(e,["positivePromptSafetyAttributes"],safetyAttributesFromMldev(Ee)),e}function generateImagesResponseFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["predictions"]);if(xe!=null){let Ae=xe;Array.isArray(Ae)&&(Ae=Ae.map(Pe=>generatedImageFromVertex(Pe))),setValueByPath(e,["generatedImages"],Ae)}const Ee=getValueByPath(t,["positivePromptSafetyAttributes"]);return Ee!=null&&setValueByPath(e,["positivePromptSafetyAttributes"],safetyAttributesFromVertex(Ee)),e}function generateVideosConfigToMldev(t,e){const r={},xe=getValueByPath(t,["numberOfVideos"]);if(e!==void 0&&xe!=null&&setValueByPath(e,["parameters","sampleCount"],xe),getValueByPath(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(getValueByPath(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const Ee=getValueByPath(t,["durationSeconds"]);if(e!==void 0&&Ee!=null&&setValueByPath(e,["parameters","durationSeconds"],Ee),getValueByPath(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const Ae=getValueByPath(t,["aspectRatio"]);e!==void 0&&Ae!=null&&setValueByPath(e,["parameters","aspectRatio"],Ae);const Pe=getValueByPath(t,["resolution"]);e!==void 0&&Pe!=null&&setValueByPath(e,["parameters","resolution"],Pe);const Re=getValueByPath(t,["personGeneration"]);if(e!==void 0&&Re!=null&&setValueByPath(e,["parameters","personGeneration"],Re),getValueByPath(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const Ce=getValueByPath(t,["negativePrompt"]);e!==void 0&&Ce!=null&&setValueByPath(e,["parameters","negativePrompt"],Ce);const Be=getValueByPath(t,["enhancePrompt"]);if(e!==void 0&&Be!=null&&setValueByPath(e,["parameters","enhancePrompt"],Be),getValueByPath(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const ke=getValueByPath(t,["lastFrame"]);e!==void 0&&ke!=null&&setValueByPath(e,["instances[0]","lastFrame"],imageToMldev(ke));const Me=getValueByPath(t,["referenceImages"]);if(e!==void 0&&Me!=null){let Fe=Me;Array.isArray(Fe)&&(Fe=Fe.map(Ve=>videoGenerationReferenceImageToMldev(Ve))),setValueByPath(e,["instances[0]","referenceImages"],Fe)}if(getValueByPath(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(getValueByPath(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return r}function generateVideosConfigToVertex(t,e){const r={},xe=getValueByPath(t,["numberOfVideos"]);e!==void 0&&xe!=null&&setValueByPath(e,["parameters","sampleCount"],xe);const Ee=getValueByPath(t,["outputGcsUri"]);e!==void 0&&Ee!=null&&setValueByPath(e,["parameters","storageUri"],Ee);const Ae=getValueByPath(t,["fps"]);e!==void 0&&Ae!=null&&setValueByPath(e,["parameters","fps"],Ae);const Pe=getValueByPath(t,["durationSeconds"]);e!==void 0&&Pe!=null&&setValueByPath(e,["parameters","durationSeconds"],Pe);const Re=getValueByPath(t,["seed"]);e!==void 0&&Re!=null&&setValueByPath(e,["parameters","seed"],Re);const Ce=getValueByPath(t,["aspectRatio"]);e!==void 0&&Ce!=null&&setValueByPath(e,["parameters","aspectRatio"],Ce);const Be=getValueByPath(t,["resolution"]);e!==void 0&&Be!=null&&setValueByPath(e,["parameters","resolution"],Be);const ke=getValueByPath(t,["personGeneration"]);e!==void 0&&ke!=null&&setValueByPath(e,["parameters","personGeneration"],ke);const Me=getValueByPath(t,["pubsubTopic"]);e!==void 0&&Me!=null&&setValueByPath(e,["parameters","pubsubTopic"],Me);const Fe=getValueByPath(t,["negativePrompt"]);e!==void 0&&Fe!=null&&setValueByPath(e,["parameters","negativePrompt"],Fe);const Ve=getValueByPath(t,["enhancePrompt"]);e!==void 0&&Ve!=null&&setValueByPath(e,["parameters","enhancePrompt"],Ve);const Oe=getValueByPath(t,["generateAudio"]);e!==void 0&&Oe!=null&&setValueByPath(e,["parameters","generateAudio"],Oe);const $e=getValueByPath(t,["lastFrame"]);e!==void 0&&$e!=null&&setValueByPath(e,["instances[0]","lastFrame"],imageToVertex($e));const Ge=getValueByPath(t,["referenceImages"]);if(e!==void 0&&Ge!=null){let Qe=Ge;Array.isArray(Qe)&&(Qe=Qe.map(rn=>videoGenerationReferenceImageToVertex(rn))),setValueByPath(e,["instances[0]","referenceImages"],Qe)}const Ue=getValueByPath(t,["mask"]);e!==void 0&&Ue!=null&&setValueByPath(e,["instances[0]","mask"],videoGenerationMaskToVertex(Ue));const Ye=getValueByPath(t,["compressionQuality"]);return e!==void 0&&Ye!=null&&setValueByPath(e,["parameters","compressionQuality"],Ye),r}function generateVideosOperationFromMldev(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const xe=getValueByPath(t,["metadata"]);xe!=null&&setValueByPath(e,["metadata"],xe);const Ee=getValueByPath(t,["done"]);Ee!=null&&setValueByPath(e,["done"],Ee);const Ae=getValueByPath(t,["error"]);Ae!=null&&setValueByPath(e,["error"],Ae);const Pe=getValueByPath(t,["response","generateVideoResponse"]);return Pe!=null&&setValueByPath(e,["response"],generateVideosResponseFromMldev(Pe)),e}function generateVideosOperationFromVertex(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const xe=getValueByPath(t,["metadata"]);xe!=null&&setValueByPath(e,["metadata"],xe);const Ee=getValueByPath(t,["done"]);Ee!=null&&setValueByPath(e,["done"],Ee);const Ae=getValueByPath(t,["error"]);Ae!=null&&setValueByPath(e,["error"],Ae);const Pe=getValueByPath(t,["response"]);return Pe!=null&&setValueByPath(e,["response"],generateVideosResponseFromVertex(Pe)),e}function generateVideosParametersToMldev(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","model"],tModel(t,xe));const Ee=getValueByPath(e,["prompt"]);Ee!=null&&setValueByPath(r,["instances[0]","prompt"],Ee);const Ae=getValueByPath(e,["image"]);Ae!=null&&setValueByPath(r,["instances[0]","image"],imageToMldev(Ae));const Pe=getValueByPath(e,["video"]);Pe!=null&&setValueByPath(r,["instances[0]","video"],videoToMldev(Pe));const Re=getValueByPath(e,["source"]);Re!=null&&generateVideosSourceToMldev(Re,r);const Ce=getValueByPath(e,["config"]);return Ce!=null&&generateVideosConfigToMldev(Ce,r),r}function generateVideosParametersToVertex(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","model"],tModel(t,xe));const Ee=getValueByPath(e,["prompt"]);Ee!=null&&setValueByPath(r,["instances[0]","prompt"],Ee);const Ae=getValueByPath(e,["image"]);Ae!=null&&setValueByPath(r,["instances[0]","image"],imageToVertex(Ae));const Pe=getValueByPath(e,["video"]);Pe!=null&&setValueByPath(r,["instances[0]","video"],videoToVertex(Pe));const Re=getValueByPath(e,["source"]);Re!=null&&generateVideosSourceToVertex(Re,r);const Ce=getValueByPath(e,["config"]);return Ce!=null&&generateVideosConfigToVertex(Ce,r),r}function generateVideosResponseFromMldev(t){const e={},r=getValueByPath(t,["generatedSamples"]);if(r!=null){let Ae=r;Array.isArray(Ae)&&(Ae=Ae.map(Pe=>generatedVideoFromMldev(Pe))),setValueByPath(e,["generatedVideos"],Ae)}const xe=getValueByPath(t,["raiMediaFilteredCount"]);xe!=null&&setValueByPath(e,["raiMediaFilteredCount"],xe);const Ee=getValueByPath(t,["raiMediaFilteredReasons"]);return Ee!=null&&setValueByPath(e,["raiMediaFilteredReasons"],Ee),e}function generateVideosResponseFromVertex(t){const e={},r=getValueByPath(t,["videos"]);if(r!=null){let Ae=r;Array.isArray(Ae)&&(Ae=Ae.map(Pe=>generatedVideoFromVertex(Pe))),setValueByPath(e,["generatedVideos"],Ae)}const xe=getValueByPath(t,["raiMediaFilteredCount"]);xe!=null&&setValueByPath(e,["raiMediaFilteredCount"],xe);const Ee=getValueByPath(t,["raiMediaFilteredReasons"]);return Ee!=null&&setValueByPath(e,["raiMediaFilteredReasons"],Ee),e}function generateVideosSourceToMldev(t,e){const r={},xe=getValueByPath(t,["prompt"]);e!==void 0&&xe!=null&&setValueByPath(e,["instances[0]","prompt"],xe);const Ee=getValueByPath(t,["image"]);e!==void 0&&Ee!=null&&setValueByPath(e,["instances[0]","image"],imageToMldev(Ee));const Ae=getValueByPath(t,["video"]);return e!==void 0&&Ae!=null&&setValueByPath(e,["instances[0]","video"],videoToMldev(Ae)),r}function generateVideosSourceToVertex(t,e){const r={},xe=getValueByPath(t,["prompt"]);e!==void 0&&xe!=null&&setValueByPath(e,["instances[0]","prompt"],xe);const Ee=getValueByPath(t,["image"]);e!==void 0&&Ee!=null&&setValueByPath(e,["instances[0]","image"],imageToVertex(Ee));const Ae=getValueByPath(t,["video"]);return e!==void 0&&Ae!=null&&setValueByPath(e,["instances[0]","video"],videoToVertex(Ae)),r}function generatedImageFromMldev(t){const e={},r=getValueByPath(t,["_self"]);r!=null&&setValueByPath(e,["image"],imageFromMldev(r));const xe=getValueByPath(t,["raiFilteredReason"]);xe!=null&&setValueByPath(e,["raiFilteredReason"],xe);const Ee=getValueByPath(t,["_self"]);return Ee!=null&&setValueByPath(e,["safetyAttributes"],safetyAttributesFromMldev(Ee)),e}function generatedImageFromVertex(t){const e={},r=getValueByPath(t,["_self"]);r!=null&&setValueByPath(e,["image"],imageFromVertex(r));const xe=getValueByPath(t,["raiFilteredReason"]);xe!=null&&setValueByPath(e,["raiFilteredReason"],xe);const Ee=getValueByPath(t,["_self"]);Ee!=null&&setValueByPath(e,["safetyAttributes"],safetyAttributesFromVertex(Ee));const Ae=getValueByPath(t,["prompt"]);return Ae!=null&&setValueByPath(e,["enhancedPrompt"],Ae),e}function generatedImageMaskFromVertex(t){const e={},r=getValueByPath(t,["_self"]);r!=null&&setValueByPath(e,["mask"],imageFromVertex(r));const xe=getValueByPath(t,["labels"]);if(xe!=null){let Ee=xe;Array.isArray(Ee)&&(Ee=Ee.map(Ae=>Ae)),setValueByPath(e,["labels"],Ee)}return e}function generatedVideoFromMldev(t){const e={},r=getValueByPath(t,["video"]);return r!=null&&setValueByPath(e,["video"],videoFromMldev(r)),e}function generatedVideoFromVertex(t){const e={},r=getValueByPath(t,["_self"]);return r!=null&&setValueByPath(e,["video"],videoFromVertex(r)),e}function generationConfigToVertex(t){const e={},r=getValueByPath(t,["modelSelectionConfig"]);r!=null&&setValueByPath(e,["modelConfig"],r);const xe=getValueByPath(t,["responseJsonSchema"]);xe!=null&&setValueByPath(e,["responseJsonSchema"],xe);const Ee=getValueByPath(t,["audioTimestamp"]);Ee!=null&&setValueByPath(e,["audioTimestamp"],Ee);const Ae=getValueByPath(t,["candidateCount"]);Ae!=null&&setValueByPath(e,["candidateCount"],Ae);const Pe=getValueByPath(t,["enableAffectiveDialog"]);Pe!=null&&setValueByPath(e,["enableAffectiveDialog"],Pe);const Re=getValueByPath(t,["frequencyPenalty"]);Re!=null&&setValueByPath(e,["frequencyPenalty"],Re);const Ce=getValueByPath(t,["logprobs"]);Ce!=null&&setValueByPath(e,["logprobs"],Ce);const Be=getValueByPath(t,["maxOutputTokens"]);Be!=null&&setValueByPath(e,["maxOutputTokens"],Be);const ke=getValueByPath(t,["mediaResolution"]);ke!=null&&setValueByPath(e,["mediaResolution"],ke);const Me=getValueByPath(t,["presencePenalty"]);Me!=null&&setValueByPath(e,["presencePenalty"],Me);const Fe=getValueByPath(t,["responseLogprobs"]);Fe!=null&&setValueByPath(e,["responseLogprobs"],Fe);const Ve=getValueByPath(t,["responseMimeType"]);Ve!=null&&setValueByPath(e,["responseMimeType"],Ve);const Oe=getValueByPath(t,["responseModalities"]);Oe!=null&&setValueByPath(e,["responseModalities"],Oe);const $e=getValueByPath(t,["responseSchema"]);$e!=null&&setValueByPath(e,["responseSchema"],$e);const Ge=getValueByPath(t,["routingConfig"]);Ge!=null&&setValueByPath(e,["routingConfig"],Ge);const Ue=getValueByPath(t,["seed"]);Ue!=null&&setValueByPath(e,["seed"],Ue);const Ye=getValueByPath(t,["speechConfig"]);Ye!=null&&setValueByPath(e,["speechConfig"],speechConfigToVertex(Ye));const Qe=getValueByPath(t,["stopSequences"]);Qe!=null&&setValueByPath(e,["stopSequences"],Qe);const rn=getValueByPath(t,["temperature"]);rn!=null&&setValueByPath(e,["temperature"],rn);const tn=getValueByPath(t,["thinkingConfig"]);tn!=null&&setValueByPath(e,["thinkingConfig"],tn);const an=getValueByPath(t,["topK"]);an!=null&&setValueByPath(e,["topK"],an);const qe=getValueByPath(t,["topP"]);if(qe!=null&&setValueByPath(e,["topP"],qe),getValueByPath(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function getModelParametersToMldev(t,e){const r={},xe=getValueByPath(e,["model"]);return xe!=null&&setValueByPath(r,["_url","name"],tModel(t,xe)),r}function getModelParametersToVertex(t,e){const r={},xe=getValueByPath(e,["model"]);return xe!=null&&setValueByPath(r,["_url","name"],tModel(t,xe)),r}function googleMapsToMldev$1(t){const e={};if(getValueByPath(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=getValueByPath(t,["enableWidget"]);return r!=null&&setValueByPath(e,["enableWidget"],r),e}function googleSearchToMldev$1(t){const e={};if(getValueByPath(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(getValueByPath(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=getValueByPath(t,["timeRangeFilter"]);return r!=null&&setValueByPath(e,["timeRangeFilter"],r),e}function imageConfigToMldev(t){const e={},r=getValueByPath(t,["aspectRatio"]);r!=null&&setValueByPath(e,["aspectRatio"],r);const xe=getValueByPath(t,["imageSize"]);if(xe!=null&&setValueByPath(e,["imageSize"],xe),getValueByPath(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(getValueByPath(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function imageConfigToVertex(t){const e={},r=getValueByPath(t,["aspectRatio"]);r!=null&&setValueByPath(e,["aspectRatio"],r);const xe=getValueByPath(t,["imageSize"]);xe!=null&&setValueByPath(e,["imageSize"],xe);const Ee=getValueByPath(t,["outputMimeType"]);Ee!=null&&setValueByPath(e,["imageOutputOptions","mimeType"],Ee);const Ae=getValueByPath(t,["outputCompressionQuality"]);return Ae!=null&&setValueByPath(e,["imageOutputOptions","compressionQuality"],Ae),e}function imageFromMldev(t){const e={},r=getValueByPath(t,["bytesBase64Encoded"]);r!=null&&setValueByPath(e,["imageBytes"],tBytes(r));const xe=getValueByPath(t,["mimeType"]);return xe!=null&&setValueByPath(e,["mimeType"],xe),e}function imageFromVertex(t){const e={},r=getValueByPath(t,["gcsUri"]);r!=null&&setValueByPath(e,["gcsUri"],r);const xe=getValueByPath(t,["bytesBase64Encoded"]);xe!=null&&setValueByPath(e,["imageBytes"],tBytes(xe));const Ee=getValueByPath(t,["mimeType"]);return Ee!=null&&setValueByPath(e,["mimeType"],Ee),e}function imageToMldev(t){const e={};if(getValueByPath(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=getValueByPath(t,["imageBytes"]);r!=null&&setValueByPath(e,["bytesBase64Encoded"],tBytes(r));const xe=getValueByPath(t,["mimeType"]);return xe!=null&&setValueByPath(e,["mimeType"],xe),e}function imageToVertex(t){const e={},r=getValueByPath(t,["gcsUri"]);r!=null&&setValueByPath(e,["gcsUri"],r);const xe=getValueByPath(t,["imageBytes"]);xe!=null&&setValueByPath(e,["bytesBase64Encoded"],tBytes(xe));const Ee=getValueByPath(t,["mimeType"]);return Ee!=null&&setValueByPath(e,["mimeType"],Ee),e}function listModelsConfigToMldev(t,e,r){const xe={},Ee=getValueByPath(e,["pageSize"]);r!==void 0&&Ee!=null&&setValueByPath(r,["_query","pageSize"],Ee);const Ae=getValueByPath(e,["pageToken"]);r!==void 0&&Ae!=null&&setValueByPath(r,["_query","pageToken"],Ae);const Pe=getValueByPath(e,["filter"]);r!==void 0&&Pe!=null&&setValueByPath(r,["_query","filter"],Pe);const Re=getValueByPath(e,["queryBase"]);return r!==void 0&&Re!=null&&setValueByPath(r,["_url","models_url"],tModelsUrl(t,Re)),xe}function listModelsConfigToVertex(t,e,r){const xe={},Ee=getValueByPath(e,["pageSize"]);r!==void 0&&Ee!=null&&setValueByPath(r,["_query","pageSize"],Ee);const Ae=getValueByPath(e,["pageToken"]);r!==void 0&&Ae!=null&&setValueByPath(r,["_query","pageToken"],Ae);const Pe=getValueByPath(e,["filter"]);r!==void 0&&Pe!=null&&setValueByPath(r,["_query","filter"],Pe);const Re=getValueByPath(e,["queryBase"]);return r!==void 0&&Re!=null&&setValueByPath(r,["_url","models_url"],tModelsUrl(t,Re)),xe}function listModelsParametersToMldev(t,e){const r={},xe=getValueByPath(e,["config"]);return xe!=null&&listModelsConfigToMldev(t,xe,r),r}function listModelsParametersToVertex(t,e){const r={},xe=getValueByPath(e,["config"]);return xe!=null&&listModelsConfigToVertex(t,xe,r),r}function listModelsResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["nextPageToken"]);xe!=null&&setValueByPath(e,["nextPageToken"],xe);const Ee=getValueByPath(t,["_self"]);if(Ee!=null){let Ae=tExtractModels(Ee);Array.isArray(Ae)&&(Ae=Ae.map(Pe=>modelFromMldev(Pe))),setValueByPath(e,["models"],Ae)}return e}function listModelsResponseFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["nextPageToken"]);xe!=null&&setValueByPath(e,["nextPageToken"],xe);const Ee=getValueByPath(t,["_self"]);if(Ee!=null){let Ae=tExtractModels(Ee);Array.isArray(Ae)&&(Ae=Ae.map(Pe=>modelFromVertex(Pe))),setValueByPath(e,["models"],Ae)}return e}function maskReferenceConfigToVertex(t){const e={},r=getValueByPath(t,["maskMode"]);r!=null&&setValueByPath(e,["maskMode"],r);const xe=getValueByPath(t,["segmentationClasses"]);xe!=null&&setValueByPath(e,["maskClasses"],xe);const Ee=getValueByPath(t,["maskDilation"]);return Ee!=null&&setValueByPath(e,["dilation"],Ee),e}function modelFromMldev(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const xe=getValueByPath(t,["displayName"]);xe!=null&&setValueByPath(e,["displayName"],xe);const Ee=getValueByPath(t,["description"]);Ee!=null&&setValueByPath(e,["description"],Ee);const Ae=getValueByPath(t,["version"]);Ae!=null&&setValueByPath(e,["version"],Ae);const Pe=getValueByPath(t,["_self"]);Pe!=null&&setValueByPath(e,["tunedModelInfo"],tunedModelInfoFromMldev(Pe));const Re=getValueByPath(t,["inputTokenLimit"]);Re!=null&&setValueByPath(e,["inputTokenLimit"],Re);const Ce=getValueByPath(t,["outputTokenLimit"]);Ce!=null&&setValueByPath(e,["outputTokenLimit"],Ce);const Be=getValueByPath(t,["supportedGenerationMethods"]);Be!=null&&setValueByPath(e,["supportedActions"],Be);const ke=getValueByPath(t,["temperature"]);ke!=null&&setValueByPath(e,["temperature"],ke);const Me=getValueByPath(t,["maxTemperature"]);Me!=null&&setValueByPath(e,["maxTemperature"],Me);const Fe=getValueByPath(t,["topP"]);Fe!=null&&setValueByPath(e,["topP"],Fe);const Ve=getValueByPath(t,["topK"]);Ve!=null&&setValueByPath(e,["topK"],Ve);const Oe=getValueByPath(t,["thinking"]);return Oe!=null&&setValueByPath(e,["thinking"],Oe),e}function modelFromVertex(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const xe=getValueByPath(t,["displayName"]);xe!=null&&setValueByPath(e,["displayName"],xe);const Ee=getValueByPath(t,["description"]);Ee!=null&&setValueByPath(e,["description"],Ee);const Ae=getValueByPath(t,["versionId"]);Ae!=null&&setValueByPath(e,["version"],Ae);const Pe=getValueByPath(t,["deployedModels"]);if(Pe!=null){let Me=Pe;Array.isArray(Me)&&(Me=Me.map(Fe=>endpointFromVertex(Fe))),setValueByPath(e,["endpoints"],Me)}const Re=getValueByPath(t,["labels"]);Re!=null&&setValueByPath(e,["labels"],Re);const Ce=getValueByPath(t,["_self"]);Ce!=null&&setValueByPath(e,["tunedModelInfo"],tunedModelInfoFromVertex(Ce));const Be=getValueByPath(t,["defaultCheckpointId"]);Be!=null&&setValueByPath(e,["defaultCheckpointId"],Be);const ke=getValueByPath(t,["checkpoints"]);if(ke!=null){let Me=ke;Array.isArray(Me)&&(Me=Me.map(Fe=>Fe)),setValueByPath(e,["checkpoints"],Me)}return e}function partToMldev$1(t){const e={},r=getValueByPath(t,["mediaResolution"]);r!=null&&setValueByPath(e,["mediaResolution"],r);const xe=getValueByPath(t,["codeExecutionResult"]);xe!=null&&setValueByPath(e,["codeExecutionResult"],xe);const Ee=getValueByPath(t,["executableCode"]);Ee!=null&&setValueByPath(e,["executableCode"],Ee);const Ae=getValueByPath(t,["fileData"]);Ae!=null&&setValueByPath(e,["fileData"],fileDataToMldev$1(Ae));const Pe=getValueByPath(t,["functionCall"]);Pe!=null&&setValueByPath(e,["functionCall"],functionCallToMldev$1(Pe));const Re=getValueByPath(t,["functionResponse"]);Re!=null&&setValueByPath(e,["functionResponse"],Re);const Ce=getValueByPath(t,["inlineData"]);Ce!=null&&setValueByPath(e,["inlineData"],blobToMldev$1(Ce));const Be=getValueByPath(t,["text"]);Be!=null&&setValueByPath(e,["text"],Be);const ke=getValueByPath(t,["thought"]);ke!=null&&setValueByPath(e,["thought"],ke);const Me=getValueByPath(t,["thoughtSignature"]);Me!=null&&setValueByPath(e,["thoughtSignature"],Me);const Fe=getValueByPath(t,["videoMetadata"]);return Fe!=null&&setValueByPath(e,["videoMetadata"],Fe),e}function productImageToVertex(t){const e={},r=getValueByPath(t,["productImage"]);return r!=null&&setValueByPath(e,["image"],imageToVertex(r)),e}function recontextImageConfigToVertex(t,e){const r={},xe=getValueByPath(t,["numberOfImages"]);e!==void 0&&xe!=null&&setValueByPath(e,["parameters","sampleCount"],xe);const Ee=getValueByPath(t,["baseSteps"]);e!==void 0&&Ee!=null&&setValueByPath(e,["parameters","baseSteps"],Ee);const Ae=getValueByPath(t,["outputGcsUri"]);e!==void 0&&Ae!=null&&setValueByPath(e,["parameters","storageUri"],Ae);const Pe=getValueByPath(t,["seed"]);e!==void 0&&Pe!=null&&setValueByPath(e,["parameters","seed"],Pe);const Re=getValueByPath(t,["safetyFilterLevel"]);e!==void 0&&Re!=null&&setValueByPath(e,["parameters","safetySetting"],Re);const Ce=getValueByPath(t,["personGeneration"]);e!==void 0&&Ce!=null&&setValueByPath(e,["parameters","personGeneration"],Ce);const Be=getValueByPath(t,["addWatermark"]);e!==void 0&&Be!=null&&setValueByPath(e,["parameters","addWatermark"],Be);const ke=getValueByPath(t,["outputMimeType"]);e!==void 0&&ke!=null&&setValueByPath(e,["parameters","outputOptions","mimeType"],ke);const Me=getValueByPath(t,["outputCompressionQuality"]);e!==void 0&&Me!=null&&setValueByPath(e,["parameters","outputOptions","compressionQuality"],Me);const Fe=getValueByPath(t,["enhancePrompt"]);e!==void 0&&Fe!=null&&setValueByPath(e,["parameters","enhancePrompt"],Fe);const Ve=getValueByPath(t,["labels"]);return e!==void 0&&Ve!=null&&setValueByPath(e,["labels"],Ve),r}function recontextImageParametersToVertex(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","model"],tModel(t,xe));const Ee=getValueByPath(e,["source"]);Ee!=null&&recontextImageSourceToVertex(Ee,r);const Ae=getValueByPath(e,["config"]);return Ae!=null&&recontextImageConfigToVertex(Ae,r),r}function recontextImageResponseFromVertex(t){const e={},r=getValueByPath(t,["predictions"]);if(r!=null){let xe=r;Array.isArray(xe)&&(xe=xe.map(Ee=>generatedImageFromVertex(Ee))),setValueByPath(e,["generatedImages"],xe)}return e}function recontextImageSourceToVertex(t,e){const r={},xe=getValueByPath(t,["prompt"]);e!==void 0&&xe!=null&&setValueByPath(e,["instances[0]","prompt"],xe);const Ee=getValueByPath(t,["personImage"]);e!==void 0&&Ee!=null&&setValueByPath(e,["instances[0]","personImage","image"],imageToVertex(Ee));const Ae=getValueByPath(t,["productImages"]);if(e!==void 0&&Ae!=null){let Pe=Ae;Array.isArray(Pe)&&(Pe=Pe.map(Re=>productImageToVertex(Re))),setValueByPath(e,["instances[0]","productImages"],Pe)}return r}function referenceImageAPIInternalToVertex(t){const e={},r=getValueByPath(t,["referenceImage"]);r!=null&&setValueByPath(e,["referenceImage"],imageToVertex(r));const xe=getValueByPath(t,["referenceId"]);xe!=null&&setValueByPath(e,["referenceId"],xe);const Ee=getValueByPath(t,["referenceType"]);Ee!=null&&setValueByPath(e,["referenceType"],Ee);const Ae=getValueByPath(t,["maskImageConfig"]);Ae!=null&&setValueByPath(e,["maskImageConfig"],maskReferenceConfigToVertex(Ae));const Pe=getValueByPath(t,["controlImageConfig"]);Pe!=null&&setValueByPath(e,["controlImageConfig"],controlReferenceConfigToVertex(Pe));const Re=getValueByPath(t,["styleImageConfig"]);Re!=null&&setValueByPath(e,["styleImageConfig"],Re);const Ce=getValueByPath(t,["subjectImageConfig"]);return Ce!=null&&setValueByPath(e,["subjectImageConfig"],Ce),e}function safetyAttributesFromMldev(t){const e={},r=getValueByPath(t,["safetyAttributes","categories"]);r!=null&&setValueByPath(e,["categories"],r);const xe=getValueByPath(t,["safetyAttributes","scores"]);xe!=null&&setValueByPath(e,["scores"],xe);const Ee=getValueByPath(t,["contentType"]);return Ee!=null&&setValueByPath(e,["contentType"],Ee),e}function safetyAttributesFromVertex(t){const e={},r=getValueByPath(t,["safetyAttributes","categories"]);r!=null&&setValueByPath(e,["categories"],r);const xe=getValueByPath(t,["safetyAttributes","scores"]);xe!=null&&setValueByPath(e,["scores"],xe);const Ee=getValueByPath(t,["contentType"]);return Ee!=null&&setValueByPath(e,["contentType"],Ee),e}function safetySettingToMldev(t){const e={},r=getValueByPath(t,["category"]);if(r!=null&&setValueByPath(e,["category"],r),getValueByPath(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const xe=getValueByPath(t,["threshold"]);return xe!=null&&setValueByPath(e,["threshold"],xe),e}function scribbleImageToVertex(t){const e={},r=getValueByPath(t,["image"]);return r!=null&&setValueByPath(e,["image"],imageToVertex(r)),e}function segmentImageConfigToVertex(t,e){const r={},xe=getValueByPath(t,["mode"]);e!==void 0&&xe!=null&&setValueByPath(e,["parameters","mode"],xe);const Ee=getValueByPath(t,["maxPredictions"]);e!==void 0&&Ee!=null&&setValueByPath(e,["parameters","maxPredictions"],Ee);const Ae=getValueByPath(t,["confidenceThreshold"]);e!==void 0&&Ae!=null&&setValueByPath(e,["parameters","confidenceThreshold"],Ae);const Pe=getValueByPath(t,["maskDilation"]);e!==void 0&&Pe!=null&&setValueByPath(e,["parameters","maskDilation"],Pe);const Re=getValueByPath(t,["binaryColorThreshold"]);e!==void 0&&Re!=null&&setValueByPath(e,["parameters","binaryColorThreshold"],Re);const Ce=getValueByPath(t,["labels"]);return e!==void 0&&Ce!=null&&setValueByPath(e,["labels"],Ce),r}function segmentImageParametersToVertex(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","model"],tModel(t,xe));const Ee=getValueByPath(e,["source"]);Ee!=null&&segmentImageSourceToVertex(Ee,r);const Ae=getValueByPath(e,["config"]);return Ae!=null&&segmentImageConfigToVertex(Ae,r),r}function segmentImageResponseFromVertex(t){const e={},r=getValueByPath(t,["predictions"]);if(r!=null){let xe=r;Array.isArray(xe)&&(xe=xe.map(Ee=>generatedImageMaskFromVertex(Ee))),setValueByPath(e,["generatedMasks"],xe)}return e}function segmentImageSourceToVertex(t,e){const r={},xe=getValueByPath(t,["prompt"]);e!==void 0&&xe!=null&&setValueByPath(e,["instances[0]","prompt"],xe);const Ee=getValueByPath(t,["image"]);e!==void 0&&Ee!=null&&setValueByPath(e,["instances[0]","image"],imageToVertex(Ee));const Ae=getValueByPath(t,["scribbleImage"]);return e!==void 0&&Ae!=null&&setValueByPath(e,["instances[0]","scribble"],scribbleImageToVertex(Ae)),r}function speechConfigToVertex(t){const e={},r=getValueByPath(t,["voiceConfig"]);r!=null&&setValueByPath(e,["voiceConfig"],r);const xe=getValueByPath(t,["languageCode"]);if(xe!=null&&setValueByPath(e,["languageCode"],xe),getValueByPath(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function toolConfigToMldev(t){const e={},r=getValueByPath(t,["functionCallingConfig"]);r!=null&&setValueByPath(e,["functionCallingConfig"],functionCallingConfigToMldev(r));const xe=getValueByPath(t,["retrievalConfig"]);return xe!=null&&setValueByPath(e,["retrievalConfig"],xe),e}function toolToMldev$1(t){const e={},r=getValueByPath(t,["functionDeclarations"]);if(r!=null){let ke=r;Array.isArray(ke)&&(ke=ke.map(Me=>Me)),setValueByPath(e,["functionDeclarations"],ke)}if(getValueByPath(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const xe=getValueByPath(t,["googleSearchRetrieval"]);xe!=null&&setValueByPath(e,["googleSearchRetrieval"],xe);const Ee=getValueByPath(t,["computerUse"]);Ee!=null&&setValueByPath(e,["computerUse"],Ee);const Ae=getValueByPath(t,["fileSearch"]);Ae!=null&&setValueByPath(e,["fileSearch"],Ae);const Pe=getValueByPath(t,["codeExecution"]);if(Pe!=null&&setValueByPath(e,["codeExecution"],Pe),getValueByPath(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const Re=getValueByPath(t,["googleMaps"]);Re!=null&&setValueByPath(e,["googleMaps"],googleMapsToMldev$1(Re));const Ce=getValueByPath(t,["googleSearch"]);Ce!=null&&setValueByPath(e,["googleSearch"],googleSearchToMldev$1(Ce));const Be=getValueByPath(t,["urlContext"]);return Be!=null&&setValueByPath(e,["urlContext"],Be),e}function toolToVertex(t){const e={},r=getValueByPath(t,["functionDeclarations"]);if(r!=null){let Me=r;Array.isArray(Me)&&(Me=Me.map(Fe=>functionDeclarationToVertex(Fe))),setValueByPath(e,["functionDeclarations"],Me)}const xe=getValueByPath(t,["retrieval"]);xe!=null&&setValueByPath(e,["retrieval"],xe);const Ee=getValueByPath(t,["googleSearchRetrieval"]);Ee!=null&&setValueByPath(e,["googleSearchRetrieval"],Ee);const Ae=getValueByPath(t,["computerUse"]);if(Ae!=null&&setValueByPath(e,["computerUse"],Ae),getValueByPath(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const Pe=getValueByPath(t,["codeExecution"]);Pe!=null&&setValueByPath(e,["codeExecution"],Pe);const Re=getValueByPath(t,["enterpriseWebSearch"]);Re!=null&&setValueByPath(e,["enterpriseWebSearch"],Re);const Ce=getValueByPath(t,["googleMaps"]);Ce!=null&&setValueByPath(e,["googleMaps"],Ce);const Be=getValueByPath(t,["googleSearch"]);Be!=null&&setValueByPath(e,["googleSearch"],Be);const ke=getValueByPath(t,["urlContext"]);return ke!=null&&setValueByPath(e,["urlContext"],ke),e}function tunedModelInfoFromMldev(t){const e={},r=getValueByPath(t,["baseModel"]);r!=null&&setValueByPath(e,["baseModel"],r);const xe=getValueByPath(t,["createTime"]);xe!=null&&setValueByPath(e,["createTime"],xe);const Ee=getValueByPath(t,["updateTime"]);return Ee!=null&&setValueByPath(e,["updateTime"],Ee),e}function tunedModelInfoFromVertex(t){const e={},r=getValueByPath(t,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&setValueByPath(e,["baseModel"],r);const xe=getValueByPath(t,["createTime"]);xe!=null&&setValueByPath(e,["createTime"],xe);const Ee=getValueByPath(t,["updateTime"]);return Ee!=null&&setValueByPath(e,["updateTime"],Ee),e}function updateModelConfigToMldev(t,e){const r={},xe=getValueByPath(t,["displayName"]);e!==void 0&&xe!=null&&setValueByPath(e,["displayName"],xe);const Ee=getValueByPath(t,["description"]);e!==void 0&&Ee!=null&&setValueByPath(e,["description"],Ee);const Ae=getValueByPath(t,["defaultCheckpointId"]);return e!==void 0&&Ae!=null&&setValueByPath(e,["defaultCheckpointId"],Ae),r}function updateModelConfigToVertex(t,e){const r={},xe=getValueByPath(t,["displayName"]);e!==void 0&&xe!=null&&setValueByPath(e,["displayName"],xe);const Ee=getValueByPath(t,["description"]);e!==void 0&&Ee!=null&&setValueByPath(e,["description"],Ee);const Ae=getValueByPath(t,["defaultCheckpointId"]);return e!==void 0&&Ae!=null&&setValueByPath(e,["defaultCheckpointId"],Ae),r}function updateModelParametersToMldev(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","name"],tModel(t,xe));const Ee=getValueByPath(e,["config"]);return Ee!=null&&updateModelConfigToMldev(Ee,r),r}function updateModelParametersToVertex(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","model"],tModel(t,xe));const Ee=getValueByPath(e,["config"]);return Ee!=null&&updateModelConfigToVertex(Ee,r),r}function upscaleImageAPIConfigInternalToVertex(t,e){const r={},xe=getValueByPath(t,["outputGcsUri"]);e!==void 0&&xe!=null&&setValueByPath(e,["parameters","storageUri"],xe);const Ee=getValueByPath(t,["safetyFilterLevel"]);e!==void 0&&Ee!=null&&setValueByPath(e,["parameters","safetySetting"],Ee);const Ae=getValueByPath(t,["personGeneration"]);e!==void 0&&Ae!=null&&setValueByPath(e,["parameters","personGeneration"],Ae);const Pe=getValueByPath(t,["includeRaiReason"]);e!==void 0&&Pe!=null&&setValueByPath(e,["parameters","includeRaiReason"],Pe);const Re=getValueByPath(t,["outputMimeType"]);e!==void 0&&Re!=null&&setValueByPath(e,["parameters","outputOptions","mimeType"],Re);const Ce=getValueByPath(t,["outputCompressionQuality"]);e!==void 0&&Ce!=null&&setValueByPath(e,["parameters","outputOptions","compressionQuality"],Ce);const Be=getValueByPath(t,["enhanceInputImage"]);e!==void 0&&Be!=null&&setValueByPath(e,["parameters","upscaleConfig","enhanceInputImage"],Be);const ke=getValueByPath(t,["imagePreservationFactor"]);e!==void 0&&ke!=null&&setValueByPath(e,["parameters","upscaleConfig","imagePreservationFactor"],ke);const Me=getValueByPath(t,["labels"]);e!==void 0&&Me!=null&&setValueByPath(e,["labels"],Me);const Fe=getValueByPath(t,["numberOfImages"]);e!==void 0&&Fe!=null&&setValueByPath(e,["parameters","sampleCount"],Fe);const Ve=getValueByPath(t,["mode"]);return e!==void 0&&Ve!=null&&setValueByPath(e,["parameters","mode"],Ve),r}function upscaleImageAPIParametersInternalToVertex(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","model"],tModel(t,xe));const Ee=getValueByPath(e,["image"]);Ee!=null&&setValueByPath(r,["instances[0]","image"],imageToVertex(Ee));const Ae=getValueByPath(e,["upscaleFactor"]);Ae!=null&&setValueByPath(r,["parameters","upscaleConfig","upscaleFactor"],Ae);const Pe=getValueByPath(e,["config"]);return Pe!=null&&upscaleImageAPIConfigInternalToVertex(Pe,r),r}function upscaleImageResponseFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["predictions"]);if(xe!=null){let Ee=xe;Array.isArray(Ee)&&(Ee=Ee.map(Ae=>generatedImageFromVertex(Ae))),setValueByPath(e,["generatedImages"],Ee)}return e}function videoFromMldev(t){const e={},r=getValueByPath(t,["uri"]);r!=null&&setValueByPath(e,["uri"],r);const xe=getValueByPath(t,["encodedVideo"]);xe!=null&&setValueByPath(e,["videoBytes"],tBytes(xe));const Ee=getValueByPath(t,["encoding"]);return Ee!=null&&setValueByPath(e,["mimeType"],Ee),e}function videoFromVertex(t){const e={},r=getValueByPath(t,["gcsUri"]);r!=null&&setValueByPath(e,["uri"],r);const xe=getValueByPath(t,["bytesBase64Encoded"]);xe!=null&&setValueByPath(e,["videoBytes"],tBytes(xe));const Ee=getValueByPath(t,["mimeType"]);return Ee!=null&&setValueByPath(e,["mimeType"],Ee),e}function videoGenerationMaskToVertex(t){const e={},r=getValueByPath(t,["image"]);r!=null&&setValueByPath(e,["_self"],imageToVertex(r));const xe=getValueByPath(t,["maskMode"]);return xe!=null&&setValueByPath(e,["maskMode"],xe),e}function videoGenerationReferenceImageToMldev(t){const e={},r=getValueByPath(t,["image"]);r!=null&&setValueByPath(e,["image"],imageToMldev(r));const xe=getValueByPath(t,["referenceType"]);return xe!=null&&setValueByPath(e,["referenceType"],xe),e}function videoGenerationReferenceImageToVertex(t){const e={},r=getValueByPath(t,["image"]);r!=null&&setValueByPath(e,["image"],imageToVertex(r));const xe=getValueByPath(t,["referenceType"]);return xe!=null&&setValueByPath(e,["referenceType"],xe),e}function videoToMldev(t){const e={},r=getValueByPath(t,["uri"]);r!=null&&setValueByPath(e,["uri"],r);const xe=getValueByPath(t,["videoBytes"]);xe!=null&&setValueByPath(e,["encodedVideo"],tBytes(xe));const Ee=getValueByPath(t,["mimeType"]);return Ee!=null&&setValueByPath(e,["encoding"],Ee),e}function videoToVertex(t){const e={},r=getValueByPath(t,["uri"]);r!=null&&setValueByPath(e,["gcsUri"],r);const xe=getValueByPath(t,["videoBytes"]);xe!=null&&setValueByPath(e,["bytesBase64Encoded"],tBytes(xe));const Ee=getValueByPath(t,["mimeType"]);return Ee!=null&&setValueByPath(e,["mimeType"],Ee),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function createFileSearchStoreConfigToMldev(t,e){const r={},xe=getValueByPath(t,["displayName"]);return e!==void 0&&xe!=null&&setValueByPath(e,["displayName"],xe),r}function createFileSearchStoreParametersToMldev(t){const e={},r=getValueByPath(t,["config"]);return r!=null&&createFileSearchStoreConfigToMldev(r,e),e}function deleteFileSearchStoreConfigToMldev(t,e){const r={},xe=getValueByPath(t,["force"]);return e!==void 0&&xe!=null&&setValueByPath(e,["_query","force"],xe),r}function deleteFileSearchStoreParametersToMldev(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["_url","name"],r);const xe=getValueByPath(t,["config"]);return xe!=null&&deleteFileSearchStoreConfigToMldev(xe,e),e}function getFileSearchStoreParametersToMldev(t){const e={},r=getValueByPath(t,["name"]);return r!=null&&setValueByPath(e,["_url","name"],r),e}function importFileConfigToMldev(t,e){const r={},xe=getValueByPath(t,["customMetadata"]);if(e!==void 0&&xe!=null){let Ae=xe;Array.isArray(Ae)&&(Ae=Ae.map(Pe=>Pe)),setValueByPath(e,["customMetadata"],Ae)}const Ee=getValueByPath(t,["chunkingConfig"]);return e!==void 0&&Ee!=null&&setValueByPath(e,["chunkingConfig"],Ee),r}function importFileOperationFromMldev(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const xe=getValueByPath(t,["metadata"]);xe!=null&&setValueByPath(e,["metadata"],xe);const Ee=getValueByPath(t,["done"]);Ee!=null&&setValueByPath(e,["done"],Ee);const Ae=getValueByPath(t,["error"]);Ae!=null&&setValueByPath(e,["error"],Ae);const Pe=getValueByPath(t,["response"]);return Pe!=null&&setValueByPath(e,["response"],importFileResponseFromMldev(Pe)),e}function importFileParametersToMldev(t){const e={},r=getValueByPath(t,["fileSearchStoreName"]);r!=null&&setValueByPath(e,["_url","file_search_store_name"],r);const xe=getValueByPath(t,["fileName"]);xe!=null&&setValueByPath(e,["fileName"],xe);const Ee=getValueByPath(t,["config"]);return Ee!=null&&importFileConfigToMldev(Ee,e),e}function importFileResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["parent"]);xe!=null&&setValueByPath(e,["parent"],xe);const Ee=getValueByPath(t,["documentName"]);return Ee!=null&&setValueByPath(e,["documentName"],Ee),e}function listFileSearchStoresConfigToMldev(t,e){const r={},xe=getValueByPath(t,["pageSize"]);e!==void 0&&xe!=null&&setValueByPath(e,["_query","pageSize"],xe);const Ee=getValueByPath(t,["pageToken"]);return e!==void 0&&Ee!=null&&setValueByPath(e,["_query","pageToken"],Ee),r}function listFileSearchStoresParametersToMldev(t){const e={},r=getValueByPath(t,["config"]);return r!=null&&listFileSearchStoresConfigToMldev(r,e),e}function listFileSearchStoresResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["nextPageToken"]);xe!=null&&setValueByPath(e,["nextPageToken"],xe);const Ee=getValueByPath(t,["fileSearchStores"]);if(Ee!=null){let Ae=Ee;Array.isArray(Ae)&&(Ae=Ae.map(Pe=>Pe)),setValueByPath(e,["fileSearchStores"],Ae)}return e}function uploadToFileSearchStoreConfigToMldev(t,e){const r={},xe=getValueByPath(t,["mimeType"]);e!==void 0&&xe!=null&&setValueByPath(e,["mimeType"],xe);const Ee=getValueByPath(t,["displayName"]);e!==void 0&&Ee!=null&&setValueByPath(e,["displayName"],Ee);const Ae=getValueByPath(t,["customMetadata"]);if(e!==void 0&&Ae!=null){let Re=Ae;Array.isArray(Re)&&(Re=Re.map(Ce=>Ce)),setValueByPath(e,["customMetadata"],Re)}const Pe=getValueByPath(t,["chunkingConfig"]);return e!==void 0&&Pe!=null&&setValueByPath(e,["chunkingConfig"],Pe),r}function uploadToFileSearchStoreParametersToMldev(t){const e={},r=getValueByPath(t,["fileSearchStoreName"]);r!=null&&setValueByPath(e,["_url","file_search_store_name"],r);const xe=getValueByPath(t,["config"]);return xe!=null&&uploadToFileSearchStoreConfigToMldev(xe,e),e}function uploadToFileSearchStoreResumableResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);return r!=null&&setValueByPath(e,["sdkHttpResponse"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CONTENT_TYPE_HEADER="Content-Type",SERVER_TIMEOUT_HEADER="X-Server-Timeout",USER_AGENT_HEADER="User-Agent",GOOGLE_API_CLIENT_HEADER="x-goog-api-client",SDK_VERSION="1.33.0",LIBRARY_LABEL=`google-genai-sdk/${SDK_VERSION}`,VERTEX_AI_API_DEFAULT_VERSION="v1beta1",GOOGLE_AI_API_DEFAULT_VERSION="v1beta";class ApiClient{constructor(e){var r,xe;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const Ee={};this.clientOptions.vertexai?(Ee.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:VERTEX_AI_API_DEFAULT_VERSION,Ee.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(Ee.apiVersion=(xe=this.clientOptions.apiVersion)!==null&&xe!==void 0?xe:GOOGLE_AI_API_DEFAULT_VERSION,Ee.baseUrl="https://generativelanguage.googleapis.com/"),Ee.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=Ee,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(Ee,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const xe=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&xe.push(e.apiVersion),xe.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),r=new URL(e);return r.protocol=r.protocol=="http:"?"ws":"wss",r.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,r,xe){const Ee=[this.getRequestUrlInternal(r)];return xe&&Ee.push(this.getBaseResourcePath()),e!==""&&Ee.push(e),new URL(`${Ee.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let r=this.clientOptions.httpOptions;e.httpOptions&&(r=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const xe=this.shouldPrependVertexProjectPath(e),Ee=this.constructUrl(e.path,r,xe);if(e.queryParams)for(const[Pe,Re]of Object.entries(e.queryParams))Ee.searchParams.append(Pe,String(Re));let Ae={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else Ae.body=e.body;return Ae=await this.includeExtraHttpOptionsToRequestInit(Ae,r,Ee.toString(),e.abortSignal),this.unaryApiCall(Ee,Ae,e.httpMethod)}patchHttpOptions(e,r){const xe=JSON.parse(JSON.stringify(e));for(const[Ee,Ae]of Object.entries(r))typeof Ae=="object"?xe[Ee]=Object.assign(Object.assign({},xe[Ee]),Ae):Ae!==void 0&&(xe[Ee]=Ae);return xe}async requestStream(e){let r=this.clientOptions.httpOptions;e.httpOptions&&(r=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const xe=this.shouldPrependVertexProjectPath(e),Ee=this.constructUrl(e.path,r,xe);(!Ee.searchParams.has("alt")||Ee.searchParams.get("alt")!=="sse")&&Ee.searchParams.set("alt","sse");let Ae={};return Ae.body=e.body,Ae=await this.includeExtraHttpOptionsToRequestInit(Ae,r,Ee.toString(),e.abortSignal),this.streamApiCall(Ee,Ae,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,r,xe,Ee){if(r&&r.timeout||Ee){const Ae=new AbortController,Pe=Ae.signal;if(r.timeout&&(r==null?void 0:r.timeout)>0){const Re=setTimeout(()=>Ae.abort(),r.timeout);Re&&typeof Re.unref=="function"&&Re.unref()}Ee&&Ee.addEventListener("abort",()=>{Ae.abort()}),e.signal=Pe}return r&&r.extraBody!==null&&includeExtraBodyToRequestInit(e,r.extraBody),e.headers=await this.getHeadersInternal(r,xe),e}async unaryApiCall(e,r,xe){return this.apiCall(e.toString(),Object.assign(Object.assign({},r),{method:xe})).then(async Ee=>(await throwErrorIfNotOK(Ee),new HttpResponse(Ee))).catch(Ee=>{throw Ee instanceof Error?Ee:new Error(JSON.stringify(Ee))})}async streamApiCall(e,r,xe){return this.apiCall(e.toString(),Object.assign(Object.assign({},r),{method:xe})).then(async Ee=>(await throwErrorIfNotOK(Ee),this.processStreamResponse(Ee))).catch(Ee=>{throw Ee instanceof Error?Ee:new Error(JSON.stringify(Ee))})}processStreamResponse(e){return __asyncGenerator(this,arguments,function*(){var xe;const Ee=(xe=e==null?void 0:e.body)===null||xe===void 0?void 0:xe.getReader(),Ae=new TextDecoder("utf-8");if(!Ee)throw new Error("Response body is empty");try{let Pe="";const Re="data:",Ce=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:Be,value:ke}=yield __await(Ee.read());if(Be){if(Pe.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const Me=Ae.decode(ke,{stream:!0});try{const Oe=JSON.parse(Me);if("error"in Oe){const $e=JSON.parse(JSON.stringify(Oe.error)),Ge=$e.status,Ue=$e.code,Ye=`got status: ${Ge}. ${JSON.stringify(Oe)}`;if(Ue>=400&&Ue<600)throw new ApiError({message:Ye,status:Ue})}}catch(Oe){if(Oe.name==="ApiError")throw Oe}Pe+=Me;let Fe=-1,Ve=0;for(;;){Fe=-1,Ve=0;for(const Ge of Ce){const Ue=Pe.indexOf(Ge);Ue!==-1&&(Fe===-1||Ue<Fe)&&(Fe=Ue,Ve=Ge.length)}if(Fe===-1)break;const Oe=Pe.substring(0,Fe);Pe=Pe.substring(Fe+Ve);const $e=Oe.trim();if($e.startsWith(Re)){const Ge=$e.substring(Re.length).trim();try{const Ue=new Response(Ge,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield __await(new HttpResponse(Ue))}catch(Ue){throw new Error(`exception parsing stream chunk ${Ge}. ${Ue}`)}}}}}finally{Ee.releaseLock()}})}async apiCall(e,r){return fetch(e,r).catch(xe=>{throw new Error(`exception ${xe} sending request`)})}getDefaultHeaders(){const e={},r=LIBRARY_LABEL+" "+this.clientOptions.userAgentExtra;return e[USER_AGENT_HEADER]=r,e[GOOGLE_API_CLIENT_HEADER]=r,e[CONTENT_TYPE_HEADER]="application/json",e}async getHeadersInternal(e,r){const xe=new Headers;if(e&&e.headers){for(const[Ee,Ae]of Object.entries(e.headers))xe.append(Ee,Ae);e.timeout&&e.timeout>0&&xe.append(SERVER_TIMEOUT_HEADER,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(xe,r),xe}getFileName(e){var r;let xe="";return typeof e=="string"&&(xe=e.replace(/[/\\]+$/,""),xe=(r=xe.split(/[/\\]/).pop())!==null&&r!==void 0?r:""),xe}async uploadFile(e,r){var xe;const Ee={};r!=null&&(Ee.mimeType=r.mimeType,Ee.name=r.name,Ee.displayName=r.displayName),Ee.name&&!Ee.name.startsWith("files/")&&(Ee.name=`files/${Ee.name}`);const Ae=this.clientOptions.uploader,Pe=await Ae.stat(e);Ee.sizeBytes=String(Pe.size);const Re=(xe=r==null?void 0:r.mimeType)!==null&&xe!==void 0?xe:Pe.type;if(Re===void 0||Re==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");Ee.mimeType=Re;const Ce={file:Ee},Be=this.getFileName(e),ke=formatMap("upload/v1beta/files",Ce._url),Me=await this.fetchUploadUrl(ke,Ee.sizeBytes,Ee.mimeType,Be,Ce,r==null?void 0:r.httpOptions);return Ae.upload(e,Me,this)}async uploadFileToFileSearchStore(e,r,xe){var Ee;const Ae=this.clientOptions.uploader,Pe=await Ae.stat(r),Re=String(Pe.size),Ce=(Ee=xe==null?void 0:xe.mimeType)!==null&&Ee!==void 0?Ee:Pe.type;if(Ce===void 0||Ce==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const Be=`upload/v1beta/${e}:uploadToFileSearchStore`,ke=this.getFileName(r),Me={};xe!=null&&uploadToFileSearchStoreConfigToMldev(xe,Me);const Fe=await this.fetchUploadUrl(Be,Re,Ce,ke,Me,xe==null?void 0:xe.httpOptions);return Ae.uploadToFileSearchStore(r,Fe,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,r,xe,Ee,Ae,Pe){var Re;let Ce={};Pe?Ce=Pe:Ce={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r}`,"X-Goog-Upload-Header-Content-Type":`${xe}`},Ee?{"X-Goog-Upload-File-Name":Ee}:{})};const Be=await this.request({path:e,body:JSON.stringify(Ae),httpMethod:"POST",httpOptions:Ce});if(!Be||!(Be!=null&&Be.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const ke=(Re=Be==null?void 0:Be.headers)===null||Re===void 0?void 0:Re["x-goog-upload-url"];if(ke===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return ke}}async function throwErrorIfNotOK(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const r=t.status;let xe;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?xe=await t.json():xe={error:{message:await t.text(),code:t.status,status:t.statusText}};const Ee=JSON.stringify(xe);throw r>=400&&r<600?new ApiError({message:Ee,status:r}):new Error(Ee)}}function includeExtraBodyToRequestInit(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let r={};if(typeof t.body=="string"&&t.body.length>0)try{const Ae=JSON.parse(t.body);if(typeof Ae=="object"&&Ae!==null&&!Array.isArray(Ae))r=Ae;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function xe(Ae,Pe){const Re=Object.assign({},Ae);for(const Ce in Pe)if(Object.prototype.hasOwnProperty.call(Pe,Ce)){const Be=Pe[Ce],ke=Re[Ce];Be&&typeof Be=="object"&&!Array.isArray(Be)&&ke&&typeof ke=="object"&&!Array.isArray(ke)?Re[Ce]=xe(ke,Be):(ke&&Be&&typeof ke!=typeof Be&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${Ce}". Original type: ${typeof ke}, New type: ${typeof Be}. Overwriting.`),Re[Ce]=Be)}return Re}const Ee=xe(r,e);t.body=JSON.stringify(Ee)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const MCP_LABEL="mcp_used/unknown";let hasMcpToolUsageFromMcpToTool=!1;function hasMcpToolUsage(t){for(const e of t)if(isMcpCallableTool(e)||typeof e=="object"&&"inputSchema"in e)return!0;return hasMcpToolUsageFromMcpToTool}function setMcpUsageHeader(t){var e;const r=(e=t[GOOGLE_API_CLIENT_HEADER])!==null&&e!==void 0?e:"";t[GOOGLE_API_CLIENT_HEADER]=(r+` ${MCP_LABEL}`).trimStart()}function isMcpCallableTool(t){return t!==null&&typeof t=="object"&&t instanceof McpCallableTool}function listAllTools(t){return __asyncGenerator(this,arguments,function*(r,xe=100){let Ee,Ae=0;for(;Ae<xe;){const Pe=yield __await(r.listTools({cursor:Ee}));for(const Re of Pe.tools)yield yield __await(Re),Ae++;if(!Pe.nextCursor)break;Ee=Pe.nextCursor}})}class McpCallableTool{constructor(e=[],r){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=r}static create(e,r){return new McpCallableTool(e,r)}async initialize(){var e,r,xe,Ee;if(this.mcpTools.length>0)return;const Ae={},Pe=[];for(const ke of this.mcpClients)try{for(var Re=!0,Ce=(r=void 0,__asyncValues(listAllTools(ke))),Be;Be=await Ce.next(),e=Be.done,!e;Re=!0){Ee=Be.value,Re=!1;const Me=Ee;Pe.push(Me);const Fe=Me.name;if(Ae[Fe])throw new Error(`Duplicate function name ${Fe} found in MCP tools. Please ensure function names are unique.`);Ae[Fe]=ke}}catch(Me){r={error:Me}}finally{try{!Re&&!e&&(xe=Ce.return)&&await xe.call(Ce)}finally{if(r)throw r.error}}this.mcpTools=Pe,this.functionNameToMcpClient=Ae}async tool(){return await this.initialize(),mcpToolsToGeminiTool(this.mcpTools,this.config)}async callTool(e){await this.initialize();const r=[];for(const xe of e)if(xe.name in this.functionNameToMcpClient){const Ee=this.functionNameToMcpClient[xe.name];let Ae;this.config.timeout&&(Ae={timeout:this.config.timeout});const Pe=await Ee.callTool({name:xe.name,arguments:xe.args},void 0,Ae);r.push({functionResponse:{name:xe.name,response:Pe.isError?{error:Pe}:Pe}})}return r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function handleWebSocketMessage$1(t,e,r){const xe=new LiveMusicServerMessage;let Ee;r.data instanceof Blob?Ee=JSON.parse(await r.data.text()):Ee=JSON.parse(r.data),Object.assign(xe,Ee),e(xe)}class LiveMusic{constructor(e,r,xe){this.apiClient=e,this.auth=r,this.webSocketFactory=xe}async connect(e){var r,xe;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const Ee=this.apiClient.getWebsocketBaseUrl(),Ae=this.apiClient.getApiVersion(),Pe=mapToHeaders$1(this.apiClient.getDefaultHeaders()),Re=this.apiClient.getApiKey(),Ce=`${Ee}/ws/google.ai.generativelanguage.${Ae}.GenerativeService.BidiGenerateMusic?key=${Re}`;let Be=()=>{};const ke=new Promise(Qe=>{Be=Qe}),Me=e.callbacks,Fe=function(){Be({})},Ve=this.apiClient,Oe={onopen:Fe,onmessage:Qe=>{handleWebSocketMessage$1(Ve,Me.onmessage,Qe)},onerror:(r=Me==null?void 0:Me.onerror)!==null&&r!==void 0?r:function(Qe){},onclose:(xe=Me==null?void 0:Me.onclose)!==null&&xe!==void 0?xe:function(Qe){}},$e=this.webSocketFactory.create(Ce,headersToMap$1(Pe),Oe);$e.connect(),await ke;const Ye={setup:{model:tModel(this.apiClient,e.model)}};return $e.send(JSON.stringify(Ye)),new LiveMusicSession($e,this.apiClient)}}class LiveMusicSession{constructor(e,r){this.conn=e,this.apiClient=r}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const r=liveMusicSetWeightedPromptsParametersToMldev(e);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const r=liveMusicSetConfigParametersToMldev(e);this.conn.send(JSON.stringify(r))}sendPlaybackControl(e){const r={playbackControl:e};this.conn.send(JSON.stringify(r))}play(){this.sendPlaybackControl(LiveMusicPlaybackControl.PLAY)}pause(){this.sendPlaybackControl(LiveMusicPlaybackControl.PAUSE)}stop(){this.sendPlaybackControl(LiveMusicPlaybackControl.STOP)}resetContext(){this.sendPlaybackControl(LiveMusicPlaybackControl.RESET_CONTEXT)}close(){this.conn.close()}}function headersToMap$1(t){const e={};return t.forEach((r,xe)=>{e[xe]=r}),e}function mapToHeaders$1(t){const e=new Headers;for(const[r,xe]of Object.entries(t))e.append(r,xe);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FUNCTION_RESPONSE_REQUIRES_ID="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function handleWebSocketMessage(t,e,r){const xe=new LiveServerMessage;let Ee;r.data instanceof Blob?Ee=await r.data.text():r.data instanceof ArrayBuffer?Ee=new TextDecoder().decode(r.data):Ee=r.data;const Ae=JSON.parse(Ee);if(t.isVertexAI()){const Pe=liveServerMessageFromVertex(Ae);Object.assign(xe,Pe)}else Object.assign(xe,Ae);e(xe)}class Live{constructor(e,r,xe){this.apiClient=e,this.auth=r,this.webSocketFactory=xe,this.music=new LiveMusic(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var r,xe,Ee,Ae,Pe,Re;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const Ce=this.apiClient.getWebsocketBaseUrl(),Be=this.apiClient.getApiVersion();let ke;const Me=this.apiClient.getHeaders();e.config&&e.config.tools&&hasMcpToolUsage(e.config.tools)&&setMcpUsageHeader(Me);const Fe=mapToHeaders(Me);if(this.apiClient.isVertexAI())ke=`${Ce}/ws/google.cloud.aiplatform.${Be}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(Fe,ke);else{const sn=this.apiClient.getApiKey();let gn="BidiGenerateContent",He="key";sn!=null&&sn.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),Be!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),gn="BidiGenerateContentConstrained",He="access_token"),ke=`${Ce}/ws/google.ai.generativelanguage.${Be}.GenerativeService.${gn}?${He}=${sn}`}let Ve=()=>{};const Oe=new Promise(sn=>{Ve=sn}),$e=e.callbacks,Ge=function(){var sn;(sn=$e==null?void 0:$e.onopen)===null||sn===void 0||sn.call($e),Ve({})},Ue=this.apiClient,Ye={onopen:Ge,onmessage:sn=>{handleWebSocketMessage(Ue,$e.onmessage,sn)},onerror:(r=$e==null?void 0:$e.onerror)!==null&&r!==void 0?r:function(sn){},onclose:(xe=$e==null?void 0:$e.onclose)!==null&&xe!==void 0?xe:function(sn){}},Qe=this.webSocketFactory.create(ke,headersToMap(Fe),Ye);Qe.connect(),await Oe;let rn=tModel(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&rn.startsWith("publishers/")){const sn=this.apiClient.getProject(),gn=this.apiClient.getLocation();rn=`projects/${sn}/locations/${gn}/`+rn}let tn={};this.apiClient.isVertexAI()&&((Ee=e.config)===null||Ee===void 0?void 0:Ee.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Modality.AUDIO]}:e.config.responseModalities=[Modality.AUDIO]),!((Ae=e.config)===null||Ae===void 0)&&Ae.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const an=(Re=(Pe=e.config)===null||Pe===void 0?void 0:Pe.tools)!==null&&Re!==void 0?Re:[],qe=[];for(const sn of an)if(this.isCallableTool(sn)){const gn=sn;qe.push(await gn.tool())}else qe.push(sn);qe.length>0&&(e.config.tools=qe);const Ke={model:rn,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?tn=liveConnectParametersToVertex(this.apiClient,Ke):tn=liveConnectParametersToMldev(this.apiClient,Ke),delete tn.config,Qe.send(JSON.stringify(tn)),new Session(Qe,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const defaultLiveSendClientContentParamerters={turnComplete:!0};class Session{constructor(e,r){this.conn=e,this.apiClient=r}tLiveClientContent(e,r){if(r.turns!==null&&r.turns!==void 0){let xe=[];try{xe=tContents(r.turns),e.isVertexAI()||(xe=xe.map(Ee=>contentToMldev$1(Ee)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof r.turns}'`)}return{clientContent:{turns:xe,turnComplete:r.turnComplete}}}return{clientContent:{turnComplete:r.turnComplete}}}tLiveClienttToolResponse(e,r){let xe=[];if(r.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(r.functionResponses)?xe=r.functionResponses:xe=[r.functionResponses],xe.length===0)throw new Error("functionResponses is required.");for(const Ae of xe){if(typeof Ae!="object"||Ae===null||!("name"in Ae)||!("response"in Ae))throw new Error(`Could not parse function response, type '${typeof Ae}'.`);if(!e.isVertexAI()&&!("id"in Ae))throw new Error(FUNCTION_RESPONSE_REQUIRES_ID)}return{toolResponse:{functionResponses:xe}}}sendClientContent(e){e=Object.assign(Object.assign({},defaultLiveSendClientContentParamerters),e);const r=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(r))}sendRealtimeInput(e){let r={};this.apiClient.isVertexAI()?r={realtimeInput:liveSendRealtimeInputParametersToVertex(e)}:r={realtimeInput:liveSendRealtimeInputParametersToMldev(e)},this.conn.send(JSON.stringify(r))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const r=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(r))}close(){this.conn.close()}}function headersToMap(t){const e={};return t.forEach((r,xe)=>{e[xe]=r}),e}function mapToHeaders(t){const e=new Headers;for(const[r,xe]of Object.entries(t))e.append(r,xe);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DEFAULT_MAX_REMOTE_CALLS=10;function shouldDisableAfc(t){var e,r,xe;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let Ee=!1;for(const Pe of(r=t==null?void 0:t.tools)!==null&&r!==void 0?r:[])if(isCallableTool(Pe)){Ee=!0;break}if(!Ee)return!0;const Ae=(xe=t==null?void 0:t.automaticFunctionCalling)===null||xe===void 0?void 0:xe.maximumRemoteCalls;return Ae&&(Ae<0||!Number.isInteger(Ae))||Ae==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",Ae),!0):!1}function isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}function hasCallableTools(t){var e,r,xe;return(xe=(r=(e=t.config)===null||e===void 0?void 0:e.tools)===null||r===void 0?void 0:r.some(Ee=>isCallableTool(Ee)))!==null&&xe!==void 0?xe:!1}function findAfcIncompatibleToolIndexes(t){var e;const r=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((xe,Ee)=>{if(isCallableTool(xe))return;const Ae=xe;Ae.functionDeclarations&&Ae.functionDeclarations.length>0&&r.push(Ee)}),r}function shouldAppendAfcHistory(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Models extends BaseModule{constructor(e){super(),this.apiClient=e,this.generateContent=async r=>{var xe,Ee,Ae,Pe,Re;const Ce=await this.processParamsMaybeAddMcpUsage(r);if(this.maybeMoveToResponseJsonSchem(r),!hasCallableTools(r)||shouldDisableAfc(r.config))return await this.generateContentInternal(Ce);const Be=findAfcIncompatibleToolIndexes(r);if(Be.length>0){const $e=Be.map(Ge=>`tools[${Ge}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${$e}.`)}let ke,Me;const Fe=tContents(Ce.contents),Ve=(Ae=(Ee=(xe=Ce.config)===null||xe===void 0?void 0:xe.automaticFunctionCalling)===null||Ee===void 0?void 0:Ee.maximumRemoteCalls)!==null&&Ae!==void 0?Ae:DEFAULT_MAX_REMOTE_CALLS;let Oe=0;for(;Oe<Ve&&(ke=await this.generateContentInternal(Ce),!(!ke.functionCalls||ke.functionCalls.length===0));){const $e=ke.candidates[0].content,Ge=[];for(const Ue of(Re=(Pe=r.config)===null||Pe===void 0?void 0:Pe.tools)!==null&&Re!==void 0?Re:[])if(isCallableTool(Ue)){const Qe=await Ue.callTool(ke.functionCalls);Ge.push(...Qe)}Oe++,Me={role:"user",parts:Ge},Ce.contents=tContents(Ce.contents),Ce.contents.push($e),Ce.contents.push(Me),shouldAppendAfcHistory(Ce.config)&&(Fe.push($e),Fe.push(Me))}return shouldAppendAfcHistory(Ce.config)&&(ke.automaticFunctionCallingHistory=Fe),ke},this.generateContentStream=async r=>{var xe,Ee,Ae,Pe,Re;if(this.maybeMoveToResponseJsonSchem(r),shouldDisableAfc(r.config)){const Me=await this.processParamsMaybeAddMcpUsage(r);return await this.generateContentStreamInternal(Me)}const Ce=findAfcIncompatibleToolIndexes(r);if(Ce.length>0){const Me=Ce.map(Fe=>`tools[${Fe}]`).join(", ");throw new Error(`Incompatible tools found at ${Me}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const Be=(Ae=(Ee=(xe=r==null?void 0:r.config)===null||xe===void 0?void 0:xe.toolConfig)===null||Ee===void 0?void 0:Ee.functionCallingConfig)===null||Ae===void 0?void 0:Ae.streamFunctionCallArguments,ke=(Re=(Pe=r==null?void 0:r.config)===null||Pe===void 0?void 0:Pe.automaticFunctionCalling)===null||Re===void 0?void 0:Re.disable;if(Be&&!ke)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(r)},this.generateImages=async r=>await this.generateImagesInternal(r).then(xe=>{var Ee;let Ae;const Pe=[];if(xe!=null&&xe.generatedImages)for(const Ce of xe.generatedImages)Ce&&(Ce!=null&&Ce.safetyAttributes)&&((Ee=Ce==null?void 0:Ce.safetyAttributes)===null||Ee===void 0?void 0:Ee.contentType)==="Positive Prompt"?Ae=Ce==null?void 0:Ce.safetyAttributes:Pe.push(Ce);let Re;return Ae?Re={generatedImages:Pe,positivePromptSafetyAttributes:Ae,sdkHttpResponse:xe.sdkHttpResponse}:Re={generatedImages:Pe,sdkHttpResponse:xe.sdkHttpResponse},Re}),this.list=async r=>{var xe;const Pe={config:Object.assign(Object.assign({},{queryBase:!0}),r==null?void 0:r.config)};if(this.apiClient.isVertexAI()&&!Pe.config.queryBase){if(!((xe=Pe.config)===null||xe===void 0)&&xe.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");Pe.config.filter="labels.tune-type:*"}return new Pager(PagedItem.PAGED_ITEM_MODELS,Re=>this.listInternal(Re),await this.listInternal(Pe),Pe)},this.editImage=async r=>{const xe={model:r.model,prompt:r.prompt,referenceImages:[],config:r.config};return r.referenceImages&&r.referenceImages&&(xe.referenceImages=r.referenceImages.map(Ee=>Ee.toReferenceImageAPI())),await this.editImageInternal(xe)},this.upscaleImage=async r=>{let xe={numberOfImages:1,mode:"upscale"};r.config&&(xe=Object.assign(Object.assign({},xe),r.config));const Ee={model:r.model,image:r.image,upscaleFactor:r.upscaleFactor,config:xe};return await this.upscaleImageInternal(Ee)},this.generateVideos=async r=>{var xe,Ee,Ae,Pe,Re,Ce;if((r.prompt||r.image||r.video)&&r.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((xe=r.video)===null||xe===void 0)&&xe.uri&&(!((Ee=r.video)===null||Ee===void 0)&&Ee.videoBytes)?r.video={uri:r.video.uri,mimeType:r.video.mimeType}:!((Pe=(Ae=r.source)===null||Ae===void 0?void 0:Ae.video)===null||Pe===void 0)&&Pe.uri&&(!((Ce=(Re=r.source)===null||Re===void 0?void 0:Re.video)===null||Ce===void 0)&&Ce.videoBytes)&&(r.source.video={uri:r.source.video.uri,mimeType:r.source.video.mimeType})),await this.generateVideosInternal(r)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var r,xe,Ee;const Ae=(r=e.config)===null||r===void 0?void 0:r.tools;if(!Ae)return e;const Pe=await Promise.all(Ae.map(async Ce=>isCallableTool(Ce)?await Ce.tool():Ce)),Re={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:Pe})};if(Re.config.tools=Pe,e.config&&e.config.tools&&hasMcpToolUsage(e.config.tools)){const Ce=(Ee=(xe=e.config.httpOptions)===null||xe===void 0?void 0:xe.headers)!==null&&Ee!==void 0?Ee:{};let Be=Object.assign({},Ce);Object.keys(Be).length===0&&(Be=this.apiClient.getDefaultHeaders()),setMcpUsageHeader(Be),Re.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:Be})}return Re}async initAfcToolsMap(e){var r,xe,Ee;const Ae=new Map;for(const Pe of(xe=(r=e.config)===null||r===void 0?void 0:r.tools)!==null&&xe!==void 0?xe:[])if(isCallableTool(Pe)){const Re=Pe,Ce=await Re.tool();for(const Be of(Ee=Ce.functionDeclarations)!==null&&Ee!==void 0?Ee:[]){if(!Be.name)throw new Error("Function declaration name is required.");if(Ae.has(Be.name))throw new Error(`Duplicate tool declaration name: ${Be.name}`);Ae.set(Be.name,Re)}}return Ae}async processAfcStream(e){var r,xe,Ee;const Ae=(Ee=(xe=(r=e.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||xe===void 0?void 0:xe.maximumRemoteCalls)!==null&&Ee!==void 0?Ee:DEFAULT_MAX_REMOTE_CALLS;let Pe=!1,Re=0;const Ce=await this.initAfcToolsMap(e);return(function(Be,ke,Me){return __asyncGenerator(this,arguments,function*(){for(var Fe,Ve,Oe,$e,Ge,Ue;Re<Ae;){Pe&&(Re++,Pe=!1);const tn=yield __await(Be.processParamsMaybeAddMcpUsage(Me)),an=yield __await(Be.generateContentStreamInternal(tn)),qe=[],Ke=[];try{for(var Ye=!0,Qe=(Ve=void 0,__asyncValues(an)),rn;rn=yield __await(Qe.next()),Fe=rn.done,!Fe;Ye=!0){$e=rn.value,Ye=!1;const sn=$e;if(yield yield __await(sn),sn.candidates&&(!((Ge=sn.candidates[0])===null||Ge===void 0)&&Ge.content)){Ke.push(sn.candidates[0].content);for(const gn of(Ue=sn.candidates[0].content.parts)!==null&&Ue!==void 0?Ue:[])if(Re<Ae&&gn.functionCall){if(!gn.functionCall.name)throw new Error("Function call name was not returned by the model.");if(ke.has(gn.functionCall.name)){const He=yield __await(ke.get(gn.functionCall.name).callTool([gn.functionCall]));qe.push(...He)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${ke.keys()}, mising tool: ${gn.functionCall.name}`)}}}}catch(sn){Ve={error:sn}}finally{try{!Ye&&!Fe&&(Oe=Qe.return)&&(yield __await(Oe.call(Qe)))}finally{if(Ve)throw Ve.error}}if(qe.length>0){Pe=!0;const sn=new GenerateContentResponse;sn.candidates=[{content:{role:"user",parts:qe}}],yield yield __await(sn);const gn=[];gn.push(...Ke),gn.push({role:"user",parts:qe});const He=tContents(Me.contents).concat(gn);Me.contents=He}else break}})})(this,Ce,e)}async generateContentInternal(e){var r,xe,Ee,Ae;let Pe,Re="",Ce={};if(this.apiClient.isVertexAI()){const Be=generateContentParametersToVertex(this.apiClient,e);return Re=formatMap("{model}:generateContent",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(ke=>ke.json().then(Me=>{const Fe=Me;return Fe.sdkHttpResponse={headers:ke.headers},Fe})),Pe.then(ke=>{const Me=generateContentResponseFromVertex(ke),Fe=new GenerateContentResponse;return Object.assign(Fe,Me),Fe})}else{const Be=generateContentParametersToMldev(this.apiClient,e);return Re=formatMap("{model}:generateContent",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"POST",httpOptions:(Ee=e.config)===null||Ee===void 0?void 0:Ee.httpOptions,abortSignal:(Ae=e.config)===null||Ae===void 0?void 0:Ae.abortSignal}).then(ke=>ke.json().then(Me=>{const Fe=Me;return Fe.sdkHttpResponse={headers:ke.headers},Fe})),Pe.then(ke=>{const Me=generateContentResponseFromMldev(ke),Fe=new GenerateContentResponse;return Object.assign(Fe,Me),Fe})}}async generateContentStreamInternal(e){var r,xe,Ee,Ae;let Pe,Re="",Ce={};if(this.apiClient.isVertexAI()){const Be=generateContentParametersToVertex(this.apiClient,e);return Re=formatMap("{model}:streamGenerateContent?alt=sse",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.requestStream({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}),Pe.then(function(Me){return __asyncGenerator(this,arguments,function*(){var Fe,Ve,Oe,$e;try{for(var Ge=!0,Ue=__asyncValues(Me),Ye;Ye=yield __await(Ue.next()),Fe=Ye.done,!Fe;Ge=!0){$e=Ye.value,Ge=!1;const Qe=$e,rn=generateContentResponseFromVertex(yield __await(Qe.json()));rn.sdkHttpResponse={headers:Qe.headers};const tn=new GenerateContentResponse;Object.assign(tn,rn),yield yield __await(tn)}}catch(Qe){Ve={error:Qe}}finally{try{!Ge&&!Fe&&(Oe=Ue.return)&&(yield __await(Oe.call(Ue)))}finally{if(Ve)throw Ve.error}}})})}else{const Be=generateContentParametersToMldev(this.apiClient,e);return Re=formatMap("{model}:streamGenerateContent?alt=sse",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.requestStream({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"POST",httpOptions:(Ee=e.config)===null||Ee===void 0?void 0:Ee.httpOptions,abortSignal:(Ae=e.config)===null||Ae===void 0?void 0:Ae.abortSignal}),Pe.then(function(Me){return __asyncGenerator(this,arguments,function*(){var Fe,Ve,Oe,$e;try{for(var Ge=!0,Ue=__asyncValues(Me),Ye;Ye=yield __await(Ue.next()),Fe=Ye.done,!Fe;Ge=!0){$e=Ye.value,Ge=!1;const Qe=$e,rn=generateContentResponseFromMldev(yield __await(Qe.json()));rn.sdkHttpResponse={headers:Qe.headers};const tn=new GenerateContentResponse;Object.assign(tn,rn),yield yield __await(tn)}}catch(Qe){Ve={error:Qe}}finally{try{!Ge&&!Fe&&(Oe=Ue.return)&&(yield __await(Oe.call(Ue)))}finally{if(Ve)throw Ve.error}}})})}}async embedContent(e){var r,xe,Ee,Ae;let Pe,Re="",Ce={};if(this.apiClient.isVertexAI()){const Be=embedContentParametersToVertex(this.apiClient,e);return Re=formatMap("{model}:predict",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(ke=>ke.json().then(Me=>{const Fe=Me;return Fe.sdkHttpResponse={headers:ke.headers},Fe})),Pe.then(ke=>{const Me=embedContentResponseFromVertex(ke),Fe=new EmbedContentResponse;return Object.assign(Fe,Me),Fe})}else{const Be=embedContentParametersToMldev(this.apiClient,e);return Re=formatMap("{model}:batchEmbedContents",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"POST",httpOptions:(Ee=e.config)===null||Ee===void 0?void 0:Ee.httpOptions,abortSignal:(Ae=e.config)===null||Ae===void 0?void 0:Ae.abortSignal}).then(ke=>ke.json().then(Me=>{const Fe=Me;return Fe.sdkHttpResponse={headers:ke.headers},Fe})),Pe.then(ke=>{const Me=embedContentResponseFromMldev(ke),Fe=new EmbedContentResponse;return Object.assign(Fe,Me),Fe})}}async generateImagesInternal(e){var r,xe,Ee,Ae;let Pe,Re="",Ce={};if(this.apiClient.isVertexAI()){const Be=generateImagesParametersToVertex(this.apiClient,e);return Re=formatMap("{model}:predict",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(ke=>ke.json().then(Me=>{const Fe=Me;return Fe.sdkHttpResponse={headers:ke.headers},Fe})),Pe.then(ke=>{const Me=generateImagesResponseFromVertex(ke),Fe=new GenerateImagesResponse;return Object.assign(Fe,Me),Fe})}else{const Be=generateImagesParametersToMldev(this.apiClient,e);return Re=formatMap("{model}:predict",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"POST",httpOptions:(Ee=e.config)===null||Ee===void 0?void 0:Ee.httpOptions,abortSignal:(Ae=e.config)===null||Ae===void 0?void 0:Ae.abortSignal}).then(ke=>ke.json().then(Me=>{const Fe=Me;return Fe.sdkHttpResponse={headers:ke.headers},Fe})),Pe.then(ke=>{const Me=generateImagesResponseFromMldev(ke),Fe=new GenerateImagesResponse;return Object.assign(Fe,Me),Fe})}}async editImageInternal(e){var r,xe;let Ee,Ae="",Pe={};if(this.apiClient.isVertexAI()){const Re=editImageParametersInternalToVertex(this.apiClient,e);return Ae=formatMap("{model}:predict",Re._url),Pe=Re._query,delete Re._url,delete Re._query,Ee=this.apiClient.request({path:Ae,queryParams:Pe,body:JSON.stringify(Re),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Ce=>Ce.json().then(Be=>{const ke=Be;return ke.sdkHttpResponse={headers:Ce.headers},ke})),Ee.then(Ce=>{const Be=editImageResponseFromVertex(Ce),ke=new EditImageResponse;return Object.assign(ke,Be),ke})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var r,xe;let Ee,Ae="",Pe={};if(this.apiClient.isVertexAI()){const Re=upscaleImageAPIParametersInternalToVertex(this.apiClient,e);return Ae=formatMap("{model}:predict",Re._url),Pe=Re._query,delete Re._url,delete Re._query,Ee=this.apiClient.request({path:Ae,queryParams:Pe,body:JSON.stringify(Re),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Ce=>Ce.json().then(Be=>{const ke=Be;return ke.sdkHttpResponse={headers:Ce.headers},ke})),Ee.then(Ce=>{const Be=upscaleImageResponseFromVertex(Ce),ke=new UpscaleImageResponse;return Object.assign(ke,Be),ke})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var r,xe;let Ee,Ae="",Pe={};if(this.apiClient.isVertexAI()){const Re=recontextImageParametersToVertex(this.apiClient,e);return Ae=formatMap("{model}:predict",Re._url),Pe=Re._query,delete Re._url,delete Re._query,Ee=this.apiClient.request({path:Ae,queryParams:Pe,body:JSON.stringify(Re),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Ce=>Ce.json()),Ee.then(Ce=>{const Be=recontextImageResponseFromVertex(Ce),ke=new RecontextImageResponse;return Object.assign(ke,Be),ke})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var r,xe;let Ee,Ae="",Pe={};if(this.apiClient.isVertexAI()){const Re=segmentImageParametersToVertex(this.apiClient,e);return Ae=formatMap("{model}:predict",Re._url),Pe=Re._query,delete Re._url,delete Re._query,Ee=this.apiClient.request({path:Ae,queryParams:Pe,body:JSON.stringify(Re),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Ce=>Ce.json()),Ee.then(Ce=>{const Be=segmentImageResponseFromVertex(Ce),ke=new SegmentImageResponse;return Object.assign(ke,Be),ke})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var r,xe,Ee,Ae;let Pe,Re="",Ce={};if(this.apiClient.isVertexAI()){const Be=getModelParametersToVertex(this.apiClient,e);return Re=formatMap("{name}",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(ke=>ke.json()),Pe.then(ke=>modelFromVertex(ke))}else{const Be=getModelParametersToMldev(this.apiClient,e);return Re=formatMap("{name}",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"GET",httpOptions:(Ee=e.config)===null||Ee===void 0?void 0:Ee.httpOptions,abortSignal:(Ae=e.config)===null||Ae===void 0?void 0:Ae.abortSignal}).then(ke=>ke.json()),Pe.then(ke=>modelFromMldev(ke))}}async listInternal(e){var r,xe,Ee,Ae;let Pe,Re="",Ce={};if(this.apiClient.isVertexAI()){const Be=listModelsParametersToVertex(this.apiClient,e);return Re=formatMap("{models_url}",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(ke=>ke.json().then(Me=>{const Fe=Me;return Fe.sdkHttpResponse={headers:ke.headers},Fe})),Pe.then(ke=>{const Me=listModelsResponseFromVertex(ke),Fe=new ListModelsResponse;return Object.assign(Fe,Me),Fe})}else{const Be=listModelsParametersToMldev(this.apiClient,e);return Re=formatMap("{models_url}",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"GET",httpOptions:(Ee=e.config)===null||Ee===void 0?void 0:Ee.httpOptions,abortSignal:(Ae=e.config)===null||Ae===void 0?void 0:Ae.abortSignal}).then(ke=>ke.json().then(Me=>{const Fe=Me;return Fe.sdkHttpResponse={headers:ke.headers},Fe})),Pe.then(ke=>{const Me=listModelsResponseFromMldev(ke),Fe=new ListModelsResponse;return Object.assign(Fe,Me),Fe})}}async update(e){var r,xe,Ee,Ae;let Pe,Re="",Ce={};if(this.apiClient.isVertexAI()){const Be=updateModelParametersToVertex(this.apiClient,e);return Re=formatMap("{model}",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(ke=>ke.json()),Pe.then(ke=>modelFromVertex(ke))}else{const Be=updateModelParametersToMldev(this.apiClient,e);return Re=formatMap("{name}",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"PATCH",httpOptions:(Ee=e.config)===null||Ee===void 0?void 0:Ee.httpOptions,abortSignal:(Ae=e.config)===null||Ae===void 0?void 0:Ae.abortSignal}).then(ke=>ke.json()),Pe.then(ke=>modelFromMldev(ke))}}async delete(e){var r,xe,Ee,Ae;let Pe,Re="",Ce={};if(this.apiClient.isVertexAI()){const Be=deleteModelParametersToVertex(this.apiClient,e);return Re=formatMap("{name}",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(ke=>ke.json().then(Me=>{const Fe=Me;return Fe.sdkHttpResponse={headers:ke.headers},Fe})),Pe.then(ke=>{const Me=deleteModelResponseFromVertex(ke),Fe=new DeleteModelResponse;return Object.assign(Fe,Me),Fe})}else{const Be=deleteModelParametersToMldev(this.apiClient,e);return Re=formatMap("{name}",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"DELETE",httpOptions:(Ee=e.config)===null||Ee===void 0?void 0:Ee.httpOptions,abortSignal:(Ae=e.config)===null||Ae===void 0?void 0:Ae.abortSignal}).then(ke=>ke.json().then(Me=>{const Fe=Me;return Fe.sdkHttpResponse={headers:ke.headers},Fe})),Pe.then(ke=>{const Me=deleteModelResponseFromMldev(ke),Fe=new DeleteModelResponse;return Object.assign(Fe,Me),Fe})}}async countTokens(e){var r,xe,Ee,Ae;let Pe,Re="",Ce={};if(this.apiClient.isVertexAI()){const Be=countTokensParametersToVertex(this.apiClient,e);return Re=formatMap("{model}:countTokens",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(ke=>ke.json().then(Me=>{const Fe=Me;return Fe.sdkHttpResponse={headers:ke.headers},Fe})),Pe.then(ke=>{const Me=countTokensResponseFromVertex(ke),Fe=new CountTokensResponse;return Object.assign(Fe,Me),Fe})}else{const Be=countTokensParametersToMldev(this.apiClient,e);return Re=formatMap("{model}:countTokens",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"POST",httpOptions:(Ee=e.config)===null||Ee===void 0?void 0:Ee.httpOptions,abortSignal:(Ae=e.config)===null||Ae===void 0?void 0:Ae.abortSignal}).then(ke=>ke.json().then(Me=>{const Fe=Me;return Fe.sdkHttpResponse={headers:ke.headers},Fe})),Pe.then(ke=>{const Me=countTokensResponseFromMldev(ke),Fe=new CountTokensResponse;return Object.assign(Fe,Me),Fe})}}async computeTokens(e){var r,xe;let Ee,Ae="",Pe={};if(this.apiClient.isVertexAI()){const Re=computeTokensParametersToVertex(this.apiClient,e);return Ae=formatMap("{model}:computeTokens",Re._url),Pe=Re._query,delete Re._url,delete Re._query,Ee=this.apiClient.request({path:Ae,queryParams:Pe,body:JSON.stringify(Re),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Ce=>Ce.json().then(Be=>{const ke=Be;return ke.sdkHttpResponse={headers:Ce.headers},ke})),Ee.then(Ce=>{const Be=computeTokensResponseFromVertex(Ce),ke=new ComputeTokensResponse;return Object.assign(ke,Be),ke})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var r,xe,Ee,Ae;let Pe,Re="",Ce={};if(this.apiClient.isVertexAI()){const Be=generateVideosParametersToVertex(this.apiClient,e);return Re=formatMap("{model}:predictLongRunning",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(ke=>ke.json()),Pe.then(ke=>{const Me=generateVideosOperationFromVertex(ke),Fe=new GenerateVideosOperation;return Object.assign(Fe,Me),Fe})}else{const Be=generateVideosParametersToMldev(this.apiClient,e);return Re=formatMap("{model}:predictLongRunning",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"POST",httpOptions:(Ee=e.config)===null||Ee===void 0?void 0:Ee.httpOptions,abortSignal:(Ae=e.config)===null||Ae===void 0?void 0:Ae.abortSignal}).then(ke=>ke.json()),Pe.then(ke=>{const Me=generateVideosOperationFromMldev(ke),Fe=new GenerateVideosOperation;return Object.assign(Fe,Me),Fe})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Operations extends BaseModule{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const r=e.operation,xe=e.config;if(r.name===void 0||r.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const Ee=r.name.split("/operations/")[0];let Ae;xe&&"httpOptions"in xe&&(Ae=xe.httpOptions);const Pe=await this.fetchPredictVideosOperationInternal({operationName:r.name,resourceName:Ee,config:{httpOptions:Ae}});return r._fromAPIResponse({apiResponse:Pe,_isVertexAI:!0})}else{const Ee=await this.getVideosOperationInternal({operationName:r.name,config:xe});return r._fromAPIResponse({apiResponse:Ee,_isVertexAI:!1})}}async get(e){const r=e.operation,xe=e.config;if(r.name===void 0||r.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const Ee=r.name.split("/operations/")[0];let Ae;xe&&"httpOptions"in xe&&(Ae=xe.httpOptions);const Pe=await this.fetchPredictVideosOperationInternal({operationName:r.name,resourceName:Ee,config:{httpOptions:Ae}});return r._fromAPIResponse({apiResponse:Pe,_isVertexAI:!0})}else{const Ee=await this.getVideosOperationInternal({operationName:r.name,config:xe});return r._fromAPIResponse({apiResponse:Ee,_isVertexAI:!1})}}async getVideosOperationInternal(e){var r,xe,Ee,Ae;let Pe,Re="",Ce={};if(this.apiClient.isVertexAI()){const Be=getOperationParametersToVertex(e);return Re=formatMap("{operationName}",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(ke=>ke.json()),Pe}else{const Be=getOperationParametersToMldev(e);return Re=formatMap("{operationName}",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"GET",httpOptions:(Ee=e.config)===null||Ee===void 0?void 0:Ee.httpOptions,abortSignal:(Ae=e.config)===null||Ae===void 0?void 0:Ae.abortSignal}).then(ke=>ke.json()),Pe}}async fetchPredictVideosOperationInternal(e){var r,xe;let Ee,Ae="",Pe={};if(this.apiClient.isVertexAI()){const Re=fetchPredictOperationParametersToVertex(e);return Ae=formatMap("{resourceName}:fetchPredictOperation",Re._url),Pe=Re._query,delete Re._url,delete Re._query,Ee=this.apiClient.request({path:Ae,queryParams:Pe,body:JSON.stringify(Re),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Ce=>Ce.json()),Ee}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function blobToMldev(t){const e={},r=getValueByPath(t,["data"]);if(r!=null&&setValueByPath(e,["data"],r),getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const xe=getValueByPath(t,["mimeType"]);return xe!=null&&setValueByPath(e,["mimeType"],xe),e}function contentToMldev(t){const e={},r=getValueByPath(t,["parts"]);if(r!=null){let Ee=r;Array.isArray(Ee)&&(Ee=Ee.map(Ae=>partToMldev(Ae))),setValueByPath(e,["parts"],Ee)}const xe=getValueByPath(t,["role"]);return xe!=null&&setValueByPath(e,["role"],xe),e}function createAuthTokenConfigToMldev(t,e,r){const xe={},Ee=getValueByPath(e,["expireTime"]);r!==void 0&&Ee!=null&&setValueByPath(r,["expireTime"],Ee);const Ae=getValueByPath(e,["newSessionExpireTime"]);r!==void 0&&Ae!=null&&setValueByPath(r,["newSessionExpireTime"],Ae);const Pe=getValueByPath(e,["uses"]);r!==void 0&&Pe!=null&&setValueByPath(r,["uses"],Pe);const Re=getValueByPath(e,["liveConnectConstraints"]);r!==void 0&&Re!=null&&setValueByPath(r,["bidiGenerateContentSetup"],liveConnectConstraintsToMldev(t,Re));const Ce=getValueByPath(e,["lockAdditionalFields"]);return r!==void 0&&Ce!=null&&setValueByPath(r,["fieldMask"],Ce),xe}function createAuthTokenParametersToMldev(t,e){const r={},xe=getValueByPath(e,["config"]);return xe!=null&&setValueByPath(r,["config"],createAuthTokenConfigToMldev(t,xe,r)),r}function fileDataToMldev(t){const e={};if(getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=getValueByPath(t,["fileUri"]);r!=null&&setValueByPath(e,["fileUri"],r);const xe=getValueByPath(t,["mimeType"]);return xe!=null&&setValueByPath(e,["mimeType"],xe),e}function functionCallToMldev(t){const e={},r=getValueByPath(t,["id"]);r!=null&&setValueByPath(e,["id"],r);const xe=getValueByPath(t,["args"]);xe!=null&&setValueByPath(e,["args"],xe);const Ee=getValueByPath(t,["name"]);if(Ee!=null&&setValueByPath(e,["name"],Ee),getValueByPath(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(getValueByPath(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function googleMapsToMldev(t){const e={};if(getValueByPath(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=getValueByPath(t,["enableWidget"]);return r!=null&&setValueByPath(e,["enableWidget"],r),e}function googleSearchToMldev(t){const e={};if(getValueByPath(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(getValueByPath(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=getValueByPath(t,["timeRangeFilter"]);return r!=null&&setValueByPath(e,["timeRangeFilter"],r),e}function liveConnectConfigToMldev(t,e){const r={},xe=getValueByPath(t,["generationConfig"]);e!==void 0&&xe!=null&&setValueByPath(e,["setup","generationConfig"],xe);const Ee=getValueByPath(t,["responseModalities"]);e!==void 0&&Ee!=null&&setValueByPath(e,["setup","generationConfig","responseModalities"],Ee);const Ae=getValueByPath(t,["temperature"]);e!==void 0&&Ae!=null&&setValueByPath(e,["setup","generationConfig","temperature"],Ae);const Pe=getValueByPath(t,["topP"]);e!==void 0&&Pe!=null&&setValueByPath(e,["setup","generationConfig","topP"],Pe);const Re=getValueByPath(t,["topK"]);e!==void 0&&Re!=null&&setValueByPath(e,["setup","generationConfig","topK"],Re);const Ce=getValueByPath(t,["maxOutputTokens"]);e!==void 0&&Ce!=null&&setValueByPath(e,["setup","generationConfig","maxOutputTokens"],Ce);const Be=getValueByPath(t,["mediaResolution"]);e!==void 0&&Be!=null&&setValueByPath(e,["setup","generationConfig","mediaResolution"],Be);const ke=getValueByPath(t,["seed"]);e!==void 0&&ke!=null&&setValueByPath(e,["setup","generationConfig","seed"],ke);const Me=getValueByPath(t,["speechConfig"]);e!==void 0&&Me!=null&&setValueByPath(e,["setup","generationConfig","speechConfig"],tLiveSpeechConfig(Me));const Fe=getValueByPath(t,["thinkingConfig"]);e!==void 0&&Fe!=null&&setValueByPath(e,["setup","generationConfig","thinkingConfig"],Fe);const Ve=getValueByPath(t,["enableAffectiveDialog"]);e!==void 0&&Ve!=null&&setValueByPath(e,["setup","generationConfig","enableAffectiveDialog"],Ve);const Oe=getValueByPath(t,["systemInstruction"]);e!==void 0&&Oe!=null&&setValueByPath(e,["setup","systemInstruction"],contentToMldev(tContent(Oe)));const $e=getValueByPath(t,["tools"]);if(e!==void 0&&$e!=null){let an=tTools($e);Array.isArray(an)&&(an=an.map(qe=>toolToMldev(tTool(qe)))),setValueByPath(e,["setup","tools"],an)}const Ge=getValueByPath(t,["sessionResumption"]);e!==void 0&&Ge!=null&&setValueByPath(e,["setup","sessionResumption"],sessionResumptionConfigToMldev(Ge));const Ue=getValueByPath(t,["inputAudioTranscription"]);e!==void 0&&Ue!=null&&setValueByPath(e,["setup","inputAudioTranscription"],Ue);const Ye=getValueByPath(t,["outputAudioTranscription"]);e!==void 0&&Ye!=null&&setValueByPath(e,["setup","outputAudioTranscription"],Ye);const Qe=getValueByPath(t,["realtimeInputConfig"]);e!==void 0&&Qe!=null&&setValueByPath(e,["setup","realtimeInputConfig"],Qe);const rn=getValueByPath(t,["contextWindowCompression"]);e!==void 0&&rn!=null&&setValueByPath(e,["setup","contextWindowCompression"],rn);const tn=getValueByPath(t,["proactivity"]);if(e!==void 0&&tn!=null&&setValueByPath(e,["setup","proactivity"],tn),getValueByPath(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return r}function liveConnectConstraintsToMldev(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["setup","model"],tModel(t,xe));const Ee=getValueByPath(e,["config"]);return Ee!=null&&setValueByPath(r,["config"],liveConnectConfigToMldev(Ee,r)),r}function partToMldev(t){const e={},r=getValueByPath(t,["mediaResolution"]);r!=null&&setValueByPath(e,["mediaResolution"],r);const xe=getValueByPath(t,["codeExecutionResult"]);xe!=null&&setValueByPath(e,["codeExecutionResult"],xe);const Ee=getValueByPath(t,["executableCode"]);Ee!=null&&setValueByPath(e,["executableCode"],Ee);const Ae=getValueByPath(t,["fileData"]);Ae!=null&&setValueByPath(e,["fileData"],fileDataToMldev(Ae));const Pe=getValueByPath(t,["functionCall"]);Pe!=null&&setValueByPath(e,["functionCall"],functionCallToMldev(Pe));const Re=getValueByPath(t,["functionResponse"]);Re!=null&&setValueByPath(e,["functionResponse"],Re);const Ce=getValueByPath(t,["inlineData"]);Ce!=null&&setValueByPath(e,["inlineData"],blobToMldev(Ce));const Be=getValueByPath(t,["text"]);Be!=null&&setValueByPath(e,["text"],Be);const ke=getValueByPath(t,["thought"]);ke!=null&&setValueByPath(e,["thought"],ke);const Me=getValueByPath(t,["thoughtSignature"]);Me!=null&&setValueByPath(e,["thoughtSignature"],Me);const Fe=getValueByPath(t,["videoMetadata"]);return Fe!=null&&setValueByPath(e,["videoMetadata"],Fe),e}function sessionResumptionConfigToMldev(t){const e={},r=getValueByPath(t,["handle"]);if(r!=null&&setValueByPath(e,["handle"],r),getValueByPath(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function toolToMldev(t){const e={},r=getValueByPath(t,["functionDeclarations"]);if(r!=null){let ke=r;Array.isArray(ke)&&(ke=ke.map(Me=>Me)),setValueByPath(e,["functionDeclarations"],ke)}if(getValueByPath(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const xe=getValueByPath(t,["googleSearchRetrieval"]);xe!=null&&setValueByPath(e,["googleSearchRetrieval"],xe);const Ee=getValueByPath(t,["computerUse"]);Ee!=null&&setValueByPath(e,["computerUse"],Ee);const Ae=getValueByPath(t,["fileSearch"]);Ae!=null&&setValueByPath(e,["fileSearch"],Ae);const Pe=getValueByPath(t,["codeExecution"]);if(Pe!=null&&setValueByPath(e,["codeExecution"],Pe),getValueByPath(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const Re=getValueByPath(t,["googleMaps"]);Re!=null&&setValueByPath(e,["googleMaps"],googleMapsToMldev(Re));const Ce=getValueByPath(t,["googleSearch"]);Ce!=null&&setValueByPath(e,["googleSearch"],googleSearchToMldev(Ce));const Be=getValueByPath(t,["urlContext"]);return Be!=null&&setValueByPath(e,["urlContext"],Be),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function getFieldMasks(t){const e=[];for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const xe=t[r];if(typeof xe=="object"&&xe!=null&&Object.keys(xe).length>0){const Ee=Object.keys(xe).map(Ae=>`${r}.${Ae}`);e.push(...Ee)}else e.push(r)}return e.join(",")}function convertBidiSetupToTokenSetup(t,e){let r=null;const xe=t.bidiGenerateContentSetup;if(typeof xe=="object"&&xe!==null&&"setup"in xe){const Ae=xe.setup;typeof Ae=="object"&&Ae!==null?(t.bidiGenerateContentSetup=Ae,r=Ae):delete t.bidiGenerateContentSetup}else xe!==void 0&&delete t.bidiGenerateContentSetup;const Ee=t.fieldMask;if(r){const Ae=getFieldMasks(r);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)Ae?t.fieldMask=Ae:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&Ee!==null&&Array.isArray(Ee)&&Ee.length>0){const Pe=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let Re=[];Ee.length>0&&(Re=Ee.map(Be=>Pe.includes(Be)?`generationConfig.${Be}`:Be));const Ce=[];Ae&&Ce.push(Ae),Re.length>0&&Ce.push(...Re),Ce.length>0?t.fieldMask=Ce.join(","):delete t.fieldMask}else delete t.fieldMask}else Ee!==null&&Array.isArray(Ee)&&Ee.length>0?t.fieldMask=Ee.join(","):delete t.fieldMask;return t}class Tokens extends BaseModule{constructor(e){super(),this.apiClient=e}async create(e){var r,xe;let Ee,Ae="",Pe={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const Re=createAuthTokenParametersToMldev(this.apiClient,e);Ae=formatMap("auth_tokens",Re._url),Pe=Re._query,delete Re.config,delete Re._url,delete Re._query;const Ce=convertBidiSetupToTokenSetup(Re,e.config);return Ee=this.apiClient.request({path:Ae,queryParams:Pe,body:JSON.stringify(Ce),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Be=>Be.json()),Ee.then(Be=>Be)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function deleteDocumentConfigToMldev(t,e){const r={},xe=getValueByPath(t,["force"]);return e!==void 0&&xe!=null&&setValueByPath(e,["_query","force"],xe),r}function deleteDocumentParametersToMldev(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["_url","name"],r);const xe=getValueByPath(t,["config"]);return xe!=null&&deleteDocumentConfigToMldev(xe,e),e}function getDocumentParametersToMldev(t){const e={},r=getValueByPath(t,["name"]);return r!=null&&setValueByPath(e,["_url","name"],r),e}function listDocumentsConfigToMldev(t,e){const r={},xe=getValueByPath(t,["pageSize"]);e!==void 0&&xe!=null&&setValueByPath(e,["_query","pageSize"],xe);const Ee=getValueByPath(t,["pageToken"]);return e!==void 0&&Ee!=null&&setValueByPath(e,["_query","pageToken"],Ee),r}function listDocumentsParametersToMldev(t){const e={},r=getValueByPath(t,["parent"]);r!=null&&setValueByPath(e,["_url","parent"],r);const xe=getValueByPath(t,["config"]);return xe!=null&&listDocumentsConfigToMldev(xe,e),e}function listDocumentsResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["nextPageToken"]);xe!=null&&setValueByPath(e,["nextPageToken"],xe);const Ee=getValueByPath(t,["documents"]);if(Ee!=null){let Ae=Ee;Array.isArray(Ae)&&(Ae=Ae.map(Pe=>Pe)),setValueByPath(e,["documents"],Ae)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Documents extends BaseModule{constructor(e){super(),this.apiClient=e,this.list=async r=>new Pager(PagedItem.PAGED_ITEM_DOCUMENTS,xe=>this.listInternal({parent:r.parent,config:xe.config}),await this.listInternal(r),r)}async get(e){var r,xe;let Ee,Ae="",Pe={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const Re=getDocumentParametersToMldev(e);return Ae=formatMap("{name}",Re._url),Pe=Re._query,delete Re._url,delete Re._query,Ee=this.apiClient.request({path:Ae,queryParams:Pe,body:JSON.stringify(Re),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Ce=>Ce.json()),Ee.then(Ce=>Ce)}}async delete(e){var r,xe;let Ee="",Ae={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const Pe=deleteDocumentParametersToMldev(e);Ee=formatMap("{name}",Pe._url),Ae=Pe._query,delete Pe._url,delete Pe._query,await this.apiClient.request({path:Ee,queryParams:Ae,body:JSON.stringify(Pe),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal})}}async listInternal(e){var r,xe;let Ee,Ae="",Pe={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const Re=listDocumentsParametersToMldev(e);return Ae=formatMap("{parent}/documents",Re._url),Pe=Re._query,delete Re._url,delete Re._query,Ee=this.apiClient.request({path:Ae,queryParams:Pe,body:JSON.stringify(Re),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Ce=>Ce.json()),Ee.then(Ce=>{const Be=listDocumentsResponseFromMldev(Ce),ke=new ListDocumentsResponse;return Object.assign(ke,Be),ke})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FileSearchStores extends BaseModule{constructor(e,r=new Documents(e)){super(),this.apiClient=e,this.documents=r,this.list=async(xe={})=>new Pager(PagedItem.PAGED_ITEM_FILE_SEARCH_STORES,Ee=>this.listInternal(Ee),await this.listInternal(xe),xe)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var r,xe;let Ee,Ae="",Pe={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const Re=createFileSearchStoreParametersToMldev(e);return Ae=formatMap("fileSearchStores",Re._url),Pe=Re._query,delete Re._url,delete Re._query,Ee=this.apiClient.request({path:Ae,queryParams:Pe,body:JSON.stringify(Re),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Ce=>Ce.json()),Ee.then(Ce=>Ce)}}async get(e){var r,xe;let Ee,Ae="",Pe={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const Re=getFileSearchStoreParametersToMldev(e);return Ae=formatMap("{name}",Re._url),Pe=Re._query,delete Re._url,delete Re._query,Ee=this.apiClient.request({path:Ae,queryParams:Pe,body:JSON.stringify(Re),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Ce=>Ce.json()),Ee.then(Ce=>Ce)}}async delete(e){var r,xe;let Ee="",Ae={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const Pe=deleteFileSearchStoreParametersToMldev(e);Ee=formatMap("{name}",Pe._url),Ae=Pe._query,delete Pe._url,delete Pe._query,await this.apiClient.request({path:Ee,queryParams:Ae,body:JSON.stringify(Pe),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal})}}async listInternal(e){var r,xe;let Ee,Ae="",Pe={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const Re=listFileSearchStoresParametersToMldev(e);return Ae=formatMap("fileSearchStores",Re._url),Pe=Re._query,delete Re._url,delete Re._query,Ee=this.apiClient.request({path:Ae,queryParams:Pe,body:JSON.stringify(Re),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Ce=>Ce.json()),Ee.then(Ce=>{const Be=listFileSearchStoresResponseFromMldev(Ce),ke=new ListFileSearchStoresResponse;return Object.assign(ke,Be),ke})}}async uploadToFileSearchStoreInternal(e){var r,xe;let Ee,Ae="",Pe={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const Re=uploadToFileSearchStoreParametersToMldev(e);return Ae=formatMap("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",Re._url),Pe=Re._query,delete Re._url,delete Re._query,Ee=this.apiClient.request({path:Ae,queryParams:Pe,body:JSON.stringify(Re),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Ce=>Ce.json()),Ee.then(Ce=>{const Be=uploadToFileSearchStoreResumableResponseFromMldev(Ce),ke=new UploadToFileSearchStoreResumableResponse;return Object.assign(ke,Be),ke})}}async importFile(e){var r,xe;let Ee,Ae="",Pe={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const Re=importFileParametersToMldev(e);return Ae=formatMap("{file_search_store_name}:importFile",Re._url),Pe=Re._query,delete Re._url,delete Re._query,Ee=this.apiClient.request({path:Ae,queryParams:Pe,body:JSON.stringify(Re),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Ce=>Ce.json()),Ee.then(Ce=>{const Be=importFileOperationFromMldev(Ce),ke=new ImportFileOperation;return Object.assign(ke,Be),ke})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let uuid4Internal=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return uuid4Internal=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),r=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,xe=>(+xe^r()&15>>+xe/4).toString(16))};const uuid4=()=>uuid4Internal();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function isAbortError(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const castToError=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GeminiNextGenAPIClientError extends Error{}class APIError extends GeminiNextGenAPIClientError{constructor(e,r,xe,Ee){super(`${APIError.makeMessage(e,r,xe)}`),this.status=e,this.headers=Ee,this.error=r}static makeMessage(e,r,xe){const Ee=r!=null&&r.message?typeof r.message=="string"?r.message:JSON.stringify(r.message):r?JSON.stringify(r):xe;return e&&Ee?`${e} ${Ee}`:e?`${e} status code (no body)`:Ee||"(no status code or body)"}static generate(e,r,xe,Ee){if(!e||!Ee)return new APIConnectionError({message:xe,cause:castToError(r)});const Ae=r;return e===400?new BadRequestError(e,Ae,xe,Ee):e===401?new AuthenticationError(e,Ae,xe,Ee):e===403?new PermissionDeniedError(e,Ae,xe,Ee):e===404?new NotFoundError(e,Ae,xe,Ee):e===409?new ConflictError(e,Ae,xe,Ee):e===422?new UnprocessableEntityError(e,Ae,xe,Ee):e===429?new RateLimitError(e,Ae,xe,Ee):e>=500?new InternalServerError(e,Ae,xe,Ee):new APIError(e,Ae,xe,Ee)}}class APIUserAbortError extends APIError{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class APIConnectionError extends APIError{constructor({message:e,cause:r}){super(void 0,void 0,e||"Connection error.",void 0),r&&(this.cause=r)}}class APIConnectionTimeoutError extends APIConnectionError{constructor({message:e}={}){super({message:e??"Request timed out."})}}class BadRequestError extends APIError{}class AuthenticationError extends APIError{}class PermissionDeniedError extends APIError{}class NotFoundError extends APIError{}class ConflictError extends APIError{}class UnprocessableEntityError extends APIError{}class RateLimitError extends APIError{}class InternalServerError extends APIError{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const startsWithSchemeRegexp=/^[a-z][a-z0-9+.-]*:/i,isAbsoluteURL=t=>startsWithSchemeRegexp.test(t);let isArrayInternal=t=>(isArrayInternal=Array.isArray,isArrayInternal(t));const isArray=isArrayInternal;let isReadonlyArrayInternal=isArray;const isReadonlyArray=isReadonlyArrayInternal;function isEmptyObj(t){if(!t)return!0;for(const e in t)return!1;return!0}function hasOwn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const validatePositiveInteger=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new GeminiNextGenAPIClientError(`${t} must be an integer`);if(e<0)throw new GeminiNextGenAPIClientError(`${t} must be a positive integer`);return e},safeJSON=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sleep$1=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VERSION="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function getDetectedPlatform(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const getPlatformProperties=()=>{var t,e,r,xe,Ee;const Ae=getDetectedPlatform();if(Ae==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":normalizePlatform(Deno.build.os),"X-Stainless-Arch":normalizeArch(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(Ae==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":normalizePlatform((r=globalThis.process.platform)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Arch":normalizeArch((xe=globalThis.process.arch)!==null&&xe!==void 0?xe:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(Ee=globalThis.process.version)!==null&&Ee!==void 0?Ee:"unknown"};const Pe=getBrowserInfo();return Pe?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${Pe.browser}`,"X-Stainless-Runtime-Version":Pe.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function getBrowserInfo(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:r}of t){const xe=r.exec(navigator.userAgent);if(xe){const Ee=xe[1]||0,Ae=xe[2]||0,Pe=xe[3]||0;return{browser:e,version:`${Ee}.${Ae}.${Pe}`}}}return null}const normalizeArch=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",normalizePlatform=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let _platformHeaders;const getPlatformHeaders=()=>_platformHeaders??(_platformHeaders=getPlatformProperties());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function getDefaultFetch(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function makeReadableStream(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function ReadableStreamFrom(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return makeReadableStream({start(){},async pull(r){const{done:xe,value:Ee}=await e.next();xe?r.close():r.enqueue(Ee)},async cancel(){var r;await((r=e.return)===null||r===void 0?void 0:r.call(e))}})}function ReadableStreamToAsyncIterable(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const r=await e.read();return r!=null&&r.done&&e.releaseLock(),r}catch(r){throw e.releaseLock(),r}},async return(){const r=e.cancel();return e.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function CancelReadableStream(t){var e,r;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((r=(e=t[Symbol.asyncIterator]()).return)===null||r===void 0?void 0:r.call(e));return}const xe=t.getReader(),Ee=xe.cancel();xe.releaseLock(),await Ee}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FallbackEncoder=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const checkFileSupport=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,r=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(r?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function makeFile(t,e,r){return checkFileSupport(),new File(t,e??"unknown_file",r)}function getName(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const isAsyncIterable=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const isBlobLike=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",isFileLike=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&isBlobLike(t),isResponseLike=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function toFile(t,e,r){if(checkFileSupport(),t=await t,isFileLike(t))return t instanceof File?t:makeFile([await t.arrayBuffer()],t.name);if(isResponseLike(t)){const Ee=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),makeFile(await getBytes(Ee),e,r)}const xe=await getBytes(t);if(e||(e=getName(t)),!(r!=null&&r.type)){const Ee=xe.find(Ae=>typeof Ae=="object"&&"type"in Ae&&Ae.type);typeof Ee=="string"&&(r=Object.assign(Object.assign({},r),{type:Ee}))}return makeFile(xe,e,r)}async function getBytes(t){var e,r,xe,Ee,Ae;let Pe=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)Pe.push(t);else if(isBlobLike(t))Pe.push(t instanceof Blob?t:await t.arrayBuffer());else if(isAsyncIterable(t))try{for(var Re=!0,Ce=__asyncValues(t),Be;Be=await Ce.next(),e=Be.done,!e;Re=!0){Ee=Be.value,Re=!1;const ke=Ee;Pe.push(...await getBytes(ke))}}catch(ke){r={error:ke}}finally{try{!Re&&!e&&(xe=Ce.return)&&await xe.call(Ce)}finally{if(r)throw r.error}}else{const ke=(Ae=t==null?void 0:t.constructor)===null||Ae===void 0?void 0:Ae.name;throw new Error(`Unexpected data type: ${typeof t}${ke?`; constructor: ${ke}`:""}${propsForError(t)}`)}return Pe}function propsForError(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(r=>`"${r}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class APIResource{constructor(e){this._client=e}}APIResource._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function encodeURIPath(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const EMPTY=Object.freeze(Object.create(null)),createPathTagFunction=(t=encodeURIPath)=>(function(r,...xe){if(r.length===1)return r[0];let Ee=!1;const Ae=[],Pe=r.reduce((ke,Me,Fe)=>{var Ve,Oe,$e;/[?#]/.test(Me)&&(Ee=!0);const Ge=xe[Fe];let Ue=(Ee?encodeURIComponent:t)(""+Ge);return Fe!==xe.length&&(Ge==null||typeof Ge=="object"&&Ge.toString===(($e=Object.getPrototypeOf((Oe=Object.getPrototypeOf((Ve=Ge.hasOwnProperty)!==null&&Ve!==void 0?Ve:EMPTY))!==null&&Oe!==void 0?Oe:EMPTY))===null||$e===void 0?void 0:$e.toString))&&(Ue=Ge+"",Ae.push({start:ke.length+Me.length,length:Ue.length,error:`Value of type ${Object.prototype.toString.call(Ge).slice(8,-1)} is not a valid path parameter`})),ke+Me+(Fe===xe.length?"":Ue)},""),Re=Pe.split(/[?#]/,1)[0],Ce=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let Be;for(;(Be=Ce.exec(Re))!==null;)Ae.push({start:Be.index,length:Be[0].length,error:`Value "${Be[0]}" can't be safely passed as a path parameter`});if(Ae.sort((ke,Me)=>ke.start-Me.start),Ae.length>0){let ke=0;const Me=Ae.reduce((Fe,Ve)=>{const Oe=" ".repeat(Ve.start-ke),$e="^".repeat(Ve.length);return ke=Ve.start+Ve.length,Fe+Oe+$e},"");throw new GeminiNextGenAPIClientError(`Path parameters result in path with invalid segments:
${Ae.map(Fe=>Fe.error).join(`
`)}
${Pe}
${Me}`)}return Pe}),path=createPathTagFunction(encodeURIPath);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BaseInteractions extends APIResource{create(e,r){var xe;const{api_version:Ee=this._client.apiVersion}=e,Ae=__rest$1(e,["api_version"]);if("model"in Ae&&"agent_config"in Ae)throw new GeminiNextGenAPIClientError("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in Ae&&"generation_config"in Ae)throw new GeminiNextGenAPIClientError("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(path`/${Ee}/interactions`,Object.assign(Object.assign({body:Ae},r),{stream:(xe=e.stream)!==null&&xe!==void 0?xe:!1}))}delete(e,r={},xe){const{api_version:Ee=this._client.apiVersion}=r??{};return this._client.delete(path`/${Ee}/interactions/${e}`,xe)}cancel(e,r={},xe){const{api_version:Ee=this._client.apiVersion}=r??{};return this._client.post(path`/${Ee}/interactions/${e}/cancel`,xe)}get(e,r={},xe){var Ee;const Ae=r??{},{api_version:Pe=this._client.apiVersion}=Ae,Re=__rest$1(Ae,["api_version"]);return this._client.get(path`/${Pe}/interactions/${e}`,Object.assign(Object.assign({query:Re},xe),{stream:(Ee=r==null?void 0:r.stream)!==null&&Ee!==void 0?Ee:!1}))}}BaseInteractions._key=Object.freeze(["interactions"]);class Interactions extends BaseInteractions{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function concatBytes(t){let e=0;for(const Ee of t)e+=Ee.length;const r=new Uint8Array(e);let xe=0;for(const Ee of t)r.set(Ee,xe),xe+=Ee.length;return r}let encodeUTF8_;function encodeUTF8(t){let e;return(encodeUTF8_??(e=new globalThis.TextEncoder,encodeUTF8_=e.encode.bind(e)))(t)}let decodeUTF8_;function decodeUTF8(t){let e;return(decodeUTF8_??(e=new globalThis.TextDecoder,decodeUTF8_=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LineDecoder{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const r=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?encodeUTF8(e):e;this.buffer=concatBytes([this.buffer,r]);const xe=[];let Ee;for(;(Ee=findNewlineIndex(this.buffer,this.carriageReturnIndex))!=null;){if(Ee.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=Ee.index;continue}if(this.carriageReturnIndex!=null&&(Ee.index!==this.carriageReturnIndex+1||Ee.carriage)){xe.push(decodeUTF8(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const Ae=this.carriageReturnIndex!==null?Ee.preceding-1:Ee.preceding,Pe=decodeUTF8(this.buffer.subarray(0,Ae));xe.push(Pe),this.buffer=this.buffer.subarray(Ee.index),this.carriageReturnIndex=null}return xe}flush(){return this.buffer.length?this.decode(`
`):[]}}LineDecoder.NEWLINE_CHARS=new Set([`
`,"\r"]);LineDecoder.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function findNewlineIndex(t,e){for(let Ee=e??0;Ee<t.length;Ee++){if(t[Ee]===10)return{preceding:Ee,index:Ee+1,carriage:!1};if(t[Ee]===13)return{preceding:Ee,index:Ee+1,carriage:!0}}return null}function findDoubleNewlineIndex(t){for(let xe=0;xe<t.length-1;xe++){if(t[xe]===10&&t[xe+1]===10||t[xe]===13&&t[xe+1]===13)return xe+2;if(t[xe]===13&&t[xe+1]===10&&xe+3<t.length&&t[xe+2]===13&&t[xe+3]===10)return xe+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const levelNumbers={off:0,error:200,warn:300,info:400,debug:500},parseLogLevel=(t,e,r)=>{if(t){if(hasOwn(levelNumbers,t))return t;loggerFor(r).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(levelNumbers))}`)}};function noop$2(){}function makeLogFn(t,e,r){return!e||levelNumbers[t]>levelNumbers[r]?noop$2:e[t].bind(e)}const noopLogger={error:noop$2,warn:noop$2,info:noop$2,debug:noop$2};let cachedLoggers=new WeakMap;function loggerFor(t){var e;const r=t.logger,xe=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!r)return noopLogger;const Ee=cachedLoggers.get(r);if(Ee&&Ee[0]===xe)return Ee[1];const Ae={error:makeLogFn("error",r,xe),warn:makeLogFn("warn",r,xe),info:makeLogFn("info",r,xe),debug:makeLogFn("debug",r,xe)};return cachedLoggers.set(r,[xe,Ae]),Ae}const formatRequestDetails=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,r])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":r]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Stream{constructor(e,r,xe){this.iterator=e,this.controller=r,this.client=xe}static fromSSEResponse(e,r,xe){let Ee=!1;const Ae=xe?loggerFor(xe):console;function Pe(){return __asyncGenerator(this,arguments,function*(){var Ce,Be,ke,Me;if(Ee)throw new GeminiNextGenAPIClientError("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");Ee=!0;let Fe=!1;try{try{for(var Ve=!0,Oe=__asyncValues(_iterSSEMessages(e,r)),$e;$e=yield __await(Oe.next()),Ce=$e.done,!Ce;Ve=!0){Me=$e.value,Ve=!1;const Ge=Me;if(!Fe)if(Ge.data.startsWith("[DONE]")){Fe=!0;continue}else try{yield yield __await(JSON.parse(Ge.data))}catch(Ue){throw Ae.error("Could not parse message into JSON:",Ge.data),Ae.error("From chunk:",Ge.raw),Ue}}}catch(Ge){Be={error:Ge}}finally{try{!Ve&&!Ce&&(ke=Oe.return)&&(yield __await(ke.call(Oe)))}finally{if(Be)throw Be.error}}Fe=!0}catch(Ge){if(isAbortError(Ge))return yield __await(void 0);throw Ge}finally{Fe||r.abort()}})}return new Stream(Pe,r,xe)}static fromReadableStream(e,r,xe){let Ee=!1;function Ae(){return __asyncGenerator(this,arguments,function*(){var Ce,Be,ke,Me;const Fe=new LineDecoder,Ve=ReadableStreamToAsyncIterable(e);try{for(var Oe=!0,$e=__asyncValues(Ve),Ge;Ge=yield __await($e.next()),Ce=Ge.done,!Ce;Oe=!0){Me=Ge.value,Oe=!1;const Ue=Me;for(const Ye of Fe.decode(Ue))yield yield __await(Ye)}}catch(Ue){Be={error:Ue}}finally{try{!Oe&&!Ce&&(ke=$e.return)&&(yield __await(ke.call($e)))}finally{if(Be)throw Be.error}}for(const Ue of Fe.flush())yield yield __await(Ue)})}function Pe(){return __asyncGenerator(this,arguments,function*(){var Ce,Be,ke,Me;if(Ee)throw new GeminiNextGenAPIClientError("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");Ee=!0;let Fe=!1;try{try{for(var Ve=!0,Oe=__asyncValues(Ae()),$e;$e=yield __await(Oe.next()),Ce=$e.done,!Ce;Ve=!0){Me=$e.value,Ve=!1;const Ge=Me;Fe||Ge&&(yield yield __await(JSON.parse(Ge)))}}catch(Ge){Be={error:Ge}}finally{try{!Ve&&!Ce&&(ke=Oe.return)&&(yield __await(ke.call(Oe)))}finally{if(Be)throw Be.error}}Fe=!0}catch(Ge){if(isAbortError(Ge))return yield __await(void 0);throw Ge}finally{Fe||r.abort()}})}return new Stream(Pe,r,xe)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],r=[],xe=this.iterator(),Ee=Ae=>({next:()=>{if(Ae.length===0){const Pe=xe.next();e.push(Pe),r.push(Pe)}return Ae.shift()}});return[new Stream(()=>Ee(e),this.controller,this.client),new Stream(()=>Ee(r),this.controller,this.client)]}toReadableStream(){const e=this;let r;return makeReadableStream({async start(){r=e[Symbol.asyncIterator]()},async pull(xe){try{const{value:Ee,done:Ae}=await r.next();if(Ae)return xe.close();const Pe=encodeUTF8(JSON.stringify(Ee)+`
`);xe.enqueue(Pe)}catch(Ee){xe.error(Ee)}},async cancel(){var xe;await((xe=r.return)===null||xe===void 0?void 0:xe.call(r))}})}}function _iterSSEMessages(t,e){return __asyncGenerator(this,arguments,function*(){var xe,Ee,Ae,Pe;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new GeminiNextGenAPIClientError("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new GeminiNextGenAPIClientError("Attempted to iterate over a response with no body");const Re=new SSEDecoder,Ce=new LineDecoder,Be=ReadableStreamToAsyncIterable(t.body);try{for(var ke=!0,Me=__asyncValues(iterSSEChunks(Be)),Fe;Fe=yield __await(Me.next()),xe=Fe.done,!xe;ke=!0){Pe=Fe.value,ke=!1;const Ve=Pe;for(const Oe of Ce.decode(Ve)){const $e=Re.decode(Oe);$e&&(yield yield __await($e))}}}catch(Ve){Ee={error:Ve}}finally{try{!ke&&!xe&&(Ae=Me.return)&&(yield __await(Ae.call(Me)))}finally{if(Ee)throw Ee.error}}for(const Ve of Ce.flush()){const Oe=Re.decode(Ve);Oe&&(yield yield __await(Oe))}})}function iterSSEChunks(t){return __asyncGenerator(this,arguments,function*(){var r,xe,Ee,Ae;let Pe=new Uint8Array;try{for(var Re=!0,Ce=__asyncValues(t),Be;Be=yield __await(Ce.next()),r=Be.done,!r;Re=!0){Ae=Be.value,Re=!1;const ke=Ae;if(ke==null)continue;const Me=ke instanceof ArrayBuffer?new Uint8Array(ke):typeof ke=="string"?encodeUTF8(ke):ke;let Fe=new Uint8Array(Pe.length+Me.length);Fe.set(Pe),Fe.set(Me,Pe.length),Pe=Fe;let Ve;for(;(Ve=findDoubleNewlineIndex(Pe))!==-1;)yield yield __await(Pe.slice(0,Ve)),Pe=Pe.slice(Ve)}}catch(ke){xe={error:ke}}finally{try{!Re&&!r&&(Ee=Ce.return)&&(yield __await(Ee.call(Ce)))}finally{if(xe)throw xe.error}}Pe.length>0&&(yield yield __await(Pe))})}class SSEDecoder{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const Ae={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],Ae}if(this.chunks.push(e),e.startsWith(":"))return null;let[r,xe,Ee]=partition(e,":");return Ee.startsWith(" ")&&(Ee=Ee.substring(1)),r==="event"?this.event=Ee:r==="data"&&this.data.push(Ee),null}}function partition(t,e){const r=t.indexOf(e);return r!==-1?[t.substring(0,r),e,t.substring(r+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function defaultParseResponse(t,e){const{response:r,requestLogID:xe,retryOfRequestLogID:Ee,startTime:Ae}=e,Pe=await(async()=>{var Re;if(e.options.stream)return loggerFor(t).debug("response",r.status,r.url,r.headers,r.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(r,e.controller,t):Stream.fromSSEResponse(r,e.controller,t);if(r.status===204)return null;if(e.options.__binaryResponse)return r;const Ce=r.headers.get("content-type"),Be=(Re=Ce==null?void 0:Ce.split(";")[0])===null||Re===void 0?void 0:Re.trim();return(Be==null?void 0:Be.includes("application/json"))||(Be==null?void 0:Be.endsWith("+json"))?await r.json():await r.text()})();return loggerFor(t).debug(`[${xe}] response parsed`,formatRequestDetails({retryOfRequestLogID:Ee,url:r.url,status:r.status,body:Pe,durationMs:Date.now()-Ae})),Pe}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class APIPromise extends Promise{constructor(e,r,xe=defaultParseResponse){super(Ee=>{Ee(null)}),this.responsePromise=r,this.parseResponse=xe,this.client=e}_thenUnwrap(e){return new APIPromise(this.client,this.responsePromise,async(r,xe)=>e(await this.parseResponse(r,xe),xe))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:r}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,r){return this.parse().then(e,r)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const brand_privateNullableHeaders=Symbol("brand.privateNullableHeaders");function*iterateHeaders(t){if(!t)return;if(brand_privateNullableHeaders in t){const{values:xe,nulls:Ee}=t;yield*xe.entries();for(const Ae of Ee)yield[Ae,null];return}let e=!1,r;t instanceof Headers?r=t.entries():isReadonlyArray(t)?r=t:(e=!0,r=Object.entries(t??{}));for(let xe of r){const Ee=xe[0];if(typeof Ee!="string")throw new TypeError("expected header name to be a string");const Ae=isReadonlyArray(xe[1])?xe[1]:[xe[1]];let Pe=!1;for(const Re of Ae)Re!==void 0&&(e&&!Pe&&(Pe=!0,yield[Ee,null]),yield[Ee,Re])}}const buildHeaders=t=>{const e=new Headers,r=new Set;for(const xe of t){const Ee=new Set;for(const[Ae,Pe]of iterateHeaders(xe)){const Re=Ae.toLowerCase();Ee.has(Re)||(e.delete(Ae),Ee.add(Re)),Pe===null?(e.delete(Ae),r.add(Re)):(e.append(Ae,Pe),r.delete(Re))}}return{[brand_privateNullableHeaders]:!0,values:e,nulls:r}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const readEnv=t=>{var e,r,xe,Ee,Ae,Pe;if(typeof globalThis.process<"u")return(xe=(r=(e=define_globalThis_process_env_default)===null||e===void 0?void 0:e[t])===null||r===void 0?void 0:r.trim())!==null&&xe!==void 0?xe:void 0;if(typeof globalThis.Deno<"u")return(Pe=(Ae=(Ee=globalThis.Deno.env)===null||Ee===void 0?void 0:Ee.get)===null||Ae===void 0?void 0:Ae.call(Ee,t))===null||Pe===void 0?void 0:Pe.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var _a;class BaseGeminiNextGenAPIClient{constructor(e){var r,xe,Ee,Ae,Pe,Re,Ce,Be=e===void 0?{}:e,{baseURL:ke=readEnv("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:Me=(r=readEnv("GEMINI_API_KEY"))!==null&&r!==void 0?r:null,apiVersion:Fe="v1beta"}=Be,Ve=__rest$1(Be,["baseURL","apiKey","apiVersion"]);const Oe=Object.assign(Object.assign({apiKey:Me,apiVersion:Fe},Ve),{baseURL:ke||"https://generativelanguage.googleapis.com"});this.baseURL=Oe.baseURL,this.timeout=(xe=Oe.timeout)!==null&&xe!==void 0?xe:BaseGeminiNextGenAPIClient.DEFAULT_TIMEOUT,this.logger=(Ee=Oe.logger)!==null&&Ee!==void 0?Ee:console;const $e="warn";this.logLevel=$e,this.logLevel=(Pe=(Ae=parseLogLevel(Oe.logLevel,"ClientOptions.logLevel",this))!==null&&Ae!==void 0?Ae:parseLogLevel(readEnv("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&Pe!==void 0?Pe:$e,this.fetchOptions=Oe.fetchOptions,this.maxRetries=(Re=Oe.maxRetries)!==null&&Re!==void 0?Re:2,this.fetch=(Ce=Oe.fetch)!==null&&Ce!==void 0?Ce:getDefaultFetch(),this.encoder=FallbackEncoder,this._options=Oe,this.apiKey=Me,this.apiVersion=Fe}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:r}){if(!(this.apiKey&&e.get("x-goog-api-key"))&&!r.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){if(this.apiKey!=null)return buildHeaders([{"x-goog-api-key":this.apiKey}])}stringifyQuery(e){return Object.entries(e).filter(([r,xe])=>typeof xe<"u").map(([r,xe])=>{if(typeof xe=="string"||typeof xe=="number"||typeof xe=="boolean")return`${encodeURIComponent(r)}=${encodeURIComponent(xe)}`;if(xe===null)return`${encodeURIComponent(r)}=`;throw new GeminiNextGenAPIClientError(`Cannot stringify type ${typeof xe}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${VERSION}`}defaultIdempotencyKey(){return`stainless-node-retry-${uuid4()}`}makeStatusError(e,r,xe,Ee){return APIError.generate(e,r,xe,Ee)}buildURL(e,r,xe){const Ee=!this.baseURLOverridden()&&xe||this.baseURL,Ae=isAbsoluteURL(e)?new URL(e):new URL(Ee+(Ee.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),Pe=this.defaultQuery();return isEmptyObj(Pe)||(r=Object.assign(Object.assign({},Pe),r)),typeof r=="object"&&r&&!Array.isArray(r)&&(Ae.search=this.stringifyQuery(r)),Ae.toString()}async prepareOptions(e){}async prepareRequest(e,{url:r,options:xe}){}get(e,r){return this.methodRequest("get",e,r)}post(e,r){return this.methodRequest("post",e,r)}patch(e,r){return this.methodRequest("patch",e,r)}put(e,r){return this.methodRequest("put",e,r)}delete(e,r){return this.methodRequest("delete",e,r)}methodRequest(e,r,xe){return this.request(Promise.resolve(xe).then(Ee=>Object.assign({method:e,path:r},Ee)))}request(e,r=null){return new APIPromise(this,this.makeRequest(e,r,void 0))}async makeRequest(e,r,xe){var Ee,Ae,Pe;const Re=await e,Ce=(Ee=Re.maxRetries)!==null&&Ee!==void 0?Ee:this.maxRetries;r==null&&(r=Ce),await this.prepareOptions(Re);const{req:Be,url:ke,timeout:Me}=await this.buildRequest(Re,{retryCount:Ce-r});await this.prepareRequest(Be,{url:ke,options:Re});const Fe="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),Ve=xe===void 0?"":`, retryOf: ${xe}`,Oe=Date.now();if(loggerFor(this).debug(`[${Fe}] sending request`,formatRequestDetails({retryOfRequestLogID:xe,method:Re.method,url:ke,options:Re,headers:Be.headers})),!((Ae=Re.signal)===null||Ae===void 0)&&Ae.aborted)throw new APIUserAbortError;const $e=new AbortController,Ge=await this.fetchWithTimeout(ke,Be,Me,$e).catch(castToError),Ue=Date.now();if(Ge instanceof globalThis.Error){const Qe=`retrying, ${r} attempts remaining`;if(!((Pe=Re.signal)===null||Pe===void 0)&&Pe.aborted)throw new APIUserAbortError;const rn=isAbortError(Ge)||/timed? ?out/i.test(String(Ge)+("cause"in Ge?String(Ge.cause):""));if(r)return loggerFor(this).info(`[${Fe}] connection ${rn?"timed out":"failed"} - ${Qe}`),loggerFor(this).debug(`[${Fe}] connection ${rn?"timed out":"failed"} (${Qe})`,formatRequestDetails({retryOfRequestLogID:xe,url:ke,durationMs:Ue-Oe,message:Ge.message})),this.retryRequest(Re,r,xe??Fe);throw loggerFor(this).info(`[${Fe}] connection ${rn?"timed out":"failed"} - error; no more retries left`),loggerFor(this).debug(`[${Fe}] connection ${rn?"timed out":"failed"} (error; no more retries left)`,formatRequestDetails({retryOfRequestLogID:xe,url:ke,durationMs:Ue-Oe,message:Ge.message})),rn?new APIConnectionTimeoutError:new APIConnectionError({cause:Ge})}const Ye=`[${Fe}${Ve}] ${Be.method} ${ke} ${Ge.ok?"succeeded":"failed"} with status ${Ge.status} in ${Ue-Oe}ms`;if(!Ge.ok){const Qe=await this.shouldRetry(Ge);if(r&&Qe){const sn=`retrying, ${r} attempts remaining`;return await CancelReadableStream(Ge.body),loggerFor(this).info(`${Ye} - ${sn}`),loggerFor(this).debug(`[${Fe}] response error (${sn})`,formatRequestDetails({retryOfRequestLogID:xe,url:Ge.url,status:Ge.status,headers:Ge.headers,durationMs:Ue-Oe})),this.retryRequest(Re,r,xe??Fe,Ge.headers)}const rn=Qe?"error; no more retries left":"error; not retryable";loggerFor(this).info(`${Ye} - ${rn}`);const tn=await Ge.text().catch(sn=>castToError(sn).message),an=safeJSON(tn),qe=an?void 0:tn;throw loggerFor(this).debug(`[${Fe}] response error (${rn})`,formatRequestDetails({retryOfRequestLogID:xe,url:Ge.url,status:Ge.status,headers:Ge.headers,message:qe,durationMs:Date.now()-Oe})),this.makeStatusError(Ge.status,an,qe,Ge.headers)}return loggerFor(this).info(Ye),loggerFor(this).debug(`[${Fe}] response start`,formatRequestDetails({retryOfRequestLogID:xe,url:Ge.url,status:Ge.status,headers:Ge.headers,durationMs:Ue-Oe})),{response:Ge,options:Re,controller:$e,requestLogID:Fe,retryOfRequestLogID:xe,startTime:Oe}}async fetchWithTimeout(e,r,xe,Ee){const Ae=r||{},{signal:Pe,method:Re}=Ae,Ce=__rest$1(Ae,["signal","method"]);Pe&&Pe.addEventListener("abort",()=>Ee.abort());const Be=setTimeout(()=>Ee.abort(),xe),ke=globalThis.ReadableStream&&Ce.body instanceof globalThis.ReadableStream||typeof Ce.body=="object"&&Ce.body!==null&&Symbol.asyncIterator in Ce.body,Me=Object.assign(Object.assign(Object.assign({signal:Ee.signal},ke?{duplex:"half"}:{}),{method:"GET"}),Ce);Re&&(Me.method=Re.toUpperCase());try{return await this.fetch.call(void 0,e,Me)}finally{clearTimeout(Be)}}async shouldRetry(e){const r=e.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,r,xe,Ee){var Ae;let Pe;const Re=Ee==null?void 0:Ee.get("retry-after-ms");if(Re){const Be=parseFloat(Re);Number.isNaN(Be)||(Pe=Be)}const Ce=Ee==null?void 0:Ee.get("retry-after");if(Ce&&!Pe){const Be=parseFloat(Ce);Number.isNaN(Be)?Pe=Date.parse(Ce)-Date.now():Pe=Be*1e3}if(!(Pe&&0<=Pe&&Pe<60*1e3)){const Be=(Ae=e.maxRetries)!==null&&Ae!==void 0?Ae:this.maxRetries;Pe=this.calculateDefaultRetryTimeoutMillis(r,Be)}return await sleep$1(Pe),this.makeRequest(e,r-1,xe)}calculateDefaultRetryTimeoutMillis(e,r){const Ae=r-e,Pe=Math.min(.5*Math.pow(2,Ae),8),Re=1-Math.random()*.25;return Pe*Re*1e3}async buildRequest(e,{retryCount:r=0}={}){var xe,Ee,Ae;const Pe=Object.assign({},e),{method:Re,path:Ce,query:Be,defaultBaseURL:ke}=Pe,Me=this.buildURL(Ce,Be,ke);"timeout"in Pe&&validatePositiveInteger("timeout",Pe.timeout),Pe.timeout=(xe=Pe.timeout)!==null&&xe!==void 0?xe:this.timeout;const{bodyHeaders:Fe,body:Ve}=this.buildBody({options:Pe}),Oe=await this.buildHeaders({options:e,method:Re,bodyHeaders:Fe,retryCount:r});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:Re,headers:Oe},Pe.signal&&{signal:Pe.signal}),globalThis.ReadableStream&&Ve instanceof globalThis.ReadableStream&&{duplex:"half"}),Ve&&{body:Ve}),(Ee=this.fetchOptions)!==null&&Ee!==void 0?Ee:{}),(Ae=Pe.fetchOptions)!==null&&Ae!==void 0?Ae:{}),url:Me,timeout:Pe.timeout}}async buildHeaders({options:e,method:r,bodyHeaders:xe,retryCount:Ee}){let Ae={};this.idempotencyHeader&&r!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),Ae[this.idempotencyHeader]=e.idempotencyKey);const Pe=buildHeaders([Ae,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(Ee)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),getPlatformHeaders()),await this.authHeaders(e),this._options.defaultHeaders,xe,e.headers]);return this.validateHeaders(Pe),Pe.values}buildBody({options:{body:e,headers:r}}){if(!e)return{bodyHeaders:void 0,body:void 0};const xe=buildHeaders([r]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&xe.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:ReadableStreamFrom(e)}:this.encoder({body:e,headers:xe})}}BaseGeminiNextGenAPIClient.DEFAULT_TIMEOUT=6e4;class GeminiNextGenAPIClient extends BaseGeminiNextGenAPIClient{constructor(){super(...arguments),this.interactions=new Interactions(this)}}_a=GeminiNextGenAPIClient;GeminiNextGenAPIClient.GeminiNextGenAPIClient=_a;GeminiNextGenAPIClient.GeminiNextGenAPIClientError=GeminiNextGenAPIClientError;GeminiNextGenAPIClient.APIError=APIError;GeminiNextGenAPIClient.APIConnectionError=APIConnectionError;GeminiNextGenAPIClient.APIConnectionTimeoutError=APIConnectionTimeoutError;GeminiNextGenAPIClient.APIUserAbortError=APIUserAbortError;GeminiNextGenAPIClient.NotFoundError=NotFoundError;GeminiNextGenAPIClient.ConflictError=ConflictError;GeminiNextGenAPIClient.RateLimitError=RateLimitError;GeminiNextGenAPIClient.BadRequestError=BadRequestError;GeminiNextGenAPIClient.AuthenticationError=AuthenticationError;GeminiNextGenAPIClient.InternalServerError=InternalServerError;GeminiNextGenAPIClient.PermissionDeniedError=PermissionDeniedError;GeminiNextGenAPIClient.UnprocessableEntityError=UnprocessableEntityError;GeminiNextGenAPIClient.toFile=toFile;GeminiNextGenAPIClient.Interactions=Interactions;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cancelTuningJobParametersToMldev(t,e){const r={},xe=getValueByPath(t,["name"]);return xe!=null&&setValueByPath(r,["_url","name"],xe),r}function cancelTuningJobParametersToVertex(t,e){const r={},xe=getValueByPath(t,["name"]);return xe!=null&&setValueByPath(r,["_url","name"],xe),r}function cancelTuningJobResponseFromMldev(t,e){const r={},xe=getValueByPath(t,["sdkHttpResponse"]);return xe!=null&&setValueByPath(r,["sdkHttpResponse"],xe),r}function cancelTuningJobResponseFromVertex(t,e){const r={},xe=getValueByPath(t,["sdkHttpResponse"]);return xe!=null&&setValueByPath(r,["sdkHttpResponse"],xe),r}function createTuningJobConfigToMldev(t,e,r){const xe={};if(getValueByPath(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const Ee=getValueByPath(t,["tunedModelDisplayName"]);if(e!==void 0&&Ee!=null&&setValueByPath(e,["displayName"],Ee),getValueByPath(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const Ae=getValueByPath(t,["epochCount"]);e!==void 0&&Ae!=null&&setValueByPath(e,["tuningTask","hyperparameters","epochCount"],Ae);const Pe=getValueByPath(t,["learningRateMultiplier"]);if(Pe!=null&&setValueByPath(xe,["tuningTask","hyperparameters","learningRateMultiplier"],Pe),getValueByPath(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(getValueByPath(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(getValueByPath(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const Re=getValueByPath(t,["batchSize"]);e!==void 0&&Re!=null&&setValueByPath(e,["tuningTask","hyperparameters","batchSize"],Re);const Ce=getValueByPath(t,["learningRate"]);if(e!==void 0&&Ce!=null&&setValueByPath(e,["tuningTask","hyperparameters","learningRate"],Ce),getValueByPath(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(getValueByPath(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return xe}function createTuningJobConfigToVertex(t,e,r){const xe={};let Ee=getValueByPath(r,["config","method"]);if(Ee===void 0&&(Ee="SUPERVISED_FINE_TUNING"),Ee==="SUPERVISED_FINE_TUNING"){const Ve=getValueByPath(t,["validationDataset"]);e!==void 0&&Ve!=null&&setValueByPath(e,["supervisedTuningSpec"],tuningValidationDatasetToVertex(Ve))}else if(Ee==="PREFERENCE_TUNING"){const Ve=getValueByPath(t,["validationDataset"]);e!==void 0&&Ve!=null&&setValueByPath(e,["preferenceOptimizationSpec"],tuningValidationDatasetToVertex(Ve))}const Ae=getValueByPath(t,["tunedModelDisplayName"]);e!==void 0&&Ae!=null&&setValueByPath(e,["tunedModelDisplayName"],Ae);const Pe=getValueByPath(t,["description"]);e!==void 0&&Pe!=null&&setValueByPath(e,["description"],Pe);let Re=getValueByPath(r,["config","method"]);if(Re===void 0&&(Re="SUPERVISED_FINE_TUNING"),Re==="SUPERVISED_FINE_TUNING"){const Ve=getValueByPath(t,["epochCount"]);e!==void 0&&Ve!=null&&setValueByPath(e,["supervisedTuningSpec","hyperParameters","epochCount"],Ve)}else if(Re==="PREFERENCE_TUNING"){const Ve=getValueByPath(t,["epochCount"]);e!==void 0&&Ve!=null&&setValueByPath(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],Ve)}let Ce=getValueByPath(r,["config","method"]);if(Ce===void 0&&(Ce="SUPERVISED_FINE_TUNING"),Ce==="SUPERVISED_FINE_TUNING"){const Ve=getValueByPath(t,["learningRateMultiplier"]);e!==void 0&&Ve!=null&&setValueByPath(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],Ve)}else if(Ce==="PREFERENCE_TUNING"){const Ve=getValueByPath(t,["learningRateMultiplier"]);e!==void 0&&Ve!=null&&setValueByPath(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],Ve)}let Be=getValueByPath(r,["config","method"]);if(Be===void 0&&(Be="SUPERVISED_FINE_TUNING"),Be==="SUPERVISED_FINE_TUNING"){const Ve=getValueByPath(t,["exportLastCheckpointOnly"]);e!==void 0&&Ve!=null&&setValueByPath(e,["supervisedTuningSpec","exportLastCheckpointOnly"],Ve)}else if(Be==="PREFERENCE_TUNING"){const Ve=getValueByPath(t,["exportLastCheckpointOnly"]);e!==void 0&&Ve!=null&&setValueByPath(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],Ve)}let ke=getValueByPath(r,["config","method"]);if(ke===void 0&&(ke="SUPERVISED_FINE_TUNING"),ke==="SUPERVISED_FINE_TUNING"){const Ve=getValueByPath(t,["adapterSize"]);e!==void 0&&Ve!=null&&setValueByPath(e,["supervisedTuningSpec","hyperParameters","adapterSize"],Ve)}else if(ke==="PREFERENCE_TUNING"){const Ve=getValueByPath(t,["adapterSize"]);e!==void 0&&Ve!=null&&setValueByPath(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],Ve)}if(getValueByPath(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(getValueByPath(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const Me=getValueByPath(t,["labels"]);e!==void 0&&Me!=null&&setValueByPath(e,["labels"],Me);const Fe=getValueByPath(t,["beta"]);return e!==void 0&&Fe!=null&&setValueByPath(e,["preferenceOptimizationSpec","hyperParameters","beta"],Fe),xe}function createTuningJobParametersPrivateToMldev(t,e){const r={},xe=getValueByPath(t,["baseModel"]);xe!=null&&setValueByPath(r,["baseModel"],xe);const Ee=getValueByPath(t,["preTunedModel"]);Ee!=null&&setValueByPath(r,["preTunedModel"],Ee);const Ae=getValueByPath(t,["trainingDataset"]);Ae!=null&&tuningDatasetToMldev(Ae);const Pe=getValueByPath(t,["config"]);return Pe!=null&&createTuningJobConfigToMldev(Pe,r),r}function createTuningJobParametersPrivateToVertex(t,e){const r={},xe=getValueByPath(t,["baseModel"]);xe!=null&&setValueByPath(r,["baseModel"],xe);const Ee=getValueByPath(t,["preTunedModel"]);Ee!=null&&setValueByPath(r,["preTunedModel"],Ee);const Ae=getValueByPath(t,["trainingDataset"]);Ae!=null&&tuningDatasetToVertex(Ae,r,e);const Pe=getValueByPath(t,["config"]);return Pe!=null&&createTuningJobConfigToVertex(Pe,r,e),r}function getTuningJobParametersToMldev(t,e){const r={},xe=getValueByPath(t,["name"]);return xe!=null&&setValueByPath(r,["_url","name"],xe),r}function getTuningJobParametersToVertex(t,e){const r={},xe=getValueByPath(t,["name"]);return xe!=null&&setValueByPath(r,["_url","name"],xe),r}function listTuningJobsConfigToMldev(t,e,r){const xe={},Ee=getValueByPath(t,["pageSize"]);e!==void 0&&Ee!=null&&setValueByPath(e,["_query","pageSize"],Ee);const Ae=getValueByPath(t,["pageToken"]);e!==void 0&&Ae!=null&&setValueByPath(e,["_query","pageToken"],Ae);const Pe=getValueByPath(t,["filter"]);return e!==void 0&&Pe!=null&&setValueByPath(e,["_query","filter"],Pe),xe}function listTuningJobsConfigToVertex(t,e,r){const xe={},Ee=getValueByPath(t,["pageSize"]);e!==void 0&&Ee!=null&&setValueByPath(e,["_query","pageSize"],Ee);const Ae=getValueByPath(t,["pageToken"]);e!==void 0&&Ae!=null&&setValueByPath(e,["_query","pageToken"],Ae);const Pe=getValueByPath(t,["filter"]);return e!==void 0&&Pe!=null&&setValueByPath(e,["_query","filter"],Pe),xe}function listTuningJobsParametersToMldev(t,e){const r={},xe=getValueByPath(t,["config"]);return xe!=null&&listTuningJobsConfigToMldev(xe,r),r}function listTuningJobsParametersToVertex(t,e){const r={},xe=getValueByPath(t,["config"]);return xe!=null&&listTuningJobsConfigToVertex(xe,r),r}function listTuningJobsResponseFromMldev(t,e){const r={},xe=getValueByPath(t,["sdkHttpResponse"]);xe!=null&&setValueByPath(r,["sdkHttpResponse"],xe);const Ee=getValueByPath(t,["nextPageToken"]);Ee!=null&&setValueByPath(r,["nextPageToken"],Ee);const Ae=getValueByPath(t,["tunedModels"]);if(Ae!=null){let Pe=Ae;Array.isArray(Pe)&&(Pe=Pe.map(Re=>tuningJobFromMldev(Re))),setValueByPath(r,["tuningJobs"],Pe)}return r}function listTuningJobsResponseFromVertex(t,e){const r={},xe=getValueByPath(t,["sdkHttpResponse"]);xe!=null&&setValueByPath(r,["sdkHttpResponse"],xe);const Ee=getValueByPath(t,["nextPageToken"]);Ee!=null&&setValueByPath(r,["nextPageToken"],Ee);const Ae=getValueByPath(t,["tuningJobs"]);if(Ae!=null){let Pe=Ae;Array.isArray(Pe)&&(Pe=Pe.map(Re=>tuningJobFromVertex(Re))),setValueByPath(r,["tuningJobs"],Pe)}return r}function tunedModelFromMldev(t,e){const r={},xe=getValueByPath(t,["name"]);xe!=null&&setValueByPath(r,["model"],xe);const Ee=getValueByPath(t,["name"]);return Ee!=null&&setValueByPath(r,["endpoint"],Ee),r}function tuningDatasetToMldev(t,e){const r={};if(getValueByPath(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(getValueByPath(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const xe=getValueByPath(t,["examples"]);if(xe!=null){let Ee=xe;Array.isArray(Ee)&&(Ee=Ee.map(Ae=>Ae)),setValueByPath(r,["examples","examples"],Ee)}return r}function tuningDatasetToVertex(t,e,r){const xe={};let Ee=getValueByPath(r,["config","method"]);if(Ee===void 0&&(Ee="SUPERVISED_FINE_TUNING"),Ee==="SUPERVISED_FINE_TUNING"){const Pe=getValueByPath(t,["gcsUri"]);e!==void 0&&Pe!=null&&setValueByPath(e,["supervisedTuningSpec","trainingDatasetUri"],Pe)}else if(Ee==="PREFERENCE_TUNING"){const Pe=getValueByPath(t,["gcsUri"]);e!==void 0&&Pe!=null&&setValueByPath(e,["preferenceOptimizationSpec","trainingDatasetUri"],Pe)}let Ae=getValueByPath(r,["config","method"]);if(Ae===void 0&&(Ae="SUPERVISED_FINE_TUNING"),Ae==="SUPERVISED_FINE_TUNING"){const Pe=getValueByPath(t,["vertexDatasetResource"]);e!==void 0&&Pe!=null&&setValueByPath(e,["supervisedTuningSpec","trainingDatasetUri"],Pe)}else if(Ae==="PREFERENCE_TUNING"){const Pe=getValueByPath(t,["vertexDatasetResource"]);e!==void 0&&Pe!=null&&setValueByPath(e,["preferenceOptimizationSpec","trainingDatasetUri"],Pe)}if(getValueByPath(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return xe}function tuningJobFromMldev(t,e){const r={},xe=getValueByPath(t,["sdkHttpResponse"]);xe!=null&&setValueByPath(r,["sdkHttpResponse"],xe);const Ee=getValueByPath(t,["name"]);Ee!=null&&setValueByPath(r,["name"],Ee);const Ae=getValueByPath(t,["state"]);Ae!=null&&setValueByPath(r,["state"],tTuningJobStatus(Ae));const Pe=getValueByPath(t,["createTime"]);Pe!=null&&setValueByPath(r,["createTime"],Pe);const Re=getValueByPath(t,["tuningTask","startTime"]);Re!=null&&setValueByPath(r,["startTime"],Re);const Ce=getValueByPath(t,["tuningTask","completeTime"]);Ce!=null&&setValueByPath(r,["endTime"],Ce);const Be=getValueByPath(t,["updateTime"]);Be!=null&&setValueByPath(r,["updateTime"],Be);const ke=getValueByPath(t,["description"]);ke!=null&&setValueByPath(r,["description"],ke);const Me=getValueByPath(t,["baseModel"]);Me!=null&&setValueByPath(r,["baseModel"],Me);const Fe=getValueByPath(t,["_self"]);return Fe!=null&&setValueByPath(r,["tunedModel"],tunedModelFromMldev(Fe)),r}function tuningJobFromVertex(t,e){const r={},xe=getValueByPath(t,["sdkHttpResponse"]);xe!=null&&setValueByPath(r,["sdkHttpResponse"],xe);const Ee=getValueByPath(t,["name"]);Ee!=null&&setValueByPath(r,["name"],Ee);const Ae=getValueByPath(t,["state"]);Ae!=null&&setValueByPath(r,["state"],tTuningJobStatus(Ae));const Pe=getValueByPath(t,["createTime"]);Pe!=null&&setValueByPath(r,["createTime"],Pe);const Re=getValueByPath(t,["startTime"]);Re!=null&&setValueByPath(r,["startTime"],Re);const Ce=getValueByPath(t,["endTime"]);Ce!=null&&setValueByPath(r,["endTime"],Ce);const Be=getValueByPath(t,["updateTime"]);Be!=null&&setValueByPath(r,["updateTime"],Be);const ke=getValueByPath(t,["error"]);ke!=null&&setValueByPath(r,["error"],ke);const Me=getValueByPath(t,["description"]);Me!=null&&setValueByPath(r,["description"],Me);const Fe=getValueByPath(t,["baseModel"]);Fe!=null&&setValueByPath(r,["baseModel"],Fe);const Ve=getValueByPath(t,["tunedModel"]);Ve!=null&&setValueByPath(r,["tunedModel"],Ve);const Oe=getValueByPath(t,["preTunedModel"]);Oe!=null&&setValueByPath(r,["preTunedModel"],Oe);const $e=getValueByPath(t,["supervisedTuningSpec"]);$e!=null&&setValueByPath(r,["supervisedTuningSpec"],$e);const Ge=getValueByPath(t,["preferenceOptimizationSpec"]);Ge!=null&&setValueByPath(r,["preferenceOptimizationSpec"],Ge);const Ue=getValueByPath(t,["tuningDataStats"]);Ue!=null&&setValueByPath(r,["tuningDataStats"],Ue);const Ye=getValueByPath(t,["encryptionSpec"]);Ye!=null&&setValueByPath(r,["encryptionSpec"],Ye);const Qe=getValueByPath(t,["partnerModelTuningSpec"]);Qe!=null&&setValueByPath(r,["partnerModelTuningSpec"],Qe);const rn=getValueByPath(t,["customBaseModel"]);rn!=null&&setValueByPath(r,["customBaseModel"],rn);const tn=getValueByPath(t,["experiment"]);tn!=null&&setValueByPath(r,["experiment"],tn);const an=getValueByPath(t,["labels"]);an!=null&&setValueByPath(r,["labels"],an);const qe=getValueByPath(t,["outputUri"]);qe!=null&&setValueByPath(r,["outputUri"],qe);const Ke=getValueByPath(t,["pipelineJob"]);Ke!=null&&setValueByPath(r,["pipelineJob"],Ke);const sn=getValueByPath(t,["serviceAccount"]);sn!=null&&setValueByPath(r,["serviceAccount"],sn);const gn=getValueByPath(t,["tunedModelDisplayName"]);gn!=null&&setValueByPath(r,["tunedModelDisplayName"],gn);const He=getValueByPath(t,["veoTuningSpec"]);return He!=null&&setValueByPath(r,["veoTuningSpec"],He),r}function tuningOperationFromMldev(t,e){const r={},xe=getValueByPath(t,["sdkHttpResponse"]);xe!=null&&setValueByPath(r,["sdkHttpResponse"],xe);const Ee=getValueByPath(t,["name"]);Ee!=null&&setValueByPath(r,["name"],Ee);const Ae=getValueByPath(t,["metadata"]);Ae!=null&&setValueByPath(r,["metadata"],Ae);const Pe=getValueByPath(t,["done"]);Pe!=null&&setValueByPath(r,["done"],Pe);const Re=getValueByPath(t,["error"]);return Re!=null&&setValueByPath(r,["error"],Re),r}function tuningValidationDatasetToVertex(t,e){const r={},xe=getValueByPath(t,["gcsUri"]);xe!=null&&setValueByPath(r,["validationDatasetUri"],xe);const Ee=getValueByPath(t,["vertexDatasetResource"]);return Ee!=null&&setValueByPath(r,["validationDatasetUri"],Ee),r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tunings extends BaseModule{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new Pager(PagedItem.PAGED_ITEM_TUNING_JOBS,xe=>this.listInternal(xe),await this.listInternal(r),r),this.get=async r=>await this.getInternal(r),this.tune=async r=>{var xe;if(this.apiClient.isVertexAI())if(r.baseModel.startsWith("projects/")){const Ee={tunedModelName:r.baseModel};!((xe=r.config)===null||xe===void 0)&&xe.preTunedModelCheckpointId&&(Ee.checkpointId=r.config.preTunedModelCheckpointId);const Ae=Object.assign(Object.assign({},r),{preTunedModel:Ee});return Ae.baseModel=void 0,await this.tuneInternal(Ae)}else{const Ee=Object.assign({},r);return await this.tuneInternal(Ee)}else{const Ee=Object.assign({},r),Ae=await this.tuneMldevInternal(Ee);let Pe="";return Ae.metadata!==void 0&&Ae.metadata.tunedModel!==void 0?Pe=Ae.metadata.tunedModel:Ae.name!==void 0&&Ae.name.includes("/operations/")&&(Pe=Ae.name.split("/operations/")[0]),{name:Pe,state:JobState.JOB_STATE_QUEUED}}}}async getInternal(e){var r,xe,Ee,Ae;let Pe,Re="",Ce={};if(this.apiClient.isVertexAI()){const Be=getTuningJobParametersToVertex(e);return Re=formatMap("{name}",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(ke=>ke.json().then(Me=>{const Fe=Me;return Fe.sdkHttpResponse={headers:ke.headers},Fe})),Pe.then(ke=>tuningJobFromVertex(ke))}else{const Be=getTuningJobParametersToMldev(e);return Re=formatMap("{name}",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"GET",httpOptions:(Ee=e.config)===null||Ee===void 0?void 0:Ee.httpOptions,abortSignal:(Ae=e.config)===null||Ae===void 0?void 0:Ae.abortSignal}).then(ke=>ke.json().then(Me=>{const Fe=Me;return Fe.sdkHttpResponse={headers:ke.headers},Fe})),Pe.then(ke=>tuningJobFromMldev(ke))}}async listInternal(e){var r,xe,Ee,Ae;let Pe,Re="",Ce={};if(this.apiClient.isVertexAI()){const Be=listTuningJobsParametersToVertex(e);return Re=formatMap("tuningJobs",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(ke=>ke.json().then(Me=>{const Fe=Me;return Fe.sdkHttpResponse={headers:ke.headers},Fe})),Pe.then(ke=>{const Me=listTuningJobsResponseFromVertex(ke),Fe=new ListTuningJobsResponse;return Object.assign(Fe,Me),Fe})}else{const Be=listTuningJobsParametersToMldev(e);return Re=formatMap("tunedModels",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"GET",httpOptions:(Ee=e.config)===null||Ee===void 0?void 0:Ee.httpOptions,abortSignal:(Ae=e.config)===null||Ae===void 0?void 0:Ae.abortSignal}).then(ke=>ke.json().then(Me=>{const Fe=Me;return Fe.sdkHttpResponse={headers:ke.headers},Fe})),Pe.then(ke=>{const Me=listTuningJobsResponseFromMldev(ke),Fe=new ListTuningJobsResponse;return Object.assign(Fe,Me),Fe})}}async cancel(e){var r,xe,Ee,Ae;let Pe,Re="",Ce={};if(this.apiClient.isVertexAI()){const Be=cancelTuningJobParametersToVertex(e);return Re=formatMap("{name}:cancel",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(ke=>ke.json().then(Me=>{const Fe=Me;return Fe.sdkHttpResponse={headers:ke.headers},Fe})),Pe.then(ke=>{const Me=cancelTuningJobResponseFromVertex(ke),Fe=new CancelTuningJobResponse;return Object.assign(Fe,Me),Fe})}else{const Be=cancelTuningJobParametersToMldev(e);return Re=formatMap("{name}:cancel",Be._url),Ce=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Re,queryParams:Ce,body:JSON.stringify(Be),httpMethod:"POST",httpOptions:(Ee=e.config)===null||Ee===void 0?void 0:Ee.httpOptions,abortSignal:(Ae=e.config)===null||Ae===void 0?void 0:Ae.abortSignal}).then(ke=>ke.json().then(Me=>{const Fe=Me;return Fe.sdkHttpResponse={headers:ke.headers},Fe})),Pe.then(ke=>{const Me=cancelTuningJobResponseFromMldev(ke),Fe=new CancelTuningJobResponse;return Object.assign(Fe,Me),Fe})}}async tuneInternal(e){var r,xe;let Ee,Ae="",Pe={};if(this.apiClient.isVertexAI()){const Re=createTuningJobParametersPrivateToVertex(e,e);return Ae=formatMap("tuningJobs",Re._url),Pe=Re._query,delete Re._url,delete Re._query,Ee=this.apiClient.request({path:Ae,queryParams:Pe,body:JSON.stringify(Re),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Ce=>Ce.json().then(Be=>{const ke=Be;return ke.sdkHttpResponse={headers:Ce.headers},ke})),Ee.then(Ce=>tuningJobFromVertex(Ce))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var r,xe;let Ee,Ae="",Pe={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const Re=createTuningJobParametersPrivateToMldev(e);return Ae=formatMap("tunedModels",Re._url),Pe=Re._query,delete Re._url,delete Re._query,Ee=this.apiClient.request({path:Ae,queryParams:Pe,body:JSON.stringify(Re),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Ce=>Ce.json().then(Be=>{const ke=Be;return ke.sdkHttpResponse={headers:Ce.headers},ke})),Ee.then(Ce=>tuningOperationFromMldev(Ce))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BrowserDownloader{async download(e,r){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const MAX_CHUNK_SIZE=1024*1024*8,MAX_RETRY_COUNT=3,INITIAL_RETRY_DELAY_MS=1e3,DELAY_MULTIPLIER=2,X_GOOG_UPLOAD_STATUS_HEADER_FIELD="x-goog-upload-status";async function uploadBlob(t,e,r){var xe;const Ee=await uploadBlobInternal(t,e,r),Ae=await(Ee==null?void 0:Ee.json());if(((xe=Ee==null?void 0:Ee.headers)===null||xe===void 0?void 0:xe[X_GOOG_UPLOAD_STATUS_HEADER_FIELD])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return Ae.file}async function uploadBlobToFileSearchStore(t,e,r){var xe;const Ee=await uploadBlobInternal(t,e,r),Ae=await(Ee==null?void 0:Ee.json());if(((xe=Ee==null?void 0:Ee.headers)===null||xe===void 0?void 0:xe[X_GOOG_UPLOAD_STATUS_HEADER_FIELD])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const Pe=uploadToFileSearchStoreOperationFromMldev(Ae),Re=new UploadToFileSearchStoreOperation;return Object.assign(Re,Pe),Re}async function uploadBlobInternal(t,e,r){var xe,Ee;let Ae=0,Pe=0,Re=new HttpResponse(new Response),Ce="upload";for(Ae=t.size;Pe<Ae;){const Be=Math.min(MAX_CHUNK_SIZE,Ae-Pe),ke=t.slice(Pe,Pe+Be);Pe+Be>=Ae&&(Ce+=", finalize");let Me=0,Fe=INITIAL_RETRY_DELAY_MS;for(;Me<MAX_RETRY_COUNT&&(Re=await r.request({path:"",body:ke,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":Ce,"X-Goog-Upload-Offset":String(Pe),"Content-Length":String(Be)}}}),!(!((xe=Re==null?void 0:Re.headers)===null||xe===void 0)&&xe[X_GOOG_UPLOAD_STATUS_HEADER_FIELD]));)Me++,await sleep$2(Fe),Fe=Fe*DELAY_MULTIPLIER;if(Pe+=Be,((Ee=Re==null?void 0:Re.headers)===null||Ee===void 0?void 0:Ee[X_GOOG_UPLOAD_STATUS_HEADER_FIELD])!=="active")break;if(Ae<=Pe)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return Re}async function getBlobStat(t){return{size:t.size,type:t.type}}function sleep$2(t){return new Promise(e=>setTimeout(e,t))}class BrowserUploader{async upload(e,r,xe){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await uploadBlob(e,r,xe)}async uploadToFileSearchStore(e,r,xe){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await uploadBlobToFileSearchStore(e,r,xe)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await getBlobStat(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BrowserWebSocketFactory{create(e,r,xe){return new BrowserWebSocket(e,r,xe)}}class BrowserWebSocket{constructor(e,r,xe){this.url=e,this.headers=r,this.callbacks=xe}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const GOOGLE_API_KEY_HEADER="x-goog-api-key";class WebAuth{constructor(e){this.apiKey=e}async addAuthHeaders(e,r){if(e.get(GOOGLE_API_KEY_HEADER)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(GOOGLE_API_KEY_HEADER,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LANGUAGE_LABEL_PREFIX="gl-node/";class GoogleGenAI{get interactions(){if(this._interactions!==void 0)return this._interactions;if(console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions."),this.vertexai)throw new Error("This version of the GenAI SDK does not support Vertex AI API for interactions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const r=new GeminiNextGenAPIClient({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=r.interactions,this._interactions}constructor(e){var r;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(r=e.vertexai)!==null&&r!==void 0?r:!1,this.apiKey=e.apiKey;const xe=getBaseUrl(e.httpOptions,e.vertexai,void 0,void 0);xe&&(e.httpOptions?e.httpOptions.baseUrl=xe:e.httpOptions={baseUrl:xe}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const Ee=new WebAuth(this.apiKey);this.apiClient=new ApiClient({auth:Ee,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:LANGUAGE_LABEL_PREFIX+"web",uploader:new BrowserUploader,downloader:new BrowserDownloader}),this.models=new Models(this.apiClient),this.live=new Live(this.apiClient,Ee,new BrowserWebSocketFactory),this.batches=new Batches(this.apiClient),this.chats=new Chats(this.models,this.apiClient),this.caches=new Caches(this.apiClient),this.files=new Files(this.apiClient),this.operations=new Operations(this.apiClient),this.authTokens=new Tokens(this.apiClient),this.tunings=new Tunings(this.apiClient),this.fileSearchStores=new FileSearchStores(this.apiClient)}}const isIsoDate=t=>typeof t=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(t),pad2=t=>t.toString().padStart(2,"0"),toIsoDateFromParts=(t,e,r)=>{if(!Number.isFinite(t)||!Number.isFinite(e)||!Number.isFinite(r)||t<1900||t>2200||e<1||e>12||r<1||r>31)return;const xe=`${t}-${pad2(e)}-${pad2(r)}`,Ee=new Date(`${xe}T00:00:00.000Z`);if(Number.isNaN(Ee.getTime()))return;const Ae=Ee.getUTCFullYear(),Pe=Ee.getUTCMonth()+1,Re=Ee.getUTCDate();if(!(Ae!==t||Pe!==e||Re!==r))return xe},parseDateToIso=t=>{if(t==null)return{hadInput:!1};const e=typeof t=="string"?t.trim():String(t).trim();if(!e)return{hadInput:!1};if(isIsoDate(e))return{iso:e,hadInput:!0};const r=e.match(/^(\d{1,2})[.\/-](\d{1,2})[.\/-](\d{2}|\d{4})$/);if(r){const Ae=Number(r[1]),Pe=Number(r[2]);let Re=Number(r[3]);return r[3].length===2&&(Re=Re<30?2e3+Re:1900+Re),{iso:toIsoDateFromParts(Re,Pe,Ae),hadInput:!0}}const xe=e.match(/^(\d{4})[.\/-](\d{1,2})[.\/-](\d{1,2})$/);if(xe){const Ae=Number(xe[1]),Pe=Number(xe[2]),Re=Number(xe[3]);return{iso:toIsoDateFromParts(Ae,Pe,Re),hadInput:!0}}const Ee=Date.parse(e);if(Number.isFinite(Ee)){const Ae=new Date(Ee),Pe=Ae.getFullYear(),Re=Ae.getMonth()+1,Ce=Ae.getDate();return{iso:toIsoDateFromParts(Pe,Re,Ce),hadInput:!0}}return{hadInput:!0}},toStringSafe=(t,e="")=>typeof t=="string"?t:t==null?e:String(t),parseNumber=t=>{if(typeof t=="number"&&Number.isFinite(t))return{ok:!0,value:t};if(t==null)return{ok:!1};const e=typeof t=="string"?t.trim():String(t).trim();if(!e)return{ok:!1};let r=e.replace(/\s|\u00A0/g,"").replace(/[$]|EUR|EURO/gi,"").replace(/[^0-9,.-]/g,"");if(!r)return{ok:!1};/^\(.*\)$/.test(r)&&(r=`-${r.slice(1,-1)}`);const xe=r.includes(","),Ee=r.includes(".");if(!xe&&/^-?\d{1,3}(\.\d{3})+$/.test(r)&&(r=r.replace(/\./g,"")),!Ee&&/^-?\d{1,3}(,\d{3})+$/.test(r)&&(r=r.replace(/,/g,"")),xe&&Ee){const Pe=r.lastIndexOf(","),Re=r.lastIndexOf(".");Pe>Re?r=r.replace(/\./g,"").replace(",","."):r=r.replace(/,/g,"")}else xe&&(r=r.replace(/\./g,"").replace(",","."));const Ae=Number(r);return Number.isFinite(Ae)?{ok:!0,value:Ae}:{ok:!1}},toNumberSafe=(t,e=0)=>{const r=parseNumber(t);return r.ok&&r.value!==void 0?r.value:e},toNumberMaybe=t=>{const e=parseNumber(t);return e.ok?e.value:void 0},toBooleanSafe=(t,e=!1)=>{if(typeof t=="boolean")return t;if(typeof t=="string"){const r=t.trim().toLowerCase();if(["true","1","yes","ja"].includes(r))return!0;if(["false","0","no","nein"].includes(r))return!1}return typeof t=="number"?t!==0:e},normalizeLineItems=t=>(Array.isArray(t)?t:t&&typeof t=="object"?[t]:[]).map(r=>{if(!r||typeof r!="object")return null;const xe=r,Ee=toStringSafe(xe.description,"").trim(),Ae=xe.amount===void 0||xe.amount===null?void 0:toNumberMaybe(xe.amount);return Ee?Ae===void 0?{description:Ee}:{description:Ee,amount:Ae}:null}).filter(r=>!!r),normalizeExtractedData=t=>{const e=t&&typeof t=="object"?t:{},r=[],xe=new Date().toISOString().split("T")[0],Ee=parseDateToIso(e.belegDatum),Ae=Ee.iso||xe;Ee.hadInput&&!Ee.iso&&r.push("Datum unklar  bitte prfen");const Pe=toNumberSafe(e.nettoBetrag,0),Re=toNumberSafe(e.mwstBetrag0,0),Ce=toNumberSafe(e.mwstBetrag7,0),Be=toNumberSafe(e.mwstBetrag19,0),ke=parseNumber(e.bruttoBetrag);let Me=ke.ok&&ke.value!==void 0?ke.value:0;const Fe=Re+Ce+Be,Ve=Pe+Fe,Oe=Pe>0,$e=Math.abs(Fe)>0,Ge=.05;if((Me===0||!ke.ok)&&Oe&&($e||Ve>0))Me=Math.round(Ve*100)/100;else if(Me>0&&Oe){const rn=Math.abs(Ve-Me);rn>Ge&&($e||Ve>0)&&r.push(`Summen widersprchlich (Netto+MwSt vs. Brutto, =${rn.toFixed(2)})  bitte prfen`)}const Ue=typeof e.documentType=="string"?e.documentType:void 0,Qe=[e.ocr_rationale!==void 0?toStringSafe(e.ocr_rationale,""):void 0,...r.length?[r.join(". ")]:[]].filter(rn=>typeof rn=="string"&&rn.trim().length>0).join(" | ")||void 0;return{documentType:Ue,belegDatum:Ae,belegNummerLieferant:toStringSafe(e.belegNummerLieferant,""),lieferantName:toStringSafe(e.lieferantName,""),lieferantAdresse:toStringSafe(e.lieferantAdresse,""),steuernummer:toStringSafe(e.steuernummer,""),nettoBetrag:Pe,mwstSatz0:toNumberSafe(e.mwstSatz0,0),mwstBetrag0:Re,mwstSatz7:toNumberSafe(e.mwstSatz7,0),mwstBetrag7:Ce,mwstSatz19:toNumberSafe(e.mwstSatz19,0),mwstBetrag19:Be,bruttoBetrag:Me,zahlungsmethode:toStringSafe(e.zahlungsmethode,""),lineItems:normalizeLineItems(e.lineItems),kontierungskonto:e.kontierungskonto?toStringSafe(e.kontierungskonto,""):void 0,steuerkategorie:e.steuerkategorie?toStringSafe(e.steuerkategorie,""):void 0,kontierungBegruendung:e.kontierungBegruendung?toStringSafe(e.kontierungBegruendung,""):void 0,kontogruppe:toStringSafe(e.kontogruppe,""),konto_skr03:toStringSafe(e.konto_skr03,""),ust_typ:toStringSafe(e.ust_typ,""),sollKonto:toStringSafe(e.sollKonto,""),habenKonto:toStringSafe(e.habenKonto,""),steuerKategorie:toStringSafe(e.steuerKategorie,""),eigeneBelegNummer:toStringSafe(e.eigeneBelegNummer,""),zahlungsDatum:toStringSafe(e.zahlungsDatum,""),zahlungsStatus:toStringSafe(e.zahlungsStatus,""),aufbewahrungsOrt:toStringSafe(e.aufbewahrungsOrt,""),rechnungsEmpfaenger:toStringSafe(e.rechnungsEmpfaenger,""),kleinbetrag:toBooleanSafe(e.kleinbetrag,!1),vorsteuerabzug:toBooleanSafe(e.vorsteuerabzug,!1),reverseCharge:toBooleanSafe(e.reverseCharge,!1),privatanteil:toBooleanSafe(e.privatanteil,!1),beschreibung:toStringSafe(e.beschreibung,""),textContent:e.textContent!==void 0?toStringSafe(e.textContent,""):void 0,qualityScore:e.qualityScore!==void 0?toNumberSafe(e.qualityScore,0):void 0,ocr_score:e.ocr_score!==void 0?toNumberSafe(e.ocr_score,0):void 0,ocr_rationale:Qe,ruleApplied:e.ruleApplied!==void 0?toBooleanSafe(e.ruleApplied,!1):void 0}},getPdfJs=()=>{const t=pdfjsLib;return t.default&&t.default.getDocument?t.default:t.getDocument?t:t.default||t},pdf=getPdfJs();if(pdf&&pdf.GlobalWorkerOptions)try{pdf.GlobalWorkerOptions.workerSrc="https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js"}catch(t){console.warn("Failed to set PDF worker source:",t)}const SF_API_KEY="sk-iawnupcgvjfhbcgmyjdgarnuznulqtvphzyspsrwsfyspply",SF_API_URL="https://api.siliconflow.com/v1/chat/completions",SF_MAX_PDF_PAGES=3,SF_MAX_PDF_BYTES=12*1024*1024,SF_VISION_MODEL="Qwen/Qwen2.5-VL-72B-Instruct",SYSTEM_PROMPT_VISION=`
You are a professional Accounting AI OCR.
Your task is to extract invoice data from the provided image with 100% precision.

CRITICAL:
- Look for "Gesamtbetrag", "Rechnungsbetrag", "Zahlbetrag".
- Verify mathematically: Net + Tax = Gross.
- If multiple pages are stitched together, analyze ALL of them.

Output strictly valid JSON:
{
  "belegDatum": "YYYY-MM-DD",
  "belegNummerLieferant": "string",
  "lieferantName": "string",
  "lieferantAdresse": "string",
  "steuernummer": "string",
  "nettoBetrag": number,
  "mwstSatz0": number,
  "mwstBetrag0": number,
  "mwstSatz7": number,
  "mwstBetrag7": number,
  "mwstSatz19": number,
  "mwstBetrag19": number,
  "bruttoBetrag": number,
  "zahlungsmethode": "string",
  "lineItems": [ { "description": "string", "amount": number } ],
  "textContent": "string (brief keywords summary)",
  "beschreibung": "string (German summary)"
}
`;async function convertPdfToStitchedImage(t){try{if(!pdf||!pdf.getDocument)throw new Error("PDF.js library not correctly initialized.");if(Math.floor(t.length*3/4)>SF_MAX_PDF_BYTES)throw new Error(`PDF ist zu gro fr OCR-Stitching (>${Math.round(SF_MAX_PDF_BYTES/(1024*1024))}MB). Bitte PDF verkleinern oder Seiten splitten.`);const r=atob(t),xe=r.length,Ee=new Uint8Array(xe);for(let Oe=0;Oe<xe;Oe++)Ee[Oe]=r.charCodeAt(Oe);const Pe=await pdf.getDocument({data:Ee}).promise,Re=Math.min(Pe.numPages,SF_MAX_PDF_PAGES),Ce=[];let Be=0,ke=0;for(let Oe=1;Oe<=Re;Oe++){const $e=await Pe.getPage(Oe),Ge=$e.getViewport({scale:2}),Ue=document.createElement("canvas");Ue.width=Ge.width,Ue.height=Ge.height;const Ye=Ue.getContext("2d");if(!Ye)continue;await $e.render({canvasContext:Ye,viewport:Ge}).promise;const Qe=await createImageBitmap(Ue);Ce.push({img:Qe,width:Ge.width,height:Ge.height}),Be+=Ge.height,ke=Math.max(ke,Ge.width)}const Me=document.createElement("canvas");Me.width=ke,Me.height=Be;const Fe=Me.getContext("2d");if(!Fe)throw new Error("Canvas context failed");Fe.fillStyle="#FFFFFF",Fe.fillRect(0,0,ke,Be);let Ve=0;for(const Oe of Ce)Fe.drawImage(Oe.img,0,Ve),Ve+=Oe.height,Fe.beginPath(),Fe.moveTo(0,Ve),Fe.lineTo(ke,Ve),Fe.strokeStyle="#cccccc",Fe.stroke();return Me.toDataURL("image/jpeg",.85).split(",")[1]}catch(e){console.error("PDF Stitching failed:",e);const r=e instanceof Error?e.message:String(e);throw new Error(r||"PDF konnte nicht fr OCR konvertiert werden.")}}const summarize=(t,e=280)=>{const r=(t||"").replace(/\s+/g," ").trim();return r.length>e?r.slice(0,e)+"":r},toUserFriendlyFallbackReason=t=>{const e=t instanceof Error?t.message:String(t),r=summarize(e);return r?r.toLowerCase().includes("api key")||r.includes("SILICONFLOW_API_KEY")?"SiliconFlow nicht konfiguriert: SILICONFLOW_API_KEY in .env setzen und neu laden.":r.includes("PDF ist zu gro")?r:r.toLowerCase().includes("pdf.js")||r.toLowerCase().includes("pdf")?r.includes("Bitte")?r:"PDF konnte nicht fr OCR verarbeitet werden. Bitte PDF verkleinern oder in einzelne Seiten splitten.":r.startsWith("Vision API Error")?`SiliconFlow Vision API Fehler: ${r}`:r.toLowerCase().includes("empty response")?"SiliconFlow lieferte keine verwertbare Antwort.":`Fallback fehlgeschlagen: ${r}`:"Fallback fehlgeschlagen. Bitte manuell erfassen."};async function analyzeWithVisionModel(t,e){var Be,ke,Me;let r=t;e==="application/pdf"&&(r=await convertPdfToStitchedImage(t));const xe=await fetch(SF_API_URL,{method:"POST",headers:{Authorization:`Bearer ${SF_API_KEY}`,"Content-Type":"application/json"},body:JSON.stringify({model:SF_VISION_MODEL,messages:[{role:"user",content:[{type:"text",text:SYSTEM_PROMPT_VISION},{type:"image_url",image_url:{url:`data:image/jpeg;base64,${r}`}}]}],temperature:.1,max_tokens:2048})});if(!xe.ok){const Fe=await xe.text();throw new Error(`Vision API Error (${xe.status}): ${Fe}`)}let Ae=(Me=(ke=(Be=(await xe.json()).choices)==null?void 0:Be[0])==null?void 0:ke.message)==null?void 0:Me.content;if(!Ae)throw new Error("Empty response from Vision Model");Ae=Ae.trim(),Ae.includes("```json")?Ae=Ae.split("```json")[1].split("```")[0]:Ae.includes("```")&&(Ae=Ae.split("```")[1].split("```")[0]);const Pe=Ae.indexOf("{"),Re=Ae.lastIndexOf("}");Pe!==-1&&Re!==-1&&(Ae=Ae.substring(Pe,Re+1));const Ce=JSON.parse(Ae);return normalizeExtractedData(Ce)}const analyzeDocumentWithFallback=async(t,e)=>{const r={belegDatum:new Date().toISOString().split("T")[0],lieferantName:"Manuelle Eingabe erforderlich",bruttoBetrag:0,textContent:"",beschreibung:"KI Analyse fehlgeschlagen.",ocr_score:0,ocr_rationale:"Fallback fehlgeschlagen. Bitte manuell erfassen."};try{return{...await analyzeWithVisionModel(t,e),ocr_rationale:"Fallback: Vision AI (High Res)",ocr_score:8}}catch(xe){console.error("Vision AI Fallback Failed:",xe);const Ee=toUserFriendlyFallbackReason(xe);return{...r,beschreibung:"Analyse fehlgeschlagen. Bitte manuell erfassen.",ocr_rationale:Ee}}},ai=new GoogleGenAI({apiKey:"AIzaSyBaH6sO1vVs14N1tZinSBG3QFtynF6OUWk"}),accountingSchema={type:Type.OBJECT,properties:{belegDatum:{type:Type.STRING,description:"YYYY-MM-DD"},belegNummerLieferant:{type:Type.STRING},lieferantName:{type:Type.STRING},lieferantAdresse:{type:Type.STRING},steuernummer:{type:Type.STRING},nettoBetrag:{type:Type.NUMBER},mwstSatz0:{type:Type.NUMBER},mwstBetrag0:{type:Type.NUMBER},mwstSatz7:{type:Type.NUMBER},mwstBetrag7:{type:Type.NUMBER},mwstSatz19:{type:Type.NUMBER},mwstBetrag19:{type:Type.NUMBER},bruttoBetrag:{type:Type.NUMBER,description:"The final total amount (Zahlbetrag)"},zahlungsmethode:{type:Type.STRING},lineItems:{type:Type.ARRAY,items:{type:Type.OBJECT,properties:{description:{type:Type.STRING},amount:{type:Type.NUMBER}}}},textContent:{type:Type.STRING,description:"Summary of visible text for categorization keywords"},beschreibung:{type:Type.STRING},kontogruppe:{type:Type.STRING,description:"Calculated by rule engine later"}},required:["belegDatum","lieferantName","bruttoBetrag"]},SYSTEM_INSTRUCTION=`
You are an elite German Accounting Data Extraction AI.
Your goal is 100% ACCURACY for "Bruttobetrag" (Total Amount).

CRITICAL EXTRACTION PROTOCOL:
1. **Find the Total**: Look for keywords: "Zahlbetrag", "Gesamtbetrag", "Rechnungsbetrag", "Summe". It is usually the last number at the bottom right, often bold.
2. **Math Check**: Identify Netto and VAT (MwSt). Verify: Netto + MwSt = Brutto.
   - If they match exactly, confidence is high.
   - If they do NOT match, trust the explicitly printed "Zahlbetrag" over the sum of line items.
   - Watch out for "Pfand" or "Rabatt" which might affect the total.
3. **Common Pitfalls**:
   - Do NOT confuse the "Unterschrift" date with the "Belegdatum".
   - Do NOT confuse the "Kunden-Nr" with the "Rechnungs-Nr".
   - 5 vs 6 vs 8: Look closely at the pixel structure.
   - 1 vs 7: Look for the crossbar.

DATA STANDARDS:
- Dates: YYYY-MM-DD only.
- Numbers: Float format (12.99). Use dots, no commas.
- Tax: Distinguish 0%, 7%, 19%. Put 0% or "Steuerfrei" in mwstSatz0.
- Language: Summaries in German.
`,delay=t=>new Promise(e=>setTimeout(e,t));async function generateWithRetry(t,e,r,xe=1){var Ee,Ae,Pe;try{return await ai.models.generateContent({model:t,contents:e,config:r})}catch(Re){if((Re.status===429||Re.status===503||((Ee=Re.message)==null?void 0:Ee.includes("429"))||((Ae=Re.message)==null?void 0:Ae.includes("503"))||((Pe=Re.message)==null?void 0:Pe.includes("Quota")))&&xe>0)return console.warn("Gemini busy (429/503). Retrying once in 1500ms..."),await delay(1500),generateWithRetry(t,e,r,xe-1);throw Re}}const analyzeDocumentWithGemini=async(t,e)=>{try{const xe=(await generateWithRetry("gemini-2.5-flash",{parts:[{inlineData:{mimeType:e,data:t}},{text:"Extract accounting data accurately. Double check the Total Amount."}]},{systemInstruction:SYSTEM_INSTRUCTION,responseMimeType:"application/json",responseSchema:accountingSchema,temperature:0})).text;if(!xe)throw new Error("No response from AI");let Ee=xe.trim();Ee.startsWith("```json")?Ee=Ee.replace(/^```json/,"").replace(/```$/,""):Ee.startsWith("```")&&(Ee=Ee.replace(/^```/,"").replace(/```$/,""));let Ae;try{Ae=JSON.parse(Ee)}catch(Pe){throw new Error(`JSON parse error: ${Pe.message}. Raw response: ${Ee.substring(0,200)}...`)}return normalizeExtractedData(Ae)}catch(r){console.warn("Gemini OCR Error (or Quota limit). Switching to Fallback Service immediately.",r);const xe=(()=>{const Ce=r!=null&&r.status?` (HTTP ${r.status})`:"";return(((typeof(r==null?void 0:r.message)=="string"?r.message:"")||"Unbekannter Fehler").replace(/\s+/g," ").trim()+Ce).trim()})(),Ee=await analyzeDocumentWithFallback(t,e),Ae=normalizeExtractedData(Ee),Pe=Ae.ocr_rationale?Ae.ocr_rationale.trim():"",Re=`Gemini fehlgeschlagen: ${xe}`;return Ae.ocr_rationale=Pe?`${Re} | ${Pe}`:Re,Ae}},generateZoeInvoiceId=(t,e)=>{if(!t)return"";try{const r=new Date(t);if(isNaN(r.getTime()))return"";const xe=r.getFullYear().toString().slice(-2),Ee=(r.getMonth()+1).toString().padStart(2,"0"),Ae=`ZOE${xe}${Ee}`;let Pe=0;return e.forEach(Re=>{var Be;const Ce=((Be=Re.data)==null?void 0:Be.eigeneBelegNummer)||"";if(Ce.startsWith(Ae)){const ke=Ce.split(".");if(ke.length>1){const Me=parseInt(ke[1],10);!isNaN(Me)&&Me>Pe&&(Pe=Me)}}}),`${Ae}.${(Pe+1).toString().padStart(3,"0")}`}catch(r){return console.warn("generateZoeInvoiceId: Fehler bei der Belegnummer-Generierung",r),""}},calculateOCRScore=(t,e)=>{let r=10;const xe=[];t.belegDatum||(r-=2,xe.push("Datum fehlt (-2)")),(!t.lieferantName||t.lieferantName.length<3)&&(r-=2,xe.push("Lieferant unklar (-2)")),!t.bruttoBetrag&&t.bruttoBetrag!==0&&(r-=3,xe.push("Betrag fehlt (-3)"));const Ee=(t.mwstBetrag19||0)>0;if((t.mwstBetrag7||0)>0,Ee&&t.steuerkategorie==="0_pv"&&(r-=2,xe.push("Steuerkonflikt: 19% erkannt aber 0% gewhlt (-2)")),t.nettoBetrag&&t.bruttoBetrag){const Ae=t.nettoBetrag+(t.mwstBetrag19||0)+(t.mwstBetrag7||0);Math.abs(Ae-t.bruttoBetrag)>.05&&(r-=2,xe.push("Rechenfehler Summe (-2)"))}return r=Math.max(0,Math.min(10,r)),{score:r,rationale:xe.join(", ")||"Perfekt"}},PV_MATERIAL_KEYWORDS=["modul","solar","panel","kabel","leitung","stecker","mc4","schiene","profil","dachhaken","schraube","klemme","wechselrichter","inverter","speicher","batterie","akku","montage","lieferung","fracht","spedition","versand","material","baustoff","unterkonstruktion","ziegel","lfter"],determineAccount=(t,e)=>{var Ae;const r=((t.lieferantName||"")+" "+(t.textContent||"")+" "+(t.beschreibung||"")+" "+(((Ae=t.lineItems)==null?void 0:Ae.map(Pe=>Pe.description).join(" "))||"")).toLowerCase(),xe=new Map(e.map(Pe=>[Pe.id,Pe])),Ee=PV_MATERIAL_KEYWORDS.find(Pe=>r.includes(Pe));if(Ee){const Pe=xe.get("wareneingang");if(Pe)return{account:Pe,reason:`Material-Stichwort erkannt (z.B. "${Ee}") -> Wareneingang/Material.`}}for(const Pe of e)if(r.includes(Pe.name.toLowerCase()))return{account:Pe,reason:`Kontoname im Text gefunden: "${Pe.name}".`};return r.includes("tank")||r.includes("aral")||r.includes("shell")||r.includes("jet ")?{account:xe.get("fuhrpark")||null,reason:'Heuristik: Kraftstoff/Auto (z.B. "aral/shell/tank").'}:r.includes("adobe")||r.includes("software")||r.includes("google")?{account:xe.get("software")||null,reason:'Heuristik: Software/Lizenzen (z.B. "adobe/software/google").'}:r.includes("telekom")||r.includes("o2")||r.includes("vodafone")?{account:xe.get("internet")||null,reason:'Heuristik: Internet/Telefon (z.B. "telekom/vodafone").'}:{account:null}},applyAccountingRules=(t,e,r,xe)=>{var Be,ke;const Ee={...t},Ae=r.accountDefinitions||[];r.taxDefinitions;let Pe=null,Re;if(xe!=null&&xe.accountId)if(Pe=Ae.find(Me=>Me.id===xe.accountId),Pe){Ee.ruleApplied=!0;const Me=(Ee.lieferantName||"").trim();Re=Me?`Aus gespeicherter Lieferanten-Regel fr "${Me}".`:"Aus gespeicherter Lieferanten-Regel."}else Re="Lieferanten-Regel verweist auf unbekanntes Konto; Heuristik/Fallback verwendet.";if(!Pe){const Me=determineAccount(Ee,Ae);Pe=Me.account,Re=Me.reason}if(Pe?(Ee.kontierungskonto=Pe.id,Ee.kontogruppe=Pe.name,Re&&(Ee.kontierungBegruendung=Re),Ee.sollKonto=Pe.skr03||"0000",(Be=Ee.zahlungsmethode)!=null&&Be.toLowerCase().includes("paypal")?Ee.habenKonto="1200":(ke=Ee.zahlungsmethode)!=null&&ke.toLowerCase().includes("bar")?Ee.habenKonto="1000":Ee.habenKonto="1200"):(Ee.kontierungskonto="sonstiges",Ee.kontogruppe="Sonstiges",Ee.sollKonto="4900",Ee.habenKonto="1200",Ee.kontierungBegruendung=Re||'Kein Konto-Match; Standardkonto "Sonstiges".'),xe!=null&&xe.taxCategoryValue)Ee.steuerkategorie=xe.taxCategoryValue;else if(Pe&&Pe.steuerkategorien.length===1)Ee.steuerkategorie=Pe.steuerkategorien[0];else{const Me=(t.mwstBetrag19||0)>0,Fe=(t.mwstBetrag7||0)>0,Ve=(t.mwstBetrag0||0)>0||t.mwstBetrag19===0&&t.mwstBetrag7===0&&t.bruttoBetrag>0;Me?Ee.steuerkategorie="19_pv":Fe?Ee.steuerkategorie="7_pv":Ve?Ee.steuerkategorie="0_pv":Ee.steuerkategorie="19_pv"}const Ce=calculateOCRScore(Ee);return Ee.ocr_score=Ce.score,Ee.ocr_rationale=Ce.rationale,Ee};function __rest(t,e){var r={};for(var xe in t)Object.prototype.hasOwnProperty.call(t,xe)&&e.indexOf(xe)<0&&(r[xe]=t[xe]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ee=0,xe=Object.getOwnPropertySymbols(t);Ee<xe.length;Ee++)e.indexOf(xe[Ee])<0&&Object.prototype.propertyIsEnumerable.call(t,xe[Ee])&&(r[xe[Ee]]=t[xe[Ee]]);return r}function __awaiter(t,e,r,xe){function Ee(Ae){return Ae instanceof r?Ae:new r(function(Pe){Pe(Ae)})}return new(r||(r=Promise))(function(Ae,Pe){function Re(ke){try{Be(xe.next(ke))}catch(Me){Pe(Me)}}function Ce(ke){try{Be(xe.throw(ke))}catch(Me){Pe(Me)}}function Be(ke){ke.done?Ae(ke.value):Ee(ke.value).then(Re,Ce)}Be((xe=xe.apply(t,e||[])).next())})}typeof SuppressedError=="function"&&SuppressedError;const resolveFetch$3=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class FunctionsError extends Error{constructor(e,r="FunctionsError",xe){super(e),this.name=r,this.context=xe}}class FunctionsFetchError extends FunctionsError{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class FunctionsRelayError extends FunctionsError{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class FunctionsHttpError extends FunctionsError{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var FunctionRegion;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(FunctionRegion||(FunctionRegion={}));class FunctionsClient{constructor(e,{headers:r={},customFetch:xe,region:Ee=FunctionRegion.Any}={}){this.url=e,this.headers=r,this.region=Ee,this.fetch=resolveFetch$3(xe)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return __awaiter(this,arguments,void 0,function*(r,xe={}){var Ee;let Ae,Pe;try{const{headers:Re,method:Ce,body:Be,signal:ke,timeout:Me}=xe;let Fe={},{region:Ve}=xe;Ve||(Ve=this.region);const Oe=new URL(`${this.url}/${r}`);Ve&&Ve!=="any"&&(Fe["x-region"]=Ve,Oe.searchParams.set("forceFunctionRegion",Ve));let $e;Be&&(Re&&!Object.prototype.hasOwnProperty.call(Re,"Content-Type")||!Re)?typeof Blob<"u"&&Be instanceof Blob||Be instanceof ArrayBuffer?(Fe["Content-Type"]="application/octet-stream",$e=Be):typeof Be=="string"?(Fe["Content-Type"]="text/plain",$e=Be):typeof FormData<"u"&&Be instanceof FormData?$e=Be:(Fe["Content-Type"]="application/json",$e=JSON.stringify(Be)):$e=Be;let Ge=ke;Me&&(Pe=new AbortController,Ae=setTimeout(()=>Pe.abort(),Me),ke?(Ge=Pe.signal,ke.addEventListener("abort",()=>Pe.abort())):Ge=Pe.signal);const Ue=yield this.fetch(Oe.toString(),{method:Ce||"POST",headers:Object.assign(Object.assign(Object.assign({},Fe),this.headers),Re),body:$e,signal:Ge}).catch(tn=>{throw new FunctionsFetchError(tn)}),Ye=Ue.headers.get("x-relay-error");if(Ye&&Ye==="true")throw new FunctionsRelayError(Ue);if(!Ue.ok)throw new FunctionsHttpError(Ue);let Qe=((Ee=Ue.headers.get("Content-Type"))!==null&&Ee!==void 0?Ee:"text/plain").split(";")[0].trim(),rn;return Qe==="application/json"?rn=yield Ue.json():Qe==="application/octet-stream"||Qe==="application/pdf"?rn=yield Ue.blob():Qe==="text/event-stream"?rn=Ue:Qe==="multipart/form-data"?rn=yield Ue.formData():rn=yield Ue.text(),{data:rn,error:null,response:Ue}}catch(Re){return{data:null,error:Re,response:Re instanceof FunctionsHttpError||Re instanceof FunctionsRelayError?Re.context:void 0}}finally{Ae&&clearTimeout(Ae)}})}}var PostgrestError=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},PostgrestBuilder=class{constructor(t){var e,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const xe=this.fetch;let Ee=xe(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async Ae=>{let Pe=null,Re=null,Ce=null,Be=Ae.status,ke=Ae.statusText;if(Ae.ok){var Me,Fe;if(r.method!=="HEAD"){var Ve;const Ue=await Ae.text();Ue===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((Ve=r.headers.get("Accept"))===null||Ve===void 0)&&Ve.includes("application/vnd.pgrst.plan+text"))?Re=Ue:Re=JSON.parse(Ue))}const $e=(Me=r.headers.get("Prefer"))===null||Me===void 0?void 0:Me.match(/count=(exact|planned|estimated)/),Ge=(Fe=Ae.headers.get("content-range"))===null||Fe===void 0?void 0:Fe.split("/");$e&&Ge&&Ge.length>1&&(Ce=parseInt(Ge[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(Re)&&(Re.length>1?(Pe={code:"PGRST116",details:`Results contain ${Re.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},Re=null,Ce=null,Be=406,ke="Not Acceptable"):Re.length===1?Re=Re[0]:Re=null)}else{var Oe;const $e=await Ae.text();try{Pe=JSON.parse($e),Array.isArray(Pe)&&Ae.status===404&&(Re=[],Pe=null,Be=200,ke="OK")}catch{Ae.status===404&&$e===""?(Be=204,ke="No Content"):Pe={message:$e}}if(Pe&&r.isMaybeSingle&&(!(Pe==null||(Oe=Pe.details)===null||Oe===void 0)&&Oe.includes("0 rows"))&&(Pe=null,Be=200,ke="OK"),Pe&&r.shouldThrowOnError)throw new PostgrestError(Pe)}return{error:Pe,data:Re,count:Ce,status:Be,statusText:ke}});return this.shouldThrowOnError||(Ee=Ee.catch(Ae=>{var Pe;let Re="";const Ce=Ae==null?void 0:Ae.cause;if(Ce){var Be,ke,Me,Fe;const Oe=(Be=Ce==null?void 0:Ce.message)!==null&&Be!==void 0?Be:"",$e=(ke=Ce==null?void 0:Ce.code)!==null&&ke!==void 0?ke:"";Re=`${(Me=Ae==null?void 0:Ae.name)!==null&&Me!==void 0?Me:"FetchError"}: ${Ae==null?void 0:Ae.message}`,Re+=`

Caused by: ${(Fe=Ce==null?void 0:Ce.name)!==null&&Fe!==void 0?Fe:"Error"}: ${Oe}`,$e&&(Re+=` (${$e})`),Ce!=null&&Ce.stack&&(Re+=`
${Ce.stack}`)}else{var Ve;Re=(Ve=Ae==null?void 0:Ae.stack)!==null&&Ve!==void 0?Ve:""}return{error:{message:`${(Pe=Ae==null?void 0:Ae.name)!==null&&Pe!==void 0?Pe:"FetchError"}: ${Ae==null?void 0:Ae.message}`,details:Re,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),Ee.then(t,e)}returns(){return this}overrideTypes(){return this}},PostgrestTransformBuilder=class extends PostgrestBuilder{select(t){let e=!1;const r=(t??"*").split("").map(xe=>/\s/.test(xe)&&!e?"":(xe==='"'&&(e=!e),xe)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:xe,referencedTable:Ee=xe}={}){const Ae=Ee?`${Ee}.order`:"order",Pe=this.url.searchParams.get(Ae);return this.url.searchParams.set(Ae,`${Pe?`${Pe},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){const xe=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(xe,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:xe=r}={}){const Ee=typeof xe>"u"?"offset":`${xe}.offset`,Ae=typeof xe>"u"?"limit":`${xe}.limit`;return this.url.searchParams.set(Ee,`${t}`),this.url.searchParams.set(Ae,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:xe=!1,wal:Ee=!1,format:Ae="text"}={}){var Pe;const Re=[t?"analyze":null,e?"verbose":null,r?"settings":null,xe?"buffers":null,Ee?"wal":null].filter(Boolean).join("|"),Ce=(Pe=this.headers.get("Accept"))!==null&&Pe!==void 0?Pe:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${Ae}; for="${Ce}"; options=${Re};`),Ae==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const PostgrestReservedCharsRegexp=new RegExp("[,()]");var PostgrestFilterBuilder=class extends PostgrestTransformBuilder{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const r=Array.from(new Set(e)).map(xe=>typeof xe=="string"&&PostgrestReservedCharsRegexp.test(xe)?`"${xe}"`:`${xe}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}notIn(t,e){const r=Array.from(new Set(e)).map(xe=>typeof xe=="string"&&PostgrestReservedCharsRegexp.test(xe)?`"${xe}"`:`${xe}`).join(",");return this.url.searchParams.append(t,`not.in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:xe}={}){let Ee="";xe==="plain"?Ee="pl":xe==="phrase"?Ee="ph":xe==="websearch"&&(Ee="w");const Ae=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${Ee}fts${Ae}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){const xe=r?`${r}.or`:"or";return this.url.searchParams.append(xe,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}},PostgrestQueryBuilder=class{constructor(t,{headers:e={},schema:r,fetch:xe}){this.url=t,this.headers=new Headers(e),this.schema=r,this.fetch=xe}select(t,e){const{head:r=!1,count:xe}=e??{},Ee=r?"HEAD":"GET";let Ae=!1;const Pe=(t??"*").split("").map(Re=>/\s/.test(Re)&&!Ae?"":(Re==='"'&&(Ae=!Ae),Re)).join("");return this.url.searchParams.set("select",Pe),xe&&this.headers.append("Prefer",`count=${xe}`),new PostgrestFilterBuilder({method:Ee,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:r=!0}={}){var xe;const Ee="POST";if(e&&this.headers.append("Prefer",`count=${e}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const Ae=t.reduce((Pe,Re)=>Pe.concat(Object.keys(Re)),[]);if(Ae.length>0){const Pe=[...new Set(Ae)].map(Re=>`"${Re}"`);this.url.searchParams.set("columns",Pe.join(","))}}return new PostgrestFilterBuilder({method:Ee,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(xe=this.fetch)!==null&&xe!==void 0?xe:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:xe,defaultToNull:Ee=!0}={}){var Ae;const Pe="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),xe&&this.headers.append("Prefer",`count=${xe}`),Ee||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const Re=t.reduce((Ce,Be)=>Ce.concat(Object.keys(Be)),[]);if(Re.length>0){const Ce=[...new Set(Re)].map(Be=>`"${Be}"`);this.url.searchParams.set("columns",Ce.join(","))}}return new PostgrestFilterBuilder({method:Pe,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(Ae=this.fetch)!==null&&Ae!==void 0?Ae:fetch})}update(t,{count:e}={}){var r;const xe="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new PostgrestFilterBuilder({method:xe,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var e;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new PostgrestFilterBuilder({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},PostgrestClient=class j0{constructor(e,{headers:r={},schema:xe,fetch:Ee}={}){this.url=e,this.headers=new Headers(r),this.schemaName=xe,this.fetch=Ee}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new PostgrestQueryBuilder(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new j0(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:xe=!1,get:Ee=!1,count:Ae}={}){var Pe;let Re;const Ce=new URL(`${this.url}/rpc/${e}`);let Be;xe||Ee?(Re=xe?"HEAD":"GET",Object.entries(r).filter(([Me,Fe])=>Fe!==void 0).map(([Me,Fe])=>[Me,Array.isArray(Fe)?`{${Fe.join(",")}}`:`${Fe}`]).forEach(([Me,Fe])=>{Ce.searchParams.append(Me,Fe)})):(Re="POST",Be=r);const ke=new Headers(this.headers);return Ae&&ke.set("Prefer",`count=${Ae}`),new PostgrestFilterBuilder({method:Re,url:Ce,headers:ke,schema:this.schemaName,body:Be,fetch:(Pe=this.fetch)!==null&&Pe!==void 0?Pe:fetch})}};class WebSocketFactory{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const xe=r.node,Ee=parseInt(xe.replace(/^v/,"").split(".")[0]);return Ee>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${Ee} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${Ee} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const xe=this.getWebSocketConstructor();return new xe(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const version$3="2.89.0",DEFAULT_VERSION=`realtime-js/${version$3}`,VSN_1_0_0="1.0.0",VSN_2_0_0="2.0.0",DEFAULT_VSN=VSN_1_0_0,DEFAULT_TIMEOUT=1e4,WS_CLOSE_NORMAL=1e3,MAX_PUSH_BUFFER_SIZE=100;var SOCKET_STATES;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(SOCKET_STATES||(SOCKET_STATES={}));var CHANNEL_STATES;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(CHANNEL_STATES||(CHANNEL_STATES={}));var CHANNEL_EVENTS;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(CHANNEL_EVENTS||(CHANNEL_EVENTS={}));var TRANSPORTS;(function(t){t.websocket="websocket"})(TRANSPORTS||(TRANSPORTS={}));var CONNECTION_STATE;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(CONNECTION_STATE||(CONNECTION_STATE={}));class Serializer{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let xe=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(xe))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,xe;const Ee=(xe=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&xe!==void 0?xe:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,Ee)}_encodeJsonUserBroadcastPush(e){var r,xe;const Ee=(xe=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&xe!==void 0?xe:{},Pe=new TextEncoder().encode(JSON.stringify(Ee)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,Pe)}_encodeUserBroadcastPush(e,r,xe){var Ee,Ae;const Pe=e.topic,Re=(Ee=e.ref)!==null&&Ee!==void 0?Ee:"",Ce=(Ae=e.join_ref)!==null&&Ae!==void 0?Ae:"",Be=e.payload.event,ke=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},Me=Object.keys(ke).length===0?"":JSON.stringify(ke);if(Ce.length>255)throw new Error(`joinRef length ${Ce.length} exceeds maximum of 255`);if(Re.length>255)throw new Error(`ref length ${Re.length} exceeds maximum of 255`);if(Pe.length>255)throw new Error(`topic length ${Pe.length} exceeds maximum of 255`);if(Be.length>255)throw new Error(`userEvent length ${Be.length} exceeds maximum of 255`);if(Me.length>255)throw new Error(`metadata length ${Me.length} exceeds maximum of 255`);const Fe=this.USER_BROADCAST_PUSH_META_LENGTH+Ce.length+Re.length+Pe.length+Be.length+Me.length,Ve=new ArrayBuffer(this.HEADER_LENGTH+Fe);let Oe=new DataView(Ve),$e=0;Oe.setUint8($e++,this.KINDS.userBroadcastPush),Oe.setUint8($e++,Ce.length),Oe.setUint8($e++,Re.length),Oe.setUint8($e++,Pe.length),Oe.setUint8($e++,Be.length),Oe.setUint8($e++,Me.length),Oe.setUint8($e++,r),Array.from(Ce,Ue=>Oe.setUint8($e++,Ue.charCodeAt(0))),Array.from(Re,Ue=>Oe.setUint8($e++,Ue.charCodeAt(0))),Array.from(Pe,Ue=>Oe.setUint8($e++,Ue.charCodeAt(0))),Array.from(Be,Ue=>Oe.setUint8($e++,Ue.charCodeAt(0))),Array.from(Me,Ue=>Oe.setUint8($e++,Ue.charCodeAt(0)));var Ge=new Uint8Array(Ve.byteLength+xe.byteLength);return Ge.set(new Uint8Array(Ve),0),Ge.set(new Uint8Array(xe),Ve.byteLength),Ge.buffer}decode(e,r){if(this._isArrayBuffer(e)){let xe=this._binaryDecode(e);return r(xe)}if(typeof e=="string"){const xe=JSON.parse(e),[Ee,Ae,Pe,Re,Ce]=xe;return r({join_ref:Ee,ref:Ae,topic:Pe,event:Re,payload:Ce})}return r({})}_binaryDecode(e){const r=new DataView(e),xe=r.getUint8(0),Ee=new TextDecoder;switch(xe){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,Ee)}}_decodeUserBroadcast(e,r,xe){const Ee=r.getUint8(1),Ae=r.getUint8(2),Pe=r.getUint8(3),Re=r.getUint8(4);let Ce=this.HEADER_LENGTH+4;const Be=xe.decode(e.slice(Ce,Ce+Ee));Ce=Ce+Ee;const ke=xe.decode(e.slice(Ce,Ce+Ae));Ce=Ce+Ae;const Me=xe.decode(e.slice(Ce,Ce+Pe));Ce=Ce+Pe;const Fe=e.slice(Ce,e.byteLength),Ve=Re===this.JSON_ENCODING?JSON.parse(xe.decode(Fe)):Fe,Oe={type:this.BROADCAST_EVENT,event:ke,payload:Ve};return Pe>0&&(Oe.meta=JSON.parse(Me)),{join_ref:null,ref:null,topic:Be,event:this.BROADCAST_EVENT,payload:Oe}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([xe])=>r.includes(xe)))}}class Timer{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var PostgresTypes;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(PostgresTypes||(PostgresTypes={}));const convertChangeData=(t,e,r={})=>{var xe;const Ee=(xe=r.skipTypes)!==null&&xe!==void 0?xe:[];return e?Object.keys(e).reduce((Ae,Pe)=>(Ae[Pe]=convertColumn(Pe,t,e,Ee),Ae),{}):{}},convertColumn=(t,e,r,xe)=>{const Ee=e.find(Re=>Re.name===t),Ae=Ee==null?void 0:Ee.type,Pe=r[t];return Ae&&!xe.includes(Ae)?convertCell(Ae,Pe):noop$1(Pe)},convertCell=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return toArray(e,r)}switch(t){case PostgresTypes.bool:return toBoolean(e);case PostgresTypes.float4:case PostgresTypes.float8:case PostgresTypes.int2:case PostgresTypes.int4:case PostgresTypes.int8:case PostgresTypes.numeric:case PostgresTypes.oid:return toNumber(e);case PostgresTypes.json:case PostgresTypes.jsonb:return toJson(e);case PostgresTypes.timestamp:return toTimestampString(e);case PostgresTypes.abstime:case PostgresTypes.date:case PostgresTypes.daterange:case PostgresTypes.int4range:case PostgresTypes.int8range:case PostgresTypes.money:case PostgresTypes.reltime:case PostgresTypes.text:case PostgresTypes.time:case PostgresTypes.timestamptz:case PostgresTypes.timetz:case PostgresTypes.tsrange:case PostgresTypes.tstzrange:return noop$1(e);default:return noop$1(e)}},noop$1=t=>t,toBoolean=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},toNumber=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},toJson=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},toArray=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,xe=t[r];if(t[0]==="{"&&xe==="}"){let Ae;const Pe=t.slice(1,r);try{Ae=JSON.parse("["+Pe+"]")}catch{Ae=Pe?Pe.split(","):[]}return Ae.map(Re=>convertCell(e,Re))}return t},toTimestampString=t=>typeof t=="string"?t.replace(" ","T"):t,httpEndpointURL=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Push{constructor(e,r,xe={},Ee=DEFAULT_TIMEOUT){this.channel=e,this.event=r,this.payload=xe,this.timeout=Ee,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var xe;return this._hasReceived(e)&&r((xe=this.receivedResp)===null||xe===void 0?void 0:xe.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(xe=>xe.status===e).forEach(xe=>xe.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var REALTIME_PRESENCE_LISTEN_EVENTS;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(REALTIME_PRESENCE_LISTEN_EVENTS||(REALTIME_PRESENCE_LISTEN_EVENTS={}));class RealtimePresence{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const xe=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(xe.state,{},Ee=>{const{onJoin:Ae,onLeave:Pe,onSync:Re}=this.caller;this.joinRef=this.channel._joinRef(),this.state=RealtimePresence.syncState(this.state,Ee,Ae,Pe),this.pendingDiffs.forEach(Ce=>{this.state=RealtimePresence.syncDiff(this.state,Ce,Ae,Pe)}),this.pendingDiffs=[],Re()}),this.channel._on(xe.diff,{},Ee=>{const{onJoin:Ae,onLeave:Pe,onSync:Re}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(Ee):(this.state=RealtimePresence.syncDiff(this.state,Ee,Ae,Pe),Re())}),this.onJoin((Ee,Ae,Pe)=>{this.channel._trigger("presence",{event:"join",key:Ee,currentPresences:Ae,newPresences:Pe})}),this.onLeave((Ee,Ae,Pe)=>{this.channel._trigger("presence",{event:"leave",key:Ee,currentPresences:Ae,leftPresences:Pe})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,xe,Ee){const Ae=this.cloneDeep(e),Pe=this.transformState(r),Re={},Ce={};return this.map(Ae,(Be,ke)=>{Pe[Be]||(Ce[Be]=ke)}),this.map(Pe,(Be,ke)=>{const Me=Ae[Be];if(Me){const Fe=ke.map(Ge=>Ge.presence_ref),Ve=Me.map(Ge=>Ge.presence_ref),Oe=ke.filter(Ge=>Ve.indexOf(Ge.presence_ref)<0),$e=Me.filter(Ge=>Fe.indexOf(Ge.presence_ref)<0);Oe.length>0&&(Re[Be]=Oe),$e.length>0&&(Ce[Be]=$e)}else Re[Be]=ke}),this.syncDiff(Ae,{joins:Re,leaves:Ce},xe,Ee)}static syncDiff(e,r,xe,Ee){const{joins:Ae,leaves:Pe}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return xe||(xe=()=>{}),Ee||(Ee=()=>{}),this.map(Ae,(Re,Ce)=>{var Be;const ke=(Be=e[Re])!==null&&Be!==void 0?Be:[];if(e[Re]=this.cloneDeep(Ce),ke.length>0){const Me=e[Re].map(Ve=>Ve.presence_ref),Fe=ke.filter(Ve=>Me.indexOf(Ve.presence_ref)<0);e[Re].unshift(...Fe)}xe(Re,ke,Ce)}),this.map(Pe,(Re,Ce)=>{let Be=e[Re];if(!Be)return;const ke=Ce.map(Me=>Me.presence_ref);Be=Be.filter(Me=>ke.indexOf(Me.presence_ref)<0),e[Re]=Be,Ee(Re,Be,Ce),Be.length===0&&delete e[Re]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(xe=>r(xe,e[xe]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,xe)=>{const Ee=e[xe];return"metas"in Ee?r[xe]=Ee.metas.map(Ae=>(Ae.presence_ref=Ae.phx_ref,delete Ae.phx_ref,delete Ae.phx_ref_prev,Ae)):r[xe]=Ee,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var REALTIME_POSTGRES_CHANGES_LISTEN_EVENT;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT||(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT={}));var REALTIME_LISTEN_TYPES;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(REALTIME_LISTEN_TYPES||(REALTIME_LISTEN_TYPES={}));var REALTIME_SUBSCRIBE_STATES;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(REALTIME_SUBSCRIBE_STATES||(REALTIME_SUBSCRIBE_STATES={}));class RealtimeChannel{constructor(e,r={config:{}},xe){var Ee,Ae;if(this.topic=e,this.params=r,this.socket=xe,this.bindings={},this.state=CHANNEL_STATES.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Push(this,CHANNEL_EVENTS.join,this.params,this.timeout),this.rejoinTimer=new Timer(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=CHANNEL_STATES.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(Pe=>Pe.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=CHANNEL_STATES.closed,this.socket._remove(this)}),this._onError(Pe=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,Pe),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",Pe=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,Pe),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this._on(CHANNEL_EVENTS.reply,{},(Pe,Re)=>{this._trigger(this._replyEventName(Re),Pe)}),this.presence=new RealtimePresence(this),this.broadcastEndpointURL=httpEndpointURL(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((Ae=(Ee=this.params.config)===null||Ee===void 0?void 0:Ee.broadcast)===null||Ae===void 0)&&Ae.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var xe,Ee,Ae;if(this.socket.isConnected()||this.socket.connect(),this.state==CHANNEL_STATES.closed){const{config:{broadcast:Pe,presence:Re,private:Ce}}=this.params,Be=(Ee=(xe=this.bindings.postgres_changes)===null||xe===void 0?void 0:xe.map(Ve=>Ve.filter))!==null&&Ee!==void 0?Ee:[],ke=!!this.bindings[REALTIME_LISTEN_TYPES.PRESENCE]&&this.bindings[REALTIME_LISTEN_TYPES.PRESENCE].length>0||((Ae=this.params.config.presence)===null||Ae===void 0?void 0:Ae.enabled)===!0,Me={},Fe={broadcast:Pe,presence:Object.assign(Object.assign({},Re),{enabled:ke}),postgres_changes:Be,private:Ce};this.socket.accessTokenValue&&(Me.access_token=this.socket.accessTokenValue),this._onError(Ve=>e==null?void 0:e(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,Ve)),this._onClose(()=>e==null?void 0:e(REALTIME_SUBSCRIBE_STATES.CLOSED)),this.updateJoinPayload(Object.assign({config:Fe},Me)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:Ve})=>{var Oe;if(this.socket._isManualToken()||this.socket.setAuth(),Ve===void 0){e==null||e(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED);return}else{const $e=this.bindings.postgres_changes,Ge=(Oe=$e==null?void 0:$e.length)!==null&&Oe!==void 0?Oe:0,Ue=[];for(let Ye=0;Ye<Ge;Ye++){const Qe=$e[Ye],{filter:{event:rn,schema:tn,table:an,filter:qe}}=Qe,Ke=Ve&&Ve[Ye];if(Ke&&Ke.event===rn&&RealtimeChannel.isFilterValueEqual(Ke.schema,tn)&&RealtimeChannel.isFilterValueEqual(Ke.table,an)&&RealtimeChannel.isFilterValueEqual(Ke.filter,qe))Ue.push(Object.assign(Object.assign({},Qe),{id:Ke.id}));else{this.unsubscribe(),this.state=CHANNEL_STATES.errored,e==null||e(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=Ue,e&&e(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED);return}}).receive("error",Ve=>{this.state=CHANNEL_STATES.errored,e==null||e(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(Ve).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(REALTIME_SUBSCRIBE_STATES.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,xe){return this.state===CHANNEL_STATES.joined&&e===REALTIME_LISTEN_TYPES.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,r,xe)}async httpSend(e,r,xe={}){var Ee;if(r==null)return Promise.reject("Payload is required for httpSend()");const Ae={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(Ae.Authorization=`Bearer ${this.socket.accessTokenValue}`);const Pe={method:"POST",headers:Ae,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},Re=await this._fetchWithTimeout(this.broadcastEndpointURL,Pe,(Ee=xe.timeout)!==null&&Ee!==void 0?Ee:this.timeout);if(Re.status===202)return{success:!0};let Ce=Re.statusText;try{const Be=await Re.json();Ce=Be.error||Be.message||Ce}catch{}return Promise.reject(new Error(Ce))}async send(e,r={}){var xe,Ee;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:Ae,payload:Pe}=e,Re={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(Re.Authorization=`Bearer ${this.socket.accessTokenValue}`);const Ce={method:"POST",headers:Re,body:JSON.stringify({messages:[{topic:this.subTopic,event:Ae,payload:Pe,private:this.private}]})};try{const Be=await this._fetchWithTimeout(this.broadcastEndpointURL,Ce,(xe=r.timeout)!==null&&xe!==void 0?xe:this.timeout);return await((Ee=Be.body)===null||Ee===void 0?void 0:Ee.cancel()),Be.ok?"ok":"error"}catch(Be){return Be.name==="AbortError"?"timed out":"error"}}else return new Promise(Ae=>{var Pe,Re,Ce;const Be=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((Ce=(Re=(Pe=this.params)===null||Pe===void 0?void 0:Pe.config)===null||Re===void 0?void 0:Re.broadcast)===null||Ce===void 0)&&Ce.ack)&&Ae("ok"),Be.receive("ok",()=>Ae("ok")),Be.receive("error",()=>Ae("error")),Be.receive("timeout",()=>Ae("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=CHANNEL_STATES.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(CHANNEL_EVENTS.close,"leave",this._joinRef())};this.joinPush.destroy();let xe=null;return new Promise(Ee=>{xe=new Push(this,CHANNEL_EVENTS.leave,{},e),xe.receive("ok",()=>{r(),Ee("ok")}).receive("timeout",()=>{r(),Ee("timed out")}).receive("error",()=>{Ee("error")}),xe.send(),this._canPush()||xe.trigger("ok",{})}).finally(()=>{xe==null||xe.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=CHANNEL_STATES.closed,this.bindings={}}async _fetchWithTimeout(e,r,xe){const Ee=new AbortController,Ae=setTimeout(()=>Ee.abort(),xe),Pe=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:Ee.signal}));return clearTimeout(Ae),Pe}_push(e,r,xe=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let Ee=new Push(this,e,r,xe);return this._canPush()?Ee.send():this._addToPushBuffer(Ee),Ee}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>MAX_PUSH_BUFFER_SIZE){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,xe){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,xe){var Ee,Ae;const Pe=e.toLocaleLowerCase(),{close:Re,error:Ce,leave:Be,join:ke}=CHANNEL_EVENTS;if(xe&&[Re,Ce,Be,ke].indexOf(Pe)>=0&&xe!==this._joinRef())return;let Fe=this._onMessage(Pe,r,xe);if(r&&!Fe)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(Pe)?(Ee=this.bindings.postgres_changes)===null||Ee===void 0||Ee.filter(Ve=>{var Oe,$e,Ge;return((Oe=Ve.filter)===null||Oe===void 0?void 0:Oe.event)==="*"||((Ge=($e=Ve.filter)===null||$e===void 0?void 0:$e.event)===null||Ge===void 0?void 0:Ge.toLocaleLowerCase())===Pe}).map(Ve=>Ve.callback(Fe,xe)):(Ae=this.bindings[Pe])===null||Ae===void 0||Ae.filter(Ve=>{var Oe,$e,Ge,Ue,Ye,Qe;if(["broadcast","presence","postgres_changes"].includes(Pe))if("id"in Ve){const rn=Ve.id,tn=(Oe=Ve.filter)===null||Oe===void 0?void 0:Oe.event;return rn&&(($e=r.ids)===null||$e===void 0?void 0:$e.includes(rn))&&(tn==="*"||(tn==null?void 0:tn.toLocaleLowerCase())===((Ge=r.data)===null||Ge===void 0?void 0:Ge.type.toLocaleLowerCase()))}else{const rn=(Ye=(Ue=Ve==null?void 0:Ve.filter)===null||Ue===void 0?void 0:Ue.event)===null||Ye===void 0?void 0:Ye.toLocaleLowerCase();return rn==="*"||rn===((Qe=r==null?void 0:r.event)===null||Qe===void 0?void 0:Qe.toLocaleLowerCase())}else return Ve.type.toLocaleLowerCase()===Pe}).map(Ve=>{if(typeof Fe=="object"&&"ids"in Fe){const Oe=Fe.data,{schema:$e,table:Ge,commit_timestamp:Ue,type:Ye,errors:Qe}=Oe;Fe=Object.assign(Object.assign({},{schema:$e,table:Ge,commit_timestamp:Ue,eventType:Ye,new:{},old:{},errors:Qe}),this._getPayloadRecords(Oe))}Ve.callback(Fe,xe)})}_isClosed(){return this.state===CHANNEL_STATES.closed}_isJoined(){return this.state===CHANNEL_STATES.joined}_isJoining(){return this.state===CHANNEL_STATES.joining}_isLeaving(){return this.state===CHANNEL_STATES.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,xe){const Ee=e.toLocaleLowerCase(),Ae={type:Ee,filter:r,callback:xe};return this.bindings[Ee]?this.bindings[Ee].push(Ae):this.bindings[Ee]=[Ae],this}_off(e,r){const xe=e.toLocaleLowerCase();return this.bindings[xe]&&(this.bindings[xe]=this.bindings[xe].filter(Ee=>{var Ae;return!(((Ae=Ee.type)===null||Ae===void 0?void 0:Ae.toLocaleLowerCase())===xe&&RealtimeChannel.isEqual(Ee.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const xe in e)if(e[xe]!==r[xe])return!1;return!0}static isFilterValueEqual(e,r){return(e??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(CHANNEL_EVENTS.close,{},e)}_onError(e){this._on(CHANNEL_EVENTS.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=CHANNEL_STATES.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=convertChangeData(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=convertChangeData(e.columns,e.old_record)),r}}const noop=()=>{},CONNECTION_TIMEOUTS={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},RECONNECT_INTERVALS=[1e3,2e3,5e3,1e4],DEFAULT_RECONNECT_FALLBACK=1e4,WORKER_SCRIPT=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class RealtimeClient{constructor(e,r){var xe;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=DEFAULT_TIMEOUT,this.transport=null,this.heartbeatIntervalMs=CONNECTION_TIMEOUTS.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=noop,this.ref=0,this.reconnectTimer=null,this.vsn=DEFAULT_VSN,this.logger=noop,this.conn=null,this.sendBuffer=[],this.serializer=new Serializer,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=Ee=>Ee?(...Ae)=>Ee(...Ae):(...Ae)=>fetch(...Ae),!(!((xe=r==null?void 0:r.params)===null||xe===void 0)&&xe.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${TRANSPORTS.websocket}`,this.httpEndpoint=httpEndpointURL(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=WebSocketFactory.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const xe=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(xe),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,xe){this.logger(e,r,xe)}connectionState(){switch(this.conn&&this.conn.readyState){case SOCKET_STATES.connecting:return CONNECTION_STATE.Connecting;case SOCKET_STATES.open:return CONNECTION_STATE.Open;case SOCKET_STATES.closing:return CONNECTION_STATE.Closing;default:return CONNECTION_STATE.Closed}}isConnected(){return this.connectionState()===CONNECTION_STATE.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const xe=`realtime:${e}`,Ee=this.getChannels().find(Ae=>Ae.topic===xe);if(Ee)return Ee;{const Ae=new RealtimeChannel(`realtime:${e}`,r,this);return this.channels.push(Ae),Ae}}push(e){const{topic:r,event:xe,payload:Ee,ref:Ae}=e,Pe=()=>{this.encode(e,Re=>{var Ce;(Ce=this.conn)===null||Ce===void 0||Ce.send(Re)})};this.log("push",`${r} ${xe} (${Ae})`,Ee),this.isConnected()?Pe():this.sendBuffer.push(Pe)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(WS_CLOSE_NORMAL,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},CONNECTION_TIMEOUTS.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(xe=>xe.topic===e&&(xe._isJoined()||xe._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(Be){this.log("error","error in heartbeat callback",Be)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:xe,event:Ee,payload:Ae,ref:Pe}=r,Re=Pe?`(${Pe})`:"",Ce=Ae.status||"";this.log("receive",`${Ce} ${xe} ${Ee} ${Re}`.trim(),Ae),this.channels.filter(Be=>Be._isMember(xe)).forEach(Be=>Be._trigger(Ee,Ae,Pe)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===SOCKET_STATES.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===SOCKET_STATES.open||this.conn.readyState===SOCKET_STATES.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(CHANNEL_EVENTS.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const xe=e.match(/\?/)?"&":"?",Ee=new URLSearchParams(r);return`${e}${xe}${Ee}`}_workerObjectUrl(e){let r;if(e)r=e;else{const xe=new Blob([WORKER_SCRIPT],{type:"application/javascript"});r=URL.createObjectURL(xe)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r,xe=!1;if(e)r=e,xe=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(Ee){this.log("error","Error fetching access token from callback",Ee),r=this.accessTokenValue}else r=this.accessTokenValue;xe?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(Ee=>{const Ae={access_token:r,version:DEFAULT_VERSION};r&&Ee.updateJoinPayload(Ae),Ee.joinedOnce&&Ee._isJoined()&&Ee._push(CHANNEL_EVENTS.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(xe=>{try{xe(r)}catch(Ee){this.log("error",`error in ${e} callback`,Ee)}})}catch(xe){this.log("error",`error triggering ${e} callbacks`,xe)}}_setupReconnectionTimer(){this.reconnectTimer=new Timer(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},CONNECTION_TIMEOUTS.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,xe,Ee,Ae,Pe,Re,Ce,Be,ke,Me,Fe,Ve;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(xe=e==null?void 0:e.timeout)!==null&&xe!==void 0?xe:DEFAULT_TIMEOUT,this.heartbeatIntervalMs=(Ee=e==null?void 0:e.heartbeatIntervalMs)!==null&&Ee!==void 0?Ee:CONNECTION_TIMEOUTS.HEARTBEAT_INTERVAL,this.worker=(Ae=e==null?void 0:e.worker)!==null&&Ae!==void 0?Ae:!1,this.accessToken=(Pe=e==null?void 0:e.accessToken)!==null&&Pe!==void 0?Pe:null,this.heartbeatCallback=(Re=e==null?void 0:e.heartbeatCallback)!==null&&Re!==void 0?Re:noop,this.vsn=(Ce=e==null?void 0:e.vsn)!==null&&Ce!==void 0?Ce:DEFAULT_VSN,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(Be=e==null?void 0:e.reconnectAfterMs)!==null&&Be!==void 0?Be:(Oe=>RECONNECT_INTERVALS[Oe-1]||DEFAULT_RECONNECT_FALLBACK),this.vsn){case VSN_1_0_0:this.encode=(ke=e==null?void 0:e.encode)!==null&&ke!==void 0?ke:((Oe,$e)=>$e(JSON.stringify(Oe))),this.decode=(Me=e==null?void 0:e.decode)!==null&&Me!==void 0?Me:((Oe,$e)=>$e(JSON.parse(Oe)));break;case VSN_2_0_0:this.encode=(Fe=e==null?void 0:e.encode)!==null&&Fe!==void 0?Fe:this.serializer.encode.bind(this.serializer),this.decode=(Ve=e==null?void 0:e.decode)!==null&&Ve!==void 0?Ve:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var IcebergError=class extends Error{constructor(t,e){var r;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((r=e.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function buildUrl(t,e,r){const xe=new URL(e,t);if(r)for(const[Ee,Ae]of Object.entries(r))Ae!==void 0&&xe.searchParams.set(Ee,Ae);return xe.toString()}async function buildAuthHeaders(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function createFetchClient(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:xe,query:Ee,body:Ae,headers:Pe}){const Re=buildUrl(t.baseUrl,xe,Ee),Ce=await buildAuthHeaders(t.auth),Be=await e(Re,{method:r,headers:{...Ae?{"Content-Type":"application/json"}:{},...Ce,...Pe},body:Ae?JSON.stringify(Ae):void 0}),ke=await Be.text(),Me=(Be.headers.get("content-type")||"").includes("application/json"),Fe=Me&&ke?JSON.parse(ke):ke;if(!Be.ok){const Ve=Me?Fe:void 0,Oe=Ve==null?void 0:Ve.error;throw new IcebergError((Oe==null?void 0:Oe.message)??`Request failed with status ${Be.status}`,{status:Be.status,icebergType:Oe==null?void 0:Oe.type,icebergCode:Oe==null?void 0:Oe.code,details:Ve})}return{status:Be.status,headers:Be.headers,data:Fe}}}}function namespaceToPath(t){return t.join("")}var NamespaceOperations=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:namespaceToPath(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(xe=>({namespace:xe}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${namespaceToPath(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${namespaceToPath(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${namespaceToPath(t.namespace)}`}),!0}catch(e){if(e instanceof IcebergError&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof IcebergError&&r.status===409)return;throw r}}};function namespaceToPath2(t){return t.join("")}var TableOperations=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${namespaceToPath2(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${namespaceToPath2(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${namespaceToPath2(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${namespaceToPath2(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${namespaceToPath2(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${namespaceToPath2(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof IcebergError&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof IcebergError&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},IcebergRestCatalog=class{constructor(t){var xe;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=createFetchClient({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(xe=t.accessDelegation)==null?void 0:xe.join(","),this.namespaceOps=new NamespaceOperations(this.client,e),this.tableOps=new TableOperations(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},StorageError=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function isStorageError(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var StorageApiError=class extends StorageError{constructor(t,e,r){super(t),this.name="StorageApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},StorageUnknownError=class extends StorageError{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const resolveFetch$1$1=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),resolveResponse$1=()=>Response,recursiveToCamel=t=>{if(Array.isArray(t))return t.map(r=>recursiveToCamel(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,xe])=>{const Ee=r.replace(/([-_][a-z])/gi,Ae=>Ae.toUpperCase().replace(/[-_]/g,""));e[Ee]=recursiveToCamel(xe)}),e},isPlainObject$1=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},isValidBucketName=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function _typeof$1(t){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$1(t)}function toPrimitive$1(t,e){if(_typeof$1(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var xe=r.call(t,e);if(_typeof$1(xe)!="object")return xe;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function toPropertyKey$1(t){var e=toPrimitive$1(t,"string");return _typeof$1(e)=="symbol"?e:e+""}function _defineProperty$1(t,e,r){return(e=toPropertyKey$1(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ownKeys$1(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var xe=Object.getOwnPropertySymbols(t);e&&(xe=xe.filter(function(Ee){return Object.getOwnPropertyDescriptor(t,Ee).enumerable})),r.push.apply(r,xe)}return r}function _objectSpread2$1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$1(Object(r),!0).forEach(function(xe){_defineProperty$1(t,xe,r[xe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys$1(Object(r)).forEach(function(xe){Object.defineProperty(t,xe,Object.getOwnPropertyDescriptor(r,xe))})}return t}const _getErrorMessage$1=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},handleError$1=async(t,e,r)=>{t instanceof await resolveResponse$1()&&!(r!=null&&r.noResolveJson)?t.json().then(xe=>{const Ee=t.status||500,Ae=(xe==null?void 0:xe.statusCode)||Ee+"";e(new StorageApiError(_getErrorMessage$1(xe),Ee,Ae))}).catch(xe=>{e(new StorageUnknownError(_getErrorMessage$1(xe),xe))}):e(new StorageUnknownError(_getErrorMessage$1(t),t))},_getRequestParams$1=(t,e,r,xe)=>{const Ee={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!xe?Ee:(isPlainObject$1(xe)?(Ee.headers=_objectSpread2$1({"Content-Type":"application/json"},e==null?void 0:e.headers),Ee.body=JSON.stringify(xe)):Ee.body=xe,e!=null&&e.duplex&&(Ee.duplex=e.duplex),_objectSpread2$1(_objectSpread2$1({},Ee),r))};async function _handleRequest$1(t,e,r,xe,Ee,Ae){return new Promise((Pe,Re)=>{t(r,_getRequestParams$1(e,xe,Ee,Ae)).then(Ce=>{if(!Ce.ok)throw Ce;return xe!=null&&xe.noResolveJson?Ce:Ce.json()}).then(Ce=>Pe(Ce)).catch(Ce=>handleError$1(Ce,Re,xe))})}async function get(t,e,r,xe){return _handleRequest$1(t,"GET",e,r,xe)}async function post$1(t,e,r,xe,Ee){return _handleRequest$1(t,"POST",e,xe,Ee,r)}async function put(t,e,r,xe,Ee){return _handleRequest$1(t,"PUT",e,xe,Ee,r)}async function head(t,e,r,xe){return _handleRequest$1(t,"HEAD",e,_objectSpread2$1(_objectSpread2$1({},r),{},{noResolveJson:!0}),xe)}async function remove(t,e,r,xe,Ee){return _handleRequest$1(t,"DELETE",e,xe,Ee,r)}var StreamDownloadBuilder=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(isStorageError(e))return{data:null,error:e};throw e}}};let _Symbol$toStringTag;_Symbol$toStringTag=Symbol.toStringTag;var BlobDownloadBuilder=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[_Symbol$toStringTag]="BlobDownloadBuilder",this.promise=null}asStream(){return new StreamDownloadBuilder(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(isStorageError(e))return{data:null,error:e};throw e}}};const DEFAULT_SEARCH_OPTIONS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},DEFAULT_FILE_OPTIONS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var StorageFileApi=class{constructor(t,e={},r,xe){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=r,this.fetch=resolveFetch$1$1(xe)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,r,xe){var Ee=this;try{let Ae;const Pe=_objectSpread2$1(_objectSpread2$1({},DEFAULT_FILE_OPTIONS),xe);let Re=_objectSpread2$1(_objectSpread2$1({},Ee.headers),t==="POST"&&{"x-upsert":String(Pe.upsert)});const Ce=Pe.metadata;typeof Blob<"u"&&r instanceof Blob?(Ae=new FormData,Ae.append("cacheControl",Pe.cacheControl),Ce&&Ae.append("metadata",Ee.encodeMetadata(Ce)),Ae.append("",r)):typeof FormData<"u"&&r instanceof FormData?(Ae=r,Ae.has("cacheControl")||Ae.append("cacheControl",Pe.cacheControl),Ce&&!Ae.has("metadata")&&Ae.append("metadata",Ee.encodeMetadata(Ce))):(Ae=r,Re["cache-control"]=`max-age=${Pe.cacheControl}`,Re["content-type"]=Pe.contentType,Ce&&(Re["x-metadata"]=Ee.toBase64(Ee.encodeMetadata(Ce))),(typeof ReadableStream<"u"&&Ae instanceof ReadableStream||Ae&&typeof Ae=="object"&&"pipe"in Ae&&typeof Ae.pipe=="function")&&!Pe.duplex&&(Pe.duplex="half")),xe!=null&&xe.headers&&(Re=_objectSpread2$1(_objectSpread2$1({},Re),xe.headers));const Be=Ee._removeEmptyFolders(e),ke=Ee._getFinalPath(Be),Me=await(t=="PUT"?put:post$1)(Ee.fetch,`${Ee.url}/object/${ke}`,Ae,_objectSpread2$1({headers:Re},Pe!=null&&Pe.duplex?{duplex:Pe.duplex}:{}));return{data:{path:Be,id:Me.Id,fullPath:Me.Key},error:null}}catch(Ae){if(Ee.shouldThrowOnError)throw Ae;if(isStorageError(Ae))return{data:null,error:Ae};throw Ae}}async upload(t,e,r){return this.uploadOrUpdate("POST",t,e,r)}async uploadToSignedUrl(t,e,r,xe){var Ee=this;const Ae=Ee._removeEmptyFolders(t),Pe=Ee._getFinalPath(Ae),Re=new URL(Ee.url+`/object/upload/sign/${Pe}`);Re.searchParams.set("token",e);try{let Ce;const Be=_objectSpread2$1({upsert:DEFAULT_FILE_OPTIONS.upsert},xe),ke=_objectSpread2$1(_objectSpread2$1({},Ee.headers),{"x-upsert":String(Be.upsert)});return typeof Blob<"u"&&r instanceof Blob?(Ce=new FormData,Ce.append("cacheControl",Be.cacheControl),Ce.append("",r)):typeof FormData<"u"&&r instanceof FormData?(Ce=r,Ce.append("cacheControl",Be.cacheControl)):(Ce=r,ke["cache-control"]=`max-age=${Be.cacheControl}`,ke["content-type"]=Be.contentType),{data:{path:Ae,fullPath:(await put(Ee.fetch,Re.toString(),Ce,{headers:ke})).Key},error:null}}catch(Ce){if(Ee.shouldThrowOnError)throw Ce;if(isStorageError(Ce))return{data:null,error:Ce};throw Ce}}async createSignedUploadUrl(t,e){var r=this;try{let xe=r._getFinalPath(t);const Ee=_objectSpread2$1({},r.headers);e!=null&&e.upsert&&(Ee["x-upsert"]="true");const Ae=await post$1(r.fetch,`${r.url}/object/upload/sign/${xe}`,{},{headers:Ee}),Pe=new URL(r.url+Ae.url),Re=Pe.searchParams.get("token");if(!Re)throw new StorageError("No token returned by API");return{data:{signedUrl:Pe.toString(),path:t,token:Re},error:null}}catch(xe){if(r.shouldThrowOnError)throw xe;if(isStorageError(xe))return{data:null,error:xe};throw xe}}async update(t,e,r){return this.uploadOrUpdate("PUT",t,e,r)}async move(t,e,r){var xe=this;try{return{data:await post$1(xe.fetch,`${xe.url}/object/move`,{bucketId:xe.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r==null?void 0:r.destinationBucket},{headers:xe.headers}),error:null}}catch(Ee){if(xe.shouldThrowOnError)throw Ee;if(isStorageError(Ee))return{data:null,error:Ee};throw Ee}}async copy(t,e,r){var xe=this;try{return{data:{path:(await post$1(xe.fetch,`${xe.url}/object/copy`,{bucketId:xe.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r==null?void 0:r.destinationBucket},{headers:xe.headers})).Key},error:null}}catch(Ee){if(xe.shouldThrowOnError)throw Ee;if(isStorageError(Ee))return{data:null,error:Ee};throw Ee}}async createSignedUrl(t,e,r){var xe=this;try{let Ee=xe._getFinalPath(t),Ae=await post$1(xe.fetch,`${xe.url}/object/sign/${Ee}`,_objectSpread2$1({expiresIn:e},r!=null&&r.transform?{transform:r.transform}:{}),{headers:xe.headers});const Pe=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return Ae={signedUrl:encodeURI(`${xe.url}${Ae.signedURL}${Pe}`)},{data:Ae,error:null}}catch(Ee){if(xe.shouldThrowOnError)throw Ee;if(isStorageError(Ee))return{data:null,error:Ee};throw Ee}}async createSignedUrls(t,e,r){var xe=this;try{const Ee=await post$1(xe.fetch,`${xe.url}/object/sign/${xe.bucketId}`,{expiresIn:e,paths:t},{headers:xe.headers}),Ae=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:Ee.map(Pe=>_objectSpread2$1(_objectSpread2$1({},Pe),{},{signedUrl:Pe.signedURL?encodeURI(`${xe.url}${Pe.signedURL}${Ae}`):null})),error:null}}catch(Ee){if(xe.shouldThrowOnError)throw Ee;if(isStorageError(Ee))return{data:null,error:Ee};throw Ee}}download(t,e){const r=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",xe=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),Ee=xe?`?${xe}`:"",Ae=this._getFinalPath(t),Pe=()=>get(this.fetch,`${this.url}/${r}/${Ae}${Ee}`,{headers:this.headers,noResolveJson:!0});return new BlobDownloadBuilder(Pe,this.shouldThrowOnError)}async info(t){var e=this;const r=e._getFinalPath(t);try{return{data:recursiveToCamel(await get(e.fetch,`${e.url}/object/info/${r}`,{headers:e.headers})),error:null}}catch(xe){if(e.shouldThrowOnError)throw xe;if(isStorageError(xe))return{data:null,error:xe};throw xe}}async exists(t){var e=this;const r=e._getFinalPath(t);try{return await head(e.fetch,`${e.url}/object/${r}`,{headers:e.headers}),{data:!0,error:null}}catch(xe){if(e.shouldThrowOnError)throw xe;if(isStorageError(xe)&&xe instanceof StorageUnknownError){const Ee=xe.originalError;if([400,404].includes(Ee==null?void 0:Ee.status))return{data:!1,error:xe}}throw xe}}getPublicUrl(t,e){const r=this._getFinalPath(t),xe=[],Ee=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";Ee!==""&&xe.push(Ee);const Ae=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",Pe=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});Pe!==""&&xe.push(Pe);let Re=xe.join("&");return Re!==""&&(Re=`?${Re}`),{data:{publicUrl:encodeURI(`${this.url}/${Ae}/public/${r}${Re}`)}}}async remove(t){var e=this;try{return{data:await remove(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(isStorageError(r))return{data:null,error:r};throw r}}async list(t,e,r){var xe=this;try{const Ee=_objectSpread2$1(_objectSpread2$1(_objectSpread2$1({},DEFAULT_SEARCH_OPTIONS),e),{},{prefix:t||""});return{data:await post$1(xe.fetch,`${xe.url}/object/list/${xe.bucketId}`,Ee,{headers:xe.headers},r),error:null}}catch(Ee){if(xe.shouldThrowOnError)throw Ee;if(isStorageError(Ee))return{data:null,error:Ee};throw Ee}}async listV2(t,e){var r=this;try{const xe=_objectSpread2$1({},t);return{data:await post$1(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,xe,{headers:r.headers},e),error:null}}catch(xe){if(r.shouldThrowOnError)throw xe;if(isStorageError(xe))return{data:null,error:xe};throw xe}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const version$2="2.89.0",DEFAULT_HEADERS$1$1={"X-Client-Info":`storage-js/${version$2}`};var StorageBucketApi=class{constructor(t,e={},r,xe){this.shouldThrowOnError=!1;const Ee=new URL(t);xe!=null&&xe.useNewHostname&&/supabase\.(co|in|red)$/.test(Ee.hostname)&&!Ee.hostname.includes("storage.supabase.")&&(Ee.hostname=Ee.hostname.replace("supabase.","storage.supabase.")),this.url=Ee.href.replace(/\/$/,""),this.headers=_objectSpread2$1(_objectSpread2$1({},DEFAULT_HEADERS$1$1),e),this.fetch=resolveFetch$1$1(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const r=e.listBucketOptionsToQueryString(t);return{data:await get(e.fetch,`${e.url}/bucket${r}`,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(isStorageError(r))return{data:null,error:r};throw r}}async getBucket(t){var e=this;try{return{data:await get(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(isStorageError(r))return{data:null,error:r};throw r}}async createBucket(t,e={public:!1}){var r=this;try{return{data:await post$1(r.fetch,`${r.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}),error:null}}catch(xe){if(r.shouldThrowOnError)throw xe;if(isStorageError(xe))return{data:null,error:xe};throw xe}}async updateBucket(t,e){var r=this;try{return{data:await put(r.fetch,`${r.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}),error:null}}catch(xe){if(r.shouldThrowOnError)throw xe;if(isStorageError(xe))return{data:null,error:xe};throw xe}}async emptyBucket(t){var e=this;try{return{data:await post$1(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(isStorageError(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await remove(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(isStorageError(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},StorageAnalyticsClient=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=_objectSpread2$1(_objectSpread2$1({},DEFAULT_HEADERS$1$1),e),this.fetch=resolveFetch$1$1(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await post$1(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(isStorageError(r))return{data:null,error:r};throw r}}async listBuckets(t){var e=this;try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const xe=r.toString(),Ee=xe?`${e.url}/bucket?${xe}`:`${e.url}/bucket`;return{data:await get(e.fetch,Ee,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(isStorageError(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await remove(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(isStorageError(r))return{data:null,error:r};throw r}}from(t){var e=this;if(!isValidBucketName(t))throw new StorageError("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new IcebergRestCatalog({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),xe=this.shouldThrowOnError;return new Proxy(r,{get(Ee,Ae){const Pe=Ee[Ae];return typeof Pe!="function"?Pe:async(...Re)=>{try{return{data:await Pe.apply(Ee,Re),error:null}}catch(Ce){if(xe)throw Ce;return{data:null,error:Ce}}}}})}};const DEFAULT_HEADERS$2={"X-Client-Info":`storage-js/${version$2}`,"Content-Type":"application/json"};var StorageVectorsError=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function isStorageVectorsError(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var StorageVectorsApiError=class extends StorageVectorsError{constructor(t,e,r){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},StorageVectorsUnknownError=class extends StorageVectorsError{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const resolveFetch$2=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),isPlainObject=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},_getErrorMessage$2=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),handleError$2=async(t,e,r)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const xe=t.status||500,Ee=t;if(typeof Ee.json=="function")Ee.json().then(Ae=>{const Pe=(Ae==null?void 0:Ae.statusCode)||(Ae==null?void 0:Ae.code)||xe+"";e(new StorageVectorsApiError(_getErrorMessage$2(Ae),xe,Pe))}).catch(()=>{const Ae=xe+"";e(new StorageVectorsApiError(Ee.statusText||`HTTP ${xe} error`,xe,Ae))});else{const Ae=xe+"";e(new StorageVectorsApiError(Ee.statusText||`HTTP ${xe} error`,xe,Ae))}}else e(new StorageVectorsUnknownError(_getErrorMessage$2(t),t))},_getRequestParams$2=(t,e,r,xe)=>{const Ee={method:t,headers:(e==null?void 0:e.headers)||{}};return xe?(isPlainObject(xe)?(Ee.headers=_objectSpread2$1({"Content-Type":"application/json"},e==null?void 0:e.headers),Ee.body=JSON.stringify(xe)):Ee.body=xe,_objectSpread2$1(_objectSpread2$1({},Ee),r)):Ee};async function _handleRequest$2(t,e,r,xe,Ee,Ae){return new Promise((Pe,Re)=>{t(r,_getRequestParams$2(e,xe,Ee,Ae)).then(Ce=>{if(!Ce.ok)throw Ce;if(xe!=null&&xe.noResolveJson)return Ce;const Be=Ce.headers.get("content-type");return!Be||!Be.includes("application/json")?{}:Ce.json()}).then(Ce=>Pe(Ce)).catch(Ce=>handleError$2(Ce,Re,xe))})}async function post(t,e,r,xe,Ee){return _handleRequest$2(t,"POST",e,xe,Ee,r)}var VectorIndexApi=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=_objectSpread2$1(_objectSpread2$1({},DEFAULT_HEADERS$2),e),this.fetch=resolveFetch$2(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await post(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(isStorageVectorsError(r))return{data:null,error:r};throw r}}async getIndex(t,e){var r=this;try{return{data:await post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers}),error:null}}catch(xe){if(r.shouldThrowOnError)throw xe;if(isStorageVectorsError(xe))return{data:null,error:xe};throw xe}}async listIndexes(t){var e=this;try{return{data:await post(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(isStorageVectorsError(r))return{data:null,error:r};throw r}}async deleteIndex(t,e){var r=this;try{return{data:await post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers})||{},error:null}}catch(xe){if(r.shouldThrowOnError)throw xe;if(isStorageVectorsError(xe))return{data:null,error:xe};throw xe}}},VectorDataApi=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=_objectSpread2$1(_objectSpread2$1({},DEFAULT_HEADERS$2),e),this.fetch=resolveFetch$2(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await post(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(isStorageVectorsError(r))return{data:null,error:r};throw r}}async getVectors(t){var e=this;try{return{data:await post(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(isStorageVectorsError(r))return{data:null,error:r};throw r}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await post(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(isStorageVectorsError(r))return{data:null,error:r};throw r}}async queryVectors(t){var e=this;try{return{data:await post(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(isStorageVectorsError(r))return{data:null,error:r};throw r}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await post(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(isStorageVectorsError(r))return{data:null,error:r};throw r}}},VectorBucketApi=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=_objectSpread2$1(_objectSpread2$1({},DEFAULT_HEADERS$2),e),this.fetch=resolveFetch$2(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(isStorageVectorsError(r))return{data:null,error:r};throw r}}async getBucket(t){var e=this;try{return{data:await post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(isStorageVectorsError(r))return{data:null,error:r};throw r}}async listBuckets(t={}){var e=this;try{return{data:await post(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(isStorageVectorsError(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(isStorageVectorsError(r))return{data:null,error:r};throw r}}},StorageVectorsClient=class extends VectorBucketApi{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new VectorBucketScope(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,r=this;return e().call(r,t)}async getBucket(t){var e=()=>super.getBucket,r=this;return e().call(r,t)}async listBuckets(t={}){var e=()=>super.listBuckets,r=this;return e().call(r,t)}async deleteBucket(t){var e=()=>super.deleteBucket,r=this;return e().call(r,t)}},VectorBucketScope=class extends VectorIndexApi{constructor(t,e,r,xe){super(t,e,xe),this.vectorBucketName=r}async createIndex(t){var e=()=>super.createIndex,r=this;return e().call(r,_objectSpread2$1(_objectSpread2$1({},t),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,r=this;return e().call(r,_objectSpread2$1(_objectSpread2$1({},t),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,r=this;return e().call(r,r.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,r=this;return e().call(r,r.vectorBucketName,t)}index(t){return new VectorIndexScope(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},VectorIndexScope=class extends VectorDataApi{constructor(t,e,r,xe,Ee){super(t,e,Ee),this.vectorBucketName=r,this.indexName=xe}async putVectors(t){var e=()=>super.putVectors,r=this;return e().call(r,_objectSpread2$1(_objectSpread2$1({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(t){var e=()=>super.getVectors,r=this;return e().call(r,_objectSpread2$1(_objectSpread2$1({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,r=this;return e().call(r,_objectSpread2$1(_objectSpread2$1({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,r=this;return e().call(r,_objectSpread2$1(_objectSpread2$1({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,r=this;return e().call(r,_objectSpread2$1(_objectSpread2$1({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},StorageClient=class extends StorageBucketApi{constructor(t,e={},r,xe){super(t,e,r,xe)}from(t){return new StorageFileApi(this.url,this.headers,t,this.fetch)}get vectors(){return new StorageVectorsClient(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new StorageAnalyticsClient(this.url+"/iceberg",this.headers,this.fetch)}};const version$1="2.89.0",AUTO_REFRESH_TICK_DURATION_MS=30*1e3,AUTO_REFRESH_TICK_THRESHOLD=3,EXPIRY_MARGIN_MS=AUTO_REFRESH_TICK_THRESHOLD*AUTO_REFRESH_TICK_DURATION_MS,GOTRUE_URL="http://localhost:9999",STORAGE_KEY="supabase.auth.token",DEFAULT_HEADERS$1={"X-Client-Info":`gotrue-js/${version$1}`},API_VERSION_HEADER_NAME="X-Supabase-Api-Version",API_VERSIONS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},BASE64URL_REGEX=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,JWKS_TTL=600*1e3;class AuthError extends Error{constructor(e,r,xe){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=xe}}function isAuthError(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class AuthApiError extends AuthError{constructor(e,r,xe){super(e,r,xe),this.name="AuthApiError",this.status=r,this.code=xe}}function isAuthApiError(t){return isAuthError(t)&&t.name==="AuthApiError"}class AuthUnknownError extends AuthError{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class CustomAuthError extends AuthError{constructor(e,r,xe,Ee){super(e,xe,Ee),this.name=r,this.status=xe}}class AuthSessionMissingError extends CustomAuthError{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function isAuthSessionMissingError(t){return isAuthError(t)&&t.name==="AuthSessionMissingError"}class AuthInvalidTokenResponseError extends CustomAuthError{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class AuthInvalidCredentialsError extends CustomAuthError{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class AuthImplicitGrantRedirectError extends CustomAuthError{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function isAuthImplicitGrantRedirectError(t){return isAuthError(t)&&t.name==="AuthImplicitGrantRedirectError"}class AuthPKCEGrantCodeExchangeError extends CustomAuthError{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class AuthPKCECodeVerifierMissingError extends CustomAuthError{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class AuthRetryableFetchError extends CustomAuthError{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function isAuthRetryableFetchError(t){return isAuthError(t)&&t.name==="AuthRetryableFetchError"}class AuthWeakPasswordError extends CustomAuthError{constructor(e,r,xe){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=xe}}class AuthInvalidJwtError extends CustomAuthError{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const TO_BASE64URL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),IGNORE_BASE64URL=` 	
\r=`.split(""),FROM_BASE64URL=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<IGNORE_BASE64URL.length;e+=1)t[IGNORE_BASE64URL[e].charCodeAt(0)]=-2;for(let e=0;e<TO_BASE64URL.length;e+=1)t[TO_BASE64URL[e].charCodeAt(0)]=e;return t})();function byteToBase64URL(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const xe=e.queue>>e.queuedBits-6&63;r(TO_BASE64URL[xe]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const xe=e.queue>>e.queuedBits-6&63;r(TO_BASE64URL[xe]),e.queuedBits-=6}}function byteFromBase64URL(t,e,r){const xe=FROM_BASE64URL[t];if(xe>-1)for(e.queue=e.queue<<6|xe,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(xe===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function stringFromBase64URL(t){const e=[],r=Pe=>{e.push(String.fromCodePoint(Pe))},xe={utf8seq:0,codepoint:0},Ee={queue:0,queuedBits:0},Ae=Pe=>{stringFromUTF8(Pe,xe,r)};for(let Pe=0;Pe<t.length;Pe+=1)byteFromBase64URL(t.charCodeAt(Pe),Ee,Ae);return e.join("")}function codepointToUTF8(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function stringToUTF8(t,e){for(let r=0;r<t.length;r+=1){let xe=t.charCodeAt(r);if(xe>55295&&xe<=56319){const Ee=(xe-55296)*1024&65535;xe=(t.charCodeAt(r+1)-56320&65535|Ee)+65536,r+=1}codepointToUTF8(xe,e)}}function stringFromUTF8(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let xe=1;xe<6;xe+=1)if((t>>7-xe&1)===0){e.utf8seq=xe;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function base64UrlToUint8Array(t){const e=[],r={queue:0,queuedBits:0},xe=Ee=>{e.push(Ee)};for(let Ee=0;Ee<t.length;Ee+=1)byteFromBase64URL(t.charCodeAt(Ee),r,xe);return new Uint8Array(e)}function stringToUint8Array(t){const e=[];return stringToUTF8(t,r=>e.push(r)),new Uint8Array(e)}function bytesToBase64URL(t){const e=[],r={queue:0,queuedBits:0},xe=Ee=>{e.push(Ee)};return t.forEach(Ee=>byteToBase64URL(Ee,r,xe)),byteToBase64URL(null,r,xe),e.join("")}function expiresAt(t){return Math.round(Date.now()/1e3)+t}function generateCallbackId(){return Symbol("auth-callback")}const isBrowser=()=>typeof window<"u"&&typeof document<"u",localStorageWriteTests={tested:!1,writable:!1},supportsLocalStorage=()=>{if(!isBrowser())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(localStorageWriteTests.tested)return localStorageWriteTests.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!0}catch{localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!1}return localStorageWriteTests.writable};function parseParametersFromURL(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((Ee,Ae)=>{e[Ae]=Ee})}catch{}return r.searchParams.forEach((xe,Ee)=>{e[Ee]=xe}),e}const resolveFetch$1=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),looksLikeFetchResponse=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",setItemAsync=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},getItemAsync=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},removeItemAsync=async(t,e)=>{await t.removeItem(e)};class Deferred{constructor(){this.promise=new Deferred.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Deferred.promiseConstructor=Promise;function decodeJWT(t){const e=t.split(".");if(e.length!==3)throw new AuthInvalidJwtError("Invalid JWT structure");for(let xe=0;xe<e.length;xe++)if(!BASE64URL_REGEX.test(e[xe]))throw new AuthInvalidJwtError("JWT not in base64url format");return{header:JSON.parse(stringFromBase64URL(e[0])),payload:JSON.parse(stringFromBase64URL(e[1])),signature:base64UrlToUint8Array(e[2]),raw:{header:e[0],payload:e[1]}}}async function sleep(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function retryable(t,e){return new Promise((xe,Ee)=>{(async()=>{for(let Ae=0;Ae<1/0;Ae++)try{const Pe=await t(Ae);if(!e(Ae,null,Pe)){xe(Pe);return}}catch(Pe){if(!e(Ae,Pe)){Ee(Pe);return}}})()})}function dec2hex(t){return("0"+t.toString(16)).substr(-2)}function generatePKCEVerifier(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",xe=r.length;let Ee="";for(let Ae=0;Ae<56;Ae++)Ee+=r.charAt(Math.floor(Math.random()*xe));return Ee}return crypto.getRandomValues(e),Array.from(e,dec2hex).join("")}async function sha256(t){const r=new TextEncoder().encode(t),xe=await crypto.subtle.digest("SHA-256",r),Ee=new Uint8Array(xe);return Array.from(Ee).map(Ae=>String.fromCharCode(Ae)).join("")}async function generatePKCEChallenge(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await sha256(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function getCodeChallengeAndMethod(t,e,r=!1){const xe=generatePKCEVerifier();let Ee=xe;r&&(Ee+="/PASSWORD_RECOVERY"),await setItemAsync(t,`${e}-code-verifier`,Ee);const Ae=await generatePKCEChallenge(xe);return[Ae,xe===Ae?"plain":"s256"]}const API_VERSION_REGEX=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function parseResponseAPIVersion(t){const e=t.headers.get(API_VERSION_HEADER_NAME);if(!e||!e.match(API_VERSION_REGEX))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function validateExp(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function getAlgorithm(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const UUID_REGEX=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function validateUUID(t){if(!UUID_REGEX.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function userNotAvailableProxy(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const xe=r.toString();if(xe==="Symbol(Symbol.toPrimitive)"||xe==="Symbol(Symbol.toStringTag)"||xe==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function insecureUserWarningProxy(t,e){return new Proxy(t,{get:(r,xe,Ee)=>{if(xe==="__isInsecureUserWarningProxy")return!0;if(typeof xe=="symbol"){const Ae=xe.toString();if(Ae==="Symbol(Symbol.toPrimitive)"||Ae==="Symbol(Symbol.toStringTag)"||Ae==="Symbol(util.inspect.custom)"||Ae==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,xe,Ee)}return!e.value&&typeof xe=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,xe,Ee)}})}function deepClone(t){return JSON.parse(JSON.stringify(t))}const _getErrorMessage=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),NETWORK_ERROR_CODES=[502,503,504];async function handleError(t){var e;if(!looksLikeFetchResponse(t))throw new AuthRetryableFetchError(_getErrorMessage(t),0);if(NETWORK_ERROR_CODES.includes(t.status))throw new AuthRetryableFetchError(_getErrorMessage(t),t.status);let r;try{r=await t.json()}catch(Ae){throw new AuthUnknownError(_getErrorMessage(Ae),Ae)}let xe;const Ee=parseResponseAPIVersion(t);if(Ee&&Ee.getTime()>=API_VERSIONS["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?xe=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(xe=r.error_code),xe){if(xe==="weak_password")throw new AuthWeakPasswordError(_getErrorMessage(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(xe==="session_not_found")throw new AuthSessionMissingError}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((Ae,Pe)=>Ae&&typeof Pe=="string",!0))throw new AuthWeakPasswordError(_getErrorMessage(r),t.status,r.weak_password.reasons);throw new AuthApiError(_getErrorMessage(r),t.status||500,xe)}const _getRequestParams=(t,e,r,xe)=>{const Ee={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?Ee:(Ee.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),Ee.body=JSON.stringify(xe),Object.assign(Object.assign({},Ee),r))};async function _request(t,e,r,xe){var Ee;const Ae=Object.assign({},xe==null?void 0:xe.headers);Ae[API_VERSION_HEADER_NAME]||(Ae[API_VERSION_HEADER_NAME]=API_VERSIONS["2024-01-01"].name),xe!=null&&xe.jwt&&(Ae.Authorization=`Bearer ${xe.jwt}`);const Pe=(Ee=xe==null?void 0:xe.query)!==null&&Ee!==void 0?Ee:{};xe!=null&&xe.redirectTo&&(Pe.redirect_to=xe.redirectTo);const Re=Object.keys(Pe).length?"?"+new URLSearchParams(Pe).toString():"",Ce=await _handleRequest(t,e,r+Re,{headers:Ae,noResolveJson:xe==null?void 0:xe.noResolveJson},{},xe==null?void 0:xe.body);return xe!=null&&xe.xform?xe==null?void 0:xe.xform(Ce):{data:Object.assign({},Ce),error:null}}async function _handleRequest(t,e,r,xe,Ee,Ae){const Pe=_getRequestParams(e,xe,Ee,Ae);let Re;try{Re=await t(r,Object.assign({},Pe))}catch(Ce){throw console.error(Ce),new AuthRetryableFetchError(_getErrorMessage(Ce),0)}if(Re.ok||await handleError(Re),xe!=null&&xe.noResolveJson)return Re;try{return await Re.json()}catch(Ce){await handleError(Ce)}}function _sessionResponse(t){var e;let r=null;hasSession(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=expiresAt(t.expires_in)));const xe=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:xe},error:null}}function _sessionResponsePassword(t){const e=_sessionResponse(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,xe)=>r&&typeof xe=="string",!0)&&(e.data.weak_password=t.weak_password),e}function _userResponse(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function _ssoResponse(t){return{data:t,error:null}}function _generateLinkResponse(t){const{action_link:e,email_otp:r,hashed_token:xe,redirect_to:Ee,verification_type:Ae}=t,Pe=__rest(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),Re={action_link:e,email_otp:r,hashed_token:xe,redirect_to:Ee,verification_type:Ae},Ce=Object.assign({},Pe);return{data:{properties:Re,user:Ce},error:null}}function _noResolveJsonResponse(t){return t}function hasSession(t){return t.access_token&&t.refresh_token&&t.expires_in}const SIGN_OUT_SCOPES=["global","local","others"];class GoTrueAdminApi{constructor({url:e="",headers:r={},fetch:xe}){this.url=e,this.headers=r,this.fetch=resolveFetch$1(xe),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=SIGN_OUT_SCOPES[0]){if(SIGN_OUT_SCOPES.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${SIGN_OUT_SCOPES.join(", ")}`);try{return await _request(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(xe){if(isAuthError(xe))return{data:null,error:xe};throw xe}}async inviteUserByEmail(e,r={}){try{return await _request(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:_userResponse})}catch(xe){if(isAuthError(xe))return{data:{user:null},error:xe};throw xe}}async generateLink(e){try{const{options:r}=e,xe=__rest(e,["options"]),Ee=Object.assign(Object.assign({},xe),r);return"newEmail"in xe&&(Ee.new_email=xe==null?void 0:xe.newEmail,delete Ee.newEmail),await _request(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:Ee,headers:this.headers,xform:_generateLinkResponse,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(isAuthError(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await _request(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:_userResponse})}catch(r){if(isAuthError(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,xe,Ee,Ae,Pe,Re,Ce;try{const Be={nextPage:null,lastPage:0,total:0},ke=await _request(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(xe=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&xe!==void 0?xe:"",per_page:(Ae=(Ee=e==null?void 0:e.perPage)===null||Ee===void 0?void 0:Ee.toString())!==null&&Ae!==void 0?Ae:""},xform:_noResolveJsonResponse});if(ke.error)throw ke.error;const Me=await ke.json(),Fe=(Pe=ke.headers.get("x-total-count"))!==null&&Pe!==void 0?Pe:0,Ve=(Ce=(Re=ke.headers.get("link"))===null||Re===void 0?void 0:Re.split(","))!==null&&Ce!==void 0?Ce:[];return Ve.length>0&&(Ve.forEach(Oe=>{const $e=parseInt(Oe.split(";")[0].split("=")[1].substring(0,1)),Ge=JSON.parse(Oe.split(";")[1].split("=")[1]);Be[`${Ge}Page`]=$e}),Be.total=parseInt(Fe)),{data:Object.assign(Object.assign({},Me),Be),error:null}}catch(Be){if(isAuthError(Be))return{data:{users:[]},error:Be};throw Be}}async getUserById(e){validateUUID(e);try{return await _request(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:_userResponse})}catch(r){if(isAuthError(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){validateUUID(e);try{return await _request(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:_userResponse})}catch(xe){if(isAuthError(xe))return{data:{user:null},error:xe};throw xe}}async deleteUser(e,r=!1){validateUUID(e);try{return await _request(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:_userResponse})}catch(xe){if(isAuthError(xe))return{data:{user:null},error:xe};throw xe}}async _listFactors(e){validateUUID(e.userId);try{const{data:r,error:xe}=await _request(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:Ee=>({data:{factors:Ee},error:null})});return{data:r,error:xe}}catch(r){if(isAuthError(r))return{data:null,error:r};throw r}}async _deleteFactor(e){validateUUID(e.userId),validateUUID(e.id);try{return{data:await _request(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(isAuthError(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,xe,Ee,Ae,Pe,Re,Ce;try{const Be={nextPage:null,lastPage:0,total:0},ke=await _request(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(xe=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&xe!==void 0?xe:"",per_page:(Ae=(Ee=e==null?void 0:e.perPage)===null||Ee===void 0?void 0:Ee.toString())!==null&&Ae!==void 0?Ae:""},xform:_noResolveJsonResponse});if(ke.error)throw ke.error;const Me=await ke.json(),Fe=(Pe=ke.headers.get("x-total-count"))!==null&&Pe!==void 0?Pe:0,Ve=(Ce=(Re=ke.headers.get("link"))===null||Re===void 0?void 0:Re.split(","))!==null&&Ce!==void 0?Ce:[];return Ve.length>0&&(Ve.forEach(Oe=>{const $e=parseInt(Oe.split(";")[0].split("=")[1].substring(0,1)),Ge=JSON.parse(Oe.split(";")[1].split("=")[1]);Be[`${Ge}Page`]=$e}),Be.total=parseInt(Fe)),{data:Object.assign(Object.assign({},Me),Be),error:null}}catch(Be){if(isAuthError(Be))return{data:{clients:[]},error:Be};throw Be}}async _createOAuthClient(e){try{return await _request(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(isAuthError(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await _request(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(isAuthError(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await _request(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:xe=>({data:xe,error:null})})}catch(xe){if(isAuthError(xe))return{data:null,error:xe};throw xe}}async _deleteOAuthClient(e){try{return await _request(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(isAuthError(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await _request(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(isAuthError(r))return{data:null,error:r};throw r}}}function memoryLocalStorageAdapter(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const internals={debug:!!(globalThis&&supportsLocalStorage()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class LockAcquireTimeoutError extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class NavigatorLockAcquireTimeoutError extends LockAcquireTimeoutError{}async function navigatorLock(t,e,r){internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const xe=new globalThis.AbortController;return e>0&&setTimeout(()=>{xe.abort(),internals.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:xe.signal},async Ee=>{if(Ee){internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,Ee.name);try{return await r()}finally{internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,Ee.name)}}else{if(e===0)throw internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new NavigatorLockAcquireTimeoutError(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(internals.debug)try{const Ae=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(Ae,null,"  "))}catch(Ae){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",Ae)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function polyfillGlobalThis(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function getAddress(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function fromHex(t){return parseInt(t,16)}function toHex(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,xe=>xe.toString(16).padStart(2,"0")).join("")}function createSiweMessage(t){var e;const{chainId:r,domain:xe,expirationTime:Ee,issuedAt:Ae=new Date,nonce:Pe,notBefore:Re,requestId:Ce,resources:Be,scheme:ke,uri:Me,version:Fe}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!xe)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(Pe&&Pe.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${Pe}`);if(!Me)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(Fe!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${Fe}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const Ve=getAddress(t.address),Oe=ke?`${ke}://${xe}`:xe,$e=t.statement?`${t.statement}
`:"",Ge=`${Oe} wants you to sign in with your Ethereum account:
${Ve}

${$e}`;let Ue=`URI: ${Me}
Version: ${Fe}
Chain ID: ${r}${Pe?`
Nonce: ${Pe}`:""}
Issued At: ${Ae.toISOString()}`;if(Ee&&(Ue+=`
Expiration Time: ${Ee.toISOString()}`),Re&&(Ue+=`
Not Before: ${Re.toISOString()}`),Ce&&(Ue+=`
Request ID: ${Ce}`),Be){let Ye=`
Resources:`;for(const Qe of Be){if(!Qe||typeof Qe!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${Qe}`);Ye+=`
- ${Qe}`}Ue+=Ye}return`${Ge}
${Ue}`}class WebAuthnError extends Error{constructor({message:e,code:r,cause:xe,name:Ee}){var Ae;super(e,{cause:xe}),this.__isWebAuthnError=!0,this.name=(Ae=Ee??(xe instanceof Error?xe.name:void 0))!==null&&Ae!==void 0?Ae:"Unknown Error",this.code=r}}class WebAuthnUnknownError extends WebAuthnError{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function identifyRegistrationError({error:t,options:e}){var r,xe,Ee;const{publicKey:Ae}=e;if(!Ae)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new WebAuthnError({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=Ae.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new WebAuthnError({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((xe=Ae.authenticatorSelection)===null||xe===void 0?void 0:xe.userVerification)==="required")return new WebAuthnError({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((Ee=Ae.authenticatorSelection)===null||Ee===void 0?void 0:Ee.userVerification)==="required")return new WebAuthnError({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new WebAuthnError({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new WebAuthnError({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return Ae.pubKeyCredParams.filter(Re=>Re.type==="public-key").length===0?new WebAuthnError({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new WebAuthnError({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const Pe=window.location.hostname;if(isValidDomain(Pe)){if(Ae.rp.id!==Pe)return new WebAuthnError({message:`The RP ID "${Ae.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new WebAuthnError({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(Ae.user.id.byteLength<1||Ae.user.id.byteLength>64)return new WebAuthnError({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new WebAuthnError({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new WebAuthnError({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function identifyAuthenticationError({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new WebAuthnError({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new WebAuthnError({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const xe=window.location.hostname;if(isValidDomain(xe)){if(r.rpId!==xe)return new WebAuthnError({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new WebAuthnError({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new WebAuthnError({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new WebAuthnError({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class WebAuthnAbortService{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const webAuthnAbortService=new WebAuthnAbortService;function deserializeCredentialCreationOptions(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:xe}=t,Ee=__rest(t,["challenge","user","excludeCredentials"]),Ae=base64UrlToUint8Array(e).buffer,Pe=Object.assign(Object.assign({},r),{id:base64UrlToUint8Array(r.id).buffer}),Re=Object.assign(Object.assign({},Ee),{challenge:Ae,user:Pe});if(xe&&xe.length>0){Re.excludeCredentials=new Array(xe.length);for(let Ce=0;Ce<xe.length;Ce++){const Be=xe[Ce];Re.excludeCredentials[Ce]=Object.assign(Object.assign({},Be),{id:base64UrlToUint8Array(Be.id).buffer,type:Be.type||"public-key",transports:Be.transports})}}return Re}function deserializeCredentialRequestOptions(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,xe=__rest(t,["challenge","allowCredentials"]),Ee=base64UrlToUint8Array(e).buffer,Ae=Object.assign(Object.assign({},xe),{challenge:Ee});if(r&&r.length>0){Ae.allowCredentials=new Array(r.length);for(let Pe=0;Pe<r.length;Pe++){const Re=r[Pe];Ae.allowCredentials[Pe]=Object.assign(Object.assign({},Re),{id:base64UrlToUint8Array(Re.id).buffer,type:Re.type||"public-key",transports:Re.transports})}}return Ae}function serializeCredentialCreationResponse(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:bytesToBase64URL(new Uint8Array(t.response.attestationObject)),clientDataJSON:bytesToBase64URL(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function serializeCredentialRequestResponse(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,xe=t.getClientExtensionResults(),Ee=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:bytesToBase64URL(new Uint8Array(Ee.authenticatorData)),clientDataJSON:bytesToBase64URL(new Uint8Array(Ee.clientDataJSON)),signature:bytesToBase64URL(new Uint8Array(Ee.signature)),userHandle:Ee.userHandle?bytesToBase64URL(new Uint8Array(Ee.userHandle)):void 0},type:"public-key",clientExtensionResults:xe,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function isValidDomain(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function browserSupportsWebAuthn(){var t,e;return!!(isBrowser()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function createCredential(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new WebAuthnUnknownError("Browser returned unexpected credential type",e)}:{data:null,error:new WebAuthnUnknownError("Empty credential response",e)}}catch(e){return{data:null,error:identifyRegistrationError({error:e,options:t})}}}async function getCredential(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new WebAuthnUnknownError("Browser returned unexpected credential type",e)}:{data:null,error:new WebAuthnUnknownError("Empty credential response",e)}}catch(e){return{data:null,error:identifyAuthenticationError({error:e,options:t})}}}const DEFAULT_CREATION_OPTIONS={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},DEFAULT_REQUEST_OPTIONS={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function deepMerge(...t){const e=Ee=>Ee!==null&&typeof Ee=="object"&&!Array.isArray(Ee),r=Ee=>Ee instanceof ArrayBuffer||ArrayBuffer.isView(Ee),xe={};for(const Ee of t)if(Ee)for(const Ae in Ee){const Pe=Ee[Ae];if(Pe!==void 0)if(Array.isArray(Pe))xe[Ae]=Pe;else if(r(Pe))xe[Ae]=Pe;else if(e(Pe)){const Re=xe[Ae];e(Re)?xe[Ae]=deepMerge(Re,Pe):xe[Ae]=deepMerge(Pe)}else xe[Ae]=Pe}return xe}function mergeCredentialCreationOptions(t,e){return deepMerge(DEFAULT_CREATION_OPTIONS,t,e||{})}function mergeCredentialRequestOptions(t,e){return deepMerge(DEFAULT_REQUEST_OPTIONS,t,e||{})}class WebAuthnApi{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:xe,signal:Ee},Ae){try{const{data:Pe,error:Re}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!Pe)return{data:null,error:Re};const Ce=Ee??webAuthnAbortService.createNewAbortSignal();if(Pe.webauthn.type==="create"){const{user:Be}=Pe.webauthn.credential_options.publicKey;Be.name||(Be.name=`${Be.id}:${xe}`),Be.displayName||(Be.displayName=Be.name)}switch(Pe.webauthn.type){case"create":{const Be=mergeCredentialCreationOptions(Pe.webauthn.credential_options.publicKey,Ae==null?void 0:Ae.create),{data:ke,error:Me}=await createCredential({publicKey:Be,signal:Ce});return ke?{data:{factorId:e,challengeId:Pe.id,webauthn:{type:Pe.webauthn.type,credential_response:ke}},error:null}:{data:null,error:Me}}case"request":{const Be=mergeCredentialRequestOptions(Pe.webauthn.credential_options.publicKey,Ae==null?void 0:Ae.request),{data:ke,error:Me}=await getCredential(Object.assign(Object.assign({},Pe.webauthn.credential_options),{publicKey:Be,signal:Ce}));return ke?{data:{factorId:e,challengeId:Pe.id,webauthn:{type:Pe.webauthn.type,credential_response:ke}},error:null}:{data:null,error:Me}}}}catch(Pe){return isAuthError(Pe)?{data:null,error:Pe}:{data:null,error:new AuthUnknownError("Unexpected error in challenge",Pe)}}}async _verify({challengeId:e,factorId:r,webauthn:xe}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:xe})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:xe=typeof window<"u"?[window.location.origin]:void 0,signal:Ee}={}},Ae){if(!r)return{data:null,error:new AuthError("rpId is required for WebAuthn authentication")};try{if(!browserSupportsWebAuthn())return{data:null,error:new AuthUnknownError("Browser does not support WebAuthn",null)};const{data:Pe,error:Re}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:xe},signal:Ee},{request:Ae});if(!Pe)return{data:null,error:Re};const{webauthn:Ce}=Pe;return this._verify({factorId:e,challengeId:Pe.challengeId,webauthn:{type:Ce.type,rpId:r,rpOrigins:xe,credential_response:Ce.credential_response}})}catch(Pe){return isAuthError(Pe)?{data:null,error:Pe}:{data:null,error:new AuthUnknownError("Unexpected error in authenticate",Pe)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:xe=typeof window<"u"?[window.location.origin]:void 0,signal:Ee}={}},Ae){if(!r)return{data:null,error:new AuthError("rpId is required for WebAuthn registration")};try{if(!browserSupportsWebAuthn())return{data:null,error:new AuthUnknownError("Browser does not support WebAuthn",null)};const{data:Pe,error:Re}=await this._enroll({friendlyName:e});if(!Pe)return await this.client.mfa.listFactors().then(ke=>{var Me;return(Me=ke.data)===null||Me===void 0?void 0:Me.all.find(Fe=>Fe.factor_type==="webauthn"&&Fe.friendly_name===e&&Fe.status!=="unverified")}).then(ke=>ke?this.client.mfa.unenroll({factorId:ke==null?void 0:ke.id}):void 0),{data:null,error:Re};const{data:Ce,error:Be}=await this._challenge({factorId:Pe.id,friendlyName:Pe.friendly_name,webauthn:{rpId:r,rpOrigins:xe},signal:Ee},{create:Ae});return Ce?this._verify({factorId:Pe.id,challengeId:Ce.challengeId,webauthn:{rpId:r,rpOrigins:xe,type:Ce.webauthn.type,credential_response:Ce.webauthn.credential_response}}):{data:null,error:Be}}catch(Pe){return isAuthError(Pe)?{data:null,error:Pe}:{data:null,error:new AuthUnknownError("Unexpected error in register",Pe)}}}}polyfillGlobalThis();const DEFAULT_OPTIONS={url:GOTRUE_URL,storageKey:STORAGE_KEY,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:DEFAULT_HEADERS$1,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function lockNoOp(t,e,r){return await r()}const GLOBAL_JWKS={};class GoTrueClient{get jwks(){var e,r;return(r=(e=GLOBAL_JWKS[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){GLOBAL_JWKS[this.storageKey]=Object.assign(Object.assign({},GLOBAL_JWKS[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=GLOBAL_JWKS[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){GLOBAL_JWKS[this.storageKey]=Object.assign(Object.assign({},GLOBAL_JWKS[this.storageKey]),{cachedAt:e})}constructor(e){var r,xe,Ee;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const Ae=Object.assign(Object.assign({},DEFAULT_OPTIONS),e);if(this.storageKey=Ae.storageKey,this.instanceID=(r=GoTrueClient.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,GoTrueClient.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!Ae.debug,typeof Ae.debug=="function"&&(this.logger=Ae.debug),this.instanceID>0&&isBrowser()){const Pe=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(Pe),this.logDebugMessages&&console.trace(Pe)}if(this.persistSession=Ae.persistSession,this.autoRefreshToken=Ae.autoRefreshToken,this.admin=new GoTrueAdminApi({url:Ae.url,headers:Ae.headers,fetch:Ae.fetch}),this.url=Ae.url,this.headers=Ae.headers,this.fetch=resolveFetch$1(Ae.fetch),this.lock=Ae.lock||lockNoOp,this.detectSessionInUrl=Ae.detectSessionInUrl,this.flowType=Ae.flowType,this.hasCustomAuthorizationHeader=Ae.hasCustomAuthorizationHeader,this.throwOnError=Ae.throwOnError,Ae.lock?this.lock=Ae.lock:this.persistSession&&isBrowser()&&(!((xe=globalThis==null?void 0:globalThis.navigator)===null||xe===void 0)&&xe.locks)?this.lock=navigatorLock:this.lock=lockNoOp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new WebAuthnApi(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(Ae.storage?this.storage=Ae.storage:supportsLocalStorage()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)),Ae.userStorage&&(this.userStorage=Ae.userStorage)):(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)),isBrowser()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(Pe){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",Pe)}(Ee=this.broadcastChannel)===null||Ee===void 0||Ee.addEventListener("message",async Pe=>{this._debug("received broadcast notification from other tab or client",Pe),await this._notifyAllSubscribers(Pe.data.event,Pe.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${version$1}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},xe="none";if(isBrowser()&&(r=parseParametersFromURL(window.location.href),this._isImplicitGrantCallback(r)?xe="implicit":await this._isPKCECallback(r)&&(xe="pkce")),isBrowser()&&this.detectSessionInUrl&&xe!=="none"){const{data:Ee,error:Ae}=await this._getSessionFromURL(r,xe);if(Ae){if(this._debug("#_initialize()","error detecting session from URL",Ae),isAuthImplicitGrantRedirectError(Ae)){const Ce=(e=Ae.details)===null||e===void 0?void 0:e.code;if(Ce==="identity_already_exists"||Ce==="identity_not_found"||Ce==="single_identity_not_deletable")return{error:Ae}}return await this._removeSession(),{error:Ae}}const{session:Pe,redirectType:Re}=Ee;return this._debug("#_initialize()","detected session in URL",Pe,"redirect type",Re),await this._saveSession(Pe),setTimeout(async()=>{Re==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",Pe):await this._notifyAllSubscribers("SIGNED_IN",Pe)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return isAuthError(r)?this._returnResult({error:r}):this._returnResult({error:new AuthUnknownError("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,xe,Ee;try{const Ae=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(xe=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&xe!==void 0?xe:{},gotrue_meta_security:{captcha_token:(Ee=e==null?void 0:e.options)===null||Ee===void 0?void 0:Ee.captchaToken}},xform:_sessionResponse}),{data:Pe,error:Re}=Ae;if(Re||!Pe)return this._returnResult({data:{user:null,session:null},error:Re});const Ce=Pe.session,Be=Pe.user;return Pe.session&&(await this._saveSession(Pe.session),await this._notifyAllSubscribers("SIGNED_IN",Ce)),this._returnResult({data:{user:Be,session:Ce},error:null})}catch(Ae){if(isAuthError(Ae))return this._returnResult({data:{user:null,session:null},error:Ae});throw Ae}}async signUp(e){var r,xe,Ee;try{let Ae;if("email"in e){const{email:ke,password:Me,options:Fe}=e;let Ve=null,Oe=null;this.flowType==="pkce"&&([Ve,Oe]=await getCodeChallengeAndMethod(this.storage,this.storageKey)),Ae=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:Fe==null?void 0:Fe.emailRedirectTo,body:{email:ke,password:Me,data:(r=Fe==null?void 0:Fe.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:Fe==null?void 0:Fe.captchaToken},code_challenge:Ve,code_challenge_method:Oe},xform:_sessionResponse})}else if("phone"in e){const{phone:ke,password:Me,options:Fe}=e;Ae=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:ke,password:Me,data:(xe=Fe==null?void 0:Fe.data)!==null&&xe!==void 0?xe:{},channel:(Ee=Fe==null?void 0:Fe.channel)!==null&&Ee!==void 0?Ee:"sms",gotrue_meta_security:{captcha_token:Fe==null?void 0:Fe.captchaToken}},xform:_sessionResponse})}else throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");const{data:Pe,error:Re}=Ae;if(Re||!Pe)return await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:Re});const Ce=Pe.session,Be=Pe.user;return Pe.session&&(await this._saveSession(Pe.session),await this._notifyAllSubscribers("SIGNED_IN",Ce)),this._returnResult({data:{user:Be,session:Ce},error:null})}catch(Ae){if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),isAuthError(Ae))return this._returnResult({data:{user:null,session:null},error:Ae});throw Ae}}async signInWithPassword(e){try{let r;if("email"in e){const{email:Ae,password:Pe,options:Re}=e;r=await _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:Ae,password:Pe,gotrue_meta_security:{captcha_token:Re==null?void 0:Re.captchaToken}},xform:_sessionResponsePassword})}else if("phone"in e){const{phone:Ae,password:Pe,options:Re}=e;r=await _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:Ae,password:Pe,gotrue_meta_security:{captcha_token:Re==null?void 0:Re.captchaToken}},xform:_sessionResponsePassword})}else throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");const{data:xe,error:Ee}=r;if(Ee)return this._returnResult({data:{user:null,session:null},error:Ee});if(!xe||!xe.session||!xe.user){const Ae=new AuthInvalidTokenResponseError;return this._returnResult({data:{user:null,session:null},error:Ae})}return xe.session&&(await this._saveSession(xe.session),await this._notifyAllSubscribers("SIGNED_IN",xe.session)),this._returnResult({data:Object.assign({user:xe.user,session:xe.session},xe.weak_password?{weakPassword:xe.weak_password}:null),error:Ee})}catch(r){if(isAuthError(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,xe,Ee,Ae;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(xe=e.options)===null||xe===void 0?void 0:xe.scopes,queryParams:(Ee=e.options)===null||Ee===void 0?void 0:Ee.queryParams,skipBrowserRedirect:(Ae=e.options)===null||Ae===void 0?void 0:Ae.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,xe,Ee,Ae,Pe,Re,Ce,Be,ke,Me,Fe;let Ve,Oe;if("message"in e)Ve=e.message,Oe=e.signature;else{const{chain:$e,wallet:Ge,statement:Ue,options:Ye}=e;let Qe;if(isBrowser())if(typeof Ge=="object")Qe=Ge;else{const sn=window;if("ethereum"in sn&&typeof sn.ethereum=="object"&&"request"in sn.ethereum&&typeof sn.ethereum.request=="function")Qe=sn.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof Ge!="object"||!(Ye!=null&&Ye.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Qe=Ge}const rn=new URL((r=Ye==null?void 0:Ye.url)!==null&&r!==void 0?r:window.location.href),tn=await Qe.request({method:"eth_requestAccounts"}).then(sn=>sn).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!tn||tn.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const an=getAddress(tn[0]);let qe=(xe=Ye==null?void 0:Ye.signInWithEthereum)===null||xe===void 0?void 0:xe.chainId;if(!qe){const sn=await Qe.request({method:"eth_chainId"});qe=fromHex(sn)}const Ke={domain:rn.host,address:an,statement:Ue,uri:rn.href,version:"1",chainId:qe,nonce:(Ee=Ye==null?void 0:Ye.signInWithEthereum)===null||Ee===void 0?void 0:Ee.nonce,issuedAt:(Pe=(Ae=Ye==null?void 0:Ye.signInWithEthereum)===null||Ae===void 0?void 0:Ae.issuedAt)!==null&&Pe!==void 0?Pe:new Date,expirationTime:(Re=Ye==null?void 0:Ye.signInWithEthereum)===null||Re===void 0?void 0:Re.expirationTime,notBefore:(Ce=Ye==null?void 0:Ye.signInWithEthereum)===null||Ce===void 0?void 0:Ce.notBefore,requestId:(Be=Ye==null?void 0:Ye.signInWithEthereum)===null||Be===void 0?void 0:Be.requestId,resources:(ke=Ye==null?void 0:Ye.signInWithEthereum)===null||ke===void 0?void 0:ke.resources};Ve=createSiweMessage(Ke),Oe=await Qe.request({method:"personal_sign",params:[toHex(Ve),an]})}try{const{data:$e,error:Ge}=await _request(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:Ve,signature:Oe},!((Me=e.options)===null||Me===void 0)&&Me.captchaToken?{gotrue_meta_security:{captcha_token:(Fe=e.options)===null||Fe===void 0?void 0:Fe.captchaToken}}:null),xform:_sessionResponse});if(Ge)throw Ge;if(!$e||!$e.session||!$e.user){const Ue=new AuthInvalidTokenResponseError;return this._returnResult({data:{user:null,session:null},error:Ue})}return $e.session&&(await this._saveSession($e.session),await this._notifyAllSubscribers("SIGNED_IN",$e.session)),this._returnResult({data:Object.assign({},$e),error:Ge})}catch($e){if(isAuthError($e))return this._returnResult({data:{user:null,session:null},error:$e});throw $e}}async signInWithSolana(e){var r,xe,Ee,Ae,Pe,Re,Ce,Be,ke,Me,Fe,Ve;let Oe,$e;if("message"in e)Oe=e.message,$e=e.signature;else{const{chain:Ge,wallet:Ue,statement:Ye,options:Qe}=e;let rn;if(isBrowser())if(typeof Ue=="object")rn=Ue;else{const an=window;if("solana"in an&&typeof an.solana=="object"&&("signIn"in an.solana&&typeof an.solana.signIn=="function"||"signMessage"in an.solana&&typeof an.solana.signMessage=="function"))rn=an.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof Ue!="object"||!(Qe!=null&&Qe.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");rn=Ue}const tn=new URL((r=Qe==null?void 0:Qe.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in rn&&rn.signIn){const an=await rn.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},Qe==null?void 0:Qe.signInWithSolana),{version:"1",domain:tn.host,uri:tn.href}),Ye?{statement:Ye}:null));let qe;if(Array.isArray(an)&&an[0]&&typeof an[0]=="object")qe=an[0];else if(an&&typeof an=="object"&&"signedMessage"in an&&"signature"in an)qe=an;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in qe&&"signature"in qe&&(typeof qe.signedMessage=="string"||qe.signedMessage instanceof Uint8Array)&&qe.signature instanceof Uint8Array)Oe=typeof qe.signedMessage=="string"?qe.signedMessage:new TextDecoder().decode(qe.signedMessage),$e=qe.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in rn)||typeof rn.signMessage!="function"||!("publicKey"in rn)||typeof rn!="object"||!rn.publicKey||!("toBase58"in rn.publicKey)||typeof rn.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");Oe=[`${tn.host} wants you to sign in with your Solana account:`,rn.publicKey.toBase58(),...Ye?["",Ye,""]:[""],"Version: 1",`URI: ${tn.href}`,`Issued At: ${(Ee=(xe=Qe==null?void 0:Qe.signInWithSolana)===null||xe===void 0?void 0:xe.issuedAt)!==null&&Ee!==void 0?Ee:new Date().toISOString()}`,...!((Ae=Qe==null?void 0:Qe.signInWithSolana)===null||Ae===void 0)&&Ae.notBefore?[`Not Before: ${Qe.signInWithSolana.notBefore}`]:[],...!((Pe=Qe==null?void 0:Qe.signInWithSolana)===null||Pe===void 0)&&Pe.expirationTime?[`Expiration Time: ${Qe.signInWithSolana.expirationTime}`]:[],...!((Re=Qe==null?void 0:Qe.signInWithSolana)===null||Re===void 0)&&Re.chainId?[`Chain ID: ${Qe.signInWithSolana.chainId}`]:[],...!((Ce=Qe==null?void 0:Qe.signInWithSolana)===null||Ce===void 0)&&Ce.nonce?[`Nonce: ${Qe.signInWithSolana.nonce}`]:[],...!((Be=Qe==null?void 0:Qe.signInWithSolana)===null||Be===void 0)&&Be.requestId?[`Request ID: ${Qe.signInWithSolana.requestId}`]:[],...!((Me=(ke=Qe==null?void 0:Qe.signInWithSolana)===null||ke===void 0?void 0:ke.resources)===null||Me===void 0)&&Me.length?["Resources",...Qe.signInWithSolana.resources.map(qe=>`- ${qe}`)]:[]].join(`
`);const an=await rn.signMessage(new TextEncoder().encode(Oe),"utf8");if(!an||!(an instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");$e=an}}try{const{data:Ge,error:Ue}=await _request(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:Oe,signature:bytesToBase64URL($e)},!((Fe=e.options)===null||Fe===void 0)&&Fe.captchaToken?{gotrue_meta_security:{captcha_token:(Ve=e.options)===null||Ve===void 0?void 0:Ve.captchaToken}}:null),xform:_sessionResponse});if(Ue)throw Ue;if(!Ge||!Ge.session||!Ge.user){const Ye=new AuthInvalidTokenResponseError;return this._returnResult({data:{user:null,session:null},error:Ye})}return Ge.session&&(await this._saveSession(Ge.session),await this._notifyAllSubscribers("SIGNED_IN",Ge.session)),this._returnResult({data:Object.assign({},Ge),error:Ue})}catch(Ge){if(isAuthError(Ge))return this._returnResult({data:{user:null,session:null},error:Ge});throw Ge}}async _exchangeCodeForSession(e){const r=await getItemAsync(this.storage,`${this.storageKey}-code-verifier`),[xe,Ee]=(r??"").split("/");try{if(!xe&&this.flowType==="pkce")throw new AuthPKCECodeVerifierMissingError;const{data:Ae,error:Pe}=await _request(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:xe},xform:_sessionResponse});if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),Pe)throw Pe;if(!Ae||!Ae.session||!Ae.user){const Re=new AuthInvalidTokenResponseError;return this._returnResult({data:{user:null,session:null,redirectType:null},error:Re})}return Ae.session&&(await this._saveSession(Ae.session),await this._notifyAllSubscribers("SIGNED_IN",Ae.session)),this._returnResult({data:Object.assign(Object.assign({},Ae),{redirectType:Ee??null}),error:Pe})}catch(Ae){if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),isAuthError(Ae))return this._returnResult({data:{user:null,session:null,redirectType:null},error:Ae});throw Ae}}async signInWithIdToken(e){try{const{options:r,provider:xe,token:Ee,access_token:Ae,nonce:Pe}=e,Re=await _request(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:xe,id_token:Ee,access_token:Ae,nonce:Pe,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:_sessionResponse}),{data:Ce,error:Be}=Re;if(Be)return this._returnResult({data:{user:null,session:null},error:Be});if(!Ce||!Ce.session||!Ce.user){const ke=new AuthInvalidTokenResponseError;return this._returnResult({data:{user:null,session:null},error:ke})}return Ce.session&&(await this._saveSession(Ce.session),await this._notifyAllSubscribers("SIGNED_IN",Ce.session)),this._returnResult({data:Ce,error:Be})}catch(r){if(isAuthError(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,xe,Ee,Ae,Pe;try{if("email"in e){const{email:Re,options:Ce}=e;let Be=null,ke=null;this.flowType==="pkce"&&([Be,ke]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const{error:Me}=await _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:Re,data:(r=Ce==null?void 0:Ce.data)!==null&&r!==void 0?r:{},create_user:(xe=Ce==null?void 0:Ce.shouldCreateUser)!==null&&xe!==void 0?xe:!0,gotrue_meta_security:{captcha_token:Ce==null?void 0:Ce.captchaToken},code_challenge:Be,code_challenge_method:ke},redirectTo:Ce==null?void 0:Ce.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:Me})}if("phone"in e){const{phone:Re,options:Ce}=e,{data:Be,error:ke}=await _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:Re,data:(Ee=Ce==null?void 0:Ce.data)!==null&&Ee!==void 0?Ee:{},create_user:(Ae=Ce==null?void 0:Ce.shouldCreateUser)!==null&&Ae!==void 0?Ae:!0,gotrue_meta_security:{captcha_token:Ce==null?void 0:Ce.captchaToken},channel:(Pe=Ce==null?void 0:Ce.channel)!==null&&Pe!==void 0?Pe:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:Be==null?void 0:Be.message_id},error:ke})}throw new AuthInvalidCredentialsError("You must provide either an email or phone number.")}catch(Re){if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),isAuthError(Re))return this._returnResult({data:{user:null,session:null},error:Re});throw Re}}async verifyOtp(e){var r,xe;try{let Ee,Ae;"options"in e&&(Ee=(r=e.options)===null||r===void 0?void 0:r.redirectTo,Ae=(xe=e.options)===null||xe===void 0?void 0:xe.captchaToken);const{data:Pe,error:Re}=await _request(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:Ae}}),redirectTo:Ee,xform:_sessionResponse});if(Re)throw Re;if(!Pe)throw new Error("An error occurred on token verification.");const Ce=Pe.session,Be=Pe.user;return Ce!=null&&Ce.access_token&&(await this._saveSession(Ce),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",Ce)),this._returnResult({data:{user:Be,session:Ce},error:null})}catch(Ee){if(isAuthError(Ee))return this._returnResult({data:{user:null,session:null},error:Ee});throw Ee}}async signInWithSSO(e){var r,xe,Ee,Ae,Pe;try{let Re=null,Ce=null;this.flowType==="pkce"&&([Re,Ce]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const Be=await _request(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(xe=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&xe!==void 0?xe:void 0}),!((Ee=e==null?void 0:e.options)===null||Ee===void 0)&&Ee.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:Re,code_challenge_method:Ce}),headers:this.headers,xform:_ssoResponse});return!((Ae=Be.data)===null||Ae===void 0)&&Ae.url&&isBrowser()&&!(!((Pe=e.options)===null||Pe===void 0)&&Pe.skipBrowserRedirect)&&window.location.assign(Be.data.url),this._returnResult(Be)}catch(Re){if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),isAuthError(Re))return this._returnResult({data:null,error:Re});throw Re}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:xe}=e;if(xe)throw xe;if(!r)throw new AuthSessionMissingError;const{error:Ee}=await _request(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:Ee})})}catch(e){if(isAuthError(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:xe,type:Ee,options:Ae}=e,{error:Pe}=await _request(this.fetch,"POST",r,{headers:this.headers,body:{email:xe,type:Ee,gotrue_meta_security:{captcha_token:Ae==null?void 0:Ae.captchaToken}},redirectTo:Ae==null?void 0:Ae.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:Pe})}else if("phone"in e){const{phone:xe,type:Ee,options:Ae}=e,{data:Pe,error:Re}=await _request(this.fetch,"POST",r,{headers:this.headers,body:{phone:xe,type:Ee,gotrue_meta_security:{captcha_token:Ae==null?void 0:Ae.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:Pe==null?void 0:Pe.message_id},error:Re})}throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a type")}catch(r){if(isAuthError(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const xe=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),Ee=(async()=>(await xe,await r()))();return this.pendingInLock.push((async()=>{try{await Ee}catch{}})()),Ee}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const xe=r();for(this.pendingInLock.push((async()=>{try{await xe}catch{}})()),await xe;this.pendingInLock.length;){const Ee=[...this.pendingInLock];await Promise.all(Ee),this.pendingInLock.splice(0,Ee.length)}return await xe}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await getItemAsync(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const xe=e.expires_at?e.expires_at*1e3-Date.now()<EXPIRY_MARGIN_MS:!1;if(this._debug("#__loadSession()",`session has${xe?"":" not"} expired`,"expires_at",e.expires_at),!xe){if(this.userStorage){const Pe=await getItemAsync(this.userStorage,this.storageKey+"-user");Pe!=null&&Pe.user?e.user=Pe.user:e.user=userNotAvailableProxy()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const Pe={value:this.suppressGetSessionWarning};e.user=insecureUserWarningProxy(e.user,Pe),Pe.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:Ee,error:Ae}=await this._callRefreshToken(e.refresh_token);return Ae?this._returnResult({data:{session:null},error:Ae}):this._returnResult({data:{session:Ee},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(e){try{return e?await _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:_userResponse}):await this._useSession(async r=>{var xe,Ee,Ae;const{data:Pe,error:Re}=r;if(Re)throw Re;return!(!((xe=Pe.session)===null||xe===void 0)&&xe.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new AuthSessionMissingError}:await _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(Ae=(Ee=Pe.session)===null||Ee===void 0?void 0:Ee.access_token)!==null&&Ae!==void 0?Ae:void 0,xform:_userResponse})})}catch(r){if(isAuthError(r))return isAuthSessionMissingError(r)&&(await this._removeSession(),await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async xe=>{const{data:Ee,error:Ae}=xe;if(Ae)throw Ae;if(!Ee.session)throw new AuthSessionMissingError;const Pe=Ee.session;let Re=null,Ce=null;this.flowType==="pkce"&&e.email!=null&&([Re,Ce]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const{data:Be,error:ke}=await _request(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:Re,code_challenge_method:Ce}),jwt:Pe.access_token,xform:_userResponse});if(ke)throw ke;return Pe.user=Be.user,await this._saveSession(Pe),await this._notifyAllSubscribers("USER_UPDATED",Pe),this._returnResult({data:{user:Pe.user},error:null})})}catch(xe){if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),isAuthError(xe))return this._returnResult({data:{user:null},error:xe});throw xe}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new AuthSessionMissingError;const r=Date.now()/1e3;let xe=r,Ee=!0,Ae=null;const{payload:Pe}=decodeJWT(e.access_token);if(Pe.exp&&(xe=Pe.exp,Ee=xe<=r),Ee){const{data:Re,error:Ce}=await this._callRefreshToken(e.refresh_token);if(Ce)return this._returnResult({data:{user:null,session:null},error:Ce});if(!Re)return{data:{user:null,session:null},error:null};Ae=Re}else{const{data:Re,error:Ce}=await this._getUser(e.access_token);if(Ce)throw Ce;Ae={access_token:e.access_token,refresh_token:e.refresh_token,user:Re.user,token_type:"bearer",expires_in:xe-r,expires_at:xe},await this._saveSession(Ae),await this._notifyAllSubscribers("SIGNED_IN",Ae)}return this._returnResult({data:{user:Ae.user,session:Ae},error:null})}catch(r){if(isAuthError(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var xe;if(!e){const{data:Pe,error:Re}=r;if(Re)throw Re;e=(xe=Pe.session)!==null&&xe!==void 0?xe:void 0}if(!(e!=null&&e.refresh_token))throw new AuthSessionMissingError;const{data:Ee,error:Ae}=await this._callRefreshToken(e.refresh_token);return Ae?this._returnResult({data:{user:null,session:null},error:Ae}):Ee?this._returnResult({data:{user:Ee.user,session:Ee},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(isAuthError(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!isBrowser())throw new AuthImplicitGrantRedirectError("No browser detected.");if(e.error||e.error_description||e.error_code)throw new AuthImplicitGrantRedirectError(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new AuthPKCEGrantCodeExchangeError("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new AuthImplicitGrantRedirectError("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new AuthPKCEGrantCodeExchangeError("No code detected.");const{data:Ye,error:Qe}=await this._exchangeCodeForSession(e.code);if(Qe)throw Qe;const rn=new URL(window.location.href);return rn.searchParams.delete("code"),window.history.replaceState(window.history.state,"",rn.toString()),{data:{session:Ye.session,redirectType:null},error:null}}const{provider_token:xe,provider_refresh_token:Ee,access_token:Ae,refresh_token:Pe,expires_in:Re,expires_at:Ce,token_type:Be}=e;if(!Ae||!Re||!Pe||!Be)throw new AuthImplicitGrantRedirectError("No session defined in URL");const ke=Math.round(Date.now()/1e3),Me=parseInt(Re);let Fe=ke+Me;Ce&&(Fe=parseInt(Ce));const Ve=Fe-ke;Ve*1e3<=AUTO_REFRESH_TICK_DURATION_MS&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${Ve}s, should have been closer to ${Me}s`);const Oe=Fe-Me;ke-Oe>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",Oe,Fe,ke):ke-Oe<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",Oe,Fe,ke);const{data:$e,error:Ge}=await this._getUser(Ae);if(Ge)throw Ge;const Ue={provider_token:xe,provider_refresh_token:Ee,access_token:Ae,expires_in:Me,expires_at:Fe,refresh_token:Pe,token_type:Be,user:$e.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:Ue,redirectType:e.type},error:null})}catch(xe){if(isAuthError(xe))return this._returnResult({data:{session:null,redirectType:null},error:xe});throw xe}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await getItemAsync(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var xe;const{data:Ee,error:Ae}=r;if(Ae)return this._returnResult({error:Ae});const Pe=(xe=Ee.session)===null||xe===void 0?void 0:xe.access_token;if(Pe){const{error:Re}=await this.admin.signOut(Pe,e);if(Re&&!(isAuthApiError(Re)&&(Re.status===404||Re.status===401||Re.status===403)))return this._returnResult({error:Re})}return e!=="others"&&(await this._removeSession(),await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=generateCallbackId(),xe={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,xe),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:xe}}}async _emitInitialSession(e){return await this._useSession(async r=>{var xe,Ee;try{const{data:{session:Ae},error:Pe}=r;if(Pe)throw Pe;await((xe=this.stateChangeEmitters.get(e))===null||xe===void 0?void 0:xe.callback("INITIAL_SESSION",Ae)),this._debug("INITIAL_SESSION","callback id",e,"session",Ae)}catch(Ae){await((Ee=this.stateChangeEmitters.get(e))===null||Ee===void 0?void 0:Ee.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",Ae),console.error(Ae)}})}async resetPasswordForEmail(e,r={}){let xe=null,Ee=null;this.flowType==="pkce"&&([xe,Ee]=await getCodeChallengeAndMethod(this.storage,this.storageKey,!0));try{return await _request(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:xe,code_challenge_method:Ee,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(Ae){if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),isAuthError(Ae))return this._returnResult({data:null,error:Ae});throw Ae}}async getUserIdentities(){var e;try{const{data:r,error:xe}=await this.getUser();if(xe)throw xe;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(isAuthError(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:xe,error:Ee}=await this._useSession(async Ae=>{var Pe,Re,Ce,Be,ke;const{data:Me,error:Fe}=Ae;if(Fe)throw Fe;const Ve=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(Pe=e.options)===null||Pe===void 0?void 0:Pe.redirectTo,scopes:(Re=e.options)===null||Re===void 0?void 0:Re.scopes,queryParams:(Ce=e.options)===null||Ce===void 0?void 0:Ce.queryParams,skipBrowserRedirect:!0});return await _request(this.fetch,"GET",Ve,{headers:this.headers,jwt:(ke=(Be=Me.session)===null||Be===void 0?void 0:Be.access_token)!==null&&ke!==void 0?ke:void 0})});if(Ee)throw Ee;return isBrowser()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(xe==null?void 0:xe.url),this._returnResult({data:{provider:e.provider,url:xe==null?void 0:xe.url},error:null})}catch(xe){if(isAuthError(xe))return this._returnResult({data:{provider:e.provider,url:null},error:xe});throw xe}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var xe;try{const{error:Ee,data:{session:Ae}}=r;if(Ee)throw Ee;const{options:Pe,provider:Re,token:Ce,access_token:Be,nonce:ke}=e,Me=await _request(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(xe=Ae==null?void 0:Ae.access_token)!==null&&xe!==void 0?xe:void 0,body:{provider:Re,id_token:Ce,access_token:Be,nonce:ke,link_identity:!0,gotrue_meta_security:{captcha_token:Pe==null?void 0:Pe.captchaToken}},xform:_sessionResponse}),{data:Fe,error:Ve}=Me;return Ve?this._returnResult({data:{user:null,session:null},error:Ve}):!Fe||!Fe.session||!Fe.user?this._returnResult({data:{user:null,session:null},error:new AuthInvalidTokenResponseError}):(Fe.session&&(await this._saveSession(Fe.session),await this._notifyAllSubscribers("USER_UPDATED",Fe.session)),this._returnResult({data:Fe,error:Ve}))}catch(Ee){if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),isAuthError(Ee))return this._returnResult({data:{user:null,session:null},error:Ee});throw Ee}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var xe,Ee;const{data:Ae,error:Pe}=r;if(Pe)throw Pe;return await _request(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(Ee=(xe=Ae.session)===null||xe===void 0?void 0:xe.access_token)!==null&&Ee!==void 0?Ee:void 0})})}catch(r){if(isAuthError(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const xe=Date.now();return await retryable(async Ee=>(Ee>0&&await sleep(200*Math.pow(2,Ee-1)),this._debug(r,"refreshing attempt",Ee),await _request(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:_sessionResponse})),(Ee,Ae)=>{const Pe=200*Math.pow(2,Ee);return Ae&&isAuthRetryableFetchError(Ae)&&Date.now()+Pe-xe<AUTO_REFRESH_TICK_DURATION_MS})}catch(xe){if(this._debug(r,"error",xe),isAuthError(xe))return this._returnResult({data:{session:null,user:null},error:xe});throw xe}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const xe=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",xe),isBrowser()&&!r.skipBrowserRedirect&&window.location.assign(xe),{data:{provider:e,url:xe},error:null}}async _recoverAndRefresh(){var e,r;const xe="#_recoverAndRefresh()";this._debug(xe,"begin");try{const Ee=await getItemAsync(this.storage,this.storageKey);if(Ee&&this.userStorage){let Pe=await getItemAsync(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!Pe&&(Pe={user:Ee.user},await setItemAsync(this.userStorage,this.storageKey+"-user",Pe)),Ee.user=(e=Pe==null?void 0:Pe.user)!==null&&e!==void 0?e:userNotAvailableProxy()}else if(Ee&&!Ee.user&&!Ee.user){const Pe=await getItemAsync(this.storage,this.storageKey+"-user");Pe&&(Pe!=null&&Pe.user)?(Ee.user=Pe.user,await removeItemAsync(this.storage,this.storageKey+"-user"),await setItemAsync(this.storage,this.storageKey,Ee)):Ee.user=userNotAvailableProxy()}if(this._debug(xe,"session from storage",Ee),!this._isValidSession(Ee)){this._debug(xe,"session is not valid"),Ee!==null&&await this._removeSession();return}const Ae=((r=Ee.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<EXPIRY_MARGIN_MS;if(this._debug(xe,`session has${Ae?"":" not"} expired with margin of ${EXPIRY_MARGIN_MS}s`),Ae){if(this.autoRefreshToken&&Ee.refresh_token){const{error:Pe}=await this._callRefreshToken(Ee.refresh_token);Pe&&(console.error(Pe),isAuthRetryableFetchError(Pe)||(this._debug(xe,"refresh failed with a non-retryable error, removing the session",Pe),await this._removeSession()))}}else if(Ee.user&&Ee.user.__isUserNotAvailableProxy===!0)try{const{data:Pe,error:Re}=await this._getUser(Ee.access_token);!Re&&(Pe!=null&&Pe.user)?(Ee.user=Pe.user,await this._saveSession(Ee),await this._notifyAllSubscribers("SIGNED_IN",Ee)):this._debug(xe,"could not get user data, skipping SIGNED_IN notification")}catch(Pe){console.error("Error getting user data:",Pe),this._debug(xe,"error getting user data, skipping SIGNED_IN notification",Pe)}else await this._notifyAllSubscribers("SIGNED_IN",Ee)}catch(Ee){this._debug(xe,"error",Ee),console.error(Ee);return}finally{this._debug(xe,"end")}}async _callRefreshToken(e){var r,xe;if(!e)throw new AuthSessionMissingError;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const Ee=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(Ee,"begin");try{this.refreshingDeferred=new Deferred;const{data:Ae,error:Pe}=await this._refreshAccessToken(e);if(Pe)throw Pe;if(!Ae.session)throw new AuthSessionMissingError;await this._saveSession(Ae.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",Ae.session);const Re={data:Ae.session,error:null};return this.refreshingDeferred.resolve(Re),Re}catch(Ae){if(this._debug(Ee,"error",Ae),isAuthError(Ae)){const Pe={data:null,error:Ae};return isAuthRetryableFetchError(Ae)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(Pe),Pe}throw(xe=this.refreshingDeferred)===null||xe===void 0||xe.reject(Ae),Ae}finally{this.refreshingDeferred=null,this._debug(Ee,"end")}}async _notifyAllSubscribers(e,r,xe=!0){const Ee=`#_notifyAllSubscribers(${e})`;this._debug(Ee,"begin",r,`broadcast = ${xe}`);try{this.broadcastChannel&&xe&&this.broadcastChannel.postMessage({event:e,session:r});const Ae=[],Pe=Array.from(this.stateChangeEmitters.values()).map(async Re=>{try{await Re.callback(e,r)}catch(Ce){Ae.push(Ce)}});if(await Promise.all(Pe),Ae.length>0){for(let Re=0;Re<Ae.length;Re+=1)console.error(Ae[Re]);throw Ae[0]}}finally{this._debug(Ee,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},e),xe=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!xe&&r.user&&await setItemAsync(this.userStorage,this.storageKey+"-user",{user:r.user});const Ee=Object.assign({},r);delete Ee.user;const Ae=deepClone(Ee);await setItemAsync(this.storage,this.storageKey,Ae)}else{const Ee=deepClone(r);await setItemAsync(this.storage,this.storageKey,Ee)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await removeItemAsync(this.storage,this.storageKey),await removeItemAsync(this.storage,this.storageKey+"-code-verifier"),await removeItemAsync(this.storage,this.storageKey+"-user"),this.userStorage&&await removeItemAsync(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&isBrowser()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),AUTO_REFRESH_TICK_DURATION_MS);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:xe}}=r;if(!xe||!xe.refresh_token||!xe.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const Ee=Math.floor((xe.expires_at*1e3-e)/AUTO_REFRESH_TICK_DURATION_MS);this._debug("#_autoRefreshTokenTick()",`access token expires in ${Ee} ticks, a tick lasts ${AUTO_REFRESH_TICK_DURATION_MS}ms, refresh threshold is ${AUTO_REFRESH_TICK_THRESHOLD} ticks`),Ee<=AUTO_REFRESH_TICK_THRESHOLD&&await this._callRefreshToken(xe.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof LockAcquireTimeoutError)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!isBrowser()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,xe){const Ee=[`provider=${encodeURIComponent(r)}`];if(xe!=null&&xe.redirectTo&&Ee.push(`redirect_to=${encodeURIComponent(xe.redirectTo)}`),xe!=null&&xe.scopes&&Ee.push(`scopes=${encodeURIComponent(xe.scopes)}`),this.flowType==="pkce"){const[Ae,Pe]=await getCodeChallengeAndMethod(this.storage,this.storageKey),Re=new URLSearchParams({code_challenge:`${encodeURIComponent(Ae)}`,code_challenge_method:`${encodeURIComponent(Pe)}`});Ee.push(Re.toString())}if(xe!=null&&xe.queryParams){const Ae=new URLSearchParams(xe.queryParams);Ee.push(Ae.toString())}return xe!=null&&xe.skipBrowserRedirect&&Ee.push(`skip_http_redirect=${xe.skipBrowserRedirect}`),`${e}?${Ee.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var xe;const{data:Ee,error:Ae}=r;return Ae?this._returnResult({data:null,error:Ae}):await _request(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(xe=Ee==null?void 0:Ee.session)===null||xe===void 0?void 0:xe.access_token})})}catch(r){if(isAuthError(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var xe,Ee;const{data:Ae,error:Pe}=r;if(Pe)return this._returnResult({data:null,error:Pe});const Re=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:Ce,error:Be}=await _request(this.fetch,"POST",`${this.url}/factors`,{body:Re,headers:this.headers,jwt:(xe=Ae==null?void 0:Ae.session)===null||xe===void 0?void 0:xe.access_token});return Be?this._returnResult({data:null,error:Be}):(e.factorType==="totp"&&Ce.type==="totp"&&(!((Ee=Ce==null?void 0:Ce.totp)===null||Ee===void 0)&&Ee.qr_code)&&(Ce.totp.qr_code=`data:image/svg+xml;utf-8,${Ce.totp.qr_code}`),this._returnResult({data:Ce,error:null}))})}catch(r){if(isAuthError(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var xe;const{data:Ee,error:Ae}=r;if(Ae)return this._returnResult({data:null,error:Ae});const Pe=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?serializeCredentialCreationResponse(e.webauthn.credential_response):serializeCredentialRequestResponse(e.webauthn.credential_response)})}:{code:e.code}),{data:Re,error:Ce}=await _request(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:Pe,headers:this.headers,jwt:(xe=Ee==null?void 0:Ee.session)===null||xe===void 0?void 0:xe.access_token});return Ce?this._returnResult({data:null,error:Ce}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+Re.expires_in},Re)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",Re),this._returnResult({data:Re,error:Ce}))})}catch(r){if(isAuthError(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var xe;const{data:Ee,error:Ae}=r;if(Ae)return this._returnResult({data:null,error:Ae});const Pe=await _request(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(xe=Ee==null?void 0:Ee.session)===null||xe===void 0?void 0:xe.access_token});if(Pe.error)return Pe;const{data:Re}=Pe;if(Re.type!=="webauthn")return{data:Re,error:null};switch(Re.webauthn.type){case"create":return{data:Object.assign(Object.assign({},Re),{webauthn:Object.assign(Object.assign({},Re.webauthn),{credential_options:Object.assign(Object.assign({},Re.webauthn.credential_options),{publicKey:deserializeCredentialCreationOptions(Re.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},Re),{webauthn:Object.assign(Object.assign({},Re.webauthn),{credential_options:Object.assign(Object.assign({},Re.webauthn.credential_options),{publicKey:deserializeCredentialRequestOptions(Re.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(isAuthError(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:xe}=await this._challenge({factorId:e.factorId});return xe?this._returnResult({data:null,error:xe}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:xe}=await this.getUser();if(xe)return{data:null,error:xe};const Ee={all:[],phone:[],totp:[],webauthn:[]};for(const Ae of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])Ee.all.push(Ae),Ae.status==="verified"&&Ee[Ae.factor_type].push(Ae);return{data:Ee,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:xe},error:Ee}=await this.getSession();if(Ee)return this._returnResult({data:null,error:Ee});if(!xe)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:Ae}=decodeJWT(xe.access_token);let Pe=null;Ae.aal&&(Pe=Ae.aal);let Re=Pe;((r=(e=xe.user.factors)===null||e===void 0?void 0:e.filter(ke=>ke.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(Re="aal2");const Be=Ae.amr||[];return{data:{currentLevel:Pe,nextLevel:Re,currentAuthenticationMethods:Be},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:xe},error:Ee}=r;return Ee?this._returnResult({data:null,error:Ee}):xe?await _request(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:xe.access_token,xform:Ae=>({data:Ae,error:null})}):this._returnResult({data:null,error:new AuthSessionMissingError})})}catch(r){if(isAuthError(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async xe=>{const{data:{session:Ee},error:Ae}=xe;if(Ae)return this._returnResult({data:null,error:Ae});if(!Ee)return this._returnResult({data:null,error:new AuthSessionMissingError});const Pe=await _request(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:Ee.access_token,body:{action:"approve"},xform:Re=>({data:Re,error:null})});return Pe.data&&Pe.data.redirect_url&&isBrowser()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(Pe.data.redirect_url),Pe})}catch(xe){if(isAuthError(xe))return this._returnResult({data:null,error:xe});throw xe}}async _denyAuthorization(e,r){try{return await this._useSession(async xe=>{const{data:{session:Ee},error:Ae}=xe;if(Ae)return this._returnResult({data:null,error:Ae});if(!Ee)return this._returnResult({data:null,error:new AuthSessionMissingError});const Pe=await _request(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:Ee.access_token,body:{action:"deny"},xform:Re=>({data:Re,error:null})});return Pe.data&&Pe.data.redirect_url&&isBrowser()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(Pe.data.redirect_url),Pe})}catch(xe){if(isAuthError(xe))return this._returnResult({data:null,error:xe});throw xe}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:xe}=e;return xe?this._returnResult({data:null,error:xe}):r?await _request(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:Ee=>({data:Ee,error:null})}):this._returnResult({data:null,error:new AuthSessionMissingError})})}catch(e){if(isAuthError(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:xe},error:Ee}=r;return Ee?this._returnResult({data:null,error:Ee}):xe?(await _request(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:xe.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new AuthSessionMissingError})})}catch(r){if(isAuthError(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let xe=r.keys.find(Re=>Re.kid===e);if(xe)return xe;const Ee=Date.now();if(xe=this.jwks.keys.find(Re=>Re.kid===e),xe&&this.jwks_cached_at+JWKS_TTL>Ee)return xe;const{data:Ae,error:Pe}=await _request(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(Pe)throw Pe;return!Ae.keys||Ae.keys.length===0||(this.jwks=Ae,this.jwks_cached_at=Ee,xe=Ae.keys.find(Re=>Re.kid===e),!xe)?null:xe}async getClaims(e,r={}){try{let xe=e;if(!xe){const{data:Ve,error:Oe}=await this.getSession();if(Oe||!Ve.session)return this._returnResult({data:null,error:Oe});xe=Ve.session.access_token}const{header:Ee,payload:Ae,signature:Pe,raw:{header:Re,payload:Ce}}=decodeJWT(xe);r!=null&&r.allowExpired||validateExp(Ae.exp);const Be=!Ee.alg||Ee.alg.startsWith("HS")||!Ee.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(Ee.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!Be){const{error:Ve}=await this.getUser(xe);if(Ve)throw Ve;return{data:{claims:Ae,header:Ee,signature:Pe},error:null}}const ke=getAlgorithm(Ee.alg),Me=await crypto.subtle.importKey("jwk",Be,ke,!0,["verify"]);if(!await crypto.subtle.verify(ke,Me,Pe,stringToUint8Array(`${Re}.${Ce}`)))throw new AuthInvalidJwtError("Invalid JWT signature");return{data:{claims:Ae,header:Ee,signature:Pe},error:null}}catch(xe){if(isAuthError(xe))return this._returnResult({data:null,error:xe});throw xe}}}GoTrueClient.nextInstanceID={};const AuthClient=GoTrueClient,version="2.89.0";let JS_ENV="";typeof Deno<"u"?JS_ENV="deno":typeof document<"u"?JS_ENV="web":typeof navigator<"u"&&navigator.product==="ReactNative"?JS_ENV="react-native":JS_ENV="node";const DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${JS_ENV}/${version}`},DEFAULT_GLOBAL_OPTIONS={headers:DEFAULT_HEADERS},DEFAULT_DB_OPTIONS={schema:"public"},DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},DEFAULT_REALTIME_OPTIONS={};function _typeof(t){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(t)}function toPrimitive(t,e){if(_typeof(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var xe=r.call(t,e);if(_typeof(xe)!="object")return xe;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function toPropertyKey(t){var e=toPrimitive(t,"string");return _typeof(e)=="symbol"?e:e+""}function _defineProperty(t,e,r){return(e=toPropertyKey(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ownKeys(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var xe=Object.getOwnPropertySymbols(t);e&&(xe=xe.filter(function(Ee){return Object.getOwnPropertyDescriptor(t,Ee).enumerable})),r.push.apply(r,xe)}return r}function _objectSpread2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach(function(xe){_defineProperty(t,xe,r[xe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(xe){Object.defineProperty(t,xe,Object.getOwnPropertyDescriptor(r,xe))})}return t}const resolveFetch=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),resolveHeadersConstructor=()=>Headers,fetchWithAuth=(t,e,r)=>{const xe=resolveFetch(r),Ee=resolveHeadersConstructor();return async(Ae,Pe)=>{var Re;const Ce=(Re=await e())!==null&&Re!==void 0?Re:t;let Be=new Ee(Pe==null?void 0:Pe.headers);return Be.has("apikey")||Be.set("apikey",t),Be.has("Authorization")||Be.set("Authorization",`Bearer ${Ce}`),xe(Ae,_objectSpread2(_objectSpread2({},Pe),{},{headers:Be}))}};function ensureTrailingSlash(t){return t.endsWith("/")?t:t+"/"}function applySettingDefaults(t,e){var r,xe;const{db:Ee,auth:Ae,realtime:Pe,global:Re}=t,{db:Ce,auth:Be,realtime:ke,global:Me}=e,Fe={db:_objectSpread2(_objectSpread2({},Ce),Ee),auth:_objectSpread2(_objectSpread2({},Be),Ae),realtime:_objectSpread2(_objectSpread2({},ke),Pe),storage:{},global:_objectSpread2(_objectSpread2(_objectSpread2({},Me),Re),{},{headers:_objectSpread2(_objectSpread2({},(r=Me==null?void 0:Me.headers)!==null&&r!==void 0?r:{}),(xe=Re==null?void 0:Re.headers)!==null&&xe!==void 0?xe:{})}),accessToken:async()=>""};return t.accessToken?Fe.accessToken=t.accessToken:delete Fe.accessToken,Fe}function validateSupabaseUrl(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(ensureTrailingSlash(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var SupabaseAuthClient=class extends AuthClient{constructor(t){super(t)}},SupabaseClient=class{constructor(t,e,r){var xe,Ee;this.supabaseUrl=t,this.supabaseKey=e;const Ae=validateSupabaseUrl(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",Ae),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",Ae),this.storageUrl=new URL("storage/v1",Ae),this.functionsUrl=new URL("functions/v1",Ae);const Pe=`sb-${Ae.hostname.split(".")[0]}-auth-token`,Re={db:DEFAULT_DB_OPTIONS,realtime:DEFAULT_REALTIME_OPTIONS,auth:_objectSpread2(_objectSpread2({},DEFAULT_AUTH_OPTIONS),{},{storageKey:Pe}),global:DEFAULT_GLOBAL_OPTIONS},Ce=applySettingDefaults(r??{},Re);if(this.storageKey=(xe=Ce.auth.storageKey)!==null&&xe!==void 0?xe:"",this.headers=(Ee=Ce.global.headers)!==null&&Ee!==void 0?Ee:{},Ce.accessToken)this.accessToken=Ce.accessToken,this.auth=new Proxy({},{get:(ke,Me)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(Me)} is not possible`)}});else{var Be;this.auth=this._initSupabaseAuthClient((Be=Ce.auth)!==null&&Be!==void 0?Be:{},this.headers,Ce.global.fetch)}this.fetch=fetchWithAuth(e,this._getAccessToken.bind(this),Ce.global.fetch),this.realtime=this._initRealtimeClient(_objectSpread2({headers:this.headers,accessToken:this._getAccessToken.bind(this)},Ce.realtime)),this.accessToken&&this.accessToken().then(ke=>this.realtime.setAuth(ke)).catch(ke=>console.warn("Failed to set initial Realtime auth token:",ke)),this.rest=new PostgrestClient(new URL("rest/v1",Ae).href,{headers:this.headers,schema:Ce.db.schema,fetch:this.fetch}),this.storage=new StorageClient(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),Ce.accessToken||this._listenForAuthEvents()}get functions(){return new FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,r;if(t.accessToken)return await t.accessToken();const{data:xe}=await t.auth.getSession();return(e=(r=xe.session)===null||r===void 0?void 0:r.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:xe,userStorage:Ee,storageKey:Ae,flowType:Pe,lock:Re,debug:Ce,throwOnError:Be},ke,Me){const Fe={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new SupabaseAuthClient({url:this.authUrl.href,headers:_objectSpread2(_objectSpread2({},Fe),ke),storageKey:Ae,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:xe,userStorage:Ee,flowType:Pe,lock:Re,debug:Ce,throwOnError:Be,fetch:Me,hasCustomAuthorizationHeader:Object.keys(this.headers).some(Ve=>Ve.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new RealtimeClient(this.realtimeUrl.href,_objectSpread2(_objectSpread2({},t),{},{params:_objectSpread2(_objectSpread2({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const createClient=(t,e,r)=>new SupabaseClient(t,e,r);function shouldShowDeprecationWarning(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}shouldShowDeprecationWarning()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const SUPABASE_URL="https://supabase.aura-call.de",SUPABASE_ANON_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlzcyI6InN1cGFiYXNlIn0.oqN5J2n6GBoLIf3OpsUrK2OZWIAINIWcbmRV0mtA4yQ";let supabaseClient=null;const initSupabase=()=>(supabaseClient||(supabaseClient=createClient(SUPABASE_URL,SUPABASE_ANON_KEY)),supabaseClient),isSupabaseConfigured=()=>!0,getSettings=async()=>{const t=initSupabase();if(!t)throw new Error("Supabase not configured");const{data:e,error:r}=await t.from("app_settings").select("settings_data").eq("id","global").single();return r||!e?getDefaultSettings():e.settings_data},saveSettings=async t=>{const e=initSupabase();if(!e)throw new Error("Supabase not configured");const{error:r}=await e.from("app_settings").upsert({id:"global",settings_data:t,updated_at:new Date().toISOString()},{onConflict:"id"});if(r)throw new Error(`Failed to save settings: ${r.message}`)},DEFAULT_TAX_DEFINITIONS=[{value:"19_pv",label:"19% Vorsteuer",ust_satz:.19,vorsteuer:!0},{value:"7_pv",label:"7% Vorsteuer",ust_satz:.07,vorsteuer:!0},{value:"0_pv",label:"0% PV (Steuerfrei)",ust_satz:0,vorsteuer:!0},{value:"0_igl_rc",label:"0% IGL / Reverse Charge",ust_satz:0,vorsteuer:!1,reverse_charge:!0},{value:"steuerfrei_kn",label:"Steuerfrei (Kleinunternehmer)",ust_satz:0,vorsteuer:!1},{value:"keine_pv",label:"Keine Vorsteuer (Privatanteil)",ust_satz:0,vorsteuer:!1}],DEFAULT_ACCOUNT_DEFINITIONS=[{id:"wareneingang",name:"Wareneingang / Material",skr03:"3400",steuerkategorien:["19_pv","0_igl_rc"]},{id:"fremdleistung",name:"Fremdleistungen",skr03:"3100",steuerkategorien:["19_pv","0_igl_rc"]},{id:"buero",name:"Bromaterial",skr03:"4930",steuerkategorien:["19_pv","7_pv"]},{id:"reise",name:"Reisekosten",skr03:"4670",steuerkategorien:["19_pv","7_pv"]},{id:"vertretung",name:"Vertretungskosten",skr03:"4610",steuerkategorien:["19_pv"]},{id:"software",name:"Software/Lizenzen",skr03:"4964",steuerkategorien:["19_pv"]},{id:"internet",name:"Internet/Telefon",skr03:"4920",steuerkategorien:["19_pv"]},{id:"makler",name:"Maklerprovisionen",skr03:"4760",steuerkategorien:["19_pv","0_igl_rc"]},{id:"abschreibung",name:"Abschreibungen",skr03:"4830",steuerkategorien:["19_pv"]},{id:"fuhrpark",name:"Fuhrpark/Kraftstoff",skr03:"4530",steuerkategorien:["19_pv"]},{id:"maschinen",name:"Maschinen/Anlagen",skr03:"0200",steuerkategorien:["19_pv"]},{id:"werbung",name:"Werbung",skr03:"4600",steuerkategorien:["19_pv"]},{id:"miete",name:"Miete/Pachten",skr03:"4210",steuerkategorien:["19_pv"]},{id:"reparatur",name:"Reparatur/Wartung",skr03:"4800",steuerkategorien:["19_pv"]},{id:"beratung",name:"Beratung/Steuerberater",skr03:"4950",steuerkategorien:["19_pv"]},{id:"versicherung",name:"Versicherungen",skr03:"4360",steuerkategorien:["19_pv"]},{id:"strom",name:"Strom/Gas/Wasser",skr03:"4240",steuerkategorien:["19_pv"]},{id:"ausbildung",name:"Fortbildung",skr03:"4945",steuerkategorien:["19_pv"]},{id:"portokosten",name:"Porto/Versand",skr03:"4910",steuerkategorien:["19_pv"]},{id:"sonstiges",name:"Sonstige Betriebsausgaben",skr03:"4900",steuerkategorien:["19_pv","7_pv"]},{id:"privat",name:"Privatanteil",skr03:"1800",steuerkategorien:["keine_pv"]}],DEFAULT_DATEV_CONFIG={beraterNr:"",mandantNr:"",wirtschaftsjahrBeginn:`${new Date().getFullYear()}0101`,sachkontenlaenge:4,waehrung:"EUR",herkunftKz:"RE",diktatkuerzel:"",stapelBezeichnung:"Buchungsstapel",taxCategoryToBuKey:{"19_pv":"9","7_pv":"8","0_pv":"0",steuerfrei_kn:"0",keine_pv:"0","0_igl_rc":""}},DEFAULT_ELSTER_STAMMDATEN={unternehmensName:"",land:"DE",plz:"",ort:"",strasse:"",hausnummer:"",eigeneSteuernummer:"",eigeneUstIdNr:"",finanzamtName:"",finanzamtNr:"",rechtsform:void 0,besteuerungUst:"unbekannt",kleinunternehmer:!1,iban:"",kontaktEmail:""},getDefaultSettings=()=>({id:"global",taxDefinitions:DEFAULT_TAX_DEFINITIONS,accountDefinitions:DEFAULT_ACCOUNT_DEFINITIONS,datevConfig:DEFAULT_DATEV_CONFIG,elsterStammdaten:DEFAULT_ELSTER_STAMMDATEN,accountGroups:[],ocrConfig:{scores:{0:{min_fields:0,desc:"Kein gltiger Beleg"},5:{min_fields:4,desc:"Basisdaten vorhanden"},10:{min_fields:7,desc:"Perfekt erkannt"}},required_fields:["belegDatum","bruttoBetrag","lieferantName"],field_weights:{bruttoBetrag:3,belegDatum:3,lieferantName:2,belegNummerLieferant:2},regex_patterns:{belegDatum:"\\d{4}-\\d{2}-\\d{2}"},validation_rules:{sum_check:!0,date_check:!0,min_confidence:.8}}}),getAllDocuments=async()=>{const t=initSupabase();if(!t)throw new Error("Supabase not configured");const{data:e,error:r}=await t.from("belege").select("*").order("created_at",{ascending:!1});return r?(console.error("Error fetching documents:",r),[]):(e||[]).map(xe=>transformSupabaseToDocument(xe))},saveDocument=async t=>{const e=initSupabase();if(!e)throw new Error("Supabase not configured");const r=transformDocumentToSupabase(t),{error:xe}=await e.from("belege").upsert(r,{onConflict:"id"});if(xe)throw new Error(`Failed to save document: ${xe.message}`)},deleteDocument=async t=>{const e=initSupabase();if(!e)throw new Error("Supabase not configured");const{error:r}=await e.from("belege").delete().eq("id",t);if(r)throw new Error(`Failed to delete document: ${r.message}`)},savePrivateDocument=async(t,e,r,xe,Ee,Ae)=>{const Pe=initSupabase();if(!Pe)throw new Error("Supabase not configured");const{error:Re}=await Pe.from("belege_privat").insert({id:t,file_data:xe,file_name:e,file_type:r,vendor_name:Ee.lieferantName||null,document_date:Ee.belegDatum||null,total_amount:Ee.bruttoBetrag||null,line_items:Ee.lineItems||[],private_reason:Ae});if(Re)throw new Error(`Failed to save private document: ${Re.message}`)};function transformSupabaseToDocument(t){let e=t.line_items;if(typeof t.line_items=="string")try{e=JSON.parse(t.line_items)}catch{e=[]}return{id:t.id,fileName:t.file_name,fileType:t.file_type,uploadDate:t.created_at,status:t.status,data:{lieferantName:t.lieferant_name||"",lieferantAdresse:t.lieferant_adresse||"",belegDatum:t.beleg_datum||"",bruttoBetrag:t.brutto_betrag||0,mwstBetrag:t.mwst_betrag||0,mwstSatz19:t.mwst_satz||0,steuerkategorie:t.steuerkategorie||"",kontierungskonto:t.skr03_konto||"",lineItems:e||[],kontogruppe:"",konto_skr03:t.skr03_konto||"",ust_typ:"",sollKonto:"",habenKonto:"",steuerKategorie:t.steuerkategorie||"",belegNummerLieferant:"",steuernummer:"",nettoBetrag:0,mwstSatz0:0,mwstBetrag0:0,mwstSatz7:0,mwstBetrag7:0,zahlungsmethode:"",eigeneBelegNummer:"",zahlungsDatum:"",zahlungsStatus:"",rechnungsEmpfaenger:"",aufbewahrungsOrt:"",kleinbetrag:!1,vorsteuerabzug:!1,reverseCharge:!1,privatanteil:!1,beschreibung:"",documentType:void 0,kontierungBegruendung:void 0,qualityScore:t.score||void 0,ocr_score:t.score||void 0,ocr_rationale:void 0,textContent:void 0,ruleApplied:void 0},previewUrl:`data:${t.file_type};base64,${t.file_data}`}}function transformDocumentToSupabase(t){var r;const e=t.data;return{id:t.id,file_data:((r=t.previewUrl)==null?void 0:r.split(",")[1])||"",file_name:t.fileName,file_type:t.fileType,lieferant_name:(e==null?void 0:e.lieferantName)||null,lieferant_adresse:(e==null?void 0:e.lieferantAdresse)||null,beleg_datum:(e==null?void 0:e.belegDatum)||null,brutto_betrag:(e==null?void 0:e.bruttoBetrag)||null,mwst_betrag:(e==null?void 0:e.mwstBetrag)||null,mwst_satz:(e==null?void 0:e.mwstSatz19)||null,steuerkategorie:(e==null?void 0:e.steuerkategorie)||null,skr03_konto:(e==null?void 0:e.konto_skr03)||null,line_items:(e==null?void 0:e.lineItems)||null,status:t.status,score:(e==null?void 0:e.ocr_score)||null,created_at:t.uploadDate}}const saveVendorRule=async(t,e,r)=>{if(!t||t.length<2)return;const xe=initSupabase();if(!xe)return;const Ee=t.toLowerCase().trim(),{data:Ae}=await xe.from("vendor_rules").select("use_count").eq("vendor_name",Ee).single(),Pe=((Ae==null?void 0:Ae.use_count)||0)+1,{error:Re}=await xe.from("vendor_rules").upsert({vendor_name:Ee,account_id:e,tax_category_value:r,use_count:Pe,last_updated:new Date().toISOString()},{onConflict:"vendor_name"});Re&&console.error("Failed to save vendor rule:",Re)},exportDocumentsToSQL=(t,e)=>{const r=new Date().toISOString(),xe=ke=>{if(ke==null)return"NULL";const Me=String(ke);return Me.trim().length===0?"NULL":`'${Me.replace(/'/g,"''")}'`},Ee=ke=>{const Me=typeof ke=="number"?ke:Number(ke);return Number.isFinite(Me)?Me:"NULL"},Ae=ke=>ke===!0||ke==="true"||ke===1?"TRUE":ke===!1||ke==="false"||ke===0?"FALSE":"NULL",Pe=ke=>{const Me=ke==null?"":String(ke);return/^\d{4}-\d{2}-\d{2}$/.test(Me)?`'${Me}'`:"NULL"};let Re=`-- ZOE Solar Accounting Export
-- Generated: ${r}

`;Re+=`
CREATE TABLE IF NOT EXISTS steuerkategorien (
  id SERIAL PRIMARY KEY,
  value VARCHAR(50) UNIQUE NOT NULL,
  label VARCHAR(100),
  ust_satz NUMERIC(5,4),
  vorsteuer BOOLEAN DEFAULT TRUE,
  reverse_charge BOOLEAN DEFAULT FALSE
);
`,Re+=`
CREATE TABLE IF NOT EXISTS kontierungskonten (
  id VARCHAR(50) PRIMARY KEY,
  name VARCHAR(100),
  skr03 VARCHAR(10),
  allowed_tax_categories TEXT[]
);
`,Re+=`
CREATE TABLE IF NOT EXISTS elster_stammdaten (
  id VARCHAR(20) PRIMARY KEY,
  unternehmens_name TEXT,
  land VARCHAR(10),
  plz VARCHAR(20),
  ort TEXT,
  strasse TEXT,
  hausnummer TEXT,
  eigene_steuernummer TEXT,
  eigene_steuernummer_digits TEXT,
  eigene_ust_idnr TEXT,
  finanzamt_name TEXT,
  finanzamt_nr TEXT,
  rechtsform TEXT,
  besteuerung_ust TEXT,
  kleinunternehmer BOOLEAN,
  iban TEXT,
  kontakt_email TEXT,
  updated_at TIMESTAMP DEFAULT NOW()
);
`,Re+=`
CREATE TABLE IF NOT EXISTS belege (
    id UUID PRIMARY KEY,
    document_type VARCHAR(100),
    datum DATE,
    belegnummer_lieferant VARCHAR(255),
    eigene_beleg_nummer VARCHAR(255),
    lieferant VARCHAR(255),
    lieferant_adresse TEXT,
    steuernummer VARCHAR(100),
    zahlungsmethode VARCHAR(100),
    zahlungs_datum DATE,
    zahlungs_status VARCHAR(50),
    rechnungs_empfaenger VARCHAR(255),
    aufbewahrungs_ort VARCHAR(255),
    betrag DECIMAL(10,2),
    netto_betrag DECIMAL(10,2),
    mwst_satz_0 NUMERIC(5,4),
    mwst_betrag_0 DECIMAL(10,2),
    mwst_satz_7 NUMERIC(5,4),
    mwst_betrag_7 DECIMAL(10,2),
    mwst_satz_19 NUMERIC(5,4),
    mwst_betrag_19 DECIMAL(10,2),
    steuerkategorie VARCHAR(50),
    kontierungskonto VARCHAR(50),
    soll_konto VARCHAR(10),
    haben_konto VARCHAR(10),
    konto_ust_satz NUMERIC(5,4),
    kontogruppe VARCHAR(100),
    konto_skr03 VARCHAR(10),
    ust_typ VARCHAR(50),
    steuer_kategorie_legacy VARCHAR(100),
    reverse_charge BOOLEAN,
    vorsteuerabzug BOOLEAN,
    kleinbetrag BOOLEAN,
    privatanteil BOOLEAN,
    ocr_score INTEGER,
    ocr_rationale TEXT,
    ocr_text TEXT,
    text_content TEXT,
    beschreibung TEXT,
    status VARCHAR(50),
    created_at TIMESTAMP DEFAULT NOW()
);

`,Re+=`
CREATE TABLE IF NOT EXISTS beleg_positionen (
    doc_id UUID NOT NULL REFERENCES belege(id) ON DELETE CASCADE,
    line_index INTEGER NOT NULL,
    description TEXT,
    amount DECIMAL(10,2),
    created_at TIMESTAMP DEFAULT NOW(),
    PRIMARY KEY (doc_id, line_index)
);

`,DEFAULT_TAX_DEFINITIONS.forEach(ke=>{Re+=`INSERT INTO steuerkategorien (value, label, ust_satz, vorsteuer, reverse_charge) VALUES ('${ke.value}', '${ke.label}', ${ke.ust_satz}, ${ke.vorsteuer}, ${ke.reverse_charge||!1}) ON CONFLICT (value) DO NOTHING;
`}),DEFAULT_ACCOUNT_DEFINITIONS.forEach(ke=>{Re+=`INSERT INTO kontierungskonten (id, name, skr03, allowed_tax_categories) VALUES ('${ke.id}', '${ke.name}', '${ke.skr03}', ARRAY['${ke.steuerkategorien.join("','")}']) ON CONFLICT (id) DO NOTHING;
`}),Re+=`
-- Data Insertion
`;const Ce=e==null?void 0:e.elsterStammdaten,Be=((Ce==null?void 0:Ce.eigeneSteuernummer)||"").replace(/\D/g,"");return Re+=`INSERT INTO elster_stammdaten (
  id, unternehmens_name, land, plz, ort, strasse, hausnummer,
  eigene_steuernummer, eigene_steuernummer_digits, eigene_ust_idnr,
  finanzamt_name, finanzamt_nr, rechtsform, besteuerung_ust,
  kleinunternehmer, iban, kontakt_email, updated_at
) VALUES (
  'global',
  ${xe(Ce==null?void 0:Ce.unternehmensName)},
  ${xe(Ce==null?void 0:Ce.land)},
  ${xe(Ce==null?void 0:Ce.plz)},
  ${xe(Ce==null?void 0:Ce.ort)},
  ${xe(Ce==null?void 0:Ce.strasse)},
  ${xe(Ce==null?void 0:Ce.hausnummer)},
  ${xe(Ce==null?void 0:Ce.eigeneSteuernummer)},
  ${xe(Be)},
  ${xe(Ce==null?void 0:Ce.eigeneUstIdNr)},
  ${xe(Ce==null?void 0:Ce.finanzamtName)},
  ${xe(Ce==null?void 0:Ce.finanzamtNr)},
  ${xe(Ce==null?void 0:Ce.rechtsform)},
  ${xe(Ce==null?void 0:Ce.besteuerungUst)},
  ${Ae(Ce==null?void 0:Ce.kleinunternehmer)},
  ${xe(Ce==null?void 0:Ce.iban)},
  ${xe(Ce==null?void 0:Ce.kontaktEmail)},
  NOW()
) ON CONFLICT (id) DO UPDATE SET
  unternehmens_name = EXCLUDED.unternehmens_name,
  updated_at = NOW();

`,t.forEach(ke=>{const Me=ke.data||{};Re+=`INSERT INTO belege (
    id, document_type, datum, belegnummer_lieferant, eigene_beleg_nummer,
    lieferant, lieferant_adresse, steuernummer,
    zahlungsmethode, zahlungs_datum, zahlungs_status, rechnungs_empfaenger, aufbewahrungs_ort,
    betrag, netto_betrag,
    mwst_satz_0, mwst_betrag_0, mwst_satz_7, mwst_betrag_7, mwst_satz_19, mwst_betrag_19,
    steuerkategorie, kontierungskonto, soll_konto, haben_konto,
    kontogruppe, konto_skr03, ust_typ, steuer_kategorie_legacy,
    reverse_charge, vorsteuerabzug, kleinbetrag, privatanteil,
    ocr_score, ocr_rationale, ocr_text, text_content, beschreibung, status
) VALUES (
    '${ke.id}',
    ${xe(Me.documentType)},
    ${Pe(Me.belegDatum)},
    ${xe(Me.belegNummerLieferant)},
    ${xe(Me.eigeneBelegNummer)},
    ${xe(Me.lieferantName)},
    ${xe(Me.lieferantAdresse)},
    ${xe(Me.steuernummer)},
    ${xe(Me.zahlungsmethode)},
    ${Pe(Me.zahlungsDatum)},
    ${xe(Me.zahlungsStatus)},
    ${xe(Me.rechnungsEmpfaenger)},
    ${xe(Me.aufbewahrungsOrt)},
    ${Ee(Me.bruttoBetrag)},
    ${Ee(Me.nettoBetrag)},
    ${Ee(Me.mwstSatz0)},
    ${Ee(Me.mwstBetrag0)},
    ${Ee(Me.mwstSatz7)},
    ${Ee(Me.mwstBetrag7)},
    ${Ee(Me.mwstSatz19)},
    ${Ee(Me.mwstBetrag19)},
    ${xe(Me.steuerkategorie)},
    ${xe(Me.kontierungskonto)},
    ${xe(Me.sollKonto)},
    ${xe(Me.habenKonto)},
    ${xe(Me.kontogruppe)},
    ${xe(Me.konto_skr03)},
    ${xe(Me.ust_typ)},
    ${xe(Me.steuerKategorie)},
    ${Ae(Me.reverseCharge)},
    ${Ae(Me.vorsteuerabzug)},
    ${Ae(Me.kleinbetrag)},
    ${Ae(Me.privatanteil)},
    ${Ee(Me.ocr_score)},
    ${xe(Me.ocr_rationale)},
    ${xe(Me.textContent||"")},
    ${xe(Me.textContent||"")},
    ${xe(Me.beschreibung||"")},
    ${xe(ke.status)}
);
`,(Me.lineItems||[]).forEach((Ve,Oe)=>{Re+=`INSERT INTO beleg_positionen (doc_id, line_index, description, amount) VALUES (
    '${ke.id}',
    ${Oe},
    ${xe(Ve==null?void 0:Ve.description)},
    ${Ee(Ve==null?void 0:Ve.amount)}
  ) ON CONFLICT (doc_id, line_index) DO UPDATE SET
    description = EXCLUDED.description,
    amount = EXCLUDED.amount;
`})}),Re},GROCERY_RETAILERS=["rewe","lidl","edeka","aldi","aldi nord","aldi sd","netto","netto marken-discount","penny","kaufland","dm","rossmann","mller","albrecht","norma","tegut","real"," Globus","famila","marktkauf","netto city","lidl international","spar","billa","merkur","penny market","hofer","migros","coop","denner","aldi schweiz","albert heijn","jumbo","lidl nl","aldi nl","colruyt","delhaize","carrefour belgique","carrefour","leclerc","auchan","intermarch","casino","franprix","monoprix","mercadona","dia","eroski","tesco","sainsbury","asda","morrisons","waitrose","marks & spencer","co-op","ica","coop norden","rema 1000","kiwi","joker","woolworths","coles","aldi au","iga","walmart","target","costco","kroger","safeway","publix","whole foods","trader joe","bunnings","officeworks","kmart","big w","target au","savings","primark","h&m","zara","uniqlo","decathlon","action","tedi","kik","pimkie","c&a","new Yorker"],PRIVATE_ITEM_KEYWORDS=["zigarette","zigaretten","tabak","cigarette","cigarettes","tobacco","tabacco","marlboro","camel","lucky strike","pall mall","west","dunhill","chesterfield","capri","gitanes","gauloises","davidoff","rothmans","winston","parliament","vape","e-zigarette","e liquid","liquids","liquids","shisha","tabakwasser","tabakersatz","nikotin","rauchzubehr","tabakwaren","bier","beer","pils","pilsener","helles","weizen","weissbier","weizenbier","dunkel","starkbier","bockbier","alkoholfrei","radler","alkoholfreies bier","mischgetrnk","krombacher","warsteiner","paulaner","becks","bitburger","heineken","carlsberg","stella artois","amstel","corona","modelo","guinness","budweiser","coors","miller","stout","ipa","ale","lagern","pilsner","wein","wine","rotwein","weisswein","ros","rosewein","schaumwein","champagner","champagne","prosecco","sekt","mwein","liebfrauenmilch","rheingau","mosel","pfalz","spanischerwein","franzwein","italwein","tinto","blanco","merlot","chardonnay","riesling","sptburgunder","grauburgunder","weiburgunder","sauvignon blanc","pinot noir","cabernet"," Rioja","bordeaux","burgunder","sangria","weinbrand","spirituosen","spirits","whisky","whiskey","wodka","vodka","gin","rum","cognac","brandy","calvados","armagnac","tequila","mezcal","schnaps","obstler","kirschwasser","williams","mirabellen","slivovitz","ouzo","raki","absinth","vermouth","likr","liqueur","baileys","kahlua","jgermeister","feige","underberg","korn","wodka","rum","bourbon","scotch","irish whiskey","cognac","armagnac","grappa","cointreau","grand marnier","triple sec","amaretto","frangelico","limoncello","aperol","campari","aperitif","bitters","tonic","grog","alkohol","alcohol","hochalkoholisch","high proof","portwein","madeira","sherry","marsala","vermouth","cocktail","long drink","shots","alc","alkoholische","alkoholhaltig","ethanol","trinkalkohol"," Zeitschrift","zeitschrift","zeitung","buch","taschenbuch","roman","magazin","glcksspiel","lotto","lottoannahme","totoblock","spielhalle","casino","wettbro","sportwette","poker","glcksrad","lose","lotterieschein"],detectPrivateDocument=t=>{const e={isPrivate:!1,privateItemCount:0,totalItemCount:0},r=(t.lieferantName||"").toLowerCase(),xe=GROCERY_RETAILERS.find(Re=>r.includes(Re.toLowerCase()));if(!xe)return e;e.detectedVendor=xe;const Ee=t.lineItems||[];if(e.totalItemCount=Ee.length,Ee.length===0)return e;let Ae=!1,Pe=!1;for(const Re of Ee){const Ce=(Re.description||"").toLowerCase();PRIVATE_ITEM_KEYWORDS.some(ke=>Ce.includes(ke.toLowerCase()))?(Ae=!0,e.privateItemCount++):Pe=!0}return Ae&&!Pe&&(e.isPrivate=!0,e.reason=`Nur private Positionen erkannt (${e.privateItemCount}/${e.totalItemCount} Positionen: Zigaretten/Alkoholika bei ${xe})`),e},computeFileHash=async t=>{const e=await t.arrayBuffer(),r=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(r)).map(xe=>xe.toString(16).padStart(2,"0")).join("")},readFileToBase64=t=>new Promise((e,r)=>{const xe=new FileReader;xe.onload=()=>{const Ee=xe.result;e({base64:Ee.split(",")[1],url:Ee})},xe.onerror=r,xe.readAsDataURL(t)}),mergeDocuments=(t,e)=>{const r=new Map;for(const xe of t)r.set(xe.id,xe);for(const xe of e){const Ee=r.get(xe.id);if(!Ee)r.set(xe.id,xe);else{const Ae=new Date(Ee.uploadDate).getTime();new Date(xe.uploadDate).getTime()>Ae&&r.set(xe.id,xe)}}return Array.from(r.values())},classifyOcrOutcome=t=>{const e=t.ocr_score??0,r=(t.lieferantName||"").toLowerCase(),xe=(t.ocr_rationale||"").trim(),Ee=(t.beschreibung||"").trim(),Ae=(xe||Ee).toLowerCase(),Pe=Ae.includes("siliconflow_api_key")||Ae.includes("api key")||Ae.includes("pdf ist zu gro")||Ae.includes("vision api error")||Ae.includes("gemini fehlgeschlagen")||Ae.includes("quota")||Ae.includes("http 4")||Ae.includes("http 5");if(r.includes("manuelle eingabe")||e<=0&&(t.bruttoBetrag??0)===0){const Ce=xe||Ee||"Analyse fehlgeschlagen. Bitte manuell erfassen.";return{status:Pe?DocumentStatus.ERROR:DocumentStatus.REVIEW_NEEDED,error:Ce}}return xe.includes("Datum unklar")||xe.includes("Summen widersprchlich")||e<6?{status:DocumentStatus.REVIEW_NEEDED,error:xe||"Bitte Daten prfen."}:{status:DocumentStatus.COMPLETED,error:void 0}},findSemanticDuplicate=(t,e)=>{if(!t.bruttoBetrag&&!t.belegNummerLieferant)return;const r=Re=>Re?Re.toLowerCase().replace(/[^a-z0-9]/g,""):"",xe=r(t.belegNummerLieferant),Ee=t.bruttoBetrag,Ae=t.belegDatum,Pe=r(t.lieferantName);for(const Re of e){if(!Re.data||Re.status===DocumentStatus.ERROR||Re.status===DocumentStatus.DUPLICATE)continue;const Ce=r(Re.data.belegNummerLieferant),Be=Re.data.bruttoBetrag,ke=Re.data.belegDatum;if(xe.length>=2&&xe===Ce&&Ee!==void 0&&Be!==void 0&&Math.abs(Ee-Be)<.1)return{doc:Re,reason:`Belegnummer (${Re.data.belegNummerLieferant}) und Betrag identisch.`,confidence:.95};if(xe.length>=3&&xe===Ce&&Ae&&ke&&Ae===ke)return{doc:Re,reason:`Belegnummer (${Re.data.belegNummerLieferant}) und Datum identisch.`,confidence:.9};let Me=0;Ee!==void 0&&Be!==void 0&&Math.abs(Ee-Be)<.05&&(Me+=40),Ae&&ke&&Ae===ke&&(Me+=30);const Fe=r(Re.data.lieferantName);if(Pe&&Fe&&(Pe.includes(Fe)||Fe.includes(Pe))&&(Me+=20),xe.length>4&&Ce.includes(xe)&&(Me+=20),Me>=70)return{doc:Re,reason:"Hohe hnlichkeit bei Datum, Betrag und Lieferant.",confidence:Math.min(.89,Me/100)}}};function App(){const[t,e]=reactExports.useState([]),[r,xe]=reactExports.useState(null),[Ee,Ae]=reactExports.useState(!1),[Pe,Re]=reactExports.useState(null),[Ce,Be]=reactExports.useState("document"),[ke,Me]=reactExports.useState(""),[Fe,Ve]=reactExports.useState(null),[Oe,$e]=reactExports.useState(null),[Ge,Ue]=reactExports.useState(null),[Ye,Qe]=reactExports.useState(!0),[rn,tn]=reactExports.useState("all"),[an,qe]=reactExports.useState("all"),[Ke,sn]=reactExports.useState("all"),[gn,He]=reactExports.useState("all"),[en,cn]=reactExports.useState("all"),[Sn,Tn]=reactExports.useState("all"),[hn,pn]=reactExports.useState("all"),[bn,fn]=reactExports.useState(null),[An,xn]=reactExports.useState(300),Je=reactExports.useRef(null),We=reactExports.useRef(!1),[Ze,un]=reactExports.useState(null),[yn,_n]=reactExports.useState(null);reactExports.useEffect(()=>{(async()=>{try{const[Dn,Jn]=await Promise.all([getAllDocuments$1(),getSettings$1()]);if(e(Dn.sort((Qn,qn)=>new Date(qn.uploadDate).getTime()-new Date(Qn.uploadDate).getTime())),xe(Jn),isSupabaseConfigured())try{const[Qn,qn]=await Promise.all([getAllDocuments(),getSettings()]),yi=mergeDocuments(Dn,Qn);e(yi.sort((di,zi)=>new Date(zi.uploadDate).getTime()-new Date(di.uploadDate).getTime()));for(const di of yi)await saveDocument$1(di);qn&&(await saveSettings$1(qn),xe(qn))}catch(Qn){console.warn("Supabase sync failed, using local data:",Qn)}}catch(Dn){console.error("Init Error:",Dn),Ve("Fehler beim Laden der Daten. IndexedDB oder Supabase prfen.")}})()},[]),reactExports.useEffect(()=>{if(Fe){const Rn=setTimeout(()=>Ve(null),5e3);return()=>clearTimeout(Rn)}},[Fe]),reactExports.useEffect(()=>{if(Oe){const Rn=setTimeout(()=>$e(null),8e3);return()=>clearTimeout(Rn)}},[Oe]);const wn=Rn=>{Rn.preventDefault(),We.current=!0;const Dn=Rn.clientX,Jn=An,Qn=yi=>{if(!We.current)return;const di=Jn+(yi.clientX-Dn);di>220&&di<800&&xn(di)},qn=()=>{We.current=!1,document.removeEventListener("mousemove",Qn),document.removeEventListener("mouseup",qn),document.body.style.cursor="default"};document.addEventListener("mousemove",Qn),document.addEventListener("mouseup",qn),document.body.style.cursor="col-resize"},kn=async Rn=>{var Gi;if(Rn.length===0)return;Ae(!0),Be("document");const Dn=[],Jn=[];for(const ui of Rn){const Vi=crypto.randomUUID(),[Di,{base64:Xi,url:fi}]=await Promise.all([computeFileHash(ui),readFileToBase64(ui)]);Jn.push({id:Vi,file:ui,hash:Di,base64:Xi,url:fi}),Dn.push({id:Vi,fileName:ui.name,fileType:ui.type,uploadDate:new Date().toISOString(),status:DocumentStatus.PROCESSING,data:null,previewUrl:fi,fileHash:Di})}e(ui=>[...Dn,...ui]);const Qn=r||await getSettings$1(),qn=[],yi={current:[]};e(ui=>(yi.current=[...ui],ui));let di=0;const zi=Jn.map(async ui=>{if(yi.current.some(Di=>Di.id!==ui.id&&Di.fileHash===ui.hash)){const Di=yi.current.find(Xi=>Xi.fileHash===ui.hash);return{type:"DOC",doc:{id:ui.id,status:DocumentStatus.DUPLICATE,error:void 0,data:null,duplicateReason:"Datei identisch (Hash)",duplicateOfId:Di==null?void 0:Di.id,duplicateConfidence:1}}}try{const Di=await analyzeDocumentWithGemini(ui.base64,ui.file.type),Xi=normalizeExtractedData(Di),fi=findSemanticDuplicate(Xi,yi.current);if(fi&&fi.doc.id!==ui.id)return{type:"DOC",doc:{id:ui.id,status:DocumentStatus.DUPLICATE,data:Xi,duplicateReason:fi.reason||"Inhaltliches Duplikat erkannt",duplicateOfId:fi.doc.id,duplicateConfidence:fi.confidence}};const ni=detectPrivateDocument(Xi);if(ni.isPrivate&&ni.detectedVendor)return{type:"PRIVATE_DOC",id:ui.id,base64:ui.base64,fileName:ui.file.name,fileType:ui.file.type,data:Xi,vendor:ni.detectedVendor,reason:ni.reason||"Private Positionen erkannt"};const pi=classifyOcrOutcome(Xi);return{type:"DOC",data:Xi,id:ui.id,outcome:pi}}catch{return{type:"DOC",doc:{id:ui.id,status:DocumentStatus.ERROR,error:"KI Analyse fehlgeschlagen",data:null,duplicateReason:void 0}}}}),Ni=await Promise.all(zi);for(const ui of Ni){if(ui.type==="PRIVATE_DOC"){const Vi=ui;try{await savePrivateDocument(Vi.id,Vi.fileName,Vi.fileType,Vi.base64,Vi.data,Vi.reason),$e({vendor:Vi.vendor,amount:((Gi=Vi.data)==null?void 0:Gi.bruttoBetrag)||0,reason:Vi.reason})}catch(Di){console.error("Failed to save private document:",Di);const Xi={id:Vi.id,fileName:Vi.fileName,fileType:Vi.fileType,uploadDate:new Date().toISOString(),status:DocumentStatus.PRIVATE,data:{...Vi.data,privatanteil:!0}};qn.push(Xi),await saveDocument(Xi)}continue}if(ui.type==="MERGE"){const Vi=ui,Di=yi.current.find(Xi=>Xi.id===Vi.targetId);if(Di){const Xi={...Di,attachments:[...Di.attachments||[],Vi.attachment]};await saveDocument(Xi),yi.current=yi.current.map(fi=>fi.id===Di.id?Xi:fi),di++}}else if(ui.type==="DOC"){let Vi;if("doc"in ui&&ui.doc){const Di=ui.doc,Xi=Dn.find(fi=>fi.id===Di.id);if(!Xi)continue;if(Vi={...Xi,...Di},Vi.status===DocumentStatus.DUPLICATE&&Vi.data){const fi=generateZoeInvoiceId(Vi.data.belegDatum||"",yi.current);Vi.data.eigeneBelegNummer=fi}}else if("data"in ui&&ui.data&&ui.id){const{id:Di,data:Xi}=ui,fi=Dn.find(Fn=>Fn.id===Di);if(!fi)continue;const ni=generateZoeInvoiceId(Xi.belegDatum||"",yi.current);let pi;if(Xi.lieferantName){const Fn=await getVendorRule(Xi.lieferantName);Fn&&(pi={accountId:Fn.accountId,taxCategoryValue:Fn.taxCategoryValue})}const ji=normalizeExtractedData(Xi),hr=ui.outcome||classifyOcrOutcome(ji),ar=applyAccountingRules({...ji,eigeneBelegNummer:ni},yi.current,Qn,pi);Vi={...fi,status:hr.status,data:ar,error:hr.error},yi.current.push(Vi)}if(Vi){qn.push(Vi),await saveDocument$1(Vi);try{await saveDocument(Vi)}catch(Di){console.warn("Failed to sync document to Supabase:",Di)}}}}e(ui=>{const Vi=ui.filter(fi=>!Dn.some(ni=>ni.id===fi.id)),Di=Ni.filter(fi=>fi.type==="MERGE").map(fi=>fi.targetId),Xi=Vi.map(fi=>Di.includes(fi.id)&&yi.current.find(ni=>ni.id===fi.id)||fi);return[...qn,...Xi]}),Ae(!1),di>0&&Ve(`${di} Duplikat(e) automatisch zusammengefhrt.`),qn.length>0&&Re(qn[0].id)},$n=async Rn=>{var Dn,Jn,Qn;e(qn=>qn.map(yi=>yi.id===Rn.id?Rn:yi)),await saveDocument$1(Rn);try{await saveDocument(Rn)}catch(qn){console.warn("Failed to sync document to Supabase:",qn)}if((Dn=Rn.data)!=null&&Dn.lieferantName&&((Jn=Rn.data)!=null&&Jn.kontierungskonto)&&((Qn=Rn.data)!=null&&Qn.steuerkategorie)){await saveVendorRule$1(Rn.data.lieferantName,Rn.data.kontierungskonto,Rn.data.steuerkategorie);try{await saveVendorRule(Rn.data.lieferantName,Rn.data.kontierungskonto,Rn.data.steuerkategorie)}catch(qn){console.warn("Failed to sync vendor rule to Supabase:",qn)}}},Ln=async Rn=>{e(Dn=>Dn.filter(Jn=>Jn.id!==Rn)),Pe===Rn&&Re(null),await deleteDocument$1(Rn);try{await deleteDocument(Rn)}catch(Dn){console.warn("Failed to delete document from Supabase:",Dn)}},Gn=async(Rn,Dn)=>{if(Rn===Dn)return;const Jn=t.find(di=>di.id===Rn),Qn=t.find(di=>di.id===Dn);if(!Jn||!Qn)return;if(Jn.status===DocumentStatus.DUPLICATE||Qn.status===DocumentStatus.DUPLICATE){Ve("Merge abgebrochen: Duplikate knnen nicht als Quelle/Ziel genutzt werden.");return}if(Jn.status===DocumentStatus.ERROR||Qn.status===DocumentStatus.ERROR){Ve("Merge abgebrochen: Belege mit Fehlerstatus knnen nicht gemerged werden.");return}if(Jn.status===DocumentStatus.REVIEW_NEEDED||Qn.status===DocumentStatus.REVIEW_NEEDED){Ve('Merge abgebrochen: Belege mit Status "Prfen" bitte erst korrigieren, dann mergen.');return}if(!confirm(`Mchten Sie "${Jn.fileName}" in "${Qn.fileName}" integrieren?`))return;const qn={id:crypto.randomUUID(),url:Jn.previewUrl||"",type:Jn.fileType,name:Jn.fileName},yi={...Qn,attachments:[...Qn.attachments||[],qn,...Jn.attachments||[]]};await saveDocument$1(yi),await deleteDocument$1(Rn);try{await saveDocument(yi),await deleteDocument(Rn)}catch(di){console.warn("Failed to sync merge to Supabase:",di)}e(di=>di.filter(zi=>zi.id!==Rn).map(zi=>zi.id===Dn?yi:zi)),Ve("Belege erfolgreich zusammengefhrt."),Pe===Rn&&Re(Dn)},Yn=async Rn=>{var Dn;if(Rn.previewUrl){e(Jn=>Jn.map(Qn=>Qn.id===Rn.id?{...Qn,status:DocumentStatus.PROCESSING,error:void 0}:Qn));try{const Jn=Rn.previewUrl.split(",")[1],Qn=await analyzeDocumentWithGemini(Jn,Rn.fileType),qn=normalizeExtractedData(Qn),yi=r||await getSettings$1(),di=(Dn=Rn.data)==null?void 0:Dn.eigeneBelegNummer;let zi;if(qn.lieferantName){const Vi=await getVendorRule(qn.lieferantName);Vi&&(zi={accountId:Vi.accountId,taxCategoryValue:Vi.taxCategoryValue})}let Ni=applyAccountingRules(qn,t,yi,zi);Ni.eigeneBelegNummer=di||generateZoeInvoiceId(Ni.belegDatum,t);const Gi=classifyOcrOutcome(Ni),ui={...Rn,status:Gi.status,data:Ni,error:Gi.error};await $n(ui)}catch(Jn){const Qn=Jn instanceof Error?Jn.message:"Retry fehlgeschlagen",qn={...Rn,status:DocumentStatus.ERROR,error:Qn};await $n(qn)}}},ii=(Rn,Dn)=>{_n(Rn),un(Dn)},Wn=()=>{un(null),_n(null)},Pn=async Rn=>{const Dn=t.find(Jn=>Jn.id===Rn);if(Dn){const Jn={...Dn,status:DocumentStatus.REVIEW_NEEDED,duplicateOfId:void 0,duplicateConfidence:void 0,duplicateReason:void 0};await $n(Jn)}Wn()},Zn=reactExports.useMemo(()=>t.filter(Rn=>{var qn,yi,di,zi;if(ke){const Ni=ke.toLowerCase(),Gi=Rn.data;if(!Rn.fileName.toLowerCase().includes(Ni)&&!((qn=Gi==null?void 0:Gi.lieferantName)!=null&&qn.toLowerCase().includes(Ni))&&!((yi=Gi==null?void 0:Gi.eigeneBelegNummer)!=null&&yi.toLowerCase().includes(Ni))&&!((di=Gi==null?void 0:Gi.bruttoBetrag)!=null&&di.toString().includes(Ni)))return!1}const Dn=((zi=Rn.data)==null?void 0:zi.belegDatum)||Rn.uploadDate,Jn=Dn.substring(0,4),Qn=parseInt(Dn.substring(5,7),10);return!(rn!=="all"&&Jn!==rn||Ke!=="all"&&Qn!==parseInt(Ke,10)||an!=="all"&&`Q${Math.ceil(Qn/3)}`!==an)}),[t,ke,rn,an,Ke]),mn=reactExports.useMemo(()=>{const Rn=new Set;return t.forEach(Dn=>{var Qn;const Jn=((Qn=Dn.data)==null?void 0:Qn.belegDatum)||Dn.uploadDate;Jn&&Rn.add(Jn.substring(0,4))}),Array.from(Rn).sort().reverse()},[t]),Cn=()=>{if(Ce==="settings"&&r)return jsxRuntimeExports.jsx(SettingsView,{settings:r,onSave:async Rn=>{xe(Rn),await saveSettings$1(Rn);try{await saveSettings(Rn)}catch(Dn){console.warn("Failed to sync settings to Supabase:",Dn)}},onClose:()=>Be("document")});if(Ce==="database"){const Rn=async()=>{const Dn=r||await getSettings$1(),Jn=Zn,Qn=runExportPreflight(Jn,Dn),qn=formatPreflightForDialog(Qn);if(Qn.blockers.length>0){alert(`${qn.title}

${qn.body}`);return}if(Qn.warnings.length>0&&!confirm(`${qn.title}

${qn.body}

Trotzdem exportieren?`))return;const yi=exportDocumentsToSQL(Jn,Dn),di=new Date().toISOString().replace(/[:.]/g,"-"),ui=`zoe_belege_${rn==="all"?"all":rn}_${an==="all"?"all":an}_${Ke==="all"?"all":Ke}_${di}.sql`,Vi=URL.createObjectURL(new Blob([yi],{type:"text/sql"})),Di=document.createElement("a");Di.href=Vi,Di.download=ui,Di.click()};return jsxRuntimeExports.jsx(DatabaseGrid,{documents:Zn,onSelectDocument:Dn=>{Re(Dn.id),Be("document")},onExportSQL:Rn,onMerge:Gn,settings:r,availableYears:mn,filterYear:rn,onFilterYearChange:tn,filterQuarter:an,onFilterQuarterChange:qe,filterMonth:Ke,onFilterMonthChange:sn})}if(Pe){const Rn=t.find(Dn=>Dn.id===Pe);if(Rn)return jsxRuntimeExports.jsx(DocumentDetail,{document:Rn,allDocuments:t,taxCategories:[],onSave:$n,onDelete:Ln,onRetryOCR:Yn,onSelectDocument:Dn=>Re(Dn.id),onClose:()=>Re(null),onMerge:Gn})}return jsxRuntimeExports.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-6 md:p-8 bg-white/50 relative",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-blue-400/10 rounded-full blur-[100px]"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-purple-400/10 rounded-full blur-[100px]"})]}),jsxRuntimeExports.jsxs("div",{className:"max-w-xl w-full z-10",children:[jsxRuntimeExports.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-center mb-8 text-slate-800 tracking-tight",children:[jsxRuntimeExports.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600",children:"ZOE Solar"})," Accounting"]}),jsxRuntimeExports.jsx(UploadArea,{onFilesSelected:kn,isProcessing:Ee}),jsxRuntimeExports.jsxs("div",{className:"mt-8 flex justify-center gap-6 text-slate-400 text-xs md:hidden",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"font-bold text-slate-600 text-lg",children:t.length}),jsxRuntimeExports.jsx("div",{children:"Belege"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"font-bold text-slate-600 text-lg",children:mn[0]||new Date().getFullYear()}),jsxRuntimeExports.jsx("div",{children:"Aktuelles Jahr"})]})]})]})]})},jn=({active:Rn,label:Dn,icon:Jn,onClick:Qn})=>jsxRuntimeExports.jsxs("button",{onClick:Qn,className:`w-full text-left px-3 py-2 text-sm font-medium rounded-lg flex items-center gap-3 transition-all ${Rn?"bg-blue-50 text-blue-700 shadow-sm ring-1 ring-blue-100":"text-slate-600 hover:bg-slate-100"}`,children:[jsxRuntimeExports.jsx("span",{className:`${Rn?"text-blue-600":"text-slate-400"}`,children:Jn}),Dn]});return jsxRuntimeExports.jsxs("div",{className:"h-[100dvh] flex bg-white text-slate-900 font-sans text-sm antialiased relative overflow-hidden",children:[Fe&&jsxRuntimeExports.jsxs("div",{className:"absolute top-6 left-1/2 -translate-x-1/2 z-[60] bg-slate-900/90 backdrop-blur-md text-white px-4 py-3 rounded-2xl shadow-2xl flex items-center gap-3 animate-in fade-in slide-in-from-top-4 duration-300",children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:Fe})]}),Oe&&jsxRuntimeExports.jsxs("div",{className:"absolute top-6 left-1/2 -translate-x-1/2 z-[60] bg-amber-50/90 backdrop-blur-md border border-amber-200 text-amber-900 px-4 py-3 rounded-2xl shadow-2xl flex items-center gap-3 animate-in fade-in slide-in-from-top-4 duration-300 max-w-md",children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 text-amber-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col min-w-0",children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Privatbeleg erkannt"}),jsxRuntimeExports.jsxs("span",{className:"text-xs opacity-75 truncate",children:[Oe.vendor," - ",Oe.amount.toFixed(2)," EUR"]}),jsxRuntimeExports.jsx("span",{className:"text-[10px] opacity-60 truncate",children:Oe.reason})]}),jsxRuntimeExports.jsx("button",{onClick:()=>$e(null),className:"ml-2 text-amber-600 hover:text-amber-800 flex-shrink-0",children:jsxRuntimeExports.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),jsxRuntimeExports.jsxs("aside",{ref:Je,style:{width:An},className:"hidden md:flex bg-slate-50/50 border-r border-slate-200/60 flex-col z-20 flex-shrink-0 relative group backdrop-blur-xl",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-blue-500/50 z-50 transition-colors",onMouseDown:wn}),jsxRuntimeExports.jsx("div",{className:"h-16 flex items-center px-5 border-b border-slate-200/60 flex-none",children:jsxRuntimeExports.jsxs("div",{className:"font-bold text-lg flex items-center gap-2 text-slate-800 tracking-tight",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center text-white shadow-lg shadow-blue-500/30",children:jsxRuntimeExports.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:jsxRuntimeExports.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})})}),jsxRuntimeExports.jsx("span",{children:"ZOE"})]})}),jsxRuntimeExports.jsxs("div",{className:"p-4 space-y-4 border-b border-slate-200/60",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-1",children:[jsxRuntimeExports.jsx(jn,{active:Ce==="document",label:"Belege",icon:jsxRuntimeExports.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),jsxRuntimeExports.jsx("polyline",{points:"14 2 14 8 20 8"}),jsxRuntimeExports.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),jsxRuntimeExports.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),jsxRuntimeExports.jsx("polyline",{points:"10 9 9 9 8 9"})]}),onClick:()=>{Re(null),Be("document")}}),jsxRuntimeExports.jsx(jn,{active:Ce==="database",label:"Berichte",icon:jsxRuntimeExports.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),jsxRuntimeExports.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),jsxRuntimeExports.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),onClick:()=>{Re(null),Be("database")}})]}),jsxRuntimeExports.jsxs("div",{className:"relative group",children:[jsxRuntimeExports.jsxs("svg",{className:"absolute left-3 top-2.5 text-slate-400 w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[jsxRuntimeExports.jsx("circle",{cx:"11",cy:"11",r:"8"}),jsxRuntimeExports.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),jsxRuntimeExports.jsx("input",{className:"w-full bg-white border border-slate-200 rounded-xl pl-9 pr-3 py-2 text-sm outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all shadow-sm",placeholder:"Suchen...",value:ke,onChange:Rn=>Me(Rn.target.value)})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("select",{value:rn,onChange:Rn=>tn(Rn.target.value),className:"bg-white border border-slate-200 rounded-lg text-xs py-1.5 px-2 flex-1 outline-none focus:border-blue-500 cursor-pointer text-slate-600 font-medium",children:[jsxRuntimeExports.jsx("option",{value:"all",children:"Jahr"}),mn.map(Rn=>jsxRuntimeExports.jsx("option",{value:Rn,children:Rn},Rn))]}),jsxRuntimeExports.jsxs("select",{value:Ke,onChange:Rn=>sn(Rn.target.value),className:"bg-white border border-slate-200 rounded-lg text-xs py-1.5 px-2 w-16 outline-none focus:border-blue-500 cursor-pointer text-slate-600 font-medium",children:[jsxRuntimeExports.jsx("option",{value:"all",children:"Mon"}),Array.from({length:12},(Rn,Dn)=>Dn+1).map(Rn=>jsxRuntimeExports.jsx("option",{value:Rn.toString().padStart(2,"0"),children:Rn},Rn))]})]})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col p-2 gap-1",children:[jsxRuntimeExports.jsxs("div",{className:"px-3 py-2 text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:["Neueste (",Zn.length,")"]}),Zn.map(Rn=>{var Ni,Gi,ui,Vi;const Dn=Pe===Rn.id,Jn=bn===Rn.id,Qn=Rn.status===DocumentStatus.DUPLICATE,qn=Rn.status===DocumentStatus.ERROR,yi=Rn.status===DocumentStatus.REVIEW_NEEDED,di=Qn||qn||yi,zi=((Ni=Rn.data)==null?void 0:Ni.eigeneBelegNummer)||Rn.id.substring(0,8);return jsxRuntimeExports.jsxs("div",{draggable:!di,title:Qn?`Duplikat: ${Rn.duplicateReason}`:(qn||yi)&&(Rn.error||((Gi=Rn.data)==null?void 0:Gi.ocr_rationale))||"",onClick:()=>{Re(Rn.id),Be("document")},onDragStart:Di=>{if(di){Di.preventDefault();return}Di.dataTransfer.setData("text/plain",Rn.id),Di.dataTransfer.effectAllowed="move"},onDragOver:Di=>{di||(Di.preventDefault(),fn(Rn.id))},onDragLeave:()=>fn(null),onDrop:Di=>{if(Di.preventDefault(),fn(null),di)return;const Xi=Di.dataTransfer.getData("text/plain");Xi&&Xi!==Rn.id&&Gn(Xi,Rn.id)},className:`
                                flex items-center gap-3 px-3 py-2.5 rounded-xl cursor-pointer transition-all relative
                                ${Dn?"bg-white shadow-md shadow-blue-500/5 text-blue-700 ring-1 ring-blue-100":"text-slate-600 hover:bg-slate-100/80"}
                                ${Jn?"ring-2 ring-blue-500 bg-blue-50":""}
                                ${Qn&&!Dn?"bg-red-50 text-red-600":""}
                                ${Qn||qn||yi?"opacity-80":""}
                            `,children:[jsxRuntimeExports.jsx("div",{className:`w-2 h-2 rounded-full flex-none ${Qn?"bg-red-500":qn?"bg-rose-500":yi?"bg-amber-500":Dn?"bg-blue-500":"bg-slate-300"}`}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-baseline",children:[jsxRuntimeExports.jsx("span",{className:"font-mono font-medium text-xs truncate opacity-90",children:zi}),((ui=Rn.data)==null?void 0:ui.bruttoBetrag)&&jsxRuntimeExports.jsxs("span",{className:"text-[10px] opacity-70 font-mono ml-1",children:[Math.round(Rn.data.bruttoBetrag),""]})]}),jsxRuntimeExports.jsx("div",{className:"truncate text-xs opacity-70 flex items-center gap-1",children:((Vi=Rn.data)==null?void 0:Vi.lieferantName)||Rn.fileName})]}),Qn&&jsxRuntimeExports.jsx("button",{onClick:Di=>{Di.stopPropagation();const Xi=t.find(fi=>fi.id===Rn.duplicateOfId);Xi&&ii(Xi,Rn)},className:"p-1 text-red-500 hover:bg-red-100 rounded transition-colors",title:"Mit Original vergleichen",children:jsxRuntimeExports.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),jsxRuntimeExports.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),jsxRuntimeExports.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),jsxRuntimeExports.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]})})]},Rn.id)})]})}),jsxRuntimeExports.jsx("div",{className:"p-4 border-t border-slate-200/60 bg-slate-50/30",children:jsxRuntimeExports.jsx(jn,{active:Ce==="settings",label:"Einstellungen",icon:jsxRuntimeExports.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"3"}),jsxRuntimeExports.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2-2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),onClick:()=>{Re(null),Be("settings")}})})]}),jsxRuntimeExports.jsxs("nav",{className:"md:hidden fixed bottom-6 left-4 right-4 h-16 bg-white/80 backdrop-blur-2xl border border-white/20 shadow-[0_8px_30px_rgb(0,0,0,0.12)] rounded-2xl z-50 flex items-center justify-around px-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{Re(null),Be("document")},className:`flex flex-col items-center gap-1 p-2 rounded-xl transition-all ${Ce==="document"&&!Pe?"text-blue-600 bg-blue-50":"text-slate-400"}`,children:jsxRuntimeExports.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),jsxRuntimeExports.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),jsxRuntimeExports.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]})}),jsxRuntimeExports.jsx("button",{onClick:()=>{t.length>0?Re(t[0].id):Be("document")},className:`flex flex-col items-center gap-1 p-2 rounded-xl transition-all ${Pe?"text-blue-600 bg-blue-50":"text-slate-400"}`,children:jsxRuntimeExports.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),jsxRuntimeExports.jsx("polyline",{points:"14 2 14 8 20 8"}),jsxRuntimeExports.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),jsxRuntimeExports.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),jsxRuntimeExports.jsx("polyline",{points:"10 9 9 9 8 9"})]})}),jsxRuntimeExports.jsx("button",{onClick:()=>{Re(null),Be("database")},className:`flex flex-col items-center gap-1 p-2 rounded-xl transition-all ${Ce==="database"?"text-blue-600 bg-blue-50":"text-slate-400"}`,children:jsxRuntimeExports.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),jsxRuntimeExports.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),jsxRuntimeExports.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]})}),jsxRuntimeExports.jsx("button",{onClick:()=>{Re(null),Be("settings")},className:`flex flex-col items-center gap-1 p-2 rounded-xl transition-all ${Ce==="settings"?"text-blue-600 bg-blue-50":"text-slate-400"}`,children:jsxRuntimeExports.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"3"}),jsxRuntimeExports.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2-2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]})})]}),jsxRuntimeExports.jsx("main",{className:"flex-1 flex flex-col relative overflow-hidden bg-white/50 min-w-0 md:mb-0 mb-20",children:Cn()}),Ze&&yn&&jsxRuntimeExports.jsx(DuplicateCompareModal,{original:yn,duplicate:Ze,allDocuments:t,onClose:Wn,onDelete:Ln,onSave:$n,onMerge:Gn,onSelectDocument:Rn=>{Re(Rn.id),Be("document"),Wn()},onIgnoreDuplicate:Pn})]})}const rootElement=document.getElementById("root");if(!rootElement)throw new Error("Could not find root element to mount to");const root=ReactDOM.createRoot(rootElement);root.render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));export{_typeof$2 as _,commonjsGlobal as c,getDefaultExportFromCjs as g};
